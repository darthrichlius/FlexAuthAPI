var rZ=Object.create;var jp=Object.defineProperty;var nZ=Object.getOwnPropertyDescriptor;var iZ=Object.getOwnPropertyNames;var sZ=Object.getPrototypeOf,oZ=Object.prototype.hasOwnProperty;var uZ=(t,e)=>()=>(t&&(e=t(t=0)),e);var y=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),aZ=(t,e)=>{for(var r in e)jp(t,r,{get:e[r],enumerable:!0})},Lp=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of iZ(e))!oZ.call(t,i)&&i!==r&&jp(t,i,{get:()=>e[i],enumerable:!(n=nZ(e,i))||n.enumerable});return t},Ia=(t,e,r)=>(Lp(t,e,"default"),r&&Lp(r,e,"default")),_T=(t,e,r)=>(r=t!=null?rZ(sZ(t)):{},Lp(e||!t||!t.__esModule?jp(r,"default",{value:t,enumerable:!0}):r,t)),cZ=t=>Lp(jp({},"__esModule",{value:!0}),t);var lZ,f=uZ(()=>{lZ=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};lZ.SENTRY_RELEASE={id:"e59dffade4495c8bb285a87ac6e4b0c656450a7e"}});var tl=y((OT,CT)=>{"use strict";f();var Gs=CT.exports=OT=Object.create(null),ET="disconnected",AT="connected",wT="connecting",ST="disconnecting",bT="uninitialized";Gs[0]=ET;Gs[1]=AT;Gs[2]=wT;Gs[3]=ST;Gs[99]=bT;Gs[ET]=0;Gs[AT]=1;Gs[wT]=2;Gs[ST]=3;Gs[bT]=99});var Ti=y((I5e,TT)=>{"use strict";f();var fZ=typeof process<"u"&&typeof process.nextTick=="function"?process.nextTick.bind(process):t=>setTimeout(t,0);TT.exports=function(e){return fZ(e)}});var vT=y((N5e,MT)=>{"use strict";f();var hZ=require("events").EventEmitter,dZ=tl(),DT=Ti();function at(t,e,r){r===void 0&&(r={}),this.opts=r,this.name=t,this.collectionName=t,this.conn=e,this.queue=[],this.buffer=!0,this.emitter=new hZ,dZ.connected===this.conn.readyState&&this.onOpen()}at.prototype.name;at.prototype.collectionName;at.prototype.conn;at.prototype.onOpen=function(){this.buffer=!1,DT(()=>this.doQueue())};at.prototype.onClose=function(){};at.prototype.addQueue=function(t,e){return this.queue.push([t,e]),this};at.prototype.removeQueue=function(t,e){let r=this.queue.findIndex(n=>n[0]===t&&n[1]===e);return r===-1?!1:(this.queue.splice(r,1),!0)};at.prototype.doQueue=function(){for(let e of this.queue)typeof e[0]=="function"?e[0].apply(this,e[1]):this[e[0]].apply(this,e[1]);this.queue=[];let t=this;return DT(function(){t.emitter.emit("queue")}),this};at.prototype.ensureIndex=function(){throw new Error("Collection#ensureIndex unimplemented by driver")};at.prototype.createIndex=function(){throw new Error("Collection#createIndex unimplemented by driver")};at.prototype.findAndModify=function(){throw new Error("Collection#findAndModify unimplemented by driver")};at.prototype.findOneAndUpdate=function(){throw new Error("Collection#findOneAndUpdate unimplemented by driver")};at.prototype.findOneAndDelete=function(){throw new Error("Collection#findOneAndDelete unimplemented by driver")};at.prototype.findOneAndReplace=function(){throw new Error("Collection#findOneAndReplace unimplemented by driver")};at.prototype.findOne=function(){throw new Error("Collection#findOne unimplemented by driver")};at.prototype.find=function(){throw new Error("Collection#find unimplemented by driver")};at.prototype.insert=function(){throw new Error("Collection#insert unimplemented by driver")};at.prototype.insertOne=function(){throw new Error("Collection#insertOne unimplemented by driver")};at.prototype.insertMany=function(){throw new Error("Collection#insertMany unimplemented by driver")};at.prototype.save=function(){throw new Error("Collection#save unimplemented by driver")};at.prototype.updateOne=function(){throw new Error("Collection#updateOne unimplemented by driver")};at.prototype.updateMany=function(){throw new Error("Collection#updateMany unimplemented by driver")};at.prototype.deleteOne=function(){throw new Error("Collection#deleteOne unimplemented by driver")};at.prototype.deleteMany=function(){throw new Error("Collection#deleteMany unimplemented by driver")};at.prototype.getIndexes=function(){throw new Error("Collection#getIndexes unimplemented by driver")};at.prototype.watch=function(){throw new Error("Collection#watch unimplemented by driver")};at.prototype._shouldBufferCommands=function(){let e=this.opts;return e.bufferCommands!=null?e.bufferCommands:e&&e.schemaUserProvidedOptions!=null&&e.schemaUserProvidedOptions.bufferCommands!=null?e.schemaUserProvidedOptions.bufferCommands:this.conn._shouldBufferCommands()};at.prototype._getBufferTimeoutMS=function(){let e=this.conn,r=this.opts;return r.bufferTimeoutMS!=null?r.bufferTimeoutMS:r&&r.schemaUserProvidedOptions!=null&&r.schemaUserProvidedOptions.bufferTimeoutMS!=null?r.schemaUserProvidedOptions.bufferTimeoutMS:e.config.bufferTimeoutMS!=null?e.config.bufferTimeoutMS:e.base!=null&&e.base.get("bufferTimeoutMS")!=null?e.base.get("bufferTimeoutMS"):1e4};MT.exports=at});var Fe=y((x5e,BT)=>{"use strict";f();var Up=class extends Error{};Object.defineProperty(Up.prototype,"name",{value:"MongooseError"});BT.exports=Up});var vi=y(st=>{"use strict";f();var pZ=(()=>{let t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return e=>t.call(e)})();function il(t){return pZ(t)==="Uint8Array"}function G3(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&(t[Symbol.toStringTag]==="ArrayBuffer"||t[Symbol.toStringTag]==="SharedArrayBuffer")}function sl(t){return t instanceof RegExp||Object.prototype.toString.call(t)==="[object RegExp]"}function K3(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Map"}function ol(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function ui(t,e){return JSON.stringify(t,(r,n)=>typeof n=="bigint"?{$numberLong:`${n}`}:K3(n)?Object.fromEntries(n):n)}function mZ(t){if(t!=null&&typeof t=="object"&&"stylize"in t&&typeof t.stylize=="function")return t.stylize}var Na=6,cl=Symbol.for("@@mdb.bson.version"),If=2147483647,Pf=-2147483648,GT=Math.pow(2,63)-1,KT=-Math.pow(2,63),YT=Math.pow(2,53),QT=-Math.pow(2,53),Y3=1,JT=2,Q3=3,XT=4,J3=5,yZ=6,ZT=7,eD=8,tD=9,X3=10,Wp=11,gZ=12,Z3=13,rD=14,nD=15,vf=16,iD=17,e6=18,sD=19,oD=255,uD=127,_Z=0,t6=4,aD=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127}),V=class extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(e,r){super(e,r)}static isBSONError(e){return e!=null&&typeof e=="object"&&"bsonError"in e&&e.bsonError===!0&&"name"in e&&"message"in e&&"stack"in e}},Mo=class extends V{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${Na}.x.x`)}},ll=class extends V{get name(){return"BSONRuntimeError"}constructor(e){super(e)}},Mi=class extends V{get name(){return"BSONOffsetError"}constructor(e,r,n){super(`${e}. offset: ${r}`,n),this.offset=r}},IT,PT;function cD(t,e,r,n){if(n){IT??=new TextDecoder("utf8",{fatal:!0});try{return IT.decode(t.subarray(e,r))}catch(i){throw new V("Invalid UTF-8 string in BSON document",{cause:i})}}return PT??=new TextDecoder("utf8",{fatal:!1}),PT.decode(t.subarray(e,r))}function lD(t,e,r){if(t.length===0)return"";let n=r-e;if(n===0)return"";if(n>20)return null;if(n===1&&t[e]<128)return String.fromCharCode(t[e]);if(n===2&&t[e]<128&&t[e+1]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1]);if(n===3&&t[e]<128&&t[e+1]<128&&t[e+2]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1])+String.fromCharCode(t[e+2]);let i=[];for(let s=e;s<r;s++){let o=t[s];if(o>127)return null;i.push(o)}return String.fromCharCode(...i)}function EZ(t,e,r){if(e.length===0)return 0;if(e.length>25||t.length-r<e.length)return null;for(let n=0,i=r;n<e.length;n++,i++){let s=e.charCodeAt(n);if(s>127)return null;t[i]=s}return e.length}function AZ(t){return To.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}var wZ=(()=>{try{return require("crypto").randomBytes}catch{return AZ}})(),To={toLocalBufferType(t){if(Buffer.isBuffer(t))return t;if(ArrayBuffer.isView(t))return Buffer.from(t.buffer,t.byteOffset,t.byteLength);let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return Buffer.from(t);throw new V("Cannot create Buffer from the passed potentialBuffer.")},allocate(t){return Buffer.alloc(t)},allocateUnsafe(t){return Buffer.allocUnsafe(t)},equals(t,e){return To.toLocalBufferType(t).equals(e)},fromNumberArray(t){return Buffer.from(t)},fromBase64(t){return Buffer.from(t,"base64")},toBase64(t){return To.toLocalBufferType(t).toString("base64")},fromISO88591(t){return Buffer.from(t,"binary")},toISO88591(t){return To.toLocalBufferType(t).toString("binary")},fromHex(t){return Buffer.from(t,"hex")},toHex(t){return To.toLocalBufferType(t).toString("hex")},toUTF8(t,e,r,n){let i=r-e<=20?lD(t,e,r):null;if(i!=null)return i;let s=To.toLocalBufferType(t).toString("utf8",e,r);if(n){for(let o=0;o<s.length;o++)if(s.charCodeAt(o)===65533){cD(t,e,r,!0);break}}return s},utf8ByteLength(t){return Buffer.byteLength(t,"utf8")},encodeUTF8Into(t,e,r){let n=EZ(t,e,r);return n??To.toLocalBufferType(t).write(e,r,void 0,"utf8")},randomBytes:wZ,swap32(t){return To.toLocalBufferType(t).swap32()}};function SZ(){let{navigator:t}=globalThis;return typeof t=="object"&&t.product==="ReactNative"}function bZ(t){if(t<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${t}`);return Bf.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}var OZ=(()=>{let{crypto:t}=globalThis;if(t!=null&&typeof t.getRandomValues=="function")return e=>t.getRandomValues(Bf.allocate(e));if(SZ()){let{console:e}=globalThis;e?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return bZ})(),NT=/(\d|[a-f])/i,Bf={toLocalBufferType(t){let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="Uint8Array")return t;if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return new Uint8Array(t);throw new V("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(t){if(typeof t!="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(t)}`);return new Uint8Array(t)},allocateUnsafe(t){return Bf.allocate(t)},equals(t,e){if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},fromNumberArray(t){return Uint8Array.from(t)},fromBase64(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))},toBase64(t){return btoa(Bf.toISO88591(t))},fromISO88591(t){return Uint8Array.from(t,e=>e.charCodeAt(0)&255)},toISO88591(t){return Array.from(Uint16Array.from(t),e=>String.fromCharCode(e)).join("")},fromHex(t){let e=t.length%2===0?t:t.slice(0,t.length-1),r=[];for(let n=0;n<e.length;n+=2){let i=e[n],s=e[n+1];if(!NT.test(i)||!NT.test(s))break;let o=Number.parseInt(`${i}${s}`,16);r.push(o)}return Uint8Array.from(r)},toHex(t){return Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")},toUTF8(t,e,r,n){let i=r-e<=20?lD(t,e,r):null;return i??cD(t,e,r,n)},utf8ByteLength(t){return new TextEncoder().encode(t).byteLength},encodeUTF8Into(t,e,r){let n=new TextEncoder().encode(e);return t.set(n,r),n.byteLength},randomBytes:OZ,swap32(t){if(t.length%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t.length;e+=4){let r=t[e],n=t[e+1],i=t[e+2],s=t[e+3];t[e]=s,t[e+1]=i,t[e+2]=n,t[e+3]=r}return t}},CZ=typeof Buffer=="function"&&Buffer.prototype?._isBuffer!==!0,U=CZ?To:Bf,Gr=class{get[cl](){return Na}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return this.inspect(e,r,n)}},ul=new Float64Array(1),Qe=new Uint8Array(ul.buffer,0,8);ul[0]=-1;var S3=Qe[7]===0,Ee={isBigEndian:S3,getNonnegativeInt32LE(t,e){if(t[e+3]>127)throw new RangeError(`Size cannot be negative at offset: ${e}`);return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getInt32LE(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getUint32LE(t,e){return t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216},getUint32BE(t,e){return t[e+3]+t[e+2]*256+t[e+1]*65536+t[e]*16777216},getBigInt64LE(t,e){let r=Ee.getUint32LE(t,e),n=Ee.getUint32LE(t,e+4);return(BigInt(n)<<BigInt(32))+BigInt(r)},getFloat64LE:S3?(t,e)=>(Qe[7]=t[e],Qe[6]=t[e+1],Qe[5]=t[e+2],Qe[4]=t[e+3],Qe[3]=t[e+4],Qe[2]=t[e+5],Qe[1]=t[e+6],Qe[0]=t[e+7],ul[0]):(t,e)=>(Qe[0]=t[e],Qe[1]=t[e+1],Qe[2]=t[e+2],Qe[3]=t[e+3],Qe[4]=t[e+4],Qe[5]=t[e+5],Qe[6]=t[e+6],Qe[7]=t[e+7],ul[0]),setInt32BE(t,e,r){return t[e+3]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e]=r,4},setInt32LE(t,e,r){return t[e]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+3]=r,4},setBigInt64LE(t,e,r){let n=BigInt(4294967295),i=Number(r&n);t[e]=i,i>>=8,t[e+1]=i,i>>=8,t[e+2]=i,i>>=8,t[e+3]=i;let s=Number(r>>BigInt(32)&n);return t[e+4]=s,s>>=8,t[e+5]=s,s>>=8,t[e+6]=s,s>>=8,t[e+7]=s,8},setFloat64LE:S3?(t,e,r)=>(ul[0]=r,t[e]=Qe[7],t[e+1]=Qe[6],t[e+2]=Qe[5],t[e+3]=Qe[4],t[e+4]=Qe[3],t[e+5]=Qe[2],t[e+6]=Qe[1],t[e+7]=Qe[0],8):(t,e,r)=>(ul[0]=r,t[e]=Qe[0],t[e+1]=Qe[1],t[e+2]=Qe[2],t[e+3]=Qe[3],t[e+4]=Qe[4],t[e+5]=Qe[5],t[e+6]=Qe[6],t[e+7]=Qe[7],8)},Ge=class t extends Gr{get _bsontype(){return"Binary"}constructor(e,r){if(super(),e!=null&&typeof e=="string"&&!ArrayBuffer.isView(e)&&!G3(e)&&!Array.isArray(e))throw new V("Binary can only be constructed from Uint8Array or number[]");this.sub_type=r??t.BSON_BINARY_SUBTYPE_DEFAULT,e==null?(this.buffer=U.allocate(t.BUFFER_SIZE),this.position=0):(this.buffer=Array.isArray(e)?U.fromNumberArray(e):U.toLocalBufferType(e),this.position=this.buffer.byteLength)}put(e){if(typeof e=="string"&&e.length!==1)throw new V("only accepts single character String");if(typeof e!="number"&&e.length!==1)throw new V("only accepts single character Uint8Array or Array");let r;if(typeof e=="string"?r=e.charCodeAt(0):typeof e=="number"?r=e:r=e[0],r<0||r>255)throw new V("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=r;else{let n=U.allocate(t.BUFFER_SIZE+this.buffer.length);n.set(this.buffer,0),this.buffer=n,this.buffer[this.position++]=r}}write(e,r){if(r=typeof r=="number"?r:this.position,this.buffer.byteLength<r+e.length){let n=U.allocate(this.buffer.byteLength+e.length);n.set(this.buffer,0),this.buffer=n}if(ArrayBuffer.isView(e))this.buffer.set(U.toLocalBufferType(e),r),this.position=r+e.byteLength>this.position?r+e.length:this.position;else if(typeof e=="string")throw new V("input cannot be string")}read(e,r){r=r&&r>0?r:this.position;let n=e+r;return this.buffer.subarray(e,n>this.position?this.position:n)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return U.toBase64(this.buffer.subarray(0,this.position))}toString(e){return e==="hex"?U.toHex(this.buffer.subarray(0,this.position)):e==="base64"?U.toBase64(this.buffer.subarray(0,this.position)):e==="utf8"||e==="utf-8"?U.toUTF8(this.buffer,0,this.position,!1):U.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(e){e=e||{},this.sub_type===t.SUBTYPE_VECTOR&&fD(this);let r=U.toBase64(this.buffer),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}}toUUID(){if(this.sub_type===t.SUBTYPE_UUID)return new Mu(this.buffer.subarray(0,this.position));throw new V(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${t.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(e,r){return new t(U.fromHex(e),r)}static createFromBase64(e,r){return new t(U.fromBase64(e),r)}static fromExtendedJSON(e,r){r=r||{};let n,i;if("$binary"in e?r.legacy&&typeof e.$binary=="string"&&"$type"in e?(i=e.$type?parseInt(e.$type,16):0,n=U.fromBase64(e.$binary)):typeof e.$binary!="string"&&(i=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=U.fromBase64(e.$binary.base64)):"$uuid"in e&&(i=4,n=Mu.bytesFromString(e.$uuid)),!n)throw new V(`Unexpected Binary Extended JSON format ${JSON.stringify(e)}`);return i===t6?new Mu(n):new t(n,i)}inspect(e,r,n){n??=ui;let i=U.toBase64(this.buffer.subarray(0,this.position)),s=n(i,r),o=n(this.sub_type,r);return`Binary.createFromBase64(${s}, ${o})`}toInt8Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new V("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Int8)throw new V("Binary datatype field is not Int8");return new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new V("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Float32)throw new V("Binary datatype field is not Float32");let e=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));return Ee.isBigEndian&&U.swap32(e),new Float32Array(e.buffer)}toPackedBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new V("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new V("Binary datatype field is not packed bit");return new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new V("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new V("Binary datatype field is not packed bit");let r=(this.length()-2)*8-this.buffer[1],n=new Int8Array(r);for(let i=0;i<n.length;i++){let s=i/8|0,o=this.buffer[s+2],u=7-i%8,a=o>>u&1;n[i]=a}return n}static fromInt8Array(e){let r=U.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Int8,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return r.set(n,2),new this(r,this.SUBTYPE_VECTOR)}static fromFloat32Array(e){let r=U.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Float32,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return r.set(n,2),Ee.isBigEndian&&U.swap32(new Uint8Array(r.buffer,2)),new this(r,this.SUBTYPE_VECTOR)}static fromPackedBits(e,r=0){let n=U.allocate(e.byteLength+2);return n[0]=t.VECTOR_TYPE.PackedBit,n[1]=r,n.set(e,2),new this(n,this.SUBTYPE_VECTOR)}static fromBits(e){let r=e.length+7>>>3,n=new Uint8Array(r+2);n[0]=t.VECTOR_TYPE.PackedBit;let i=e.length%8;n[1]=i===0?0:8-i;for(let s=0;s<e.length;s++){let o=s>>>3,u=e[s];if(u!==0&&u!==1)throw new V(`Invalid bit value at ${s}: must be 0 or 1, found ${e[s]}`);if(u===0)continue;let a=7-s%8;n[o+2]|=u<<a}return new this(n,t.SUBTYPE_VECTOR)}};Ge.BSON_BINARY_SUBTYPE_DEFAULT=0;Ge.BUFFER_SIZE=256;Ge.SUBTYPE_DEFAULT=0;Ge.SUBTYPE_FUNCTION=1;Ge.SUBTYPE_BYTE_ARRAY=2;Ge.SUBTYPE_UUID_OLD=3;Ge.SUBTYPE_UUID=4;Ge.SUBTYPE_MD5=5;Ge.SUBTYPE_ENCRYPTED=6;Ge.SUBTYPE_COLUMN=7;Ge.SUBTYPE_SENSITIVE=8;Ge.SUBTYPE_VECTOR=9;Ge.SUBTYPE_USER_DEFINED=128;Ge.VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});function fD(t){if(t.sub_type!==Ge.SUBTYPE_VECTOR)return;let e=t.position,r=t.buffer[0],n=t.buffer[1];if((r===Ge.VECTOR_TYPE.Float32||r===Ge.VECTOR_TYPE.Int8)&&n!==0)throw new V("Invalid Vector: padding must be zero for int8 and float32 vectors");if(r===Ge.VECTOR_TYPE.PackedBit&&n!==0&&e===2)throw new V("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(r===Ge.VECTOR_TYPE.PackedBit&&n>7)throw new V(`Invalid Vector: padding must be a value between 0 and 7. found: ${n}`)}var b3=16,TZ=/^[0-9A-F]{32}$/i,DZ=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,Mu=class t extends Ge{constructor(e){let r;if(e==null)r=t.generate();else if(e instanceof t)r=U.toLocalBufferType(new Uint8Array(e.buffer));else if(ArrayBuffer.isView(e)&&e.byteLength===b3)r=U.toLocalBufferType(e);else if(typeof e=="string")r=t.bytesFromString(e);else throw new V("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(r,t6)}get id(){return this.buffer}set id(e){this.buffer=e}toHexString(e=!0){return e?[U.toHex(this.buffer.subarray(0,4)),U.toHex(this.buffer.subarray(4,6)),U.toHex(this.buffer.subarray(6,8)),U.toHex(this.buffer.subarray(8,10)),U.toHex(this.buffer.subarray(10,16))].join("-"):U.toHex(this.buffer)}toString(e){return e==="hex"?U.toHex(this.id):e==="base64"?U.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(e){if(!e)return!1;if(e instanceof t)return U.equals(e.id,this.id);try{return U.equals(new t(e).id,this.id)}catch{return!1}}toBinary(){return new Ge(this.id,Ge.SUBTYPE_UUID)}static generate(){let e=U.randomBytes(b3);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e}static isValid(e){return e?typeof e=="string"?t.isValidUUIDString(e):il(e)?e.byteLength===b3:e._bsontype==="Binary"&&e.sub_type===this.SUBTYPE_UUID&&e.buffer.byteLength===16:!1}static createFromHexString(e){let r=t.bytesFromString(e);return new t(r)}static createFromBase64(e){return new t(U.fromBase64(e))}static bytesFromString(e){if(!t.isValidUUIDString(e))throw new V("UUID string representation must be 32 hex digits or canonical hyphenated representation");return U.fromHex(e.replace(/-/g,""))}static isValidUUIDString(e){return TZ.test(e)||DZ.test(e)}inspect(e,r,n){return n??=ui,`new UUID(${n(this.toHexString(),r)})`}},vo=class t extends Gr{get _bsontype(){return"Code"}constructor(e,r){super(),this.code=e.toString(),this.scope=r??null}toJSON(){return this.scope!=null?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(e){return new t(e.$code,e.$scope)}inspect(e,r,n){n??=ui;let i=n(this.code,r),s=i.includes(`
`);this.scope!=null&&(i+=`,${s?`
`:" "}${n(this.scope,r)}`);let o=s&&this.scope===null;return`new Code(${s?`
`:""}${i}${o?`
`:""})`}};function hD(t){return t!=null&&typeof t=="object"&&"$id"in t&&t.$id!=null&&"$ref"in t&&typeof t.$ref=="string"&&(!("$db"in t)||"$db"in t&&typeof t.$db=="string")}var Ks=class t extends Gr{get _bsontype(){return"DBRef"}constructor(e,r,n,i){super();let s=e.split(".");s.length===2&&(n=s.shift(),e=s.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=i||{}}get namespace(){return this.collection}set namespace(e){this.collection=e}toJSON(){let e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(e.$db=this.db),e}toExtendedJSON(e){e=e||{};let r={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r}static fromExtendedJSON(e){let r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new t(e.$ref,e.$id,e.$db,r)}inspect(e,r,n){n??=ui;let i=[n(this.namespace,r),n(this.oid,r),...this.db?[n(this.db,r)]:[],...Object.keys(this.fields).length>0?[n(this.fields,r)]:[]];return i[1]=n===ui?`new ObjectId(${i[1]})`:i[1],`new DBRef(${i.join(", ")})`}};function dD(t){if(t==="")return t;let e=0,r=t[e]==="-",n=t[e]==="+";(n||r)&&(e+=1);let i=!1;for(;e<t.length&&t[e]==="0";++e)i=!0;return i?`${r?"-":""}${t.length===e?"0":t.slice(e)}`:n?t.slice(1):t}function MZ(t,e){e=e??10;let r="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,e);return new RegExp(`[^-+${r}]`,"i").test(t)?!1:t}var Di;try{Di=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var RT=65536,vZ=1<<24,al=RT*RT,pD=al*al,xT=pD/2,FT={},$T={},BZ=20,IZ=/^(\+?0|(\+|-)?[1-9][0-9]*)$/,se=class t extends Gr{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(e=0,r,n){super();let i=typeof r=="boolean"?r:!!n,s=typeof r=="number"?r:0,o=typeof e=="string"?t.fromString(e,i):typeof e=="bigint"?t.fromBigInt(e,i):{low:e|0,high:s|0,unsigned:i};this.low=o.low,this.high=o.high,this.unsigned=o.unsigned}static fromBits(e,r,n){return new t(e,r,n)}static fromInt(e,r){let n,i,s;return r?(e>>>=0,(s=0<=e&&e<256)&&(i=$T[e],i)?i:(n=t.fromBits(e,(e|0)<0?-1:0,!0),s&&($T[e]=n),n)):(e|=0,(s=-128<=e&&e<128)&&(i=FT[e],i)?i:(n=t.fromBits(e,e<0?-1:0,!1),s&&(FT[e]=n),n))}static fromNumber(e,r){if(isNaN(e))return r?t.UZERO:t.ZERO;if(r){if(e<0)return t.UZERO;if(e>=pD)return t.MAX_UNSIGNED_VALUE}else{if(e<=-xT)return t.MIN_VALUE;if(e+1>=xT)return t.MAX_VALUE}return e<0?t.fromNumber(-e,r).neg():t.fromBits(e%al|0,e/al|0,r)}static fromBigInt(e,r){let n=BigInt(4294967295),i=BigInt(32);return new t(Number(e&n),Number(e>>i&n),r)}static _fromString(e,r,n){if(e.length===0)throw new V("empty string");if(n<2||36<n)throw new V("radix");let i;if((i=e.indexOf("-"))>0)throw new V("interior hyphen");if(i===0)return t._fromString(e.substring(1),r,n).neg();let s=t.fromNumber(Math.pow(n,8)),o=t.ZERO;for(let u=0;u<e.length;u+=8){let a=Math.min(8,e.length-u),c=parseInt(e.substring(u,u+a),n);if(a<8){let l=t.fromNumber(Math.pow(n,a));o=o.mul(l).add(t.fromNumber(c))}else o=o.mul(s),o=o.add(t.fromNumber(c))}return o.unsigned=r,o}static fromStringStrict(e,r,n){let i=!1;if(typeof r=="number"?(n=r,r=!1):i=!!r,n??=10,e.trim()!==e)throw new V(`Input: '${e}' contains leading and/or trailing whitespace`);if(!MZ(e,n))throw new V(`Input: '${e}' contains invalid characters for radix: ${n}`);let s=dD(e),o=t._fromString(s,i,n);if(o.toString(n).toLowerCase()!==s.toLowerCase())throw new V(`Input: ${e} is not representable as ${o.unsigned?"an unsigned":"a signed"} 64-bit Long ${n!=null?`with radix: ${n}`:""}`);return o}static fromString(e,r,n){let i=!1;return typeof r=="number"?(n=r,r=!1):i=!!r,n??=10,e==="NaN"&&n<24||(e==="Infinity"||e==="+Infinity"||e==="-Infinity")&&n<35?t.ZERO:t._fromString(e,i,n)}static fromBytes(e,r,n){return n?t.fromBytesLE(e,r):t.fromBytesBE(e,r)}static fromBytesLE(e,r){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)}static fromBytesBE(e,r){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)}static isLong(e){return e!=null&&typeof e=="object"&&"__isLong__"in e&&e.__isLong__===!0}static fromValue(e,r){return typeof e=="number"?t.fromNumber(e,r):typeof e=="string"?t.fromString(e,r):t.fromBits(e.low,e.high,typeof r=="boolean"?r:e.unsigned)}add(e){t.isLong(e)||(e=t.fromValue(e));let r=this.high>>>16,n=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,u=e.high&65535,a=e.low>>>16,c=e.low&65535,l=0,h=0,d=0,p=0;return p+=s+c,d+=p>>>16,p&=65535,d+=i+a,h+=d>>>16,d&=65535,h+=n+u,l+=h>>>16,h&=65535,l+=r+o,l&=65535,t.fromBits(d<<16|p,l<<16|h,this.unsigned)}and(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)}compare(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;let r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1}comp(e){return this.compare(e)}divide(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw new V("division by zero");if(Di){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;let s=(this.unsigned?Di.div_u:Di.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(s,Di.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;let r,n,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;i=t.UZERO}else{if(this.eq(t.MIN_VALUE))return e.eq(t.ONE)||e.eq(t.NEG_ONE)?t.MIN_VALUE:e.eq(t.MIN_VALUE)?t.ONE:(r=this.shr(1).div(e).shl(1),r.eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(n=this.sub(e.mul(r)),i=r.add(n.div(e)),i));if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=t.ZERO}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));let s=Math.ceil(Math.log(r)/Math.LN2),o=s<=48?1:Math.pow(2,s-48),u=t.fromNumber(r),a=u.mul(e);for(;a.isNegative()||a.gt(n);)r-=o,u=t.fromNumber(r,this.unsigned),a=u.mul(e);u.isZero()&&(u=t.ONE),i=i.add(u),n=n.sub(a)}return i}div(e){return this.divide(e)}equals(e){return t.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}eq(e){return this.equals(e)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();let e=this.high!==0?this.high:this.low,r;for(r=31;r>0&&!(e&1<<r);r--);return this.high!==0?r+33:r+1}greaterThan(e){return this.comp(e)>0}gt(e){return this.greaterThan(e)}greaterThanOrEqual(e){return this.comp(e)>=0}gte(e){return this.greaterThanOrEqual(e)}ge(e){return this.greaterThanOrEqual(e)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(e){return this.comp(e)<0}lt(e){return this.lessThan(e)}lessThanOrEqual(e){return this.comp(e)<=0}lte(e){return this.lessThanOrEqual(e)}modulo(e){if(t.isLong(e)||(e=t.fromValue(e)),Di){let r=(this.unsigned?Di.rem_u:Di.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,Di.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))}mod(e){return this.modulo(e)}rem(e){return this.modulo(e)}multiply(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),Di){let m=Di.mul(this.low,this.high,e.low,e.high);return t.fromBits(m,Di.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);let r=this.high>>>16,n=this.high&65535,i=this.low>>>16,s=this.low&65535,o=e.high>>>16,u=e.high&65535,a=e.low>>>16,c=e.low&65535,l=0,h=0,d=0,p=0;return p+=s*c,d+=p>>>16,p&=65535,d+=i*c,h+=d>>>16,d&=65535,d+=s*a,h+=d>>>16,d&=65535,h+=n*c,l+=h>>>16,h&=65535,h+=i*a,l+=h>>>16,h&=65535,h+=s*u,l+=h>>>16,h&=65535,l+=r*c+n*a+i*u+s*o,l&=65535,t.fromBits(d<<16|p,l<<16|h,this.unsigned)}mul(e){return this.multiply(e)}negate(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)}neg(){return this.negate()}not(){return t.fromBits(~this.low,~this.high,this.unsigned)}notEquals(e){return!this.equals(e)}neq(e){return this.notEquals(e)}ne(e){return this.notEquals(e)}or(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)}shiftLeft(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)}shl(e){return this.shiftLeft(e)}shiftRight(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)}shr(e){return this.shiftRight(e)}shiftRightUnsigned(e){if(t.isLong(e)&&(e=e.toInt()),e&=63,e===0)return this;{let r=this.high;if(e<32){let n=this.low;return t.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)}}shr_u(e){return this.shiftRightUnsigned(e)}shru(e){return this.shiftRightUnsigned(e)}subtract(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())}sub(e){return this.subtract(e)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*al+(this.low>>>0):this.high*al+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(e){return e?this.toBytesLE():this.toBytesBE()}toBytesLE(){let e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}toBytesBE(){let e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]}toSigned(){return this.unsigned?t.fromBits(this.low,this.high,!1):this}toString(e){if(e=e||10,e<2||36<e)throw new V("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(t.MIN_VALUE)){let s=t.fromNumber(e),o=this.div(s),u=o.mul(s).sub(this);return o.toString(e)+u.toInt().toString(e)}else return"-"+this.neg().toString(e);let r=t.fromNumber(Math.pow(e,6),this.unsigned),n=this,i="";for(;;){let s=n.div(r),u=(n.sub(s.mul(r)).toInt()>>>0).toString(e);if(n=s,n.isZero())return u+i;for(;u.length<6;)u="0"+u;i=""+u+i}}toUnsigned(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)}xor(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)}eqz(){return this.isZero()}le(e){return this.lessThanOrEqual(e)}toExtendedJSON(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(e,r){let{useBigInt64:n=!1,relaxed:i=!0}={...r};if(e.$numberLong.length>BZ)throw new V("$numberLong string is too long");if(!IZ.test(e.$numberLong))throw new V(`$numberLong string "${e.$numberLong}" is in an invalid format`);if(n){let o=BigInt(e.$numberLong);return BigInt.asIntN(64,o)}let s=t.fromString(e.$numberLong);return i?s.toNumber():s}inspect(e,r,n){n??=ui;let i=n(this.toString(),r),s=this.unsigned?`, ${n(this.unsigned,r)}`:"";return`new Long(${i}${s})`}};se.TWO_PWR_24=se.fromInt(vZ);se.MAX_UNSIGNED_VALUE=se.fromBits(-1,-1,!0);se.ZERO=se.fromInt(0);se.UZERO=se.fromInt(0,!0);se.ONE=se.fromInt(1);se.UONE=se.fromInt(1,!0);se.NEG_ONE=se.fromInt(-1);se.MAX_VALUE=se.fromBits(-1,2147483647,!1);se.MIN_VALUE=se.fromBits(0,-2147483648,!1);var PZ=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,NZ=/^(\+|-)?(Infinity|inf)$/i,RZ=/^(\+|-)?NaN$/i,rl=6111,Df=-6176,kT=6176,qT=34,O3=U.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),LT=U.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),jT=U.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),xZ=/^([-+])?(\d+)?$/,FZ=31,UT=16383,$Z=30,kZ=31;function VT(t){return!isNaN(parseInt(t,10))}function qZ(t){let e=se.fromNumber(1e9),r=se.fromNumber(0);if(!t.parts[0]&&!t.parts[1]&&!t.parts[2]&&!t.parts[3])return{quotient:t,rem:r};for(let n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new se(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function LZ(t,e){if(!t&&!e)return{high:se.fromNumber(0),low:se.fromNumber(0)};let r=t.shiftRightUnsigned(32),n=new se(t.getLowBits(),0),i=e.shiftRightUnsigned(32),s=new se(e.getLowBits(),0),o=r.multiply(i),u=r.multiply(s),a=n.multiply(i),c=n.multiply(s);return o=o.add(u.shiftRightUnsigned(32)),u=new se(u.getLowBits(),0).add(a).add(c.shiftRightUnsigned(32)),o=o.add(u.shiftRightUnsigned(32)),c=u.shiftLeft(32).add(new se(c.getLowBits(),0)),{high:o,low:c}}function jZ(t,e){let r=t.high>>>0,n=e.high>>>0;if(r<n)return!0;if(r===n){let i=t.low>>>0,s=e.low>>>0;if(i<s)return!0}return!1}function ds(t,e){throw new V(`"${t}" is not a valid Decimal128 string - ${e}`)}var Ra=class t extends Gr{get _bsontype(){return"Decimal128"}constructor(e){if(super(),typeof e=="string")this.bytes=t.fromString(e).bytes;else if(e instanceof Uint8Array||il(e)){if(e.byteLength!==16)throw new V("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}else throw new V("Decimal128 must take a Buffer or string")}static fromString(e){return t._fromString(e,{allowRounding:!1})}static fromStringWithRounding(e){return t._fromString(e,{allowRounding:!0})}static _fromString(e,r){let n=!1,i=!1,s=!1,o=!1,u=0,a=0,c=0,l=0,h=0,d=[0],p=0,m=0,g=0,_=0,w=new se(0,0),S=new se(0,0),C=0,O=0;if(e.length>=7e3)throw new V(""+e+" not a valid Decimal128 string");let B=e.match(PZ),P=e.match(NZ),v=e.match(RZ);if(!B&&!P&&!v||e.length===0)throw new V(""+e+" not a valid Decimal128 string");if(B){let R=B[2],F=B[4],z=B[5],J=B[6];F&&J===void 0&&ds(e,"missing exponent power"),F&&R===void 0&&ds(e,"missing exponent base"),F===void 0&&(z||J)&&ds(e,"missing e before exponent")}if((e[O]==="+"||e[O]==="-")&&(i=!0,n=e[O++]==="-"),!VT(e[O])&&e[O]!=="."){if(e[O]==="i"||e[O]==="I")return new t(n?LT:jT);if(e[O]==="N")return new t(O3)}for(;VT(e[O])||e[O]===".";){if(e[O]==="."){s&&ds(e,"contains multiple periods"),s=!0,O=O+1;continue}p<qT&&(e[O]!=="0"||o)&&(o||(h=a),o=!0,d[m++]=parseInt(e[O],10),p=p+1),o&&(c=c+1),s&&(l=l+1),a=a+1,O=O+1}if(s&&!a)throw new V(""+e+" not a valid Decimal128 string");if(e[O]==="e"||e[O]==="E"){let R=e.substr(++O).match(xZ);if(!R||!R[2])return new t(O3);_=parseInt(R[0],10),O=O+R[0].length}if(e[O])return new t(O3);if(!p)d[0]=0,c=1,p=1,u=0;else if(g=p-1,u=c,u!==1)for(;e[h+u-1+Number(i)+Number(s)]==="0";)u=u-1;for(_<=l&&l>_+16384?_=Df:_=_-l;_>rl;){if(g=g+1,g>=qT){if(u===0){_=rl;break}ds(e,"overflow")}_=_-1}if(r.allowRounding){for(;_<Df||p<c;){if(g===0&&u<p){_=Df,u=0;break}if(p<c?c=c-1:g=g-1,_<rl)_=_+1;else{if(d.join("").match(/^0+$/)){_=rl;break}ds(e,"overflow")}}if(g+1<u){let R=a;s&&(h=h+1,R=R+1),i&&(h=h+1,R=R+1);let F=parseInt(e[h+g+1],10),z=0;if(F>=5&&(z=1,F===5)){z=d[g]%2===1?1:0;for(let J=h+g+2;J<R;J++)if(parseInt(e[J],10)){z=1;break}}if(z){let J=g;for(;J>=0&&++d[J]>9;J--)if(d[J]=0,J===0)if(_<rl)_=_+1,d[J]=1;else return new t(n?LT:jT)}}}else{for(;_<Df||p<c;){if(g===0){if(u===0){_=Df;break}ds(e,"exponent underflow")}p<c?(e[c-1+Number(i)+Number(s)]!=="0"&&u!==0&&ds(e,"inexact rounding"),c=c-1):(d[g]!==0&&ds(e,"inexact rounding"),g=g-1),_<rl?_=_+1:ds(e,"overflow")}g+1<u&&(s&&(h=h+1),i&&(h=h+1),parseInt(e[h+g+1],10)!==0&&ds(e,"inexact rounding"))}if(w=se.fromNumber(0),S=se.fromNumber(0),u===0)w=se.fromNumber(0),S=se.fromNumber(0);else if(g<17){let R=0;for(S=se.fromNumber(d[R++]),w=new se(0,0);R<=g;R++)S=S.multiply(se.fromNumber(10)),S=S.add(se.fromNumber(d[R]))}else{let R=0;for(w=se.fromNumber(d[R++]);R<=g-17;R++)w=w.multiply(se.fromNumber(10)),w=w.add(se.fromNumber(d[R]));for(S=se.fromNumber(d[R++]);R<=g;R++)S=S.multiply(se.fromNumber(10)),S=S.add(se.fromNumber(d[R]))}let j=LZ(w,se.fromString("100000000000000000"));j.low=j.low.add(S),jZ(j.low,S)&&(j.high=j.high.add(se.fromNumber(1))),C=_+kT;let k={low:se.fromNumber(0),high:se.fromNumber(0)};j.high.shiftRightUnsigned(49).and(se.fromNumber(1)).equals(se.fromNumber(1))?(k.high=k.high.or(se.fromNumber(3).shiftLeft(61)),k.high=k.high.or(se.fromNumber(C).and(se.fromNumber(16383).shiftLeft(47))),k.high=k.high.or(j.high.and(se.fromNumber(0x7fffffffffff)))):(k.high=k.high.or(se.fromNumber(C&16383).shiftLeft(49)),k.high=k.high.or(j.high.and(se.fromNumber(562949953421311)))),k.low=j.low,n&&(k.high=k.high.or(se.fromString("9223372036854775808")));let q=U.allocateUnsafe(16);return O=0,q[O++]=k.low.low&255,q[O++]=k.low.low>>8&255,q[O++]=k.low.low>>16&255,q[O++]=k.low.low>>24&255,q[O++]=k.low.high&255,q[O++]=k.low.high>>8&255,q[O++]=k.low.high>>16&255,q[O++]=k.low.high>>24&255,q[O++]=k.high.low&255,q[O++]=k.high.low>>8&255,q[O++]=k.high.low>>16&255,q[O++]=k.high.low>>24&255,q[O++]=k.high.high&255,q[O++]=k.high.high>>8&255,q[O++]=k.high.high>>16&255,q[O++]=k.high.high>>24&255,new t(q)}toString(){let e,r=0,n=new Array(36);for(let O=0;O<n.length;O++)n[O]=0;let i=0,s=!1,o,u={parts:[0,0,0,0]},a,c,l=[];i=0;let h=this.bytes,d=h[i++]|h[i++]<<8|h[i++]<<16|h[i++]<<24,p=h[i++]|h[i++]<<8|h[i++]<<16|h[i++]<<24,m=h[i++]|h[i++]<<8|h[i++]<<16|h[i++]<<24,g=h[i++]|h[i++]<<8|h[i++]<<16|h[i++]<<24;i=0,{low:new se(d,p),high:new se(m,g)}.high.lessThan(se.ZERO)&&l.push("-");let w=g>>26&FZ;if(w>>3===3){if(w===$Z)return l.join("")+"Infinity";if(w===kZ)return"NaN";e=g>>15&UT,o=8+(g>>14&1)}else o=g>>14&7,e=g>>17&UT;let S=e-kT;if(u.parts[0]=(g&16383)+((o&15)<<14),u.parts[1]=m,u.parts[2]=p,u.parts[3]=d,u.parts[0]===0&&u.parts[1]===0&&u.parts[2]===0&&u.parts[3]===0)s=!0;else for(c=3;c>=0;c--){let O=0,B=qZ(u);if(u=B.quotient,O=B.rem.low,!!O)for(a=8;a>=0;a--)n[c*9+a]=O%10,O=Math.floor(O/10)}if(s)r=1,n[i]=0;else for(r=36;!n[i];)r=r-1,i=i+1;let C=r-1+S;if(C>=34||C<=-7||S>0){if(r>34)return l.push("0"),S>0?l.push(`E+${S}`):S<0&&l.push(`E${S}`),l.join("");l.push(`${n[i++]}`),r=r-1,r&&l.push(".");for(let O=0;O<r;O++)l.push(`${n[i++]}`);l.push("E"),C>0?l.push(`+${C}`):l.push(`${C}`)}else if(S>=0)for(let O=0;O<r;O++)l.push(`${n[i++]}`);else{let O=r+S;if(O>0)for(let B=0;B<O;B++)l.push(`${n[i++]}`);else l.push("0");for(l.push(".");O++<0;)l.push("0");for(let B=0;B<r-Math.max(O-1,0);B++)l.push(`${n[i++]}`)}return l.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(e){return t.fromString(e.$numberDecimal)}inspect(e,r,n){return n??=ui,`new Decimal128(${n(this.toString(),r)})`}},vu=class t extends Gr{get _bsontype(){return"Double"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e}static fromString(e){let r=Number(e);if(e==="NaN")return new t(NaN);if(e==="Infinity")return new t(1/0);if(e==="-Infinity")return new t(-1/0);if(!Number.isFinite(r))throw new V(`Input: ${e} is not representable as a Double`);if(e.trim()!==e)throw new V(`Input: '${e}' contains whitespace`);if(e==="")throw new V("Input is an empty string");if(/[^-0-9.+eE]/.test(e))throw new V(`Input: '${e}' is not in decimal or exponential notation`);return new t(r)}valueOf(){return this.value}toJSON(){return this.value}toString(e){return this.value.toString(e)}toExtendedJSON(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(e,r){let n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new t(n)}inspect(e,r,n){return n??=ui,`new Double(${n(this.value,r)})`}},Bu=class t extends Gr{get _bsontype(){return"Int32"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e|0}static fromString(e){let r=dD(e),n=Number(e);if(If<n)throw new V(`Input: '${e}' is larger than the maximum value for Int32`);if(Pf>n)throw new V(`Input: '${e}' is smaller than the minimum value for Int32`);if(Number.isSafeInteger(n)){if(n.toString()!==r)throw new V(`Input: '${e}' is not a valid Int32 string`)}else throw new V(`Input: '${e}' is not a safe integer`);return new t(n)}valueOf(){return this.value}toString(e){return this.value.toString(e)}toJSON(){return this.value}toExtendedJSON(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)}inspect(e,r,n){return n??=ui,`new Int32(${n(this.value,r)})`}},xa=class t extends Gr{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MaxKey()"}},Fa=class t extends Gr{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MinKey()"}},Pa=null,Mf=new WeakMap,Bo=class t extends Gr{get _bsontype(){return"ObjectId"}constructor(e){super();let r;if(typeof e=="object"&&e&&"id"in e){if(typeof e.id!="string"&&!ArrayBuffer.isView(e.id))throw new V("Argument passed in must have an id that is of type string or Buffer");"toHexString"in e&&typeof e.toHexString=="function"?r=U.fromHex(e.toHexString()):r=e.id}else r=e;if(r==null||typeof r=="number")this.buffer=t.generate(typeof r=="number"?r:void 0);else if(ArrayBuffer.isView(r)&&r.byteLength===12)this.buffer=U.toLocalBufferType(r);else if(typeof r=="string")if(t.validateHexString(r))this.buffer=U.fromHex(r),t.cacheHexString&&Mf.set(this,r);else throw new V("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new V("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(e){this.buffer=e,t.cacheHexString&&Mf.set(this,U.toHex(e))}static validateHexString(e){if(e?.length!==24)return!1;for(let r=0;r<24;r++){let n=e.charCodeAt(r);if(!(n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70))return!1}return!0}toHexString(){if(t.cacheHexString){let r=Mf.get(this);if(r)return r}let e=U.toHex(this.id);return t.cacheHexString&&Mf.set(this,e),e}static getInc(){return t.index=(t.index+1)%16777215}static generate(e){typeof e!="number"&&(e=Math.floor(Date.now()/1e3));let r=t.getInc(),n=U.allocateUnsafe(12);return Ee.setInt32BE(n,0,e),Pa===null&&(Pa=U.randomBytes(5)),n[4]=Pa[0],n[5]=Pa[1],n[6]=Pa[2],n[7]=Pa[3],n[8]=Pa[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n}toString(e){return e==="base64"?U.toBase64(this.id):e==="hex"?this.toHexString():this.toHexString()}toJSON(){return this.toHexString()}static is(e){return e!=null&&typeof e=="object"&&"_bsontype"in e&&e._bsontype==="ObjectId"}equals(e){if(e==null)return!1;if(t.is(e))return this.buffer[11]===e.buffer[11]&&U.equals(this.buffer,e.buffer);if(typeof e=="string")return e.toLowerCase()===this.toHexString();if(typeof e=="object"&&typeof e.toHexString=="function"){let r=e.toHexString(),n=this.toHexString();return typeof r=="string"&&r.toLowerCase()===n}return!1}getTimestamp(){let e=new Date,r=Ee.getUint32BE(this.buffer,0);return e.setTime(Math.floor(r)*1e3),e}static createPk(){return new t}serializeInto(e,r){return e[r]=this.buffer[0],e[r+1]=this.buffer[1],e[r+2]=this.buffer[2],e[r+3]=this.buffer[3],e[r+4]=this.buffer[4],e[r+5]=this.buffer[5],e[r+6]=this.buffer[6],e[r+7]=this.buffer[7],e[r+8]=this.buffer[8],e[r+9]=this.buffer[9],e[r+10]=this.buffer[10],e[r+11]=this.buffer[11],12}static createFromTime(e){let r=U.allocate(12);for(let n=11;n>=4;n--)r[n]=0;return Ee.setInt32BE(r,0,e),new t(r)}static createFromHexString(e){if(e?.length!==24)throw new V("hex string must be 24 characters");return new t(U.fromHex(e))}static createFromBase64(e){if(e?.length!==16)throw new V("base64 string must be 16 characters");return new t(U.fromBase64(e))}static isValid(e){if(e==null)return!1;if(typeof e=="string")return t.validateHexString(e);try{return new t(e),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(e){return new t(e.$oid)}isCached(){return t.cacheHexString&&Mf.has(this)}inspect(e,r,n){return n??=ui,`new ObjectId(${n(this.toHexString(),r)})`}};Bo.index=Math.floor(Math.random()*16777215);function Vp(t,e,r){let n=5;if(Array.isArray(t))for(let i=0;i<t.length;i++)n+=zT(i.toString(),t[i],e,!0,r);else{typeof t?.toBSON=="function"&&(t=t.toBSON());for(let i of Object.keys(t))n+=zT(i,t[i],e,!1,r)}return n}function zT(t,e,r=!1,n=!1,i=!1){switch(typeof e?.toBSON=="function"&&(e=e.toBSON()),typeof e){case"string":return 1+U.utf8ByteLength(t)+1+4+U.utf8ByteLength(e)+1;case"number":return Math.floor(e)===e&&e>=QT&&e<=YT&&e>=Pf&&e<=If?(t!=null?U.utf8ByteLength(t)+1:0)+5:(t!=null?U.utf8ByteLength(t)+1:0)+9;case"undefined":return n||!i?(t!=null?U.utf8ByteLength(t)+1:0)+1:0;case"boolean":return(t!=null?U.utf8ByteLength(t)+1:0)+2;case"object":if(e!=null&&typeof e._bsontype=="string"&&e[cl]!==Na)throw new Mo;if(e==null||e._bsontype==="MinKey"||e._bsontype==="MaxKey")return(t!=null?U.utf8ByteLength(t)+1:0)+1;if(e._bsontype==="ObjectId")return(t!=null?U.utf8ByteLength(t)+1:0)+13;if(e instanceof Date||ol(e))return(t!=null?U.utf8ByteLength(t)+1:0)+9;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer||G3(e))return(t!=null?U.utf8ByteLength(t)+1:0)+6+e.byteLength;if(e._bsontype==="Long"||e._bsontype==="Double"||e._bsontype==="Timestamp")return(t!=null?U.utf8ByteLength(t)+1:0)+9;if(e._bsontype==="Decimal128")return(t!=null?U.utf8ByteLength(t)+1:0)+17;if(e._bsontype==="Code")return e.scope!=null&&Object.keys(e.scope).length>0?(t!=null?U.utf8ByteLength(t)+1:0)+1+4+4+U.utf8ByteLength(e.code.toString())+1+Vp(e.scope,r,i):(t!=null?U.utf8ByteLength(t)+1:0)+1+4+U.utf8ByteLength(e.code.toString())+1;if(e._bsontype==="Binary"){let s=e;return s.sub_type===Ge.SUBTYPE_BYTE_ARRAY?(t!=null?U.utf8ByteLength(t)+1:0)+(s.position+1+4+1+4):(t!=null?U.utf8ByteLength(t)+1:0)+(s.position+1+4+1)}else{if(e._bsontype==="Symbol")return(t!=null?U.utf8ByteLength(t)+1:0)+U.utf8ByteLength(e.value)+4+1+1;if(e._bsontype==="DBRef"){let s=Object.assign({$ref:e.collection,$id:e.oid},e.fields);return e.db!=null&&(s.$db=e.db),(t!=null?U.utf8ByteLength(t)+1:0)+1+Vp(s,r,i)}else return e instanceof RegExp||sl(e)?(t!=null?U.utf8ByteLength(t)+1:0)+1+U.utf8ByteLength(e.source)+1+(e.global?1:0)+(e.ignoreCase?1:0)+(e.multiline?1:0)+1:e._bsontype==="BSONRegExp"?(t!=null?U.utf8ByteLength(t)+1:0)+1+U.utf8ByteLength(e.pattern)+1+U.utf8ByteLength(e.options)+1:(t!=null?U.utf8ByteLength(t)+1:0)+Vp(e,r,i)+1}case"function":if(r)return(t!=null?U.utf8ByteLength(t)+1:0)+1+4+U.utf8ByteLength(e.toString())+1}return 0}function UZ(t){return t.split("").sort().join("")}var Io=class t extends Gr{get _bsontype(){return"BSONRegExp"}constructor(e,r){if(super(),this.pattern=e,this.options=UZ(r??""),this.pattern.indexOf("\0")!==-1)throw new V(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\0")!==-1)throw new V(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new V(`The regular expression option [${this.options[n]}] is not supported`)}static parseOptions(e){return e?e.split("").sort().join(""):""}toExtendedJSON(e){return e=e||{},e.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(e){if("$regex"in e)if(typeof e.$regex!="string"){if(e.$regex._bsontype==="BSONRegExp")return e}else return new t(e.$regex,t.parseOptions(e.$options));if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new V(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(e)}`)}inspect(e,r,n){let i=mZ(r)??(u=>u);n??=ui;let s=i(n(this.pattern),"regexp"),o=i(n(this.options),"regexp");return`new BSONRegExp(${s}, ${o})`}},$a=class t extends Gr{get _bsontype(){return"BSONSymbol"}constructor(e){super(),this.value=e}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(e){return new t(e.$symbol)}inspect(e,r,n){return n??=ui,`new BSONSymbol(${n(this.value,r)})`}},VZ=se,Iu=class t extends VZ{get _bsontype(){return"Timestamp"}get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(e){if(e==null)super(0,0,!0);else if(typeof e=="bigint")super(e,!0);else if(se.isLong(e))super(e.low,e.high,!0);else if(typeof e=="object"&&"t"in e&&"i"in e){if(typeof e.t!="number"&&(typeof e.t!="object"||e.t._bsontype!=="Int32"))throw new V("Timestamp constructed from { t, i } must provide t as a number");if(typeof e.i!="number"&&(typeof e.i!="object"||e.i._bsontype!=="Int32"))throw new V("Timestamp constructed from { t, i } must provide i as a number");let r=Number(e.t),n=Number(e.i);if(r<0||Number.isNaN(r))throw new V("Timestamp constructed from { t, i } must provide a positive t");if(n<0||Number.isNaN(n))throw new V("Timestamp constructed from { t, i } must provide a positive i");if(r>4294967295)throw new V("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(n>4294967295)throw new V("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(n,r,!0)}else throw new V("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(e){return new t(se.fromInt(e,!0))}static fromNumber(e){return new t(se.fromNumber(e,!0))}static fromBits(e,r){return new t({i:e,t:r})}static fromString(e,r){return new t(se.fromString(e,!0,r))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(e){let r=se.isLong(e.$timestamp.i)?e.$timestamp.i.getLowBitsUnsigned():e.$timestamp.i,n=se.isLong(e.$timestamp.t)?e.$timestamp.t.getLowBitsUnsigned():e.$timestamp.t;return new t({t:n,i:r})}inspect(e,r,n){n??=ui;let i=n(this.t,r),s=n(this.i,r);return`new Timestamp({ t: ${i}, i: ${s} })`}};Iu.MAX_VALUE=se.MAX_UNSIGNED_VALUE;var zZ=se.fromNumber(YT),WZ=se.fromNumber(QT);function mD(t,e,r){e=e??{};let n=e&&e.index?e.index:0,i=Ee.getInt32LE(t,n);if(i<5)throw new V(`bson size must be >= 5, is ${i}`);if(e.allowObjectSmallerThanBufferSize&&t.length<i)throw new V(`buffer length ${t.length} must be >= bson size ${i}`);if(!e.allowObjectSmallerThanBufferSize&&t.length!==i)throw new V(`buffer length ${t.length} must === bson size ${i}`);if(i+n>t.byteLength)throw new V(`(bson size ${i} + options.index ${n} must be <= buffer length ${t.byteLength})`);if(t[n+i-1]!==0)throw new V("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return zp(t,n,e,r)}var HZ=/^\$ref$|^\$id$|^\$db$/;function zp(t,e,r,n=!1){let i=r.fieldsAsRaw==null?null:r.fieldsAsRaw,s=r.raw==null?!1:r.raw,o=typeof r.bsonRegExp=="boolean"?r.bsonRegExp:!1,u=r.promoteBuffers??!1,a=r.promoteLongs??!0,c=r.promoteValues??!0,l=r.useBigInt64??!1;if(l&&!c)throw new V("Must either request bigint or Long for int64 deserialization");if(l&&!a)throw new V("Must either request bigint or Long for int64 deserialization");let h=r.validation==null?{utf8:!0}:r.validation,d=!0,p,m,g=h.utf8;if(typeof g=="boolean")p=g;else{d=!1;let P=Object.keys(g).map(function(v){return g[v]});if(P.length===0)throw new V("UTF-8 validation setting cannot be empty");if(typeof P[0]!="boolean")throw new V("Invalid UTF-8 validation option, must specify boolean values");if(p=P[0],!P.every(v=>v===p))throw new V("Invalid UTF-8 validation option - keys must be all true or all false")}if(!d){m=new Set;for(let P of Object.keys(g))m.add(P)}let _=e;if(t.length<5)throw new V("corrupt bson message < 5 bytes long");let w=Ee.getInt32LE(t,e);if(e+=4,w<5||w>t.length)throw new V("corrupt bson message");let S=n?[]:{},C=0,O=!1,B=n?!1:null;for(;!O;){let P=t[e++];if(P===0)break;let v=e;for(;t[v]!==0&&v<t.length;)v++;if(v>=t.byteLength)throw new V("Bad BSON Document: illegal CString");let j=n?C++:U.toUTF8(t,e,v,!1),k=!0;d||m?.has(j)?k=p:k=!p,B!==!1&&j[0]==="$"&&(B=HZ.test(j));let q;if(e=v+1,P===JT){let R=Ee.getInt32LE(t,e);if(e+=4,R<=0||R>t.length-e||t[e+R-1]!==0)throw new V("bad string length in bson");q=U.toUTF8(t,e,e+R-1,k),e=e+R}else if(P===ZT){let R=U.allocateUnsafe(12);for(let F=0;F<12;F++)R[F]=t[e+F];q=new Bo(R),e=e+12}else if(P===vf&&c===!1)q=new Bu(Ee.getInt32LE(t,e)),e+=4;else if(P===vf)q=Ee.getInt32LE(t,e),e+=4;else if(P===Y3)q=Ee.getFloat64LE(t,e),e+=8,c===!1&&(q=new vu(q));else if(P===tD){let R=Ee.getInt32LE(t,e),F=Ee.getInt32LE(t,e+4);e+=8,q=new Date(new se(R,F).toNumber())}else if(P===eD){if(t[e]!==0&&t[e]!==1)throw new V("illegal boolean type value");q=t[e++]===1}else if(P===Q3){let R=e,F=Ee.getInt32LE(t,e);if(F<=0||F>t.length-e)throw new V("bad embedded document length in bson");if(s)q=t.subarray(e,e+F);else{let z=r;d||(z={...r,validation:{utf8:k}}),q=zp(t,R,z,!1)}e=e+F}else if(P===XT){let R=e,F=Ee.getInt32LE(t,e),z=r,J=e+F;if(i&&i[j]&&(z={...r,raw:!0}),d||(z={...z,validation:{utf8:k}}),q=zp(t,R,z,!0),e=e+F,t[e-1]!==0)throw new V("invalid array terminator byte");if(e!==J)throw new V("corrupted array bson")}else if(P===yZ)q=void 0;else if(P===X3)q=null;else if(P===e6)if(l)q=Ee.getBigInt64LE(t,e),e+=8;else{let R=Ee.getInt32LE(t,e),F=Ee.getInt32LE(t,e+4);e+=8;let z=new se(R,F);a&&c===!0?q=z.lessThanOrEqual(zZ)&&z.greaterThanOrEqual(WZ)?z.toNumber():z:q=z}else if(P===sD){let R=U.allocateUnsafe(16);for(let F=0;F<16;F++)R[F]=t[e+F];e=e+16,q=new Ra(R)}else if(P===J3){let R=Ee.getInt32LE(t,e);e+=4;let F=R,z=t[e++];if(R<0)throw new V("Negative binary type element size found");if(R>t.byteLength)throw new V("Binary type size larger than document size");if(z===Ge.SUBTYPE_BYTE_ARRAY){if(R=Ee.getInt32LE(t,e),e+=4,R<0)throw new V("Negative binary type element size found for subtype 0x02");if(R>F-4)throw new V("Binary type with subtype 0x02 contains too long binary size");if(R<F-4)throw new V("Binary type with subtype 0x02 contains too short binary size")}u&&c?q=U.toLocalBufferType(t.subarray(e,e+R)):(q=new Ge(t.subarray(e,e+R),z),z===t6&&Mu.isValid(q)&&(q=q.toUUID())),e=e+R}else if(P===Wp&&o===!1){for(v=e;t[v]!==0&&v<t.length;)v++;if(v>=t.length)throw new V("Bad BSON Document: illegal CString");let R=U.toUTF8(t,e,v,!1);for(e=v+1,v=e;t[v]!==0&&v<t.length;)v++;if(v>=t.length)throw new V("Bad BSON Document: illegal CString");let F=U.toUTF8(t,e,v,!1);e=v+1;let z=new Array(F.length);for(v=0;v<F.length;v++)switch(F[v]){case"m":z[v]="m";break;case"s":z[v]="g";break;case"i":z[v]="i";break}q=new RegExp(R,z.join(""))}else if(P===Wp&&o===!0){for(v=e;t[v]!==0&&v<t.length;)v++;if(v>=t.length)throw new V("Bad BSON Document: illegal CString");let R=U.toUTF8(t,e,v,!1);for(e=v+1,v=e;t[v]!==0&&v<t.length;)v++;if(v>=t.length)throw new V("Bad BSON Document: illegal CString");let F=U.toUTF8(t,e,v,!1);e=v+1,q=new Io(R,F)}else if(P===rD){let R=Ee.getInt32LE(t,e);if(e+=4,R<=0||R>t.length-e||t[e+R-1]!==0)throw new V("bad string length in bson");let F=U.toUTF8(t,e,e+R-1,k);q=c?F:new $a(F),e=e+R}else if(P===iD)q=new Iu({i:Ee.getUint32LE(t,e),t:Ee.getUint32LE(t,e+4)}),e+=8;else if(P===oD)q=new Fa;else if(P===uD)q=new xa;else if(P===Z3){let R=Ee.getInt32LE(t,e);if(e+=4,R<=0||R>t.length-e||t[e+R-1]!==0)throw new V("bad string length in bson");let F=U.toUTF8(t,e,e+R-1,k);q=new vo(F),e=e+R}else if(P===nD){let R=Ee.getInt32LE(t,e);if(e+=4,R<13)throw new V("code_w_scope total size shorter minimum expected length");let F=Ee.getInt32LE(t,e);if(e+=4,F<=0||F>t.length-e||t[e+F-1]!==0)throw new V("bad string length in bson");let z=U.toUTF8(t,e,e+F-1,k);e=e+F;let J=e,De=Ee.getInt32LE(t,e),W=zp(t,J,r,!1);if(e=e+De,R<8+De+F)throw new V("code_w_scope total size is too short, truncating scope");if(R>8+De+F)throw new V("code_w_scope total size is too long, clips outer document");q=new vo(z,W)}else if(P===gZ){let R=Ee.getInt32LE(t,e);if(e+=4,R<=0||R>t.length-e||t[e+R-1]!==0)throw new V("bad string length in bson");let F=U.toUTF8(t,e,e+R-1,k);e=e+R;let z=U.allocateUnsafe(12);for(let De=0;De<12;De++)z[De]=t[e+De];let J=new Bo(z);e=e+12,q=new Ks(F,J)}else throw new V(`Detected unknown BSON type ${P.toString(16)} for fieldname "${j}"`);j==="__proto__"?Object.defineProperty(S,j,{value:q,writable:!0,enumerable:!0,configurable:!0}):S[j]=q}if(w!==e-_)throw n?new V("corrupt array bson"):new V("corrupt object bson");if(!B)return S;if(hD(S)){let P=Object.assign({},S);return delete P.$ref,delete P.$id,delete P.$db,new Ks(S.$ref,S.$id,S.$db,P)}return S}var Hp=/\x00/,WT=new Set(["$db","$ref","$id","$clusterTime"]);function C3(t,e,r,n){t[n++]=JT;let i=U.encodeUTF8Into(t,e,n);n=n+i+1,t[n-1]=0;let s=U.encodeUTF8Into(t,r,n+4);return Ee.setInt32LE(t,n,s+1),n=n+4+s,t[n++]=0,n}function T3(t,e,r,n){let s=!Object.is(r,-0)&&Number.isSafeInteger(r)&&r<=If&&r>=Pf?vf:Y3;t[n++]=s;let o=U.encodeUTF8Into(t,e,n);return n=n+o,t[n++]=0,s===vf?n+=Ee.setInt32LE(t,n,r):n+=Ee.setFloat64LE(t,n,r),n}function D3(t,e,r,n){t[n++]=e6;let i=U.encodeUTF8Into(t,e,n);return n+=i,t[n++]=0,n+=Ee.setBigInt64LE(t,n,r),n}function nl(t,e,r,n){t[n++]=X3;let i=U.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n}function M3(t,e,r,n){t[n++]=eD;let i=U.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,t[n++]=r?1:0,n}function v3(t,e,r,n){t[n++]=tD;let i=U.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=se.fromNumber(r.getTime()),o=s.getLowBits(),u=s.getHighBits();return n+=Ee.setInt32LE(t,n,o),n+=Ee.setInt32LE(t,n,u),n}function B3(t,e,r,n){t[n++]=Wp;let i=U.encodeUTF8Into(t,e,n);if(n=n+i,t[n++]=0,r.source&&r.source.match(Hp)!=null)throw new V("value "+r.source+" must not contain null bytes");return n=n+U.encodeUTF8Into(t,r.source,n),t[n++]=0,r.ignoreCase&&(t[n++]=105),r.global&&(t[n++]=115),r.multiline&&(t[n++]=109),t[n++]=0,n}function I3(t,e,r,n){t[n++]=Wp;let i=U.encodeUTF8Into(t,e,n);if(n=n+i,t[n++]=0,r.pattern.match(Hp)!=null)throw new V("pattern "+r.pattern+" must not contain null bytes");n=n+U.encodeUTF8Into(t,r.pattern,n),t[n++]=0;let s=r.options.split("").sort().join("");return n=n+U.encodeUTF8Into(t,s,n),t[n++]=0,n}function P3(t,e,r,n){r===null?t[n++]=X3:r._bsontype==="MinKey"?t[n++]=oD:t[n++]=uD;let i=U.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n}function N3(t,e,r,n){t[n++]=ZT;let i=U.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n+=r.serializeInto(t,n),n}function R3(t,e,r,n){t[n++]=J3;let i=U.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.length;if(n+=Ee.setInt32LE(t,n,s),t[n++]=_Z,s<=16)for(let o=0;o<s;o++)t[n+o]=r[o];else t.set(r,n);return n=n+s,n}function x3(t,e,r,n,i,s,o,u,a){if(a.has(r))throw new V("Cannot convert circular structure to BSON");a.add(r),t[n++]=Array.isArray(r)?XT:Q3;let c=U.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=Nf(t,r,i,n,s+1,o,u,a);return a.delete(r),l}function F3(t,e,r,n){t[n++]=sD;let i=U.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;for(let s=0;s<16;s++)t[n+s]=r.bytes[s];return n+16}function $3(t,e,r,n){t[n++]=r._bsontype==="Long"?e6:iD;let i=U.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.getLowBits(),o=r.getHighBits();return n+=Ee.setInt32LE(t,n,s),n+=Ee.setInt32LE(t,n,o),n}function k3(t,e,r,n){r=r.valueOf(),t[n++]=vf;let i=U.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n+=Ee.setInt32LE(t,n,r),n}function q3(t,e,r,n){t[n++]=Y3;let i=U.encodeUTF8Into(t,e,n);return n=n+i,t[n++]=0,n+=Ee.setFloat64LE(t,n,r.value),n}function L3(t,e,r,n){t[n++]=Z3;let i=U.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.toString(),o=U.encodeUTF8Into(t,s,n+4)+1;return Ee.setInt32LE(t,n,o),n=n+4+o-1,t[n++]=0,n}function j3(t,e,r,n,i=!1,s=0,o=!1,u=!0,a){if(r.scope&&typeof r.scope=="object"){t[n++]=nD;let c=U.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=n,h=r.code;n=n+4;let d=U.encodeUTF8Into(t,h,n+4)+1;Ee.setInt32LE(t,n,d),t[n+4+d-1]=0,n=n+d+4;let p=Nf(t,r.scope,i,n,s+1,o,u,a);n=p-1;let m=p-l;l+=Ee.setInt32LE(t,l,m),t[n++]=0}else{t[n++]=Z3;let c=U.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=r.code.toString(),h=U.encodeUTF8Into(t,l,n+4)+1;Ee.setInt32LE(t,n,h),n=n+4+h-1,t[n++]=0}return n}function U3(t,e,r,n){t[n++]=J3;let i=U.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=r.buffer,o=r.position;if(r.sub_type===Ge.SUBTYPE_BYTE_ARRAY&&(o=o+4),n+=Ee.setInt32LE(t,n,o),t[n++]=r.sub_type,r.sub_type===Ge.SUBTYPE_BYTE_ARRAY&&(o=o-4,n+=Ee.setInt32LE(t,n,o)),r.sub_type===Ge.SUBTYPE_VECTOR&&fD(r),o<=16)for(let u=0;u<o;u++)t[n+u]=s[u];else t.set(s,n);return n=n+r.position,n}function V3(t,e,r,n){t[n++]=rD;let i=U.encodeUTF8Into(t,e,n);n=n+i,t[n++]=0;let s=U.encodeUTF8Into(t,r.value,n+4)+1;return Ee.setInt32LE(t,n,s),n=n+4+s-1,t[n++]=0,n}function z3(t,e,r,n,i,s,o){t[n++]=Q3;let u=U.encodeUTF8Into(t,e,n);n=n+u,t[n++]=0;let a=n,c={$ref:r.collection||r.namespace,$id:r.oid};r.db!=null&&(c.$db=r.db),c=Object.assign(c,r.fields);let l=Nf(t,c,!1,n,i+1,s,!0,o),h=l-a;return a+=Ee.setInt32LE(t,n,h),l}function Nf(t,e,r,n,i,s,o,u){if(u==null){if(e==null)return t[0]=5,t[1]=0,t[2]=0,t[3]=0,t[4]=0,5;if(Array.isArray(e))throw new V("serialize does not support an array as the root input");if(typeof e!="object")throw new V("serialize does not support non-object as the root input");if("_bsontype"in e&&typeof e._bsontype=="string")throw new V("BSON types cannot be serialized as a document");if(ol(e)||sl(e)||il(e)||G3(e))throw new V("date, regexp, typedarray, and arraybuffer cannot be BSON documents");u=new Set}u.add(e);let a=n+4;if(Array.isArray(e))for(let l=0;l<e.length;l++){let h=`${l}`,d=e[l];typeof d?.toBSON=="function"&&(d=d.toBSON());let p=typeof d;if(d===void 0)a=nl(t,h,d,a);else if(d===null)a=nl(t,h,d,a);else if(p==="string")a=C3(t,h,d,a);else if(p==="number")a=T3(t,h,d,a);else if(p==="bigint")a=D3(t,h,d,a);else if(p==="boolean")a=M3(t,h,d,a);else if(p==="object"&&d._bsontype==null)d instanceof Date||ol(d)?a=v3(t,h,d,a):d instanceof Uint8Array||il(d)?a=R3(t,h,d,a):d instanceof RegExp||sl(d)?a=B3(t,h,d,a):a=x3(t,h,d,a,r,i,s,o,u);else if(p==="object"){if(d[cl]!==Na)throw new Mo;if(d._bsontype==="ObjectId")a=N3(t,h,d,a);else if(d._bsontype==="Decimal128")a=F3(t,h,d,a);else if(d._bsontype==="Long"||d._bsontype==="Timestamp")a=$3(t,h,d,a);else if(d._bsontype==="Double")a=q3(t,h,d,a);else if(d._bsontype==="Code")a=j3(t,h,d,a,r,i,s,o,u);else if(d._bsontype==="Binary")a=U3(t,h,d,a);else if(d._bsontype==="BSONSymbol")a=V3(t,h,d,a);else if(d._bsontype==="DBRef")a=z3(t,h,d,a,i,s,u);else if(d._bsontype==="BSONRegExp")a=I3(t,h,d,a);else if(d._bsontype==="Int32")a=k3(t,h,d,a);else if(d._bsontype==="MinKey"||d._bsontype==="MaxKey")a=P3(t,h,d,a);else if(typeof d._bsontype<"u")throw new V(`Unrecognized or invalid _bsontype: ${String(d._bsontype)}`)}else p==="function"&&s&&(a=L3(t,h,d,a))}else if(e instanceof Map||K3(e)){let l=e.entries(),h=!1;for(;!h;){let d=l.next();if(h=!!d.done,h)continue;let p=d.value[0],m=d.value[1];typeof m?.toBSON=="function"&&(m=m.toBSON());let g=typeof m;if(typeof p=="string"&&!WT.has(p)){if(p.match(Hp)!=null)throw new V("key "+p+" must not contain null bytes");if(r){if(p[0]==="$")throw new V("key "+p+" must not start with '$'");if(p.includes("."))throw new V("key "+p+" must not contain '.'")}}if(m===void 0)o===!1&&(a=nl(t,p,m,a));else if(m===null)a=nl(t,p,m,a);else if(g==="string")a=C3(t,p,m,a);else if(g==="number")a=T3(t,p,m,a);else if(g==="bigint")a=D3(t,p,m,a);else if(g==="boolean")a=M3(t,p,m,a);else if(g==="object"&&m._bsontype==null)m instanceof Date||ol(m)?a=v3(t,p,m,a):m instanceof Uint8Array||il(m)?a=R3(t,p,m,a):m instanceof RegExp||sl(m)?a=B3(t,p,m,a):a=x3(t,p,m,a,r,i,s,o,u);else if(g==="object"){if(m[cl]!==Na)throw new Mo;if(m._bsontype==="ObjectId")a=N3(t,p,m,a);else if(m._bsontype==="Decimal128")a=F3(t,p,m,a);else if(m._bsontype==="Long"||m._bsontype==="Timestamp")a=$3(t,p,m,a);else if(m._bsontype==="Double")a=q3(t,p,m,a);else if(m._bsontype==="Code")a=j3(t,p,m,a,r,i,s,o,u);else if(m._bsontype==="Binary")a=U3(t,p,m,a);else if(m._bsontype==="BSONSymbol")a=V3(t,p,m,a);else if(m._bsontype==="DBRef")a=z3(t,p,m,a,i,s,u);else if(m._bsontype==="BSONRegExp")a=I3(t,p,m,a);else if(m._bsontype==="Int32")a=k3(t,p,m,a);else if(m._bsontype==="MinKey"||m._bsontype==="MaxKey")a=P3(t,p,m,a);else if(typeof m._bsontype<"u")throw new V(`Unrecognized or invalid _bsontype: ${String(m._bsontype)}`)}else g==="function"&&s&&(a=L3(t,p,m,a))}}else{if(typeof e?.toBSON=="function"&&(e=e.toBSON(),e!=null&&typeof e!="object"))throw new V("toBSON function did not return an object");for(let l of Object.keys(e)){let h=e[l];typeof h?.toBSON=="function"&&(h=h.toBSON());let d=typeof h;if(typeof l=="string"&&!WT.has(l)){if(l.match(Hp)!=null)throw new V("key "+l+" must not contain null bytes");if(r){if(l[0]==="$")throw new V("key "+l+" must not start with '$'");if(l.includes("."))throw new V("key "+l+" must not contain '.'")}}if(h===void 0)o===!1&&(a=nl(t,l,h,a));else if(h===null)a=nl(t,l,h,a);else if(d==="string")a=C3(t,l,h,a);else if(d==="number")a=T3(t,l,h,a);else if(d==="bigint")a=D3(t,l,h,a);else if(d==="boolean")a=M3(t,l,h,a);else if(d==="object"&&h._bsontype==null)h instanceof Date||ol(h)?a=v3(t,l,h,a):h instanceof Uint8Array||il(h)?a=R3(t,l,h,a):h instanceof RegExp||sl(h)?a=B3(t,l,h,a):a=x3(t,l,h,a,r,i,s,o,u);else if(d==="object"){if(h[cl]!==Na)throw new Mo;if(h._bsontype==="ObjectId")a=N3(t,l,h,a);else if(h._bsontype==="Decimal128")a=F3(t,l,h,a);else if(h._bsontype==="Long"||h._bsontype==="Timestamp")a=$3(t,l,h,a);else if(h._bsontype==="Double")a=q3(t,l,h,a);else if(h._bsontype==="Code")a=j3(t,l,h,a,r,i,s,o,u);else if(h._bsontype==="Binary")a=U3(t,l,h,a);else if(h._bsontype==="BSONSymbol")a=V3(t,l,h,a);else if(h._bsontype==="DBRef")a=z3(t,l,h,a,i,s,u);else if(h._bsontype==="BSONRegExp")a=I3(t,l,h,a);else if(h._bsontype==="Int32")a=k3(t,l,h,a);else if(h._bsontype==="MinKey"||h._bsontype==="MaxKey")a=P3(t,l,h,a);else if(typeof h._bsontype<"u")throw new V(`Unrecognized or invalid _bsontype: ${String(h._bsontype)}`)}else d==="function"&&s&&(a=L3(t,l,h,a))}}u.delete(e),t[a++]=0;let c=a-n;return n+=Ee.setInt32LE(t,n,c),a}function GZ(t){return t!=null&&typeof t=="object"&&"_bsontype"in t&&typeof t._bsontype=="string"}var KZ={$oid:Bo,$binary:Ge,$uuid:Ge,$symbol:$a,$numberInt:Bu,$numberDecimal:Ra,$numberDouble:vu,$numberLong:se,$minKey:Fa,$maxKey:xa,$regex:Io,$regularExpression:Io,$timestamp:Iu};function yD(t,e={}){if(typeof t=="number"){let n=t<=If&&t>=Pf,i=t<=GT&&t>=KT;if(e.relaxed||e.legacy)return t;if(Number.isInteger(t)&&!Object.is(t,-0)){if(n)return new Bu(t);if(i)return e.useBigInt64?BigInt(t):se.fromNumber(t)}return new vu(t)}if(t==null||typeof t!="object")return t;if(t.$undefined)return null;let r=Object.keys(t).filter(n=>n.startsWith("$")&&t[n]!=null);for(let n=0;n<r.length;n++){let i=KZ[r[n]];if(i)return i.fromExtendedJSON(t,e)}if(t.$date!=null){let n=t.$date,i=new Date;if(e.legacy)if(typeof n=="number")i.setTime(n);else if(typeof n=="string")i.setTime(Date.parse(n));else if(typeof n=="bigint")i.setTime(Number(n));else throw new ll(`Unrecognized type for EJSON date: ${typeof n}`);else if(typeof n=="string")i.setTime(Date.parse(n));else if(se.isLong(n))i.setTime(n.toNumber());else if(typeof n=="number"&&e.relaxed)i.setTime(n);else if(typeof n=="bigint")i.setTime(Number(n));else throw new ll(`Unrecognized type for EJSON date: ${typeof n}`);return i}if(t.$code!=null){let n=Object.assign({},t);return t.$scope&&(n.$scope=yD(t.$scope)),vo.fromExtendedJSON(t)}if(hD(t)||t.$dbPointer){let n=t.$ref?t:t.$dbPointer;if(n instanceof Ks)return n;let i=Object.keys(n).filter(o=>o.startsWith("$")),s=!0;if(i.forEach(o=>{["$ref","$id","$db"].indexOf(o)===-1&&(s=!1)}),s)return Ks.fromExtendedJSON(n)}return t}function YZ(t,e){return t.map((r,n)=>{e.seenObjects.push({propertyName:`index ${n}`,obj:null});try{return Do(r,e)}finally{e.seenObjects.pop()}})}function HT(t){let e=t.toISOString();return t.getUTCMilliseconds()!==0?e:e.slice(0,-5)+"Z"}function Do(t,e){if(t instanceof Map||K3(t)){let r=Object.create(null);for(let[n,i]of t){if(typeof n!="string")throw new V("Can only serialize maps with string keys");r[n]=i}return Do(r,e)}if((typeof t=="object"||typeof t=="function")&&t!==null){let r=e.seenObjects.findIndex(n=>n.obj===t);if(r!==-1){let n=e.seenObjects.map(l=>l.propertyName),i=n.slice(0,r).map(l=>`${l} -> `).join(""),s=n[r],o=" -> "+n.slice(r+1,n.length-1).map(l=>`${l} -> `).join(""),u=n[n.length-1],a=" ".repeat(i.length+s.length/2),c="-".repeat(o.length+(s.length+u.length)/2-1);throw new V(`Converting circular structure to EJSON:
    ${i}${s}${o}${u}
    ${a}\\${c}/`)}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return YZ(t,e);if(t===void 0)return null;if(t instanceof Date||ol(t)){let r=t.getTime(),n=r>-1&&r<2534023188e5;return e.legacy?e.relaxed&&n?{$date:t.getTime()}:{$date:HT(t)}:e.relaxed&&n?{$date:HT(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(typeof t=="number"&&(!e.relaxed||!isFinite(t))){if(Number.isInteger(t)&&!Object.is(t,-0)){if(t>=Pf&&t<=If)return{$numberInt:t.toString()};if(t>=KT&&t<=GT)return{$numberLong:t.toString()}}return{$numberDouble:Object.is(t,-0)?"-0.0":t.toString()}}if(typeof t=="bigint")return e.relaxed?Number(BigInt.asIntN(64,t)):{$numberLong:BigInt.asIntN(64,t).toString()};if(t instanceof RegExp||sl(t)){let r=t.flags;if(r===void 0){let i=t.toString().match(/[gimuy]*$/);i&&(r=i[0])}return new Io(t.source,r).toExtendedJSON(e)}return t!=null&&typeof t=="object"?JZ(t,e):t}var QZ={Binary:t=>new Ge(t.value(),t.sub_type),Code:t=>new vo(t.code,t.scope),DBRef:t=>new Ks(t.collection||t.namespace,t.oid,t.db,t.fields),Decimal128:t=>new Ra(t.bytes),Double:t=>new vu(t.value),Int32:t=>new Bu(t.value),Long:t=>se.fromBits(t.low!=null?t.low:t.low_,t.low!=null?t.high:t.high_,t.low!=null?t.unsigned:t.unsigned_),MaxKey:()=>new xa,MinKey:()=>new Fa,ObjectId:t=>new Bo(t),BSONRegExp:t=>new Io(t.pattern,t.options),BSONSymbol:t=>new $a(t.value),Timestamp:t=>Iu.fromBits(t.low,t.high)};function JZ(t,e){if(t==null||typeof t!="object")throw new V("not an object instance");let r=t._bsontype;if(typeof r>"u"){let n={};for(let i of Object.keys(t)){e.seenObjects.push({propertyName:i,obj:null});try{let s=Do(t[i],e);i==="__proto__"?Object.defineProperty(n,i,{value:s,writable:!0,enumerable:!0,configurable:!0}):n[i]=s}finally{e.seenObjects.pop()}}return n}else{if(t!=null&&typeof t=="object"&&typeof t._bsontype=="string"&&t[cl]!==Na)throw new Mo;if(GZ(t)){let n=t;if(typeof n.toExtendedJSON!="function"){let i=QZ[t._bsontype];if(!i)throw new V("Unrecognized or invalid _bsontype: "+t._bsontype);n=i(n)}return r==="Code"&&n.scope?n=new vo(n.code,Do(n.scope,e)):r==="DBRef"&&n.oid&&(n=new Ks(Do(n.collection,e),Do(n.oid,e),Do(n.db,e),Do(n.fields,e))),n.toExtendedJSON(e)}else throw new V("_bsontype must be a string, but was: "+typeof r)}}function gD(t,e){let r={useBigInt64:e?.useBigInt64??!1,relaxed:e?.relaxed??!0,legacy:e?.legacy??!1};return JSON.parse(t,(n,i)=>{if(n.indexOf("\0")!==-1)throw new V(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(n)}`);return yD(i,r)})}function _D(t,e,r,n){r!=null&&typeof r=="object"&&(n=r,r=0),e!=null&&typeof e=="object"&&!Array.isArray(e)&&(n=e,e=void 0,r=0);let i=Object.assign({relaxed:!0,legacy:!1},n,{seenObjects:[{propertyName:"(root)",obj:null}]}),s=Do(t,i);return JSON.stringify(s,e,r)}function XZ(t,e){return e=e||{},JSON.parse(_D(t,e))}function ZZ(t,e){return e=e||{},gD(JSON.stringify(t),e)}var ka=Object.create(null);ka.parse=gD;ka.stringify=_D;ka.serialize=XZ;ka.deserialize=ZZ;Object.freeze(ka);function W3(t,e){try{return Ee.getNonnegativeInt32LE(t,e)}catch(r){throw new Mi("BSON size cannot be negative",e,{cause:r})}}function H3(t,e){let r=e;for(;t[r]!==0;r++);if(r===t.length-1)throw new Mi("Null terminator not found",e);return r}function eee(t,e=0){if(e??=0,t.length<5)throw new Mi(`Input must be at least 5 bytes, got ${t.length} bytes`,e);let r=W3(t,e);if(r>t.length-e)throw new Mi(`Parsed documentSize (${r} bytes) does not match input length (${t.length} bytes)`,e);if(t[e+r-1]!==0)throw new Mi("BSON documents must end in 0x00",e+r);let n=[],i=e+4;for(;i<=r+e;){let s=t[i];if(i+=1,s===0){if(i-e!==r)throw new Mi("Invalid 0x00 type byte",i);break}let o=i,u=H3(t,i)-o;i+=u+1;let a;if(s===1||s===18||s===9||s===17)a=8;else if(s===16)a=4;else if(s===7)a=12;else if(s===19)a=16;else if(s===8)a=1;else if(s===10||s===6||s===127||s===255)a=0;else if(s===11)a=H3(t,H3(t,i)+1)+1-i;else if(s===3||s===4||s===15)a=W3(t,i);else if(s===2||s===5||s===12||s===13||s===14)a=W3(t,i)+4,s===5&&(a+=1),s===12&&(a+=12);else throw new Mi(`Invalid 0x${s.toString(16).padStart(2,"0")} type byte`,i);if(a>r)throw new Mi("value reports length larger than document",i);n.push([s,o,u,i,a]),i+=a}return n}var fl=Object.create(null);fl.parseToElements=eee;fl.ByteUtils=U;fl.NumberUtils=Ee;Object.freeze(fl);var ED=1024*1024*17,Du=U.allocate(ED);function AD(t){Du.length<t&&(Du=U.allocate(t))}function wD(t,e={}){let r=typeof e.checkKeys=="boolean"?e.checkKeys:!1,n=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,i=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0,s=typeof e.minInternalBufferSize=="number"?e.minInternalBufferSize:ED;Du.length<s&&(Du=U.allocate(s));let o=Nf(Du,t,r,0,0,n,i,null),u=U.allocateUnsafe(o);return u.set(Du.subarray(0,o),0),u}function SD(t,e,r={}){let n=typeof r.checkKeys=="boolean"?r.checkKeys:!1,i=typeof r.serializeFunctions=="boolean"?r.serializeFunctions:!1,s=typeof r.ignoreUndefined=="boolean"?r.ignoreUndefined:!0,o=typeof r.index=="number"?r.index:0,u=Nf(Du,t,n,0,0,i,s,null);return e.set(Du.subarray(0,u),o),o+u-1}function bD(t,e={}){return mD(U.toLocalBufferType(t),e)}function OD(t,e={}){e=e||{};let r=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,n=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0;return Vp(t,r,n)}function CD(t,e,r,n,i,s){let o=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},s),u=U.toLocalBufferType(t),a=e;for(let c=0;c<r;c++){let l=Ee.getInt32LE(u,a);o.index=a,n[i+c]=mD(u,o),a=a+l}return a}var tee=Object.freeze({__proto__:null,BSONError:V,BSONOffsetError:Mi,BSONRegExp:Io,BSONRuntimeError:ll,BSONSymbol:$a,BSONType:aD,BSONValue:Gr,BSONVersionError:Mo,Binary:Ge,Code:vo,DBRef:Ks,Decimal128:Ra,Double:vu,EJSON:ka,Int32:Bu,Long:se,MaxKey:xa,MinKey:Fa,ObjectId:Bo,Timestamp:Iu,UUID:Mu,calculateObjectSize:OD,deserialize:bD,deserializeStream:CD,onDemand:fl,serialize:wD,serializeWithBufferAndIndex:SD,setInternalBufferSize:AD});st.BSON=tee;st.BSONError=V;st.BSONOffsetError=Mi;st.BSONRegExp=Io;st.BSONRuntimeError=ll;st.BSONSymbol=$a;st.BSONType=aD;st.BSONValue=Gr;st.BSONVersionError=Mo;st.Binary=Ge;st.Code=vo;st.DBRef=Ks;st.Decimal128=Ra;st.Double=vu;st.EJSON=ka;st.Int32=Bu;st.Long=se;st.MaxKey=xa;st.MinKey=Fa;st.ObjectId=Bo;st.Timestamp=Iu;st.UUID=Mu;st.calculateObjectSize=OD;st.deserialize=bD;st.deserializeStream=CD;st.onDemand=fl;st.serialize=wD;st.serializeWithBufferAndIndex=SD;st.setInternalBufferSize=AD});var Ye=y(ge=>{"use strict";f();Object.defineProperty(ge,"__esModule",{value:!0});ge.toUTF8=ge.getBigInt64LE=ge.getFloat64LE=ge.getInt32LE=ge.UUID=ge.Timestamp=ge.serialize=ge.ObjectId=ge.MinKey=ge.MaxKey=ge.Long=ge.Int32=ge.EJSON=ge.Double=ge.deserialize=ge.Decimal128=ge.DBRef=ge.Code=ge.calculateObjectSize=ge.BSONType=ge.BSONSymbol=ge.BSONRegExp=ge.BSONError=ge.BSON=ge.Binary=void 0;ge.parseToElementsToArray=ree;ge.pluckBSONSerializeOptions=nee;ge.resolveBSONOptions=iee;ge.parseUtf8ValidationOption=see;var Rf=vi(),Jt=vi();Object.defineProperty(ge,"Binary",{enumerable:!0,get:function(){return Jt.Binary}});Object.defineProperty(ge,"BSON",{enumerable:!0,get:function(){return Jt.BSON}});Object.defineProperty(ge,"BSONError",{enumerable:!0,get:function(){return Jt.BSONError}});Object.defineProperty(ge,"BSONRegExp",{enumerable:!0,get:function(){return Jt.BSONRegExp}});Object.defineProperty(ge,"BSONSymbol",{enumerable:!0,get:function(){return Jt.BSONSymbol}});Object.defineProperty(ge,"BSONType",{enumerable:!0,get:function(){return Jt.BSONType}});Object.defineProperty(ge,"calculateObjectSize",{enumerable:!0,get:function(){return Jt.calculateObjectSize}});Object.defineProperty(ge,"Code",{enumerable:!0,get:function(){return Jt.Code}});Object.defineProperty(ge,"DBRef",{enumerable:!0,get:function(){return Jt.DBRef}});Object.defineProperty(ge,"Decimal128",{enumerable:!0,get:function(){return Jt.Decimal128}});Object.defineProperty(ge,"deserialize",{enumerable:!0,get:function(){return Jt.deserialize}});Object.defineProperty(ge,"Double",{enumerable:!0,get:function(){return Jt.Double}});Object.defineProperty(ge,"EJSON",{enumerable:!0,get:function(){return Jt.EJSON}});Object.defineProperty(ge,"Int32",{enumerable:!0,get:function(){return Jt.Int32}});Object.defineProperty(ge,"Long",{enumerable:!0,get:function(){return Jt.Long}});Object.defineProperty(ge,"MaxKey",{enumerable:!0,get:function(){return Jt.MaxKey}});Object.defineProperty(ge,"MinKey",{enumerable:!0,get:function(){return Jt.MinKey}});Object.defineProperty(ge,"ObjectId",{enumerable:!0,get:function(){return Jt.ObjectId}});Object.defineProperty(ge,"serialize",{enumerable:!0,get:function(){return Jt.serialize}});Object.defineProperty(ge,"Timestamp",{enumerable:!0,get:function(){return Jt.Timestamp}});Object.defineProperty(ge,"UUID",{enumerable:!0,get:function(){return Jt.UUID}});function ree(t,e){let r=Rf.BSON.onDemand.parseToElements(t,e);return Array.isArray(r)?r:[...r]}ge.getInt32LE=Rf.BSON.onDemand.NumberUtils.getInt32LE;ge.getFloat64LE=Rf.BSON.onDemand.NumberUtils.getFloat64LE;ge.getBigInt64LE=Rf.BSON.onDemand.NumberUtils.getBigInt64LE;ge.toUTF8=Rf.BSON.onDemand.ByteUtils.toUTF8;function nee(t){let{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:i,promoteLongs:s,serializeFunctions:o,ignoreUndefined:u,bsonRegExp:a,raw:c,enableUtf8Validation:l}=t;return{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:i,promoteLongs:s,serializeFunctions:o,ignoreUndefined:u,bsonRegExp:a,raw:c,enableUtf8Validation:l}}function iee(t,e){let r=e?.bsonOptions;return{raw:t?.raw??r?.raw??!1,useBigInt64:t?.useBigInt64??r?.useBigInt64??!1,promoteLongs:t?.promoteLongs??r?.promoteLongs??!0,promoteValues:t?.promoteValues??r?.promoteValues??!0,promoteBuffers:t?.promoteBuffers??r?.promoteBuffers??!1,ignoreUndefined:t?.ignoreUndefined??r?.ignoreUndefined??!1,bsonRegExp:t?.bsonRegExp??r?.bsonRegExp??!1,serializeFunctions:t?.serializeFunctions??r?.serializeFunctions??!1,fieldsAsRaw:t?.fieldsAsRaw??r?.fieldsAsRaw??{},enableUtf8Validation:t?.enableUtf8Validation??r?.enableUtf8Validation??!0}}function see(t){return t?.enableUtf8Validation===!1?{utf8:!1}:{utf8:{writeErrors:!1}}}});var re=y($=>{"use strict";f();Object.defineProperty($,"__esModule",{value:!0});$.MongoWriteConcernError=$.MongoServerSelectionError=$.MongoSystemError=$.MongoMissingDependencyError=$.MongoMissingCredentialsError=$.MongoCompatibilityError=$.MongoInvalidArgumentError=$.MongoParseError=$.MongoNetworkTimeoutError=$.MongoNetworkError=$.MongoTopologyClosedError=$.MongoCursorExhaustedError=$.MongoServerClosedError=$.MongoCursorInUseError=$.MongoOperationTimeoutError=$.MongoUnexpectedServerResponseError=$.MongoGridFSChunkError=$.MongoGridFSStreamError=$.MongoTailableCursorError=$.MongoChangeStreamError=$.MongoClientBulkWriteExecutionError=$.MongoClientBulkWriteCursorError=$.MongoClientBulkWriteError=$.MongoGCPError=$.MongoAzureError=$.MongoOIDCError=$.MongoAWSError=$.MongoKerberosError=$.MongoExpiredSessionError=$.MongoTransactionError=$.MongoNotConnectedError=$.MongoDecompressionError=$.MongoBatchReExecutionError=$.MongoStalePrimaryError=$.MongoRuntimeError=$.MongoAPIError=$.MongoDriverError=$.MongoServerError=$.MongoError=$.MongoErrorLabel=$.GET_MORE_RESUMABLE_CODES=$.MONGODB_ERROR_CODES=$.NODE_IS_RECOVERING_ERROR_MESSAGE=$.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=$.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;$.isNetworkErrorBeforeHandshake=uee;$.needsRetryableWriteLabel=aee;$.isRetryableWriteError=MD;$.isRetryableReadError=cee;$.isNodeShuttingDownError=pee;$.isSDAMUnrecoverableError=mee;$.isNetworkTimeoutError=yee;$.isResumableError=gee;var xf=Symbol("errorLabels");$.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");$.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");$.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");$.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,AuthenticationFailed:18,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernFailed:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391,ReadConcernMajorityNotAvailableYet:134});$.GET_MORE_RESUMABLE_CODES=new Set([$.MONGODB_ERROR_CODES.HostUnreachable,$.MONGODB_ERROR_CODES.HostNotFound,$.MONGODB_ERROR_CODES.NetworkTimeout,$.MONGODB_ERROR_CODES.ShutdownInProgress,$.MONGODB_ERROR_CODES.PrimarySteppedDown,$.MONGODB_ERROR_CODES.ExceededTimeLimit,$.MONGODB_ERROR_CODES.SocketException,$.MONGODB_ERROR_CODES.NotWritablePrimary,$.MONGODB_ERROR_CODES.InterruptedAtShutdown,$.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,$.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,$.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,$.MONGODB_ERROR_CODES.StaleShardVersion,$.MONGODB_ERROR_CODES.StaleEpoch,$.MONGODB_ERROR_CODES.StaleConfig,$.MONGODB_ERROR_CODES.RetryChangeStream,$.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,$.MONGODB_ERROR_CODES.CursorNotFound]);$.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequstedRetry:"PoolRequstedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});function oee(t){return t!=null&&typeof t=="object"&&"errors"in t&&Array.isArray(t.errors)}var ps=class extends Error{constructor(e,r){super(e,r),this[xf]=new Set}static buildErrorMessage(e){return typeof e=="string"?e:oee(e)&&e.message.length===0?e.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":e.errors.map(({message:r})=>r).join(", "):e!=null&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(e){return this[xf].has(e)}addErrorLabel(e){this[xf].add(e)}get errorLabels(){return Array.from(this[xf])}};$.MongoError=ps;var Ff=class extends ps{constructor(e){super(e.message||e.errmsg||e.$err||"n/a"),e.errorLabels&&(this[xf]=new Set(e.errorLabels)),this.errorResponse=e;for(let r in e)r!=="errorLabels"&&r!=="errmsg"&&r!=="message"&&r!=="errorResponse"&&(this[r]=e[r])}get name(){return"MongoServerError"}};$.MongoServerError=Ff;var qa=class extends ps{constructor(e,r){super(e,r)}get name(){return"MongoDriverError"}};$.MongoDriverError=qa;var Kr=class extends qa{constructor(e,r){super(e,r)}get name(){return"MongoAPIError"}};$.MongoAPIError=Kr;var Pn=class extends qa{constructor(e,r){super(e,r)}get name(){return"MongoRuntimeError"}};$.MongoRuntimeError=Pn;var n6=class extends Pn{constructor(e,r,n,i){super(`primary marked stale due to electionId/setVersion mismatch: server setVersion: ${e.setVersion}, server electionId: ${e.electionId}, topology setVersion: ${r}, topology electionId: ${n}`,i)}get name(){return"MongoStalePrimaryError"}};$.MongoStalePrimaryError=n6;var i6=class extends Kr{constructor(e="This batch has already been executed, create new batch to execute"){super(e)}get name(){return"MongoBatchReExecutionError"}};$.MongoBatchReExecutionError=i6;var s6=class extends Pn{constructor(e){super(e)}get name(){return"MongoDecompressionError"}};$.MongoDecompressionError=s6;var o6=class extends Kr{constructor(e){super(e)}get name(){return"MongoNotConnectedError"}};$.MongoNotConnectedError=o6;var u6=class extends Kr{constructor(e){super(e)}get name(){return"MongoTransactionError"}};$.MongoTransactionError=u6;var a6=class extends Kr{constructor(e="Cannot use a session that has ended"){super(e)}get name(){return"MongoExpiredSessionError"}};$.MongoExpiredSessionError=a6;var c6=class extends Pn{constructor(e){super(e)}get name(){return"MongoKerberosError"}};$.MongoKerberosError=c6;var l6=class extends Pn{constructor(e,r){super(e,r)}get name(){return"MongoAWSError"}};$.MongoAWSError=l6;var $f=class extends Pn{constructor(e){super(e)}get name(){return"MongoOIDCError"}};$.MongoOIDCError=$f;var f6=class extends $f{constructor(e){super(e)}get name(){return"MongoAzureError"}};$.MongoAzureError=f6;var h6=class extends $f{constructor(e){super(e)}get name(){return"MongoGCPError"}};$.MongoGCPError=h6;var d6=class extends Ff{constructor(e){super(e),this.writeConcernErrors=[],this.writeErrors=new Map}get name(){return"MongoClientBulkWriteError"}};$.MongoClientBulkWriteError=d6;var p6=class extends Pn{constructor(e){super(e)}get name(){return"MongoClientBulkWriteCursorError"}};$.MongoClientBulkWriteCursorError=p6;var m6=class extends Pn{constructor(e){super(e)}get name(){return"MongoClientBulkWriteExecutionError"}};$.MongoClientBulkWriteExecutionError=m6;var y6=class extends Pn{constructor(e){super(e)}get name(){return"MongoChangeStreamError"}};$.MongoChangeStreamError=y6;var g6=class extends Kr{constructor(e="Tailable cursor does not support this operation"){super(e)}get name(){return"MongoTailableCursorError"}};$.MongoTailableCursorError=g6;var _6=class extends Pn{constructor(e){super(e)}get name(){return"MongoGridFSStreamError"}};$.MongoGridFSStreamError=_6;var E6=class extends Pn{constructor(e){super(e)}get name(){return"MongoGridFSChunkError"}};$.MongoGridFSChunkError=E6;var A6=class extends Pn{constructor(e,r){super(e,r)}get name(){return"MongoUnexpectedServerResponseError"}};$.MongoUnexpectedServerResponseError=A6;var w6=class extends qa{get name(){return"MongoOperationTimeoutError"}};$.MongoOperationTimeoutError=w6;var S6=class extends Kr{constructor(e="Cursor is already initialized"){super(e)}get name(){return"MongoCursorInUseError"}};$.MongoCursorInUseError=S6;var b6=class extends Kr{constructor(e="Server is closed"){super(e)}get name(){return"MongoServerClosedError"}};$.MongoServerClosedError=b6;var O6=class extends Kr{constructor(e){super(e||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}};$.MongoCursorExhaustedError=O6;var C6=class extends Kr{constructor(e="Topology is closed"){super(e)}get name(){return"MongoTopologyClosedError"}};$.MongoTopologyClosedError=C6;var TD=Symbol("beforeHandshake");function uee(t){return t[TD]===!0}var Pu=class extends ps{constructor(e,r){super(e,{cause:r?.cause}),r&&typeof r.beforeHandshake=="boolean"&&(this[TD]=r.beforeHandshake)}get name(){return"MongoNetworkError"}};$.MongoNetworkError=Pu;var T6=class extends Pu{constructor(e,r){super(e,r)}get name(){return"MongoNetworkTimeoutError"}};$.MongoNetworkTimeoutError=T6;var Gp=class extends qa{constructor(e){super(e)}get name(){return"MongoParseError"}};$.MongoParseError=Gp;var D6=class extends Kr{constructor(e,r){super(e,r)}get name(){return"MongoInvalidArgumentError"}};$.MongoInvalidArgumentError=D6;var M6=class extends Kr{constructor(e){super(e)}get name(){return"MongoCompatibilityError"}};$.MongoCompatibilityError=M6;var v6=class extends Kr{constructor(e){super(e)}get name(){return"MongoMissingCredentialsError"}};$.MongoMissingCredentialsError=v6;var B6=class extends Kr{constructor(e,r){super(e,r),this.dependencyName=r.dependencyName}get name(){return"MongoMissingDependencyError"}};$.MongoMissingDependencyError=B6;var Kp=class extends ps{constructor(e,r){r&&r.error?super(ps.buildErrorMessage(r.error.message||r.error),{cause:r.error}):super(e),r&&(this.reason=r),this.code=r.error?.code}get name(){return"MongoSystemError"}};$.MongoSystemError=Kp;var I6=class extends Kp{constructor(e,r){super(e,r)}get name(){return"MongoServerSelectionError"}};$.MongoServerSelectionError=I6;var Yp=class extends Ff{constructor(e){super({...e.writeConcernError,...e}),this.errInfo=e.writeConcernError.errInfo,this.result=e}get name(){return"MongoWriteConcernError"}};$.MongoWriteConcernError=Yp;var DD=new Set([$.MONGODB_ERROR_CODES.HostUnreachable,$.MONGODB_ERROR_CODES.HostNotFound,$.MONGODB_ERROR_CODES.NetworkTimeout,$.MONGODB_ERROR_CODES.ShutdownInProgress,$.MONGODB_ERROR_CODES.PrimarySteppedDown,$.MONGODB_ERROR_CODES.SocketException,$.MONGODB_ERROR_CODES.NotWritablePrimary,$.MONGODB_ERROR_CODES.InterruptedAtShutdown,$.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,$.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,$.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,$.MONGODB_ERROR_CODES.ExceededTimeLimit,$.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]),r6=DD;function aee(t,e,r){if(t instanceof Pu)return!0;if(t instanceof ps&&(e>=9||MD(t))&&!t.hasErrorLabel($.MongoErrorLabel.HandshakeError))return!1;if(t instanceof Yp){if(r==="Mongos"&&e<9)return r6.has(t.result.code??0);let s=t.result.writeConcernError.code??Number(t.code);return r6.has(Number.isNaN(s)?0:s)}return t instanceof ps?r6.has(Number(t.code)):!!($.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||$.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}function MD(t){return t.hasErrorLabel($.MongoErrorLabel.RetryableWriteError)||t.hasErrorLabel($.MongoErrorLabel.PoolRequstedRetry)}function cee(t){return!!((typeof t.code=="number"?DD.has(t.code):!1)||t instanceof Pu||$.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||$.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}var lee=new Set([$.MONGODB_ERROR_CODES.ShutdownInProgress,$.MONGODB_ERROR_CODES.PrimarySteppedDown,$.MONGODB_ERROR_CODES.InterruptedAtShutdown,$.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,$.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),fee=new Set([$.MONGODB_ERROR_CODES.NotWritablePrimary,$.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,$.MONGODB_ERROR_CODES.LegacyNotPrimary]),hee=new Set([$.MONGODB_ERROR_CODES.InterruptedAtShutdown,$.MONGODB_ERROR_CODES.ShutdownInProgress]);function vD(t){return typeof t.code=="number"?lee.has(t.code):$.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(t.message)||$.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message)}function dee(t){return typeof t.code=="number"?fee.has(t.code):vD(t)?!1:$.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)}function pee(t){return!!(typeof t.code=="number"&&hee.has(t.code))}function mee(t){return t instanceof Gp||t==null?!0:vD(t)||dee(t)}function yee(t){return!!(t instanceof Pu&&t.message.match(/timed out/))}function gee(t,e){return t==null||!(t instanceof ps)?!1:t instanceof Pu?!0:e!=null&&e>=9?t.code===$.MONGODB_ERROR_CODES.CursorNotFound?!0:t.hasErrorLabel($.MongoErrorLabel.ResumableChangeStreamError):typeof t.code=="number"?$.GET_MORE_RESUMABLE_CODES.has(t.code):!1}});var Sr=y(Yr=>{"use strict";f();Object.defineProperty(Yr,"__esModule",{value:!0});Yr.ReadPreference=Yr.ReadPreferenceMode=void 0;var La=re();Yr.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});var wr=class t{constructor(e,r,n){if(!t.isValid(e))throw new La.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(e)}`);if(n==null&&typeof r=="object"&&!Array.isArray(r))n=r,r=void 0;else if(r&&!Array.isArray(r))throw new La.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=e,this.tags=r,this.hedge=n?.hedge,this.maxStalenessSeconds=void 0,this.minWireVersion=void 0,n=n??{},n.maxStalenessSeconds!=null){if(n.maxStalenessSeconds<=0)throw new La.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=n.maxStalenessSeconds,this.minWireVersion=5}if(this.mode===t.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new La.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new La.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new La.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(e){return new t(e)}static fromOptions(e){if(!e)return;let r=e.readPreference??e.session?.transaction.options.readPreference,n=e.readPreferenceTags;if(r!=null){if(typeof r=="string")return new t(r,n,{maxStalenessSeconds:e.maxStalenessSeconds,hedge:e.hedge});if(!(r instanceof t)&&typeof r=="object"){let i=r.mode||r.preference;if(i&&typeof i=="string")return new t(i,r.tags??n,{maxStalenessSeconds:r.maxStalenessSeconds,hedge:e.hedge})}return n&&(r.tags=n),r}}static translate(e){if(e.readPreference==null)return e;let r=e.readPreference;if(typeof r=="string")e.readPreference=new t(r);else if(r&&!(r instanceof t)&&typeof r=="object"){let n=r.mode||r.preference;n&&typeof n=="string"&&(e.readPreference=new t(n,r.tags,{maxStalenessSeconds:r.maxStalenessSeconds}))}else if(!(r instanceof t))throw new La.MongoInvalidArgumentError(`Invalid read preference: ${r}`);return e}static isValid(e){return new Set([t.PRIMARY,t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST,null]).has(e)}isValid(e){return t.isValid(typeof e=="string"?e:this.mode)}secondaryOk(){return new Set([t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST]).has(this.mode)}equals(e){return e.mode===this.mode}toJSON(){let e={mode:this.mode};return Array.isArray(this.tags)&&(e.tags=this.tags),this.maxStalenessSeconds&&(e.maxStalenessSeconds=this.maxStalenessSeconds),this.hedge&&(e.hedge=this.hedge),e}};Yr.ReadPreference=wr;wr.PRIMARY=Yr.ReadPreferenceMode.primary;wr.PRIMARY_PREFERRED=Yr.ReadPreferenceMode.primaryPreferred;wr.SECONDARY=Yr.ReadPreferenceMode.secondary;wr.SECONDARY_PREFERRED=Yr.ReadPreferenceMode.secondaryPreferred;wr.NEAREST=Yr.ReadPreferenceMode.nearest;wr.primary=new wr(Yr.ReadPreferenceMode.primary);wr.primaryPreferred=new wr(Yr.ReadPreferenceMode.primaryPreferred);wr.secondary=new wr(Yr.ReadPreferenceMode.secondary);wr.secondaryPreferred=new wr(Yr.ReadPreferenceMode.secondaryPreferred);wr.nearest=new wr(Yr.ReadPreferenceMode.nearest)});var ai=y(yn=>{"use strict";f();Object.defineProperty(yn,"__esModule",{value:!0});yn.ServerType=yn.TopologyType=yn.STATE_CONNECTED=yn.STATE_CONNECTING=yn.STATE_CLOSED=yn.STATE_CLOSING=void 0;yn._advanceClusterTime=_ee;yn.STATE_CLOSING="closing";yn.STATE_CLOSED="closed";yn.STATE_CONNECTING="connecting";yn.STATE_CONNECTED="connected";yn.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});yn.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});function _ee(t,e){(t.clusterTime==null||e.clusterTime.greaterThan(t.clusterTime.clusterTime))&&(t.clusterTime=e)}});var qf=y(Po=>{"use strict";f();Object.defineProperty(Po,"__esModule",{value:!0});Po.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;Po.writableServerSelector=Aee;Po.sameServerSelector=wee;Po.secondaryWritableServerSelector=See;Po.readPreferenceServerSelector=P6;var Xp=re(),kf=Sr(),ci=ai(),Eee=1e4,BD=90;Po.MIN_SECONDARY_WRITE_WIRE_VERSION=13;function Aee(){return function(e,r){return Qp(e,r.filter(n=>n.isWritable))}}function wee(t){return function(r,n){return t?n.filter(i=>i.address===t.address&&i.type!==ci.ServerType.Unknown):[]}}function See(t,e){return!e||!t||t&&t<Po.MIN_SECONDARY_WRITE_WIRE_VERSION?P6(kf.ReadPreference.primary):P6(e)}function bee(t,e,r){if(t.maxStalenessSeconds==null||t.maxStalenessSeconds<0)return r;let n=t.maxStalenessSeconds,i=(e.heartbeatFrequencyMS+Eee)/1e3;if(n<i)throw new Xp.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${i} seconds`);if(n<BD)throw new Xp.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${BD} seconds`);if(e.type===ci.TopologyType.ReplicaSetWithPrimary){let s=Array.from(e.servers.values()).filter(Jp)[0];return r.reduce((o,u)=>{let c=(u.lastUpdateTime-u.lastWriteDate-(s.lastUpdateTime-s.lastWriteDate)+e.heartbeatFrequencyMS)/1e3,l=t.maxStalenessSeconds??0;return c<=l&&o.push(u),o},[])}if(e.type===ci.TopologyType.ReplicaSetNoPrimary){if(r.length===0)return r;let s=r.reduce((o,u)=>u.lastWriteDate>o.lastWriteDate?u:o);return r.reduce((o,u)=>{let c=(s.lastWriteDate-u.lastWriteDate+e.heartbeatFrequencyMS)/1e3,l=t.maxStalenessSeconds??0;return c<=l&&o.push(u),o},[])}return r}function Oee(t,e){let r=Object.keys(t),n=Object.keys(e);for(let i=0;i<r.length;++i){let s=r[i];if(n.indexOf(s)===-1||e[s]!==t[s])return!1}return!0}function Cee(t,e){if(t.tags==null||Array.isArray(t.tags)&&t.tags.length===0)return e;for(let r=0;r<t.tags.length;++r){let n=t.tags[r],i=e.reduce((s,o)=>(Oee(n,o.tags)&&s.push(o),s),[]);if(i.length)return i}return[]}function Qp(t,e){let r=e.reduce((i,s)=>Math.min(s.roundTripTime,i),1/0),n=r+t.localThresholdMS;return e.reduce((i,s)=>(s.roundTripTime<=n&&s.roundTripTime>=r&&i.push(s),i),[])}function Jp(t){return t.type===ci.ServerType.RSPrimary}function Tee(t){return t.type===ci.ServerType.RSSecondary}function Dee(t){return t.type===ci.ServerType.RSSecondary||t.type===ci.ServerType.RSPrimary}function ID(t){return t.type!==ci.ServerType.Unknown}function Mee(t){return t.type===ci.ServerType.LoadBalancer}function P6(t){if(!t.isValid())throw new Xp.MongoInvalidArgumentError("Invalid read preference specified");return function(r,n,i=[]){let s=r.commonWireVersion;if(s&&t.minWireVersion&&t.minWireVersion>s)throw new Xp.MongoCompatibilityError(`Minimum wire version '${t.minWireVersion}' required, but found '${s}'`);if(r.type===ci.TopologyType.LoadBalanced)return n.filter(Mee);if(r.type===ci.TopologyType.Unknown)return[];if(r.type===ci.TopologyType.Single)return Qp(r,n.filter(ID));if(r.type===ci.TopologyType.Sharded){let c=n.filter(h=>!i.includes(h)),l=c.length>0?c:i;return Qp(r,l.filter(ID))}let o=t.mode;if(o===kf.ReadPreference.PRIMARY)return n.filter(Jp);if(o===kf.ReadPreference.PRIMARY_PREFERRED){let c=n.filter(Jp);if(c.length)return c}let u=o===kf.ReadPreference.NEAREST?Dee:Tee,a=Qp(r,Cee(t,bee(t,r,n.filter(u))));return o===kf.ReadPreference.SECONDARY_PREFERRED&&a.length===0?n.filter(Jp):a}}});var ja=y(ft=>{"use strict";f();Object.defineProperty(ft,"__esModule",{value:!0});ft.OP_MSG=ft.OP_COMPRESSED=ft.OP_DELETE=ft.OP_QUERY=ft.OP_INSERT=ft.OP_UPDATE=ft.OP_REPLY=ft.MIN_SUPPORTED_QE_SERVER_VERSION=ft.MIN_SUPPORTED_QE_WIRE_VERSION=ft.MAX_SUPPORTED_WIRE_VERSION=ft.MIN_SUPPORTED_WIRE_VERSION=ft.MAX_SUPPORTED_SERVER_VERSION=ft.MIN_SUPPORTED_SERVER_VERSION=void 0;ft.MIN_SUPPORTED_SERVER_VERSION="4.0";ft.MAX_SUPPORTED_SERVER_VERSION="8.0";ft.MIN_SUPPORTED_WIRE_VERSION=7;ft.MAX_SUPPORTED_WIRE_VERSION=25;ft.MIN_SUPPORTED_QE_WIRE_VERSION=21;ft.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";ft.OP_REPLY=1;ft.OP_UPDATE=2001;ft.OP_INSERT=2002;ft.OP_QUERY=2004;ft.OP_DELETE=2006;ft.OP_COMPRESSED=2012;ft.OP_MSG=2013});var Xt=y(x=>{"use strict";f();Object.defineProperty(x,"__esModule",{value:!0});x.END=x.CHANGE=x.INIT=x.MORE=x.RESPONSE=x.SERVER_HEARTBEAT_FAILED=x.SERVER_HEARTBEAT_SUCCEEDED=x.SERVER_HEARTBEAT_STARTED=x.COMMAND_FAILED=x.COMMAND_SUCCEEDED=x.COMMAND_STARTED=x.CLUSTER_TIME_RECEIVED=x.CONNECTION_CHECKED_IN=x.CONNECTION_CHECKED_OUT=x.CONNECTION_CHECK_OUT_FAILED=x.CONNECTION_CHECK_OUT_STARTED=x.CONNECTION_CLOSED=x.CONNECTION_READY=x.CONNECTION_CREATED=x.CONNECTION_POOL_READY=x.CONNECTION_POOL_CLEARED=x.CONNECTION_POOL_CLOSED=x.CONNECTION_POOL_CREATED=x.WAITING_FOR_SUITABLE_SERVER=x.SERVER_SELECTION_SUCCEEDED=x.SERVER_SELECTION_FAILED=x.SERVER_SELECTION_STARTED=x.TOPOLOGY_DESCRIPTION_CHANGED=x.TOPOLOGY_CLOSED=x.TOPOLOGY_OPENING=x.SERVER_DESCRIPTION_CHANGED=x.SERVER_CLOSED=x.SERVER_OPENING=x.DESCRIPTION_RECEIVED=x.UNPINNED=x.PINNED=x.MESSAGE=x.ENDED=x.CLOSED=x.CONNECT=x.OPEN=x.CLOSE=x.TIMEOUT=x.ERROR=x.SYSTEM_JS_COLLECTION=x.SYSTEM_COMMAND_COLLECTION=x.SYSTEM_USER_COLLECTION=x.SYSTEM_PROFILE_COLLECTION=x.SYSTEM_INDEX_COLLECTION=x.SYSTEM_NAMESPACE_COLLECTION=void 0;x.kDecoratedKeys=x.kDecorateResult=x.LEGACY_HELLO_COMMAND_CAMEL_CASE=x.LEGACY_HELLO_COMMAND=x.MONGO_CLIENT_EVENTS=x.LOCAL_SERVER_EVENTS=x.SERVER_RELAY_EVENTS=x.APM_EVENTS=x.TOPOLOGY_EVENTS=x.CMAP_EVENTS=x.HEARTBEAT_EVENTS=x.RESUME_TOKEN_CHANGED=void 0;x.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";x.SYSTEM_INDEX_COLLECTION="system.indexes";x.SYSTEM_PROFILE_COLLECTION="system.profile";x.SYSTEM_USER_COLLECTION="system.users";x.SYSTEM_COMMAND_COLLECTION="$cmd";x.SYSTEM_JS_COLLECTION="system.js";x.ERROR="error";x.TIMEOUT="timeout";x.CLOSE="close";x.OPEN="open";x.CONNECT="connect";x.CLOSED="closed";x.ENDED="ended";x.MESSAGE="message";x.PINNED="pinned";x.UNPINNED="unpinned";x.DESCRIPTION_RECEIVED="descriptionReceived";x.SERVER_OPENING="serverOpening";x.SERVER_CLOSED="serverClosed";x.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";x.TOPOLOGY_OPENING="topologyOpening";x.TOPOLOGY_CLOSED="topologyClosed";x.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";x.SERVER_SELECTION_STARTED="serverSelectionStarted";x.SERVER_SELECTION_FAILED="serverSelectionFailed";x.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";x.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";x.CONNECTION_POOL_CREATED="connectionPoolCreated";x.CONNECTION_POOL_CLOSED="connectionPoolClosed";x.CONNECTION_POOL_CLEARED="connectionPoolCleared";x.CONNECTION_POOL_READY="connectionPoolReady";x.CONNECTION_CREATED="connectionCreated";x.CONNECTION_READY="connectionReady";x.CONNECTION_CLOSED="connectionClosed";x.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";x.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";x.CONNECTION_CHECKED_OUT="connectionCheckedOut";x.CONNECTION_CHECKED_IN="connectionCheckedIn";x.CLUSTER_TIME_RECEIVED="clusterTimeReceived";x.COMMAND_STARTED="commandStarted";x.COMMAND_SUCCEEDED="commandSucceeded";x.COMMAND_FAILED="commandFailed";x.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";x.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";x.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";x.RESPONSE="response";x.MORE="more";x.INIT="init";x.CHANGE="change";x.END="end";x.RESUME_TOKEN_CHANGED="resumeTokenChanged";x.HEARTBEAT_EVENTS=Object.freeze([x.SERVER_HEARTBEAT_STARTED,x.SERVER_HEARTBEAT_SUCCEEDED,x.SERVER_HEARTBEAT_FAILED]);x.CMAP_EVENTS=Object.freeze([x.CONNECTION_POOL_CREATED,x.CONNECTION_POOL_READY,x.CONNECTION_POOL_CLEARED,x.CONNECTION_POOL_CLOSED,x.CONNECTION_CREATED,x.CONNECTION_READY,x.CONNECTION_CLOSED,x.CONNECTION_CHECK_OUT_STARTED,x.CONNECTION_CHECK_OUT_FAILED,x.CONNECTION_CHECKED_OUT,x.CONNECTION_CHECKED_IN]);x.TOPOLOGY_EVENTS=Object.freeze([x.SERVER_OPENING,x.SERVER_CLOSED,x.SERVER_DESCRIPTION_CHANGED,x.TOPOLOGY_OPENING,x.TOPOLOGY_CLOSED,x.TOPOLOGY_DESCRIPTION_CHANGED,x.ERROR,x.TIMEOUT,x.CLOSE]);x.APM_EVENTS=Object.freeze([x.COMMAND_STARTED,x.COMMAND_SUCCEEDED,x.COMMAND_FAILED]);x.SERVER_RELAY_EVENTS=Object.freeze([x.SERVER_HEARTBEAT_STARTED,x.SERVER_HEARTBEAT_SUCCEEDED,x.SERVER_HEARTBEAT_FAILED,x.COMMAND_STARTED,x.COMMAND_SUCCEEDED,x.COMMAND_FAILED,...x.CMAP_EVENTS]);x.LOCAL_SERVER_EVENTS=Object.freeze([x.CONNECT,x.DESCRIPTION_RECEIVED,x.CLOSED,x.ENDED]);x.MONGO_CLIENT_EVENTS=Object.freeze([...x.CMAP_EVENTS,...x.APM_EVENTS,...x.TOPOLOGY_EVENTS,...x.HEARTBEAT_EVENTS]);x.LEGACY_HELLO_COMMAND="ismaster";x.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster";x.kDecorateResult=Symbol.for("@@mdb.decorateDecryptionResult");x.kDecoratedKeys=Symbol.for("@@mdb.decryptedKeys")});var Bi=y(ms=>{"use strict";f();Object.defineProperty(ms,"__esModule",{value:!0});ms.ReadConcern=ms.ReadConcernLevel=void 0;ms.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});var N6=class t{constructor(e){this.level=ms.ReadConcernLevel[e]??e}static fromOptions(e){if(e!=null){if(e.readConcern){let{readConcern:r}=e;if(r instanceof t)return r;if(typeof r=="string")return new t(r);if("level"in r&&r.level)return new t(r.level)}if(e.level)return new t(e.level)}}static get MAJORITY(){return ms.ReadConcernLevel.majority}static get AVAILABLE(){return ms.ReadConcernLevel.available}static get LINEARIZABLE(){return ms.ReadConcernLevel.linearizable}static get SNAPSHOT(){return ms.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}};ms.ReadConcern=N6});var PD=y(Zp=>{"use strict";f();Object.defineProperty(Zp,"__esModule",{value:!0});Zp.OnDemandDocument=void 0;var $e=Ye(),R6=class t{constructor(e,r=0,n=!1,i){this.bson=e,this.offset=r,this.isArray=n,this.cache=Object.create(null),this.indexFound=Object.create(null),this.elements=i??(0,$e.parseToElementsToArray)(this.bson,r)}isElementName(e,r){let n=r[2],i=r[1];if(e.length!==n)return!1;let s=i+n;for(let o=i,u=0;u<e.length&&o<s;u++,o++)if(this.bson[o]!==e.charCodeAt(u))return!1;return!0}getElement(e){let r=this.cache[e];if(r===!1)return null;if(r!=null)return r;if(typeof e=="number")if(this.isArray)if(e<this.elements.length){let i={element:this.elements[e],value:void 0};return this.cache[e]=i,this.indexFound[e]=!0,i}else return null;else return null;for(let n=0;n<this.elements.length;n++){let i=this.elements[n];if(!(n in this.indexFound)&&this.isElementName(e,i)){let s={element:i,value:void 0};return this.cache[e]=s,this.indexFound[n]=!0,s}}return this.cache[e]=!1,null}toJSValue(e,r){let n=e[0],i=e[3],s=e[4];if(r!==n)return null;switch(r){case $e.BSONType.null:case $e.BSONType.undefined:return null;case $e.BSONType.double:return(0,$e.getFloat64LE)(this.bson,i);case $e.BSONType.int:return(0,$e.getInt32LE)(this.bson,i);case $e.BSONType.long:return(0,$e.getBigInt64LE)(this.bson,i);case $e.BSONType.bool:return!!this.bson[i];case $e.BSONType.objectId:return new $e.ObjectId(this.bson.subarray(i,i+12));case $e.BSONType.timestamp:return new $e.Timestamp((0,$e.getBigInt64LE)(this.bson,i));case $e.BSONType.string:return(0,$e.toUTF8)(this.bson,i+4,i+s-1,!1);case $e.BSONType.binData:{let o=(0,$e.getInt32LE)(this.bson,i),u=this.bson[i+4];if(u===2){let a=(0,$e.getInt32LE)(this.bson,i+1+4);if(a<0)throw new $e.BSONError("Negative binary type element size found for subtype 0x02");if(a>o-4)throw new $e.BSONError("Binary type with subtype 0x02 contains too long binary size");if(a<o-4)throw new $e.BSONError("Binary type with subtype 0x02 contains too short binary size");return new $e.Binary(this.bson.subarray(i+1+4+4,i+1+4+4+a),2)}return new $e.Binary(this.bson.subarray(i+1+4,i+1+4+o),u)}case $e.BSONType.date:return new Date(Number((0,$e.getBigInt64LE)(this.bson,i)));case $e.BSONType.object:return new t(this.bson,i);case $e.BSONType.array:return new t(this.bson,i,!0);default:throw new $e.BSONError(`Unsupported BSON type: ${r}`)}}size(){return this.elements.length}has(e){let r=this.cache[e];return r===!1?!1:r!=null?!0:this.getElement(e)!=null}get(e,r,n){let i=this.getElement(e);if(i==null){if(n===!0)throw new $e.BSONError(`BSON element "${e}" is missing`);return null}if(i.value==null){let s=this.toJSValue(i.element,r);if(s==null){if(n===!0)throw new $e.BSONError(`BSON element "${e}" is missing`);return null}i.value=s}return i.value}getNumber(e,r){let n=this.get(e,$e.BSONType.bool),i=n==null?null:n?1:0,s=this.get(e,$e.BSONType.long),o=s==null?null:Number(s),u=i??o??this.get(e,$e.BSONType.int)??this.get(e,$e.BSONType.double);if(r===!0&&u==null)throw new $e.BSONError(`BSON element "${e}" is missing`);return u}toObject(e){return(0,$e.deserialize)(this.bson,{...e,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){let e=(0,$e.getInt32LE)(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+e)}};Zp.OnDemandDocument=R6});var gs=y(ys=>{"use strict";f();Object.defineProperty(ys,"__esModule",{value:!0});ys.ClientBulkWriteCursorResponse=ys.ExplainedCursorResponse=ys.CursorResponse=ys.MongoDBResponse=void 0;ys.isErrorResponse=RD;var ze=Ye(),Ua=re(),ND=fe(),vee=PD();function RD(t,e){for(let r=0;r<e.length;r++){let n=e[r];if(n[2]===2){let i=n[1];if(t[i]===111&&t[i+1]===107){let s=n[3],o=n[4];for(let u=s;u<s+o;u++)if(t[u]!==0)return!1;return!0}}}return!0}var hl=class t extends vee.OnDemandDocument{get(e,r,n){try{return super.get(e,r,n)}catch(i){throw new Ua.MongoUnexpectedServerResponseError(i.message,{cause:i})}}static is(e){return e instanceof t}static make(e){let r=(0,ze.parseToElementsToArray)(e,0);return RD(e,r)?new t(e,0,!1,r):new this(e,0,!1,r)}get isMaxTimeExpiredError(){if(this.ok===0&&this.code===Ua.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;if(this.ok===0)return!1;if(this.get("writeConcernError",ze.BSONType.object)?.getNumber("code")===Ua.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;let n=this.get("writeErrors",ze.BSONType.array);if(n?.size()){for(let i=0;i<n.size();i++)if(n.get(i,ze.BSONType.object)?.getNumber("code")===Ua.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0}return!1}get recoveryToken(){return this.get("recoveryToken",ze.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}get atClusterTime(){return this.get("cursor",ze.BSONType.object)?.get("atClusterTime",ze.BSONType.timestamp)??this.get("atClusterTime",ze.BSONType.timestamp)}get operationTime(){return this.get("operationTime",ze.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",ze.BSONType.string)}get errmsg(){return this.get("errmsg",ze.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){let e=this.get("$clusterTime",ze.BSONType.object);if(e==null)return this.clusterTime=null,null;let r=e.get("clusterTime",ze.BSONType.timestamp,!0),n=e.get("signature",ze.BSONType.object)?.toObject();this.clusterTime={clusterTime:r,signature:n}}return this.clusterTime??null}toObject(e){let r={...(0,ze.pluckBSONSerializeOptions)(e??{}),validation:(0,ze.parseUtf8ValidationOption)(e)};return super.toObject(r)}};ys.MongoDBResponse=hl;hl.empty=new hl(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]));var dl=class t extends hl{constructor(){super(...arguments),this._batch=null,this.iterated=0,this._encryptedBatch=null}static is(e){return e instanceof t||e===t.emptyGetMore}get cursor(){return this.get("cursor",ze.BSONType.object,!0)}get id(){try{return ze.Long.fromBigInt(this.cursor.get("id",ze.BSONType.long,!0))}catch(e){throw new Ua.MongoUnexpectedServerResponseError(e.message,{cause:e})}}get ns(){let e=this.cursor.get("ns",ze.BSONType.string);return e!=null?(0,ND.ns)(e):null}get length(){return Math.max(this.batchSize-this.iterated,0)}get encryptedBatch(){if(this.encryptedResponse==null)return null;if(this._encryptedBatch!=null)return this._encryptedBatch;let e=this.encryptedResponse?.get("cursor",ze.BSONType.object);if(e?.has("firstBatch"))this._encryptedBatch=e.get("firstBatch",ze.BSONType.array,!0);else if(e?.has("nextBatch"))this._encryptedBatch=e.get("nextBatch",ze.BSONType.array,!0);else throw new Ua.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._encryptedBatch}get batch(){if(this._batch!=null)return this._batch;let e=this.cursor;if(e.has("firstBatch"))this._batch=e.get("firstBatch",ze.BSONType.array,!0);else if(e.has("nextBatch"))this._batch=e.get("nextBatch",ze.BSONType.array,!0);else throw new Ua.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._batch}get batchSize(){return this.batch?.size()}get postBatchResumeToken(){return this.cursor.get("postBatchResumeToken",ze.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}shift(e){if(this.iterated>=this.batchSize)return null;let r=this.batch.get(this.iterated,ze.BSONType.object,!0)??null,n=this.encryptedBatch?.get(this.iterated,ze.BSONType.object,!0)??null;if(this.iterated+=1,e?.raw)return r.toBytes();{let i=r.toObject(e);return n&&(0,ND.decorateDecryptionResult)(i,n.toObject(e),!0),i}}clear(){this.iterated=this.batchSize}};ys.CursorResponse=dl;dl.emptyGetMore={id:new ze.Long(0),length:0,shift:()=>null};var x6=class extends dl{constructor(){super(...arguments),this.isExplain=!0,this._length=1}get id(){return ze.Long.fromBigInt(0n)}get batchSize(){return 0}get ns(){return null}get length(){return this._length}shift(e){return this._length===0?null:(this._length-=1,this.toObject(e))}};ys.ExplainedCursorResponse=x6;var F6=class extends dl{get insertedCount(){return this.get("nInserted",ze.BSONType.int,!0)}get upsertedCount(){return this.get("nUpserted",ze.BSONType.int,!0)}get matchedCount(){return this.get("nMatched",ze.BSONType.int,!0)}get modifiedCount(){return this.get("nModified",ze.BSONType.int,!0)}get deletedCount(){return this.get("nDeleted",ze.BSONType.int,!0)}get writeConcernError(){return this.get("writeConcernError",ze.BSONType.object,!1)}};ys.ClientBulkWriteCursorResponse=F6});var Qr=y(Va=>{"use strict";f();Object.defineProperty(Va,"__esModule",{value:!0});Va.WriteConcern=Va.WRITE_CONCERN_KEYS=void 0;Va.throwIfWriteConcernError=Iee;var xD=gs(),Bee=re();Va.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];var $6=class t{constructor(e,r,n,i){e!=null&&(Number.isNaN(Number(e))?this.w=e:this.w=Number(e)),r!=null&&(this.wtimeoutMS=this.wtimeout=r),n!=null&&(this.journal=this.j=n),i!=null&&(this.journal=this.j=!!i)}static apply(e,r){let n={};return r.w!=null&&(n.w=r.w),r.wtimeoutMS!=null&&(n.wtimeout=r.wtimeoutMS),r.journal!=null&&(n.j=r.j),e.writeConcern=n,e}static fromOptions(e,r){if(e==null)return;r=r??{};let n;typeof e=="string"||typeof e=="number"?n={w:e}:e instanceof t?n=e:n=e.writeConcern;let i=r instanceof t?r:r.writeConcern,{w:s=void 0,wtimeout:o=void 0,j:u=void 0,fsync:a=void 0,journal:c=void 0,wtimeoutMS:l=void 0}={...i,...n};if(s!=null||o!=null||l!=null||u!=null||c!=null||a!=null)return new t(s,o??l,u??c,a)}};Va.WriteConcern=$6;function Iee(t){if(typeof t=="object"&&t!=null){let e=xD.MongoDBResponse.is(t)&&t.has("writeConcernError")?t.toObject():!xD.MongoDBResponse.is(t)&&"writeConcernError"in t?t:null;if(e!=null)throw new Bee.MongoWriteConcernError(e)}}});var fe=y(ie=>{"use strict";f();Object.defineProperty(ie,"__esModule",{value:!0});ie.randomBytes=ie.COSMOS_DB_MSG=ie.DOCUMENT_DB_MSG=ie.COSMOS_DB_CHECK=ie.DOCUMENT_DB_CHECK=ie.MONGODB_WARNING_CODE=ie.DEFAULT_PK_FACTORY=ie.HostAddress=ie.BufferPool=ie.List=ie.MongoDBCollectionNamespace=ie.MongoDBNamespace=ie.ByteUtils=void 0;ie.isUint8Array=Lee;ie.hostMatchesWildcards=jee;ie.normalizeHintField=Uee;ie.isObject=q6;ie.mergeOptions=zee;ie.filterOptions=Wee;ie.applyRetryableWrites=Hee;ie.isPromiseLike=Gee;ie.decorateWithCollation=Kee;ie.decorateWithReadConcern=Yee;ie.getTopology=LD;ie.ns=Qee;ie.makeCounter=Jee;ie.uuidV4=Xee;ie.maxWireVersion=Zee;ie.arrayStrictEqual=ete;ie.errorStrictEqual=tte;ie.makeStateMachine=rte;ie.now=jD;ie.calculateDurationInMs=nte;ie.hasAtomicOperators=UD;ie.resolveTimeoutOptions=ite;ie.resolveOptions=ste;ie.isSuperset=VD;ie.isHello=ote;ie.setDifference=ute;ie.isRecord=zD;ie.deepCopy=L6;ie.emitWarning=WD;ie.emitWarningOnce=cte;ie.enumToString=lte;ie.supportsRetryableWrites=fte;ie.shuffle=hte;ie.commandSupportsReadConcern=dte;ie.compareObjectId=pte;ie.parseInteger=HD;ie.parseUnsignedInteger=mte;ie.checkParentDomainMatch=yte;ie.get=gte;ie.request=_te;ie.isHostMatch=Ete;ie.promiseWithResolvers=GD;ie.squashError=Ate;ie.once=wte;ie.maybeAddIdToDocuments=Ste;ie.fileIsAccessible=bte;ie.csotMin=Ote;ie.noop=Cte;ie.decorateDecryptionResult=KD;var kD=require("crypto"),Pee=require("fs"),qD=require("http"),k6=require("timers"),Nee=require("url"),Ree=require("url"),xee=require("util"),V6=Ye(),Fee=ja(),e0=Xt(),gn=re(),$ee=Bi(),kee=Sr(),qee=ai(),FD=Qr();ie.ByteUtils={toLocalBufferType(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)},equals(t,e){return ie.ByteUtils.toLocalBufferType(t).equals(e)},compare(t,e){return ie.ByteUtils.toLocalBufferType(t).compare(e)},toBase64(t){return ie.ByteUtils.toLocalBufferType(t).toString("base64")}};function Lee(t){return t!=null&&typeof t=="object"&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Uint8Array"}function jee(t,e){for(let r of e)if(t===r||r.startsWith("*.")&&t?.endsWith(r.substring(2,r.length))||r.startsWith("*/")&&t?.endsWith(r.substring(2,r.length)))return!0;return!1}function Uee(t){let e;if(typeof t=="string")e=t;else if(Array.isArray(t))e={},t.forEach(r=>{e[r]=1});else if(t!=null&&typeof t=="object"){e={};for(let r in t)e[r]=t[r]}return e}var Vee=t=>Object.prototype.toString.call(t);function q6(t){return Vee(t)==="[object Object]"}function zee(t,e){return{...t,...e}}function Wee(t,e){let r={};for(let n in t)e.includes(n)&&(r[n]=t[n]);return r}function Hee(t,e){return e&&e.s.options?.retryWrites&&(t.retryWrites=!0),t}function Gee(t){return t!=null&&typeof t=="object"&&"then"in t&&typeof t.then=="function"}function Kee(t,e,r){let n=LD(e).capabilities;if(r.collation&&typeof r.collation=="object")if(n&&n.commandsTakeCollation)t.collation=r.collation;else throw new gn.MongoCompatibilityError("Current topology does not support collation")}function Yee(t,e,r){if(r&&r.session&&r.session.inTransaction())return;let n=Object.assign({},t.readConcern||{});e.s.readConcern&&Object.assign(n,e.s.readConcern),Object.keys(n).length>0&&Object.assign(t,{readConcern:n})}function LD(t){if("topology"in t&&t.topology)return t.topology;if("client"in t&&t.client.topology)return t.client.topology;throw new gn.MongoNotConnectedError("MongoClient must be connected to perform this operation")}function Qee(t){return Lf.fromString(t)}var Lf=class t{constructor(e,r){this.db=e,this.collection=r,this.collection=r===""?void 0:r}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(e){return new t0(this.db,e)}static fromString(e){if(typeof e!="string"||e==="")throw new gn.MongoRuntimeError(`Cannot parse namespace from "${e}"`);let[r,...n]=e.split("."),i=n.join(".");return new t(r,i===""?void 0:i)}};ie.MongoDBNamespace=Lf;var t0=class extends Lf{constructor(e,r){super(e,r),this.collection=r}static fromString(e){return super.fromString(e)}};ie.MongoDBCollectionNamespace=t0;function*Jee(t=0){let e=t;for(;;){let r=e;e+=1,yield r}}function Xee(){let t=kD.randomBytes(16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,t}function Zee(t){if(t){if(t.loadBalanced||t.serverApi?.version)return Fee.MAX_SUPPORTED_WIRE_VERSION;if(t.hello)return t.hello.maxWireVersion;if("lastHello"in t&&typeof t.lastHello=="function"){let e=t.lastHello();if(e)return e.maxWireVersion}if(t.description&&"maxWireVersion"in t.description&&t.description.maxWireVersion!=null)return t.description.maxWireVersion}return 0}function ete(t,e){return!Array.isArray(t)||!Array.isArray(e)?!1:t.length===e.length&&t.every((r,n)=>r===e[n])}function tte(t,e){return t===e?!0:!t||!e?t===e:!(t==null&&e!=null||t!=null&&e==null||t.constructor.name!==e.constructor.name||t.message!==e.message)}function rte(t){return function(r,n){let i=t[r.s.state];if(i&&i.indexOf(n)<0)throw new gn.MongoRuntimeError(`illegal state transition from [${r.s.state}] => [${n}], allowed: [${i}]`);r.emit("stateChanged",r.s.state,n),r.s.state=n}}function jD(){let t=process.hrtime();return Math.floor(t[0]*1e3+t[1]/1e6)}function nte(t){if(typeof t!="number")return-1;let e=jD()-t;return e<0?0:e}function UD(t){if(Array.isArray(t)){for(let r of t)if(UD(r))return!0;return!1}let e=Object.keys(t);return e.length>0&&e[0][0]==="$"}function ite(t,e){let{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:i,timeoutMS:s}=t.s.options;return{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:i,timeoutMS:s,...e}}function ste(t,e){let r=Object.assign({},e,(0,V6.resolveBSONOptions)(e,t)),n=e?.timeoutMS??t?.timeoutMS,i=e?.session;if(!i?.inTransaction()){let u=$ee.ReadConcern.fromOptions(e)??t?.readConcern;u&&(r.readConcern=u);let a=FD.WriteConcern.fromOptions(e)??t?.writeConcern;a&&(n!=null&&(a=FD.WriteConcern.fromOptions({...a,wtimeout:void 0,wtimeoutMS:void 0})),r.writeConcern=a)}r.timeoutMS=n;let s=kee.ReadPreference.fromOptions(e)??t?.readPreference;if(s&&(r.readPreference=s),i?.explicit&&i?.timeoutContext!=null&&e?.timeoutMS!=null)throw new gn.MongoInvalidArgumentError("An operation cannot be given a timeoutMS setting when inside a withTransaction call that has a timeoutMS setting");return r}function VD(t,e){t=Array.isArray(t)?new Set(t):t,e=Array.isArray(e)?new Set(e):e;for(let r of e)if(!t.has(r))return!1;return!0}function ote(t){return!!(t[e0.LEGACY_HELLO_COMMAND]||t.hello)}function ute(t,e){let r=new Set(t);for(let n of e)r.delete(n);return r}var ate=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);function zD(t,e=void 0){if(!q6(t))return!1;let r=t.constructor;if(r&&r.prototype&&(!q6(r.prototype)||!ate(r.prototype,"isPrototypeOf")))return!1;if(e){let n=Object.keys(t);return VD(n,e)}return!0}function L6(t){if(t==null)return t;if(Array.isArray(t))return t.map(r=>L6(r));if(zD(t)){let r={};for(let n in t)r[n]=L6(t[n]);return r}let e=t.constructor;if(e)switch(e.name.toLowerCase()){case"date":return new e(Number(t));case"map":return new Map(t);case"set":return new Set(t);case"buffer":return Buffer.from(t)}return t}var r0=class{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let e of this.nodes())yield e.value}*nodes(){let e=this.head.next;for(;e!==this.head;){let{next:r}=e;yield e,e=r}}push(e){this.count+=1;let r={next:this.head,prev:this.head.prev,value:e};this.head.prev.next=r,this.head.prev=r}pushMany(e){for(let r of e)this.push(r)}unshift(e){this.count+=1;let r={next:this.head.next,prev:this.head,value:e};this.head.next.prev=r,this.head.next=r}remove(e){if(e===this.head||this.length===0)return null;this.count-=1;let r=e.prev,n=e.next;return r.next=n,n.prev=r,e.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(e){for(let r of this.nodes())e(r.value)&&this.remove(r)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}};ie.List=r0;var j6=class{constructor(){this.buffers=new r0,this.totalByteLength=0}get length(){return this.totalByteLength}append(e){this.buffers.push(e),this.totalByteLength+=e.length}getInt32(){if(this.totalByteLength<4)return null;let e=this.buffers.first();if(e!=null&&e.byteLength>=4)return e.readInt32LE(0);let r=this.read(4),n=r.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(r),n}read(e){if(typeof e!="number"||e<0)throw new gn.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(e>this.totalByteLength)return Buffer.alloc(0);let r=Buffer.allocUnsafe(e);for(let n=0;n<e;){let i=this.buffers.shift();if(i==null)break;let s=e-n,o=Math.min(s,i.byteLength),u=i.subarray(0,o);r.set(u,n),n+=o,this.totalByteLength-=o,o<i.byteLength&&this.buffers.unshift(i.subarray(o))}return r}};ie.BufferPool=j6;var U6=class t{constructor(e){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;let r=e.split(" ").join("%20");if(r.endsWith(".sock")){this.socketPath=decodeURIComponent(r);return}let n=`iLoveJS://${r}`,i;try{i=new Ree.URL(n)}catch(a){let c=new gn.MongoRuntimeError(`Unable to parse ${r} with URL`);throw c.cause=a,c}let s=i.hostname,o=i.port,u=decodeURIComponent(s).toLowerCase();if(u.startsWith("[")&&u.endsWith("]")&&(this.isIPv6=!0,u=u.substring(1,s.length-1)),this.host=u.toLowerCase(),typeof o=="number"?this.port=o:typeof o=="string"&&o!==""?this.port=Number.parseInt(o,10):this.port=27017,this.port===0)throw new gn.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){return typeof this.host=="string"?this.isIPv6?`[${this.host}]:${this.port}`:`${this.host}:${this.port}`:`${this.socketPath}`}static fromString(e){return new t(e)}static fromHostPort(e,r){return e.includes(":")&&(e=`[${e}]`),t.fromString(`${e}:${r}`)}static fromSrvRecord({name:e,port:r}){return t.fromHostPort(e,r)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};let e=this.host??"",r=this.port??0;return{host:e,port:r}}};ie.HostAddress=U6;ie.DEFAULT_PK_FACTORY={createPk(){return new V6.ObjectId}};ie.MONGODB_WARNING_CODE="MONGODB DRIVER";function WD(t){return process.emitWarning(t,{code:ie.MONGODB_WARNING_CODE})}var $D=new Set;function cte(t){if(!$D.has(t))return $D.add(t),WD(t)}function lte(t){return Object.values(t).join(", ")}function fte(t){return t?!!(t.loadBalanced||t.description.logicalSessionTimeoutMinutes!=null&&t.description.type!==qee.ServerType.Standalone):!1}function hte(t,e=0){let r=Array.from(t);if(e>r.length)throw new gn.MongoRuntimeError("Limit must be less than the number of items");let n=r.length,i=e%r.length===0?1:r.length-e;for(;n>i;){let s=Math.floor(Math.random()*n);n-=1;let o=r[n];r[n]=r[s],r[s]=o}return e%r.length===0?r:r.slice(i)}function dte(t){return!!(t.aggregate||t.count||t.distinct||t.find||t.geoNear)}function pte(t,e){return t==null&&e==null?0:t==null?-1:e==null?1:ie.ByteUtils.compare(t.id,e.id)}function HD(t){if(typeof t=="number")return Math.trunc(t);let e=Number.parseInt(String(t),10);return Number.isNaN(e)?null:e}function mte(t){let e=HD(t);return e!=null&&e>=0?e:null}function yte(t,e){let r=t.endsWith(".")?t.slice(0,t.length-1):t,n=e.endsWith(".")?e.slice(0,e.length-1):e,i=/^.*?\./,s=n.split(".").length<3,o=`.${r.replace(i,"")}`,u=s?n:`.${n.replace(i,"")}`;if(u.startsWith(".")||(u="."+u),s&&r.split(".").length<=n.split(".").length)throw new gn.MongoAPIError("Server record does not have at least one more domain level than parent URI");if(!o.endsWith(u))throw new gn.MongoAPIError("Server record does not share hostname with parent URI")}function gte(t,e={}){return new Promise((r,n)=>{let i,s=qD.get(t,e,o=>{o.setEncoding("utf8");let u="";o.on("data",a=>u+=a),o.on("end",()=>{(0,k6.clearTimeout)(i),r({status:o.statusCode,body:u})})}).on("error",o=>{(0,k6.clearTimeout)(i),n(o)}).end();i=(0,k6.setTimeout)(()=>{s.destroy(new gn.MongoNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})}async function _te(t,e={}){return await new Promise((r,n)=>{let i={method:"GET",timeout:1e4,json:!0,...Nee.parse(t),...e},s=qD.request(i,o=>{o.setEncoding("utf8");let u="";o.on("data",a=>{u+=a}),o.once("end",()=>{if(e.json===!1){r(u);return}try{let a=JSON.parse(u);r(a)}catch{n(new gn.MongoRuntimeError(`Invalid JSON response: "${u}"`))}})});s.once("timeout",()=>s.destroy(new gn.MongoNetworkTimeoutError(`Network request to ${t} timed out after ${e.timeout} ms`))),s.once("error",o=>n(o)),s.end()})}ie.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;ie.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;ie.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";ie.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";function Ete(t,e){return!!(e&&t.test(e.toLowerCase()))}function GD(){let t,e;return{promise:new Promise(function(i,s){t=i,e=s}),resolve:t,reject:e}}function Ate(t){}ie.randomBytes=(0,xee.promisify)(kD.randomBytes);async function wte(t,e){let{promise:r,resolve:n,reject:i}=GD(),s=u=>n(u),o=u=>i(u);t.once(e,s).once("error",o);try{let u=await r;return t.off("error",o),u}catch(u){throw t.off(e,s),u}}function Ste(t,e,r){if((typeof r.forceServerObjectId=="boolean"?r.forceServerObjectId:t.s.db.options?.forceServerObjectId)===!0)return e;let i=s=>(s._id==null&&(s._id=t.s.pkFactory.createPk()),s);return Array.isArray(e)?e.map(i):i(e)}async function bte(t,e){try{return await Pee.promises.access(t,e),!0}catch{return!1}}function Ote(t,e){return t===0?e:e===0?t:Math.min(t,e)}function Cte(){}function KD(t,e,r=!0){if(r&&(Buffer.isBuffer(e)&&(e=(0,V6.deserialize)(e)),Buffer.isBuffer(t)))throw new gn.MongoRuntimeError("Expected result of decryption to be deserialized BSON object");if(!(!t||typeof t!="object"))for(let n of Object.keys(t)){let i=e[n];if(i&&i._bsontype==="Binary"&&i.sub_type===6){t[e0.kDecoratedKeys]||Object.defineProperty(t,e0.kDecoratedKeys,{value:[],configurable:!0,enumerable:!1,writable:!1}),t[e0.kDecoratedKeys].push(n);continue}KD(t[n],i,!1)}}});var Jr=y(Pi=>{"use strict";f();Object.defineProperty(Pi,"__esModule",{value:!0});Pi.LegacyTimeoutContext=Pi.CSOTTimeoutContext=Pi.TimeoutContext=Pi.Timeout=Pi.TimeoutError=void 0;var YD=require("timers"),za=re(),QD=fe(),jf=class extends Error{get name(){return"TimeoutError"}constructor(e,r){super(e,r),this.duration=r.duration}static is(e){return e!=null&&typeof e=="object"&&"name"in e&&e.name==="TimeoutError"}};Pi.TimeoutError=jf;var Ii=class t extends Promise{get remainingTime(){return this.timedOut?0:this.duration===0?1/0:this.start+this.duration-Math.trunc(performance.now())}get timeElapsed(){return Math.trunc(performance.now())-this.start}constructor(e=()=>null,r){let n=r?.duration??0,i=!!r?.unref,s=r?.rejection;if(n<0)throw new za.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");let o;super((u,a)=>{o=a,e(QD.noop,a)}),this.ended=null,this.timedOut=!1,this.cleared=!1,this.duration=n,this.start=Math.trunc(performance.now()),s==null&&this.duration>0?(this.id=(0,YD.setTimeout)(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,o(new jf(`Expired after ${n}ms`,{duration:n}))},this.duration),typeof this.id.unref=="function"&&i&&this.id.unref()):s!=null&&(this.ended=Math.trunc(performance.now()),this.timedOut=!0,o(s))}clear(){(0,YD.clearTimeout)(this.id),this.id=void 0,this.timedOut=!1,this.cleared=!0}throwIfExpired(){if(this.timedOut)throw new jf("Timed out",{duration:this.duration})}static expires(e,r){return new t(void 0,{duration:e,unref:r})}static reject(e){return new t(void 0,{duration:0,unref:!0,rejection:e})}};Pi.Timeout=Ii;function Tte(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"waitQueueTimeoutMS"in t&&typeof t.waitQueueTimeoutMS=="number"}function Dte(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"timeoutMS"in t&&typeof t.timeoutMS=="number"}var Uf=class{static create(e){if(e.session?.timeoutContext!=null)return e.session?.timeoutContext;if(Dte(e))return new n0(e);if(Tte(e))return new i0(e);throw new za.MongoRuntimeError("Unrecognized options")}};Pi.TimeoutContext=Uf;var n0=class t extends Uf{constructor(e){super(),this.minRoundTripTime=0,this.start=Math.trunc(performance.now()),this.timeoutMS=e.timeoutMS,this.serverSelectionTimeoutMS=e.serverSelectionTimeoutMS,this.socketTimeoutMS=e.socketTimeoutMS,this.clearServerSelectionTimeout=!1}get maxTimeMS(){return this.remainingTimeMS-this.minRoundTripTime}get remainingTimeMS(){let e=Math.trunc(performance.now())-this.start;return this.timeoutMS<=0?1/0:this.timeoutMS-e}csotEnabled(){return!0}get serverSelectionTimeout(){if(typeof this._serverSelectionTimeout!="object"||this._serverSelectionTimeout?.cleared){let{remainingTimeMS:e,serverSelectionTimeoutMS:r}=this;if(e<=0)return Ii.reject(new za.MongoOperationTimeoutError(`Timed out in server selection after ${this.timeoutMS}ms`));r!==0&&(0,QD.csotMin)(e,r)===r?this._serverSelectionTimeout=Ii.expires(r):e>0&&Number.isFinite(e)?this._serverSelectionTimeout=Ii.expires(e):this._serverSelectionTimeout=null}return this._serverSelectionTimeout}get connectionCheckoutTimeout(){if(typeof this._connectionCheckoutTimeout!="object"||this._connectionCheckoutTimeout?.cleared)if(typeof this._serverSelectionTimeout=="object")this._connectionCheckoutTimeout=this._serverSelectionTimeout;else throw new za.MongoRuntimeError("Unreachable. If you are seeing this error, please file a ticket on the NODE driver project on Jira");return this._connectionCheckoutTimeout}get timeoutForSocketWrite(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?Ii.expires(e):Ii.reject(new za.MongoOperationTimeoutError("Timed out before socket write")):null}get timeoutForSocketRead(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?Ii.expires(e):Ii.reject(new za.MongoOperationTimeoutError("Timed out before socket read")):null}refresh(){this.start=Math.trunc(performance.now()),this.minRoundTripTime=0,this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}clear(){this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}getRemainingTimeMSOrThrow(e){let{remainingTimeMS:r}=this;if(r<=0)throw new za.MongoOperationTimeoutError(e??`Expired after ${this.timeoutMS}ms`);return r}clone(){let e=new t({timeoutMS:this.timeoutMS,serverSelectionTimeoutMS:this.serverSelectionTimeoutMS});return e.start=this.start,e}refreshed(){return new t(this)}addMaxTimeMSToCommand(e,r){if(r.omitMaxTimeMS)return;let n=this.remainingTimeMS-this.minRoundTripTime;n>0&&Number.isFinite(n)&&(e.maxTimeMS=n)}getSocketTimeoutMS(){return 0}};Pi.CSOTTimeoutContext=n0;var i0=class t extends Uf{constructor(e){super(),this.options=e,this.clearServerSelectionTimeout=!0}csotEnabled(){return!1}get serverSelectionTimeout(){return this.options.serverSelectionTimeoutMS!=null&&this.options.serverSelectionTimeoutMS>0?Ii.expires(this.options.serverSelectionTimeoutMS):null}get connectionCheckoutTimeout(){return this.options.waitQueueTimeoutMS!=null&&this.options.waitQueueTimeoutMS>0?Ii.expires(this.options.waitQueueTimeoutMS):null}get timeoutForSocketWrite(){return null}get timeoutForSocketRead(){return null}refresh(){}clear(){}get maxTimeMS(){return null}refreshed(){return new t(this.options)}addMaxTimeMSToCommand(e,r){}getSocketTimeoutMS(){return this.options.socketTimeoutMS}};Pi.LegacyTimeoutContext=i0});var nt=y(Ni=>{"use strict";f();Object.defineProperty(Ni,"__esModule",{value:!0});Ni.AbstractOperation=Ni.Aspect=void 0;Ni.defineAspects=vte;var Mte=Ye(),z6=Sr();Ni.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER"),COMMAND_BATCHING:Symbol("COMMAND_BATCHING")};var W6=Symbol("session"),H6=class{constructor(e={}){this.readPreference=this.hasAspect(Ni.Aspect.WRITE_OPERATION)?z6.ReadPreference.primary:z6.ReadPreference.fromOptions(e)??z6.ReadPreference.primary,this.bsonOptions=(0,Mte.resolveBSONOptions)(e),this[W6]=e.session!=null?e.session:void 0,this.options=e,this.bypassPinningCheck=!!e.bypassPinningCheck,this.trySecondaryWrite=!1}hasAspect(e){let r=this.constructor;return r.aspects==null?!1:r.aspects.has(e)}get session(){return this[W6]}clearSession(){this[W6]=void 0}resetBatch(){return!0}get canRetryRead(){return this.hasAspect(Ni.Aspect.RETRYABLE)&&this.hasAspect(Ni.Aspect.READ_OPERATION)}get canRetryWrite(){return this.hasAspect(Ni.Aspect.RETRYABLE)&&this.hasAspect(Ni.Aspect.WRITE_OPERATION)}};Ni.AbstractOperation=H6;function vte(t,e){return!Array.isArray(e)&&!(e instanceof Set)&&(e=[e]),e=new Set(e),Object.defineProperty(t,"aspects",{value:e,writable:!1}),e}});var Zr=y(G6=>{"use strict";f();Object.defineProperty(G6,"__esModule",{value:!0});G6.executeOperation=Pte;var Xr=re(),JD=Sr(),XD=qf(),Bte=Jr(),ZD=fe(),No=nt(),Ite=Xr.MONGODB_ERROR_CODES.IllegalOperation,eM="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";async function Pte(t,e,r){if(!(e instanceof No.AbstractOperation))throw new Xr.MongoRuntimeError("This method requires a valid operation instance");let n=await Nte(t),i=e.session,s;if(i==null)s=Symbol(),i=t.startSession({owner:s,explicit:!1});else{if(i.hasEnded)throw new Xr.MongoExpiredSessionError("Use of expired sessions is not permitted");if(i.snapshotEnabled&&!n.capabilities.supportsSnapshotReads)throw new Xr.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");if(i.client!==t)throw new Xr.MongoInvalidArgumentError("ClientSession must be from the same MongoClient")}let o=e.readPreference??JD.ReadPreference.primary,u=!!i?.inTransaction(),a=e.hasAspect(No.Aspect.READ_OPERATION);if(u&&!o.equals(JD.ReadPreference.primary)&&(a||e.commandName==="runCommand"))throw new Xr.MongoTransactionError(`Read preference in a transaction must be primary, not: ${o.mode}`);i?.isPinned&&i.transaction.isCommitted&&!e.bypassPinningCheck&&i.unpin(),r??=Bte.TimeoutContext.create({session:i,serverSelectionTimeoutMS:t.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.s.options.waitQueueTimeoutMS,timeoutMS:e.options.timeoutMS});try{return await Rte(e,{topology:n,timeoutContext:r,session:i,readPreference:o})}finally{i?.owner!=null&&i.owner===s&&await i.endSession()}}async function Nte(t){if(t.topology==null){if(t.s.hasBeenClosed)throw new Xr.MongoNotConnectedError("Client must be connected before running operations");t.s.options[Symbol.for("@@mdb.skipPingOnConnect")]=!0;try{if(await t.connect(),t.topology==null)throw new Xr.MongoRuntimeError("client.connect did not create a topology but also did not throw");return t.topology}finally{delete t.s.options[Symbol.for("@@mdb.skipPingOnConnect")]}}return t.topology}async function Rte(t,{topology:e,timeoutContext:r,session:n,readPreference:i}){let s;t.hasAspect(No.Aspect.MUST_SELECT_SAME_SERVER)?s=(0,XD.sameServerSelector)(t.server?.description):t.trySecondaryWrite?s=(0,XD.secondaryWritableServerSelector)(e.commonWireVersion,i):s=i;let o=await e.selectServer(s,{session:n,operationName:t.commandName,timeoutContext:r}),u=t.hasAspect(No.Aspect.READ_OPERATION),a=t.hasAspect(No.Aspect.WRITE_OPERATION),c=n?.inTransaction()??!1,l=e.s.options.retryReads&&!c&&t.canRetryRead,h=e.s.options.retryWrites&&!c&&(0,ZD.supportsRetryableWrites)(o)&&t.canRetryWrite,d=t.hasAspect(No.Aspect.RETRYABLE)&&n!=null&&(u&&l||a&&h);a&&h&&n!=null&&(t.options.willRetryWrite=!0,n.incrementTransactionNumber());let p=d?r.csotEnabled()?1/0:2:1,m,g;for(let _=0;_<p;_++){if(m){if(a&&m.code===Ite)throw new Xr.MongoServerError({message:eM,errmsg:eM,originalError:m});if(t.hasAspect(No.Aspect.COMMAND_BATCHING)&&!t.canRetryWrite||a&&!(0,Xr.isRetryableWriteError)(m)||u&&!(0,Xr.isRetryableReadError)(m))throw m;if(m instanceof Xr.MongoNetworkError&&t.hasAspect(No.Aspect.CURSOR_CREATING)&&n!=null&&n.isPinned&&!n.inTransaction()&&n.unpin({force:!0,forceClear:!0}),o=await e.selectServer(s,{session:n,operationName:t.commandName,previousServer:g}),a&&!(0,ZD.supportsRetryableWrites)(o))throw new Xr.MongoUnexpectedServerResponseError("Selected server does not support retryable writes")}try{return _>0&&t.hasAspect(No.Aspect.COMMAND_BATCHING)&&t.resetBatch(),await t.execute(o,n,r)}catch(w){if(!(w instanceof Xr.MongoError))throw w;if(m!=null&&w.hasErrorLabel(Xr.MongoErrorLabel.NoWritesPerformed))throw m;g=o.description,m=w,r.clear()}}throw m??new Xr.MongoRuntimeError("Tried to propagate retryability error, but no error was found.")}});var Ha=y(ke=>{"use strict";f();Object.defineProperty(ke,"__esModule",{value:!0});ke.MongoLogger=ke.MongoLoggableComponent=ke.SEVERITY_LEVEL_MAP=ke.DEFAULT_MAX_DOCUMENT_LENGTH=ke.SeverityLevel=void 0;ke.parseSeverityFromString=J6;ke.createStdioLogger=Wa;ke.stringifyWithMaxLen=Ru;ke.defaultLogTransform=rM;var tM=require("util"),xte=Ye(),Et=Xt(),ml=fe();ke.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});ke.DEFAULT_MAX_DOCUMENT_LENGTH=1e3;var Q6=class extends Map{constructor(e){let r=[];for(let[n,i]of e)r.push([i,n]);r.push(...e),super(r)}getNumericSeverityLevel(e){return this.get(e)}getSeverityLevelName(e){return this.get(e)}};ke.SEVERITY_LEVEL_MAP=new Q6([[ke.SeverityLevel.OFF,-1/0],[ke.SeverityLevel.EMERGENCY,0],[ke.SeverityLevel.ALERT,1],[ke.SeverityLevel.CRITICAL,2],[ke.SeverityLevel.ERROR,3],[ke.SeverityLevel.WARNING,4],[ke.SeverityLevel.NOTICE,5],[ke.SeverityLevel.INFORMATIONAL,6],[ke.SeverityLevel.DEBUG,7],[ke.SeverityLevel.TRACE,8]]);ke.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});function J6(t){let e=Object.values(ke.SeverityLevel),r=t?.toLowerCase();return r!=null&&e.includes(r)?r:null}function Wa(t){return{write:(0,tM.promisify)((e,r)=>{let n=(0,tM.inspect)(e,{compact:!0,breakLength:1/0});t.write(`${n}
`,"utf-8",r)})}}function Fte({MONGODB_LOG_PATH:t},{mongodbLogPath:e}){return typeof e=="string"&&/^stderr$/i.test(e)?{mongodbLogPath:Wa(process.stderr),mongodbLogPathIsStdErr:!0}:typeof e=="string"&&/^stdout$/i.test(e)?{mongodbLogPath:Wa(process.stdout),mongodbLogPathIsStdErr:!1}:typeof e=="object"&&typeof e?.write=="function"?{mongodbLogPath:e,mongodbLogPathIsStdErr:!1}:t&&/^stderr$/i.test(t)?{mongodbLogPath:Wa(process.stderr),mongodbLogPathIsStdErr:!0}:t&&/^stdout$/i.test(t)?{mongodbLogPath:Wa(process.stdout),mongodbLogPathIsStdErr:!1}:{mongodbLogPath:Wa(process.stderr),mongodbLogPathIsStdErr:!0}}function pl(t,e,r){return J6(t)??J6(e)??r}function $te(t,e){let r=ke.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(t),n=ke.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(e);return r<n?-1:r>n?1:0}function Ru(t,e,r={}){let n="";if(typeof t=="string")n=t;else if(typeof t=="function")n=t.name;else try{n=xte.EJSON.stringify(t,r)}catch(i){n=`Extended JSON serialization failed with: ${i.message}`}return e!==0&&n.length>e&&n.charCodeAt(e-1)!==n.codePointAt(e-1)&&(e--,e===0)?"":e!==0&&n.length>e?`${n.slice(0,e)}...`:n}function kte(t){let e=t;return e.toLog!==void 0&&typeof e.toLog=="function"}function s0(t,e,r=ke.DEFAULT_MAX_DOCUMENT_LENGTH){let{selector:n,operation:i,topologyDescription:s,message:o}=e;return t.selector=Ru(n,r),t.operation=i,t.topologyDescription=Ru(s,r),t.message=o,t}function K6(t,e){t.commandName=e.commandName,t.requestId=e.requestId,t.driverConnectionId=e.connectionId;let{host:r,port:n}=ml.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,e?.serviceId&&(t.serviceId=e.serviceId.toHexString()),t.databaseName=e.databaseName,t.serverConnectionId=e.serverConnectionId,t}function li(t,e){let{host:r,port:n}=ml.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,t}function Nu(t,e){return t.topologyId=e.topologyId,t}function Y6(t,e){let{awaited:r,connectionId:n}=e;t.awaited=r,t.driverConnectionId=e.connectionId;let{host:i,port:s}=ml.HostAddress.fromString(n).toHostPort();return t.serverHost=i,t.serverPort=s,t}function rM(t,e=ke.DEFAULT_MAX_DOCUMENT_LENGTH){let r=Object.create(null);switch(t.name){case Et.SERVER_SELECTION_STARTED:return r=s0(r,t,e),r;case Et.SERVER_SELECTION_FAILED:return r=s0(r,t,e),r.failure=t.failure?.message,r;case Et.SERVER_SELECTION_SUCCEEDED:return r=s0(r,t,e),r.serverHost=t.serverHost,r.serverPort=t.serverPort,r;case Et.WAITING_FOR_SUITABLE_SERVER:return r=s0(r,t,e),r.remainingTimeMS=t.remainingTimeMS,r;case Et.COMMAND_STARTED:return r=K6(r,t),r.message="Command started",r.command=Ru(t.command,e,{relaxed:!0}),r.databaseName=t.databaseName,r;case Et.COMMAND_SUCCEEDED:return r=K6(r,t),r.message="Command succeeded",r.durationMS=t.duration,r.reply=Ru(t.reply,e,{relaxed:!0}),r;case Et.COMMAND_FAILED:return r=K6(r,t),r.message="Command failed",r.durationMS=t.duration,r.failure=t.failure?.message??"(redacted)",r;case Et.CONNECTION_POOL_CREATED:if(r=li(r,t),r.message="Connection pool created",t.options){let{maxIdleTimeMS:n,minPoolSize:i,maxPoolSize:s,maxConnecting:o,waitQueueTimeoutMS:u}=t.options;r={...r,maxIdleTimeMS:n,minPoolSize:i,maxPoolSize:s,maxConnecting:o,waitQueueTimeoutMS:u}}return r;case Et.CONNECTION_POOL_READY:return r=li(r,t),r.message="Connection pool ready",r;case Et.CONNECTION_POOL_CLEARED:return r=li(r,t),r.message="Connection pool cleared",t.serviceId?._bsontype==="ObjectId"&&(r.serviceId=t.serviceId?.toHexString()),r;case Et.CONNECTION_POOL_CLOSED:return r=li(r,t),r.message="Connection pool closed",r;case Et.CONNECTION_CREATED:return r=li(r,t),r.message="Connection created",r.driverConnectionId=t.connectionId,r;case Et.CONNECTION_READY:return r=li(r,t),r.message="Connection ready",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case Et.CONNECTION_CLOSED:switch(r=li(r,t),r.message="Connection closed",r.driverConnectionId=t.connectionId,t.reason){case"stale":r.reason="Connection became stale because the pool was cleared";break;case"idle":r.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":r.reason="An error occurred while using the connection",t.error&&(r.error=t.error);break;case"poolClosed":r.reason="Connection pool was closed";break;default:r.reason=`Unknown close reason: ${t.reason}`}return r;case Et.CONNECTION_CHECK_OUT_STARTED:return r=li(r,t),r.message="Connection checkout started",r;case Et.CONNECTION_CHECK_OUT_FAILED:switch(r=li(r,t),r.message="Connection checkout failed",t.reason){case"poolClosed":r.reason="Connection pool was closed";break;case"timeout":r.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":r.reason="An error occurred while trying to establish a new connection",t.error&&(r.error=t.error);break;default:r.reason=`Unknown close reason: ${t.reason}`}return r.durationMS=t.durationMS,r;case Et.CONNECTION_CHECKED_OUT:return r=li(r,t),r.message="Connection checked out",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case Et.CONNECTION_CHECKED_IN:return r=li(r,t),r.message="Connection checked in",r.driverConnectionId=t.connectionId,r;case Et.SERVER_OPENING:return r=Nu(r,t),r=li(r,t),r.message="Starting server monitoring",r;case Et.SERVER_CLOSED:return r=Nu(r,t),r=li(r,t),r.message="Stopped server monitoring",r;case Et.SERVER_HEARTBEAT_STARTED:return r=Nu(r,t),r=Y6(r,t),r.message="Server heartbeat started",r;case Et.SERVER_HEARTBEAT_SUCCEEDED:return r=Nu(r,t),r=Y6(r,t),r.message="Server heartbeat succeeded",r.durationMS=t.duration,r.serverConnectionId=t.serverConnectionId,r.reply=Ru(t.reply,e,{relaxed:!0}),r;case Et.SERVER_HEARTBEAT_FAILED:return r=Nu(r,t),r=Y6(r,t),r.message="Server heartbeat failed",r.durationMS=t.duration,r.failure=t.failure?.message,r;case Et.TOPOLOGY_OPENING:return r=Nu(r,t),r.message="Starting topology monitoring",r;case Et.TOPOLOGY_CLOSED:return r=Nu(r,t),r.message="Stopped topology monitoring",r;case Et.TOPOLOGY_DESCRIPTION_CHANGED:return r=Nu(r,t),r.message="Topology description changed",r.previousDescription=r.reply=Ru(t.previousDescription,e),r.newDescription=r.reply=Ru(t.newDescription,e),r;default:for(let[n,i]of Object.entries(t))i!=null&&(r[n]=i)}return r}var X6=class{constructor(e){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=e.componentSeverities,this.maxDocumentLength=e.maxDocumentLength,this.logDestination=e.logDestination,this.logDestinationIsStdErr=e.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){let e=Object();for(let r of Object.values(ke.MongoLoggableComponent)){e[r]={};for(let n of Object.values(ke.SeverityLevel))e[r][n]=$te(n,this.componentSeverities[r])<=0}return e}turnOffSeverities(){for(let e of Object.values(ke.MongoLoggableComponent)){this.componentSeverities[e]=ke.SeverityLevel.OFF;for(let r of Object.values(ke.SeverityLevel))this.severities[e][r]=!1}}logWriteFailureHandler(e){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=Wa(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(ke.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:e.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog(e,r){return r===ke.SeverityLevel.OFF?!1:this.severities[e][r]}log(e,r,n){if(!this.willLog(r,e))return;let i={t:new Date,c:r,s:e};if(typeof n=="string"?i.message=n:typeof n=="object"&&(kte(n)?i={...i,...n.toLog()}:i={...i,...rM(n,this.maxDocumentLength)}),(0,ml.isPromiseLike)(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write(i)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{let s=this.logDestination.write(i);(0,ml.isPromiseLike)(s)&&(this.pendingLog=s.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this)))}catch(s){this.logWriteFailureHandler(s)}}static resolveOptions(e,r){let n=Fte(e,r),i={...e,...r,mongodbLogPath:n.mongodbLogPath,mongodbLogPathIsStdErr:n.mongodbLogPathIsStdErr},s=pl(i.mongodbLogComponentSeverities?.default,i.MONGODB_LOG_ALL,ke.SeverityLevel.OFF);return{componentSeverities:{command:pl(i.mongodbLogComponentSeverities?.command,i.MONGODB_LOG_COMMAND,s),topology:pl(i.mongodbLogComponentSeverities?.topology,i.MONGODB_LOG_TOPOLOGY,s),serverSelection:pl(i.mongodbLogComponentSeverities?.serverSelection,i.MONGODB_LOG_SERVER_SELECTION,s),connection:pl(i.mongodbLogComponentSeverities?.connection,i.MONGODB_LOG_CONNECTION,s),client:pl(i.mongodbLogComponentSeverities?.client,i.MONGODB_LOG_CLIENT,s),default:s},maxDocumentLength:i.mongodbLogMaxDocumentLength??(0,ml.parseUnsignedInteger)(i.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1e3,logDestination:i.mongodbLogPath,logDestinationIsStdErr:i.mongodbLogPathIsStdErr}}};ke.MongoLogger=X6});var fi=y(yl=>{"use strict";f();Object.defineProperty(yl,"__esModule",{value:!0});yl.CancellationToken=yl.TypedEventEmitter=void 0;var qte=require("events"),Lte=Ha(),o0=class extends qte.EventEmitter{emitAndLog(e,...r){this.emit(e,...r),this.component&&this.mongoLogger?.debug(this.component,r[0])}emitAndLogHeartbeat(e,r,n,...i){if(this.emit(e,...i),this.component){let s={topologyId:r,serverConnectionId:n??null,...i[0]};this.mongoLogger?.debug(this.component,s)}}emitAndLogCommand(e,r,n,i,...s){if(e&&this.emit(r,...s),i){let o={databaseName:n,...s[0]};this.mongoLogger?.debug(Lte.MongoLoggableComponent.COMMAND,o)}}};yl.TypedEventEmitter=o0;var Z6=class extends o0{};yl.CancellationToken=Z6});var tA=y(c0=>{"use strict";f();Object.defineProperty(c0,"__esModule",{value:!0});c0.GetMoreOperation=void 0;var jte=gs(),eA=re(),Ute=fe(),u0=nt(),a0=class extends u0.AbstractOperation{constructor(e,r,n,i){super(i),this.options=i,this.ns=e,this.cursorId=r,this.server=n}get commandName(){return"getMore"}async execute(e,r,n){if(e!==this.server)throw new eA.MongoRuntimeError("Getmore must run on the same server operation began on");if(this.cursorId==null||this.cursorId.isZero())throw new eA.MongoRuntimeError("Unable to iterate cursor with no id");let i=this.ns.collection;if(i==null)throw new eA.MongoRuntimeError("A collection name must be determined before getMore");let s={getMore:this.cursorId,collection:i};typeof this.options.batchSize=="number"&&(s.batchSize=Math.abs(this.options.batchSize)),typeof this.options.maxAwaitTimeMS=="number"&&(s.maxTimeMS=this.options.maxAwaitTimeMS),this.options.comment!==void 0&&(0,Ute.maxWireVersion)(e)>=9&&(s.comment=this.options.comment);let o={returnFieldSelector:null,documentsReturnedIn:"nextBatch",timeoutContext:n,...this.options};return await e.command(this.ns,s,o,jte.CursorResponse)}};c0.GetMoreOperation=a0;(0,u0.defineAspects)(a0,[u0.Aspect.READ_OPERATION,u0.Aspect.MUST_SELECT_SAME_SERVER])});var iM=y(f0=>{"use strict";f();Object.defineProperty(f0,"__esModule",{value:!0});f0.KillCursorsOperation=void 0;var nM=re(),Vte=fe(),rA=nt(),l0=class extends rA.AbstractOperation{constructor(e,r,n,i){super(i),this.ns=r,this.cursorId=e,this.server=n}get commandName(){return"killCursors"}async execute(e,r,n){if(e!==this.server)throw new nM.MongoRuntimeError("Killcursor must run on the same server operation began on");let i=this.ns.collection;if(i==null)throw new nM.MongoRuntimeError("A collection name must be determined before killCursors");let s={killCursors:i,cursors:[this.cursorId]};try{await e.command(this.ns,s,{session:r,timeoutContext:n})}catch(o){(0,Vte.squashError)(o)}}};f0.KillCursorsOperation=l0;(0,rA.defineAspects)(l0,[rA.Aspect.MUST_SELECT_SAME_SERVER])});var iA=y(Ro=>{"use strict";f();Object.defineProperty(Ro,"__esModule",{value:!0});Ro.DeleteManyOperation=Ro.DeleteOneOperation=Ro.DeleteOperation=void 0;Ro.makeDeleteStatement=nA;var Vf=re(),zte=Lt(),Ri=nt(),gl=class extends zte.CommandOperation{constructor(e,r,n){super(void 0,n),this.options=n,this.ns=e,this.statements=r}get commandName(){return"delete"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.limit!=null?e.limit>0:!0)}async execute(e,r,n){let i=this.options??{},s=typeof i.ordered=="boolean"?i.ordered:!0,o={delete:this.ns.collection,deletes:this.statements,ordered:s};if(i.let&&(o.let=i.let),i.comment!==void 0&&(o.comment=i.comment),this.writeConcern&&this.writeConcern.w===0&&this.statements.find(c=>c.hint))throw new Vf.MongoCompatibilityError("hint is not supported with unacknowledged writes");return await super.executeCommand(e,r,o,n)}};Ro.DeleteOperation=gl;var h0=class extends gl{constructor(e,r,n){super(e.s.namespace,[nA(r,{...n,limit:1})],n)}async execute(e,r,n){let i=await super.execute(e,r,n);if(this.explain)return i;if(i.code)throw new Vf.MongoServerError(i);if(i.writeErrors)throw new Vf.MongoServerError(i.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:i.n}}};Ro.DeleteOneOperation=h0;var d0=class extends gl{constructor(e,r,n){super(e.s.namespace,[nA(r,n)],n)}async execute(e,r,n){let i=await super.execute(e,r,n);if(this.explain)return i;if(i.code)throw new Vf.MongoServerError(i);if(i.writeErrors)throw new Vf.MongoServerError(i.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:i.n}}};Ro.DeleteManyOperation=d0;function nA(t,e){let r={q:t,limit:typeof e.limit=="number"?e.limit:0};return e.collation&&(r.collation=e.collation),e.hint&&(r.hint=e.hint),r}(0,Ri.defineAspects)(gl,[Ri.Aspect.RETRYABLE,Ri.Aspect.WRITE_OPERATION]);(0,Ri.defineAspects)(h0,[Ri.Aspect.RETRYABLE,Ri.Aspect.WRITE_OPERATION,Ri.Aspect.EXPLAINABLE,Ri.Aspect.SKIP_COLLATION]);(0,Ri.defineAspects)(d0,[Ri.Aspect.WRITE_OPERATION,Ri.Aspect.EXPLAINABLE,Ri.Aspect.SKIP_COLLATION])});var oA=y(m0=>{"use strict";f();Object.defineProperty(m0,"__esModule",{value:!0});m0.BulkWriteOperation=void 0;var sA=nt(),p0=class extends sA.AbstractOperation{constructor(e,r,n){super(n),this.options=n,this.collection=e,this.operations=r}get commandName(){return"bulkWrite"}async execute(e,r,n){let i=this.collection,s=this.operations,o={...this.options,...this.bsonOptions,readPreference:this.readPreference,timeoutContext:n},u=o.ordered===!1?i.initializeUnorderedBulkOp(o):i.initializeOrderedBulkOp(o);for(let a=0;a<s.length;a++)u.raw(s[a]);return await u.execute({...o,session:r})}};m0.BulkWriteOperation=p0;(0,sA.defineAspects)(p0,[sA.Aspect.WRITE_OPERATION])});var uA=y(xu=>{"use strict";f();Object.defineProperty(xu,"__esModule",{value:!0});xu.InsertManyOperation=xu.InsertOneOperation=xu.InsertOperation=void 0;var y0=re(),Wte=fe(),Hte=Qr(),Gte=oA(),Kte=Lt(),xo=nt(),zf=class extends Kte.CommandOperation{constructor(e,r,n){super(void 0,n),this.options={...n,checkKeys:n.checkKeys??!1},this.ns=e,this.documents=r}get commandName(){return"insert"}async execute(e,r,n){let i=this.options??{},s=typeof i.ordered=="boolean"?i.ordered:!0,o={insert:this.ns.collection,documents:this.documents,ordered:s};return typeof i.bypassDocumentValidation=="boolean"&&(o.bypassDocumentValidation=i.bypassDocumentValidation),i.comment!==void 0&&(o.comment=i.comment),await super.executeCommand(e,r,o,n)}};xu.InsertOperation=zf;var g0=class extends zf{constructor(e,r,n){super(e.s.namespace,(0,Wte.maybeAddIdToDocuments)(e,[r],n),n)}async execute(e,r,n){let i=await super.execute(e,r,n);if(i.code)throw new y0.MongoServerError(i);if(i.writeErrors)throw new y0.MongoServerError(i.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}};xu.InsertOneOperation=g0;var _0=class extends xo.AbstractOperation{constructor(e,r,n){if(super(n),!Array.isArray(r))throw new y0.MongoInvalidArgumentError('Argument "docs" must be an array of documents');this.options=n,this.collection=e,this.docs=r}get commandName(){return"insert"}async execute(e,r,n){let i=this.collection,s={...this.options,...this.bsonOptions,readPreference:this.readPreference},o=Hte.WriteConcern.fromOptions(s),u=new Gte.BulkWriteOperation(i,this.docs.map(a=>({insertOne:{document:a}})),s);try{let a=await u.execute(e,r,n);return{acknowledged:o?.w!==0,insertedCount:a.insertedCount,insertedIds:a.insertedIds}}catch(a){throw a&&a.message==="Operation must be an object with an operation key"?new y0.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values"):a}}};xu.InsertManyOperation=_0;(0,xo.defineAspects)(zf,[xo.Aspect.RETRYABLE,xo.Aspect.WRITE_OPERATION]);(0,xo.defineAspects)(g0,[xo.Aspect.RETRYABLE,xo.Aspect.WRITE_OPERATION]);(0,xo.defineAspects)(_0,[xo.Aspect.WRITE_OPERATION])});var cA=y(_s=>{"use strict";f();Object.defineProperty(_s,"__esModule",{value:!0});_s.ReplaceOneOperation=_s.UpdateManyOperation=_s.UpdateOneOperation=_s.UpdateOperation=void 0;_s.makeUpdateStatement=S0;var xi=re(),aA=fe(),Yte=Lt(),Pr=nt(),Ga=class extends Yte.CommandOperation{constructor(e,r,n){super(void 0,n),this.options=n,this.ns=e,this.statements=r}get commandName(){return"update"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.multi==null||e.multi===!1)}async execute(e,r,n){let i=this.options??{},s=typeof i.ordered=="boolean"?i.ordered:!0,o={update:this.ns.collection,updates:this.statements,ordered:s};if(typeof i.bypassDocumentValidation=="boolean"&&(o.bypassDocumentValidation=i.bypassDocumentValidation),i.let&&(o.let=i.let),i.comment!==void 0&&(o.comment=i.comment),this.writeConcern&&this.writeConcern.w===0&&this.statements.find(c=>c.hint))throw new xi.MongoCompatibilityError("hint is not supported with unacknowledged writes");return await super.executeCommand(e,r,o,n)}};_s.UpdateOperation=Ga;var E0=class extends Ga{constructor(e,r,n,i){if(super(e.s.namespace,[S0(r,n,{...i,multi:!1})],i),!(0,aA.hasAtomicOperators)(n))throw new xi.MongoInvalidArgumentError("Update document requires atomic operators")}async execute(e,r,n){let i=await super.execute(e,r,n);if(this.explain!=null)return i;if(i.code)throw new xi.MongoServerError(i);if(i.writeErrors)throw new xi.MongoServerError(i.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:i.nModified??i.n,upsertedId:Array.isArray(i.upserted)&&i.upserted.length>0?i.upserted[0]._id:null,upsertedCount:Array.isArray(i.upserted)&&i.upserted.length?i.upserted.length:0,matchedCount:Array.isArray(i.upserted)&&i.upserted.length>0?0:i.n}}};_s.UpdateOneOperation=E0;var A0=class extends Ga{constructor(e,r,n,i){if(super(e.s.namespace,[S0(r,n,{...i,multi:!0})],i),!(0,aA.hasAtomicOperators)(n))throw new xi.MongoInvalidArgumentError("Update document requires atomic operators")}async execute(e,r,n){let i=await super.execute(e,r,n);if(this.explain!=null)return i;if(i.code)throw new xi.MongoServerError(i);if(i.writeErrors)throw new xi.MongoServerError(i.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:i.nModified??i.n,upsertedId:Array.isArray(i.upserted)&&i.upserted.length>0?i.upserted[0]._id:null,upsertedCount:Array.isArray(i.upserted)&&i.upserted.length?i.upserted.length:0,matchedCount:Array.isArray(i.upserted)&&i.upserted.length>0?0:i.n}}};_s.UpdateManyOperation=A0;var w0=class extends Ga{constructor(e,r,n,i){if(super(e.s.namespace,[S0(r,n,{...i,multi:!1})],i),(0,aA.hasAtomicOperators)(n))throw new xi.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}async execute(e,r,n){let i=await super.execute(e,r,n);if(this.explain!=null)return i;if(i.code)throw new xi.MongoServerError(i);if(i.writeErrors)throw new xi.MongoServerError(i.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:i.nModified??i.n,upsertedId:Array.isArray(i.upserted)&&i.upserted.length>0?i.upserted[0]._id:null,upsertedCount:Array.isArray(i.upserted)&&i.upserted.length?i.upserted.length:0,matchedCount:Array.isArray(i.upserted)&&i.upserted.length>0?0:i.n}}};_s.ReplaceOneOperation=w0;function S0(t,e,r){if(t==null||typeof t!="object")throw new xi.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(e==null||typeof e!="object")throw new xi.MongoInvalidArgumentError("Document must be a valid JavaScript object");let n={q:t,u:e};return typeof r.upsert=="boolean"&&(n.upsert=r.upsert),r.multi&&(n.multi=r.multi),r.hint&&(n.hint=r.hint),r.arrayFilters&&(n.arrayFilters=r.arrayFilters),r.collation&&(n.collation=r.collation),n}(0,Pr.defineAspects)(Ga,[Pr.Aspect.RETRYABLE,Pr.Aspect.WRITE_OPERATION,Pr.Aspect.SKIP_COLLATION]);(0,Pr.defineAspects)(E0,[Pr.Aspect.RETRYABLE,Pr.Aspect.WRITE_OPERATION,Pr.Aspect.EXPLAINABLE,Pr.Aspect.SKIP_COLLATION]);(0,Pr.defineAspects)(A0,[Pr.Aspect.WRITE_OPERATION,Pr.Aspect.EXPLAINABLE,Pr.Aspect.SKIP_COLLATION]);(0,Pr.defineAspects)(w0,[Pr.Aspect.RETRYABLE,Pr.Aspect.WRITE_OPERATION,Pr.Aspect.SKIP_COLLATION])});var Yf=y(We=>{"use strict";f();Object.defineProperty(We,"__esModule",{value:!0});We.BulkOperationBase=We.BulkWriteShimOperation=We.FindOperators=We.MongoBulkWriteError=We.WriteError=We.WriteConcernError=We.BulkWriteResult=We.Batch=We.BatchType=void 0;We.mergeBatchResults=fA;var oM=Ye(),hr=re(),Gf=iA(),uM=Zr(),Qte=uA(),Jte=nt(),Ka=cA(),Ys=fe(),sM=Qr(),Wf=Symbol("serverError");We.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});var lA=class{constructor(e,r){this.originalZeroIndex=r,this.currentIndex=0,this.originalIndexes=[],this.batchType=e,this.operations=[],this.size=0,this.sizeBytes=0}};We.Batch=lA;var Fu=class t{static generateIdMap(e){let r={};for(let n of e)r[n.index]=n._id;return r}constructor(e,r){this.result=e,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=t.generateIdMap(this.result.upserted),this.insertedIds=t.generateIdMap(this.getSuccessfullyInsertedIds(e,r)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(e,r){return e.writeErrors.length===0?e.insertedIds:r?e.insertedIds.slice(0,e.writeErrors[0].index):e.insertedIds.filter(({index:n})=>!e.writeErrors.some(i=>n===i.index))}getUpsertedIdAt(e){return this.result.upserted[e]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(e){return e<this.result.writeErrors.length?this.result.writeErrors[e]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length!==0){if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];{let e="";for(let r=0;r<this.result.writeConcernErrors.length;r++){let n=this.result.writeConcernErrors[r];e=e+n.errmsg,r===0&&(e=e+" and ")}return new _l({errmsg:e,code:hr.MONGODB_ERROR_CODES.WriteConcernFailed})}}}toString(){return`BulkWriteResult(${oM.EJSON.stringify(this.result)})`}isOk(){return this.result.ok===1}};We.BulkWriteResult=Fu;var _l=class{constructor(e){this[Wf]=e}get code(){return this[Wf].code}get errmsg(){return this[Wf].errmsg}get errInfo(){return this[Wf].errInfo}toJSON(){return this[Wf]}toString(){return`WriteConcernError(${this.errmsg})`}};We.WriteConcernError=_l;var Kf=class{constructor(e){this.err=e}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}};We.WriteError=Kf;function fA(t,e,r,n){if(r?n=r:n&&n.result&&(n=n.result),n==null)return;if(n.ok===0&&e.ok===1){e.ok=0;let s={index:0,code:n.code||0,errmsg:n.message,errInfo:n.errInfo,op:t.operations[0]};e.writeErrors.push(new Kf(s));return}else if(n.ok===0&&e.ok===0)return;aM(t)&&n.n&&(e.nInserted=e.nInserted+n.n),pA(t)&&n.n&&(e.nRemoved=e.nRemoved+n.n);let i=0;if(Array.isArray(n.upserted)){i=n.upserted.length;for(let s=0;s<n.upserted.length;s++)e.upserted.push({index:n.upserted[s].index+t.originalZeroIndex,_id:n.upserted[s]._id})}else n.upserted&&(i=1,e.upserted.push({index:t.originalZeroIndex,_id:n.upserted}));if(dA(t)&&n.n){let s=n.nModified;e.nUpserted=e.nUpserted+i,e.nMatched=e.nMatched+(n.n-i),typeof s=="number"?e.nModified=e.nModified+s:e.nModified=0}if(Array.isArray(n.writeErrors))for(let s=0;s<n.writeErrors.length;s++){let o={index:t.originalIndexes[n.writeErrors[s].index],code:n.writeErrors[s].code,errmsg:n.writeErrors[s].errmsg,errInfo:n.writeErrors[s].errInfo,op:t.operations[n.writeErrors[s].index]};e.writeErrors.push(new Kf(o))}n.writeConcernError&&e.writeConcernErrors.push(new _l(n.writeConcernError))}async function Xte(t,e){if(t.s.batches.length===0)return new Fu(t.s.bulkResult,t.isOrdered);for(let n of t.s.batches){let i=(0,Ys.resolveOptions)(t,{...e,ordered:t.isOrdered});i.bypassDocumentValidation!==!0&&delete i.bypassDocumentValidation,t.s.bypassDocumentValidation===!0&&(i.bypassDocumentValidation=!0),t.s.checkKeys===!1&&(i.checkKeys=!1),i.retryWrites&&(dA(n)&&(i.retryWrites=i.retryWrites&&!n.operations.some(c=>c.multi)),pA(n)&&(i.retryWrites=i.retryWrites&&!n.operations.some(c=>c.limit===0)));let s=aM(n)?new Qte.InsertOperation(t.s.namespace,n.operations,i):dA(n)?new Ka.UpdateOperation(t.s.namespace,n.operations,i):pA(n)?new Gf.DeleteOperation(t.s.namespace,n.operations,i):null;if(s==null)throw new hr.MongoRuntimeError(`Unknown batchType: ${n.batchType}`);let o=null,u;try{u=await(0,uM.executeOperation)(t.s.collection.client,s,i.timeoutContext)}catch(c){o=c}if(o!=null)if(o instanceof hr.MongoWriteConcernError){fA(n,t.s.bulkResult,o,u);let c=new Fu(t.s.bulkResult,t.isOrdered);throw new Ya({message:o.result.writeConcernError.errmsg,code:o.result.writeConcernError.code},c)}else throw new Ya(o,new Fu(t.s.bulkResult,t.isOrdered));fA(n,t.s.bulkResult,o,u);let a=new Fu(t.s.bulkResult,t.isOrdered);t.handleWriteError(a)}t.s.batches.length=0;let r=new Fu(t.s.bulkResult,t.isOrdered);return t.handleWriteError(r),r}var Ya=class extends hr.MongoServerError{constructor(e,r){super(e),this.writeErrors=[],e instanceof _l?this.err=e:e instanceof Error||(this.message=e.message,this.code=e.code,this.writeErrors=e.writeErrors??[]),this.result=r,Object.assign(this,e)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}};We.MongoBulkWriteError=Ya;var b0=class{constructor(e){this.bulkOperation=e}update(e){let r=Hf(this.bulkOperation);return this.bulkOperation.addToOperationsList(We.BatchType.UPDATE,(0,Ka.makeUpdateStatement)(r.selector,e,{...r,multi:!0}))}updateOne(e){if(!(0,Ys.hasAtomicOperators)(e))throw new hr.MongoInvalidArgumentError("Update document requires atomic operators");let r=Hf(this.bulkOperation);return this.bulkOperation.addToOperationsList(We.BatchType.UPDATE,(0,Ka.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}replaceOne(e){if((0,Ys.hasAtomicOperators)(e))throw new hr.MongoInvalidArgumentError("Replacement document must not use atomic operators");let r=Hf(this.bulkOperation);return this.bulkOperation.addToOperationsList(We.BatchType.UPDATE,(0,Ka.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}deleteOne(){let e=Hf(this.bulkOperation);return this.bulkOperation.addToOperationsList(We.BatchType.DELETE,(0,Gf.makeDeleteStatement)(e.selector,{...e,limit:1}))}delete(){let e=Hf(this.bulkOperation);return this.bulkOperation.addToOperationsList(We.BatchType.DELETE,(0,Gf.makeDeleteStatement)(e.selector,{...e,limit:0}))}upsert(){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.upsert=!0,this}collation(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.collation=e,this}arrayFilters(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.arrayFilters=e,this}hint(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.hint=e,this}};We.FindOperators=b0;var O0=class extends Jte.AbstractOperation{constructor(e,r){super(r),this.bulkOperation=e}get commandName(){return"bulkWrite"}async execute(e,r,n){return this.options.session==null&&(this.options.session=r),await Xte(this.bulkOperation,{...this.options,timeoutContext:n})}};We.BulkWriteShimOperation=O0;var hA=class{constructor(e,r,n){this.collection=e,this.isOrdered=n;let i=(0,Ys.getTopology)(e);r=r??{};let s=e.s.namespace,o=!1,u=void 0,a=i.lastHello(),c=!!(i.s.options&&i.s.options.autoEncrypter),l=a&&a.maxBsonObjectSize?a.maxBsonObjectSize:1024*1024*16,h=c?1024*1024*2:l,d=a&&a.maxWriteBatchSize?a.maxWriteBatchSize:1e3,p=(d-1).toString(10).length+2,m=Object.assign({},r);m=(0,Ys.applyRetryableWrites)(m,e.s.db);let g={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};this.s={bulkResult:g,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:sM.WriteConcern.fromOptions(r),maxBsonObjectSize:l,maxBatchSizeBytes:h,maxWriteBatchSize:d,maxKeySize:p,namespace:s,topology:i,options:m,bsonOptions:(0,oM.resolveBSONOptions)(r),currentOp:u,executed:o,collection:e,err:void 0,checkKeys:typeof r.checkKeys=="boolean"?r.checkKeys:!1},r.bypassDocumentValidation===!0&&(this.s.bypassDocumentValidation=!0)}insert(e){return(0,Ys.maybeAddIdToDocuments)(this.collection,e,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList(We.BatchType.INSERT,e)}find(e){if(!e)throw new hr.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:e},new b0(this)}raw(e){if(e==null||typeof e!="object")throw new hr.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in e){let r=this.shouldForceServerObjectId(),n=e.insertOne&&e.insertOne.document==null?e.insertOne:e.insertOne.document;return(0,Ys.maybeAddIdToDocuments)(this.collection,n,{forceServerObjectId:r}),this.addToOperationsList(We.BatchType.INSERT,n)}if("replaceOne"in e||"updateOne"in e||"updateMany"in e){if("replaceOne"in e){if("q"in e.replaceOne)throw new hr.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,Ka.makeUpdateStatement)(e.replaceOne.filter,e.replaceOne.replacement,{...e.replaceOne,multi:!1});if((0,Ys.hasAtomicOperators)(r.u))throw new hr.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList(We.BatchType.UPDATE,r)}if("updateOne"in e){if("q"in e.updateOne)throw new hr.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,Ka.makeUpdateStatement)(e.updateOne.filter,e.updateOne.update,{...e.updateOne,multi:!1});if(!(0,Ys.hasAtomicOperators)(r.u))throw new hr.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(We.BatchType.UPDATE,r)}if("updateMany"in e){if("q"in e.updateMany)throw new hr.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,Ka.makeUpdateStatement)(e.updateMany.filter,e.updateMany.update,{...e.updateMany,multi:!0});if(!(0,Ys.hasAtomicOperators)(r.u))throw new hr.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(We.BatchType.UPDATE,r)}}if("deleteOne"in e){if("q"in e.deleteOne)throw new hr.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(We.BatchType.DELETE,(0,Gf.makeDeleteStatement)(e.deleteOne.filter,{...e.deleteOne,limit:1}))}if("deleteMany"in e){if("q"in e.deleteMany)throw new hr.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(We.BatchType.DELETE,(0,Gf.makeDeleteStatement)(e.deleteMany.filter,{...e.deleteMany,limit:0}))}throw new hr.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get length(){return this.s.currentIndex}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){let e=[...this.s.batches];return this.isOrdered?this.s.currentBatch&&e.push(this.s.currentBatch):(this.s.currentInsertBatch&&e.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&e.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&e.push(this.s.currentRemoveBatch)),e}async execute(e={}){if(this.s.executed)throw new hr.MongoBatchReExecutionError;let r=sM.WriteConcern.fromOptions(e);if(r&&(this.s.writeConcern=r),this.isOrdered?this.s.currentBatch&&this.s.batches.push(this.s.currentBatch):(this.s.currentInsertBatch&&this.s.batches.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&this.s.batches.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&this.s.batches.push(this.s.currentRemoveBatch)),this.s.batches.length===0)throw new hr.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;let n={...this.s.options,...e},i=new O0(this,n);return await(0,uM.executeOperation)(this.s.collection.client,i,n.timeoutContext)}handleWriteError(e){if(this.s.bulkResult.writeErrors.length>0){let n=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";throw new Ya({message:n,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},e)}let r=e.getWriteConcernError();if(r)throw new Ya(r,e)}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.s.db.options?.forceServerObjectId===!0}};We.BulkOperationBase=hA;function aM(t){return t.batchType===We.BatchType.INSERT}function dA(t){return t.batchType===We.BatchType.UPDATE}function pA(t){return t.batchType===We.BatchType.DELETE}function Hf(t){let{currentOp:e}=t.s;return t.s.currentOp=void 0,e||(e={}),e}});var yA=y(T0=>{"use strict";f();Object.defineProperty(T0,"__esModule",{value:!0});T0.OrderedBulkOperation=void 0;var Zte=Ye(),cM=re(),C0=Yf(),mA=class extends C0.BulkOperationBase{constructor(e,r){super(e,r,!0)}addToOperationsList(e,r){let n=Zte.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new cM.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch==null&&(this.s.currentBatch=new C0.Batch(e,this.s.currentIndex));let i=this.s.maxKeySize;if((this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+i+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new C0.Batch(e,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0),e===C0.BatchType.INSERT&&this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:r._id}),Array.isArray(r))throw new cM.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(r),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=i+n,this.s.currentIndex+=1,this}};T0.OrderedBulkOperation=mA});var _A=y(D0=>{"use strict";f();Object.defineProperty(D0,"__esModule",{value:!0});D0.UnorderedBulkOperation=void 0;var ere=Ye(),lM=re(),Fo=Yf(),gA=class extends Fo.BulkOperationBase{constructor(e,r){super(e,r,!1)}handleWriteError(e){if(!this.s.batches.length)return super.handleWriteError(e)}addToOperationsList(e,r){let n=ere.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new lM.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch=void 0,e===Fo.BatchType.INSERT?this.s.currentBatch=this.s.currentInsertBatch:e===Fo.BatchType.UPDATE?this.s.currentBatch=this.s.currentUpdateBatch:e===Fo.BatchType.DELETE&&(this.s.currentBatch=this.s.currentRemoveBatch);let i=this.s.maxKeySize;if(this.s.currentBatch==null&&(this.s.currentBatch=new Fo.Batch(e,this.s.currentIndex)),(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+i+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new Fo.Batch(e,this.s.currentIndex)),Array.isArray(r))throw new lM.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.operations.push(r),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,e===Fo.BatchType.INSERT?(this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:r._id})):e===Fo.BatchType.UPDATE?this.s.currentUpdateBatch=this.s.currentBatch:e===Fo.BatchType.DELETE&&(this.s.currentRemoveBatch=this.s.currentBatch),this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=i+n,this}};D0.UnorderedBulkOperation=gA});var EA=y(Qa=>{"use strict";f();Object.defineProperty(Qa,"__esModule",{value:!0});Qa.AggregateOperation=Qa.DB_AGGREGATE_COLLECTION=void 0;var fM=gs(),hM=re(),tre=fe(),rre=Qr(),nre=Lt(),Qf=nt();Qa.DB_AGGREGATE_COLLECTION=1;var ire=8,M0=class extends nre.CommandOperation{constructor(e,r,n){if(super(void 0,{...n,dbName:e.db}),this.options={...n},this.target=e.collection||Qa.DB_AGGREGATE_COLLECTION,this.pipeline=r,this.hasWriteStage=!1,typeof n?.out=="string")this.pipeline=this.pipeline.concat({$out:n.out}),this.hasWriteStage=!0;else if(r.length>0){let i=r[r.length-1];(i.$out||i.$merge)&&(this.hasWriteStage=!0)}if(this.hasWriteStage?this.trySecondaryWrite=!0:delete this.options.writeConcern,this.explain&&this.writeConcern)throw new hM.MongoInvalidArgumentError('Option "explain" cannot be used on an aggregate call with writeConcern');if(n?.cursor!=null&&typeof n.cursor!="object")throw new hM.MongoInvalidArgumentError("Cursor options must be an object")}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline(e){this.pipeline.push(e)}async execute(e,r,n){let i=this.options,s=(0,tre.maxWireVersion)(e),o={aggregate:this.target,pipeline:this.pipeline};return this.hasWriteStage&&s<ire&&(this.readConcern=void 0),this.hasWriteStage&&this.writeConcern&&rre.WriteConcern.apply(o,this.writeConcern),i.bypassDocumentValidation===!0&&(o.bypassDocumentValidation=i.bypassDocumentValidation),typeof i.allowDiskUse=="boolean"&&(o.allowDiskUse=i.allowDiskUse),i.hint&&(o.hint=i.hint),i.let&&(o.let=i.let),i.comment!==void 0&&(o.comment=i.comment),o.cursor=i.cursor||{},i.batchSize&&!this.hasWriteStage&&(o.cursor.batchSize=i.batchSize),await super.executeCommand(e,r,o,n,this.explain?fM.ExplainedCursorResponse:fM.CursorResponse)}};Qa.AggregateOperation=M0;(0,Qf.defineAspects)(M0,[Qf.Aspect.READ_OPERATION,Qf.Aspect.RETRYABLE,Qf.Aspect.EXPLAINABLE,Qf.Aspect.CURSOR_CREATING])});var Jf=y(v0=>{"use strict";f();Object.defineProperty(v0,"__esModule",{value:!0});v0.AggregationCursor=void 0;var AA=re(),wA=Ja(),dM=EA(),pM=Zr(),sre=fe(),mM=en(),SA=class t extends wA.ExplainableCursor{constructor(e,r,n=[],i={}){super(e,r,i),this.pipeline=n,this.aggregateOptions=i;let s=this.pipeline[this.pipeline.length-1];if(this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===mM.CursorTimeoutMode.ITERATION&&(s?.$merge!=null||s?.$out!=null))throw new AA.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode")}clone(){let e=(0,sre.mergeOptions)({},this.aggregateOptions);return delete e.session,new t(this.client,this.namespace,this.pipeline,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.aggregateOptions,...this.cursorOptions,session:e};if(r.explain)try{(0,wA.validateExplainTimeoutOptions)(r,wA.Explain.fromOptions(r))}catch{throw new AA.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in aggregateOptions")}let n=new dM.AggregateOperation(this.namespace,this.pipeline,r),i=await(0,pM.executeOperation)(this.client,n,this.timeoutContext);return{server:n.server,session:e,response:i}}async explain(e,r){let{explain:n,timeout:i}=this.resolveExplainTimeoutOptions(e,r);return(await(0,pM.executeOperation)(this.client,new dM.AggregateOperation(this.namespace,this.pipeline,{...this.aggregateOptions,...this.cursorOptions,...i,explain:n??!0}))).shift(this.deserializationOptions)}addStage(e){if(this.throwIfInitialized(),this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===mM.CursorTimeoutMode.ITERATION&&(e.$out!=null||e.$merge!=null))throw new AA.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode");return this.pipeline.push(e),this}group(e){return this.addStage({$group:e})}limit(e){return this.addStage({$limit:e})}match(e){return this.addStage({$match:e})}out(e){return this.addStage({$out:e})}project(e){return this.addStage({$project:e})}lookup(e){return this.addStage({$lookup:e})}redact(e){return this.addStage({$redact:e})}skip(e){return this.addStage({$skip:e})}sort(e){return this.addStage({$sort:e})}unwind(e){return this.addStage({$unwind:e})}geoNear(e){return this.addStage({$geoNear:e})}};v0.AggregationCursor=SA});var OA=y(I0=>{"use strict";f();Object.defineProperty(I0,"__esModule",{value:!0});I0.CountOperation=void 0;var ore=Lt(),bA=nt(),B0=class extends ore.CommandOperation{constructor(e,r,n){super({s:{namespace:e}},n),this.options=n,this.collectionName=e.collection,this.query=r}get commandName(){return"count"}async execute(e,r,n){let i=this.options,s={count:this.collectionName,query:this.query};typeof i.limit=="number"&&(s.limit=i.limit),typeof i.skip=="number"&&(s.skip=i.skip),i.hint!=null&&(s.hint=i.hint),typeof i.maxTimeMS=="number"&&(s.maxTimeMS=i.maxTimeMS);let o=await super.executeCommand(e,r,s,n);return o?o.n:0}};I0.CountOperation=B0;(0,bA.defineAspects)(B0,[bA.Aspect.READ_OPERATION,bA.Aspect.RETRYABLE])});var P0=y(CA=>{"use strict";f();Object.defineProperty(CA,"__esModule",{value:!0});CA.formatSort=yre;var yM=re();function El(t=1){let e=`${t}`.toLowerCase();if(ure(t))return t;switch(e){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new yM.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(t)}`)}}function ure(t){return typeof t=="object"&&t!=null&&"$meta"in t&&typeof t.$meta=="string"}function are(t){if(Array.isArray(t)&&t.length===2)try{return El(t[1]),!0}catch{return!1}return!1}function cre(t){return Array.isArray(t)&&Array.isArray(t[0])}function lre(t){return t instanceof Map&&t.size>0}function fre(t){return new Map([[`${t[0]}`,El([t[1]])]])}function hre(t){let e=t.map(([r,n])=>[`${r}`,El(n)]);return new Map(e)}function dre(t){let e=t.map(r=>[`${r}`,1]);return new Map(e)}function pre(t){let e=Object.entries(t).map(([r,n])=>[`${r}`,El(n)]);return new Map(e)}function mre(t){let e=Array.from(t).map(([r,n])=>[`${r}`,El(n)]);return new Map(e)}function yre(t,e){if(t!=null){if(typeof t=="string")return new Map([[t,El(e)]]);if(typeof t!="object")throw new yM.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(t)} Sort must be a valid object`);if(!Array.isArray(t))return lre(t)?mre(t):Object.keys(t).length?pre(t):void 0;if(t.length)return cre(t)?hre(t):are(t)?fre(t):dre(t)}}});var EM=y(R0=>{"use strict";f();Object.defineProperty(R0,"__esModule",{value:!0});R0.FindOperation=void 0;var gM=gs(),gre=re(),_M=Ja(),_re=Bi(),Ere=P0(),Are=fe(),wre=Lt(),Xf=nt(),N0=class extends wre.CommandOperation{constructor(e,r={},n={}){if(super(void 0,n),this.options={...n},delete this.options.writeConcern,this.ns=e,typeof r!="object"||Array.isArray(r))throw new gre.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=r!=null&&r._bsontype==="ObjectId"?{_id:r}:r}get commandName(){return"find"}async execute(e,r,n){this.server=e;let i=this.options,s=Sre(this.ns,this.filter,i);return this.explain&&((0,_M.validateExplainTimeoutOptions)(this.options,this.explain),s=(0,_M.decorateWithExplain)(s,this.explain)),await e.command(this.ns,s,{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:r,timeoutContext:n},this.explain?gM.ExplainedCursorResponse:gM.CursorResponse)}};R0.FindOperation=N0;function Sre(t,e,r){let n={find:t.collection,filter:e};if(r.sort&&(n.sort=(0,Ere.formatSort)(r.sort)),r.projection){let s=r.projection;s&&Array.isArray(s)&&(s=s.length?s.reduce((o,u)=>(o[u]=1,o),{}):{_id:1}),n.projection=s}r.hint&&(n.hint=(0,Are.normalizeHintField)(r.hint)),typeof r.skip=="number"&&(n.skip=r.skip),typeof r.limit=="number"&&(r.limit<0?(n.limit=-r.limit,n.singleBatch=!0):n.limit=r.limit),typeof r.batchSize=="number"&&(r.batchSize<0?(r.limit&&r.limit!==0&&Math.abs(r.batchSize)<Math.abs(r.limit)&&(n.limit=-r.batchSize),n.singleBatch=!0):n.batchSize=r.batchSize),typeof r.singleBatch=="boolean"&&(n.singleBatch=r.singleBatch),r.comment!==void 0&&(n.comment=r.comment),typeof r.maxTimeMS=="number"&&(n.maxTimeMS=r.maxTimeMS);let i=_re.ReadConcern.fromOptions(r);return i&&(n.readConcern=i.toJSON()),r.max&&(n.max=r.max),r.min&&(n.min=r.min),typeof r.returnKey=="boolean"&&(n.returnKey=r.returnKey),typeof r.showRecordId=="boolean"&&(n.showRecordId=r.showRecordId),typeof r.tailable=="boolean"&&(n.tailable=r.tailable),typeof r.oplogReplay=="boolean"&&(n.oplogReplay=r.oplogReplay),typeof r.timeout=="boolean"?n.noCursorTimeout=!r.timeout:typeof r.noCursorTimeout=="boolean"&&(n.noCursorTimeout=r.noCursorTimeout),typeof r.awaitData=="boolean"&&(n.awaitData=r.awaitData),typeof r.allowPartialResults=="boolean"&&(n.allowPartialResults=r.allowPartialResults),r.collation&&(n.collation=r.collation),typeof r.allowDiskUse=="boolean"&&(n.allowDiskUse=r.allowDiskUse),r.let&&(n.let=r.let),n}(0,Xf.defineAspects)(N0,[Xf.Aspect.READ_OPERATION,Xf.Aspect.RETRYABLE,Xf.Aspect.EXPLAINABLE,Xf.Aspect.CURSOR_CREATING])});var IA=y(Al=>{"use strict";f();Object.defineProperty(Al,"__esModule",{value:!0});Al.FindCursor=Al.FLAGS=void 0;var bre=gs(),Fi=re(),TA=Ja(),Ore=OA(),DA=Zr(),AM=EM(),MA=P0(),vA=fe();Al.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];var BA=class t extends TA.ExplainableCursor{constructor(e,r,n={},i={}){super(e,r,i),this.numReturned=0,this.cursorFilter=n,this.findOptions=i,i.sort!=null&&(this.findOptions.sort=(0,MA.formatSort)(i.sort))}clone(){let e=(0,vA.mergeOptions)({},this.findOptions);return delete e.session,new t(this.client,this.namespace,this.cursorFilter,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.findOptions,...this.cursorOptions,session:e};if(r.explain)try{(0,TA.validateExplainTimeoutOptions)(r,TA.Explain.fromOptions(r))}catch{throw new Fi.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in findOptions")}let n=new AM.FindOperation(this.namespace,this.cursorFilter,r),i=await(0,DA.executeOperation)(this.client,n,this.timeoutContext);return this.numReturned=i.batchSize,{server:n.server,session:e,response:i}}async getMore(e){let r=this.numReturned;if(r){let i=this.findOptions.limit;if(e=i&&i>0&&r+e>i?i-r:e,e<=0){try{await this.close()}catch(s){(0,vA.squashError)(s)}return bre.CursorResponse.emptyGetMore}}let n=await super.getMore(e);return this.numReturned=this.numReturned+n.batchSize,n}async count(e){if((0,vA.emitWarningOnce)("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof e=="boolean")throw new Fi.MongoInvalidArgumentError("Invalid first parameter to count");return await(0,DA.executeOperation)(this.client,new Ore.CountOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...e}))}async explain(e,r){let{explain:n,timeout:i}=this.resolveExplainTimeoutOptions(e,r);return(await(0,DA.executeOperation)(this.client,new AM.FindOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...i,explain:n??!0}))).shift(this.deserializationOptions)}filter(e){return this.throwIfInitialized(),this.cursorFilter=e,this}hint(e){return this.throwIfInitialized(),this.findOptions.hint=e,this}min(e){return this.throwIfInitialized(),this.findOptions.min=e,this}max(e){return this.throwIfInitialized(),this.findOptions.max=e,this}returnKey(e){return this.throwIfInitialized(),this.findOptions.returnKey=e,this}showRecordId(e){return this.throwIfInitialized(),this.findOptions.showRecordId=e,this}addQueryModifier(e,r){if(this.throwIfInitialized(),e[0]!=="$")throw new Fi.MongoInvalidArgumentError(`${e} is not a valid query modifier`);switch(e.substr(1)){case"comment":this.findOptions.comment=r;break;case"explain":this.findOptions.explain=r;break;case"hint":this.findOptions.hint=r;break;case"max":this.findOptions.max=r;break;case"maxTimeMS":this.findOptions.maxTimeMS=r;break;case"min":this.findOptions.min=r;break;case"orderby":this.findOptions.sort=(0,MA.formatSort)(r);break;case"query":this.cursorFilter=r;break;case"returnKey":this.findOptions.returnKey=r;break;case"showDiskLoc":this.findOptions.showRecordId=r;break;default:throw new Fi.MongoInvalidArgumentError(`Invalid query modifier: ${e}`)}return this}comment(e){return this.throwIfInitialized(),this.findOptions.comment=e,this}maxAwaitTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new Fi.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this.findOptions.maxAwaitTimeMS=e,this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new Fi.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.findOptions.maxTimeMS=e,this}project(e){return this.throwIfInitialized(),this.findOptions.projection=e,this}sort(e,r){if(this.throwIfInitialized(),this.findOptions.tailable)throw new Fi.MongoTailableCursorError("Tailable cursor does not support sorting");return this.findOptions.sort=(0,MA.formatSort)(e,r),this}allowDiskUse(e=!0){if(this.throwIfInitialized(),!this.findOptions.sort)throw new Fi.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');return e?(this.findOptions.allowDiskUse=!0,this):(this.findOptions.allowDiskUse=!1,this)}collation(e){return this.throwIfInitialized(),this.findOptions.collation=e,this}limit(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new Fi.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof e!="number")throw new Fi.MongoInvalidArgumentError('Operation "limit" requires an integer');return this.findOptions.limit=e,this}skip(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new Fi.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof e!="number")throw new Fi.MongoInvalidArgumentError('Operation "skip" requires an integer');return this.findOptions.skip=e,this}};Al.FindCursor=BA});var Zf=y(ku=>{"use strict";f();Object.defineProperty(ku,"__esModule",{value:!0});ku.ListIndexesOperation=ku.DropIndexOperation=ku.CreateIndexesOperation=void 0;var Cre=gs(),Tre=re(),PA=fe(),NA=Lt(),$u=nt(),Dre=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);function Mre(t){return typeof t=="number"||t==="2d"||t==="2dsphere"||t==="text"||t==="geoHaystack"}function vre(t){return Array.isArray(t)&&t.length===2&&Mre(t[1])}function Bre(t){let e=new Map,r=!Array.isArray(t)||vre(t)?[t]:t;for(let n of r)if(typeof n=="string")e.set(n,1);else if(Array.isArray(n))e.set(n[0],n[1]??1);else if(n instanceof Map)for(let[i,s]of n)e.set(i,s);else if((0,PA.isObject)(n))for(let[i,s]of Object.entries(n))e.set(i,s);return e}function Ire(t){let e=Object.entries(t).filter(([r])=>Dre.has(r));return Object.fromEntries(e.map(([r,n])=>r==="version"?["v",n]:[r,n]))}var x0=class t extends NA.CommandOperation{constructor(e,r,n,i){super(e,i),this.options=i??{},this.collectionName=r,this.indexes=n.map(s=>{let o=s.key instanceof Map?s.key:new Map(Object.entries(s.key)),u=s.name??Array.from(o).flat().join("_");return{...Ire(s),name:u,key:o}})}static fromIndexDescriptionArray(e,r,n,i){return new t(e,r,n,i)}static fromIndexSpecification(e,r,n,i={}){let s=Bre(n),o={...i,key:s};return new t(e,r,[o],i)}get commandName(){return"createIndexes"}async execute(e,r,n){let i=this.options,s=this.indexes,o=(0,PA.maxWireVersion)(e),u={createIndexes:this.collectionName,indexes:s};if(i.commitQuorum!=null){if(o<9)throw new Tre.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");u.commitQuorum=i.commitQuorum}return this.options.collation=void 0,await super.executeCommand(e,r,u,n),s.map(c=>c.name||"")}};ku.CreateIndexesOperation=x0;var F0=class extends NA.CommandOperation{constructor(e,r,n){super(e,n),this.options=n??{},this.collection=e,this.indexName=r}get commandName(){return"dropIndexes"}async execute(e,r,n){let i={dropIndexes:this.collection.collectionName,index:this.indexName};return await super.executeCommand(e,r,i,n)}};ku.DropIndexOperation=F0;var $0=class extends NA.CommandOperation{constructor(e,r){super(e,r),this.options={...r},delete this.options.writeConcern,this.collectionNamespace=e.s.namespace}get commandName(){return"listIndexes"}async execute(e,r,n){let i=(0,PA.maxWireVersion)(e),s=this.options.batchSize?{batchSize:this.options.batchSize}:{},o={listIndexes:this.collectionNamespace.collection,cursor:s};return i>=9&&this.options.comment!==void 0&&(o.comment=this.options.comment),await super.executeCommand(e,r,o,n,Cre.CursorResponse)}};ku.ListIndexesOperation=$0;(0,$u.defineAspects)($0,[$u.Aspect.READ_OPERATION,$u.Aspect.RETRYABLE,$u.Aspect.CURSOR_CREATING]);(0,$u.defineAspects)(x0,[$u.Aspect.WRITE_OPERATION]);(0,$u.defineAspects)(F0,[$u.Aspect.WRITE_OPERATION])});var xA=y(k0=>{"use strict";f();Object.defineProperty(k0,"__esModule",{value:!0});k0.ListIndexesCursor=void 0;var Pre=Zr(),Nre=Zf(),Rre=en(),RA=class t extends Rre.AbstractCursor{constructor(e,r){super(e.client,e.s.namespace,r),this.parent=e,this.options=r}clone(){return new t(this.parent,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new Nre.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:e}),n=await(0,Pre.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};k0.ListIndexesCursor=RA});var wM=y(q0=>{"use strict";f();Object.defineProperty(q0,"__esModule",{value:!0});q0.ListSearchIndexesCursor=void 0;var xre=Jf(),FA=class extends xre.AggregationCursor{constructor({fullNamespace:e,client:r},n,i={}){let s=n==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:n}}];super(r,e,s,i)}};q0.ListSearchIndexesCursor=FA});var bM=y(U0=>{"use strict";f();Object.defineProperty(U0,"__esModule",{value:!0});U0.DistinctOperation=void 0;var SM=fe(),Fre=Lt(),L0=nt(),j0=class extends Fre.CommandOperation{constructor(e,r,n,i){super(e,i),this.options=i??{},this.collection=e,this.key=r,this.query=n}get commandName(){return"distinct"}async execute(e,r,n){let i=this.collection,s=this.key,o=this.query,u=this.options,a={distinct:i.collectionName,key:s,query:o};typeof u.maxTimeMS=="number"&&(a.maxTimeMS=u.maxTimeMS),typeof u.comment<"u"&&(a.comment=u.comment),(0,SM.decorateWithReadConcern)(a,i,u),(0,SM.decorateWithCollation)(a,i,u);let c=await super.executeCommand(e,r,a,n);return this.explain?c:c.values}};U0.DistinctOperation=j0;(0,L0.defineAspects)(j0,[L0.Aspect.READ_OPERATION,L0.Aspect.RETRYABLE,L0.Aspect.EXPLAINABLE])});var $A=y(wl=>{"use strict";f();Object.defineProperty(wl,"__esModule",{value:!0});wl.DropDatabaseOperation=wl.DropCollectionOperation=void 0;var OM=re(),CM=Lt(),V0=nt(),z0=class t extends CM.CommandOperation{constructor(e,r,n={}){super(e,n),this.db=e,this.options=n,this.name=r}get commandName(){return"drop"}async execute(e,r,n){let i=this.db,s=this.options,o=this.name,u=i.client.s.options.autoEncryption?.encryptedFieldsMap,a=s.encryptedFields??u?.[`${i.databaseName}.${o}`];if(!a&&u&&(a=(await i.listCollections({name:o},{nameOnly:!1}).toArray())?.[0]?.options?.encryptedFields),a){let c=a.escCollection||`enxcol_.${o}.esc`,l=a.ecocCollection||`enxcol_.${o}.ecoc`;for(let h of[c,l]){let d=new t(i,h);try{await d.executeWithoutEncryptedFieldsCheck(e,r,n)}catch(p){if(!(p instanceof OM.MongoServerError)||p.code!==OM.MONGODB_ERROR_CODES.NamespaceNotFound)throw p}}}return await this.executeWithoutEncryptedFieldsCheck(e,r,n)}async executeWithoutEncryptedFieldsCheck(e,r,n){return await super.executeCommand(e,r,{drop:this.name},n),!0}};wl.DropCollectionOperation=z0;var W0=class extends CM.CommandOperation{constructor(e,r){super(e,r),this.options=r}get commandName(){return"dropDatabase"}async execute(e,r,n){return await super.executeCommand(e,r,{dropDatabase:1},n),!0}};wl.DropDatabaseOperation=W0;(0,V0.defineAspects)(z0,[V0.Aspect.WRITE_OPERATION]);(0,V0.defineAspects)(W0,[V0.Aspect.WRITE_OPERATION])});var TM=y(K0=>{"use strict";f();Object.defineProperty(K0,"__esModule",{value:!0});K0.EstimatedDocumentCountOperation=void 0;var $re=Lt(),H0=nt(),G0=class extends $re.CommandOperation{constructor(e,r={}){super(e,r),this.options=r,this.collectionName=e.collectionName}get commandName(){return"count"}async execute(e,r,n){let i={count:this.collectionName};return typeof this.options.maxTimeMS=="number"&&(i.maxTimeMS=this.options.maxTimeMS),this.options.comment!==void 0&&(i.comment=this.options.comment),(await super.executeCommand(e,r,i,n))?.n||0}};K0.EstimatedDocumentCountOperation=G0;(0,H0.defineAspects)(G0,[H0.Aspect.READ_OPERATION,H0.Aspect.RETRYABLE,H0.Aspect.CURSOR_CREATING])});var jA=y(hi=>{"use strict";f();Object.defineProperty(hi,"__esModule",{value:!0});hi.FindOneAndUpdateOperation=hi.FindOneAndReplaceOperation=hi.FindOneAndDeleteOperation=hi.FindAndModifyOperation=hi.ReturnDocument=void 0;var qu=re(),kre=Sr(),qre=P0(),Q0=fe(),Lre=Lt(),Y0=nt();hi.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});function DM(t,e){return t.new=e.returnDocument===hi.ReturnDocument.AFTER,t.upsert=e.upsert===!0,e.bypassDocumentValidation===!0&&(t.bypassDocumentValidation=e.bypassDocumentValidation),t}var Xa=class extends Lre.CommandOperation{constructor(e,r,n){super(e,n),this.options=n??{},this.cmdBase={remove:!1,new:!1,upsert:!1},n.includeResultMetadata??=!1;let i=(0,qre.formatSort)(n.sort);i&&(this.cmdBase.sort=i),n.projection&&(this.cmdBase.fields=n.projection),n.maxTimeMS&&(this.cmdBase.maxTimeMS=n.maxTimeMS),n.writeConcern&&(this.cmdBase.writeConcern=n.writeConcern),n.let&&(this.cmdBase.let=n.let),n.comment!==void 0&&(this.cmdBase.comment=n.comment),this.readPreference=kre.ReadPreference.primary,this.collection=e,this.query=r}get commandName(){return"findAndModify"}async execute(e,r,n){let i=this.collection,s=this.query,o={...this.options,...this.bsonOptions},u={findAndModify:i.collectionName,query:s,...this.cmdBase};if((0,Q0.decorateWithCollation)(u,i,o),o.hint){if(this.writeConcern?.w===0||(0,Q0.maxWireVersion)(e)<8)throw new qu.MongoCompatibilityError("The current topology does not support a hint on findAndModify commands");u.hint=o.hint}let a=await super.executeCommand(e,r,u,n);return o.includeResultMetadata?a:a.value??null}};hi.FindAndModifyOperation=Xa;var kA=class extends Xa{constructor(e,r,n){if(r==null||typeof r!="object")throw new qu.MongoInvalidArgumentError('Argument "filter" must be an object');super(e,r,n),this.cmdBase.remove=!0}};hi.FindOneAndDeleteOperation=kA;var qA=class extends Xa{constructor(e,r,n,i){if(r==null||typeof r!="object")throw new qu.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new qu.MongoInvalidArgumentError('Argument "replacement" must be an object');if((0,Q0.hasAtomicOperators)(n))throw new qu.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(e,r,i),this.cmdBase.update=n,DM(this.cmdBase,i)}};hi.FindOneAndReplaceOperation=qA;var LA=class extends Xa{constructor(e,r,n,i){if(r==null||typeof r!="object")throw new qu.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new qu.MongoInvalidArgumentError('Argument "update" must be an object');if(!(0,Q0.hasAtomicOperators)(n))throw new qu.MongoInvalidArgumentError("Update document requires atomic operators");super(e,r,i),this.cmdBase.update=n,DM(this.cmdBase,i),i.arrayFilters&&(this.cmdBase.arrayFilters=i.arrayFilters)}};hi.FindOneAndUpdateOperation=LA;(0,Y0.defineAspects)(Xa,[Y0.Aspect.WRITE_OPERATION,Y0.Aspect.RETRYABLE,Y0.Aspect.EXPLAINABLE])});var MM=y(J0=>{"use strict";f();Object.defineProperty(J0,"__esModule",{value:!0});J0.IsCappedOperation=void 0;var jre=re(),Ure=nt(),UA=class extends Ure.AbstractOperation{constructor(e,r){super(r),this.options=r,this.collection=e}get commandName(){return"listCollections"}async execute(e,r){let n=this.collection,[i]=await n.s.db.listCollections({name:n.collectionName},{...this.options,nameOnly:!1,readPreference:this.readPreference,session:r}).toArray();if(i==null||i.options==null)throw new jre.MongoAPIError(`collection ${n.namespace} not found`);return!!i.options?.capped}};J0.IsCappedOperation=UA});var vM=y(X0=>{"use strict";f();Object.defineProperty(X0,"__esModule",{value:!0});X0.OptionsOperation=void 0;var Vre=re(),zre=nt(),VA=class extends zre.AbstractOperation{constructor(e,r){super(r),this.options=r,this.collection=e}get commandName(){return"listCollections"}async execute(e,r){let n=this.collection,[i]=await n.s.db.listCollections({name:n.collectionName},{...this.options,nameOnly:!1,readPreference:this.readPreference,session:r}).toArray();if(i==null||i.options==null)throw new Vre.MongoAPIError(`collection ${n.namespace} not found`);return i.options}};X0.OptionsOperation=VA});var zA=y(em=>{"use strict";f();Object.defineProperty(em,"__esModule",{value:!0});em.RenameOperation=void 0;var Wre=Za(),Hre=fe(),Gre=Lt(),BM=nt(),Z0=class extends Gre.CommandOperation{constructor(e,r,n){super(e,n),this.collection=e,this.newName=r,this.options=n,this.ns=new Hre.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}async execute(e,r,n){let i=this.collection.namespace,s=this.collection.s.namespace.withCollection(this.newName).toString(),o=typeof this.options.dropTarget=="boolean"?this.options.dropTarget:!1,u={renameCollection:i,to:s,dropTarget:o};return await super.executeCommand(e,r,u,n),new Wre.Collection(this.collection.s.db,this.newName,this.collection.s.options)}};em.RenameOperation=Z0;(0,BM.defineAspects)(Z0,[BM.Aspect.WRITE_OPERATION])});var IM=y(tm=>{"use strict";f();Object.defineProperty(tm,"__esModule",{value:!0});tm.CreateSearchIndexesOperation=void 0;var Kre=nt(),WA=class extends Kre.AbstractOperation{constructor(e,r){super(),this.collection=e,this.descriptions=r}get commandName(){return"createSearchIndexes"}async execute(e,r,n){let i=this.collection.fullNamespace,s={createSearchIndexes:i.collection,indexes:this.descriptions};return((await e.command(i,s,{session:r,timeoutContext:n}))?.indexesCreated??[]).map(({name:a})=>a)}};tm.CreateSearchIndexesOperation=WA});var NM=y(rm=>{"use strict";f();Object.defineProperty(rm,"__esModule",{value:!0});rm.DropSearchIndexOperation=void 0;var PM=re(),Yre=nt(),HA=class extends Yre.AbstractOperation{constructor(e,r){super(),this.collection=e,this.name=r}get commandName(){return"dropSearchIndex"}async execute(e,r,n){let i=this.collection.fullNamespace,s={dropSearchIndex:i.collection};typeof this.name=="string"&&(s.name=this.name);try{await e.command(i,s,{session:r,timeoutContext:n})}catch(o){if(!(o instanceof PM.MongoServerError&&o.code===PM.MONGODB_ERROR_CODES.NamespaceNotFound))throw o}}};rm.DropSearchIndexOperation=HA});var RM=y(nm=>{"use strict";f();Object.defineProperty(nm,"__esModule",{value:!0});nm.UpdateSearchIndexOperation=void 0;var Qre=nt(),GA=class extends Qre.AbstractOperation{constructor(e,r,n){super(),this.collection=e,this.name=r,this.definition=n}get commandName(){return"updateSearchIndex"}async execute(e,r,n){let i=this.collection.fullNamespace,s={updateSearchIndex:i.collection,name:this.name,definition:this.definition};await e.command(i,s,{session:r,timeoutContext:n})}};nm.UpdateSearchIndexOperation=GA});var Za=y(sm=>{"use strict";f();Object.defineProperty(sm,"__esModule",{value:!0});sm.Collection=void 0;var Jre=Ye(),Xre=yA(),Zre=_A(),ene=ec(),tne=Jf(),rne=IA(),nne=xA(),ine=wM(),KA=re(),sne=oA(),one=OA(),xM=iA(),une=bM(),ane=$A(),cne=TM(),vt=Zr(),YA=jA(),im=Zf(),FM=uA(),lne=MM(),fne=vM(),hne=zA(),dne=IM(),pne=NM(),mne=RM(),QA=cA(),yne=Bi(),JA=Sr(),ot=fe(),gne=Qr(),XA=class{constructor(e,r,n){this.s={db:e,options:n,namespace:new ot.MongoDBCollectionNamespace(e.databaseName,r),pkFactory:e.options?.pkFactory??ot.DEFAULT_PK_FACTORY,readPreference:JA.ReadPreference.fromOptions(n),bsonOptions:(0,Jre.resolveBSONOptions)(n,e),readConcern:yne.ReadConcern.fromOptions(n),writeConcern:gne.WriteConcern.fromOptions(n)},this.client=e.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){return this.s.readConcern==null?this.s.db.readConcern:this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.s.db.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern==null?this.s.db.writeConcern:this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(e){this.s.collectionHint=(0,ot.normalizeHintField)(e)}get timeoutMS(){return this.s.options.timeoutMS}async insertOne(e,r){return await(0,vt.executeOperation)(this.client,new FM.InsertOneOperation(this,e,(0,ot.resolveOptions)(this,r)))}async insertMany(e,r){return await(0,vt.executeOperation)(this.client,new FM.InsertManyOperation(this,e,(0,ot.resolveOptions)(this,r??{ordered:!0})))}async bulkWrite(e,r){if(!Array.isArray(e))throw new KA.MongoInvalidArgumentError('Argument "operations" must be an array of documents');return await(0,vt.executeOperation)(this.client,new sne.BulkWriteOperation(this,e,(0,ot.resolveOptions)(this,r??{ordered:!0})))}async updateOne(e,r,n){return await(0,vt.executeOperation)(this.client,new QA.UpdateOneOperation(this,e,r,(0,ot.resolveOptions)(this,n)))}async replaceOne(e,r,n){return await(0,vt.executeOperation)(this.client,new QA.ReplaceOneOperation(this,e,r,(0,ot.resolveOptions)(this,n)))}async updateMany(e,r,n){return await(0,vt.executeOperation)(this.client,new QA.UpdateManyOperation(this,e,r,(0,ot.resolveOptions)(this,n)))}async deleteOne(e={},r={}){return await(0,vt.executeOperation)(this.client,new xM.DeleteOneOperation(this,e,(0,ot.resolveOptions)(this,r)))}async deleteMany(e={},r={}){return await(0,vt.executeOperation)(this.client,new xM.DeleteManyOperation(this,e,(0,ot.resolveOptions)(this,r)))}async rename(e,r){return await(0,vt.executeOperation)(this.client,new hne.RenameOperation(this,e,(0,ot.resolveOptions)(void 0,{...r,readPreference:JA.ReadPreference.PRIMARY})))}async drop(e){return await(0,vt.executeOperation)(this.client,new ane.DropCollectionOperation(this.s.db,this.collectionName,e))}async findOne(e={},r={}){let n=this.find(e,r).limit(-1).batchSize(1),i=await n.next();return await n.close(),i}find(e={},r={}){return new rne.FindCursor(this.client,this.s.namespace,e,(0,ot.resolveOptions)(this,r))}async options(e){return await(0,vt.executeOperation)(this.client,new fne.OptionsOperation(this,(0,ot.resolveOptions)(this,e)))}async isCapped(e){return await(0,vt.executeOperation)(this.client,new lne.IsCappedOperation(this,(0,ot.resolveOptions)(this,e)))}async createIndex(e,r){return(await(0,vt.executeOperation)(this.client,im.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,e,(0,ot.resolveOptions)(this,r))))[0]}async createIndexes(e,r){return await(0,vt.executeOperation)(this.client,im.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,e,(0,ot.resolveOptions)(this,{...r,maxTimeMS:void 0})))}async dropIndex(e,r){return await(0,vt.executeOperation)(this.client,new im.DropIndexOperation(this,e,{...(0,ot.resolveOptions)(this,r),readPreference:JA.ReadPreference.primary}))}async dropIndexes(e){try{return await(0,vt.executeOperation)(this.client,new im.DropIndexOperation(this,"*",(0,ot.resolveOptions)(this,e))),!0}catch(r){if(r instanceof KA.MongoOperationTimeoutError)throw r;return!1}}listIndexes(e){return new nne.ListIndexesCursor(this,(0,ot.resolveOptions)(this,e))}async indexExists(e,r){let n=Array.isArray(e)?e:[e],i=new Set(await this.listIndexes(r).map(({name:s})=>s).toArray());return n.every(s=>i.has(s))}async indexInformation(e){return await this.indexes({...e,full:e?.full??!1})}async estimatedDocumentCount(e){return await(0,vt.executeOperation)(this.client,new cne.EstimatedDocumentCountOperation(this,(0,ot.resolveOptions)(this,e)))}async countDocuments(e={},r={}){let n=[];n.push({$match:e}),typeof r.skip=="number"&&n.push({$skip:r.skip}),typeof r.limit=="number"&&n.push({$limit:r.limit}),n.push({$group:{_id:1,n:{$sum:1}}});let i=this.aggregate(n,r),s=await i.next();return await i.close(),s?.n??0}async distinct(e,r={},n={}){return await(0,vt.executeOperation)(this.client,new une.DistinctOperation(this,e,r,(0,ot.resolveOptions)(this,n)))}async indexes(e){let r=await this.listIndexes(e).toArray();return e?.full??!0?r:Object.fromEntries(r.map(({name:s,key:o})=>[s,Object.entries(o)]))}async findOneAndDelete(e,r){return await(0,vt.executeOperation)(this.client,new YA.FindOneAndDeleteOperation(this,e,(0,ot.resolveOptions)(this,r)))}async findOneAndReplace(e,r,n){return await(0,vt.executeOperation)(this.client,new YA.FindOneAndReplaceOperation(this,e,r,(0,ot.resolveOptions)(this,n)))}async findOneAndUpdate(e,r,n){return await(0,vt.executeOperation)(this.client,new YA.FindOneAndUpdateOperation(this,e,r,(0,ot.resolveOptions)(this,n)))}aggregate(e=[],r){if(!Array.isArray(e))throw new KA.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new tne.AggregationCursor(this.client,this.s.namespace,e,(0,ot.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new ene.ChangeStream(this,e,(0,ot.resolveOptions)(this,r))}initializeUnorderedBulkOp(e){return new Zre.UnorderedBulkOperation(this,(0,ot.resolveOptions)(this,e))}initializeOrderedBulkOp(e){return new Xre.OrderedBulkOperation(this,(0,ot.resolveOptions)(this,e))}async count(e={},r={}){return await(0,vt.executeOperation)(this.client,new one.CountOperation(this.fullNamespace,e,(0,ot.resolveOptions)(this,r)))}listSearchIndexes(e,r){r=typeof e=="object"?e:r??{};let n=e==null||typeof e=="object"?null:e;return new ine.ListSearchIndexesCursor(this,n,r)}async createSearchIndex(e){let[r]=await this.createSearchIndexes([e]);return r}async createSearchIndexes(e){return await(0,vt.executeOperation)(this.client,new dne.CreateSearchIndexesOperation(this,e))}async dropSearchIndex(e){return await(0,vt.executeOperation)(this.client,new pne.DropSearchIndexOperation(this,e))}async updateSearchIndex(e,r){return await(0,vt.executeOperation)(this.client,new mne.UpdateSearchIndexOperation(this,e,r))}};sm.Collection=XA});var rw=y(om=>{"use strict";f();Object.defineProperty(om,"__esModule",{value:!0});om.ChangeStreamCursor=void 0;var ZA=ec(),$M=Xt(),_ne=EA(),Ene=Zr(),ew=fe(),Ane=en(),tw=class t extends Ane.AbstractCursor{constructor(e,r,n=[],i={}){super(e,r,{...i,tailable:!0,awaitData:!0}),this.pipeline=n,this.changeStreamCursorOptions=i,this._resumeToken=null,this.startAtOperationTime=i.startAtOperationTime??null,i.startAfter?this.resumeToken=i.startAfter:i.resumeAfter&&(this.resumeToken=i.resumeAfter)}set resumeToken(e){this._resumeToken=e,this.emit(ZA.ChangeStream.RESUME_TOKEN_CHANGED,e)}get resumeToken(){return this._resumeToken}get resumeOptions(){let e={...this.changeStreamCursorOptions};for(let r of["resumeAfter","startAfter","startAtOperationTime"])delete e[r];return this.resumeToken!=null?this.changeStreamCursorOptions.startAfter&&!this.hasReceived?e.startAfter=this.resumeToken:e.resumeAfter=this.resumeToken:this.startAtOperationTime!=null&&(0,ew.maxWireVersion)(this.server)>=7&&(e.startAtOperationTime=this.startAtOperationTime),e}cacheResumeToken(e){this.bufferedCount()===0&&this.postBatchResumeToken?this.resumeToken=this.postBatchResumeToken:this.resumeToken=e,this.hasReceived=!0}_processBatch(e){let{postBatchResumeToken:r}=e;r&&(this.postBatchResumeToken=r,e.batchSize===0&&(this.resumeToken=r))}clone(){return new t(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(e){let r=new _ne.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.changeStreamCursorOptions,session:e}),n=await(0,Ene.executeOperation)(e.client,r,this.timeoutContext),i=r.server;return this.maxWireVersion=(0,ew.maxWireVersion)(i),this.startAtOperationTime==null&&this.changeStreamCursorOptions.resumeAfter==null&&this.changeStreamCursorOptions.startAfter==null&&this.maxWireVersion>=7&&(this.startAtOperationTime=n.operationTime),this._processBatch(n),this.emit($M.INIT,n),this.emit($M.RESPONSE),{server:i,session:e,response:n}}async getMore(e){let r=await super.getMore(e);return this.maxWireVersion=(0,ew.maxWireVersion)(this.server),this._processBatch(r),this.emit(ZA.ChangeStream.MORE,r),this.emit(ZA.ChangeStream.RESPONSE),r}};om.ChangeStreamCursor=tw});var kM=y(cm=>{"use strict";f();Object.defineProperty(cm,"__esModule",{value:!0});cm.ListCollectionsOperation=void 0;var wne=gs(),Sne=fe(),bne=Lt(),um=nt(),am=class extends bne.CommandOperation{constructor(e,r,n){super(e,n),this.options={...n},delete this.options.writeConcern,this.db=e,this.filter=r,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize=="number"&&(this.batchSize=this.options.batchSize)}get commandName(){return"listCollections"}async execute(e,r,n){return await super.executeCommand(e,r,this.generateCommand((0,Sne.maxWireVersion)(e)),n,wne.CursorResponse)}generateCommand(e){let r={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};return e>=9&&this.options.comment!==void 0&&(r.comment=this.options.comment),r}};cm.ListCollectionsOperation=am;(0,um.defineAspects)(am,[um.Aspect.READ_OPERATION,um.Aspect.RETRYABLE,um.Aspect.CURSOR_CREATING])});var iw=y(lm=>{"use strict";f();Object.defineProperty(lm,"__esModule",{value:!0});lm.ListCollectionsCursor=void 0;var One=Zr(),Cne=kM(),Tne=en(),nw=class t extends Tne.AbstractCursor{constructor(e,r,n){super(e.client,e.s.namespace,n),this.parent=e,this.filter=r,this.options=n}clone(){return new t(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new Cne.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:e}),n=await(0,One.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};lm.ListCollectionsCursor=nw});var bl=y(Sl=>{"use strict";f();Object.defineProperty(Sl,"__esModule",{value:!0});Sl.RunAdminCommandOperation=Sl.RunCommandOperation=void 0;var Dne=fe(),qM=nt(),sw=class extends qM.AbstractOperation{constructor(e,r,n){super(n),this.command=r,this.options=n,this.ns=e.s.namespace.withCollection("$cmd")}get commandName(){return"runCommand"}async execute(e,r,n){return this.server=e,await e.command(this.ns,this.command,{...this.options,readPreference:this.readPreference,session:r,timeoutContext:n},this.options.responseType)}};Sl.RunCommandOperation=sw;var ow=class extends qM.AbstractOperation{constructor(e,r){super(r),this.command=e,this.options=r,this.ns=new Dne.MongoDBNamespace("admin","$cmd")}get commandName(){return"runCommand"}async execute(e,r,n){return this.server=e,await e.command(this.ns,this.command,{...this.options,readPreference:this.readPreference,session:r,timeoutContext:n})}};Sl.RunAdminCommandOperation=ow});var jM=y(fm=>{"use strict";f();Object.defineProperty(fm,"__esModule",{value:!0});fm.RunCommandCursor=void 0;var Mne=gs(),eh=re(),LM=Zr(),vne=tA(),Bne=bl(),Ine=fe(),Pne=en(),uw=class extends Pne.AbstractCursor{setComment(e){return this.getMoreOptions.comment=e,this}setMaxTimeMS(e){return this.getMoreOptions.maxAwaitTimeMS=e,this}setBatchSize(e){return this.getMoreOptions.batchSize=e,this}clone(){throw new eh.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(e){throw new eh.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(e,r){throw new eh.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(e){throw new eh.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(e){throw new eh.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(e,r,n={}){super(e.client,(0,Ine.ns)(e.namespace),n),this.getMoreOptions={},this.db=e,this.command=Object.freeze({...r})}async _initialize(e){let r=new Bne.RunCommandOperation(this.db,this.command,{...this.cursorOptions,session:e,readPreference:this.cursorOptions.readPreference,responseType:Mne.CursorResponse}),n=await(0,LM.executeOperation)(this.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}async getMore(e){let r=new vne.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return await(0,LM.executeOperation)(this.client,r,this.timeoutContext)}};fm.RunCommandCursor=uw});var UM=y(hm=>{"use strict";f();Object.defineProperty(hm,"__esModule",{value:!0});hm.CollectionsOperation=void 0;var Nne=Za(),Rne=nt(),aw=class extends Rne.AbstractOperation{constructor(e,r){super(r),this.options=r,this.db=e}get commandName(){return"listCollections"}async execute(e,r){let n=await this.db.listCollections({},{...this.options,nameOnly:!0,readPreference:this.readPreference,session:r}).toArray(),i=[];for(let{name:s}of n)s.includes("$")||i.push(new Nne.Collection(this.db,s,this.db.s.options));return i}};hm.CollectionsOperation=aw});var WM=y(pm=>{"use strict";f();Object.defineProperty(pm,"__esModule",{value:!0});pm.CreateCollectionOperation=void 0;var VM=ja(),xne=Za(),Fne=re(),$ne=Lt(),kne=Zf(),zM=nt(),qne=new Set(["w","wtimeout","timeoutMS","j","fsync","autoIndexId","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),Lne="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.",dm=class t extends $ne.CommandOperation{constructor(e,r,n={}){super(e,n),this.options=n,this.db=e,this.name=r}get commandName(){return"create"}async execute(e,r,n){let i=this.db,s=this.name,o=this.options,u=o.encryptedFields??i.client.s.options.autoEncryption?.encryptedFieldsMap?.[`${i.databaseName}.${s}`];if(u){if(!e.loadBalanced&&e.description.maxWireVersion<VM.MIN_SUPPORTED_QE_WIRE_VERSION)throw new Fne.MongoCompatibilityError(`${Lne} The minimum server version required is ${VM.MIN_SUPPORTED_QE_SERVER_VERSION}`);let c=u.escCollection??`enxcol_.${s}.esc`,l=u.ecocCollection??`enxcol_.${s}.ecoc`;for(let h of[c,l])await new t(i,h,{clusteredIndex:{key:{_id:1},unique:!0}}).executeWithoutEncryptedFieldsCheck(e,r,n);o.encryptedFields||(this.options={...this.options,encryptedFields:u})}let a=await this.executeWithoutEncryptedFieldsCheck(e,r,n);return u&&await kne.CreateIndexesOperation.fromIndexSpecification(i,s,{__safeContent__:1},{}).execute(e,r,n),a}async executeWithoutEncryptedFieldsCheck(e,r,n){let i=this.db,s=this.name,o=this.options,u={create:s};for(let a in o)o[a]!=null&&typeof o[a]!="function"&&!qne.has(a)&&(u[a]=o[a]);return await super.executeCommand(e,r,u,n),new xne.Collection(i,s,o)}};pm.CreateCollectionOperation=dm;(0,zM.defineAspects)(dm,[zM.Aspect.WRITE_OPERATION])});var GM=y(mm=>{"use strict";f();Object.defineProperty(mm,"__esModule",{value:!0});mm.ProfilingLevelOperation=void 0;var HM=re(),jne=Lt(),cw=class extends jne.CommandOperation{constructor(e,r){super(e,r),this.options=r}get commandName(){return"profile"}async execute(e,r,n){let i=await super.executeCommand(e,r,{profile:-1},n);if(i.ok===1){let s=i.was;if(s===0)return"off";if(s===1)return"slow_only";if(s===2)return"all";throw new HM.MongoUnexpectedServerResponseError(`Illegal profiling level value ${s}`)}else throw new HM.MongoUnexpectedServerResponseError("Error with profile command")}};mm.ProfilingLevelOperation=cw});var lw=y(gm=>{"use strict";f();Object.defineProperty(gm,"__esModule",{value:!0});gm.RemoveUserOperation=void 0;var Une=Lt(),KM=nt(),ym=class extends Une.CommandOperation{constructor(e,r,n){super(e,n),this.options=n,this.username=r}get commandName(){return"dropUser"}async execute(e,r,n){return await super.executeCommand(e,r,{dropUser:this.username},n),!0}};gm.RemoveUserOperation=ym;(0,KM.defineAspects)(ym,[KM.Aspect.WRITE_OPERATION])});var hw=y(Qs=>{"use strict";f();Object.defineProperty(Qs,"__esModule",{value:!0});Qs.SetProfilingLevelOperation=Qs.ProfilingLevel=void 0;var Vne=re(),zne=fe(),Wne=Lt(),Hne=new Set(["off","slow_only","all"]);Qs.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});var fw=class extends Wne.CommandOperation{constructor(e,r,n){switch(super(e,n),this.options=n,r){case Qs.ProfilingLevel.off:this.profile=0;break;case Qs.ProfilingLevel.slowOnly:this.profile=1;break;case Qs.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=r}get commandName(){return"profile"}async execute(e,r,n){let i=this.level;if(!Hne.has(i))throw new Vne.MongoInvalidArgumentError(`Profiling level must be one of "${(0,zne.enumToString)(Qs.ProfilingLevel)}"`);return await super.executeCommand(e,r,{profile:this.profile},n),i}};Qs.SetProfilingLevelOperation=fw});var QM=y(Em=>{"use strict";f();Object.defineProperty(Em,"__esModule",{value:!0});Em.DbStatsOperation=void 0;var Gne=Lt(),YM=nt(),_m=class extends Gne.CommandOperation{constructor(e,r){super(e,r),this.options=r}get commandName(){return"dbStats"}async execute(e,r,n){let i={dbStats:!0};return this.options.scale!=null&&(i.scale=this.options.scale),await super.executeCommand(e,r,i,n)}};Em.DbStatsOperation=_m;(0,YM.defineAspects)(_m,[YM.Aspect.READ_OPERATION])});var wm=y(Am=>{"use strict";f();Object.defineProperty(Am,"__esModule",{value:!0});Am.Db=void 0;var Kne=dw(),JM=Ye(),Yne=ec(),Qne=Za(),Ol=Xt(),Jne=Jf(),Xne=iw(),Zne=jM(),XM=re(),eie=UM(),tie=WM(),ZM=$A(),Es=Zr(),rie=Zf(),nie=GM(),iie=lw(),sie=zA(),oie=bl(),uie=hw(),aie=QM(),cie=Bi(),ev=Sr(),br=fe(),lie=Qr(),fie=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"],$o=class{constructor(e,r,n){if(n=n??{},n=(0,br.filterOptions)(n,fie),typeof r=="string"&&r.includes("."))throw new XM.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:n,readPreference:ev.ReadPreference.fromOptions(n),bsonOptions:(0,JM.resolveBSONOptions)(n,e),pkFactory:n?.pkFactory??br.DEFAULT_PK_FACTORY,readConcern:cie.ReadConcern.fromOptions(n),writeConcern:lie.WriteConcern.fromOptions(n),namespace:new br.MongoDBNamespace(r)},this.client=e}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.client.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}get timeoutMS(){return this.s.options?.timeoutMS}async createCollection(e,r){return await(0,Es.executeOperation)(this.client,new tie.CreateCollectionOperation(this,e,(0,br.resolveOptions)(this,r)))}async command(e,r){return await(0,Es.executeOperation)(this.client,new oie.RunCommandOperation(this,e,(0,br.resolveOptions)(void 0,{...(0,JM.resolveBSONOptions)(r),timeoutMS:r?.timeoutMS??this.timeoutMS,session:r?.session,readPreference:r?.readPreference})))}aggregate(e=[],r){return new Jne.AggregationCursor(this.client,this.s.namespace,e,(0,br.resolveOptions)(this,r))}admin(){return new Kne.Admin(this)}collection(e,r={}){if(typeof r=="function")throw new XM.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new Qne.Collection(this,e,(0,br.resolveOptions)(this,r))}async stats(e){return await(0,Es.executeOperation)(this.client,new aie.DbStatsOperation(this,(0,br.resolveOptions)(this,e)))}listCollections(e={},r={}){return new Xne.ListCollectionsCursor(this,e,(0,br.resolveOptions)(this,r))}async renameCollection(e,r,n){return await(0,Es.executeOperation)(this.client,new sie.RenameOperation(this.collection(e),r,(0,br.resolveOptions)(void 0,{...n,new_collection:!0,readPreference:ev.ReadPreference.primary})))}async dropCollection(e,r){return await(0,Es.executeOperation)(this.client,new ZM.DropCollectionOperation(this,e,(0,br.resolveOptions)(this,r)))}async dropDatabase(e){return await(0,Es.executeOperation)(this.client,new ZM.DropDatabaseOperation(this,(0,br.resolveOptions)(this,e)))}async collections(e){return await(0,Es.executeOperation)(this.client,new eie.CollectionsOperation(this,(0,br.resolveOptions)(this,e)))}async createIndex(e,r,n){return(await(0,Es.executeOperation)(this.client,rie.CreateIndexesOperation.fromIndexSpecification(this,e,r,n)))[0]}async removeUser(e,r){return await(0,Es.executeOperation)(this.client,new iie.RemoveUserOperation(this,e,(0,br.resolveOptions)(this,r)))}async setProfilingLevel(e,r){return await(0,Es.executeOperation)(this.client,new uie.SetProfilingLevelOperation(this,e,(0,br.resolveOptions)(this,r)))}async profilingLevel(e){return await(0,Es.executeOperation)(this.client,new nie.ProfilingLevelOperation(this,(0,br.resolveOptions)(this,e)))}async indexInformation(e,r){return await this.collection(e).indexInformation((0,br.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new Yne.ChangeStream(this,e,(0,br.resolveOptions)(this,r))}runCursorCommand(e,r){return new Zne.RunCommandCursor(this,e,r)}};Am.Db=$o;$o.SYSTEM_NAMESPACE_COLLECTION=Ol.SYSTEM_NAMESPACE_COLLECTION;$o.SYSTEM_INDEX_COLLECTION=Ol.SYSTEM_INDEX_COLLECTION;$o.SYSTEM_PROFILE_COLLECTION=Ol.SYSTEM_PROFILE_COLLECTION;$o.SYSTEM_USER_COLLECTION=Ol.SYSTEM_USER_COLLECTION;$o.SYSTEM_COMMAND_COLLECTION=Ol.SYSTEM_COMMAND_COLLECTION;$o.SYSTEM_JS_COLLECTION=Ol.SYSTEM_JS_COLLECTION});var ec=y(bm=>{"use strict";f();Object.defineProperty(bm,"__esModule",{value:!0});bm.ChangeStream=void 0;var hie=Za(),As=Xt(),die=en(),pie=rw(),mie=wm(),Or=re(),yie=Lu(),gie=fi(),_ie=Dl(),Eie=Jr(),Js=fe(),Cl=Symbol("cursorStream"),Tl=Symbol("closed"),th=Symbol("mode"),Aie=["resumeAfter","startAfter","startAtOperationTime","fullDocument","fullDocumentBeforeChange","showExpandedEvents"],tc={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},wie=[As.RESUME_TOKEN_CHANGED,As.END,As.CLOSE],Sie="A change stream document has been received that lacks a resume token (_id).",Sm="ChangeStream is closed",$i=class t extends gie.TypedEventEmitter{async asyncDispose(){await this.close()}constructor(e,r=[],n={}){super(),this.pipeline=r,this.options={...n};let i;if(delete this.options.writeConcern,e instanceof hie.Collection)this.type=tc.COLLECTION,i=e.s.db.client.options.serverSelectionTimeoutMS;else if(e instanceof mie.Db)this.type=tc.DATABASE,i=e.client.options.serverSelectionTimeoutMS;else if(e instanceof yie.MongoClient)this.type=tc.CLUSTER,i=e.options.serverSelectionTimeoutMS;else throw new Or.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");this.contextOwner=Symbol(),this.parent=e,this.namespace=e.s.namespace,!this.options.readPreference&&e.readPreference&&(this.options.readPreference=e.readPreference),this.cursor=this._createChangeStreamCursor(n),this[Tl]=!1,this[th]=!1,this.on("newListener",s=>{s==="change"&&this.cursor&&this.listenerCount("change")===0&&this._streamEvents(this.cursor)}),this.on("removeListener",s=>{s==="change"&&this.listenerCount("change")===0&&this.cursor&&this[Cl]?.removeAllListeners("data")}),this.options.timeoutMS!=null&&(this.timeoutContext=new Eie.CSOTTimeoutContext({timeoutMS:this.options.timeoutMS,serverSelectionTimeoutMS:i}))}get cursorStream(){return this[Cl]}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{return await this.cursor.hasNext()}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof Or.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Js.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async next(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{let e=await this.cursor.next();return this._processChange(e??null)}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof Or.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Js.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async tryNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{return await this.cursor.tryNext()??null}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof Or.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Js.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async*[Symbol.asyncIterator](){if(!this.closed)try{for(;;)yield await this.next()}finally{try{await this.close()}catch(e){(0,Js.squashError)(e)}}}get closed(){return this[Tl]||this.cursor.closed}async close(){this.timeoutContext?.clear(),this.timeoutContext=void 0,this[Tl]=!0;let e=this.cursor;try{await e.close()}finally{this._endStream()}}stream(e){if(this.closed)throw new Or.MongoChangeStreamError(Sm);return this.streamOptions=e,this.cursor.stream(e)}_setIsEmitter(){if(this[th]==="iterator")throw new Or.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this[th]="emitter"}_setIsIterator(){if(this[th]==="emitter")throw new Or.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this[th]="iterator"}_createChangeStreamCursor(e){let r=(0,Js.filterOptions)(e,Aie);this.type===tc.CLUSTER&&(r.allChangesForCluster=!0);let n=[{$changeStream:r},...this.pipeline],i=this.type===tc.CLUSTER?this.parent:this.type===tc.DATABASE?this.parent.client:this.type===tc.COLLECTION?this.parent.client:null;if(i==null)throw new Or.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);let s=new pie.ChangeStreamCursor(i,this.namespace,n,{...e,timeoutContext:this.timeoutContext?new die.CursorTimeoutContext(this.timeoutContext,this.contextOwner):void 0});for(let o of wie)s.on(o,u=>this.emit(o,u));return this.listenerCount(t.CHANGE)>0&&this._streamEvents(s),s}_closeEmitterModeWithError(e){this.emit(t.ERROR,e),this.close().then(void 0,Js.squashError)}_streamEvents(e){this._setIsEmitter();let r=this[Cl]??e.stream();this[Cl]=r,r.on("data",n=>{try{let i=this._processChange(n);this.emit(t.CHANGE,i)}catch(i){this.emit(t.ERROR,i)}this.timeoutContext?.refresh()}),r.on("error",n=>this._processErrorStreamMode(n,this.cursor.id!=null))}_endStream(){let e=this[Cl];e&&(["data","close","end","error"].forEach(r=>e.removeAllListeners(r)),e.destroy()),this[Cl]=void 0}_processChange(e){if(this[Tl])throw new Or.MongoAPIError(Sm);if(e==null)throw new Or.MongoRuntimeError(Sm);if(e&&!e._id)throw new Or.MongoChangeStreamError(Sie);return this.cursor.cacheResumeToken(e._id),this.options.startAtOperationTime=void 0,e}_processErrorStreamMode(e,r){this[Tl]||(r&&((0,Or.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof Or.MongoOperationTimeoutError)?(this._endStream(),this.cursor.close().then(()=>this._resume(e),n=>((0,Js.squashError)(n),this._resume(e))).then(()=>{e instanceof Or.MongoOperationTimeoutError&&this.emit(t.ERROR,e)},()=>this._closeEmitterModeWithError(e))):this._closeEmitterModeWithError(e))}async _processErrorIteratorMode(e,r){if(this[Tl])throw new Or.MongoAPIError(Sm);if(r&&((0,Or.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof Or.MongoOperationTimeoutError)){try{await this.cursor.close()}catch(n){(0,Js.squashError)(n)}if(await this._resume(e),e instanceof Or.MongoOperationTimeoutError)throw e}else{try{await this.close()}catch(n){(0,Js.squashError)(n)}throw e}}async _resume(e){this.timeoutContext?.refresh();let r=(0,Js.getTopology)(this.parent);try{await r.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream",timeoutContext:this.timeoutContext}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),e}}};bm.ChangeStream=$i;$i.RESPONSE=As.RESPONSE;$i.MORE=As.MORE;$i.INIT=As.INIT;$i.CLOSE=As.CLOSE;$i.CHANGE=As.CHANGE;$i.END=As.END;$i.ERROR=As.ERROR;$i.RESUME_TOKEN_CHANGED=As.RESUME_TOKEN_CHANGED;(0,_ie.configureResourceManagement)($i.prototype)});var iv=y(ko=>{"use strict";f();Object.defineProperty(ko,"__esModule",{value:!0});var tv=require("buffer"),rc={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};ko.ERRORS=rc;function bie(t){if(!tv.Buffer.isEncoding(t))throw new Error(rc.INVALID_ENCODING)}ko.checkEncoding=bie;function rv(t){return typeof t=="number"&&isFinite(t)&&Die(t)}ko.isFiniteInteger=rv;function nv(t,e){if(typeof t=="number"){if(!rv(t)||t<0)throw new Error(e?rc.INVALID_OFFSET:rc.INVALID_LENGTH)}else throw new Error(e?rc.INVALID_OFFSET_NON_NUMBER:rc.INVALID_LENGTH_NON_NUMBER)}function Oie(t){nv(t,!1)}ko.checkLengthValue=Oie;function Cie(t){nv(t,!0)}ko.checkOffsetValue=Cie;function Tie(t,e){if(t<0||t>e.length)throw new Error(rc.INVALID_TARGET_OFFSET)}ko.checkTargetOffset=Tie;function Die(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function Mie(t){if(typeof BigInt>"u")throw new Error("Platform does not support JS BigInt type.");if(typeof tv.Buffer.prototype[t]>"u")throw new Error(`Platform does not support Buffer.prototype.${t}.`)}ko.bigIntAndBufferInt64Check=Mie});var ov=y(mw=>{"use strict";f();Object.defineProperty(mw,"__esModule",{value:!0});var Ie=iv(),sv=4096,vie="utf8",pw=class t{constructor(e){if(this.length=0,this._encoding=vie,this._writeOffset=0,this._readOffset=0,t.isSmartBufferOptions(e))if(e.encoding&&(Ie.checkEncoding(e.encoding),this._encoding=e.encoding),e.size)if(Ie.isFiniteInteger(e.size)&&e.size>0)this._buff=Buffer.allocUnsafe(e.size);else throw new Error(Ie.ERRORS.INVALID_SMARTBUFFER_SIZE);else if(e.buff)if(Buffer.isBuffer(e.buff))this._buff=e.buff,this.length=e.buff.length;else throw new Error(Ie.ERRORS.INVALID_SMARTBUFFER_BUFFER);else this._buff=Buffer.allocUnsafe(sv);else{if(typeof e<"u")throw new Error(Ie.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=Buffer.allocUnsafe(sv)}}static fromSize(e,r){return new this({size:e,encoding:r})}static fromBuffer(e,r){return new this({buff:e,encoding:r})}static fromOptions(e){return new this(e)}static isSmartBufferOptions(e){let r=e;return r&&(r.encoding!==void 0||r.size!==void 0||r.buff!==void 0)}readInt8(e){return this._readNumberValue(Buffer.prototype.readInt8,1,e)}readInt16BE(e){return this._readNumberValue(Buffer.prototype.readInt16BE,2,e)}readInt16LE(e){return this._readNumberValue(Buffer.prototype.readInt16LE,2,e)}readInt32BE(e){return this._readNumberValue(Buffer.prototype.readInt32BE,4,e)}readInt32LE(e){return this._readNumberValue(Buffer.prototype.readInt32LE,4,e)}readBigInt64BE(e){return Ie.bigIntAndBufferInt64Check("readBigInt64BE"),this._readNumberValue(Buffer.prototype.readBigInt64BE,8,e)}readBigInt64LE(e){return Ie.bigIntAndBufferInt64Check("readBigInt64LE"),this._readNumberValue(Buffer.prototype.readBigInt64LE,8,e)}writeInt8(e,r){return this._writeNumberValue(Buffer.prototype.writeInt8,1,e,r),this}insertInt8(e,r){return this._insertNumberValue(Buffer.prototype.writeInt8,1,e,r)}writeInt16BE(e,r){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,e,r)}insertInt16BE(e,r){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,e,r)}writeInt16LE(e,r){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,e,r)}insertInt16LE(e,r){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,e,r)}writeInt32BE(e,r){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,e,r)}insertInt32BE(e,r){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,e,r)}writeInt32LE(e,r){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,e,r)}insertInt32LE(e,r){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,e,r)}writeBigInt64BE(e,r){return Ie.bigIntAndBufferInt64Check("writeBigInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigInt64BE,8,e,r)}insertBigInt64BE(e,r){return Ie.bigIntAndBufferInt64Check("writeBigInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigInt64BE,8,e,r)}writeBigInt64LE(e,r){return Ie.bigIntAndBufferInt64Check("writeBigInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigInt64LE,8,e,r)}insertBigInt64LE(e,r){return Ie.bigIntAndBufferInt64Check("writeBigInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigInt64LE,8,e,r)}readUInt8(e){return this._readNumberValue(Buffer.prototype.readUInt8,1,e)}readUInt16BE(e){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,e)}readUInt16LE(e){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,e)}readUInt32BE(e){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,e)}readUInt32LE(e){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,e)}readBigUInt64BE(e){return Ie.bigIntAndBufferInt64Check("readBigUInt64BE"),this._readNumberValue(Buffer.prototype.readBigUInt64BE,8,e)}readBigUInt64LE(e){return Ie.bigIntAndBufferInt64Check("readBigUInt64LE"),this._readNumberValue(Buffer.prototype.readBigUInt64LE,8,e)}writeUInt8(e,r){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,e,r)}insertUInt8(e,r){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,e,r)}writeUInt16BE(e,r){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,e,r)}insertUInt16BE(e,r){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,e,r)}writeUInt16LE(e,r){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,e,r)}insertUInt16LE(e,r){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,e,r)}writeUInt32BE(e,r){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,e,r)}insertUInt32BE(e,r){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,e,r)}writeUInt32LE(e,r){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,e,r)}insertUInt32LE(e,r){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,e,r)}writeBigUInt64BE(e,r){return Ie.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64BE,8,e,r)}insertBigUInt64BE(e,r){return Ie.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64BE,8,e,r)}writeBigUInt64LE(e,r){return Ie.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64LE,8,e,r)}insertBigUInt64LE(e,r){return Ie.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64LE,8,e,r)}readFloatBE(e){return this._readNumberValue(Buffer.prototype.readFloatBE,4,e)}readFloatLE(e){return this._readNumberValue(Buffer.prototype.readFloatLE,4,e)}writeFloatBE(e,r){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,e,r)}insertFloatBE(e,r){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,e,r)}writeFloatLE(e,r){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,e,r)}insertFloatLE(e,r){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,e,r)}readDoubleBE(e){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,e)}readDoubleLE(e){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,e)}writeDoubleBE(e,r){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,e,r)}insertDoubleBE(e,r){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,e,r)}writeDoubleLE(e,r){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,e,r)}insertDoubleLE(e,r){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,e,r)}readString(e,r){let n;typeof e=="number"?(Ie.checkLengthValue(e),n=Math.min(e,this.length-this._readOffset)):(r=e,n=this.length-this._readOffset),typeof r<"u"&&Ie.checkEncoding(r);let i=this._buff.slice(this._readOffset,this._readOffset+n).toString(r||this._encoding);return this._readOffset+=n,i}insertString(e,r,n){return Ie.checkOffsetValue(r),this._handleString(e,!0,r,n)}writeString(e,r,n){return this._handleString(e,!1,r,n)}readStringNT(e){typeof e<"u"&&Ie.checkEncoding(e);let r=this.length;for(let i=this._readOffset;i<this.length;i++)if(this._buff[i]===0){r=i;break}let n=this._buff.slice(this._readOffset,r);return this._readOffset=r+1,n.toString(e||this._encoding)}insertStringNT(e,r,n){return Ie.checkOffsetValue(r),this.insertString(e,r,n),this.insertUInt8(0,r+e.length),this}writeStringNT(e,r,n){return this.writeString(e,r,n),this.writeUInt8(0,typeof r=="number"?r+e.length:this.writeOffset),this}readBuffer(e){typeof e<"u"&&Ie.checkLengthValue(e);let r=typeof e=="number"?e:this.length,n=Math.min(this.length,this._readOffset+r),i=this._buff.slice(this._readOffset,n);return this._readOffset=n,i}insertBuffer(e,r){return Ie.checkOffsetValue(r),this._handleBuffer(e,!0,r)}writeBuffer(e,r){return this._handleBuffer(e,!1,r)}readBufferNT(){let e=this.length;for(let n=this._readOffset;n<this.length;n++)if(this._buff[n]===0){e=n;break}let r=this._buff.slice(this._readOffset,e);return this._readOffset=e+1,r}insertBufferNT(e,r){return Ie.checkOffsetValue(r),this.insertBuffer(e,r),this.insertUInt8(0,r+e.length),this}writeBufferNT(e,r){return typeof r<"u"&&Ie.checkOffsetValue(r),this.writeBuffer(e,r),this.writeUInt8(0,typeof r=="number"?r+e.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(e){Ie.checkOffsetValue(e),Ie.checkTargetOffset(e,this),this._readOffset=e}get writeOffset(){return this._writeOffset}set writeOffset(e){Ie.checkOffsetValue(e),Ie.checkTargetOffset(e,this),this._writeOffset=e}get encoding(){return this._encoding}set encoding(e){Ie.checkEncoding(e),this._encoding=e}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(e){let r=typeof e=="string"?e:this._encoding;return Ie.checkEncoding(r),this._buff.toString(r,0,this.length)}destroy(){return this.clear(),this}_handleString(e,r,n,i){let s=this._writeOffset,o=this._encoding;typeof n=="number"?s=n:typeof n=="string"&&(Ie.checkEncoding(n),o=n),typeof i=="string"&&(Ie.checkEncoding(i),o=i);let u=Buffer.byteLength(e,o);return r?this.ensureInsertable(u,s):this._ensureWriteable(u,s),this._buff.write(e,s,u,o),r?this._writeOffset+=u:typeof n=="number"?this._writeOffset=Math.max(this._writeOffset,s+u):this._writeOffset+=u,this}_handleBuffer(e,r,n){let i=typeof n=="number"?n:this._writeOffset;return r?this.ensureInsertable(e.length,i):this._ensureWriteable(e.length,i),e.copy(this._buff,i),r?this._writeOffset+=e.length:typeof n=="number"?this._writeOffset=Math.max(this._writeOffset,i+e.length):this._writeOffset+=e.length,this}ensureReadable(e,r){let n=this._readOffset;if(typeof r<"u"&&(Ie.checkOffsetValue(r),n=r),n<0||n+e>this.length)throw new Error(Ie.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(e,r){Ie.checkOffsetValue(r),this._ensureCapacity(this.length+e),r<this.length&&this._buff.copy(this._buff,r+e,r,this._buff.length),r+e>this.length?this.length=r+e:this.length+=e}_ensureWriteable(e,r){let n=typeof r=="number"?r:this._writeOffset;this._ensureCapacity(n+e),n+e>this.length&&(this.length=n+e)}_ensureCapacity(e){let r=this._buff.length;if(e>r){let n=this._buff,i=r*3/2+1;i<e&&(i=e),this._buff=Buffer.allocUnsafe(i),n.copy(this._buff,0,0,r)}}_readNumberValue(e,r,n){this.ensureReadable(r,n);let i=e.call(this._buff,typeof n=="number"?n:this._readOffset);return typeof n>"u"&&(this._readOffset+=r),i}_insertNumberValue(e,r,n,i){return Ie.checkOffsetValue(i),this.ensureInsertable(r,i),e.call(this._buff,n,i),this._writeOffset+=r,this}_writeNumberValue(e,r,n,i){if(typeof i=="number"){if(i<0)throw new Error(Ie.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);Ie.checkOffsetValue(i)}let s=typeof i=="number"?i:this._writeOffset;return this._ensureWriteable(r,s),e.call(this._buff,n,s),typeof i=="number"?this._writeOffset=Math.max(this._writeOffset,s+r):this._writeOffset+=r,this}};mw.SmartBuffer=pw});var yw=y(At=>{"use strict";f();Object.defineProperty(At,"__esModule",{value:!0});At.SOCKS5_NO_ACCEPTABLE_AUTH=At.SOCKS5_CUSTOM_AUTH_END=At.SOCKS5_CUSTOM_AUTH_START=At.SOCKS_INCOMING_PACKET_SIZES=At.SocksClientState=At.Socks5Response=At.Socks5HostType=At.Socks5Auth=At.Socks4Response=At.SocksCommand=At.ERRORS=At.DEFAULT_TIMEOUT=void 0;var Bie=3e4;At.DEFAULT_TIMEOUT=Bie;var Iie={InvalidSocksCommand:"An invalid SOCKS command was provided. Valid options are connect, bind, and associate.",InvalidSocksCommandForOperation:"An invalid SOCKS command was provided. Only a subset of commands are supported for this operation.",InvalidSocksCommandChain:"An invalid SOCKS command was provided. Chaining currently only supports the connect command.",InvalidSocksClientOptionsDestination:"An invalid destination host was provided.",InvalidSocksClientOptionsExistingSocket:"An invalid existing socket was provided. This should be an instance of stream.Duplex.",InvalidSocksClientOptionsProxy:"Invalid SOCKS proxy details were provided.",InvalidSocksClientOptionsTimeout:"An invalid timeout value was provided. Please enter a value above 0 (in ms).",InvalidSocksClientOptionsProxiesLength:"At least two socks proxies must be provided for chaining.",InvalidSocksClientOptionsCustomAuthRange:"Custom auth must be a value between 0x80 and 0xFE.",InvalidSocksClientOptionsCustomAuthOptions:"When a custom_auth_method is provided, custom_auth_request_handler, custom_auth_response_size, and custom_auth_response_handler must also be provided and valid.",NegotiationError:"Negotiation error",SocketClosed:"Socket closed",ProxyConnectionTimedOut:"Proxy connection timed out",InternalError:"SocksClient internal error (this should not happen)",InvalidSocks4HandshakeResponse:"Received invalid Socks4 handshake response",Socks4ProxyRejectedConnection:"Socks4 Proxy rejected connection",InvalidSocks4IncomingConnectionResponse:"Socks4 invalid incoming connection response",Socks4ProxyRejectedIncomingBoundConnection:"Socks4 Proxy rejected incoming bound connection",InvalidSocks5InitialHandshakeResponse:"Received invalid Socks5 initial handshake response",InvalidSocks5IntiailHandshakeSocksVersion:"Received invalid Socks5 initial handshake (invalid socks version)",InvalidSocks5InitialHandshakeNoAcceptedAuthType:"Received invalid Socks5 initial handshake (no accepted authentication type)",InvalidSocks5InitialHandshakeUnknownAuthType:"Received invalid Socks5 initial handshake (unknown authentication type)",Socks5AuthenticationFailed:"Socks5 Authentication failed",InvalidSocks5FinalHandshake:"Received invalid Socks5 final handshake response",InvalidSocks5FinalHandshakeRejected:"Socks5 proxy rejected connection",InvalidSocks5IncomingConnectionResponse:"Received invalid Socks5 incoming connection response",Socks5ProxyRejectedIncomingBoundConnection:"Socks5 Proxy rejected incoming bound connection"};At.ERRORS=Iie;var Pie={Socks5InitialHandshakeResponse:2,Socks5UserPassAuthenticationResponse:2,Socks5ResponseHeader:5,Socks5ResponseIPv4:10,Socks5ResponseIPv6:22,Socks5ResponseHostname:t=>t+7,Socks4Response:8};At.SOCKS_INCOMING_PACKET_SIZES=Pie;var uv;(function(t){t[t.connect=1]="connect",t[t.bind=2]="bind",t[t.associate=3]="associate"})(uv||(At.SocksCommand=uv={}));var av;(function(t){t[t.Granted=90]="Granted",t[t.Failed=91]="Failed",t[t.Rejected=92]="Rejected",t[t.RejectedIdent=93]="RejectedIdent"})(av||(At.Socks4Response=av={}));var cv;(function(t){t[t.NoAuth=0]="NoAuth",t[t.GSSApi=1]="GSSApi",t[t.UserPass=2]="UserPass"})(cv||(At.Socks5Auth=cv={}));var Nie=128;At.SOCKS5_CUSTOM_AUTH_START=Nie;var Rie=254;At.SOCKS5_CUSTOM_AUTH_END=Rie;var xie=255;At.SOCKS5_NO_ACCEPTABLE_AUTH=xie;var lv;(function(t){t[t.Granted=0]="Granted",t[t.Failure=1]="Failure",t[t.NotAllowed=2]="NotAllowed",t[t.NetworkUnreachable=3]="NetworkUnreachable",t[t.HostUnreachable=4]="HostUnreachable",t[t.ConnectionRefused=5]="ConnectionRefused",t[t.TTLExpired=6]="TTLExpired",t[t.CommandNotSupported=7]="CommandNotSupported",t[t.AddressNotSupported=8]="AddressNotSupported"})(lv||(At.Socks5Response=lv={}));var fv;(function(t){t[t.IPv4=1]="IPv4",t[t.Hostname=3]="Hostname",t[t.IPv6=4]="IPv6"})(fv||(At.Socks5HostType=fv={}));var hv;(function(t){t[t.Created=0]="Created",t[t.Connecting=1]="Connecting",t[t.Connected=2]="Connected",t[t.SentInitialHandshake=3]="SentInitialHandshake",t[t.ReceivedInitialHandshakeResponse=4]="ReceivedInitialHandshakeResponse",t[t.SentAuthentication=5]="SentAuthentication",t[t.ReceivedAuthenticationResponse=6]="ReceivedAuthenticationResponse",t[t.SentFinalHandshake=7]="SentFinalHandshake",t[t.ReceivedFinalResponse=8]="ReceivedFinalResponse",t[t.BoundWaitingForConnection=9]="BoundWaitingForConnection",t[t.Established=10]="Established",t[t.Disconnected=11]="Disconnected",t[t.Error=99]="Error"})(hv||(At.SocksClientState=hv={}))});var _w=y(Ml=>{"use strict";f();Object.defineProperty(Ml,"__esModule",{value:!0});Ml.shuffleArray=Ml.SocksClientError=void 0;var gw=class extends Error{constructor(e,r){super(e),this.options=r}};Ml.SocksClientError=gw;function Fie(t){for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}}Ml.shuffleArray=Fie});var Ew=y(vl=>{"use strict";f();Object.defineProperty(vl,"__esModule",{value:!0});vl.isCorrect=vl.isInSubnet=void 0;function $ie(t){return this.subnetMask<t.subnetMask?!1:this.mask(t.subnetMask)===t.mask()}vl.isInSubnet=$ie;function kie(t){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===t&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}vl.isCorrect=kie});var Aw=y(Xs=>{"use strict";f();Object.defineProperty(Xs,"__esModule",{value:!0});Xs.RE_SUBNET_STRING=Xs.RE_ADDRESS=Xs.GROUPS=Xs.BITS=void 0;Xs.BITS=32;Xs.GROUPS=4;Xs.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g;Xs.RE_SUBNET_STRING=/\/\d{1,2}$/});var Cm=y(Om=>{"use strict";f();Object.defineProperty(Om,"__esModule",{value:!0});Om.AddressError=void 0;var ww=class extends Error{constructor(e,r){super(e),this.name="AddressError",r!==null&&(this.parseMessage=r)}};Om.AddressError=ww});var Sw=y((Tm,dv)=>{f();(function(){var t,e=0xdeadbeefcafe,r=(e&16777215)==15715070;function n(E,A,b){E!=null&&(typeof E=="number"?this.fromNumber(E,A,b):A==null&&typeof E!="string"?this.fromString(E,256):this.fromString(E,A))}function i(){return new n(null)}function s(E,A,b,I,Y,Q){for(;--Q>=0;){var ue=A*this[E++]+b[I]+Y;Y=Math.floor(ue/67108864),b[I++]=ue&67108863}return Y}function o(E,A,b,I,Y,Q){for(var ue=A&32767,le=A>>15;--Q>=0;){var Mt=this[E]&32767,Ar=this[E++]>>15,Ci=le*Mt+Ar*ue;Mt=ue*Mt+((Ci&32767)<<15)+b[I]+(Y&1073741823),Y=(Mt>>>30)+(Ci>>>15)+le*Ar+(Y>>>30),b[I++]=Mt&1073741823}return Y}function u(E,A,b,I,Y,Q){for(var ue=A&16383,le=A>>14;--Q>=0;){var Mt=this[E]&16383,Ar=this[E++]>>14,Ci=le*Mt+Ar*ue;Mt=ue*Mt+((Ci&16383)<<14)+b[I]+Y,Y=(Mt>>28)+(Ci>>14)+le*Ar,b[I++]=Mt&268435455}return Y}var a=typeof navigator<"u";a&&r&&navigator.appName=="Microsoft Internet Explorer"?(n.prototype.am=o,t=30):a&&r&&navigator.appName!="Netscape"?(n.prototype.am=s,t=26):(n.prototype.am=u,t=28),n.prototype.DB=t,n.prototype.DM=(1<<t)-1,n.prototype.DV=1<<t;var c=52;n.prototype.FV=Math.pow(2,c),n.prototype.F1=c-t,n.prototype.F2=2*t-c;var l="0123456789abcdefghijklmnopqrstuvwxyz",h=new Array,d,p;for(d=48,p=0;p<=9;++p)h[d++]=p;for(d=97,p=10;p<36;++p)h[d++]=p;for(d=65,p=10;p<36;++p)h[d++]=p;function m(E){return l.charAt(E)}function g(E,A){var b=h[E.charCodeAt(A)];return b??-1}function _(E){for(var A=this.t-1;A>=0;--A)E[A]=this[A];E.t=this.t,E.s=this.s}function w(E){this.t=1,this.s=E<0?-1:0,E>0?this[0]=E:E<-1?this[0]=E+this.DV:this.t=0}function S(E){var A=i();return A.fromInt(E),A}function C(E,A){var b;if(A==16)b=4;else if(A==8)b=3;else if(A==256)b=8;else if(A==2)b=1;else if(A==32)b=5;else if(A==4)b=2;else{this.fromRadix(E,A);return}this.t=0,this.s=0;for(var I=E.length,Y=!1,Q=0;--I>=0;){var ue=b==8?E[I]&255:g(E,I);if(ue<0){E.charAt(I)=="-"&&(Y=!0);continue}Y=!1,Q==0?this[this.t++]=ue:Q+b>this.DB?(this[this.t-1]|=(ue&(1<<this.DB-Q)-1)<<Q,this[this.t++]=ue>>this.DB-Q):this[this.t-1]|=ue<<Q,Q+=b,Q>=this.DB&&(Q-=this.DB)}b==8&&E[0]&128&&(this.s=-1,Q>0&&(this[this.t-1]|=(1<<this.DB-Q)-1<<Q)),this.clamp(),Y&&n.ZERO.subTo(this,this)}function O(){for(var E=this.s&this.DM;this.t>0&&this[this.t-1]==E;)--this.t}function B(E){if(this.s<0)return"-"+this.negate().toString(E);var A;if(E==16)A=4;else if(E==8)A=3;else if(E==2)A=1;else if(E==32)A=5;else if(E==4)A=2;else return this.toRadix(E);var b=(1<<A)-1,I,Y=!1,Q="",ue=this.t,le=this.DB-ue*this.DB%A;if(ue-- >0)for(le<this.DB&&(I=this[ue]>>le)>0&&(Y=!0,Q=m(I));ue>=0;)le<A?(I=(this[ue]&(1<<le)-1)<<A-le,I|=this[--ue]>>(le+=this.DB-A)):(I=this[ue]>>(le-=A)&b,le<=0&&(le+=this.DB,--ue)),I>0&&(Y=!0),Y&&(Q+=m(I));return Y?Q:"0"}function P(){var E=i();return n.ZERO.subTo(this,E),E}function v(){return this.s<0?this.negate():this}function j(E){var A=this.s-E.s;if(A!=0)return A;var b=this.t;if(A=b-E.t,A!=0)return this.s<0?-A:A;for(;--b>=0;)if((A=this[b]-E[b])!=0)return A;return 0}function k(E){var A=1,b;return(b=E>>>16)!=0&&(E=b,A+=16),(b=E>>8)!=0&&(E=b,A+=8),(b=E>>4)!=0&&(E=b,A+=4),(b=E>>2)!=0&&(E=b,A+=2),(b=E>>1)!=0&&(E=b,A+=1),A}function q(){return this.t<=0?0:this.DB*(this.t-1)+k(this[this.t-1]^this.s&this.DM)}function R(E,A){var b;for(b=this.t-1;b>=0;--b)A[b+E]=this[b];for(b=E-1;b>=0;--b)A[b]=0;A.t=this.t+E,A.s=this.s}function F(E,A){for(var b=E;b<this.t;++b)A[b-E]=this[b];A.t=Math.max(this.t-E,0),A.s=this.s}function z(E,A){var b=E%this.DB,I=this.DB-b,Y=(1<<I)-1,Q=Math.floor(E/this.DB),ue=this.s<<b&this.DM,le;for(le=this.t-1;le>=0;--le)A[le+Q+1]=this[le]>>I|ue,ue=(this[le]&Y)<<b;for(le=Q-1;le>=0;--le)A[le]=0;A[Q]=ue,A.t=this.t+Q+1,A.s=this.s,A.clamp()}function J(E,A){A.s=this.s;var b=Math.floor(E/this.DB);if(b>=this.t){A.t=0;return}var I=E%this.DB,Y=this.DB-I,Q=(1<<I)-1;A[0]=this[b]>>I;for(var ue=b+1;ue<this.t;++ue)A[ue-b-1]|=(this[ue]&Q)<<Y,A[ue-b]=this[ue]>>I;I>0&&(A[this.t-b-1]|=(this.s&Q)<<Y),A.t=this.t-b,A.clamp()}function De(E,A){for(var b=0,I=0,Y=Math.min(E.t,this.t);b<Y;)I+=this[b]-E[b],A[b++]=I&this.DM,I>>=this.DB;if(E.t<this.t){for(I-=E.s;b<this.t;)I+=this[b],A[b++]=I&this.DM,I>>=this.DB;I+=this.s}else{for(I+=this.s;b<E.t;)I-=E[b],A[b++]=I&this.DM,I>>=this.DB;I-=E.s}A.s=I<0?-1:0,I<-1?A[b++]=this.DV+I:I>0&&(A[b++]=I),A.t=b,A.clamp()}function W(E,A){var b=this.abs(),I=E.abs(),Y=b.t;for(A.t=Y+I.t;--Y>=0;)A[Y]=0;for(Y=0;Y<I.t;++Y)A[Y+b.t]=b.am(0,I[Y],A,Y,0,b.t);A.s=0,A.clamp(),this.s!=E.s&&n.ZERO.subTo(A,A)}function Z(E){for(var A=this.abs(),b=E.t=2*A.t;--b>=0;)E[b]=0;for(b=0;b<A.t-1;++b){var I=A.am(b,A[b],E,2*b,0,1);(E[b+A.t]+=A.am(b+1,2*A[b],E,2*b+1,I,A.t-b-1))>=A.DV&&(E[b+A.t]-=A.DV,E[b+A.t+1]=1)}E.t>0&&(E[E.t-1]+=A.am(b,A[b],E,2*b,0,1)),E.s=0,E.clamp()}function be(E,A,b){var I=E.abs();if(!(I.t<=0)){var Y=this.abs();if(Y.t<I.t){A?.fromInt(0),b!=null&&this.copyTo(b);return}b==null&&(b=i());var Q=i(),ue=this.s,le=E.s,Mt=this.DB-k(I[I.t-1]);Mt>0?(I.lShiftTo(Mt,Q),Y.lShiftTo(Mt,b)):(I.copyTo(Q),Y.copyTo(b));var Ar=Q.t,Ci=Q[Ar-1];if(Ci!=0){var oi=Ci*(1<<this.F1)+(Ar>1?Q[Ar-2]>>this.F2:0),Co=this.FV/oi,kp=(1<<this.F1)/oi,fs=1<<this.F2,hs=b.t,qp=hs-Ar,Tu=A??i();for(Q.dlShiftTo(qp,Tu),b.compareTo(Tu)>=0&&(b[b.t++]=1,b.subTo(Tu,b)),n.ONE.dlShiftTo(Ar,Tu),Tu.subTo(Q,Q);Q.t<Ar;)Q[Q.t++]=0;for(;--qp>=0;){var w3=b[--hs]==Ci?this.DM:Math.floor(b[hs]*Co+(b[hs-1]+fs)*kp);if((b[hs]+=Q.am(0,w3,b,qp,0,Ar))<w3)for(Q.dlShiftTo(qp,Tu),b.subTo(Tu,b);b[hs]<--w3;)b.subTo(Tu,b)}A!=null&&(b.drShiftTo(Ar,A),ue!=le&&n.ZERO.subTo(A,A)),b.t=Ar,b.clamp(),Mt>0&&b.rShiftTo(Mt,b),ue<0&&n.ZERO.subTo(b,b)}}}function rt(E){var A=i();return this.abs().divRemTo(E,null,A),this.s<0&&A.compareTo(n.ZERO)>0&&E.subTo(A,A),A}function ce(E){this.m=E}function qt(E){return E.s<0||E.compareTo(this.m)>=0?E.mod(this.m):E}function us(E){return E}function Ws(E){E.divRemTo(this.m,null,E)}function bu(E,A,b){E.multiplyTo(A,b),this.reduce(b)}function Jc(E,A){E.squareTo(A),this.reduce(A)}ce.prototype.convert=qt,ce.prototype.revert=us,ce.prototype.reduce=Ws,ce.prototype.mulTo=bu,ce.prototype.sqrTo=Jc;function Ou(){if(this.t<1)return 0;var E=this[0];if(!(E&1))return 0;var A=E&3;return A=A*(2-(E&15)*A)&15,A=A*(2-(E&255)*A)&255,A=A*(2-((E&65535)*A&65535))&65535,A=A*(2-E*A%this.DV)%this.DV,A>0?this.DV-A:-A}function as(E){this.m=E,this.mp=E.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<E.DB-15)-1,this.mt2=2*E.t}function Hr(E){var A=i();return E.abs().dlShiftTo(this.m.t,A),A.divRemTo(this.m,null,A),E.s<0&&A.compareTo(n.ZERO)>0&&this.m.subTo(A,A),A}function Ta(E){var A=i();return E.copyTo(A),this.reduce(A),A}function Xc(E){for(;E.t<=this.mt2;)E[E.t++]=0;for(var A=0;A<this.m.t;++A){var b=E[A]&32767,I=b*this.mpl+((b*this.mph+(E[A]>>15)*this.mpl&this.um)<<15)&E.DM;for(b=A+this.m.t,E[b]+=this.m.am(0,I,E,A,0,this.m.t);E[b]>=E.DV;)E[b]-=E.DV,E[++b]++}E.clamp(),E.drShiftTo(this.m.t,E),E.compareTo(this.m)>=0&&E.subTo(this.m,E)}function Da(E,A){E.squareTo(A),this.reduce(A)}function Ma(E,A,b){E.multiplyTo(A,b),this.reduce(b)}as.prototype.convert=Hr,as.prototype.revert=Ta,as.prototype.reduce=Xc,as.prototype.mulTo=Ma,as.prototype.sqrTo=Da;function So(){return(this.t>0?this[0]&1:this.s)==0}function bo(E,A){if(E>4294967295||E<1)return n.ONE;var b=i(),I=i(),Y=A.convert(this),Q=k(E)-1;for(Y.copyTo(b);--Q>=0;)if(A.sqrTo(b,I),(E&1<<Q)>0)A.mulTo(I,Y,b);else{var ue=b;b=I,I=ue}return A.revert(b)}function Zc(E,A){var b;return E<256||A.isEven()?b=new ce(A):b=new as(A),this.exp(E,b)}n.prototype.copyTo=_,n.prototype.fromInt=w,n.prototype.fromString=C,n.prototype.clamp=O,n.prototype.dlShiftTo=R,n.prototype.drShiftTo=F,n.prototype.lShiftTo=z,n.prototype.rShiftTo=J,n.prototype.subTo=De,n.prototype.multiplyTo=W,n.prototype.squareTo=Z,n.prototype.divRemTo=be,n.prototype.invDigit=Ou,n.prototype.isEven=So,n.prototype.exp=bo,n.prototype.toString=B,n.prototype.negate=P,n.prototype.abs=v,n.prototype.compareTo=j,n.prototype.bitLength=q,n.prototype.mod=rt,n.prototype.modPowInt=Zc,n.ZERO=S(0),n.ONE=S(1);function Hs(){var E=i();return this.copyTo(E),E}function cs(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function Cu(){return this.t==0?this.s:this[0]<<24>>24}function el(){return this.t==0?this.s:this[0]<<16>>16}function va(E){return Math.floor(Math.LN2*this.DB/Math.log(E))}function Dp(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function Mp(E){if(E==null&&(E=10),this.signum()==0||E<2||E>36)return"0";var A=this.chunkSize(E),b=Math.pow(E,A),I=S(b),Y=i(),Q=i(),ue="";for(this.divRemTo(I,Y,Q);Y.signum()>0;)ue=(b+Q.intValue()).toString(E).substr(1)+ue,Y.divRemTo(I,Y,Q);return Q.intValue().toString(E)+ue}function vp(E,A){this.fromInt(0),A==null&&(A=10);for(var b=this.chunkSize(A),I=Math.pow(A,b),Y=!1,Q=0,ue=0,le=0;le<E.length;++le){var Mt=g(E,le);if(Mt<0){E.charAt(le)=="-"&&this.signum()==0&&(Y=!0);continue}ue=A*ue+Mt,++Q>=b&&(this.dMultiply(I),this.dAddOffset(ue,0),Q=0,ue=0)}Q>0&&(this.dMultiply(Math.pow(A,Q)),this.dAddOffset(ue,0)),Y&&n.ZERO.subTo(this,this)}function Bp(E,A,b){if(typeof A=="number")if(E<2)this.fromInt(1);else for(this.fromNumber(E,b),this.testBit(E-1)||this.bitwiseTo(n.ONE.shiftLeft(E-1),Cf,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(A);)this.dAddOffset(2,0),this.bitLength()>E&&this.subTo(n.ONE.shiftLeft(E-1),this);else{var I=new Array,Y=E&7;I.length=(E>>3)+1,A.nextBytes(I),Y>0?I[0]&=(1<<Y)-1:I[0]=0,this.fromString(I,256)}}function Ip(){var E=this.t,A=new Array;A[0]=this.s;var b=this.DB-E*this.DB%8,I,Y=0;if(E-- >0)for(b<this.DB&&(I=this[E]>>b)!=(this.s&this.DM)>>b&&(A[Y++]=I|this.s<<this.DB-b);E>=0;)b<8?(I=(this[E]&(1<<b)-1)<<8-b,I|=this[--E]>>(b+=this.DB-8)):(I=this[E]>>(b-=8)&255,b<=0&&(b+=this.DB,--E)),I&128&&(I|=-256),Y==0&&(this.s&128)!=(I&128)&&++Y,(Y>0||I!=this.s)&&(A[Y++]=I);return A}function Pp(E){return this.compareTo(E)==0}function Np(E){return this.compareTo(E)<0?this:E}function Rp(E){return this.compareTo(E)>0?this:E}function xp(E,A,b){var I,Y,Q=Math.min(E.t,this.t);for(I=0;I<Q;++I)b[I]=A(this[I],E[I]);if(E.t<this.t){for(Y=E.s&this.DM,I=Q;I<this.t;++I)b[I]=A(this[I],Y);b.t=this.t}else{for(Y=this.s&this.DM,I=Q;I<E.t;++I)b[I]=A(Y,E[I]);b.t=E.t}b.s=A(this.s,E.s),b.clamp()}function y3(E,A){return E&A}function Fp(E){var A=i();return this.bitwiseTo(E,y3,A),A}function Cf(E,A){return E|A}function D(E){var A=i();return this.bitwiseTo(E,Cf,A),A}function M(E,A){return E^A}function N(E){var A=i();return this.bitwiseTo(E,M,A),A}function L(E,A){return E&~A}function ne(E){var A=i();return this.bitwiseTo(E,L,A),A}function me(){for(var E=i(),A=0;A<this.t;++A)E[A]=this.DM&~this[A];return E.t=this.t,E.s=~this.s,E}function Oe(E){var A=i();return E<0?this.rShiftTo(-E,A):this.lShiftTo(E,A),A}function Le(E){var A=i();return E<0?this.lShiftTo(-E,A):this.rShiftTo(E,A),A}function _r(E){if(E==0)return-1;var A=0;return E&65535||(E>>=16,A+=16),E&255||(E>>=8,A+=8),E&15||(E>>=4,A+=4),E&3||(E>>=2,A+=2),E&1||++A,A}function pn(){for(var E=0;E<this.t;++E)if(this[E]!=0)return E*this.DB+_r(this[E]);return this.s<0?this.t*this.DB:-1}function Oi(E){for(var A=0;E!=0;)E&=E-1,++A;return A}function Oo(){for(var E=0,A=this.s&this.DM,b=0;b<this.t;++b)E+=Oi(this[b]^A);return E}function g3(E){var A=Math.floor(E/this.DB);return A>=this.t?this.s!=0:(this[A]&1<<E%this.DB)!=0}function EX(E,A){var b=n.ONE.shiftLeft(E);return this.bitwiseTo(b,A,b),b}function AX(E){return this.changeBit(E,Cf)}function wX(E){return this.changeBit(E,L)}function SX(E){return this.changeBit(E,M)}function bX(E,A){for(var b=0,I=0,Y=Math.min(E.t,this.t);b<Y;)I+=this[b]+E[b],A[b++]=I&this.DM,I>>=this.DB;if(E.t<this.t){for(I+=E.s;b<this.t;)I+=this[b],A[b++]=I&this.DM,I>>=this.DB;I+=this.s}else{for(I+=this.s;b<E.t;)I+=E[b],A[b++]=I&this.DM,I>>=this.DB;I+=E.s}A.s=I<0?-1:0,I>0?A[b++]=I:I<-1&&(A[b++]=this.DV+I),A.t=b,A.clamp()}function OX(E){var A=i();return this.addTo(E,A),A}function CX(E){var A=i();return this.subTo(E,A),A}function TX(E){var A=i();return this.multiplyTo(E,A),A}function DX(){var E=i();return this.squareTo(E),E}function MX(E){var A=i();return this.divRemTo(E,A,null),A}function vX(E){var A=i();return this.divRemTo(E,null,A),A}function BX(E){var A=i(),b=i();return this.divRemTo(E,A,b),new Array(A,b)}function IX(E){this[this.t]=this.am(0,E-1,this,0,0,this.t),++this.t,this.clamp()}function PX(E,A){if(E!=0){for(;this.t<=A;)this[this.t++]=0;for(this[A]+=E;this[A]>=this.DV;)this[A]-=this.DV,++A>=this.t&&(this[this.t++]=0),++this[A]}}function Tf(){}function pT(E){return E}function NX(E,A,b){E.multiplyTo(A,b)}function RX(E,A){E.squareTo(A)}Tf.prototype.convert=pT,Tf.prototype.revert=pT,Tf.prototype.mulTo=NX,Tf.prototype.sqrTo=RX;function xX(E){return this.exp(E,new Tf)}function FX(E,A,b){var I=Math.min(this.t+E.t,A);for(b.s=0,b.t=I;I>0;)b[--I]=0;var Y;for(Y=b.t-this.t;I<Y;++I)b[I+this.t]=this.am(0,E[I],b,I,0,this.t);for(Y=Math.min(E.t,A);I<Y;++I)this.am(0,E[I],b,I,0,A-I);b.clamp()}function $X(E,A,b){--A;var I=b.t=this.t+E.t-A;for(b.s=0;--I>=0;)b[I]=0;for(I=Math.max(A-this.t,0);I<E.t;++I)b[this.t+I-A]=this.am(A-I,E[I],b,0,0,this.t+I-A);b.clamp(),b.drShiftTo(1,b)}function Ba(E){this.r2=i(),this.q3=i(),n.ONE.dlShiftTo(2*E.t,this.r2),this.mu=this.r2.divide(E),this.m=E}function kX(E){if(E.s<0||E.t>2*this.m.t)return E.mod(this.m);if(E.compareTo(this.m)<0)return E;var A=i();return E.copyTo(A),this.reduce(A),A}function qX(E){return E}function LX(E){for(E.drShiftTo(this.m.t-1,this.r2),E.t>this.m.t+1&&(E.t=this.m.t+1,E.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);E.compareTo(this.r2)<0;)E.dAddOffset(1,this.m.t+1);for(E.subTo(this.r2,E);E.compareTo(this.m)>=0;)E.subTo(this.m,E)}function jX(E,A){E.squareTo(A),this.reduce(A)}function UX(E,A,b){E.multiplyTo(A,b),this.reduce(b)}Ba.prototype.convert=kX,Ba.prototype.revert=qX,Ba.prototype.reduce=LX,Ba.prototype.mulTo=UX,Ba.prototype.sqrTo=jX;function VX(E,A){var b=E.bitLength(),I,Y=S(1),Q;if(b<=0)return Y;b<18?I=1:b<48?I=3:b<144?I=4:b<768?I=5:I=6,b<8?Q=new ce(A):A.isEven()?Q=new Ba(A):Q=new as(A);var ue=new Array,le=3,Mt=I-1,Ar=(1<<I)-1;if(ue[1]=Q.convert(this),I>1){var Ci=i();for(Q.sqrTo(ue[1],Ci);le<=Ar;)ue[le]=i(),Q.mulTo(Ci,ue[le-2],ue[le]),le+=2}var oi=E.t-1,Co,kp=!0,fs=i(),hs;for(b=k(E[oi])-1;oi>=0;){for(b>=Mt?Co=E[oi]>>b-Mt&Ar:(Co=(E[oi]&(1<<b+1)-1)<<Mt-b,oi>0&&(Co|=E[oi-1]>>this.DB+b-Mt)),le=I;!(Co&1);)Co>>=1,--le;if((b-=le)<0&&(b+=this.DB,--oi),kp)ue[Co].copyTo(Y),kp=!1;else{for(;le>1;)Q.sqrTo(Y,fs),Q.sqrTo(fs,Y),le-=2;le>0?Q.sqrTo(Y,fs):(hs=Y,Y=fs,fs=hs),Q.mulTo(fs,ue[Co],Y)}for(;oi>=0&&!(E[oi]&1<<b);)Q.sqrTo(Y,fs),hs=Y,Y=fs,fs=hs,--b<0&&(b=this.DB-1,--oi)}return Q.revert(Y)}function zX(E){var A=this.s<0?this.negate():this.clone(),b=E.s<0?E.negate():E.clone();if(A.compareTo(b)<0){var I=A;A=b,b=I}var Y=A.getLowestSetBit(),Q=b.getLowestSetBit();if(Q<0)return A;for(Y<Q&&(Q=Y),Q>0&&(A.rShiftTo(Q,A),b.rShiftTo(Q,b));A.signum()>0;)(Y=A.getLowestSetBit())>0&&A.rShiftTo(Y,A),(Y=b.getLowestSetBit())>0&&b.rShiftTo(Y,b),A.compareTo(b)>=0?(A.subTo(b,A),A.rShiftTo(1,A)):(b.subTo(A,b),b.rShiftTo(1,b));return Q>0&&b.lShiftTo(Q,b),b}function WX(E){if(E<=0)return 0;var A=this.DV%E,b=this.s<0?E-1:0;if(this.t>0)if(A==0)b=this[0]%E;else for(var I=this.t-1;I>=0;--I)b=(A*b+this[I])%E;return b}function HX(E){var A=E.isEven();if(this.isEven()&&A||E.signum()==0)return n.ZERO;for(var b=E.clone(),I=this.clone(),Y=S(1),Q=S(0),ue=S(0),le=S(1);b.signum()!=0;){for(;b.isEven();)b.rShiftTo(1,b),A?((!Y.isEven()||!Q.isEven())&&(Y.addTo(this,Y),Q.subTo(E,Q)),Y.rShiftTo(1,Y)):Q.isEven()||Q.subTo(E,Q),Q.rShiftTo(1,Q);for(;I.isEven();)I.rShiftTo(1,I),A?((!ue.isEven()||!le.isEven())&&(ue.addTo(this,ue),le.subTo(E,le)),ue.rShiftTo(1,ue)):le.isEven()||le.subTo(E,le),le.rShiftTo(1,le);b.compareTo(I)>=0?(b.subTo(I,b),A&&Y.subTo(ue,Y),Q.subTo(le,Q)):(I.subTo(b,I),A&&ue.subTo(Y,ue),le.subTo(Q,le))}if(I.compareTo(n.ONE)!=0)return n.ZERO;if(le.compareTo(E)>=0)return le.subtract(E);if(le.signum()<0)le.addTo(E,le);else return le;return le.signum()<0?le.add(E):le}var mn=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],GX=(1<<26)/mn[mn.length-1];function KX(E){var A,b=this.abs();if(b.t==1&&b[0]<=mn[mn.length-1]){for(A=0;A<mn.length;++A)if(b[0]==mn[A])return!0;return!1}if(b.isEven())return!1;for(A=1;A<mn.length;){for(var I=mn[A],Y=A+1;Y<mn.length&&I<GX;)I*=mn[Y++];for(I=b.modInt(I);A<Y;)if(I%mn[A++]==0)return!1}return b.millerRabin(E)}function YX(E){var A=this.subtract(n.ONE),b=A.getLowestSetBit();if(b<=0)return!1;var I=A.shiftRight(b);E=E+1>>1,E>mn.length&&(E=mn.length);for(var Y=i(),Q=0;Q<E;++Q){Y.fromInt(mn[Math.floor(Math.random()*mn.length)]);var ue=Y.modPow(I,this);if(ue.compareTo(n.ONE)!=0&&ue.compareTo(A)!=0){for(var le=1;le++<b&&ue.compareTo(A)!=0;)if(ue=ue.modPowInt(2,this),ue.compareTo(n.ONE)==0)return!1;if(ue.compareTo(A)!=0)return!1}}return!0}n.prototype.chunkSize=va,n.prototype.toRadix=Mp,n.prototype.fromRadix=vp,n.prototype.fromNumber=Bp,n.prototype.bitwiseTo=xp,n.prototype.changeBit=EX,n.prototype.addTo=bX,n.prototype.dMultiply=IX,n.prototype.dAddOffset=PX,n.prototype.multiplyLowerTo=FX,n.prototype.multiplyUpperTo=$X,n.prototype.modInt=WX,n.prototype.millerRabin=YX,n.prototype.clone=Hs,n.prototype.intValue=cs,n.prototype.byteValue=Cu,n.prototype.shortValue=el,n.prototype.signum=Dp,n.prototype.toByteArray=Ip,n.prototype.equals=Pp,n.prototype.min=Np,n.prototype.max=Rp,n.prototype.and=Fp,n.prototype.or=D,n.prototype.xor=N,n.prototype.andNot=ne,n.prototype.not=me,n.prototype.shiftLeft=Oe,n.prototype.shiftRight=Le,n.prototype.getLowestSetBit=pn,n.prototype.bitCount=Oo,n.prototype.testBit=g3,n.prototype.setBit=AX,n.prototype.clearBit=wX,n.prototype.flipBit=SX,n.prototype.add=OX,n.prototype.subtract=CX,n.prototype.multiply=TX,n.prototype.divide=MX,n.prototype.remainder=vX,n.prototype.divideAndRemainder=BX,n.prototype.modPow=VX,n.prototype.modInverse=HX,n.prototype.pow=xX,n.prototype.gcd=zX,n.prototype.isProbablePrime=KX,n.prototype.square=DX,n.prototype.Barrett=Ba;var $p,si,Er;function QX(E){si[Er++]^=E&255,si[Er++]^=E>>8&255,si[Er++]^=E>>16&255,si[Er++]^=E>>24&255,Er>=A3&&(Er-=A3)}function mT(){QX(new Date().getTime())}if(si==null){si=new Array,Er=0;var ls;if(typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var yT=new Uint8Array(32);for(window.crypto.getRandomValues(yT),ls=0;ls<32;++ls)si[Er++]=yT[ls]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var gT=window.crypto.random(32);for(ls=0;ls<gT.length;++ls)si[Er++]=gT.charCodeAt(ls)&255}}for(;Er<A3;)ls=Math.floor(65536*Math.random()),si[Er++]=ls>>>8,si[Er++]=ls&255;Er=0,mT()}function JX(){if($p==null){for(mT(),$p=tZ(),$p.init(si),Er=0;Er<si.length;++Er)si[Er]=0;Er=0}return $p.next()}function XX(E){var A;for(A=0;A<E.length;++A)E[A]=JX()}function _3(){}_3.prototype.nextBytes=XX;function E3(){this.i=0,this.j=0,this.S=new Array}function ZX(E){var A,b,I;for(A=0;A<256;++A)this.S[A]=A;for(b=0,A=0;A<256;++A)b=b+this.S[A]+E[A%E.length]&255,I=this.S[A],this.S[A]=this.S[b],this.S[b]=I;this.i=0,this.j=0}function eZ(){var E;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,E=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=E,this.S[E+this.S[this.i]&255]}E3.prototype.init=ZX,E3.prototype.next=eZ;function tZ(){return new E3}var A3=256;typeof Tm<"u"?Tm=dv.exports={default:n,BigInteger:n,SecureRandom:_3}:this.jsbn={BigInteger:n,SecureRandom:_3}}).call(Tm)});var rh=y(Dm=>{f();(function(){"use strict";var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(o){return n(s(o),arguments)}function r(o,u){return e.apply(null,[o].concat(u||[]))}function n(o,u){var a=1,c=o.length,l,h="",d,p,m,g,_,w,S,C;for(d=0;d<c;d++)if(typeof o[d]=="string")h+=o[d];else if(typeof o[d]=="object"){if(m=o[d],m.keys)for(l=u[a],p=0;p<m.keys.length;p++){if(l==null)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',m.keys[p],m.keys[p-1]));l=l[m.keys[p]]}else m.param_no?l=u[m.param_no]:l=u[a++];if(t.not_type.test(m.type)&&t.not_primitive.test(m.type)&&l instanceof Function&&(l=l()),t.numeric_arg.test(m.type)&&typeof l!="number"&&isNaN(l))throw new TypeError(e("[sprintf] expecting number but found %T",l));switch(t.number.test(m.type)&&(S=l>=0),m.type){case"b":l=parseInt(l,10).toString(2);break;case"c":l=String.fromCharCode(parseInt(l,10));break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,m.width?parseInt(m.width):0);break;case"e":l=m.precision?parseFloat(l).toExponential(m.precision):parseFloat(l).toExponential();break;case"f":l=m.precision?parseFloat(l).toFixed(m.precision):parseFloat(l);break;case"g":l=m.precision?String(Number(l.toPrecision(m.precision))):parseFloat(l);break;case"o":l=(parseInt(l,10)>>>0).toString(8);break;case"s":l=String(l),l=m.precision?l.substring(0,m.precision):l;break;case"t":l=String(!!l),l=m.precision?l.substring(0,m.precision):l;break;case"T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),l=m.precision?l.substring(0,m.precision):l;break;case"u":l=parseInt(l,10)>>>0;break;case"v":l=l.valueOf(),l=m.precision?l.substring(0,m.precision):l;break;case"x":l=(parseInt(l,10)>>>0).toString(16);break;case"X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase();break}t.json.test(m.type)?h+=l:(t.number.test(m.type)&&(!S||m.sign)?(C=S?"+":"-",l=l.toString().replace(t.sign,"")):C="",_=m.pad_char?m.pad_char==="0"?"0":m.pad_char.charAt(1):" ",w=m.width-(C+l).length,g=m.width&&w>0?_.repeat(w):"",h+=m.align?C+l+g:_==="0"?C+g+l:g+C+l)}return h}var i=Object.create(null);function s(o){if(i[o])return i[o];for(var u=o,a,c=[],l=0;u;){if((a=t.text.exec(u))!==null)c.push(a[0]);else if((a=t.modulo.exec(u))!==null)c.push("%");else if((a=t.placeholder.exec(u))!==null){if(a[2]){l|=1;var h=[],d=a[2],p=[];if((p=t.key.exec(d))!==null)for(h.push(p[1]);(d=d.substring(p[0].length))!=="";)if((p=t.key_access.exec(d))!==null)h.push(p[1]);else if((p=t.index_access.exec(d))!==null)h.push(p[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");a[2]=h}else l|=2;if(l===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");c.push({placeholder:a[0],param_no:a[1],keys:a[2],sign:a[3],pad_char:a[4],align:a[5],width:a[6],precision:a[7],type:a[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");u=u.substring(a[0].length)}return i[o]=c}typeof Dm<"u"&&(Dm.sprintf=e,Dm.vsprintf=r),typeof window<"u"&&(window.sprintf=e,window.vsprintf=r,typeof define=="function"&&define.amd&&define(function(){return{sprintf:e,vsprintf:r}}))})()});var Ow=y(Zs=>{"use strict";f();var qie=Zs&&Zs.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Lie=Zs&&Zs.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),yv=Zs&&Zs.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&qie(e,t,r);return Lie(e,t),e};Object.defineProperty(Zs,"__esModule",{value:!0});Zs.Address4=void 0;var pv=yv(Ew()),ws=yv(Aw()),mv=Cm(),nh=Sw(),Bl=rh(),bw=class t{constructor(e){this.groups=ws.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=pv.isCorrect(ws.BITS),this.isInSubnet=pv.isInSubnet,this.address=e;let r=ws.RE_SUBNET_STRING.exec(e);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>ws.BITS)throw new mv.AddressError("Invalid subnet mask.");e=e.replace(ws.RE_SUBNET_STRING,"")}this.addressMinusSuffix=e,this.parsedAddress=this.parse(e)}static isValid(e){try{return new t(e),!0}catch{return!1}}parse(e){let r=e.split(".");if(!e.match(ws.RE_ADDRESS))throw new mv.AddressError("Invalid IPv4 address.");return r}correctForm(){return this.parsedAddress.map(e=>parseInt(e,10)).join(".")}static fromHex(e){let r=e.replace(/:/g,"").padStart(8,"0"),n=[],i;for(i=0;i<8;i+=2){let s=r.slice(i,i+2);n.push(parseInt(s,16))}return new t(n.join("."))}static fromInteger(e){return t.fromHex(e.toString(16))}static fromArpa(e){let n=e.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new t(n)}toHex(){return this.parsedAddress.map(e=>(0,Bl.sprintf)("%02x",parseInt(e,10))).join(":")}toArray(){return this.parsedAddress.map(e=>parseInt(e,10))}toGroup6(){let e=[],r;for(r=0;r<ws.GROUPS;r+=2){let n=(0,Bl.sprintf)("%02x%02x",parseInt(this.parsedAddress[r],10),parseInt(this.parsedAddress[r+1],10));e.push((0,Bl.sprintf)("%x",parseInt(n,16)))}return e.join(":")}bigInteger(){return new nh.BigInteger(this.parsedAddress.map(e=>(0,Bl.sprintf)("%02x",parseInt(e,10))).join(""),16)}_startAddress(){return new nh.BigInteger(this.mask()+"0".repeat(ws.BITS-this.subnetMask),2)}startAddress(){return t.fromBigInteger(this._startAddress())}startAddressExclusive(){let e=new nh.BigInteger("1");return t.fromBigInteger(this._startAddress().add(e))}_endAddress(){return new nh.BigInteger(this.mask()+"1".repeat(ws.BITS-this.subnetMask),2)}endAddress(){return t.fromBigInteger(this._endAddress())}endAddressExclusive(){let e=new nh.BigInteger("1");return t.fromBigInteger(this._endAddress().subtract(e))}static fromBigInteger(e){return t.fromInteger(parseInt(e.toString(),10))}mask(e){return e===void 0&&(e=this.subnetMask),this.getBitsBase2(0,e)}getBitsBase2(e,r){return this.binaryZeroPad().slice(e,r)}reverseForm(e){e||(e={});let r=this.correctForm().split(".").reverse().join(".");return e.omitSuffix?r:(0,Bl.sprintf)("%s.in-addr.arpa.",r)}isMulticast(){return this.isInSubnet(new t("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(ws.BITS,"0")}groupForV6(){let e=this.parsedAddress;return this.address.replace(ws.RE_ADDRESS,(0,Bl.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',e.slice(0,2).join("."),e.slice(2,4).join(".")))}};Zs.Address4=bw});var Cw=y(jt=>{"use strict";f();Object.defineProperty(jt,"__esModule",{value:!0});jt.RE_URL_WITH_PORT=jt.RE_URL=jt.RE_ZONE_STRING=jt.RE_SUBNET_STRING=jt.RE_BAD_ADDRESS=jt.RE_BAD_CHARACTERS=jt.TYPES=jt.SCOPES=jt.GROUPS=jt.BITS=void 0;jt.BITS=128;jt.GROUPS=8;jt.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"};jt.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"};jt.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi;jt.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi;jt.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/;jt.RE_ZONE_STRING=/%.*$/;jt.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/);jt.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)});var Tw=y(eo=>{"use strict";f();Object.defineProperty(eo,"__esModule",{value:!0});eo.simpleGroup=eo.spanLeadingZeroes=eo.spanAll=eo.spanAllZeroes=void 0;var gv=rh();function _v(t){return t.replace(/(0+)/g,'<span class="zero">$1</span>')}eo.spanAllZeroes=_v;function jie(t,e=0){return t.split("").map((n,i)=>(0,gv.sprintf)('<span class="digit value-%s position-%d">%s</span>',n,i+e,_v(n))).join("")}eo.spanAll=jie;function Ev(t){return t.replace(/^(0+)/,'<span class="zero">$1</span>')}function Uie(t){return t.split(":").map(r=>Ev(r)).join(":")}eo.spanLeadingZeroes=Uie;function Vie(t,e=0){return t.split(":").map((n,i)=>/group-v4/.test(n)?n:(0,gv.sprintf)('<span class="hover-group group-%d">%s</span>',i+e,Ev(n)))}eo.simpleGroup=Vie});var Av=y(Cr=>{"use strict";f();var zie=Cr&&Cr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Wie=Cr&&Cr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Hie=Cr&&Cr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&zie(e,t,r);return Wie(e,t),e};Object.defineProperty(Cr,"__esModule",{value:!0});Cr.possibleElisions=Cr.simpleRegularExpression=Cr.ADDRESS_BOUNDARY=Cr.padGroup=Cr.groupPossibilities=void 0;var Gie=Hie(Cw()),Il=rh();function vm(t){return(0,Il.sprintf)("(%s)",t.join("|"))}Cr.groupPossibilities=vm;function Mm(t){return t.length<4?(0,Il.sprintf)("0{0,%d}%s",4-t.length,t):t}Cr.padGroup=Mm;Cr.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function Kie(t){let e=[];t.forEach((n,i)=>{parseInt(n,16)===0&&e.push(i)});let r=e.map(n=>t.map((i,s)=>{if(s===n){let o=s===0||s===Gie.GROUPS-1?":":"";return vm([Mm(i),o])}return Mm(i)}).join(":"));return r.push(t.map(Mm).join(":")),vm(r)}Cr.simpleRegularExpression=Kie;function Yie(t,e,r){let n=e?"":":",i=r?"":":",s=[];!e&&!r&&s.push("::"),e&&r&&s.push(""),(r&&!e||!r&&e)&&s.push(":"),s.push((0,Il.sprintf)("%s(:0{1,4}){1,%d}",n,t-1)),s.push((0,Il.sprintf)("(0{1,4}:){1,%d}%s",t-1,i)),s.push((0,Il.sprintf)("(0{1,4}:){%d}0{1,4}",t-1));for(let o=1;o<t-1;o++)for(let u=1;u<t-o;u++)s.push((0,Il.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",u,t-u-o-1));return vm(s)}Cr.possibleElisions=Yie});var Ov=y(to=>{"use strict";f();var Qie=to&&to.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Jie=to&&to.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Im=to&&to.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Qie(e,t,r);return Jie(e,t),e};Object.defineProperty(to,"__esModule",{value:!0});to.Address6=void 0;var wv=Im(Ew()),Dw=Im(Aw()),wt=Im(Cw()),Mw=Im(Tw()),nc=Ow(),ic=Av(),qo=Cm(),_n=Sw(),En=rh();function Bm(t){if(!t)throw new Error("Assertion failed.")}function Xie(t){let e=/(\d+)(\d{3})/;for(;e.test(t);)t=t.replace(e,"$1,$2");return t}function Zie(t){return t=t.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),t=t.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),t}function ese(t,e){let r=[],n=[],i;for(i=0;i<t.length;i++)i<e[0]?r.push(t[i]):i>e[1]&&n.push(t[i]);return r.concat(["compact"]).concat(n)}function Sv(t){return(0,En.sprintf)("%04x",parseInt(t,16))}function bv(t){return t&255}var vw=class t{constructor(e,r){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=wv.isInSubnet,this.isCorrect=wv.isCorrect(wt.BITS),r===void 0?this.groups=wt.GROUPS:this.groups=r,this.address=e;let n=wt.RE_SUBNET_STRING.exec(e);if(n){if(this.parsedSubnet=n[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>wt.BITS)throw new qo.AddressError("Invalid subnet mask.");e=e.replace(wt.RE_SUBNET_STRING,"")}else if(/\//.test(e))throw new qo.AddressError("Invalid subnet mask.");let i=wt.RE_ZONE_STRING.exec(e);i&&(this.zone=i[0],e=e.replace(wt.RE_ZONE_STRING,"")),this.addressMinusSuffix=e,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(e){try{return new t(e),!0}catch{return!1}}static fromBigInteger(e){let r=e.toString(16).padStart(32,"0"),n=[],i;for(i=0;i<wt.GROUPS;i++)n.push(r.slice(i*4,(i+1)*4));return new t(n.join(":"))}static fromURL(e){let r,n=null,i;if(e.indexOf("[")!==-1&&e.indexOf("]:")!==-1){if(i=wt.RE_URL_WITH_PORT.exec(e),i===null)return{error:"failed to parse address with port",address:null,port:null};r=i[1],n=i[2]}else if(e.indexOf("/")!==-1){if(e=e.replace(/^[a-z0-9]+:\/\//,""),i=wt.RE_URL.exec(e),i===null)return{error:"failed to parse address from URL",address:null,port:null};r=i[1]}else r=e;return n?(n=parseInt(n,10),(n<0||n>65536)&&(n=null)):n=null,{address:new t(r),port:n}}static fromAddress4(e){let r=new nc.Address4(e),n=wt.BITS-(Dw.BITS-r.subnetMask);return new t(`::ffff:${r.correctForm()}/${n}`)}static fromArpa(e){let r=e.replace(/(\.ip6\.arpa)?\.$/,""),n=7;if(r.length!==63)throw new qo.AddressError("Invalid 'ip6.arpa' form.");let i=r.split(".").reverse();for(let s=n;s>0;s--){let o=s*4;i.splice(o,0,":")}return r=i.join(""),new t(r)}microsoftTranscription(){return(0,En.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(e=this.subnetMask){return this.getBitsBase2(0,e)}possibleSubnets(e=128){let r=wt.BITS-this.subnetMask,n=Math.abs(e-wt.BITS),i=r-n;return i<0?"0":Xie(new _n.BigInteger("2",10).pow(i).toString(10))}_startAddress(){return new _n.BigInteger(this.mask()+"0".repeat(wt.BITS-this.subnetMask),2)}startAddress(){return t.fromBigInteger(this._startAddress())}startAddressExclusive(){let e=new _n.BigInteger("1");return t.fromBigInteger(this._startAddress().add(e))}_endAddress(){return new _n.BigInteger(this.mask()+"1".repeat(wt.BITS-this.subnetMask),2)}endAddress(){return t.fromBigInteger(this._endAddress())}endAddressExclusive(){let e=new _n.BigInteger("1");return t.fromBigInteger(this._endAddress().subtract(e))}getScope(){let e=wt.SCOPES[this.getBits(12,16).intValue()];return this.getType()==="Global unicast"&&e!=="Link local"&&(e="Global"),e||"Unknown"}getType(){for(let e of Object.keys(wt.TYPES))if(this.isInSubnet(new t(e)))return wt.TYPES[e];return"Global unicast"}getBits(e,r){return new _n.BigInteger(this.getBitsBase2(e,r),2)}getBitsBase2(e,r){return this.binaryZeroPad().slice(e,r)}getBitsBase16(e,r){let n=r-e;if(n%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(e,r).toString(16).padStart(n/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,wt.BITS)}reverseForm(e){e||(e={});let r=Math.floor(this.subnetMask/4),n=this.canonicalForm().replace(/:/g,"").split("").slice(0,r).reverse().join(".");return r>0?e.omitSuffix?n:(0,En.sprintf)("%s.ip6.arpa.",n):e.omitSuffix?"":"ip6.arpa."}correctForm(){let e,r=[],n=0,i=[];for(e=0;e<this.parsedAddress.length;e++){let u=parseInt(this.parsedAddress[e],16);u===0&&n++,u!==0&&n>0&&(n>1&&i.push([e-n,e-1]),n=0)}n>1&&i.push([this.parsedAddress.length-n,this.parsedAddress.length-1]);let s=i.map(u=>u[1]-u[0]+1);if(i.length>0){let u=s.indexOf(Math.max(...s));r=ese(this.parsedAddress,i[u])}else r=this.parsedAddress;for(e=0;e<r.length;e++)r[e]!=="compact"&&(r[e]=parseInt(r[e],16).toString(16));let o=r.join(":");return o=o.replace(/^compact$/,"::"),o=o.replace(/^compact|compact$/,":"),o=o.replace(/compact/,""),o}binaryZeroPad(){return this.bigInteger().toString(2).padStart(wt.BITS,"0")}parse4in6(e){let r=e.split(":"),i=r.slice(-1)[0].match(Dw.RE_ADDRESS);if(i){this.parsedAddress4=i[0],this.address4=new nc.Address4(this.parsedAddress4);for(let s=0;s<this.address4.groups;s++)if(/^0[0-9]+/.test(this.address4.parsedAddress[s]))throw new qo.AddressError("IPv4 addresses can't have leading zeroes.",e.replace(Dw.RE_ADDRESS,this.address4.parsedAddress.map(Zie).join(".")));this.v4=!0,r[r.length-1]=this.address4.toGroup6(),e=r.join(":")}return e}parse(e){e=this.parse4in6(e);let r=e.match(wt.RE_BAD_CHARACTERS);if(r)throw new qo.AddressError((0,En.sprintf)("Bad character%s detected in address: %s",r.length>1?"s":"",r.join("")),e.replace(wt.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));let n=e.match(wt.RE_BAD_ADDRESS);if(n)throw new qo.AddressError((0,En.sprintf)("Address failed regex: %s",n.join("")),e.replace(wt.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let i=[],s=e.split("::");if(s.length===2){let o=s[0].split(":"),u=s[1].split(":");o.length===1&&o[0]===""&&(o=[]),u.length===1&&u[0]===""&&(u=[]);let a=this.groups-(o.length+u.length);if(!a)throw new qo.AddressError("Error parsing groups");this.elidedGroups=a,this.elisionBegin=o.length,this.elisionEnd=o.length+this.elidedGroups,i=i.concat(o);for(let c=0;c<a;c++)i.push("0");i=i.concat(u)}else if(s.length===1)i=e.split(":"),this.elidedGroups=0;else throw new qo.AddressError("Too many :: groups found");if(i=i.map(o=>(0,En.sprintf)("%x",parseInt(o,16))),i.length!==this.groups)throw new qo.AddressError("Incorrect number of groups found");return i}canonicalForm(){return this.parsedAddress.map(Sv).join(":")}decimal(){return this.parsedAddress.map(e=>(0,En.sprintf)("%05d",parseInt(e,16))).join(":")}bigInteger(){return new _n.BigInteger(this.parsedAddress.map(Sv).join(""),16)}to4(){let e=this.binaryZeroPad().split("");return nc.Address4.fromHex(new _n.BigInteger(e.slice(96,128).join(""),2).toString(16))}to4in6(){let e=this.to4(),n=new t(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),i="";return/:$/.test(n)||(i=":"),n+i+e.address}inspectTeredo(){let e=this.getBitsBase16(0,32),r=this.getBits(80,96).xor(new _n.BigInteger("ffff",16)).toString(),n=nc.Address4.fromHex(this.getBitsBase16(32,64)),i=nc.Address4.fromHex(this.getBits(96,128).xor(new _n.BigInteger("ffffffff",16)).toString(16)),s=this.getBits(64,80),o=this.getBitsBase2(64,80),u=s.testBit(15),a=s.testBit(14),c=s.testBit(8),l=s.testBit(9),h=new _n.BigInteger(o.slice(2,6)+o.slice(8,16),2).toString(10);return{prefix:(0,En.sprintf)("%s:%s",e.slice(0,4),e.slice(4,8)),server4:n.address,client4:i.address,flags:o,coneNat:u,microsoft:{reserved:a,universalLocal:l,groupIndividual:c,nonce:h},udpPort:r}}inspect6to4(){let e=this.getBitsBase16(0,16),r=nc.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:(0,En.sprintf)("%s",e.slice(0,4)),gateway:r.address}}to6to4(){if(!this.is4())return null;let e=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new t(e)}toByteArray(){let e=this.bigInteger().toByteArray();return e.length===17&&e[0]===0?e.slice(1):e}toUnsignedByteArray(){return this.toByteArray().map(bv)}static fromByteArray(e){return this.fromUnsignedByteArray(e.map(bv))}static fromUnsignedByteArray(e){let r=new _n.BigInteger("256",10),n=new _n.BigInteger("0",10),i=new _n.BigInteger("1",10);for(let s=e.length-1;s>=0;s--)n=n.add(i.multiply(new _n.BigInteger(e[s].toString(10),10))),i=i.multiply(r);return t.fromBigInteger(n)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new t("2001::/32"))}is6to4(){return this.isInSubnet(new t("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(e){return e===void 0?e="":e=(0,En.sprintf)(":%s",e),(0,En.sprintf)("http://[%s]%s/",this.correctForm(),e)}link(e){e||(e={}),e.className===void 0&&(e.className=""),e.prefix===void 0&&(e.prefix="/#address="),e.v4===void 0&&(e.v4=!1);let r=this.correctForm;return e.v4&&(r=this.to4in6),e.className?(0,En.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',e.prefix,r.call(this),e.className):(0,En.sprintf)('<a href="%1$s%2$s">%2$s</a>',e.prefix,r.call(this))}group(){if(this.elidedGroups===0)return Mw.simpleGroup(this.address).join(":");Bm(typeof this.elidedGroups=="number"),Bm(typeof this.elisionBegin=="number");let e=[],[r,n]=this.address.split("::");r.length?e.push(...Mw.simpleGroup(r)):e.push("");let i=["hover-group"];for(let s=this.elisionBegin;s<this.elisionBegin+this.elidedGroups;s++)i.push((0,En.sprintf)("group-%d",s));return e.push((0,En.sprintf)('<span class="%s"></span>',i.join(" "))),n.length?e.push(...Mw.simpleGroup(n,this.elisionEnd)):e.push(""),this.is4()&&(Bm(this.address4 instanceof nc.Address4),e.pop(),e.push(this.address4.groupForV6())),e.join(":")}regularExpressionString(e=!1){let r=[],n=new t(this.correctForm());if(n.elidedGroups===0)r.push((0,ic.simpleRegularExpression)(n.parsedAddress));else if(n.elidedGroups===wt.GROUPS)r.push((0,ic.possibleElisions)(wt.GROUPS));else{let i=n.address.split("::");i[0].length&&r.push((0,ic.simpleRegularExpression)(i[0].split(":"))),Bm(typeof n.elidedGroups=="number"),r.push((0,ic.possibleElisions)(n.elidedGroups,i[0].length!==0,i[1].length!==0)),i[1].length&&r.push((0,ic.simpleRegularExpression)(i[1].split(":"))),r=[r.join(":")]}return e||(r=["(?=^|",ic.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...r,")(?=[^\\w\\:]|",ic.ADDRESS_BOUNDARY,"|$)"]),r.join("")}regularExpression(e=!1){return new RegExp(this.regularExpressionString(e),"i")}};to.Address6=vw});var Bw=y(tn=>{"use strict";f();var tse=tn&&tn.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),rse=tn&&tn.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),nse=tn&&tn.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&tse(e,t,r);return rse(e,t),e};Object.defineProperty(tn,"__esModule",{value:!0});tn.v6=tn.AddressError=tn.Address6=tn.Address4=void 0;var ise=Ow();Object.defineProperty(tn,"Address4",{enumerable:!0,get:function(){return ise.Address4}});var sse=Ov();Object.defineProperty(tn,"Address6",{enumerable:!0,get:function(){return sse.Address6}});var ose=Cm();Object.defineProperty(tn,"AddressError",{enumerable:!0,get:function(){return ose.AddressError}});var use=nse(Tw());tn.v6={helpers:use}});var Bv=y(ki=>{"use strict";f();Object.defineProperty(ki,"__esModule",{value:!0});ki.ipToBuffer=ki.int32ToIpv4=ki.ipv4ToInt32=ki.validateSocksClientChainOptions=ki.validateSocksClientOptions=void 0;var An=_w(),Tr=yw(),ase=require("stream"),Iw=Bw(),Cv=require("net");function cse(t,e=["connect","bind","associate"]){if(!Tr.SocksCommand[t.command])throw new An.SocksClientError(Tr.ERRORS.InvalidSocksCommand,t);if(e.indexOf(t.command)===-1)throw new An.SocksClientError(Tr.ERRORS.InvalidSocksCommandForOperation,t);if(!Dv(t.destination))throw new An.SocksClientError(Tr.ERRORS.InvalidSocksClientOptionsDestination,t);if(!Mv(t.proxy))throw new An.SocksClientError(Tr.ERRORS.InvalidSocksClientOptionsProxy,t);if(Tv(t.proxy,t),t.timeout&&!vv(t.timeout))throw new An.SocksClientError(Tr.ERRORS.InvalidSocksClientOptionsTimeout,t);if(t.existing_socket&&!(t.existing_socket instanceof ase.Duplex))throw new An.SocksClientError(Tr.ERRORS.InvalidSocksClientOptionsExistingSocket,t)}ki.validateSocksClientOptions=cse;function lse(t){if(t.command!=="connect")throw new An.SocksClientError(Tr.ERRORS.InvalidSocksCommandChain,t);if(!Dv(t.destination))throw new An.SocksClientError(Tr.ERRORS.InvalidSocksClientOptionsDestination,t);if(!(t.proxies&&Array.isArray(t.proxies)&&t.proxies.length>=2))throw new An.SocksClientError(Tr.ERRORS.InvalidSocksClientOptionsProxiesLength,t);if(t.proxies.forEach(e=>{if(!Mv(e))throw new An.SocksClientError(Tr.ERRORS.InvalidSocksClientOptionsProxy,t);Tv(e,t)}),t.timeout&&!vv(t.timeout))throw new An.SocksClientError(Tr.ERRORS.InvalidSocksClientOptionsTimeout,t)}ki.validateSocksClientChainOptions=lse;function Tv(t,e){if(t.custom_auth_method!==void 0){if(t.custom_auth_method<Tr.SOCKS5_CUSTOM_AUTH_START||t.custom_auth_method>Tr.SOCKS5_CUSTOM_AUTH_END)throw new An.SocksClientError(Tr.ERRORS.InvalidSocksClientOptionsCustomAuthRange,e);if(t.custom_auth_request_handler===void 0||typeof t.custom_auth_request_handler!="function")throw new An.SocksClientError(Tr.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,e);if(t.custom_auth_response_size===void 0)throw new An.SocksClientError(Tr.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,e);if(t.custom_auth_response_handler===void 0||typeof t.custom_auth_response_handler!="function")throw new An.SocksClientError(Tr.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,e)}}function Dv(t){return t&&typeof t.host=="string"&&typeof t.port=="number"&&t.port>=0&&t.port<=65535}function Mv(t){return t&&(typeof t.host=="string"||typeof t.ipaddress=="string")&&typeof t.port=="number"&&t.port>=0&&t.port<=65535&&(t.type===4||t.type===5)}function vv(t){return typeof t=="number"&&t>0}function fse(t){return new Iw.Address4(t).toArray().reduce((r,n)=>(r<<8)+n,0)}ki.ipv4ToInt32=fse;function hse(t){let e=t>>>24&255,r=t>>>16&255,n=t>>>8&255,i=t&255;return[e,r,n,i].join(".")}ki.int32ToIpv4=hse;function dse(t){if(Cv.isIPv4(t)){let e=new Iw.Address4(t);return Buffer.from(e.toArray())}else if(Cv.isIPv6(t)){let e=new Iw.Address6(t);return Buffer.from(e.canonicalForm().split(":").map(r=>r.padStart(4,"0")).join(""),"hex")}else throw new Error("Invalid IP address format")}ki.ipToBuffer=dse});var Iv=y(Pm=>{"use strict";f();Object.defineProperty(Pm,"__esModule",{value:!0});Pm.ReceiveBuffer=void 0;var Pw=class{constructor(e=4096){this.buffer=Buffer.allocUnsafe(e),this.offset=0,this.originalSize=e}get length(){return this.offset}append(e){if(!Buffer.isBuffer(e))throw new Error("Attempted to append a non-buffer instance to ReceiveBuffer.");if(this.offset+e.length>=this.buffer.length){let r=this.buffer;this.buffer=Buffer.allocUnsafe(Math.max(this.buffer.length+this.originalSize,this.buffer.length+e.length)),r.copy(this.buffer)}return e.copy(this.buffer,this.offset),this.offset+=e.length}peek(e){if(e>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");return this.buffer.slice(0,e)}get(e){if(e>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");let r=Buffer.allocUnsafe(e);return this.buffer.slice(0,e).copy(r),this.buffer.copyWithin(0,e,e+this.offset-e),this.offset-=e,r}};Pm.ReceiveBuffer=Pw});var Pv=y(ju=>{"use strict";f();var Pl=ju&&ju.__awaiter||function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function u(l){try{c(n.next(l))}catch(h){o(h)}}function a(l){try{c(n.throw(l))}catch(h){o(h)}}function c(l){l.done?s(l.value):i(l.value).then(u,a)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(ju,"__esModule",{value:!0});ju.SocksClientError=ju.SocksClient=void 0;var pse=require("events"),Nl=require("net"),Nn=ov(),ee=yw(),di=Bv(),mse=Iv(),Rw=_w();Object.defineProperty(ju,"SocksClientError",{enumerable:!0,get:function(){return Rw.SocksClientError}});var Nw=Bw(),xw=class t extends pse.EventEmitter{constructor(e){super(),this.options=Object.assign({},e),(0,di.validateSocksClientOptions)(e),this.setState(ee.SocksClientState.Created)}static createConnection(e,r){return new Promise((n,i)=>{try{(0,di.validateSocksClientOptions)(e,["connect"])}catch(o){return typeof r=="function"?(r(o),n(o)):i(o)}let s=new t(e);s.connect(e.existing_socket),s.once("established",o=>{s.removeAllListeners(),typeof r=="function"&&r(null,o),n(o)}),s.once("error",o=>{s.removeAllListeners(),typeof r=="function"?(r(o),n(o)):i(o)})})}static createConnectionChain(e,r){return new Promise((n,i)=>Pl(this,void 0,void 0,function*(){try{(0,di.validateSocksClientChainOptions)(e)}catch(s){return typeof r=="function"?(r(s),n(s)):i(s)}e.randomizeChain&&(0,Rw.shuffleArray)(e.proxies);try{let s;for(let o=0;o<e.proxies.length;o++){let u=e.proxies[o],a=o===e.proxies.length-1?e.destination:{host:e.proxies[o+1].host||e.proxies[o+1].ipaddress,port:e.proxies[o+1].port},c=yield t.createConnection({command:"connect",proxy:u,destination:a,existing_socket:s});s=s||c.socket}typeof r=="function"?(r(null,{socket:s}),n({socket:s})):n({socket:s})}catch(s){typeof r=="function"?(r(s),n(s)):i(s)}}))}static createUDPFrame(e){let r=new Nn.SmartBuffer;return r.writeUInt16BE(0),r.writeUInt8(e.frameNumber||0),Nl.isIPv4(e.remoteHost.host)?(r.writeUInt8(ee.Socks5HostType.IPv4),r.writeUInt32BE((0,di.ipv4ToInt32)(e.remoteHost.host))):Nl.isIPv6(e.remoteHost.host)?(r.writeUInt8(ee.Socks5HostType.IPv6),r.writeBuffer((0,di.ipToBuffer)(e.remoteHost.host))):(r.writeUInt8(ee.Socks5HostType.Hostname),r.writeUInt8(Buffer.byteLength(e.remoteHost.host)),r.writeString(e.remoteHost.host)),r.writeUInt16BE(e.remoteHost.port),r.writeBuffer(e.data),r.toBuffer()}static parseUDPFrame(e){let r=Nn.SmartBuffer.fromBuffer(e);r.readOffset=2;let n=r.readUInt8(),i=r.readUInt8(),s;i===ee.Socks5HostType.IPv4?s=(0,di.int32ToIpv4)(r.readUInt32BE()):i===ee.Socks5HostType.IPv6?s=Nw.Address6.fromByteArray(Array.from(r.readBuffer(16))).canonicalForm():s=r.readString(r.readUInt8());let o=r.readUInt16BE();return{frameNumber:n,remoteHost:{host:s,port:o},data:r.readBuffer()}}setState(e){this.state!==ee.SocksClientState.Error&&(this.state=e)}connect(e){this.onDataReceived=n=>this.onDataReceivedHandler(n),this.onClose=()=>this.onCloseHandler(),this.onError=n=>this.onErrorHandler(n),this.onConnect=()=>this.onConnectHandler();let r=setTimeout(()=>this.onEstablishedTimeout(),this.options.timeout||ee.DEFAULT_TIMEOUT);r.unref&&typeof r.unref=="function"&&r.unref(),e?this.socket=e:this.socket=new Nl.Socket,this.socket.once("close",this.onClose),this.socket.once("error",this.onError),this.socket.once("connect",this.onConnect),this.socket.on("data",this.onDataReceived),this.setState(ee.SocksClientState.Connecting),this.receiveBuffer=new mse.ReceiveBuffer,e?this.socket.emit("connect"):(this.socket.connect(this.getSocketOptions()),this.options.set_tcp_nodelay!==void 0&&this.options.set_tcp_nodelay!==null&&this.socket.setNoDelay(!!this.options.set_tcp_nodelay)),this.prependOnceListener("established",n=>{setImmediate(()=>{if(this.receiveBuffer.length>0){let i=this.receiveBuffer.get(this.receiveBuffer.length);n.socket.emit("data",i)}n.socket.resume()})})}getSocketOptions(){return Object.assign(Object.assign({},this.options.socket_options),{host:this.options.proxy.host||this.options.proxy.ipaddress,port:this.options.proxy.port})}onEstablishedTimeout(){this.state!==ee.SocksClientState.Established&&this.state!==ee.SocksClientState.BoundWaitingForConnection&&this.closeSocket(ee.ERRORS.ProxyConnectionTimedOut)}onConnectHandler(){this.setState(ee.SocksClientState.Connected),this.options.proxy.type===4?this.sendSocks4InitialHandshake():this.sendSocks5InitialHandshake(),this.setState(ee.SocksClientState.SentInitialHandshake)}onDataReceivedHandler(e){this.receiveBuffer.append(e),this.processData()}processData(){for(;this.state!==ee.SocksClientState.Established&&this.state!==ee.SocksClientState.Error&&this.receiveBuffer.length>=this.nextRequiredPacketBufferSize;)if(this.state===ee.SocksClientState.SentInitialHandshake)this.options.proxy.type===4?this.handleSocks4FinalHandshakeResponse():this.handleInitialSocks5HandshakeResponse();else if(this.state===ee.SocksClientState.SentAuthentication)this.handleInitialSocks5AuthenticationHandshakeResponse();else if(this.state===ee.SocksClientState.SentFinalHandshake)this.handleSocks5FinalHandshakeResponse();else if(this.state===ee.SocksClientState.BoundWaitingForConnection)this.options.proxy.type===4?this.handleSocks4IncomingConnectionResponse():this.handleSocks5IncomingConnectionResponse();else{this.closeSocket(ee.ERRORS.InternalError);break}}onCloseHandler(){this.closeSocket(ee.ERRORS.SocketClosed)}onErrorHandler(e){this.closeSocket(e.message)}removeInternalSocketHandlers(){this.socket.pause(),this.socket.removeListener("data",this.onDataReceived),this.socket.removeListener("close",this.onClose),this.socket.removeListener("error",this.onError),this.socket.removeListener("connect",this.onConnect)}closeSocket(e){this.state!==ee.SocksClientState.Error&&(this.setState(ee.SocksClientState.Error),this.socket.destroy(),this.removeInternalSocketHandlers(),this.emit("error",new Rw.SocksClientError(e,this.options)))}sendSocks4InitialHandshake(){let e=this.options.proxy.userId||"",r=new Nn.SmartBuffer;r.writeUInt8(4),r.writeUInt8(ee.SocksCommand[this.options.command]),r.writeUInt16BE(this.options.destination.port),Nl.isIPv4(this.options.destination.host)?(r.writeBuffer((0,di.ipToBuffer)(this.options.destination.host)),r.writeStringNT(e)):(r.writeUInt8(0),r.writeUInt8(0),r.writeUInt8(0),r.writeUInt8(1),r.writeStringNT(e),r.writeStringNT(this.options.destination.host)),this.nextRequiredPacketBufferSize=ee.SOCKS_INCOMING_PACKET_SIZES.Socks4Response,this.socket.write(r.toBuffer())}handleSocks4FinalHandshakeResponse(){let e=this.receiveBuffer.get(8);if(e[1]!==ee.Socks4Response.Granted)this.closeSocket(`${ee.ERRORS.Socks4ProxyRejectedConnection} - (${ee.Socks4Response[e[1]]})`);else if(ee.SocksCommand[this.options.command]===ee.SocksCommand.bind){let r=Nn.SmartBuffer.fromBuffer(e);r.readOffset=2;let n={port:r.readUInt16BE(),host:(0,di.int32ToIpv4)(r.readUInt32BE())};n.host==="0.0.0.0"&&(n.host=this.options.proxy.ipaddress),this.setState(ee.SocksClientState.BoundWaitingForConnection),this.emit("bound",{remoteHost:n,socket:this.socket})}else this.setState(ee.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{socket:this.socket})}handleSocks4IncomingConnectionResponse(){let e=this.receiveBuffer.get(8);if(e[1]!==ee.Socks4Response.Granted)this.closeSocket(`${ee.ERRORS.Socks4ProxyRejectedIncomingBoundConnection} - (${ee.Socks4Response[e[1]]})`);else{let r=Nn.SmartBuffer.fromBuffer(e);r.readOffset=2;let n={port:r.readUInt16BE(),host:(0,di.int32ToIpv4)(r.readUInt32BE())};this.setState(ee.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:n,socket:this.socket})}}sendSocks5InitialHandshake(){let e=new Nn.SmartBuffer,r=[ee.Socks5Auth.NoAuth];(this.options.proxy.userId||this.options.proxy.password)&&r.push(ee.Socks5Auth.UserPass),this.options.proxy.custom_auth_method!==void 0&&r.push(this.options.proxy.custom_auth_method),e.writeUInt8(5),e.writeUInt8(r.length);for(let n of r)e.writeUInt8(n);this.nextRequiredPacketBufferSize=ee.SOCKS_INCOMING_PACKET_SIZES.Socks5InitialHandshakeResponse,this.socket.write(e.toBuffer()),this.setState(ee.SocksClientState.SentInitialHandshake)}handleInitialSocks5HandshakeResponse(){let e=this.receiveBuffer.get(2);e[0]!==5?this.closeSocket(ee.ERRORS.InvalidSocks5IntiailHandshakeSocksVersion):e[1]===ee.SOCKS5_NO_ACCEPTABLE_AUTH?this.closeSocket(ee.ERRORS.InvalidSocks5InitialHandshakeNoAcceptedAuthType):e[1]===ee.Socks5Auth.NoAuth?(this.socks5ChosenAuthType=ee.Socks5Auth.NoAuth,this.sendSocks5CommandRequest()):e[1]===ee.Socks5Auth.UserPass?(this.socks5ChosenAuthType=ee.Socks5Auth.UserPass,this.sendSocks5UserPassAuthentication()):e[1]===this.options.proxy.custom_auth_method?(this.socks5ChosenAuthType=this.options.proxy.custom_auth_method,this.sendSocks5CustomAuthentication()):this.closeSocket(ee.ERRORS.InvalidSocks5InitialHandshakeUnknownAuthType)}sendSocks5UserPassAuthentication(){let e=this.options.proxy.userId||"",r=this.options.proxy.password||"",n=new Nn.SmartBuffer;n.writeUInt8(1),n.writeUInt8(Buffer.byteLength(e)),n.writeString(e),n.writeUInt8(Buffer.byteLength(r)),n.writeString(r),this.nextRequiredPacketBufferSize=ee.SOCKS_INCOMING_PACKET_SIZES.Socks5UserPassAuthenticationResponse,this.socket.write(n.toBuffer()),this.setState(ee.SocksClientState.SentAuthentication)}sendSocks5CustomAuthentication(){return Pl(this,void 0,void 0,function*(){this.nextRequiredPacketBufferSize=this.options.proxy.custom_auth_response_size,this.socket.write(yield this.options.proxy.custom_auth_request_handler()),this.setState(ee.SocksClientState.SentAuthentication)})}handleSocks5CustomAuthHandshakeResponse(e){return Pl(this,void 0,void 0,function*(){return yield this.options.proxy.custom_auth_response_handler(e)})}handleSocks5AuthenticationNoAuthHandshakeResponse(e){return Pl(this,void 0,void 0,function*(){return e[1]===0})}handleSocks5AuthenticationUserPassHandshakeResponse(e){return Pl(this,void 0,void 0,function*(){return e[1]===0})}handleInitialSocks5AuthenticationHandshakeResponse(){return Pl(this,void 0,void 0,function*(){this.setState(ee.SocksClientState.ReceivedAuthenticationResponse);let e=!1;this.socks5ChosenAuthType===ee.Socks5Auth.NoAuth?e=yield this.handleSocks5AuthenticationNoAuthHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===ee.Socks5Auth.UserPass?e=yield this.handleSocks5AuthenticationUserPassHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===this.options.proxy.custom_auth_method&&(e=yield this.handleSocks5CustomAuthHandshakeResponse(this.receiveBuffer.get(this.options.proxy.custom_auth_response_size))),e?this.sendSocks5CommandRequest():this.closeSocket(ee.ERRORS.Socks5AuthenticationFailed)})}sendSocks5CommandRequest(){let e=new Nn.SmartBuffer;e.writeUInt8(5),e.writeUInt8(ee.SocksCommand[this.options.command]),e.writeUInt8(0),Nl.isIPv4(this.options.destination.host)?(e.writeUInt8(ee.Socks5HostType.IPv4),e.writeBuffer((0,di.ipToBuffer)(this.options.destination.host))):Nl.isIPv6(this.options.destination.host)?(e.writeUInt8(ee.Socks5HostType.IPv6),e.writeBuffer((0,di.ipToBuffer)(this.options.destination.host))):(e.writeUInt8(ee.Socks5HostType.Hostname),e.writeUInt8(this.options.destination.host.length),e.writeString(this.options.destination.host)),e.writeUInt16BE(this.options.destination.port),this.nextRequiredPacketBufferSize=ee.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.socket.write(e.toBuffer()),this.setState(ee.SocksClientState.SentFinalHandshake)}handleSocks5FinalHandshakeResponse(){let e=this.receiveBuffer.peek(5);if(e[0]!==5||e[1]!==ee.Socks5Response.Granted)this.closeSocket(`${ee.ERRORS.InvalidSocks5FinalHandshakeRejected} - ${ee.Socks5Response[e[1]]}`);else{let r=e[3],n,i;if(r===ee.Socks5HostType.IPv4){let s=ee.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<s){this.nextRequiredPacketBufferSize=s;return}i=Nn.SmartBuffer.fromBuffer(this.receiveBuffer.get(s).slice(4)),n={host:(0,di.int32ToIpv4)(i.readUInt32BE()),port:i.readUInt16BE()},n.host==="0.0.0.0"&&(n.host=this.options.proxy.ipaddress)}else if(r===ee.Socks5HostType.Hostname){let s=e[4],o=ee.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(s);if(this.receiveBuffer.length<o){this.nextRequiredPacketBufferSize=o;return}i=Nn.SmartBuffer.fromBuffer(this.receiveBuffer.get(o).slice(5)),n={host:i.readString(s),port:i.readUInt16BE()}}else if(r===ee.Socks5HostType.IPv6){let s=ee.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<s){this.nextRequiredPacketBufferSize=s;return}i=Nn.SmartBuffer.fromBuffer(this.receiveBuffer.get(s).slice(4)),n={host:Nw.Address6.fromByteArray(Array.from(i.readBuffer(16))).canonicalForm(),port:i.readUInt16BE()}}this.setState(ee.SocksClientState.ReceivedFinalResponse),ee.SocksCommand[this.options.command]===ee.SocksCommand.connect?(this.setState(ee.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:n,socket:this.socket})):ee.SocksCommand[this.options.command]===ee.SocksCommand.bind?(this.setState(ee.SocksClientState.BoundWaitingForConnection),this.nextRequiredPacketBufferSize=ee.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.emit("bound",{remoteHost:n,socket:this.socket})):ee.SocksCommand[this.options.command]===ee.SocksCommand.associate&&(this.setState(ee.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:n,socket:this.socket}))}}handleSocks5IncomingConnectionResponse(){let e=this.receiveBuffer.peek(5);if(e[0]!==5||e[1]!==ee.Socks5Response.Granted)this.closeSocket(`${ee.ERRORS.Socks5ProxyRejectedIncomingBoundConnection} - ${ee.Socks5Response[e[1]]}`);else{let r=e[3],n,i;if(r===ee.Socks5HostType.IPv4){let s=ee.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<s){this.nextRequiredPacketBufferSize=s;return}i=Nn.SmartBuffer.fromBuffer(this.receiveBuffer.get(s).slice(4)),n={host:(0,di.int32ToIpv4)(i.readUInt32BE()),port:i.readUInt16BE()},n.host==="0.0.0.0"&&(n.host=this.options.proxy.ipaddress)}else if(r===ee.Socks5HostType.Hostname){let s=e[4],o=ee.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(s);if(this.receiveBuffer.length<o){this.nextRequiredPacketBufferSize=o;return}i=Nn.SmartBuffer.fromBuffer(this.receiveBuffer.get(o).slice(5)),n={host:i.readString(s),port:i.readUInt16BE()}}else if(r===ee.Socks5HostType.IPv6){let s=ee.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<s){this.nextRequiredPacketBufferSize=s;return}i=Nn.SmartBuffer.fromBuffer(this.receiveBuffer.get(s).slice(4)),n={host:Nw.Address6.fromByteArray(Array.from(i.readBuffer(16))).canonicalForm(),port:i.readUInt16BE()}}this.setState(ee.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:n,socket:this.socket})}}get socksClientOptions(){return Object.assign({},this.options)}};ju.SocksClient=xw});var Nv=y(sc=>{"use strict";f();var yse=sc&&sc.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),gse=sc&&sc.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&yse(e,t,r)};Object.defineProperty(sc,"__esModule",{value:!0});gse(Pv(),sc)});var bs=y(Ss=>{"use strict";f();Object.defineProperty(Ss,"__esModule",{value:!0});Ss.aws4=void 0;Ss.getKerberos=_se;Ss.getZstdLibrary=Ese;Ss.getAwsCredentialProvider=Ase;Ss.getGcpMetadata=wse;Ss.getSnappy=Sse;Ss.getSocks=bse;Ss.getMongoDBClientEncryption=Cse;var Uu=re();function ih(t){let e=t?{kModuleError:t}:{};return new Proxy(e,{get:(r,n)=>{if(n==="kModuleError")return t;throw t},set:()=>{throw t}})}function _se(){let t;try{t=require("kerberos")}catch(e){t=ih(new Uu.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:e,dependencyName:"kerberos"}))}return t}function Ese(){let t;try{t=require("@mongodb-js/zstd")}catch(e){t=ih(new Uu.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:e,dependencyName:"zstd"}))}return t}function Ase(){try{return require("@aws-sdk/credential-providers")}catch(t){return ih(new Uu.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:t,dependencyName:"@aws-sdk/credential-providers"}))}}function wse(){try{return require("gcp-metadata")}catch(t){return ih(new Uu.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:t,dependencyName:"gcp-metadata"}))}}function Sse(){try{return require("snappy")}catch(t){return{kModuleError:new Uu.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:t,dependencyName:"snappy"})}}}function bse(){try{return Nv()}catch(t){return{kModuleError:new Uu.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:t,dependencyName:"socks"})}}}Ss.aws4=Ose();function Ose(){let t;try{t=require("aws4")}catch(e){t=ih(new Uu.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:e,dependencyName:"aws4"}))}return t}function Cse(){let t=null;try{t=require("mongodb-client-encryption")}catch(e){return{kModuleError:new Uu.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:e,dependencyName:"mongodb-client-encryption"})}}return t}});var Vu=y(Rl=>{"use strict";f();Object.defineProperty(Rl,"__esModule",{value:!0});Rl.AuthProvider=Rl.AuthContext=void 0;var Tse=re(),Fw=class{constructor(e,r,n){this.reauthenticating=!1,this.connection=e,this.credentials=r,this.options=n}};Rl.AuthContext=Fw;var $w=class{async prepare(e,r){return e}async reauth(e){if(e.reauthenticating)throw new Tse.MongoRuntimeError("Reauthentication already in progress.");try{e.reauthenticating=!0,await this.auth(e)}finally{e.reauthenticating=!1}}};Rl.AuthProvider=$w});var Nm=y(Os=>{"use strict";f();Object.defineProperty(Os,"__esModule",{value:!0});Os.GSSAPI=Os.GSSAPICanonicalizationValue=void 0;Os.performGSSAPICanonicalizeHostName=Fv;Os.resolveCname=jw;var qw=require("dns"),Dse=bs(),Rv=re(),Mse=fe(),vse=Vu();Os.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});async function kw(t,e){return await t.command((0,Mse.ns)("$external.$cmd"),e)}var oh,Lw=class extends vse.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(n==null)throw new Rv.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");let{username:i}=n,s=await Bse(e),o=await s.step(""),u=await kw(r,Ise(o)),a=await xv(s,10,u.payload),c=await kw(r,Pse(a,u.conversationId)),l=await Nse(s,i,c.payload);await kw(r,{saslContinue:1,conversationId:c.conversationId,payload:l})}};Os.GSSAPI=Lw;async function Bse(t){let{hostAddress:e}=t.options,{credentials:r}=t;if(!e||typeof e.host!="string"||!r)throw new Rv.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(Rse(),"kModuleError"in oh)throw oh.kModuleError;let{initializeClient:n}=oh,{username:i,password:s}=r,o=r.mechanismProperties,u=o.SERVICE_NAME??"mongodb",a=await Fv(e.host,o),c={};s!=null&&Object.assign(c,{user:i,password:s});let l=o.SERVICE_HOST??a,h=`${u}${process.platform==="win32"?"/":"@"}${l}`;return"SERVICE_REALM"in o&&(h=`${h}@${o.SERVICE_REALM}`),await n(h,c)}function Ise(t){return{saslStart:1,mechanism:"GSSAPI",payload:t,autoAuthorize:1}}function Pse(t,e){return{saslContinue:1,conversationId:e,payload:t}}async function xv(t,e,r){try{return await t.step(r)||""}catch(n){if(e===0)throw n;return await xv(t,e-1,r)}}async function Nse(t,e,r){let n=await t.unwrap(r);return await t.wrap(n||"",{user:e})}async function Fv(t,e){let r=e.CANONICALIZE_HOST_NAME;if(!r||r===Os.GSSAPICanonicalizationValue.none)return t;if(r===Os.GSSAPICanonicalizationValue.on||r===Os.GSSAPICanonicalizationValue.forwardAndReverse){let{address:n}=await qw.promises.lookup(t);try{let i=await qw.promises.resolvePtr(n);return i.length>0?i[0]:t}catch{return await jw(t)}}else return await jw(t)}async function jw(t){try{let e=await qw.promises.resolveCname(t);return e.length>0?e[0]:t}catch{return t}}function Rse(){oh||(oh=(0,Dse.getKerberos)())}});var no=y(ro=>{"use strict";f();Object.defineProperty(ro,"__esModule",{value:!0});ro.AUTH_MECHS_AUTH_SRC_EXTERNAL=ro.AuthMechanism=void 0;ro.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_CR:"MONGODB-CR",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});ro.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([ro.AuthMechanism.MONGODB_GSSAPI,ro.AuthMechanism.MONGODB_AWS,ro.AuthMechanism.MONGODB_OIDC,ro.AuthMechanism.MONGODB_X509])});var Rm=y(oc=>{"use strict";f();Object.defineProperty(oc,"__esModule",{value:!0});oc.MongoCredentials=oc.DEFAULT_ALLOWED_HOSTS=void 0;var qi=re(),xse=Nm(),wn=no();function Fse(t){return t&&Array.isArray(t.saslSupportedMechs)?t.saslSupportedMechs.includes(wn.AuthMechanism.MONGODB_SCRAM_SHA256)?wn.AuthMechanism.MONGODB_SCRAM_SHA256:wn.AuthMechanism.MONGODB_SCRAM_SHA1:wn.AuthMechanism.MONGODB_SCRAM_SHA256}var $v=["test","azure","gcp","k8s"],kv="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";oc.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-qa.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var $se="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure or gcp.",Uw=class t{constructor(e){this.username=e.username??"",this.password=e.password,this.source=e.source,!this.source&&e.db&&(this.source=e.db),this.mechanism=e.mechanism||wn.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=e.mechanismProperties||{},this.mechanism.match(/MONGODB-AWS/i)&&(!this.username&&process.env.AWS_ACCESS_KEY_ID&&(this.username=process.env.AWS_ACCESS_KEY_ID),!this.password&&process.env.AWS_SECRET_ACCESS_KEY&&(this.password=process.env.AWS_SECRET_ACCESS_KEY),this.mechanismProperties.AWS_SESSION_TOKEN==null&&process.env.AWS_SESSION_TOKEN!=null&&(this.mechanismProperties={...this.mechanismProperties,AWS_SESSION_TOKEN:process.env.AWS_SESSION_TOKEN})),this.mechanism===wn.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS&&(this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:oc.DEFAULT_ALLOWED_HOSTS}),Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(e){return this.mechanism===e.mechanism&&this.username===e.username&&this.password===e.password&&this.source===e.source}resolveAuthMechanism(e){return this.mechanism.match(/DEFAULT/i)?new t({username:this.username,password:this.password,source:this.source,mechanism:Fse(e),mechanismProperties:this.mechanismProperties}):this}validate(){if((this.mechanism===wn.AuthMechanism.MONGODB_GSSAPI||this.mechanism===wn.AuthMechanism.MONGODB_PLAIN||this.mechanism===wn.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===wn.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new qi.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===wn.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.ENVIRONMENT&&this.mechanismProperties.ENVIRONMENT!=="azure")throw new qi.MongoInvalidArgumentError(`username and ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' may not be used together for mechanism '${this.mechanism}'.`);if(this.username&&this.password)throw new qi.MongoInvalidArgumentError(`No password is allowed in ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' for '${this.mechanism}'.`);if((this.mechanismProperties.ENVIRONMENT==="azure"||this.mechanismProperties.ENVIRONMENT==="gcp")&&!this.mechanismProperties.TOKEN_RESOURCE)throw new qi.MongoInvalidArgumentError($se);if(this.mechanismProperties.ENVIRONMENT&&!$v.includes(this.mechanismProperties.ENVIRONMENT))throw new qi.MongoInvalidArgumentError(`Currently only a ENVIRONMENT in ${$v.join(",")} is supported for mechanism '${this.mechanism}'.`);if(!this.mechanismProperties.ENVIRONMENT&&!this.mechanismProperties.OIDC_CALLBACK&&!this.mechanismProperties.OIDC_HUMAN_CALLBACK)throw new qi.MongoInvalidArgumentError(`Either a ENVIRONMENT, OIDC_CALLBACK, or OIDC_HUMAN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){let r=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(r))throw new qi.MongoInvalidArgumentError(kv);for(let n of r)if(typeof n!="string")throw new qi.MongoInvalidArgumentError(kv)}}if(wn.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)&&this.source!=null&&this.source!=="$external")throw new qi.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`);if(this.mechanism===wn.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new qi.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===wn.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new qi.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}let e=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(xse.GSSAPICanonicalizationValue).includes(e))throw new qi.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${e}`)}static merge(e,r){return new t({username:r.username??e?.username??"",password:r.password??e?.password??"",mechanism:r.mechanism??e?.mechanism??wn.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:r.mechanismProperties??e?.mechanismProperties??{},source:r.source??r.db??e?.source??"admin"})}};oc.MongoCredentials=Uw});var Fm=y(ct=>{"use strict";f();function ht(t,e,r){return r.globals&&(t=r.globals[t.name]),new t(`${r.context?r.context:"Value"} ${e}.`)}function $l(t,e){if(typeof t=="bigint")throw ht(TypeError,"is a BigInt which cannot be converted to a number",e);return e.globals?e.globals.Number(t):Number(t)}function Lv(t){return t>0&&t%1===.5&&!(t&1)||t<0&&t%1===-.5&&(t&1)===1?uh(Math.floor(t)):uh(Math.round(t))}function xm(t){return uh(Math.trunc(t))}function qv(t){return t<0?-1:1}function kse(t,e){let r=t%e;return qv(e)!==qv(r)?r+e:r}function uh(t){return t===0?0:t}function kl(t,{unsigned:e}){let r,n;e?(r=0,n=2**t-1):(r=-(2**(t-1)),n=2**(t-1)-1);let i=2**t,s=2**(t-1);return(o,u={})=>{let a=$l(o,u);if(a=uh(a),u.enforceRange){if(!Number.isFinite(a))throw ht(TypeError,"is not a finite number",u);if(a=xm(a),a<r||a>n)throw ht(TypeError,`is outside the accepted range of ${r} to ${n}, inclusive`,u);return a}return!Number.isNaN(a)&&u.clamp?(a=Math.min(Math.max(a,r),n),a=Lv(a),a):!Number.isFinite(a)||a===0?0:(a=xm(a),a>=r&&a<=n?a:(a=kse(a,i),!e&&a>=s?a-i:a))}}function jv(t,{unsigned:e}){let r=Number.MAX_SAFE_INTEGER,n=e?0:Number.MIN_SAFE_INTEGER,i=e?BigInt.asUintN:BigInt.asIntN;return(s,o={})=>{let u=$l(s,o);if(u=uh(u),o.enforceRange){if(!Number.isFinite(u))throw ht(TypeError,"is not a finite number",o);if(u=xm(u),u<n||u>r)throw ht(TypeError,`is outside the accepted range of ${n} to ${r}, inclusive`,o);return u}if(!Number.isNaN(u)&&o.clamp)return u=Math.min(Math.max(u,n),r),u=Lv(u),u;if(!Number.isFinite(u)||u===0)return 0;let a=BigInt(xm(u));return a=i(t,a),Number(a)}}ct.any=t=>t;ct.undefined=()=>{};ct.boolean=t=>!!t;ct.byte=kl(8,{unsigned:!1});ct.octet=kl(8,{unsigned:!0});ct.short=kl(16,{unsigned:!1});ct["unsigned short"]=kl(16,{unsigned:!0});ct.long=kl(32,{unsigned:!1});ct["unsigned long"]=kl(32,{unsigned:!0});ct["long long"]=jv(64,{unsigned:!1});ct["unsigned long long"]=jv(64,{unsigned:!0});ct.double=(t,e={})=>{let r=$l(t,e);if(!Number.isFinite(r))throw ht(TypeError,"is not a finite floating-point value",e);return r};ct["unrestricted double"]=(t,e={})=>$l(t,e);ct.float=(t,e={})=>{let r=$l(t,e);if(!Number.isFinite(r))throw ht(TypeError,"is not a finite floating-point value",e);if(Object.is(r,-0))return r;let n=Math.fround(r);if(!Number.isFinite(n))throw ht(TypeError,"is outside the range of a single-precision floating-point value",e);return n};ct["unrestricted float"]=(t,e={})=>{let r=$l(t,e);return isNaN(r)||Object.is(r,-0)?r:Math.fround(r)};ct.DOMString=(t,e={})=>{if(e.treatNullAsEmptyString&&t===null)return"";if(typeof t=="symbol")throw ht(TypeError,"is a symbol, which cannot be converted to a string",e);return(e.globals?e.globals.String:String)(t)};ct.ByteString=(t,e={})=>{let r=ct.DOMString(t,e),n;for(let i=0;(n=r.codePointAt(i))!==void 0;++i)if(n>255)throw ht(TypeError,"is not a valid ByteString",e);return r};ct.USVString=(t,e={})=>{let r=ct.DOMString(t,e),n=r.length,i=[];for(let s=0;s<n;++s){let o=r.charCodeAt(s);if(o<55296||o>57343)i.push(String.fromCodePoint(o));else if(56320<=o&&o<=57343)i.push(String.fromCodePoint(65533));else if(s===n-1)i.push(String.fromCodePoint(65533));else{let u=r.charCodeAt(s+1);if(56320<=u&&u<=57343){let a=o&1023,c=u&1023;i.push(String.fromCodePoint(65536+1024*a+c)),++s}else i.push(String.fromCodePoint(65533))}}return i.join("")};ct.object=(t,e={})=>{if(t===null||typeof t!="object"&&typeof t!="function")throw ht(TypeError,"is not an object",e);return t};var qse=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,Lse=typeof SharedArrayBuffer=="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;function Vw(t){try{return qse.call(t),!0}catch{return!1}}function xl(t){try{return Lse.call(t),!0}catch{return!1}}function Fl(t){try{return new Uint8Array(t),!1}catch{return!0}}ct.ArrayBuffer=(t,e={})=>{if(!Vw(t))throw e.allowShared&&!xl(t)?ht(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",e):ht(TypeError,"is not an ArrayBuffer",e);if(Fl(t))throw ht(TypeError,"is a detached ArrayBuffer",e);return t};var jse=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;ct.DataView=(t,e={})=>{try{jse.call(t)}catch{throw ht(TypeError,"is not a DataView",e)}if(!e.allowShared&&xl(t.buffer))throw ht(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",e);if(Fl(t.buffer))throw ht(TypeError,"is backed by a detached ArrayBuffer",e);return t};var Use=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach(t=>{let{name:e}=t,r=/^[AEIOU]/u.test(e)?"an":"a";ct[e]=(n,i={})=>{if(!ArrayBuffer.isView(n)||Use.call(n)!==e)throw ht(TypeError,`is not ${r} ${e} object`,i);if(!i.allowShared&&xl(n.buffer))throw ht(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",i);if(Fl(n.buffer))throw ht(TypeError,"is a view on a detached ArrayBuffer",i);return n}});ct.ArrayBufferView=(t,e={})=>{if(!ArrayBuffer.isView(t))throw ht(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",e);if(!e.allowShared&&xl(t.buffer))throw ht(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(Fl(t.buffer))throw ht(TypeError,"is a view on a detached ArrayBuffer",e);return t};ct.BufferSource=(t,e={})=>{if(ArrayBuffer.isView(t)){if(!e.allowShared&&xl(t.buffer))throw ht(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(Fl(t.buffer))throw ht(TypeError,"is a view on a detached ArrayBuffer",e);return t}if(!e.allowShared&&!Vw(t))throw ht(TypeError,"is not an ArrayBuffer or a view on one",e);if(e.allowShared&&!xl(t)&&!Vw(t))throw ht(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",e);if(Fl(t))throw ht(TypeError,"is a detached ArrayBuffer",e);return t};ct.DOMTimeStamp=ct["unsigned long long"]});var km=y((Kv,Yv)=>{"use strict";f();function Vse(t){return typeof t=="object"&&t!==null||typeof t=="function"}var Uv=Function.prototype.call.bind(Object.prototype.hasOwnProperty);function zse(t,e){for(let r of Reflect.ownKeys(e)){let n=Reflect.getOwnPropertyDescriptor(e,r);if(n&&!Reflect.defineProperty(t,r,n))throw new TypeError(`Cannot redefine property: ${String(r)}`)}}function Wse(t,e){let r=Wv(t);return Object.defineProperties(Object.create(r["%Object.prototype%"]),Object.getOwnPropertyDescriptors(e))}var Vv=Symbol("wrapper"),zv=Symbol("impl"),ql=Symbol("SameObject caches"),$m=Symbol.for("[webidl2js] constructor registry"),Hse=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);function Wv(t){if(Uv(t,$m))return t[$m];let e=Object.create(null);e["%Object.prototype%"]=t.Object.prototype,e["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new t.Array()[Symbol.iterator]()));try{e["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(t.eval("(async function* () {})").prototype))}catch{e["%AsyncIteratorPrototype%"]=Hse}return t[$m]=e,e}function Gse(t,e,r){return t[ql]||(t[ql]=Object.create(null)),e in t[ql]||(t[ql][e]=r()),t[ql][e]}function Hv(t){return t?t[Vv]:null}function Gv(t){return t?t[zv]:null}function Kse(t){let e=Hv(t);return e||t}function Yse(t){let e=Gv(t);return e||t}var Qse=Symbol("internal");function Jse(t){if(typeof t!="string")return!1;let e=t>>>0;if(e===2**32-1)return!1;let r=`${e}`;return t===r}var Xse=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get;function Zse(t){try{return Xse.call(t),!0}catch{return!1}}function eoe([t,e],r){let n;switch(r){case"key":n=t;break;case"value":n=e;break;case"key+value":n=[t,e];break}return{value:n,done:!1}}var toe=Symbol("supports property index"),roe=Symbol("supported property indices"),noe=Symbol("supports property name"),ioe=Symbol("supported property names"),soe=Symbol("indexed property get"),ooe=Symbol("indexed property set new"),uoe=Symbol("indexed property set existing"),aoe=Symbol("named property get"),coe=Symbol("named property set new"),loe=Symbol("named property set existing"),foe=Symbol("named property delete"),hoe=Symbol("async iterator get the next iteration result"),doe=Symbol("async iterator return steps"),poe=Symbol("async iterator initialization steps"),moe=Symbol("async iterator end of iteration");Yv.exports=Kv={isObject:Vse,hasOwn:Uv,define:zse,newObjectInRealm:Wse,wrapperSymbol:Vv,implSymbol:zv,getSameObject:Gse,ctorRegistrySymbol:$m,initCtorRegistry:Wv,wrapperForImpl:Hv,implForWrapper:Gv,tryWrapperForImpl:Kse,tryImplForWrapper:Yse,iterInternalSymbol:Qse,isArrayBuffer:Zse,isArrayIndexPropName:Jse,supportsPropertyIndex:toe,supportedPropertyIndices:roe,supportsPropertyName:noe,supportedPropertyNames:ioe,indexedGet:soe,indexedSetNew:ooe,indexedSetExisting:uoe,namedGet:aoe,namedSetNew:coe,namedSetExisting:loe,namedDelete:foe,asyncIteratorNext:hoe,asyncIteratorReturn:doe,asyncIteratorInit:poe,asyncIteratorEOI:moe,iteratorResult:eoe}});var iB=y((WTe,nB)=>{"use strict";f();var Jv="-",yoe=/^xn--/,goe=/[^\0-\x7F]/,_oe=/[\x2E\u3002\uFF0E\uFF61]/g,Eoe={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},zw=35,io=Math.floor,Ww=String.fromCharCode;function zu(t){throw new RangeError(Eoe[t])}function Aoe(t,e){let r=[],n=t.length;for(;n--;)r[n]=e(t[n]);return r}function Xv(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(_oe,".");let i=t.split("."),s=Aoe(i,e).join(".");return n+s}function Zv(t){let e=[],r=0,n=t.length;for(;r<n;){let i=t.charCodeAt(r++);if(i>=55296&&i<=56319&&r<n){let s=t.charCodeAt(r++);(s&64512)==56320?e.push(((i&1023)<<10)+(s&1023)+65536):(e.push(i),r--)}else e.push(i)}return e}var woe=t=>String.fromCodePoint(...t),Soe=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:36},Qv=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},eB=function(t,e,r){let n=0;for(t=r?io(t/700):t>>1,t+=io(t/e);t>zw*26>>1;n+=36)t=io(t/zw);return io(n+(zw+1)*t/(t+38))},tB=function(t){let e=[],r=t.length,n=0,i=128,s=72,o=t.lastIndexOf(Jv);o<0&&(o=0);for(let u=0;u<o;++u)t.charCodeAt(u)>=128&&zu("not-basic"),e.push(t.charCodeAt(u));for(let u=o>0?o+1:0;u<r;){let a=n;for(let l=1,h=36;;h+=36){u>=r&&zu("invalid-input");let d=Soe(t.charCodeAt(u++));d>=36&&zu("invalid-input"),d>io((2147483647-n)/l)&&zu("overflow"),n+=d*l;let p=h<=s?1:h>=s+26?26:h-s;if(d<p)break;let m=36-p;l>io(2147483647/m)&&zu("overflow"),l*=m}let c=e.length+1;s=eB(n-a,c,a==0),io(n/c)>2147483647-i&&zu("overflow"),i+=io(n/c),n%=c,e.splice(n++,0,i)}return String.fromCodePoint(...e)},rB=function(t){let e=[];t=Zv(t);let r=t.length,n=128,i=0,s=72;for(let a of t)a<128&&e.push(Ww(a));let o=e.length,u=o;for(o&&e.push(Jv);u<r;){let a=2147483647;for(let l of t)l>=n&&l<a&&(a=l);let c=u+1;a-n>io((2147483647-i)/c)&&zu("overflow"),i+=(a-n)*c,n=a;for(let l of t)if(l<n&&++i>2147483647&&zu("overflow"),l===n){let h=i;for(let d=36;;d+=36){let p=d<=s?1:d>=s+26?26:d-s;if(h<p)break;let m=h-p,g=36-p;e.push(Ww(Qv(p+m%g,0))),h=io(m/g)}e.push(Ww(Qv(h,0))),s=eB(i,c,u===o),i=0,++u}++i,++n}return e.join("")},boe=function(t){return Xv(t,function(e){return yoe.test(e)?tB(e.slice(4).toLowerCase()):e})},Ooe=function(t){return Xv(t,function(e){return goe.test(e)?"xn--"+rB(e):e})},Coe={version:"2.3.1",ucs2:{decode:Zv,encode:woe},decode:tB,encode:rB,toASCII:Ooe,toUnicode:boe};nB.exports=Coe});var oB=y((GTe,sB)=>{"use strict";f();var Toe=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,Doe=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}]/u,Moe=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u08A0-\u08A9\u08AF\u08B0\u08B3\u08B4\u08B6-\u08B8\u08BA-\u08BD\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10F46}-\u{10F50}\u{11001}\u{11038}-\u{11046}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{13430}-\u{13438}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E130}-\u{1E136}\u{1E2EC}-\u{1E2EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10F46}-\u{10F50}\u{11001}\u{11038}-\u{11046}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{13430}-\u{13438}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E130}-\u{1E136}\u{1E2EC}-\u{1E2EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0855\u0860\u0862-\u0865\u0867-\u086A\u08A0-\u08AC\u08AE-\u08B4\u08B6-\u08BD\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{1E900}-\u{1E943}]/u,voe=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,Boe=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B50-\u1B6A\u1B74-\u1B7E\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C88\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{11700}-\u{1171A}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6DA}\u{1D6DC}-\u{1D714}\u{1D716}-\u{1D74E}\u{1D750}-\u{1D788}\u{1D78A}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,Ioe=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,Poe=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0898-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2426\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E3\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EFD}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11FD5}-\u{11FF1}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6DB}\u{1D715}\u{1D74F}\u{1D789}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E4EC}-\u{1E4EF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}\u{1F8B1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA88}\u{1FA90}-\u{1FABD}\u{1FABF}-\u{1FAC5}\u{1FACE}-\u{1FADB}\u{1FAE0}-\u{1FAE8}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBCA}\u{1FBF0}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,Noe=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,Roe=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,xoe=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}]/u,Foe=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B50-\u1B7E\u1B80-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C88\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2426\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E3\u31F0-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{13455}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}\u{1F8B1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA88}\u{1FA90}-\u{1FABD}\u{1FABF}-\u{1FAC5}\u{1FACE}-\u{1FADB}\u{1FAE0}-\u{1FAE8}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBCA}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,$oe=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B50-\u1B6A\u1B74-\u1B7E\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C88\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{11700}-\u{1171A}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6DA}\u{1D6DC}-\u{1D714}\u{1D716}-\u{1D74E}\u{1D750}-\u{1D788}\u{1D78A}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;sB.exports={combiningMarks:Toe,combiningClassVirama:Doe,validZWNJ:Moe,bidiDomain:voe,bidiS1LTR:Boe,bidiS1RTL:Ioe,bidiS2:Poe,bidiS3:Noe,bidiS4EN:Roe,bidiS4AN:xoe,bidiS5:Foe,bidiS6:$oe}});var uB=y((YTe,koe)=>{koe.exports=[[[0,44],4],[[45,46],2],[47,4],[[48,57],2],[[58,64],4],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],4],[[97,122],2],[[123,127],4],[[128,159],3],[160,5," "],[[161,167],2],[168,5," \u0308"],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,5," \u0304"],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,5," \u0301"],[181,1,"\u03BC"],[182,2],[183,2],[184,5," \u0327"],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"1\u20444"],[189,1,"1\u20442"],[190,1,"3\u20444"],[191,2],[192,1,"\xE0"],[193,1,"\xE1"],[194,1,"\xE2"],[195,1,"\xE3"],[196,1,"\xE4"],[197,1,"\xE5"],[198,1,"\xE6"],[199,1,"\xE7"],[200,1,"\xE8"],[201,1,"\xE9"],[202,1,"\xEA"],[203,1,"\xEB"],[204,1,"\xEC"],[205,1,"\xED"],[206,1,"\xEE"],[207,1,"\xEF"],[208,1,"\xF0"],[209,1,"\xF1"],[210,1,"\xF2"],[211,1,"\xF3"],[212,1,"\xF4"],[213,1,"\xF5"],[214,1,"\xF6"],[215,2],[216,1,"\xF8"],[217,1,"\xF9"],[218,1,"\xFA"],[219,1,"\xFB"],[220,1,"\xFC"],[221,1,"\xFD"],[222,1,"\xFE"],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,"\u0101"],[257,2],[258,1,"\u0103"],[259,2],[260,1,"\u0105"],[261,2],[262,1,"\u0107"],[263,2],[264,1,"\u0109"],[265,2],[266,1,"\u010B"],[267,2],[268,1,"\u010D"],[269,2],[270,1,"\u010F"],[271,2],[272,1,"\u0111"],[273,2],[274,1,"\u0113"],[275,2],[276,1,"\u0115"],[277,2],[278,1,"\u0117"],[279,2],[280,1,"\u0119"],[281,2],[282,1,"\u011B"],[283,2],[284,1,"\u011D"],[285,2],[286,1,"\u011F"],[287,2],[288,1,"\u0121"],[289,2],[290,1,"\u0123"],[291,2],[292,1,"\u0125"],[293,2],[294,1,"\u0127"],[295,2],[296,1,"\u0129"],[297,2],[298,1,"\u012B"],[299,2],[300,1,"\u012D"],[301,2],[302,1,"\u012F"],[303,2],[304,1,"i\u0307"],[305,2],[[306,307],1,"ij"],[308,1,"\u0135"],[309,2],[310,1,"\u0137"],[[311,312],2],[313,1,"\u013A"],[314,2],[315,1,"\u013C"],[316,2],[317,1,"\u013E"],[318,2],[[319,320],1,"l\xB7"],[321,1,"\u0142"],[322,2],[323,1,"\u0144"],[324,2],[325,1,"\u0146"],[326,2],[327,1,"\u0148"],[328,2],[329,1,"\u02BCn"],[330,1,"\u014B"],[331,2],[332,1,"\u014D"],[333,2],[334,1,"\u014F"],[335,2],[336,1,"\u0151"],[337,2],[338,1,"\u0153"],[339,2],[340,1,"\u0155"],[341,2],[342,1,"\u0157"],[343,2],[344,1,"\u0159"],[345,2],[346,1,"\u015B"],[347,2],[348,1,"\u015D"],[349,2],[350,1,"\u015F"],[351,2],[352,1,"\u0161"],[353,2],[354,1,"\u0163"],[355,2],[356,1,"\u0165"],[357,2],[358,1,"\u0167"],[359,2],[360,1,"\u0169"],[361,2],[362,1,"\u016B"],[363,2],[364,1,"\u016D"],[365,2],[366,1,"\u016F"],[367,2],[368,1,"\u0171"],[369,2],[370,1,"\u0173"],[371,2],[372,1,"\u0175"],[373,2],[374,1,"\u0177"],[375,2],[376,1,"\xFF"],[377,1,"\u017A"],[378,2],[379,1,"\u017C"],[380,2],[381,1,"\u017E"],[382,2],[383,1,"s"],[384,2],[385,1,"\u0253"],[386,1,"\u0183"],[387,2],[388,1,"\u0185"],[389,2],[390,1,"\u0254"],[391,1,"\u0188"],[392,2],[393,1,"\u0256"],[394,1,"\u0257"],[395,1,"\u018C"],[[396,397],2],[398,1,"\u01DD"],[399,1,"\u0259"],[400,1,"\u025B"],[401,1,"\u0192"],[402,2],[403,1,"\u0260"],[404,1,"\u0263"],[405,2],[406,1,"\u0269"],[407,1,"\u0268"],[408,1,"\u0199"],[[409,411],2],[412,1,"\u026F"],[413,1,"\u0272"],[414,2],[415,1,"\u0275"],[416,1,"\u01A1"],[417,2],[418,1,"\u01A3"],[419,2],[420,1,"\u01A5"],[421,2],[422,1,"\u0280"],[423,1,"\u01A8"],[424,2],[425,1,"\u0283"],[[426,427],2],[428,1,"\u01AD"],[429,2],[430,1,"\u0288"],[431,1,"\u01B0"],[432,2],[433,1,"\u028A"],[434,1,"\u028B"],[435,1,"\u01B4"],[436,2],[437,1,"\u01B6"],[438,2],[439,1,"\u0292"],[440,1,"\u01B9"],[[441,443],2],[444,1,"\u01BD"],[[445,451],2],[[452,454],1,"d\u017E"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,"\u01CE"],[462,2],[463,1,"\u01D0"],[464,2],[465,1,"\u01D2"],[466,2],[467,1,"\u01D4"],[468,2],[469,1,"\u01D6"],[470,2],[471,1,"\u01D8"],[472,2],[473,1,"\u01DA"],[474,2],[475,1,"\u01DC"],[[476,477],2],[478,1,"\u01DF"],[479,2],[480,1,"\u01E1"],[481,2],[482,1,"\u01E3"],[483,2],[484,1,"\u01E5"],[485,2],[486,1,"\u01E7"],[487,2],[488,1,"\u01E9"],[489,2],[490,1,"\u01EB"],[491,2],[492,1,"\u01ED"],[493,2],[494,1,"\u01EF"],[[495,496],2],[[497,499],1,"dz"],[500,1,"\u01F5"],[501,2],[502,1,"\u0195"],[503,1,"\u01BF"],[504,1,"\u01F9"],[505,2],[506,1,"\u01FB"],[507,2],[508,1,"\u01FD"],[509,2],[510,1,"\u01FF"],[511,2],[512,1,"\u0201"],[513,2],[514,1,"\u0203"],[515,2],[516,1,"\u0205"],[517,2],[518,1,"\u0207"],[519,2],[520,1,"\u0209"],[521,2],[522,1,"\u020B"],[523,2],[524,1,"\u020D"],[525,2],[526,1,"\u020F"],[527,2],[528,1,"\u0211"],[529,2],[530,1,"\u0213"],[531,2],[532,1,"\u0215"],[533,2],[534,1,"\u0217"],[535,2],[536,1,"\u0219"],[537,2],[538,1,"\u021B"],[539,2],[540,1,"\u021D"],[541,2],[542,1,"\u021F"],[543,2],[544,1,"\u019E"],[545,2],[546,1,"\u0223"],[547,2],[548,1,"\u0225"],[549,2],[550,1,"\u0227"],[551,2],[552,1,"\u0229"],[553,2],[554,1,"\u022B"],[555,2],[556,1,"\u022D"],[557,2],[558,1,"\u022F"],[559,2],[560,1,"\u0231"],[561,2],[562,1,"\u0233"],[563,2],[[564,566],2],[[567,569],2],[570,1,"\u2C65"],[571,1,"\u023C"],[572,2],[573,1,"\u019A"],[574,1,"\u2C66"],[[575,576],2],[577,1,"\u0242"],[578,2],[579,1,"\u0180"],[580,1,"\u0289"],[581,1,"\u028C"],[582,1,"\u0247"],[583,2],[584,1,"\u0249"],[585,2],[586,1,"\u024B"],[587,2],[588,1,"\u024D"],[589,2],[590,1,"\u024F"],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,"\u0266"],[690,1,"j"],[691,1,"r"],[692,1,"\u0279"],[693,1,"\u027B"],[694,1,"\u0281"],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,5," \u0306"],[729,5," \u0307"],[730,5," \u030A"],[731,5," \u0328"],[732,5," \u0303"],[733,5," \u030B"],[734,2],[735,2],[736,1,"\u0263"],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,"\u0295"],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,"\u0300"],[833,1,"\u0301"],[834,2],[835,1,"\u0313"],[836,1,"\u0308\u0301"],[837,1,"\u03B9"],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,"\u0371"],[881,2],[882,1,"\u0373"],[883,2],[884,1,"\u02B9"],[885,2],[886,1,"\u0377"],[887,2],[[888,889],3],[890,5," \u03B9"],[[891,893],2],[894,5,";"],[895,1,"\u03F3"],[[896,899],3],[900,5," \u0301"],[901,5," \u0308\u0301"],[902,1,"\u03AC"],[903,1,"\xB7"],[904,1,"\u03AD"],[905,1,"\u03AE"],[906,1,"\u03AF"],[907,3],[908,1,"\u03CC"],[909,3],[910,1,"\u03CD"],[911,1,"\u03CE"],[912,2],[913,1,"\u03B1"],[914,1,"\u03B2"],[915,1,"\u03B3"],[916,1,"\u03B4"],[917,1,"\u03B5"],[918,1,"\u03B6"],[919,1,"\u03B7"],[920,1,"\u03B8"],[921,1,"\u03B9"],[922,1,"\u03BA"],[923,1,"\u03BB"],[924,1,"\u03BC"],[925,1,"\u03BD"],[926,1,"\u03BE"],[927,1,"\u03BF"],[928,1,"\u03C0"],[929,1,"\u03C1"],[930,3],[931,1,"\u03C3"],[932,1,"\u03C4"],[933,1,"\u03C5"],[934,1,"\u03C6"],[935,1,"\u03C7"],[936,1,"\u03C8"],[937,1,"\u03C9"],[938,1,"\u03CA"],[939,1,"\u03CB"],[[940,961],2],[962,6,"\u03C3"],[[963,974],2],[975,1,"\u03D7"],[976,1,"\u03B2"],[977,1,"\u03B8"],[978,1,"\u03C5"],[979,1,"\u03CD"],[980,1,"\u03CB"],[981,1,"\u03C6"],[982,1,"\u03C0"],[983,2],[984,1,"\u03D9"],[985,2],[986,1,"\u03DB"],[987,2],[988,1,"\u03DD"],[989,2],[990,1,"\u03DF"],[991,2],[992,1,"\u03E1"],[993,2],[994,1,"\u03E3"],[995,2],[996,1,"\u03E5"],[997,2],[998,1,"\u03E7"],[999,2],[1e3,1,"\u03E9"],[1001,2],[1002,1,"\u03EB"],[1003,2],[1004,1,"\u03ED"],[1005,2],[1006,1,"\u03EF"],[1007,2],[1008,1,"\u03BA"],[1009,1,"\u03C1"],[1010,1,"\u03C3"],[1011,2],[1012,1,"\u03B8"],[1013,1,"\u03B5"],[1014,2],[1015,1,"\u03F8"],[1016,2],[1017,1,"\u03C3"],[1018,1,"\u03FB"],[1019,2],[1020,2],[1021,1,"\u037B"],[1022,1,"\u037C"],[1023,1,"\u037D"],[1024,1,"\u0450"],[1025,1,"\u0451"],[1026,1,"\u0452"],[1027,1,"\u0453"],[1028,1,"\u0454"],[1029,1,"\u0455"],[1030,1,"\u0456"],[1031,1,"\u0457"],[1032,1,"\u0458"],[1033,1,"\u0459"],[1034,1,"\u045A"],[1035,1,"\u045B"],[1036,1,"\u045C"],[1037,1,"\u045D"],[1038,1,"\u045E"],[1039,1,"\u045F"],[1040,1,"\u0430"],[1041,1,"\u0431"],[1042,1,"\u0432"],[1043,1,"\u0433"],[1044,1,"\u0434"],[1045,1,"\u0435"],[1046,1,"\u0436"],[1047,1,"\u0437"],[1048,1,"\u0438"],[1049,1,"\u0439"],[1050,1,"\u043A"],[1051,1,"\u043B"],[1052,1,"\u043C"],[1053,1,"\u043D"],[1054,1,"\u043E"],[1055,1,"\u043F"],[1056,1,"\u0440"],[1057,1,"\u0441"],[1058,1,"\u0442"],[1059,1,"\u0443"],[1060,1,"\u0444"],[1061,1,"\u0445"],[1062,1,"\u0446"],[1063,1,"\u0447"],[1064,1,"\u0448"],[1065,1,"\u0449"],[1066,1,"\u044A"],[1067,1,"\u044B"],[1068,1,"\u044C"],[1069,1,"\u044D"],[1070,1,"\u044E"],[1071,1,"\u044F"],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,"\u0461"],[1121,2],[1122,1,"\u0463"],[1123,2],[1124,1,"\u0465"],[1125,2],[1126,1,"\u0467"],[1127,2],[1128,1,"\u0469"],[1129,2],[1130,1,"\u046B"],[1131,2],[1132,1,"\u046D"],[1133,2],[1134,1,"\u046F"],[1135,2],[1136,1,"\u0471"],[1137,2],[1138,1,"\u0473"],[1139,2],[1140,1,"\u0475"],[1141,2],[1142,1,"\u0477"],[1143,2],[1144,1,"\u0479"],[1145,2],[1146,1,"\u047B"],[1147,2],[1148,1,"\u047D"],[1149,2],[1150,1,"\u047F"],[1151,2],[1152,1,"\u0481"],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,"\u048B"],[1163,2],[1164,1,"\u048D"],[1165,2],[1166,1,"\u048F"],[1167,2],[1168,1,"\u0491"],[1169,2],[1170,1,"\u0493"],[1171,2],[1172,1,"\u0495"],[1173,2],[1174,1,"\u0497"],[1175,2],[1176,1,"\u0499"],[1177,2],[1178,1,"\u049B"],[1179,2],[1180,1,"\u049D"],[1181,2],[1182,1,"\u049F"],[1183,2],[1184,1,"\u04A1"],[1185,2],[1186,1,"\u04A3"],[1187,2],[1188,1,"\u04A5"],[1189,2],[1190,1,"\u04A7"],[1191,2],[1192,1,"\u04A9"],[1193,2],[1194,1,"\u04AB"],[1195,2],[1196,1,"\u04AD"],[1197,2],[1198,1,"\u04AF"],[1199,2],[1200,1,"\u04B1"],[1201,2],[1202,1,"\u04B3"],[1203,2],[1204,1,"\u04B5"],[1205,2],[1206,1,"\u04B7"],[1207,2],[1208,1,"\u04B9"],[1209,2],[1210,1,"\u04BB"],[1211,2],[1212,1,"\u04BD"],[1213,2],[1214,1,"\u04BF"],[1215,2],[1216,3],[1217,1,"\u04C2"],[1218,2],[1219,1,"\u04C4"],[1220,2],[1221,1,"\u04C6"],[1222,2],[1223,1,"\u04C8"],[1224,2],[1225,1,"\u04CA"],[1226,2],[1227,1,"\u04CC"],[1228,2],[1229,1,"\u04CE"],[1230,2],[1231,2],[1232,1,"\u04D1"],[1233,2],[1234,1,"\u04D3"],[1235,2],[1236,1,"\u04D5"],[1237,2],[1238,1,"\u04D7"],[1239,2],[1240,1,"\u04D9"],[1241,2],[1242,1,"\u04DB"],[1243,2],[1244,1,"\u04DD"],[1245,2],[1246,1,"\u04DF"],[1247,2],[1248,1,"\u04E1"],[1249,2],[1250,1,"\u04E3"],[1251,2],[1252,1,"\u04E5"],[1253,2],[1254,1,"\u04E7"],[1255,2],[1256,1,"\u04E9"],[1257,2],[1258,1,"\u04EB"],[1259,2],[1260,1,"\u04ED"],[1261,2],[1262,1,"\u04EF"],[1263,2],[1264,1,"\u04F1"],[1265,2],[1266,1,"\u04F3"],[1267,2],[1268,1,"\u04F5"],[1269,2],[1270,1,"\u04F7"],[1271,2],[1272,1,"\u04F9"],[1273,2],[1274,1,"\u04FB"],[1275,2],[1276,1,"\u04FD"],[1277,2],[1278,1,"\u04FF"],[1279,2],[1280,1,"\u0501"],[1281,2],[1282,1,"\u0503"],[1283,2],[1284,1,"\u0505"],[1285,2],[1286,1,"\u0507"],[1287,2],[1288,1,"\u0509"],[1289,2],[1290,1,"\u050B"],[1291,2],[1292,1,"\u050D"],[1293,2],[1294,1,"\u050F"],[1295,2],[1296,1,"\u0511"],[1297,2],[1298,1,"\u0513"],[1299,2],[1300,1,"\u0515"],[1301,2],[1302,1,"\u0517"],[1303,2],[1304,1,"\u0519"],[1305,2],[1306,1,"\u051B"],[1307,2],[1308,1,"\u051D"],[1309,2],[1310,1,"\u051F"],[1311,2],[1312,1,"\u0521"],[1313,2],[1314,1,"\u0523"],[1315,2],[1316,1,"\u0525"],[1317,2],[1318,1,"\u0527"],[1319,2],[1320,1,"\u0529"],[1321,2],[1322,1,"\u052B"],[1323,2],[1324,1,"\u052D"],[1325,2],[1326,1,"\u052F"],[1327,2],[1328,3],[1329,1,"\u0561"],[1330,1,"\u0562"],[1331,1,"\u0563"],[1332,1,"\u0564"],[1333,1,"\u0565"],[1334,1,"\u0566"],[1335,1,"\u0567"],[1336,1,"\u0568"],[1337,1,"\u0569"],[1338,1,"\u056A"],[1339,1,"\u056B"],[1340,1,"\u056C"],[1341,1,"\u056D"],[1342,1,"\u056E"],[1343,1,"\u056F"],[1344,1,"\u0570"],[1345,1,"\u0571"],[1346,1,"\u0572"],[1347,1,"\u0573"],[1348,1,"\u0574"],[1349,1,"\u0575"],[1350,1,"\u0576"],[1351,1,"\u0577"],[1352,1,"\u0578"],[1353,1,"\u0579"],[1354,1,"\u057A"],[1355,1,"\u057B"],[1356,1,"\u057C"],[1357,1,"\u057D"],[1358,1,"\u057E"],[1359,1,"\u057F"],[1360,1,"\u0580"],[1361,1,"\u0581"],[1362,1,"\u0582"],[1363,1,"\u0583"],[1364,1,"\u0584"],[1365,1,"\u0585"],[1366,1,"\u0586"],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,"\u0565\u0582"],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,"\u0627\u0674"],[1654,1,"\u0648\u0674"],[1655,1,"\u06C7\u0674"],[1656,1,"\u064A\u0674"],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2199],3],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,"\u0915\u093C"],[2393,1,"\u0916\u093C"],[2394,1,"\u0917\u093C"],[2395,1,"\u091C\u093C"],[2396,1,"\u0921\u093C"],[2397,1,"\u0922\u093C"],[2398,1,"\u092B\u093C"],[2399,1,"\u092F\u093C"],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,"\u09A1\u09BC"],[2525,1,"\u09A2\u09BC"],[2526,3],[2527,1,"\u09AF\u09BC"],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,"\u0A32\u0A3C"],[2612,3],[2613,2],[2614,1,"\u0A38\u0A3C"],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,"\u0A16\u0A3C"],[2650,1,"\u0A17\u0A3C"],[2651,1,"\u0A1C\u0A3C"],[2652,2],[2653,3],[2654,1,"\u0A2B\u0A3C"],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,"\u0B21\u0B3C"],[2909,1,"\u0B22\u0B3C"],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[3315,2],[[3316,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,"\u0E4D\u0E32"],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,"\u0ECD\u0EB2"],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[3790,2],[3791,3],[[3792,3801],2],[[3802,3803],3],[3804,1,"\u0EAB\u0E99"],[3805,1,"\u0EAB\u0EA1"],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,"\u0F0B"],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,"\u0F42\u0FB7"],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,"\u0F4C\u0FB7"],[[3918,3921],2],[3922,1,"\u0F51\u0FB7"],[[3923,3926],2],[3927,1,"\u0F56\u0FB7"],[[3928,3931],2],[3932,1,"\u0F5B\u0FB7"],[[3933,3944],2],[3945,1,"\u0F40\u0FB5"],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,"\u0F71\u0F72"],[3956,2],[3957,1,"\u0F71\u0F74"],[3958,1,"\u0FB2\u0F80"],[3959,1,"\u0FB2\u0F71\u0F80"],[3960,1,"\u0FB3\u0F80"],[3961,1,"\u0FB3\u0F71\u0F80"],[[3962,3968],2],[3969,1,"\u0F71\u0F80"],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,"\u0F92\u0FB7"],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,"\u0F9C\u0FB7"],[[3998,4001],2],[4002,1,"\u0FA1\u0FB7"],[[4003,4006],2],[4007,1,"\u0FA6\u0FB7"],[[4008,4011],2],[4012,1,"\u0FAB\u0FB7"],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,"\u0F90\u0FB5"],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[[4256,4293],3],[4294,3],[4295,1,"\u2D27"],[[4296,4300],3],[4301,1,"\u2D2D"],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,"\u10DC"],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],3],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,"\u13F0"],[5113,1,"\u13F1"],[5114,1,"\u13F2"],[5115,1,"\u13F3"],[5116,1,"\u13F4"],[5117,1,"\u13F5"],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6e3],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],3],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6149],2],[6150,3],[[6151,6154],2],[[6155,6157],7],[6158,3],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[[6989,6991],3],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,3],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,"\u0432"],[7297,1,"\u0434"],[7298,1,"\u043E"],[7299,1,"\u0441"],[[7300,7301],1,"\u0442"],[7302,1,"\u044A"],[7303,1,"\u0463"],[7304,1,"\uA64B"],[[7305,7311],3],[7312,1,"\u10D0"],[7313,1,"\u10D1"],[7314,1,"\u10D2"],[7315,1,"\u10D3"],[7316,1,"\u10D4"],[7317,1,"\u10D5"],[7318,1,"\u10D6"],[7319,1,"\u10D7"],[7320,1,"\u10D8"],[7321,1,"\u10D9"],[7322,1,"\u10DA"],[7323,1,"\u10DB"],[7324,1,"\u10DC"],[7325,1,"\u10DD"],[7326,1,"\u10DE"],[7327,1,"\u10DF"],[7328,1,"\u10E0"],[7329,1,"\u10E1"],[7330,1,"\u10E2"],[7331,1,"\u10E3"],[7332,1,"\u10E4"],[7333,1,"\u10E5"],[7334,1,"\u10E6"],[7335,1,"\u10E7"],[7336,1,"\u10E8"],[7337,1,"\u10E9"],[7338,1,"\u10EA"],[7339,1,"\u10EB"],[7340,1,"\u10EC"],[7341,1,"\u10ED"],[7342,1,"\u10EE"],[7343,1,"\u10EF"],[7344,1,"\u10F0"],[7345,1,"\u10F1"],[7346,1,"\u10F2"],[7347,1,"\u10F3"],[7348,1,"\u10F4"],[7349,1,"\u10F5"],[7350,1,"\u10F6"],[7351,1,"\u10F7"],[7352,1,"\u10F8"],[7353,1,"\u10F9"],[7354,1,"\u10FA"],[[7355,7356],3],[7357,1,"\u10FD"],[7358,1,"\u10FE"],[7359,1,"\u10FF"],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,"\xE6"],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,"\u01DD"],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,"\u0223"],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,"\u0250"],[7493,1,"\u0251"],[7494,1,"\u1D02"],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,"\u0259"],[7499,1,"\u025B"],[7500,1,"\u025C"],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,"\u014B"],[7506,1,"o"],[7507,1,"\u0254"],[7508,1,"\u1D16"],[7509,1,"\u1D17"],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,"\u1D1D"],[7514,1,"\u026F"],[7515,1,"v"],[7516,1,"\u1D25"],[7517,1,"\u03B2"],[7518,1,"\u03B3"],[7519,1,"\u03B4"],[7520,1,"\u03C6"],[7521,1,"\u03C7"],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,"\u03B2"],[7527,1,"\u03B3"],[7528,1,"\u03C1"],[7529,1,"\u03C6"],[7530,1,"\u03C7"],[7531,2],[[7532,7543],2],[7544,1,"\u043D"],[[7545,7578],2],[7579,1,"\u0252"],[7580,1,"c"],[7581,1,"\u0255"],[7582,1,"\xF0"],[7583,1,"\u025C"],[7584,1,"f"],[7585,1,"\u025F"],[7586,1,"\u0261"],[7587,1,"\u0265"],[7588,1,"\u0268"],[7589,1,"\u0269"],[7590,1,"\u026A"],[7591,1,"\u1D7B"],[7592,1,"\u029D"],[7593,1,"\u026D"],[7594,1,"\u1D85"],[7595,1,"\u029F"],[7596,1,"\u0271"],[7597,1,"\u0270"],[7598,1,"\u0272"],[7599,1,"\u0273"],[7600,1,"\u0274"],[7601,1,"\u0275"],[7602,1,"\u0278"],[7603,1,"\u0282"],[7604,1,"\u0283"],[7605,1,"\u01AB"],[7606,1,"\u0289"],[7607,1,"\u028A"],[7608,1,"\u1D1C"],[7609,1,"\u028B"],[7610,1,"\u028C"],[7611,1,"z"],[7612,1,"\u0290"],[7613,1,"\u0291"],[7614,1,"\u0292"],[7615,1,"\u03B8"],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,"\u1E01"],[7681,2],[7682,1,"\u1E03"],[7683,2],[7684,1,"\u1E05"],[7685,2],[7686,1,"\u1E07"],[7687,2],[7688,1,"\u1E09"],[7689,2],[7690,1,"\u1E0B"],[7691,2],[7692,1,"\u1E0D"],[7693,2],[7694,1,"\u1E0F"],[7695,2],[7696,1,"\u1E11"],[7697,2],[7698,1,"\u1E13"],[7699,2],[7700,1,"\u1E15"],[7701,2],[7702,1,"\u1E17"],[7703,2],[7704,1,"\u1E19"],[7705,2],[7706,1,"\u1E1B"],[7707,2],[7708,1,"\u1E1D"],[7709,2],[7710,1,"\u1E1F"],[7711,2],[7712,1,"\u1E21"],[7713,2],[7714,1,"\u1E23"],[7715,2],[7716,1,"\u1E25"],[7717,2],[7718,1,"\u1E27"],[7719,2],[7720,1,"\u1E29"],[7721,2],[7722,1,"\u1E2B"],[7723,2],[7724,1,"\u1E2D"],[7725,2],[7726,1,"\u1E2F"],[7727,2],[7728,1,"\u1E31"],[7729,2],[7730,1,"\u1E33"],[7731,2],[7732,1,"\u1E35"],[7733,2],[7734,1,"\u1E37"],[7735,2],[7736,1,"\u1E39"],[7737,2],[7738,1,"\u1E3B"],[7739,2],[7740,1,"\u1E3D"],[7741,2],[7742,1,"\u1E3F"],[7743,2],[7744,1,"\u1E41"],[7745,2],[7746,1,"\u1E43"],[7747,2],[7748,1,"\u1E45"],[7749,2],[7750,1,"\u1E47"],[7751,2],[7752,1,"\u1E49"],[7753,2],[7754,1,"\u1E4B"],[7755,2],[7756,1,"\u1E4D"],[7757,2],[7758,1,"\u1E4F"],[7759,2],[7760,1,"\u1E51"],[7761,2],[7762,1,"\u1E53"],[7763,2],[7764,1,"\u1E55"],[7765,2],[7766,1,"\u1E57"],[7767,2],[7768,1,"\u1E59"],[7769,2],[7770,1,"\u1E5B"],[7771,2],[7772,1,"\u1E5D"],[7773,2],[7774,1,"\u1E5F"],[7775,2],[7776,1,"\u1E61"],[7777,2],[7778,1,"\u1E63"],[7779,2],[7780,1,"\u1E65"],[7781,2],[7782,1,"\u1E67"],[7783,2],[7784,1,"\u1E69"],[7785,2],[7786,1,"\u1E6B"],[7787,2],[7788,1,"\u1E6D"],[7789,2],[7790,1,"\u1E6F"],[7791,2],[7792,1,"\u1E71"],[7793,2],[7794,1,"\u1E73"],[7795,2],[7796,1,"\u1E75"],[7797,2],[7798,1,"\u1E77"],[7799,2],[7800,1,"\u1E79"],[7801,2],[7802,1,"\u1E7B"],[7803,2],[7804,1,"\u1E7D"],[7805,2],[7806,1,"\u1E7F"],[7807,2],[7808,1,"\u1E81"],[7809,2],[7810,1,"\u1E83"],[7811,2],[7812,1,"\u1E85"],[7813,2],[7814,1,"\u1E87"],[7815,2],[7816,1,"\u1E89"],[7817,2],[7818,1,"\u1E8B"],[7819,2],[7820,1,"\u1E8D"],[7821,2],[7822,1,"\u1E8F"],[7823,2],[7824,1,"\u1E91"],[7825,2],[7826,1,"\u1E93"],[7827,2],[7828,1,"\u1E95"],[[7829,7833],2],[7834,1,"a\u02BE"],[7835,1,"\u1E61"],[[7836,7837],2],[7838,1,"ss"],[7839,2],[7840,1,"\u1EA1"],[7841,2],[7842,1,"\u1EA3"],[7843,2],[7844,1,"\u1EA5"],[7845,2],[7846,1,"\u1EA7"],[7847,2],[7848,1,"\u1EA9"],[7849,2],[7850,1,"\u1EAB"],[7851,2],[7852,1,"\u1EAD"],[7853,2],[7854,1,"\u1EAF"],[7855,2],[7856,1,"\u1EB1"],[7857,2],[7858,1,"\u1EB3"],[7859,2],[7860,1,"\u1EB5"],[7861,2],[7862,1,"\u1EB7"],[7863,2],[7864,1,"\u1EB9"],[7865,2],[7866,1,"\u1EBB"],[7867,2],[7868,1,"\u1EBD"],[7869,2],[7870,1,"\u1EBF"],[7871,2],[7872,1,"\u1EC1"],[7873,2],[7874,1,"\u1EC3"],[7875,2],[7876,1,"\u1EC5"],[7877,2],[7878,1,"\u1EC7"],[7879,2],[7880,1,"\u1EC9"],[7881,2],[7882,1,"\u1ECB"],[7883,2],[7884,1,"\u1ECD"],[7885,2],[7886,1,"\u1ECF"],[7887,2],[7888,1,"\u1ED1"],[7889,2],[7890,1,"\u1ED3"],[7891,2],[7892,1,"\u1ED5"],[7893,2],[7894,1,"\u1ED7"],[7895,2],[7896,1,"\u1ED9"],[7897,2],[7898,1,"\u1EDB"],[7899,2],[7900,1,"\u1EDD"],[7901,2],[7902,1,"\u1EDF"],[7903,2],[7904,1,"\u1EE1"],[7905,2],[7906,1,"\u1EE3"],[7907,2],[7908,1,"\u1EE5"],[7909,2],[7910,1,"\u1EE7"],[7911,2],[7912,1,"\u1EE9"],[7913,2],[7914,1,"\u1EEB"],[7915,2],[7916,1,"\u1EED"],[7917,2],[7918,1,"\u1EEF"],[7919,2],[7920,1,"\u1EF1"],[7921,2],[7922,1,"\u1EF3"],[7923,2],[7924,1,"\u1EF5"],[7925,2],[7926,1,"\u1EF7"],[7927,2],[7928,1,"\u1EF9"],[7929,2],[7930,1,"\u1EFB"],[7931,2],[7932,1,"\u1EFD"],[7933,2],[7934,1,"\u1EFF"],[7935,2],[[7936,7943],2],[7944,1,"\u1F00"],[7945,1,"\u1F01"],[7946,1,"\u1F02"],[7947,1,"\u1F03"],[7948,1,"\u1F04"],[7949,1,"\u1F05"],[7950,1,"\u1F06"],[7951,1,"\u1F07"],[[7952,7957],2],[[7958,7959],3],[7960,1,"\u1F10"],[7961,1,"\u1F11"],[7962,1,"\u1F12"],[7963,1,"\u1F13"],[7964,1,"\u1F14"],[7965,1,"\u1F15"],[[7966,7967],3],[[7968,7975],2],[7976,1,"\u1F20"],[7977,1,"\u1F21"],[7978,1,"\u1F22"],[7979,1,"\u1F23"],[7980,1,"\u1F24"],[7981,1,"\u1F25"],[7982,1,"\u1F26"],[7983,1,"\u1F27"],[[7984,7991],2],[7992,1,"\u1F30"],[7993,1,"\u1F31"],[7994,1,"\u1F32"],[7995,1,"\u1F33"],[7996,1,"\u1F34"],[7997,1,"\u1F35"],[7998,1,"\u1F36"],[7999,1,"\u1F37"],[[8e3,8005],2],[[8006,8007],3],[8008,1,"\u1F40"],[8009,1,"\u1F41"],[8010,1,"\u1F42"],[8011,1,"\u1F43"],[8012,1,"\u1F44"],[8013,1,"\u1F45"],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,"\u1F51"],[8026,3],[8027,1,"\u1F53"],[8028,3],[8029,1,"\u1F55"],[8030,3],[8031,1,"\u1F57"],[[8032,8039],2],[8040,1,"\u1F60"],[8041,1,"\u1F61"],[8042,1,"\u1F62"],[8043,1,"\u1F63"],[8044,1,"\u1F64"],[8045,1,"\u1F65"],[8046,1,"\u1F66"],[8047,1,"\u1F67"],[8048,2],[8049,1,"\u03AC"],[8050,2],[8051,1,"\u03AD"],[8052,2],[8053,1,"\u03AE"],[8054,2],[8055,1,"\u03AF"],[8056,2],[8057,1,"\u03CC"],[8058,2],[8059,1,"\u03CD"],[8060,2],[8061,1,"\u03CE"],[[8062,8063],3],[8064,1,"\u1F00\u03B9"],[8065,1,"\u1F01\u03B9"],[8066,1,"\u1F02\u03B9"],[8067,1,"\u1F03\u03B9"],[8068,1,"\u1F04\u03B9"],[8069,1,"\u1F05\u03B9"],[8070,1,"\u1F06\u03B9"],[8071,1,"\u1F07\u03B9"],[8072,1,"\u1F00\u03B9"],[8073,1,"\u1F01\u03B9"],[8074,1,"\u1F02\u03B9"],[8075,1,"\u1F03\u03B9"],[8076,1,"\u1F04\u03B9"],[8077,1,"\u1F05\u03B9"],[8078,1,"\u1F06\u03B9"],[8079,1,"\u1F07\u03B9"],[8080,1,"\u1F20\u03B9"],[8081,1,"\u1F21\u03B9"],[8082,1,"\u1F22\u03B9"],[8083,1,"\u1F23\u03B9"],[8084,1,"\u1F24\u03B9"],[8085,1,"\u1F25\u03B9"],[8086,1,"\u1F26\u03B9"],[8087,1,"\u1F27\u03B9"],[8088,1,"\u1F20\u03B9"],[8089,1,"\u1F21\u03B9"],[8090,1,"\u1F22\u03B9"],[8091,1,"\u1F23\u03B9"],[8092,1,"\u1F24\u03B9"],[8093,1,"\u1F25\u03B9"],[8094,1,"\u1F26\u03B9"],[8095,1,"\u1F27\u03B9"],[8096,1,"\u1F60\u03B9"],[8097,1,"\u1F61\u03B9"],[8098,1,"\u1F62\u03B9"],[8099,1,"\u1F63\u03B9"],[8100,1,"\u1F64\u03B9"],[8101,1,"\u1F65\u03B9"],[8102,1,"\u1F66\u03B9"],[8103,1,"\u1F67\u03B9"],[8104,1,"\u1F60\u03B9"],[8105,1,"\u1F61\u03B9"],[8106,1,"\u1F62\u03B9"],[8107,1,"\u1F63\u03B9"],[8108,1,"\u1F64\u03B9"],[8109,1,"\u1F65\u03B9"],[8110,1,"\u1F66\u03B9"],[8111,1,"\u1F67\u03B9"],[[8112,8113],2],[8114,1,"\u1F70\u03B9"],[8115,1,"\u03B1\u03B9"],[8116,1,"\u03AC\u03B9"],[8117,3],[8118,2],[8119,1,"\u1FB6\u03B9"],[8120,1,"\u1FB0"],[8121,1,"\u1FB1"],[8122,1,"\u1F70"],[8123,1,"\u03AC"],[8124,1,"\u03B1\u03B9"],[8125,5," \u0313"],[8126,1,"\u03B9"],[8127,5," \u0313"],[8128,5," \u0342"],[8129,5," \u0308\u0342"],[8130,1,"\u1F74\u03B9"],[8131,1,"\u03B7\u03B9"],[8132,1,"\u03AE\u03B9"],[8133,3],[8134,2],[8135,1,"\u1FC6\u03B9"],[8136,1,"\u1F72"],[8137,1,"\u03AD"],[8138,1,"\u1F74"],[8139,1,"\u03AE"],[8140,1,"\u03B7\u03B9"],[8141,5," \u0313\u0300"],[8142,5," \u0313\u0301"],[8143,5," \u0313\u0342"],[[8144,8146],2],[8147,1,"\u0390"],[[8148,8149],3],[[8150,8151],2],[8152,1,"\u1FD0"],[8153,1,"\u1FD1"],[8154,1,"\u1F76"],[8155,1,"\u03AF"],[8156,3],[8157,5," \u0314\u0300"],[8158,5," \u0314\u0301"],[8159,5," \u0314\u0342"],[[8160,8162],2],[8163,1,"\u03B0"],[[8164,8167],2],[8168,1,"\u1FE0"],[8169,1,"\u1FE1"],[8170,1,"\u1F7A"],[8171,1,"\u03CD"],[8172,1,"\u1FE5"],[8173,5," \u0308\u0300"],[8174,5," \u0308\u0301"],[8175,5,"`"],[[8176,8177],3],[8178,1,"\u1F7C\u03B9"],[8179,1,"\u03C9\u03B9"],[8180,1,"\u03CE\u03B9"],[8181,3],[8182,2],[8183,1,"\u1FF6\u03B9"],[8184,1,"\u1F78"],[8185,1,"\u03CC"],[8186,1,"\u1F7C"],[8187,1,"\u03CE"],[8188,1,"\u03C9\u03B9"],[8189,5," \u0301"],[8190,5," \u0314"],[8191,3],[[8192,8202],5," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,"\u2010"],[[8210,8214],2],[8215,5," \u0333"],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,5," "],[[8240,8242],2],[8243,1,"\u2032\u2032"],[8244,1,"\u2032\u2032\u2032"],[8245,2],[8246,1,"\u2035\u2035"],[8247,1,"\u2035\u2035\u2035"],[[8248,8251],2],[8252,5,"!!"],[8253,2],[8254,5," \u0305"],[[8255,8262],2],[8263,5,"??"],[8264,5,"?!"],[8265,5,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,"\u2032\u2032\u2032\u2032"],[[8280,8286],2],[8287,5," "],[8288,7],[[8289,8291],3],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],3],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,5,"+"],[8315,1,"\u2212"],[8316,5,"="],[8317,5,"("],[8318,5,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,5,"+"],[8331,1,"\u2212"],[8332,5,"="],[8333,5,"("],[8334,5,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,"\u0259"],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,5,"a/c"],[8449,5,"a/s"],[8450,1,"c"],[8451,1,"\xB0c"],[8452,2],[8453,5,"c/o"],[8454,5,"c/u"],[8455,1,"\u025B"],[8456,2],[8457,1,"\xB0f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,"\u0127"],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,"\u03C9"],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,"\xE5"],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,3],[8499,1,"m"],[8500,1,"o"],[8501,1,"\u05D0"],[8502,1,"\u05D1"],[8503,1,"\u05D2"],[8504,1,"\u05D3"],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,"\u03C0"],[[8509,8510],1,"\u03B3"],[8511,1,"\u03C0"],[8512,1,"\u2211"],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"1\u20447"],[8529,1,"1\u20449"],[8530,1,"1\u204410"],[8531,1,"1\u20443"],[8532,1,"2\u20443"],[8533,1,"1\u20445"],[8534,1,"2\u20445"],[8535,1,"3\u20445"],[8536,1,"4\u20445"],[8537,1,"1\u20446"],[8538,1,"5\u20446"],[8539,1,"1\u20448"],[8540,1,"3\u20448"],[8541,1,"5\u20448"],[8542,1,"7\u20448"],[8543,1,"1\u2044"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,3],[8580,2],[[8581,8584],2],[8585,1,"0\u20443"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,"\u222B\u222B"],[8749,1,"\u222B\u222B\u222B"],[8750,2],[8751,1,"\u222E\u222E"],[8752,1,"\u222E\u222E\u222E"],[[8753,8799],2],[8800,4],[[8801,8813],2],[[8814,8815],4],[[8816,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9e3],2],[9001,1,"\u3008"],[9002,1,"\u3009"],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,5,"(1)"],[9333,5,"(2)"],[9334,5,"(3)"],[9335,5,"(4)"],[9336,5,"(5)"],[9337,5,"(6)"],[9338,5,"(7)"],[9339,5,"(8)"],[9340,5,"(9)"],[9341,5,"(10)"],[9342,5,"(11)"],[9343,5,"(12)"],[9344,5,"(13)"],[9345,5,"(14)"],[9346,5,"(15)"],[9347,5,"(16)"],[9348,5,"(17)"],[9349,5,"(18)"],[9350,5,"(19)"],[9351,5,"(20)"],[[9352,9371],3],[9372,5,"(a)"],[9373,5,"(b)"],[9374,5,"(c)"],[9375,5,"(d)"],[9376,5,"(e)"],[9377,5,"(f)"],[9378,5,"(g)"],[9379,5,"(h)"],[9380,5,"(i)"],[9381,5,"(j)"],[9382,5,"(k)"],[9383,5,"(l)"],[9384,5,"(m)"],[9385,5,"(n)"],[9386,5,"(o)"],[9387,5,"(p)"],[9388,5,"(q)"],[9389,5,"(r)"],[9390,5,"(s)"],[9391,5,"(t)"],[9392,5,"(u)"],[9393,5,"(v)"],[9394,5,"(w)"],[9395,5,"(x)"],[9396,5,"(y)"],[9397,5,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,"\u222B\u222B\u222B\u222B"],[[10765,10867],2],[10868,5,"::="],[10869,5,"=="],[10870,5,"==="],[[10871,10971],2],[10972,1,"\u2ADD\u0338"],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,"\u2C30"],[11265,1,"\u2C31"],[11266,1,"\u2C32"],[11267,1,"\u2C33"],[11268,1,"\u2C34"],[11269,1,"\u2C35"],[11270,1,"\u2C36"],[11271,1,"\u2C37"],[11272,1,"\u2C38"],[11273,1,"\u2C39"],[11274,1,"\u2C3A"],[11275,1,"\u2C3B"],[11276,1,"\u2C3C"],[11277,1,"\u2C3D"],[11278,1,"\u2C3E"],[11279,1,"\u2C3F"],[11280,1,"\u2C40"],[11281,1,"\u2C41"],[11282,1,"\u2C42"],[11283,1,"\u2C43"],[11284,1,"\u2C44"],[11285,1,"\u2C45"],[11286,1,"\u2C46"],[11287,1,"\u2C47"],[11288,1,"\u2C48"],[11289,1,"\u2C49"],[11290,1,"\u2C4A"],[11291,1,"\u2C4B"],[11292,1,"\u2C4C"],[11293,1,"\u2C4D"],[11294,1,"\u2C4E"],[11295,1,"\u2C4F"],[11296,1,"\u2C50"],[11297,1,"\u2C51"],[11298,1,"\u2C52"],[11299,1,"\u2C53"],[11300,1,"\u2C54"],[11301,1,"\u2C55"],[11302,1,"\u2C56"],[11303,1,"\u2C57"],[11304,1,"\u2C58"],[11305,1,"\u2C59"],[11306,1,"\u2C5A"],[11307,1,"\u2C5B"],[11308,1,"\u2C5C"],[11309,1,"\u2C5D"],[11310,1,"\u2C5E"],[11311,1,"\u2C5F"],[[11312,11358],2],[11359,2],[11360,1,"\u2C61"],[11361,2],[11362,1,"\u026B"],[11363,1,"\u1D7D"],[11364,1,"\u027D"],[[11365,11366],2],[11367,1,"\u2C68"],[11368,2],[11369,1,"\u2C6A"],[11370,2],[11371,1,"\u2C6C"],[11372,2],[11373,1,"\u0251"],[11374,1,"\u0271"],[11375,1,"\u0250"],[11376,1,"\u0252"],[11377,2],[11378,1,"\u2C73"],[11379,2],[11380,2],[11381,1,"\u2C76"],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,"\u023F"],[11391,1,"\u0240"],[11392,1,"\u2C81"],[11393,2],[11394,1,"\u2C83"],[11395,2],[11396,1,"\u2C85"],[11397,2],[11398,1,"\u2C87"],[11399,2],[11400,1,"\u2C89"],[11401,2],[11402,1,"\u2C8B"],[11403,2],[11404,1,"\u2C8D"],[11405,2],[11406,1,"\u2C8F"],[11407,2],[11408,1,"\u2C91"],[11409,2],[11410,1,"\u2C93"],[11411,2],[11412,1,"\u2C95"],[11413,2],[11414,1,"\u2C97"],[11415,2],[11416,1,"\u2C99"],[11417,2],[11418,1,"\u2C9B"],[11419,2],[11420,1,"\u2C9D"],[11421,2],[11422,1,"\u2C9F"],[11423,2],[11424,1,"\u2CA1"],[11425,2],[11426,1,"\u2CA3"],[11427,2],[11428,1,"\u2CA5"],[11429,2],[11430,1,"\u2CA7"],[11431,2],[11432,1,"\u2CA9"],[11433,2],[11434,1,"\u2CAB"],[11435,2],[11436,1,"\u2CAD"],[11437,2],[11438,1,"\u2CAF"],[11439,2],[11440,1,"\u2CB1"],[11441,2],[11442,1,"\u2CB3"],[11443,2],[11444,1,"\u2CB5"],[11445,2],[11446,1,"\u2CB7"],[11447,2],[11448,1,"\u2CB9"],[11449,2],[11450,1,"\u2CBB"],[11451,2],[11452,1,"\u2CBD"],[11453,2],[11454,1,"\u2CBF"],[11455,2],[11456,1,"\u2CC1"],[11457,2],[11458,1,"\u2CC3"],[11459,2],[11460,1,"\u2CC5"],[11461,2],[11462,1,"\u2CC7"],[11463,2],[11464,1,"\u2CC9"],[11465,2],[11466,1,"\u2CCB"],[11467,2],[11468,1,"\u2CCD"],[11469,2],[11470,1,"\u2CCF"],[11471,2],[11472,1,"\u2CD1"],[11473,2],[11474,1,"\u2CD3"],[11475,2],[11476,1,"\u2CD5"],[11477,2],[11478,1,"\u2CD7"],[11479,2],[11480,1,"\u2CD9"],[11481,2],[11482,1,"\u2CDB"],[11483,2],[11484,1,"\u2CDD"],[11485,2],[11486,1,"\u2CDF"],[11487,2],[11488,1,"\u2CE1"],[11489,2],[11490,1,"\u2CE3"],[[11491,11492],2],[[11493,11498],2],[11499,1,"\u2CEC"],[11500,2],[11501,1,"\u2CEE"],[[11502,11505],2],[11506,1,"\u2CF3"],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,"\u2D61"],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,"\u6BCD"],[[11936,12018],2],[12019,1,"\u9F9F"],[[12020,12031],3],[12032,1,"\u4E00"],[12033,1,"\u4E28"],[12034,1,"\u4E36"],[12035,1,"\u4E3F"],[12036,1,"\u4E59"],[12037,1,"\u4E85"],[12038,1,"\u4E8C"],[12039,1,"\u4EA0"],[12040,1,"\u4EBA"],[12041,1,"\u513F"],[12042,1,"\u5165"],[12043,1,"\u516B"],[12044,1,"\u5182"],[12045,1,"\u5196"],[12046,1,"\u51AB"],[12047,1,"\u51E0"],[12048,1,"\u51F5"],[12049,1,"\u5200"],[12050,1,"\u529B"],[12051,1,"\u52F9"],[12052,1,"\u5315"],[12053,1,"\u531A"],[12054,1,"\u5338"],[12055,1,"\u5341"],[12056,1,"\u535C"],[12057,1,"\u5369"],[12058,1,"\u5382"],[12059,1,"\u53B6"],[12060,1,"\u53C8"],[12061,1,"\u53E3"],[12062,1,"\u56D7"],[12063,1,"\u571F"],[12064,1,"\u58EB"],[12065,1,"\u5902"],[12066,1,"\u590A"],[12067,1,"\u5915"],[12068,1,"\u5927"],[12069,1,"\u5973"],[12070,1,"\u5B50"],[12071,1,"\u5B80"],[12072,1,"\u5BF8"],[12073,1,"\u5C0F"],[12074,1,"\u5C22"],[12075,1,"\u5C38"],[12076,1,"\u5C6E"],[12077,1,"\u5C71"],[12078,1,"\u5DDB"],[12079,1,"\u5DE5"],[12080,1,"\u5DF1"],[12081,1,"\u5DFE"],[12082,1,"\u5E72"],[12083,1,"\u5E7A"],[12084,1,"\u5E7F"],[12085,1,"\u5EF4"],[12086,1,"\u5EFE"],[12087,1,"\u5F0B"],[12088,1,"\u5F13"],[12089,1,"\u5F50"],[12090,1,"\u5F61"],[12091,1,"\u5F73"],[12092,1,"\u5FC3"],[12093,1,"\u6208"],[12094,1,"\u6236"],[12095,1,"\u624B"],[12096,1,"\u652F"],[12097,1,"\u6534"],[12098,1,"\u6587"],[12099,1,"\u6597"],[12100,1,"\u65A4"],[12101,1,"\u65B9"],[12102,1,"\u65E0"],[12103,1,"\u65E5"],[12104,1,"\u66F0"],[12105,1,"\u6708"],[12106,1,"\u6728"],[12107,1,"\u6B20"],[12108,1,"\u6B62"],[12109,1,"\u6B79"],[12110,1,"\u6BB3"],[12111,1,"\u6BCB"],[12112,1,"\u6BD4"],[12113,1,"\u6BDB"],[12114,1,"\u6C0F"],[12115,1,"\u6C14"],[12116,1,"\u6C34"],[12117,1,"\u706B"],[12118,1,"\u722A"],[12119,1,"\u7236"],[12120,1,"\u723B"],[12121,1,"\u723F"],[12122,1,"\u7247"],[12123,1,"\u7259"],[12124,1,"\u725B"],[12125,1,"\u72AC"],[12126,1,"\u7384"],[12127,1,"\u7389"],[12128,1,"\u74DC"],[12129,1,"\u74E6"],[12130,1,"\u7518"],[12131,1,"\u751F"],[12132,1,"\u7528"],[12133,1,"\u7530"],[12134,1,"\u758B"],[12135,1,"\u7592"],[12136,1,"\u7676"],[12137,1,"\u767D"],[12138,1,"\u76AE"],[12139,1,"\u76BF"],[12140,1,"\u76EE"],[12141,1,"\u77DB"],[12142,1,"\u77E2"],[12143,1,"\u77F3"],[12144,1,"\u793A"],[12145,1,"\u79B8"],[12146,1,"\u79BE"],[12147,1,"\u7A74"],[12148,1,"\u7ACB"],[12149,1,"\u7AF9"],[12150,1,"\u7C73"],[12151,1,"\u7CF8"],[12152,1,"\u7F36"],[12153,1,"\u7F51"],[12154,1,"\u7F8A"],[12155,1,"\u7FBD"],[12156,1,"\u8001"],[12157,1,"\u800C"],[12158,1,"\u8012"],[12159,1,"\u8033"],[12160,1,"\u807F"],[12161,1,"\u8089"],[12162,1,"\u81E3"],[12163,1,"\u81EA"],[12164,1,"\u81F3"],[12165,1,"\u81FC"],[12166,1,"\u820C"],[12167,1,"\u821B"],[12168,1,"\u821F"],[12169,1,"\u826E"],[12170,1,"\u8272"],[12171,1,"\u8278"],[12172,1,"\u864D"],[12173,1,"\u866B"],[12174,1,"\u8840"],[12175,1,"\u884C"],[12176,1,"\u8863"],[12177,1,"\u897E"],[12178,1,"\u898B"],[12179,1,"\u89D2"],[12180,1,"\u8A00"],[12181,1,"\u8C37"],[12182,1,"\u8C46"],[12183,1,"\u8C55"],[12184,1,"\u8C78"],[12185,1,"\u8C9D"],[12186,1,"\u8D64"],[12187,1,"\u8D70"],[12188,1,"\u8DB3"],[12189,1,"\u8EAB"],[12190,1,"\u8ECA"],[12191,1,"\u8F9B"],[12192,1,"\u8FB0"],[12193,1,"\u8FB5"],[12194,1,"\u9091"],[12195,1,"\u9149"],[12196,1,"\u91C6"],[12197,1,"\u91CC"],[12198,1,"\u91D1"],[12199,1,"\u9577"],[12200,1,"\u9580"],[12201,1,"\u961C"],[12202,1,"\u96B6"],[12203,1,"\u96B9"],[12204,1,"\u96E8"],[12205,1,"\u9751"],[12206,1,"\u975E"],[12207,1,"\u9762"],[12208,1,"\u9769"],[12209,1,"\u97CB"],[12210,1,"\u97ED"],[12211,1,"\u97F3"],[12212,1,"\u9801"],[12213,1,"\u98A8"],[12214,1,"\u98DB"],[12215,1,"\u98DF"],[12216,1,"\u9996"],[12217,1,"\u9999"],[12218,1,"\u99AC"],[12219,1,"\u9AA8"],[12220,1,"\u9AD8"],[12221,1,"\u9ADF"],[12222,1,"\u9B25"],[12223,1,"\u9B2F"],[12224,1,"\u9B32"],[12225,1,"\u9B3C"],[12226,1,"\u9B5A"],[12227,1,"\u9CE5"],[12228,1,"\u9E75"],[12229,1,"\u9E7F"],[12230,1,"\u9EA5"],[12231,1,"\u9EBB"],[12232,1,"\u9EC3"],[12233,1,"\u9ECD"],[12234,1,"\u9ED1"],[12235,1,"\u9EF9"],[12236,1,"\u9EFD"],[12237,1,"\u9F0E"],[12238,1,"\u9F13"],[12239,1,"\u9F20"],[12240,1,"\u9F3B"],[12241,1,"\u9F4A"],[12242,1,"\u9F52"],[12243,1,"\u9F8D"],[12244,1,"\u9F9C"],[12245,1,"\u9FA0"],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,5," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,"\u3012"],[12343,2],[12344,1,"\u5341"],[12345,1,"\u5344"],[12346,1,"\u5345"],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,5," \u3099"],[12444,5," \u309A"],[[12445,12446],2],[12447,1,"\u3088\u308A"],[12448,2],[[12449,12542],2],[12543,1,"\u30B3\u30C8"],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,"\u1100"],[12594,1,"\u1101"],[12595,1,"\u11AA"],[12596,1,"\u1102"],[12597,1,"\u11AC"],[12598,1,"\u11AD"],[12599,1,"\u1103"],[12600,1,"\u1104"],[12601,1,"\u1105"],[12602,1,"\u11B0"],[12603,1,"\u11B1"],[12604,1,"\u11B2"],[12605,1,"\u11B3"],[12606,1,"\u11B4"],[12607,1,"\u11B5"],[12608,1,"\u111A"],[12609,1,"\u1106"],[12610,1,"\u1107"],[12611,1,"\u1108"],[12612,1,"\u1121"],[12613,1,"\u1109"],[12614,1,"\u110A"],[12615,1,"\u110B"],[12616,1,"\u110C"],[12617,1,"\u110D"],[12618,1,"\u110E"],[12619,1,"\u110F"],[12620,1,"\u1110"],[12621,1,"\u1111"],[12622,1,"\u1112"],[12623,1,"\u1161"],[12624,1,"\u1162"],[12625,1,"\u1163"],[12626,1,"\u1164"],[12627,1,"\u1165"],[12628,1,"\u1166"],[12629,1,"\u1167"],[12630,1,"\u1168"],[12631,1,"\u1169"],[12632,1,"\u116A"],[12633,1,"\u116B"],[12634,1,"\u116C"],[12635,1,"\u116D"],[12636,1,"\u116E"],[12637,1,"\u116F"],[12638,1,"\u1170"],[12639,1,"\u1171"],[12640,1,"\u1172"],[12641,1,"\u1173"],[12642,1,"\u1174"],[12643,1,"\u1175"],[12644,3],[12645,1,"\u1114"],[12646,1,"\u1115"],[12647,1,"\u11C7"],[12648,1,"\u11C8"],[12649,1,"\u11CC"],[12650,1,"\u11CE"],[12651,1,"\u11D3"],[12652,1,"\u11D7"],[12653,1,"\u11D9"],[12654,1,"\u111C"],[12655,1,"\u11DD"],[12656,1,"\u11DF"],[12657,1,"\u111D"],[12658,1,"\u111E"],[12659,1,"\u1120"],[12660,1,"\u1122"],[12661,1,"\u1123"],[12662,1,"\u1127"],[12663,1,"\u1129"],[12664,1,"\u112B"],[12665,1,"\u112C"],[12666,1,"\u112D"],[12667,1,"\u112E"],[12668,1,"\u112F"],[12669,1,"\u1132"],[12670,1,"\u1136"],[12671,1,"\u1140"],[12672,1,"\u1147"],[12673,1,"\u114C"],[12674,1,"\u11F1"],[12675,1,"\u11F2"],[12676,1,"\u1157"],[12677,1,"\u1158"],[12678,1,"\u1159"],[12679,1,"\u1184"],[12680,1,"\u1185"],[12681,1,"\u1188"],[12682,1,"\u1191"],[12683,1,"\u1192"],[12684,1,"\u1194"],[12685,1,"\u119E"],[12686,1,"\u11A1"],[12687,3],[[12688,12689],2],[12690,1,"\u4E00"],[12691,1,"\u4E8C"],[12692,1,"\u4E09"],[12693,1,"\u56DB"],[12694,1,"\u4E0A"],[12695,1,"\u4E2D"],[12696,1,"\u4E0B"],[12697,1,"\u7532"],[12698,1,"\u4E59"],[12699,1,"\u4E19"],[12700,1,"\u4E01"],[12701,1,"\u5929"],[12702,1,"\u5730"],[12703,1,"\u4EBA"],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12783],3],[[12784,12799],2],[12800,5,"(\u1100)"],[12801,5,"(\u1102)"],[12802,5,"(\u1103)"],[12803,5,"(\u1105)"],[12804,5,"(\u1106)"],[12805,5,"(\u1107)"],[12806,5,"(\u1109)"],[12807,5,"(\u110B)"],[12808,5,"(\u110C)"],[12809,5,"(\u110E)"],[12810,5,"(\u110F)"],[12811,5,"(\u1110)"],[12812,5,"(\u1111)"],[12813,5,"(\u1112)"],[12814,5,"(\uAC00)"],[12815,5,"(\uB098)"],[12816,5,"(\uB2E4)"],[12817,5,"(\uB77C)"],[12818,5,"(\uB9C8)"],[12819,5,"(\uBC14)"],[12820,5,"(\uC0AC)"],[12821,5,"(\uC544)"],[12822,5,"(\uC790)"],[12823,5,"(\uCC28)"],[12824,5,"(\uCE74)"],[12825,5,"(\uD0C0)"],[12826,5,"(\uD30C)"],[12827,5,"(\uD558)"],[12828,5,"(\uC8FC)"],[12829,5,"(\uC624\uC804)"],[12830,5,"(\uC624\uD6C4)"],[12831,3],[12832,5,"(\u4E00)"],[12833,5,"(\u4E8C)"],[12834,5,"(\u4E09)"],[12835,5,"(\u56DB)"],[12836,5,"(\u4E94)"],[12837,5,"(\u516D)"],[12838,5,"(\u4E03)"],[12839,5,"(\u516B)"],[12840,5,"(\u4E5D)"],[12841,5,"(\u5341)"],[12842,5,"(\u6708)"],[12843,5,"(\u706B)"],[12844,5,"(\u6C34)"],[12845,5,"(\u6728)"],[12846,5,"(\u91D1)"],[12847,5,"(\u571F)"],[12848,5,"(\u65E5)"],[12849,5,"(\u682A)"],[12850,5,"(\u6709)"],[12851,5,"(\u793E)"],[12852,5,"(\u540D)"],[12853,5,"(\u7279)"],[12854,5,"(\u8CA1)"],[12855,5,"(\u795D)"],[12856,5,"(\u52B4)"],[12857,5,"(\u4EE3)"],[12858,5,"(\u547C)"],[12859,5,"(\u5B66)"],[12860,5,"(\u76E3)"],[12861,5,"(\u4F01)"],[12862,5,"(\u8CC7)"],[12863,5,"(\u5354)"],[12864,5,"(\u796D)"],[12865,5,"(\u4F11)"],[12866,5,"(\u81EA)"],[12867,5,"(\u81F3)"],[12868,1,"\u554F"],[12869,1,"\u5E7C"],[12870,1,"\u6587"],[12871,1,"\u7B8F"],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,"\u1100"],[12897,1,"\u1102"],[12898,1,"\u1103"],[12899,1,"\u1105"],[12900,1,"\u1106"],[12901,1,"\u1107"],[12902,1,"\u1109"],[12903,1,"\u110B"],[12904,1,"\u110C"],[12905,1,"\u110E"],[12906,1,"\u110F"],[12907,1,"\u1110"],[12908,1,"\u1111"],[12909,1,"\u1112"],[12910,1,"\uAC00"],[12911,1,"\uB098"],[12912,1,"\uB2E4"],[12913,1,"\uB77C"],[12914,1,"\uB9C8"],[12915,1,"\uBC14"],[12916,1,"\uC0AC"],[12917,1,"\uC544"],[12918,1,"\uC790"],[12919,1,"\uCC28"],[12920,1,"\uCE74"],[12921,1,"\uD0C0"],[12922,1,"\uD30C"],[12923,1,"\uD558"],[12924,1,"\uCC38\uACE0"],[12925,1,"\uC8FC\uC758"],[12926,1,"\uC6B0"],[12927,2],[12928,1,"\u4E00"],[12929,1,"\u4E8C"],[12930,1,"\u4E09"],[12931,1,"\u56DB"],[12932,1,"\u4E94"],[12933,1,"\u516D"],[12934,1,"\u4E03"],[12935,1,"\u516B"],[12936,1,"\u4E5D"],[12937,1,"\u5341"],[12938,1,"\u6708"],[12939,1,"\u706B"],[12940,1,"\u6C34"],[12941,1,"\u6728"],[12942,1,"\u91D1"],[12943,1,"\u571F"],[12944,1,"\u65E5"],[12945,1,"\u682A"],[12946,1,"\u6709"],[12947,1,"\u793E"],[12948,1,"\u540D"],[12949,1,"\u7279"],[12950,1,"\u8CA1"],[12951,1,"\u795D"],[12952,1,"\u52B4"],[12953,1,"\u79D8"],[12954,1,"\u7537"],[12955,1,"\u5973"],[12956,1,"\u9069"],[12957,1,"\u512A"],[12958,1,"\u5370"],[12959,1,"\u6CE8"],[12960,1,"\u9805"],[12961,1,"\u4F11"],[12962,1,"\u5199"],[12963,1,"\u6B63"],[12964,1,"\u4E0A"],[12965,1,"\u4E2D"],[12966,1,"\u4E0B"],[12967,1,"\u5DE6"],[12968,1,"\u53F3"],[12969,1,"\u533B"],[12970,1,"\u5B97"],[12971,1,"\u5B66"],[12972,1,"\u76E3"],[12973,1,"\u4F01"],[12974,1,"\u8CC7"],[12975,1,"\u5354"],[12976,1,"\u591C"],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1\u6708"],[12993,1,"2\u6708"],[12994,1,"3\u6708"],[12995,1,"4\u6708"],[12996,1,"5\u6708"],[12997,1,"6\u6708"],[12998,1,"7\u6708"],[12999,1,"8\u6708"],[13e3,1,"9\u6708"],[13001,1,"10\u6708"],[13002,1,"11\u6708"],[13003,1,"12\u6708"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,"\u30A2"],[13009,1,"\u30A4"],[13010,1,"\u30A6"],[13011,1,"\u30A8"],[13012,1,"\u30AA"],[13013,1,"\u30AB"],[13014,1,"\u30AD"],[13015,1,"\u30AF"],[13016,1,"\u30B1"],[13017,1,"\u30B3"],[13018,1,"\u30B5"],[13019,1,"\u30B7"],[13020,1,"\u30B9"],[13021,1,"\u30BB"],[13022,1,"\u30BD"],[13023,1,"\u30BF"],[13024,1,"\u30C1"],[13025,1,"\u30C4"],[13026,1,"\u30C6"],[13027,1,"\u30C8"],[13028,1,"\u30CA"],[13029,1,"\u30CB"],[13030,1,"\u30CC"],[13031,1,"\u30CD"],[13032,1,"\u30CE"],[13033,1,"\u30CF"],[13034,1,"\u30D2"],[13035,1,"\u30D5"],[13036,1,"\u30D8"],[13037,1,"\u30DB"],[13038,1,"\u30DE"],[13039,1,"\u30DF"],[13040,1,"\u30E0"],[13041,1,"\u30E1"],[13042,1,"\u30E2"],[13043,1,"\u30E4"],[13044,1,"\u30E6"],[13045,1,"\u30E8"],[13046,1,"\u30E9"],[13047,1,"\u30EA"],[13048,1,"\u30EB"],[13049,1,"\u30EC"],[13050,1,"\u30ED"],[13051,1,"\u30EF"],[13052,1,"\u30F0"],[13053,1,"\u30F1"],[13054,1,"\u30F2"],[13055,1,"\u4EE4\u548C"],[13056,1,"\u30A2\u30D1\u30FC\u30C8"],[13057,1,"\u30A2\u30EB\u30D5\u30A1"],[13058,1,"\u30A2\u30F3\u30DA\u30A2"],[13059,1,"\u30A2\u30FC\u30EB"],[13060,1,"\u30A4\u30CB\u30F3\u30B0"],[13061,1,"\u30A4\u30F3\u30C1"],[13062,1,"\u30A6\u30A9\u30F3"],[13063,1,"\u30A8\u30B9\u30AF\u30FC\u30C9"],[13064,1,"\u30A8\u30FC\u30AB\u30FC"],[13065,1,"\u30AA\u30F3\u30B9"],[13066,1,"\u30AA\u30FC\u30E0"],[13067,1,"\u30AB\u30A4\u30EA"],[13068,1,"\u30AB\u30E9\u30C3\u30C8"],[13069,1,"\u30AB\u30ED\u30EA\u30FC"],[13070,1,"\u30AC\u30ED\u30F3"],[13071,1,"\u30AC\u30F3\u30DE"],[13072,1,"\u30AE\u30AC"],[13073,1,"\u30AE\u30CB\u30FC"],[13074,1,"\u30AD\u30E5\u30EA\u30FC"],[13075,1,"\u30AE\u30EB\u30C0\u30FC"],[13076,1,"\u30AD\u30ED"],[13077,1,"\u30AD\u30ED\u30B0\u30E9\u30E0"],[13078,1,"\u30AD\u30ED\u30E1\u30FC\u30C8\u30EB"],[13079,1,"\u30AD\u30ED\u30EF\u30C3\u30C8"],[13080,1,"\u30B0\u30E9\u30E0"],[13081,1,"\u30B0\u30E9\u30E0\u30C8\u30F3"],[13082,1,"\u30AF\u30EB\u30BC\u30A4\u30ED"],[13083,1,"\u30AF\u30ED\u30FC\u30CD"],[13084,1,"\u30B1\u30FC\u30B9"],[13085,1,"\u30B3\u30EB\u30CA"],[13086,1,"\u30B3\u30FC\u30DD"],[13087,1,"\u30B5\u30A4\u30AF\u30EB"],[13088,1,"\u30B5\u30F3\u30C1\u30FC\u30E0"],[13089,1,"\u30B7\u30EA\u30F3\u30B0"],[13090,1,"\u30BB\u30F3\u30C1"],[13091,1,"\u30BB\u30F3\u30C8"],[13092,1,"\u30C0\u30FC\u30B9"],[13093,1,"\u30C7\u30B7"],[13094,1,"\u30C9\u30EB"],[13095,1,"\u30C8\u30F3"],[13096,1,"\u30CA\u30CE"],[13097,1,"\u30CE\u30C3\u30C8"],[13098,1,"\u30CF\u30A4\u30C4"],[13099,1,"\u30D1\u30FC\u30BB\u30F3\u30C8"],[13100,1,"\u30D1\u30FC\u30C4"],[13101,1,"\u30D0\u30FC\u30EC\u30EB"],[13102,1,"\u30D4\u30A2\u30B9\u30C8\u30EB"],[13103,1,"\u30D4\u30AF\u30EB"],[13104,1,"\u30D4\u30B3"],[13105,1,"\u30D3\u30EB"],[13106,1,"\u30D5\u30A1\u30E9\u30C3\u30C9"],[13107,1,"\u30D5\u30A3\u30FC\u30C8"],[13108,1,"\u30D6\u30C3\u30B7\u30A7\u30EB"],[13109,1,"\u30D5\u30E9\u30F3"],[13110,1,"\u30D8\u30AF\u30BF\u30FC\u30EB"],[13111,1,"\u30DA\u30BD"],[13112,1,"\u30DA\u30CB\u30D2"],[13113,1,"\u30D8\u30EB\u30C4"],[13114,1,"\u30DA\u30F3\u30B9"],[13115,1,"\u30DA\u30FC\u30B8"],[13116,1,"\u30D9\u30FC\u30BF"],[13117,1,"\u30DD\u30A4\u30F3\u30C8"],[13118,1,"\u30DC\u30EB\u30C8"],[13119,1,"\u30DB\u30F3"],[13120,1,"\u30DD\u30F3\u30C9"],[13121,1,"\u30DB\u30FC\u30EB"],[13122,1,"\u30DB\u30FC\u30F3"],[13123,1,"\u30DE\u30A4\u30AF\u30ED"],[13124,1,"\u30DE\u30A4\u30EB"],[13125,1,"\u30DE\u30C3\u30CF"],[13126,1,"\u30DE\u30EB\u30AF"],[13127,1,"\u30DE\u30F3\u30B7\u30E7\u30F3"],[13128,1,"\u30DF\u30AF\u30ED\u30F3"],[13129,1,"\u30DF\u30EA"],[13130,1,"\u30DF\u30EA\u30D0\u30FC\u30EB"],[13131,1,"\u30E1\u30AC"],[13132,1,"\u30E1\u30AC\u30C8\u30F3"],[13133,1,"\u30E1\u30FC\u30C8\u30EB"],[13134,1,"\u30E4\u30FC\u30C9"],[13135,1,"\u30E4\u30FC\u30EB"],[13136,1,"\u30E6\u30A2\u30F3"],[13137,1,"\u30EA\u30C3\u30C8\u30EB"],[13138,1,"\u30EA\u30E9"],[13139,1,"\u30EB\u30D4\u30FC"],[13140,1,"\u30EB\u30FC\u30D6\u30EB"],[13141,1,"\u30EC\u30E0"],[13142,1,"\u30EC\u30F3\u30C8\u30B2\u30F3"],[13143,1,"\u30EF\u30C3\u30C8"],[13144,1,"0\u70B9"],[13145,1,"1\u70B9"],[13146,1,"2\u70B9"],[13147,1,"3\u70B9"],[13148,1,"4\u70B9"],[13149,1,"5\u70B9"],[13150,1,"6\u70B9"],[13151,1,"7\u70B9"],[13152,1,"8\u70B9"],[13153,1,"9\u70B9"],[13154,1,"10\u70B9"],[13155,1,"11\u70B9"],[13156,1,"12\u70B9"],[13157,1,"13\u70B9"],[13158,1,"14\u70B9"],[13159,1,"15\u70B9"],[13160,1,"16\u70B9"],[13161,1,"17\u70B9"],[13162,1,"18\u70B9"],[13163,1,"19\u70B9"],[13164,1,"20\u70B9"],[13165,1,"21\u70B9"],[13166,1,"22\u70B9"],[13167,1,"23\u70B9"],[13168,1,"24\u70B9"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,"\u5E73\u6210"],[13180,1,"\u662D\u548C"],[13181,1,"\u5927\u6B63"],[13182,1,"\u660E\u6CBB"],[13183,1,"\u682A\u5F0F\u4F1A\u793E"],[13184,1,"pa"],[13185,1,"na"],[13186,1,"\u03BCa"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"\u03BCf"],[13197,1,"\u03BCg"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"\u03BCl"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"\u03BCm"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"m\u2215s"],[13224,1,"m\u2215s2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rad\u2215s"],[13231,1,"rad\u2215s2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"\u03BCs"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"\u03BCv"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"\u03BCw"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"k\u03C9"],[13249,1,"m\u03C9"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"c\u2215kg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"v\u2215m"],[13279,1,"a\u2215m"],[13280,1,"1\u65E5"],[13281,1,"2\u65E5"],[13282,1,"3\u65E5"],[13283,1,"4\u65E5"],[13284,1,"5\u65E5"],[13285,1,"6\u65E5"],[13286,1,"7\u65E5"],[13287,1,"8\u65E5"],[13288,1,"9\u65E5"],[13289,1,"10\u65E5"],[13290,1,"11\u65E5"],[13291,1,"12\u65E5"],[13292,1,"13\u65E5"],[13293,1,"14\u65E5"],[13294,1,"15\u65E5"],[13295,1,"16\u65E5"],[13296,1,"17\u65E5"],[13297,1,"18\u65E5"],[13298,1,"19\u65E5"],[13299,1,"20\u65E5"],[13300,1,"21\u65E5"],[13301,1,"22\u65E5"],[13302,1,"23\u65E5"],[13303,1,"24\u65E5"],[13304,1,"25\u65E5"],[13305,1,"26\u65E5"],[13306,1,"27\u65E5"],[13307,1,"28\u65E5"],[13308,1,"29\u65E5"],[13309,1,"30\u65E5"],[13310,1,"31\u65E5"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,"\uA641"],[42561,2],[42562,1,"\uA643"],[42563,2],[42564,1,"\uA645"],[42565,2],[42566,1,"\uA647"],[42567,2],[42568,1,"\uA649"],[42569,2],[42570,1,"\uA64B"],[42571,2],[42572,1,"\uA64D"],[42573,2],[42574,1,"\uA64F"],[42575,2],[42576,1,"\uA651"],[42577,2],[42578,1,"\uA653"],[42579,2],[42580,1,"\uA655"],[42581,2],[42582,1,"\uA657"],[42583,2],[42584,1,"\uA659"],[42585,2],[42586,1,"\uA65B"],[42587,2],[42588,1,"\uA65D"],[42589,2],[42590,1,"\uA65F"],[42591,2],[42592,1,"\uA661"],[42593,2],[42594,1,"\uA663"],[42595,2],[42596,1,"\uA665"],[42597,2],[42598,1,"\uA667"],[42599,2],[42600,1,"\uA669"],[42601,2],[42602,1,"\uA66B"],[42603,2],[42604,1,"\uA66D"],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,"\uA681"],[42625,2],[42626,1,"\uA683"],[42627,2],[42628,1,"\uA685"],[42629,2],[42630,1,"\uA687"],[42631,2],[42632,1,"\uA689"],[42633,2],[42634,1,"\uA68B"],[42635,2],[42636,1,"\uA68D"],[42637,2],[42638,1,"\uA68F"],[42639,2],[42640,1,"\uA691"],[42641,2],[42642,1,"\uA693"],[42643,2],[42644,1,"\uA695"],[42645,2],[42646,1,"\uA697"],[42647,2],[42648,1,"\uA699"],[42649,2],[42650,1,"\uA69B"],[42651,2],[42652,1,"\u044A"],[42653,1,"\u044C"],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,"\uA723"],[42787,2],[42788,1,"\uA725"],[42789,2],[42790,1,"\uA727"],[42791,2],[42792,1,"\uA729"],[42793,2],[42794,1,"\uA72B"],[42795,2],[42796,1,"\uA72D"],[42797,2],[42798,1,"\uA72F"],[[42799,42801],2],[42802,1,"\uA733"],[42803,2],[42804,1,"\uA735"],[42805,2],[42806,1,"\uA737"],[42807,2],[42808,1,"\uA739"],[42809,2],[42810,1,"\uA73B"],[42811,2],[42812,1,"\uA73D"],[42813,2],[42814,1,"\uA73F"],[42815,2],[42816,1,"\uA741"],[42817,2],[42818,1,"\uA743"],[42819,2],[42820,1,"\uA745"],[42821,2],[42822,1,"\uA747"],[42823,2],[42824,1,"\uA749"],[42825,2],[42826,1,"\uA74B"],[42827,2],[42828,1,"\uA74D"],[42829,2],[42830,1,"\uA74F"],[42831,2],[42832,1,"\uA751"],[42833,2],[42834,1,"\uA753"],[42835,2],[42836,1,"\uA755"],[42837,2],[42838,1,"\uA757"],[42839,2],[42840,1,"\uA759"],[42841,2],[42842,1,"\uA75B"],[42843,2],[42844,1,"\uA75D"],[42845,2],[42846,1,"\uA75F"],[42847,2],[42848,1,"\uA761"],[42849,2],[42850,1,"\uA763"],[42851,2],[42852,1,"\uA765"],[42853,2],[42854,1,"\uA767"],[42855,2],[42856,1,"\uA769"],[42857,2],[42858,1,"\uA76B"],[42859,2],[42860,1,"\uA76D"],[42861,2],[42862,1,"\uA76F"],[42863,2],[42864,1,"\uA76F"],[[42865,42872],2],[42873,1,"\uA77A"],[42874,2],[42875,1,"\uA77C"],[42876,2],[42877,1,"\u1D79"],[42878,1,"\uA77F"],[42879,2],[42880,1,"\uA781"],[42881,2],[42882,1,"\uA783"],[42883,2],[42884,1,"\uA785"],[42885,2],[42886,1,"\uA787"],[[42887,42888],2],[[42889,42890],2],[42891,1,"\uA78C"],[42892,2],[42893,1,"\u0265"],[42894,2],[42895,2],[42896,1,"\uA791"],[42897,2],[42898,1,"\uA793"],[42899,2],[[42900,42901],2],[42902,1,"\uA797"],[42903,2],[42904,1,"\uA799"],[42905,2],[42906,1,"\uA79B"],[42907,2],[42908,1,"\uA79D"],[42909,2],[42910,1,"\uA79F"],[42911,2],[42912,1,"\uA7A1"],[42913,2],[42914,1,"\uA7A3"],[42915,2],[42916,1,"\uA7A5"],[42917,2],[42918,1,"\uA7A7"],[42919,2],[42920,1,"\uA7A9"],[42921,2],[42922,1,"\u0266"],[42923,1,"\u025C"],[42924,1,"\u0261"],[42925,1,"\u026C"],[42926,1,"\u026A"],[42927,2],[42928,1,"\u029E"],[42929,1,"\u0287"],[42930,1,"\u029D"],[42931,1,"\uAB53"],[42932,1,"\uA7B5"],[42933,2],[42934,1,"\uA7B7"],[42935,2],[42936,1,"\uA7B9"],[42937,2],[42938,1,"\uA7BB"],[42939,2],[42940,1,"\uA7BD"],[42941,2],[42942,1,"\uA7BF"],[42943,2],[42944,1,"\uA7C1"],[42945,2],[42946,1,"\uA7C3"],[42947,2],[42948,1,"\uA794"],[42949,1,"\u0282"],[42950,1,"\u1D8E"],[42951,1,"\uA7C8"],[42952,2],[42953,1,"\uA7CA"],[42954,2],[[42955,42959],3],[42960,1,"\uA7D1"],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,"\uA7D7"],[42967,2],[42968,1,"\uA7D9"],[42969,2],[[42970,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,"\uA7F6"],[42998,2],[42999,2],[43e3,1,"\u0127"],[43001,1,"\u0153"],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,"\uA727"],[43869,1,"\uAB37"],[43870,1,"\u026B"],[43871,1,"\uAB52"],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,"\u028D"],[[43882,43883],2],[[43884,43887],3],[43888,1,"\u13A0"],[43889,1,"\u13A1"],[43890,1,"\u13A2"],[43891,1,"\u13A3"],[43892,1,"\u13A4"],[43893,1,"\u13A5"],[43894,1,"\u13A6"],[43895,1,"\u13A7"],[43896,1,"\u13A8"],[43897,1,"\u13A9"],[43898,1,"\u13AA"],[43899,1,"\u13AB"],[43900,1,"\u13AC"],[43901,1,"\u13AD"],[43902,1,"\u13AE"],[43903,1,"\u13AF"],[43904,1,"\u13B0"],[43905,1,"\u13B1"],[43906,1,"\u13B2"],[43907,1,"\u13B3"],[43908,1,"\u13B4"],[43909,1,"\u13B5"],[43910,1,"\u13B6"],[43911,1,"\u13B7"],[43912,1,"\u13B8"],[43913,1,"\u13B9"],[43914,1,"\u13BA"],[43915,1,"\u13BB"],[43916,1,"\u13BC"],[43917,1,"\u13BD"],[43918,1,"\u13BE"],[43919,1,"\u13BF"],[43920,1,"\u13C0"],[43921,1,"\u13C1"],[43922,1,"\u13C2"],[43923,1,"\u13C3"],[43924,1,"\u13C4"],[43925,1,"\u13C5"],[43926,1,"\u13C6"],[43927,1,"\u13C7"],[43928,1,"\u13C8"],[43929,1,"\u13C9"],[43930,1,"\u13CA"],[43931,1,"\u13CB"],[43932,1,"\u13CC"],[43933,1,"\u13CD"],[43934,1,"\u13CE"],[43935,1,"\u13CF"],[43936,1,"\u13D0"],[43937,1,"\u13D1"],[43938,1,"\u13D2"],[43939,1,"\u13D3"],[43940,1,"\u13D4"],[43941,1,"\u13D5"],[43942,1,"\u13D6"],[43943,1,"\u13D7"],[43944,1,"\u13D8"],[43945,1,"\u13D9"],[43946,1,"\u13DA"],[43947,1,"\u13DB"],[43948,1,"\u13DC"],[43949,1,"\u13DD"],[43950,1,"\u13DE"],[43951,1,"\u13DF"],[43952,1,"\u13E0"],[43953,1,"\u13E1"],[43954,1,"\u13E2"],[43955,1,"\u13E3"],[43956,1,"\u13E4"],[43957,1,"\u13E5"],[43958,1,"\u13E6"],[43959,1,"\u13E7"],[43960,1,"\u13E8"],[43961,1,"\u13E9"],[43962,1,"\u13EA"],[43963,1,"\u13EB"],[43964,1,"\u13EC"],[43965,1,"\u13ED"],[43966,1,"\u13EE"],[43967,1,"\u13EF"],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,"\u8C48"],[63745,1,"\u66F4"],[63746,1,"\u8ECA"],[63747,1,"\u8CC8"],[63748,1,"\u6ED1"],[63749,1,"\u4E32"],[63750,1,"\u53E5"],[[63751,63752],1,"\u9F9C"],[63753,1,"\u5951"],[63754,1,"\u91D1"],[63755,1,"\u5587"],[63756,1,"\u5948"],[63757,1,"\u61F6"],[63758,1,"\u7669"],[63759,1,"\u7F85"],[63760,1,"\u863F"],[63761,1,"\u87BA"],[63762,1,"\u88F8"],[63763,1,"\u908F"],[63764,1,"\u6A02"],[63765,1,"\u6D1B"],[63766,1,"\u70D9"],[63767,1,"\u73DE"],[63768,1,"\u843D"],[63769,1,"\u916A"],[63770,1,"\u99F1"],[63771,1,"\u4E82"],[63772,1,"\u5375"],[63773,1,"\u6B04"],[63774,1,"\u721B"],[63775,1,"\u862D"],[63776,1,"\u9E1E"],[63777,1,"\u5D50"],[63778,1,"\u6FEB"],[63779,1,"\u85CD"],[63780,1,"\u8964"],[63781,1,"\u62C9"],[63782,1,"\u81D8"],[63783,1,"\u881F"],[63784,1,"\u5ECA"],[63785,1,"\u6717"],[63786,1,"\u6D6A"],[63787,1,"\u72FC"],[63788,1,"\u90CE"],[63789,1,"\u4F86"],[63790,1,"\u51B7"],[63791,1,"\u52DE"],[63792,1,"\u64C4"],[63793,1,"\u6AD3"],[63794,1,"\u7210"],[63795,1,"\u76E7"],[63796,1,"\u8001"],[63797,1,"\u8606"],[63798,1,"\u865C"],[63799,1,"\u8DEF"],[63800,1,"\u9732"],[63801,1,"\u9B6F"],[63802,1,"\u9DFA"],[63803,1,"\u788C"],[63804,1,"\u797F"],[63805,1,"\u7DA0"],[63806,1,"\u83C9"],[63807,1,"\u9304"],[63808,1,"\u9E7F"],[63809,1,"\u8AD6"],[63810,1,"\u58DF"],[63811,1,"\u5F04"],[63812,1,"\u7C60"],[63813,1,"\u807E"],[63814,1,"\u7262"],[63815,1,"\u78CA"],[63816,1,"\u8CC2"],[63817,1,"\u96F7"],[63818,1,"\u58D8"],[63819,1,"\u5C62"],[63820,1,"\u6A13"],[63821,1,"\u6DDA"],[63822,1,"\u6F0F"],[63823,1,"\u7D2F"],[63824,1,"\u7E37"],[63825,1,"\u964B"],[63826,1,"\u52D2"],[63827,1,"\u808B"],[63828,1,"\u51DC"],[63829,1,"\u51CC"],[63830,1,"\u7A1C"],[63831,1,"\u7DBE"],[63832,1,"\u83F1"],[63833,1,"\u9675"],[63834,1,"\u8B80"],[63835,1,"\u62CF"],[63836,1,"\u6A02"],[63837,1,"\u8AFE"],[63838,1,"\u4E39"],[63839,1,"\u5BE7"],[63840,1,"\u6012"],[63841,1,"\u7387"],[63842,1,"\u7570"],[63843,1,"\u5317"],[63844,1,"\u78FB"],[63845,1,"\u4FBF"],[63846,1,"\u5FA9"],[63847,1,"\u4E0D"],[63848,1,"\u6CCC"],[63849,1,"\u6578"],[63850,1,"\u7D22"],[63851,1,"\u53C3"],[63852,1,"\u585E"],[63853,1,"\u7701"],[63854,1,"\u8449"],[63855,1,"\u8AAA"],[63856,1,"\u6BBA"],[63857,1,"\u8FB0"],[63858,1,"\u6C88"],[63859,1,"\u62FE"],[63860,1,"\u82E5"],[63861,1,"\u63A0"],[63862,1,"\u7565"],[63863,1,"\u4EAE"],[63864,1,"\u5169"],[63865,1,"\u51C9"],[63866,1,"\u6881"],[63867,1,"\u7CE7"],[63868,1,"\u826F"],[63869,1,"\u8AD2"],[63870,1,"\u91CF"],[63871,1,"\u52F5"],[63872,1,"\u5442"],[63873,1,"\u5973"],[63874,1,"\u5EEC"],[63875,1,"\u65C5"],[63876,1,"\u6FFE"],[63877,1,"\u792A"],[63878,1,"\u95AD"],[63879,1,"\u9A6A"],[63880,1,"\u9E97"],[63881,1,"\u9ECE"],[63882,1,"\u529B"],[63883,1,"\u66C6"],[63884,1,"\u6B77"],[63885,1,"\u8F62"],[63886,1,"\u5E74"],[63887,1,"\u6190"],[63888,1,"\u6200"],[63889,1,"\u649A"],[63890,1,"\u6F23"],[63891,1,"\u7149"],[63892,1,"\u7489"],[63893,1,"\u79CA"],[63894,1,"\u7DF4"],[63895,1,"\u806F"],[63896,1,"\u8F26"],[63897,1,"\u84EE"],[63898,1,"\u9023"],[63899,1,"\u934A"],[63900,1,"\u5217"],[63901,1,"\u52A3"],[63902,1,"\u54BD"],[63903,1,"\u70C8"],[63904,1,"\u88C2"],[63905,1,"\u8AAA"],[63906,1,"\u5EC9"],[63907,1,"\u5FF5"],[63908,1,"\u637B"],[63909,1,"\u6BAE"],[63910,1,"\u7C3E"],[63911,1,"\u7375"],[63912,1,"\u4EE4"],[63913,1,"\u56F9"],[63914,1,"\u5BE7"],[63915,1,"\u5DBA"],[63916,1,"\u601C"],[63917,1,"\u73B2"],[63918,1,"\u7469"],[63919,1,"\u7F9A"],[63920,1,"\u8046"],[63921,1,"\u9234"],[63922,1,"\u96F6"],[63923,1,"\u9748"],[63924,1,"\u9818"],[63925,1,"\u4F8B"],[63926,1,"\u79AE"],[63927,1,"\u91B4"],[63928,1,"\u96B8"],[63929,1,"\u60E1"],[63930,1,"\u4E86"],[63931,1,"\u50DA"],[63932,1,"\u5BEE"],[63933,1,"\u5C3F"],[63934,1,"\u6599"],[63935,1,"\u6A02"],[63936,1,"\u71CE"],[63937,1,"\u7642"],[63938,1,"\u84FC"],[63939,1,"\u907C"],[63940,1,"\u9F8D"],[63941,1,"\u6688"],[63942,1,"\u962E"],[63943,1,"\u5289"],[63944,1,"\u677B"],[63945,1,"\u67F3"],[63946,1,"\u6D41"],[63947,1,"\u6E9C"],[63948,1,"\u7409"],[63949,1,"\u7559"],[63950,1,"\u786B"],[63951,1,"\u7D10"],[63952,1,"\u985E"],[63953,1,"\u516D"],[63954,1,"\u622E"],[63955,1,"\u9678"],[63956,1,"\u502B"],[63957,1,"\u5D19"],[63958,1,"\u6DEA"],[63959,1,"\u8F2A"],[63960,1,"\u5F8B"],[63961,1,"\u6144"],[63962,1,"\u6817"],[63963,1,"\u7387"],[63964,1,"\u9686"],[63965,1,"\u5229"],[63966,1,"\u540F"],[63967,1,"\u5C65"],[63968,1,"\u6613"],[63969,1,"\u674E"],[63970,1,"\u68A8"],[63971,1,"\u6CE5"],[63972,1,"\u7406"],[63973,1,"\u75E2"],[63974,1,"\u7F79"],[63975,1,"\u88CF"],[63976,1,"\u88E1"],[63977,1,"\u91CC"],[63978,1,"\u96E2"],[63979,1,"\u533F"],[63980,1,"\u6EBA"],[63981,1,"\u541D"],[63982,1,"\u71D0"],[63983,1,"\u7498"],[63984,1,"\u85FA"],[63985,1,"\u96A3"],[63986,1,"\u9C57"],[63987,1,"\u9E9F"],[63988,1,"\u6797"],[63989,1,"\u6DCB"],[63990,1,"\u81E8"],[63991,1,"\u7ACB"],[63992,1,"\u7B20"],[63993,1,"\u7C92"],[63994,1,"\u72C0"],[63995,1,"\u7099"],[63996,1,"\u8B58"],[63997,1,"\u4EC0"],[63998,1,"\u8336"],[63999,1,"\u523A"],[64e3,1,"\u5207"],[64001,1,"\u5EA6"],[64002,1,"\u62D3"],[64003,1,"\u7CD6"],[64004,1,"\u5B85"],[64005,1,"\u6D1E"],[64006,1,"\u66B4"],[64007,1,"\u8F3B"],[64008,1,"\u884C"],[64009,1,"\u964D"],[64010,1,"\u898B"],[64011,1,"\u5ED3"],[64012,1,"\u5140"],[64013,1,"\u55C0"],[[64014,64015],2],[64016,1,"\u585A"],[64017,2],[64018,1,"\u6674"],[[64019,64020],2],[64021,1,"\u51DE"],[64022,1,"\u732A"],[64023,1,"\u76CA"],[64024,1,"\u793C"],[64025,1,"\u795E"],[64026,1,"\u7965"],[64027,1,"\u798F"],[64028,1,"\u9756"],[64029,1,"\u7CBE"],[64030,1,"\u7FBD"],[64031,2],[64032,1,"\u8612"],[64033,2],[64034,1,"\u8AF8"],[[64035,64036],2],[64037,1,"\u9038"],[64038,1,"\u90FD"],[[64039,64041],2],[64042,1,"\u98EF"],[64043,1,"\u98FC"],[64044,1,"\u9928"],[64045,1,"\u9DB4"],[64046,1,"\u90DE"],[64047,1,"\u96B7"],[64048,1,"\u4FAE"],[64049,1,"\u50E7"],[64050,1,"\u514D"],[64051,1,"\u52C9"],[64052,1,"\u52E4"],[64053,1,"\u5351"],[64054,1,"\u559D"],[64055,1,"\u5606"],[64056,1,"\u5668"],[64057,1,"\u5840"],[64058,1,"\u58A8"],[64059,1,"\u5C64"],[64060,1,"\u5C6E"],[64061,1,"\u6094"],[64062,1,"\u6168"],[64063,1,"\u618E"],[64064,1,"\u61F2"],[64065,1,"\u654F"],[64066,1,"\u65E2"],[64067,1,"\u6691"],[64068,1,"\u6885"],[64069,1,"\u6D77"],[64070,1,"\u6E1A"],[64071,1,"\u6F22"],[64072,1,"\u716E"],[64073,1,"\u722B"],[64074,1,"\u7422"],[64075,1,"\u7891"],[64076,1,"\u793E"],[64077,1,"\u7949"],[64078,1,"\u7948"],[64079,1,"\u7950"],[64080,1,"\u7956"],[64081,1,"\u795D"],[64082,1,"\u798D"],[64083,1,"\u798E"],[64084,1,"\u7A40"],[64085,1,"\u7A81"],[64086,1,"\u7BC0"],[64087,1,"\u7DF4"],[64088,1,"\u7E09"],[64089,1,"\u7E41"],[64090,1,"\u7F72"],[64091,1,"\u8005"],[64092,1,"\u81ED"],[[64093,64094],1,"\u8279"],[64095,1,"\u8457"],[64096,1,"\u8910"],[64097,1,"\u8996"],[64098,1,"\u8B01"],[64099,1,"\u8B39"],[64100,1,"\u8CD3"],[64101,1,"\u8D08"],[64102,1,"\u8FB6"],[64103,1,"\u9038"],[64104,1,"\u96E3"],[64105,1,"\u97FF"],[64106,1,"\u983B"],[64107,1,"\u6075"],[64108,1,"\u{242EE}"],[64109,1,"\u8218"],[[64110,64111],3],[64112,1,"\u4E26"],[64113,1,"\u51B5"],[64114,1,"\u5168"],[64115,1,"\u4F80"],[64116,1,"\u5145"],[64117,1,"\u5180"],[64118,1,"\u52C7"],[64119,1,"\u52FA"],[64120,1,"\u559D"],[64121,1,"\u5555"],[64122,1,"\u5599"],[64123,1,"\u55E2"],[64124,1,"\u585A"],[64125,1,"\u58B3"],[64126,1,"\u5944"],[64127,1,"\u5954"],[64128,1,"\u5A62"],[64129,1,"\u5B28"],[64130,1,"\u5ED2"],[64131,1,"\u5ED9"],[64132,1,"\u5F69"],[64133,1,"\u5FAD"],[64134,1,"\u60D8"],[64135,1,"\u614E"],[64136,1,"\u6108"],[64137,1,"\u618E"],[64138,1,"\u6160"],[64139,1,"\u61F2"],[64140,1,"\u6234"],[64141,1,"\u63C4"],[64142,1,"\u641C"],[64143,1,"\u6452"],[64144,1,"\u6556"],[64145,1,"\u6674"],[64146,1,"\u6717"],[64147,1,"\u671B"],[64148,1,"\u6756"],[64149,1,"\u6B79"],[64150,1,"\u6BBA"],[64151,1,"\u6D41"],[64152,1,"\u6EDB"],[64153,1,"\u6ECB"],[64154,1,"\u6F22"],[64155,1,"\u701E"],[64156,1,"\u716E"],[64157,1,"\u77A7"],[64158,1,"\u7235"],[64159,1,"\u72AF"],[64160,1,"\u732A"],[64161,1,"\u7471"],[64162,1,"\u7506"],[64163,1,"\u753B"],[64164,1,"\u761D"],[64165,1,"\u761F"],[64166,1,"\u76CA"],[64167,1,"\u76DB"],[64168,1,"\u76F4"],[64169,1,"\u774A"],[64170,1,"\u7740"],[64171,1,"\u78CC"],[64172,1,"\u7AB1"],[64173,1,"\u7BC0"],[64174,1,"\u7C7B"],[64175,1,"\u7D5B"],[64176,1,"\u7DF4"],[64177,1,"\u7F3E"],[64178,1,"\u8005"],[64179,1,"\u8352"],[64180,1,"\u83EF"],[64181,1,"\u8779"],[64182,1,"\u8941"],[64183,1,"\u8986"],[64184,1,"\u8996"],[64185,1,"\u8ABF"],[64186,1,"\u8AF8"],[64187,1,"\u8ACB"],[64188,1,"\u8B01"],[64189,1,"\u8AFE"],[64190,1,"\u8AED"],[64191,1,"\u8B39"],[64192,1,"\u8B8A"],[64193,1,"\u8D08"],[64194,1,"\u8F38"],[64195,1,"\u9072"],[64196,1,"\u9199"],[64197,1,"\u9276"],[64198,1,"\u967C"],[64199,1,"\u96E3"],[64200,1,"\u9756"],[64201,1,"\u97DB"],[64202,1,"\u97FF"],[64203,1,"\u980B"],[64204,1,"\u983B"],[64205,1,"\u9B12"],[64206,1,"\u9F9C"],[64207,1,"\u{2284A}"],[64208,1,"\u{22844}"],[64209,1,"\u{233D5}"],[64210,1,"\u3B9D"],[64211,1,"\u4018"],[64212,1,"\u4039"],[64213,1,"\u{25249}"],[64214,1,"\u{25CD0}"],[64215,1,"\u{27ED3}"],[64216,1,"\u9F43"],[64217,1,"\u9F8E"],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,"\u0574\u0576"],[64276,1,"\u0574\u0565"],[64277,1,"\u0574\u056B"],[64278,1,"\u057E\u0576"],[64279,1,"\u0574\u056D"],[[64280,64284],3],[64285,1,"\u05D9\u05B4"],[64286,2],[64287,1,"\u05F2\u05B7"],[64288,1,"\u05E2"],[64289,1,"\u05D0"],[64290,1,"\u05D3"],[64291,1,"\u05D4"],[64292,1,"\u05DB"],[64293,1,"\u05DC"],[64294,1,"\u05DD"],[64295,1,"\u05E8"],[64296,1,"\u05EA"],[64297,5,"+"],[64298,1,"\u05E9\u05C1"],[64299,1,"\u05E9\u05C2"],[64300,1,"\u05E9\u05BC\u05C1"],[64301,1,"\u05E9\u05BC\u05C2"],[64302,1,"\u05D0\u05B7"],[64303,1,"\u05D0\u05B8"],[64304,1,"\u05D0\u05BC"],[64305,1,"\u05D1\u05BC"],[64306,1,"\u05D2\u05BC"],[64307,1,"\u05D3\u05BC"],[64308,1,"\u05D4\u05BC"],[64309,1,"\u05D5\u05BC"],[64310,1,"\u05D6\u05BC"],[64311,3],[64312,1,"\u05D8\u05BC"],[64313,1,"\u05D9\u05BC"],[64314,1,"\u05DA\u05BC"],[64315,1,"\u05DB\u05BC"],[64316,1,"\u05DC\u05BC"],[64317,3],[64318,1,"\u05DE\u05BC"],[64319,3],[64320,1,"\u05E0\u05BC"],[64321,1,"\u05E1\u05BC"],[64322,3],[64323,1,"\u05E3\u05BC"],[64324,1,"\u05E4\u05BC"],[64325,3],[64326,1,"\u05E6\u05BC"],[64327,1,"\u05E7\u05BC"],[64328,1,"\u05E8\u05BC"],[64329,1,"\u05E9\u05BC"],[64330,1,"\u05EA\u05BC"],[64331,1,"\u05D5\u05B9"],[64332,1,"\u05D1\u05BF"],[64333,1,"\u05DB\u05BF"],[64334,1,"\u05E4\u05BF"],[64335,1,"\u05D0\u05DC"],[[64336,64337],1,"\u0671"],[[64338,64341],1,"\u067B"],[[64342,64345],1,"\u067E"],[[64346,64349],1,"\u0680"],[[64350,64353],1,"\u067A"],[[64354,64357],1,"\u067F"],[[64358,64361],1,"\u0679"],[[64362,64365],1,"\u06A4"],[[64366,64369],1,"\u06A6"],[[64370,64373],1,"\u0684"],[[64374,64377],1,"\u0683"],[[64378,64381],1,"\u0686"],[[64382,64385],1,"\u0687"],[[64386,64387],1,"\u068D"],[[64388,64389],1,"\u068C"],[[64390,64391],1,"\u068E"],[[64392,64393],1,"\u0688"],[[64394,64395],1,"\u0698"],[[64396,64397],1,"\u0691"],[[64398,64401],1,"\u06A9"],[[64402,64405],1,"\u06AF"],[[64406,64409],1,"\u06B3"],[[64410,64413],1,"\u06B1"],[[64414,64415],1,"\u06BA"],[[64416,64419],1,"\u06BB"],[[64420,64421],1,"\u06C0"],[[64422,64425],1,"\u06C1"],[[64426,64429],1,"\u06BE"],[[64430,64431],1,"\u06D2"],[[64432,64433],1,"\u06D3"],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,"\u06AD"],[[64471,64472],1,"\u06C7"],[[64473,64474],1,"\u06C6"],[[64475,64476],1,"\u06C8"],[64477,1,"\u06C7\u0674"],[[64478,64479],1,"\u06CB"],[[64480,64481],1,"\u06C5"],[[64482,64483],1,"\u06C9"],[[64484,64487],1,"\u06D0"],[[64488,64489],1,"\u0649"],[[64490,64491],1,"\u0626\u0627"],[[64492,64493],1,"\u0626\u06D5"],[[64494,64495],1,"\u0626\u0648"],[[64496,64497],1,"\u0626\u06C7"],[[64498,64499],1,"\u0626\u06C6"],[[64500,64501],1,"\u0626\u06C8"],[[64502,64504],1,"\u0626\u06D0"],[[64505,64507],1,"\u0626\u0649"],[[64508,64511],1,"\u06CC"],[64512,1,"\u0626\u062C"],[64513,1,"\u0626\u062D"],[64514,1,"\u0626\u0645"],[64515,1,"\u0626\u0649"],[64516,1,"\u0626\u064A"],[64517,1,"\u0628\u062C"],[64518,1,"\u0628\u062D"],[64519,1,"\u0628\u062E"],[64520,1,"\u0628\u0645"],[64521,1,"\u0628\u0649"],[64522,1,"\u0628\u064A"],[64523,1,"\u062A\u062C"],[64524,1,"\u062A\u062D"],[64525,1,"\u062A\u062E"],[64526,1,"\u062A\u0645"],[64527,1,"\u062A\u0649"],[64528,1,"\u062A\u064A"],[64529,1,"\u062B\u062C"],[64530,1,"\u062B\u0645"],[64531,1,"\u062B\u0649"],[64532,1,"\u062B\u064A"],[64533,1,"\u062C\u062D"],[64534,1,"\u062C\u0645"],[64535,1,"\u062D\u062C"],[64536,1,"\u062D\u0645"],[64537,1,"\u062E\u062C"],[64538,1,"\u062E\u062D"],[64539,1,"\u062E\u0645"],[64540,1,"\u0633\u062C"],[64541,1,"\u0633\u062D"],[64542,1,"\u0633\u062E"],[64543,1,"\u0633\u0645"],[64544,1,"\u0635\u062D"],[64545,1,"\u0635\u0645"],[64546,1,"\u0636\u062C"],[64547,1,"\u0636\u062D"],[64548,1,"\u0636\u062E"],[64549,1,"\u0636\u0645"],[64550,1,"\u0637\u062D"],[64551,1,"\u0637\u0645"],[64552,1,"\u0638\u0645"],[64553,1,"\u0639\u062C"],[64554,1,"\u0639\u0645"],[64555,1,"\u063A\u062C"],[64556,1,"\u063A\u0645"],[64557,1,"\u0641\u062C"],[64558,1,"\u0641\u062D"],[64559,1,"\u0641\u062E"],[64560,1,"\u0641\u0645"],[64561,1,"\u0641\u0649"],[64562,1,"\u0641\u064A"],[64563,1,"\u0642\u062D"],[64564,1,"\u0642\u0645"],[64565,1,"\u0642\u0649"],[64566,1,"\u0642\u064A"],[64567,1,"\u0643\u0627"],[64568,1,"\u0643\u062C"],[64569,1,"\u0643\u062D"],[64570,1,"\u0643\u062E"],[64571,1,"\u0643\u0644"],[64572,1,"\u0643\u0645"],[64573,1,"\u0643\u0649"],[64574,1,"\u0643\u064A"],[64575,1,"\u0644\u062C"],[64576,1,"\u0644\u062D"],[64577,1,"\u0644\u062E"],[64578,1,"\u0644\u0645"],[64579,1,"\u0644\u0649"],[64580,1,"\u0644\u064A"],[64581,1,"\u0645\u062C"],[64582,1,"\u0645\u062D"],[64583,1,"\u0645\u062E"],[64584,1,"\u0645\u0645"],[64585,1,"\u0645\u0649"],[64586,1,"\u0645\u064A"],[64587,1,"\u0646\u062C"],[64588,1,"\u0646\u062D"],[64589,1,"\u0646\u062E"],[64590,1,"\u0646\u0645"],[64591,1,"\u0646\u0649"],[64592,1,"\u0646\u064A"],[64593,1,"\u0647\u062C"],[64594,1,"\u0647\u0645"],[64595,1,"\u0647\u0649"],[64596,1,"\u0647\u064A"],[64597,1,"\u064A\u062C"],[64598,1,"\u064A\u062D"],[64599,1,"\u064A\u062E"],[64600,1,"\u064A\u0645"],[64601,1,"\u064A\u0649"],[64602,1,"\u064A\u064A"],[64603,1,"\u0630\u0670"],[64604,1,"\u0631\u0670"],[64605,1,"\u0649\u0670"],[64606,5," \u064C\u0651"],[64607,5," \u064D\u0651"],[64608,5," \u064E\u0651"],[64609,5," \u064F\u0651"],[64610,5," \u0650\u0651"],[64611,5," \u0651\u0670"],[64612,1,"\u0626\u0631"],[64613,1,"\u0626\u0632"],[64614,1,"\u0626\u0645"],[64615,1,"\u0626\u0646"],[64616,1,"\u0626\u0649"],[64617,1,"\u0626\u064A"],[64618,1,"\u0628\u0631"],[64619,1,"\u0628\u0632"],[64620,1,"\u0628\u0645"],[64621,1,"\u0628\u0646"],[64622,1,"\u0628\u0649"],[64623,1,"\u0628\u064A"],[64624,1,"\u062A\u0631"],[64625,1,"\u062A\u0632"],[64626,1,"\u062A\u0645"],[64627,1,"\u062A\u0646"],[64628,1,"\u062A\u0649"],[64629,1,"\u062A\u064A"],[64630,1,"\u062B\u0631"],[64631,1,"\u062B\u0632"],[64632,1,"\u062B\u0645"],[64633,1,"\u062B\u0646"],[64634,1,"\u062B\u0649"],[64635,1,"\u062B\u064A"],[64636,1,"\u0641\u0649"],[64637,1,"\u0641\u064A"],[64638,1,"\u0642\u0649"],[64639,1,"\u0642\u064A"],[64640,1,"\u0643\u0627"],[64641,1,"\u0643\u0644"],[64642,1,"\u0643\u0645"],[64643,1,"\u0643\u0649"],[64644,1,"\u0643\u064A"],[64645,1,"\u0644\u0645"],[64646,1,"\u0644\u0649"],[64647,1,"\u0644\u064A"],[64648,1,"\u0645\u0627"],[64649,1,"\u0645\u0645"],[64650,1,"\u0646\u0631"],[64651,1,"\u0646\u0632"],[64652,1,"\u0646\u0645"],[64653,1,"\u0646\u0646"],[64654,1,"\u0646\u0649"],[64655,1,"\u0646\u064A"],[64656,1,"\u0649\u0670"],[64657,1,"\u064A\u0631"],[64658,1,"\u064A\u0632"],[64659,1,"\u064A\u0645"],[64660,1,"\u064A\u0646"],[64661,1,"\u064A\u0649"],[64662,1,"\u064A\u064A"],[64663,1,"\u0626\u062C"],[64664,1,"\u0626\u062D"],[64665,1,"\u0626\u062E"],[64666,1,"\u0626\u0645"],[64667,1,"\u0626\u0647"],[64668,1,"\u0628\u062C"],[64669,1,"\u0628\u062D"],[64670,1,"\u0628\u062E"],[64671,1,"\u0628\u0645"],[64672,1,"\u0628\u0647"],[64673,1,"\u062A\u062C"],[64674,1,"\u062A\u062D"],[64675,1,"\u062A\u062E"],[64676,1,"\u062A\u0645"],[64677,1,"\u062A\u0647"],[64678,1,"\u062B\u0645"],[64679,1,"\u062C\u062D"],[64680,1,"\u062C\u0645"],[64681,1,"\u062D\u062C"],[64682,1,"\u062D\u0645"],[64683,1,"\u062E\u062C"],[64684,1,"\u062E\u0645"],[64685,1,"\u0633\u062C"],[64686,1,"\u0633\u062D"],[64687,1,"\u0633\u062E"],[64688,1,"\u0633\u0645"],[64689,1,"\u0635\u062D"],[64690,1,"\u0635\u062E"],[64691,1,"\u0635\u0645"],[64692,1,"\u0636\u062C"],[64693,1,"\u0636\u062D"],[64694,1,"\u0636\u062E"],[64695,1,"\u0636\u0645"],[64696,1,"\u0637\u062D"],[64697,1,"\u0638\u0645"],[64698,1,"\u0639\u062C"],[64699,1,"\u0639\u0645"],[64700,1,"\u063A\u062C"],[64701,1,"\u063A\u0645"],[64702,1,"\u0641\u062C"],[64703,1,"\u0641\u062D"],[64704,1,"\u0641\u062E"],[64705,1,"\u0641\u0645"],[64706,1,"\u0642\u062D"],[64707,1,"\u0642\u0645"],[64708,1,"\u0643\u062C"],[64709,1,"\u0643\u062D"],[64710,1,"\u0643\u062E"],[64711,1,"\u0643\u0644"],[64712,1,"\u0643\u0645"],[64713,1,"\u0644\u062C"],[64714,1,"\u0644\u062D"],[64715,1,"\u0644\u062E"],[64716,1,"\u0644\u0645"],[64717,1,"\u0644\u0647"],[64718,1,"\u0645\u062C"],[64719,1,"\u0645\u062D"],[64720,1,"\u0645\u062E"],[64721,1,"\u0645\u0645"],[64722,1,"\u0646\u062C"],[64723,1,"\u0646\u062D"],[64724,1,"\u0646\u062E"],[64725,1,"\u0646\u0645"],[64726,1,"\u0646\u0647"],[64727,1,"\u0647\u062C"],[64728,1,"\u0647\u0645"],[64729,1,"\u0647\u0670"],[64730,1,"\u064A\u062C"],[64731,1,"\u064A\u062D"],[64732,1,"\u064A\u062E"],[64733,1,"\u064A\u0645"],[64734,1,"\u064A\u0647"],[64735,1,"\u0626\u0645"],[64736,1,"\u0626\u0647"],[64737,1,"\u0628\u0645"],[64738,1,"\u0628\u0647"],[64739,1,"\u062A\u0645"],[64740,1,"\u062A\u0647"],[64741,1,"\u062B\u0645"],[64742,1,"\u062B\u0647"],[64743,1,"\u0633\u0645"],[64744,1,"\u0633\u0647"],[64745,1,"\u0634\u0645"],[64746,1,"\u0634\u0647"],[64747,1,"\u0643\u0644"],[64748,1,"\u0643\u0645"],[64749,1,"\u0644\u0645"],[64750,1,"\u0646\u0645"],[64751,1,"\u0646\u0647"],[64752,1,"\u064A\u0645"],[64753,1,"\u064A\u0647"],[64754,1,"\u0640\u064E\u0651"],[64755,1,"\u0640\u064F\u0651"],[64756,1,"\u0640\u0650\u0651"],[64757,1,"\u0637\u0649"],[64758,1,"\u0637\u064A"],[64759,1,"\u0639\u0649"],[64760,1,"\u0639\u064A"],[64761,1,"\u063A\u0649"],[64762,1,"\u063A\u064A"],[64763,1,"\u0633\u0649"],[64764,1,"\u0633\u064A"],[64765,1,"\u0634\u0649"],[64766,1,"\u0634\u064A"],[64767,1,"\u062D\u0649"],[64768,1,"\u062D\u064A"],[64769,1,"\u062C\u0649"],[64770,1,"\u062C\u064A"],[64771,1,"\u062E\u0649"],[64772,1,"\u062E\u064A"],[64773,1,"\u0635\u0649"],[64774,1,"\u0635\u064A"],[64775,1,"\u0636\u0649"],[64776,1,"\u0636\u064A"],[64777,1,"\u0634\u062C"],[64778,1,"\u0634\u062D"],[64779,1,"\u0634\u062E"],[64780,1,"\u0634\u0645"],[64781,1,"\u0634\u0631"],[64782,1,"\u0633\u0631"],[64783,1,"\u0635\u0631"],[64784,1,"\u0636\u0631"],[64785,1,"\u0637\u0649"],[64786,1,"\u0637\u064A"],[64787,1,"\u0639\u0649"],[64788,1,"\u0639\u064A"],[64789,1,"\u063A\u0649"],[64790,1,"\u063A\u064A"],[64791,1,"\u0633\u0649"],[64792,1,"\u0633\u064A"],[64793,1,"\u0634\u0649"],[64794,1,"\u0634\u064A"],[64795,1,"\u062D\u0649"],[64796,1,"\u062D\u064A"],[64797,1,"\u062C\u0649"],[64798,1,"\u062C\u064A"],[64799,1,"\u062E\u0649"],[64800,1,"\u062E\u064A"],[64801,1,"\u0635\u0649"],[64802,1,"\u0635\u064A"],[64803,1,"\u0636\u0649"],[64804,1,"\u0636\u064A"],[64805,1,"\u0634\u062C"],[64806,1,"\u0634\u062D"],[64807,1,"\u0634\u062E"],[64808,1,"\u0634\u0645"],[64809,1,"\u0634\u0631"],[64810,1,"\u0633\u0631"],[64811,1,"\u0635\u0631"],[64812,1,"\u0636\u0631"],[64813,1,"\u0634\u062C"],[64814,1,"\u0634\u062D"],[64815,1,"\u0634\u062E"],[64816,1,"\u0634\u0645"],[64817,1,"\u0633\u0647"],[64818,1,"\u0634\u0647"],[64819,1,"\u0637\u0645"],[64820,1,"\u0633\u062C"],[64821,1,"\u0633\u062D"],[64822,1,"\u0633\u062E"],[64823,1,"\u0634\u062C"],[64824,1,"\u0634\u062D"],[64825,1,"\u0634\u062E"],[64826,1,"\u0637\u0645"],[64827,1,"\u0638\u0645"],[[64828,64829],1,"\u0627\u064B"],[[64830,64831],2],[[64832,64847],2],[64848,1,"\u062A\u062C\u0645"],[[64849,64850],1,"\u062A\u062D\u062C"],[64851,1,"\u062A\u062D\u0645"],[64852,1,"\u062A\u062E\u0645"],[64853,1,"\u062A\u0645\u062C"],[64854,1,"\u062A\u0645\u062D"],[64855,1,"\u062A\u0645\u062E"],[[64856,64857],1,"\u062C\u0645\u062D"],[64858,1,"\u062D\u0645\u064A"],[64859,1,"\u062D\u0645\u0649"],[64860,1,"\u0633\u062D\u062C"],[64861,1,"\u0633\u062C\u062D"],[64862,1,"\u0633\u062C\u0649"],[[64863,64864],1,"\u0633\u0645\u062D"],[64865,1,"\u0633\u0645\u062C"],[[64866,64867],1,"\u0633\u0645\u0645"],[[64868,64869],1,"\u0635\u062D\u062D"],[64870,1,"\u0635\u0645\u0645"],[[64871,64872],1,"\u0634\u062D\u0645"],[64873,1,"\u0634\u062C\u064A"],[[64874,64875],1,"\u0634\u0645\u062E"],[[64876,64877],1,"\u0634\u0645\u0645"],[64878,1,"\u0636\u062D\u0649"],[[64879,64880],1,"\u0636\u062E\u0645"],[[64881,64882],1,"\u0637\u0645\u062D"],[64883,1,"\u0637\u0645\u0645"],[64884,1,"\u0637\u0645\u064A"],[64885,1,"\u0639\u062C\u0645"],[[64886,64887],1,"\u0639\u0645\u0645"],[64888,1,"\u0639\u0645\u0649"],[64889,1,"\u063A\u0645\u0645"],[64890,1,"\u063A\u0645\u064A"],[64891,1,"\u063A\u0645\u0649"],[[64892,64893],1,"\u0641\u062E\u0645"],[64894,1,"\u0642\u0645\u062D"],[64895,1,"\u0642\u0645\u0645"],[64896,1,"\u0644\u062D\u0645"],[64897,1,"\u0644\u062D\u064A"],[64898,1,"\u0644\u062D\u0649"],[[64899,64900],1,"\u0644\u062C\u062C"],[[64901,64902],1,"\u0644\u062E\u0645"],[[64903,64904],1,"\u0644\u0645\u062D"],[64905,1,"\u0645\u062D\u062C"],[64906,1,"\u0645\u062D\u0645"],[64907,1,"\u0645\u062D\u064A"],[64908,1,"\u0645\u062C\u062D"],[64909,1,"\u0645\u062C\u0645"],[64910,1,"\u0645\u062E\u062C"],[64911,1,"\u0645\u062E\u0645"],[[64912,64913],3],[64914,1,"\u0645\u062C\u062E"],[64915,1,"\u0647\u0645\u062C"],[64916,1,"\u0647\u0645\u0645"],[64917,1,"\u0646\u062D\u0645"],[64918,1,"\u0646\u062D\u0649"],[[64919,64920],1,"\u0646\u062C\u0645"],[64921,1,"\u0646\u062C\u0649"],[64922,1,"\u0646\u0645\u064A"],[64923,1,"\u0646\u0645\u0649"],[[64924,64925],1,"\u064A\u0645\u0645"],[64926,1,"\u0628\u062E\u064A"],[64927,1,"\u062A\u062C\u064A"],[64928,1,"\u062A\u062C\u0649"],[64929,1,"\u062A\u062E\u064A"],[64930,1,"\u062A\u062E\u0649"],[64931,1,"\u062A\u0645\u064A"],[64932,1,"\u062A\u0645\u0649"],[64933,1,"\u062C\u0645\u064A"],[64934,1,"\u062C\u062D\u0649"],[64935,1,"\u062C\u0645\u0649"],[64936,1,"\u0633\u062E\u0649"],[64937,1,"\u0635\u062D\u064A"],[64938,1,"\u0634\u062D\u064A"],[64939,1,"\u0636\u062D\u064A"],[64940,1,"\u0644\u062C\u064A"],[64941,1,"\u0644\u0645\u064A"],[64942,1,"\u064A\u062D\u064A"],[64943,1,"\u064A\u062C\u064A"],[64944,1,"\u064A\u0645\u064A"],[64945,1,"\u0645\u0645\u064A"],[64946,1,"\u0642\u0645\u064A"],[64947,1,"\u0646\u062D\u064A"],[64948,1,"\u0642\u0645\u062D"],[64949,1,"\u0644\u062D\u0645"],[64950,1,"\u0639\u0645\u064A"],[64951,1,"\u0643\u0645\u064A"],[64952,1,"\u0646\u062C\u062D"],[64953,1,"\u0645\u062E\u064A"],[64954,1,"\u0644\u062C\u0645"],[64955,1,"\u0643\u0645\u0645"],[64956,1,"\u0644\u062C\u0645"],[64957,1,"\u0646\u062C\u062D"],[64958,1,"\u062C\u062D\u064A"],[64959,1,"\u062D\u062C\u064A"],[64960,1,"\u0645\u062C\u064A"],[64961,1,"\u0641\u0645\u064A"],[64962,1,"\u0628\u062D\u064A"],[64963,1,"\u0643\u0645\u0645"],[64964,1,"\u0639\u062C\u0645"],[64965,1,"\u0635\u0645\u0645"],[64966,1,"\u0633\u062E\u064A"],[64967,1,"\u0646\u062C\u064A"],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,"\u0635\u0644\u06D2"],[65009,1,"\u0642\u0644\u06D2"],[65010,1,"\u0627\u0644\u0644\u0647"],[65011,1,"\u0627\u0643\u0628\u0631"],[65012,1,"\u0645\u062D\u0645\u062F"],[65013,1,"\u0635\u0644\u0639\u0645"],[65014,1,"\u0631\u0633\u0648\u0644"],[65015,1,"\u0639\u0644\u064A\u0647"],[65016,1,"\u0648\u0633\u0644\u0645"],[65017,1,"\u0635\u0644\u0649"],[65018,5,"\u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064A\u0647 \u0648\u0633\u0644\u0645"],[65019,5,"\u062C\u0644 \u062C\u0644\u0627\u0644\u0647"],[65020,1,"\u0631\u06CC\u0627\u0644"],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,5,","],[65041,1,"\u3001"],[65042,3],[65043,5,":"],[65044,5,";"],[65045,5,"!"],[65046,5,"?"],[65047,1,"\u3016"],[65048,1,"\u3017"],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,"\u2014"],[65074,1,"\u2013"],[[65075,65076],5,"_"],[65077,5,"("],[65078,5,")"],[65079,5,"{"],[65080,5,"}"],[65081,1,"\u3014"],[65082,1,"\u3015"],[65083,1,"\u3010"],[65084,1,"\u3011"],[65085,1,"\u300A"],[65086,1,"\u300B"],[65087,1,"\u3008"],[65088,1,"\u3009"],[65089,1,"\u300C"],[65090,1,"\u300D"],[65091,1,"\u300E"],[65092,1,"\u300F"],[[65093,65094],2],[65095,5,"["],[65096,5,"]"],[[65097,65100],5," \u0305"],[[65101,65103],5,"_"],[65104,5,","],[65105,1,"\u3001"],[65106,3],[65107,3],[65108,5,";"],[65109,5,":"],[65110,5,"?"],[65111,5,"!"],[65112,1,"\u2014"],[65113,5,"("],[65114,5,")"],[65115,5,"{"],[65116,5,"}"],[65117,1,"\u3014"],[65118,1,"\u3015"],[65119,5,"#"],[65120,5,"&"],[65121,5,"*"],[65122,5,"+"],[65123,1,"-"],[65124,5,"<"],[65125,5,">"],[65126,5,"="],[65127,3],[65128,5,"\\"],[65129,5,"$"],[65130,5,"%"],[65131,5,"@"],[[65132,65135],3],[65136,5," \u064B"],[65137,1,"\u0640\u064B"],[65138,5," \u064C"],[65139,2],[65140,5," \u064D"],[65141,3],[65142,5," \u064E"],[65143,1,"\u0640\u064E"],[65144,5," \u064F"],[65145,1,"\u0640\u064F"],[65146,5," \u0650"],[65147,1,"\u0640\u0650"],[65148,5," \u0651"],[65149,1,"\u0640\u0651"],[65150,5," \u0652"],[65151,1,"\u0640\u0652"],[65152,1,"\u0621"],[[65153,65154],1,"\u0622"],[[65155,65156],1,"\u0623"],[[65157,65158],1,"\u0624"],[[65159,65160],1,"\u0625"],[[65161,65164],1,"\u0626"],[[65165,65166],1,"\u0627"],[[65167,65170],1,"\u0628"],[[65171,65172],1,"\u0629"],[[65173,65176],1,"\u062A"],[[65177,65180],1,"\u062B"],[[65181,65184],1,"\u062C"],[[65185,65188],1,"\u062D"],[[65189,65192],1,"\u062E"],[[65193,65194],1,"\u062F"],[[65195,65196],1,"\u0630"],[[65197,65198],1,"\u0631"],[[65199,65200],1,"\u0632"],[[65201,65204],1,"\u0633"],[[65205,65208],1,"\u0634"],[[65209,65212],1,"\u0635"],[[65213,65216],1,"\u0636"],[[65217,65220],1,"\u0637"],[[65221,65224],1,"\u0638"],[[65225,65228],1,"\u0639"],[[65229,65232],1,"\u063A"],[[65233,65236],1,"\u0641"],[[65237,65240],1,"\u0642"],[[65241,65244],1,"\u0643"],[[65245,65248],1,"\u0644"],[[65249,65252],1,"\u0645"],[[65253,65256],1,"\u0646"],[[65257,65260],1,"\u0647"],[[65261,65262],1,"\u0648"],[[65263,65264],1,"\u0649"],[[65265,65268],1,"\u064A"],[[65269,65270],1,"\u0644\u0622"],[[65271,65272],1,"\u0644\u0623"],[[65273,65274],1,"\u0644\u0625"],[[65275,65276],1,"\u0644\u0627"],[[65277,65278],3],[65279,7],[65280,3],[65281,5,"!"],[65282,5,'"'],[65283,5,"#"],[65284,5,"$"],[65285,5,"%"],[65286,5,"&"],[65287,5,"'"],[65288,5,"("],[65289,5,")"],[65290,5,"*"],[65291,5,"+"],[65292,5,","],[65293,1,"-"],[65294,1,"."],[65295,5,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,5,":"],[65307,5,";"],[65308,5,"<"],[65309,5,"="],[65310,5,">"],[65311,5,"?"],[65312,5,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,5,"["],[65340,5,"\\"],[65341,5,"]"],[65342,5,"^"],[65343,5,"_"],[65344,5,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,5,"{"],[65372,5,"|"],[65373,5,"}"],[65374,5,"~"],[65375,1,"\u2985"],[65376,1,"\u2986"],[65377,1,"."],[65378,1,"\u300C"],[65379,1,"\u300D"],[65380,1,"\u3001"],[65381,1,"\u30FB"],[65382,1,"\u30F2"],[65383,1,"\u30A1"],[65384,1,"\u30A3"],[65385,1,"\u30A5"],[65386,1,"\u30A7"],[65387,1,"\u30A9"],[65388,1,"\u30E3"],[65389,1,"\u30E5"],[65390,1,"\u30E7"],[65391,1,"\u30C3"],[65392,1,"\u30FC"],[65393,1,"\u30A2"],[65394,1,"\u30A4"],[65395,1,"\u30A6"],[65396,1,"\u30A8"],[65397,1,"\u30AA"],[65398,1,"\u30AB"],[65399,1,"\u30AD"],[65400,1,"\u30AF"],[65401,1,"\u30B1"],[65402,1,"\u30B3"],[65403,1,"\u30B5"],[65404,1,"\u30B7"],[65405,1,"\u30B9"],[65406,1,"\u30BB"],[65407,1,"\u30BD"],[65408,1,"\u30BF"],[65409,1,"\u30C1"],[65410,1,"\u30C4"],[65411,1,"\u30C6"],[65412,1,"\u30C8"],[65413,1,"\u30CA"],[65414,1,"\u30CB"],[65415,1,"\u30CC"],[65416,1,"\u30CD"],[65417,1,"\u30CE"],[65418,1,"\u30CF"],[65419,1,"\u30D2"],[65420,1,"\u30D5"],[65421,1,"\u30D8"],[65422,1,"\u30DB"],[65423,1,"\u30DE"],[65424,1,"\u30DF"],[65425,1,"\u30E0"],[65426,1,"\u30E1"],[65427,1,"\u30E2"],[65428,1,"\u30E4"],[65429,1,"\u30E6"],[65430,1,"\u30E8"],[65431,1,"\u30E9"],[65432,1,"\u30EA"],[65433,1,"\u30EB"],[65434,1,"\u30EC"],[65435,1,"\u30ED"],[65436,1,"\u30EF"],[65437,1,"\u30F3"],[65438,1,"\u3099"],[65439,1,"\u309A"],[65440,3],[65441,1,"\u1100"],[65442,1,"\u1101"],[65443,1,"\u11AA"],[65444,1,"\u1102"],[65445,1,"\u11AC"],[65446,1,"\u11AD"],[65447,1,"\u1103"],[65448,1,"\u1104"],[65449,1,"\u1105"],[65450,1,"\u11B0"],[65451,1,"\u11B1"],[65452,1,"\u11B2"],[65453,1,"\u11B3"],[65454,1,"\u11B4"],[65455,1,"\u11B5"],[65456,1,"\u111A"],[65457,1,"\u1106"],[65458,1,"\u1107"],[65459,1,"\u1108"],[65460,1,"\u1121"],[65461,1,"\u1109"],[65462,1,"\u110A"],[65463,1,"\u110B"],[65464,1,"\u110C"],[65465,1,"\u110D"],[65466,1,"\u110E"],[65467,1,"\u110F"],[65468,1,"\u1110"],[65469,1,"\u1111"],[65470,1,"\u1112"],[[65471,65473],3],[65474,1,"\u1161"],[65475,1,"\u1162"],[65476,1,"\u1163"],[65477,1,"\u1164"],[65478,1,"\u1165"],[65479,1,"\u1166"],[[65480,65481],3],[65482,1,"\u1167"],[65483,1,"\u1168"],[65484,1,"\u1169"],[65485,1,"\u116A"],[65486,1,"\u116B"],[65487,1,"\u116C"],[[65488,65489],3],[65490,1,"\u116D"],[65491,1,"\u116E"],[65492,1,"\u116F"],[65493,1,"\u1170"],[65494,1,"\u1171"],[65495,1,"\u1172"],[[65496,65497],3],[65498,1,"\u1173"],[65499,1,"\u1174"],[65500,1,"\u1175"],[[65501,65503],3],[65504,1,"\xA2"],[65505,1,"\xA3"],[65506,1,"\xAC"],[65507,5," \u0304"],[65508,1,"\xA6"],[65509,1,"\xA5"],[65510,1,"\u20A9"],[65511,3],[65512,1,"\u2502"],[65513,1,"\u2190"],[65514,1,"\u2191"],[65515,1,"\u2192"],[65516,1,"\u2193"],[65517,1,"\u25A0"],[65518,1,"\u25CB"],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66e3,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,"\u{10428}"],[66561,1,"\u{10429}"],[66562,1,"\u{1042A}"],[66563,1,"\u{1042B}"],[66564,1,"\u{1042C}"],[66565,1,"\u{1042D}"],[66566,1,"\u{1042E}"],[66567,1,"\u{1042F}"],[66568,1,"\u{10430}"],[66569,1,"\u{10431}"],[66570,1,"\u{10432}"],[66571,1,"\u{10433}"],[66572,1,"\u{10434}"],[66573,1,"\u{10435}"],[66574,1,"\u{10436}"],[66575,1,"\u{10437}"],[66576,1,"\u{10438}"],[66577,1,"\u{10439}"],[66578,1,"\u{1043A}"],[66579,1,"\u{1043B}"],[66580,1,"\u{1043C}"],[66581,1,"\u{1043D}"],[66582,1,"\u{1043E}"],[66583,1,"\u{1043F}"],[66584,1,"\u{10440}"],[66585,1,"\u{10441}"],[66586,1,"\u{10442}"],[66587,1,"\u{10443}"],[66588,1,"\u{10444}"],[66589,1,"\u{10445}"],[66590,1,"\u{10446}"],[66591,1,"\u{10447}"],[66592,1,"\u{10448}"],[66593,1,"\u{10449}"],[66594,1,"\u{1044A}"],[66595,1,"\u{1044B}"],[66596,1,"\u{1044C}"],[66597,1,"\u{1044D}"],[66598,1,"\u{1044E}"],[66599,1,"\u{1044F}"],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,"\u{104D8}"],[66737,1,"\u{104D9}"],[66738,1,"\u{104DA}"],[66739,1,"\u{104DB}"],[66740,1,"\u{104DC}"],[66741,1,"\u{104DD}"],[66742,1,"\u{104DE}"],[66743,1,"\u{104DF}"],[66744,1,"\u{104E0}"],[66745,1,"\u{104E1}"],[66746,1,"\u{104E2}"],[66747,1,"\u{104E3}"],[66748,1,"\u{104E4}"],[66749,1,"\u{104E5}"],[66750,1,"\u{104E6}"],[66751,1,"\u{104E7}"],[66752,1,"\u{104E8}"],[66753,1,"\u{104E9}"],[66754,1,"\u{104EA}"],[66755,1,"\u{104EB}"],[66756,1,"\u{104EC}"],[66757,1,"\u{104ED}"],[66758,1,"\u{104EE}"],[66759,1,"\u{104EF}"],[66760,1,"\u{104F0}"],[66761,1,"\u{104F1}"],[66762,1,"\u{104F2}"],[66763,1,"\u{104F3}"],[66764,1,"\u{104F4}"],[66765,1,"\u{104F5}"],[66766,1,"\u{104F6}"],[66767,1,"\u{104F7}"],[66768,1,"\u{104F8}"],[66769,1,"\u{104F9}"],[66770,1,"\u{104FA}"],[66771,1,"\u{104FB}"],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,"\u{10597}"],[66929,1,"\u{10598}"],[66930,1,"\u{10599}"],[66931,1,"\u{1059A}"],[66932,1,"\u{1059B}"],[66933,1,"\u{1059C}"],[66934,1,"\u{1059D}"],[66935,1,"\u{1059E}"],[66936,1,"\u{1059F}"],[66937,1,"\u{105A0}"],[66938,1,"\u{105A1}"],[66939,3],[66940,1,"\u{105A3}"],[66941,1,"\u{105A4}"],[66942,1,"\u{105A5}"],[66943,1,"\u{105A6}"],[66944,1,"\u{105A7}"],[66945,1,"\u{105A8}"],[66946,1,"\u{105A9}"],[66947,1,"\u{105AA}"],[66948,1,"\u{105AB}"],[66949,1,"\u{105AC}"],[66950,1,"\u{105AD}"],[66951,1,"\u{105AE}"],[66952,1,"\u{105AF}"],[66953,1,"\u{105B0}"],[66954,1,"\u{105B1}"],[66955,3],[66956,1,"\u{105B3}"],[66957,1,"\u{105B4}"],[66958,1,"\u{105B5}"],[66959,1,"\u{105B6}"],[66960,1,"\u{105B7}"],[66961,1,"\u{105B8}"],[66962,1,"\u{105B9}"],[66963,3],[66964,1,"\u{105BB}"],[66965,1,"\u{105BC}"],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,"\u02D0"],[67458,1,"\u02D1"],[67459,1,"\xE6"],[67460,1,"\u0299"],[67461,1,"\u0253"],[67462,3],[67463,1,"\u02A3"],[67464,1,"\uAB66"],[67465,1,"\u02A5"],[67466,1,"\u02A4"],[67467,1,"\u0256"],[67468,1,"\u0257"],[67469,1,"\u1D91"],[67470,1,"\u0258"],[67471,1,"\u025E"],[67472,1,"\u02A9"],[67473,1,"\u0264"],[67474,1,"\u0262"],[67475,1,"\u0260"],[67476,1,"\u029B"],[67477,1,"\u0127"],[67478,1,"\u029C"],[67479,1,"\u0267"],[67480,1,"\u0284"],[67481,1,"\u02AA"],[67482,1,"\u02AB"],[67483,1,"\u026C"],[67484,1,"\u{1DF04}"],[67485,1,"\uA78E"],[67486,1,"\u026E"],[67487,1,"\u{1DF05}"],[67488,1,"\u028E"],[67489,1,"\u{1DF06}"],[67490,1,"\xF8"],[67491,1,"\u0276"],[67492,1,"\u0277"],[67493,1,"q"],[67494,1,"\u027A"],[67495,1,"\u{1DF08}"],[67496,1,"\u027D"],[67497,1,"\u027E"],[67498,1,"\u0280"],[67499,1,"\u02A8"],[67500,1,"\u02A6"],[67501,1,"\uAB67"],[67502,1,"\u02A7"],[67503,1,"\u0288"],[67504,1,"\u2C71"],[67505,3],[67506,1,"\u028F"],[67507,1,"\u02A1"],[67508,1,"\u02A2"],[67509,1,"\u0298"],[67510,1,"\u01C0"],[67511,1,"\u01C1"],[67512,1,"\u01C2"],[67513,1,"\u{1DF0A}"],[67514,1,"\u{1DF1E}"],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,"\u{10CC0}"],[68737,1,"\u{10CC1}"],[68738,1,"\u{10CC2}"],[68739,1,"\u{10CC3}"],[68740,1,"\u{10CC4}"],[68741,1,"\u{10CC5}"],[68742,1,"\u{10CC6}"],[68743,1,"\u{10CC7}"],[68744,1,"\u{10CC8}"],[68745,1,"\u{10CC9}"],[68746,1,"\u{10CCA}"],[68747,1,"\u{10CCB}"],[68748,1,"\u{10CCC}"],[68749,1,"\u{10CCD}"],[68750,1,"\u{10CCE}"],[68751,1,"\u{10CCF}"],[68752,1,"\u{10CD0}"],[68753,1,"\u{10CD1}"],[68754,1,"\u{10CD2}"],[68755,1,"\u{10CD3}"],[68756,1,"\u{10CD4}"],[68757,1,"\u{10CD5}"],[68758,1,"\u{10CD6}"],[68759,1,"\u{10CD7}"],[68760,1,"\u{10CD8}"],[68761,1,"\u{10CD9}"],[68762,1,"\u{10CDA}"],[68763,1,"\u{10CDB}"],[68764,1,"\u{10CDC}"],[68765,1,"\u{10CDD}"],[68766,1,"\u{10CDE}"],[68767,1,"\u{10CDF}"],[68768,1,"\u{10CE0}"],[68769,1,"\u{10CE1}"],[68770,1,"\u{10CE2}"],[68771,1,"\u{10CE3}"],[68772,1,"\u{10CE4}"],[68773,1,"\u{10CE5}"],[68774,1,"\u{10CE6}"],[68775,1,"\u{10CE7}"],[68776,1,"\u{10CE8}"],[68777,1,"\u{10CE9}"],[68778,1,"\u{10CEA}"],[68779,1,"\u{10CEB}"],[68780,1,"\u{10CEC}"],[68781,1,"\u{10CED}"],[68782,1,"\u{10CEE}"],[68783,1,"\u{10CEF}"],[68784,1,"\u{10CF0}"],[68785,1,"\u{10CF1}"],[68786,1,"\u{10CF2}"],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69372],3],[[69373,69375],2],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70209],2],[[70210,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,"\u{118C0}"],[71841,1,"\u{118C1}"],[71842,1,"\u{118C2}"],[71843,1,"\u{118C3}"],[71844,1,"\u{118C4}"],[71845,1,"\u{118C5}"],[71846,1,"\u{118C6}"],[71847,1,"\u{118C7}"],[71848,1,"\u{118C8}"],[71849,1,"\u{118C9}"],[71850,1,"\u{118CA}"],[71851,1,"\u{118CB}"],[71852,1,"\u{118CC}"],[71853,1,"\u{118CD}"],[71854,1,"\u{118CE}"],[71855,1,"\u{118CF}"],[71856,1,"\u{118D0}"],[71857,1,"\u{118D1}"],[71858,1,"\u{118D2}"],[71859,1,"\u{118D3}"],[71860,1,"\u{118D4}"],[71861,1,"\u{118D5}"],[71862,1,"\u{118D6}"],[71863,1,"\u{118D7}"],[71864,1,"\u{118D8}"],[71865,1,"\u{118D9}"],[71866,1,"\u{118DA}"],[71867,1,"\u{118DB}"],[71868,1,"\u{118DC}"],[71869,1,"\u{118DD}"],[71870,1,"\u{118DE}"],[71871,1,"\u{118DF}"],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72447],3],[[72448,72457],2],[[72458,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73471],3],[[73472,73488],2],[73489,3],[[73490,73530],2],[[73531,73533],3],[[73534,73538],2],[[73539,73551],2],[[73552,73561],2],[[73562,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,2],[[78896,78904],3],[[78905,78911],3],[[78912,78933],2],[[78934,82943],3],[[82944,83526],2],[[83527,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93759],3],[93760,1,"\u{16E60}"],[93761,1,"\u{16E61}"],[93762,1,"\u{16E62}"],[93763,1,"\u{16E63}"],[93764,1,"\u{16E64}"],[93765,1,"\u{16E65}"],[93766,1,"\u{16E66}"],[93767,1,"\u{16E67}"],[93768,1,"\u{16E68}"],[93769,1,"\u{16E69}"],[93770,1,"\u{16E6A}"],[93771,1,"\u{16E6B}"],[93772,1,"\u{16E6C}"],[93773,1,"\u{16E6D}"],[93774,1,"\u{16E6E}"],[93775,1,"\u{16E6F}"],[93776,1,"\u{16E70}"],[93777,1,"\u{16E71}"],[93778,1,"\u{16E72}"],[93779,1,"\u{16E73}"],[93780,1,"\u{16E74}"],[93781,1,"\u{16E75}"],[93782,1,"\u{16E76}"],[93783,1,"\u{16E77}"],[93784,1,"\u{16E78}"],[93785,1,"\u{16E79}"],[93786,1,"\u{16E7A}"],[93787,1,"\u{16E7B}"],[93788,1,"\u{16E7C}"],[93789,1,"\u{16E7D}"],[93790,1,"\u{16E7E}"],[93791,1,"\u{16E7F}"],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101631],3],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110897],3],[110898,2],[[110899,110927],3],[[110928,110930],2],[[110931,110932],3],[110933,2],[[110934,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,"\u{1D157}\u{1D165}"],[119135,1,"\u{1D158}\u{1D165}"],[119136,1,"\u{1D158}\u{1D165}\u{1D16E}"],[119137,1,"\u{1D158}\u{1D165}\u{1D16F}"],[119138,1,"\u{1D158}\u{1D165}\u{1D170}"],[119139,1,"\u{1D158}\u{1D165}\u{1D171}"],[119140,1,"\u{1D158}\u{1D165}\u{1D172}"],[[119141,119154],2],[[119155,119162],3],[[119163,119226],2],[119227,1,"\u{1D1B9}\u{1D165}"],[119228,1,"\u{1D1BA}\u{1D165}"],[119229,1,"\u{1D1B9}\u{1D165}\u{1D16E}"],[119230,1,"\u{1D1BA}\u{1D165}\u{1D16E}"],[119231,1,"\u{1D1B9}\u{1D165}\u{1D16F}"],[119232,1,"\u{1D1BA}\u{1D165}\u{1D16F}"],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119487],3],[[119488,119507],2],[[119508,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[12e4,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,"\u0131"],[120485,1,"\u0237"],[[120486,120487],3],[120488,1,"\u03B1"],[120489,1,"\u03B2"],[120490,1,"\u03B3"],[120491,1,"\u03B4"],[120492,1,"\u03B5"],[120493,1,"\u03B6"],[120494,1,"\u03B7"],[120495,1,"\u03B8"],[120496,1,"\u03B9"],[120497,1,"\u03BA"],[120498,1,"\u03BB"],[120499,1,"\u03BC"],[120500,1,"\u03BD"],[120501,1,"\u03BE"],[120502,1,"\u03BF"],[120503,1,"\u03C0"],[120504,1,"\u03C1"],[120505,1,"\u03B8"],[120506,1,"\u03C3"],[120507,1,"\u03C4"],[120508,1,"\u03C5"],[120509,1,"\u03C6"],[120510,1,"\u03C7"],[120511,1,"\u03C8"],[120512,1,"\u03C9"],[120513,1,"\u2207"],[120514,1,"\u03B1"],[120515,1,"\u03B2"],[120516,1,"\u03B3"],[120517,1,"\u03B4"],[120518,1,"\u03B5"],[120519,1,"\u03B6"],[120520,1,"\u03B7"],[120521,1,"\u03B8"],[120522,1,"\u03B9"],[120523,1,"\u03BA"],[120524,1,"\u03BB"],[120525,1,"\u03BC"],[120526,1,"\u03BD"],[120527,1,"\u03BE"],[120528,1,"\u03BF"],[120529,1,"\u03C0"],[120530,1,"\u03C1"],[[120531,120532],1,"\u03C3"],[120533,1,"\u03C4"],[120534,1,"\u03C5"],[120535,1,"\u03C6"],[120536,1,"\u03C7"],[120537,1,"\u03C8"],[120538,1,"\u03C9"],[120539,1,"\u2202"],[120540,1,"\u03B5"],[120541,1,"\u03B8"],[120542,1,"\u03BA"],[120543,1,"\u03C6"],[120544,1,"\u03C1"],[120545,1,"\u03C0"],[120546,1,"\u03B1"],[120547,1,"\u03B2"],[120548,1,"\u03B3"],[120549,1,"\u03B4"],[120550,1,"\u03B5"],[120551,1,"\u03B6"],[120552,1,"\u03B7"],[120553,1,"\u03B8"],[120554,1,"\u03B9"],[120555,1,"\u03BA"],[120556,1,"\u03BB"],[120557,1,"\u03BC"],[120558,1,"\u03BD"],[120559,1,"\u03BE"],[120560,1,"\u03BF"],[120561,1,"\u03C0"],[120562,1,"\u03C1"],[120563,1,"\u03B8"],[120564,1,"\u03C3"],[120565,1,"\u03C4"],[120566,1,"\u03C5"],[120567,1,"\u03C6"],[120568,1,"\u03C7"],[120569,1,"\u03C8"],[120570,1,"\u03C9"],[120571,1,"\u2207"],[120572,1,"\u03B1"],[120573,1,"\u03B2"],[120574,1,"\u03B3"],[120575,1,"\u03B4"],[120576,1,"\u03B5"],[120577,1,"\u03B6"],[120578,1,"\u03B7"],[120579,1,"\u03B8"],[120580,1,"\u03B9"],[120581,1,"\u03BA"],[120582,1,"\u03BB"],[120583,1,"\u03BC"],[120584,1,"\u03BD"],[120585,1,"\u03BE"],[120586,1,"\u03BF"],[120587,1,"\u03C0"],[120588,1,"\u03C1"],[[120589,120590],1,"\u03C3"],[120591,1,"\u03C4"],[120592,1,"\u03C5"],[120593,1,"\u03C6"],[120594,1,"\u03C7"],[120595,1,"\u03C8"],[120596,1,"\u03C9"],[120597,1,"\u2202"],[120598,1,"\u03B5"],[120599,1,"\u03B8"],[120600,1,"\u03BA"],[120601,1,"\u03C6"],[120602,1,"\u03C1"],[120603,1,"\u03C0"],[120604,1,"\u03B1"],[120605,1,"\u03B2"],[120606,1,"\u03B3"],[120607,1,"\u03B4"],[120608,1,"\u03B5"],[120609,1,"\u03B6"],[120610,1,"\u03B7"],[120611,1,"\u03B8"],[120612,1,"\u03B9"],[120613,1,"\u03BA"],[120614,1,"\u03BB"],[120615,1,"\u03BC"],[120616,1,"\u03BD"],[120617,1,"\u03BE"],[120618,1,"\u03BF"],[120619,1,"\u03C0"],[120620,1,"\u03C1"],[120621,1,"\u03B8"],[120622,1,"\u03C3"],[120623,1,"\u03C4"],[120624,1,"\u03C5"],[120625,1,"\u03C6"],[120626,1,"\u03C7"],[120627,1,"\u03C8"],[120628,1,"\u03C9"],[120629,1,"\u2207"],[120630,1,"\u03B1"],[120631,1,"\u03B2"],[120632,1,"\u03B3"],[120633,1,"\u03B4"],[120634,1,"\u03B5"],[120635,1,"\u03B6"],[120636,1,"\u03B7"],[120637,1,"\u03B8"],[120638,1,"\u03B9"],[120639,1,"\u03BA"],[120640,1,"\u03BB"],[120641,1,"\u03BC"],[120642,1,"\u03BD"],[120643,1,"\u03BE"],[120644,1,"\u03BF"],[120645,1,"\u03C0"],[120646,1,"\u03C1"],[[120647,120648],1,"\u03C3"],[120649,1,"\u03C4"],[120650,1,"\u03C5"],[120651,1,"\u03C6"],[120652,1,"\u03C7"],[120653,1,"\u03C8"],[120654,1,"\u03C9"],[120655,1,"\u2202"],[120656,1,"\u03B5"],[120657,1,"\u03B8"],[120658,1,"\u03BA"],[120659,1,"\u03C6"],[120660,1,"\u03C1"],[120661,1,"\u03C0"],[120662,1,"\u03B1"],[120663,1,"\u03B2"],[120664,1,"\u03B3"],[120665,1,"\u03B4"],[120666,1,"\u03B5"],[120667,1,"\u03B6"],[120668,1,"\u03B7"],[120669,1,"\u03B8"],[120670,1,"\u03B9"],[120671,1,"\u03BA"],[120672,1,"\u03BB"],[120673,1,"\u03BC"],[120674,1,"\u03BD"],[120675,1,"\u03BE"],[120676,1,"\u03BF"],[120677,1,"\u03C0"],[120678,1,"\u03C1"],[120679,1,"\u03B8"],[120680,1,"\u03C3"],[120681,1,"\u03C4"],[120682,1,"\u03C5"],[120683,1,"\u03C6"],[120684,1,"\u03C7"],[120685,1,"\u03C8"],[120686,1,"\u03C9"],[120687,1,"\u2207"],[120688,1,"\u03B1"],[120689,1,"\u03B2"],[120690,1,"\u03B3"],[120691,1,"\u03B4"],[120692,1,"\u03B5"],[120693,1,"\u03B6"],[120694,1,"\u03B7"],[120695,1,"\u03B8"],[120696,1,"\u03B9"],[120697,1,"\u03BA"],[120698,1,"\u03BB"],[120699,1,"\u03BC"],[120700,1,"\u03BD"],[120701,1,"\u03BE"],[120702,1,"\u03BF"],[120703,1,"\u03C0"],[120704,1,"\u03C1"],[[120705,120706],1,"\u03C3"],[120707,1,"\u03C4"],[120708,1,"\u03C5"],[120709,1,"\u03C6"],[120710,1,"\u03C7"],[120711,1,"\u03C8"],[120712,1,"\u03C9"],[120713,1,"\u2202"],[120714,1,"\u03B5"],[120715,1,"\u03B8"],[120716,1,"\u03BA"],[120717,1,"\u03C6"],[120718,1,"\u03C1"],[120719,1,"\u03C0"],[120720,1,"\u03B1"],[120721,1,"\u03B2"],[120722,1,"\u03B3"],[120723,1,"\u03B4"],[120724,1,"\u03B5"],[120725,1,"\u03B6"],[120726,1,"\u03B7"],[120727,1,"\u03B8"],[120728,1,"\u03B9"],[120729,1,"\u03BA"],[120730,1,"\u03BB"],[120731,1,"\u03BC"],[120732,1,"\u03BD"],[120733,1,"\u03BE"],[120734,1,"\u03BF"],[120735,1,"\u03C0"],[120736,1,"\u03C1"],[120737,1,"\u03B8"],[120738,1,"\u03C3"],[120739,1,"\u03C4"],[120740,1,"\u03C5"],[120741,1,"\u03C6"],[120742,1,"\u03C7"],[120743,1,"\u03C8"],[120744,1,"\u03C9"],[120745,1,"\u2207"],[120746,1,"\u03B1"],[120747,1,"\u03B2"],[120748,1,"\u03B3"],[120749,1,"\u03B4"],[120750,1,"\u03B5"],[120751,1,"\u03B6"],[120752,1,"\u03B7"],[120753,1,"\u03B8"],[120754,1,"\u03B9"],[120755,1,"\u03BA"],[120756,1,"\u03BB"],[120757,1,"\u03BC"],[120758,1,"\u03BD"],[120759,1,"\u03BE"],[120760,1,"\u03BF"],[120761,1,"\u03C0"],[120762,1,"\u03C1"],[[120763,120764],1,"\u03C3"],[120765,1,"\u03C4"],[120766,1,"\u03C5"],[120767,1,"\u03C6"],[120768,1,"\u03C7"],[120769,1,"\u03C8"],[120770,1,"\u03C9"],[120771,1,"\u2202"],[120772,1,"\u03B5"],[120773,1,"\u03B8"],[120774,1,"\u03BA"],[120775,1,"\u03C6"],[120776,1,"\u03C1"],[120777,1,"\u03C0"],[[120778,120779],1,"\u03DD"],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122660],3],[[122661,122666],2],[[122667,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,122927],3],[122928,1,"\u0430"],[122929,1,"\u0431"],[122930,1,"\u0432"],[122931,1,"\u0433"],[122932,1,"\u0434"],[122933,1,"\u0435"],[122934,1,"\u0436"],[122935,1,"\u0437"],[122936,1,"\u0438"],[122937,1,"\u043A"],[122938,1,"\u043B"],[122939,1,"\u043C"],[122940,1,"\u043E"],[122941,1,"\u043F"],[122942,1,"\u0440"],[122943,1,"\u0441"],[122944,1,"\u0442"],[122945,1,"\u0443"],[122946,1,"\u0444"],[122947,1,"\u0445"],[122948,1,"\u0446"],[122949,1,"\u0447"],[122950,1,"\u0448"],[122951,1,"\u044B"],[122952,1,"\u044D"],[122953,1,"\u044E"],[122954,1,"\uA689"],[122955,1,"\u04D9"],[122956,1,"\u0456"],[122957,1,"\u0458"],[122958,1,"\u04E9"],[122959,1,"\u04AF"],[122960,1,"\u04CF"],[122961,1,"\u0430"],[122962,1,"\u0431"],[122963,1,"\u0432"],[122964,1,"\u0433"],[122965,1,"\u0434"],[122966,1,"\u0435"],[122967,1,"\u0436"],[122968,1,"\u0437"],[122969,1,"\u0438"],[122970,1,"\u043A"],[122971,1,"\u043B"],[122972,1,"\u043E"],[122973,1,"\u043F"],[122974,1,"\u0441"],[122975,1,"\u0443"],[122976,1,"\u0444"],[122977,1,"\u0445"],[122978,1,"\u0446"],[122979,1,"\u0447"],[122980,1,"\u0448"],[122981,1,"\u044A"],[122982,1,"\u044B"],[122983,1,"\u0491"],[122984,1,"\u0456"],[122985,1,"\u0455"],[122986,1,"\u045F"],[122987,1,"\u04AB"],[122988,1,"\uA651"],[122989,1,"\u04B1"],[[122990,123022],3],[123023,2],[[123024,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124111],3],[[124112,124153],2],[[124154,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,"\u{1E922}"],[125185,1,"\u{1E923}"],[125186,1,"\u{1E924}"],[125187,1,"\u{1E925}"],[125188,1,"\u{1E926}"],[125189,1,"\u{1E927}"],[125190,1,"\u{1E928}"],[125191,1,"\u{1E929}"],[125192,1,"\u{1E92A}"],[125193,1,"\u{1E92B}"],[125194,1,"\u{1E92C}"],[125195,1,"\u{1E92D}"],[125196,1,"\u{1E92E}"],[125197,1,"\u{1E92F}"],[125198,1,"\u{1E930}"],[125199,1,"\u{1E931}"],[125200,1,"\u{1E932}"],[125201,1,"\u{1E933}"],[125202,1,"\u{1E934}"],[125203,1,"\u{1E935}"],[125204,1,"\u{1E936}"],[125205,1,"\u{1E937}"],[125206,1,"\u{1E938}"],[125207,1,"\u{1E939}"],[125208,1,"\u{1E93A}"],[125209,1,"\u{1E93B}"],[125210,1,"\u{1E93C}"],[125211,1,"\u{1E93D}"],[125212,1,"\u{1E93E}"],[125213,1,"\u{1E93F}"],[125214,1,"\u{1E940}"],[125215,1,"\u{1E941}"],[125216,1,"\u{1E942}"],[125217,1,"\u{1E943}"],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,"\u0627"],[126465,1,"\u0628"],[126466,1,"\u062C"],[126467,1,"\u062F"],[126468,3],[126469,1,"\u0648"],[126470,1,"\u0632"],[126471,1,"\u062D"],[126472,1,"\u0637"],[126473,1,"\u064A"],[126474,1,"\u0643"],[126475,1,"\u0644"],[126476,1,"\u0645"],[126477,1,"\u0646"],[126478,1,"\u0633"],[126479,1,"\u0639"],[126480,1,"\u0641"],[126481,1,"\u0635"],[126482,1,"\u0642"],[126483,1,"\u0631"],[126484,1,"\u0634"],[126485,1,"\u062A"],[126486,1,"\u062B"],[126487,1,"\u062E"],[126488,1,"\u0630"],[126489,1,"\u0636"],[126490,1,"\u0638"],[126491,1,"\u063A"],[126492,1,"\u066E"],[126493,1,"\u06BA"],[126494,1,"\u06A1"],[126495,1,"\u066F"],[126496,3],[126497,1,"\u0628"],[126498,1,"\u062C"],[126499,3],[126500,1,"\u0647"],[[126501,126502],3],[126503,1,"\u062D"],[126504,3],[126505,1,"\u064A"],[126506,1,"\u0643"],[126507,1,"\u0644"],[126508,1,"\u0645"],[126509,1,"\u0646"],[126510,1,"\u0633"],[126511,1,"\u0639"],[126512,1,"\u0641"],[126513,1,"\u0635"],[126514,1,"\u0642"],[126515,3],[126516,1,"\u0634"],[126517,1,"\u062A"],[126518,1,"\u062B"],[126519,1,"\u062E"],[126520,3],[126521,1,"\u0636"],[126522,3],[126523,1,"\u063A"],[[126524,126529],3],[126530,1,"\u062C"],[[126531,126534],3],[126535,1,"\u062D"],[126536,3],[126537,1,"\u064A"],[126538,3],[126539,1,"\u0644"],[126540,3],[126541,1,"\u0646"],[126542,1,"\u0633"],[126543,1,"\u0639"],[126544,3],[126545,1,"\u0635"],[126546,1,"\u0642"],[126547,3],[126548,1,"\u0634"],[[126549,126550],3],[126551,1,"\u062E"],[126552,3],[126553,1,"\u0636"],[126554,3],[126555,1,"\u063A"],[126556,3],[126557,1,"\u06BA"],[126558,3],[126559,1,"\u066F"],[126560,3],[126561,1,"\u0628"],[126562,1,"\u062C"],[126563,3],[126564,1,"\u0647"],[[126565,126566],3],[126567,1,"\u062D"],[126568,1,"\u0637"],[126569,1,"\u064A"],[126570,1,"\u0643"],[126571,3],[126572,1,"\u0645"],[126573,1,"\u0646"],[126574,1,"\u0633"],[126575,1,"\u0639"],[126576,1,"\u0641"],[126577,1,"\u0635"],[126578,1,"\u0642"],[126579,3],[126580,1,"\u0634"],[126581,1,"\u062A"],[126582,1,"\u062B"],[126583,1,"\u062E"],[126584,3],[126585,1,"\u0636"],[126586,1,"\u0638"],[126587,1,"\u063A"],[126588,1,"\u066E"],[126589,3],[126590,1,"\u06A1"],[126591,3],[126592,1,"\u0627"],[126593,1,"\u0628"],[126594,1,"\u062C"],[126595,1,"\u062F"],[126596,1,"\u0647"],[126597,1,"\u0648"],[126598,1,"\u0632"],[126599,1,"\u062D"],[126600,1,"\u0637"],[126601,1,"\u064A"],[126602,3],[126603,1,"\u0644"],[126604,1,"\u0645"],[126605,1,"\u0646"],[126606,1,"\u0633"],[126607,1,"\u0639"],[126608,1,"\u0641"],[126609,1,"\u0635"],[126610,1,"\u0642"],[126611,1,"\u0631"],[126612,1,"\u0634"],[126613,1,"\u062A"],[126614,1,"\u062B"],[126615,1,"\u062E"],[126616,1,"\u0630"],[126617,1,"\u0636"],[126618,1,"\u0638"],[126619,1,"\u063A"],[[126620,126624],3],[126625,1,"\u0628"],[126626,1,"\u062C"],[126627,1,"\u062F"],[126628,3],[126629,1,"\u0648"],[126630,1,"\u0632"],[126631,1,"\u062D"],[126632,1,"\u0637"],[126633,1,"\u064A"],[126634,3],[126635,1,"\u0644"],[126636,1,"\u0645"],[126637,1,"\u0646"],[126638,1,"\u0633"],[126639,1,"\u0639"],[126640,1,"\u0641"],[126641,1,"\u0635"],[126642,1,"\u0642"],[126643,1,"\u0631"],[126644,1,"\u0634"],[126645,1,"\u062A"],[126646,1,"\u062B"],[126647,1,"\u062E"],[126648,1,"\u0630"],[126649,1,"\u0636"],[126650,1,"\u0638"],[126651,1,"\u063A"],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,5,"0,"],[127234,5,"1,"],[127235,5,"2,"],[127236,5,"3,"],[127237,5,"4,"],[127238,5,"5,"],[127239,5,"6,"],[127240,5,"7,"],[127241,5,"8,"],[127242,5,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,5,"(a)"],[127249,5,"(b)"],[127250,5,"(c)"],[127251,5,"(d)"],[127252,5,"(e)"],[127253,5,"(f)"],[127254,5,"(g)"],[127255,5,"(h)"],[127256,5,"(i)"],[127257,5,"(j)"],[127258,5,"(k)"],[127259,5,"(l)"],[127260,5,"(m)"],[127261,5,"(n)"],[127262,5,"(o)"],[127263,5,"(p)"],[127264,5,"(q)"],[127265,5,"(r)"],[127266,5,"(s)"],[127267,5,"(t)"],[127268,5,"(u)"],[127269,5,"(v)"],[127270,5,"(w)"],[127271,5,"(x)"],[127272,5,"(y)"],[127273,5,"(z)"],[127274,1,"\u3014s\u3015"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,"\u307B\u304B"],[127489,1,"\u30B3\u30B3"],[127490,1,"\u30B5"],[[127491,127503],3],[127504,1,"\u624B"],[127505,1,"\u5B57"],[127506,1,"\u53CC"],[127507,1,"\u30C7"],[127508,1,"\u4E8C"],[127509,1,"\u591A"],[127510,1,"\u89E3"],[127511,1,"\u5929"],[127512,1,"\u4EA4"],[127513,1,"\u6620"],[127514,1,"\u7121"],[127515,1,"\u6599"],[127516,1,"\u524D"],[127517,1,"\u5F8C"],[127518,1,"\u518D"],[127519,1,"\u65B0"],[127520,1,"\u521D"],[127521,1,"\u7D42"],[127522,1,"\u751F"],[127523,1,"\u8CA9"],[127524,1,"\u58F0"],[127525,1,"\u5439"],[127526,1,"\u6F14"],[127527,1,"\u6295"],[127528,1,"\u6355"],[127529,1,"\u4E00"],[127530,1,"\u4E09"],[127531,1,"\u904A"],[127532,1,"\u5DE6"],[127533,1,"\u4E2D"],[127534,1,"\u53F3"],[127535,1,"\u6307"],[127536,1,"\u8D70"],[127537,1,"\u6253"],[127538,1,"\u7981"],[127539,1,"\u7A7A"],[127540,1,"\u5408"],[127541,1,"\u6E80"],[127542,1,"\u6709"],[127543,1,"\u6708"],[127544,1,"\u7533"],[127545,1,"\u5272"],[127546,1,"\u55B6"],[127547,1,"\u914D"],[[127548,127551],3],[127552,1,"\u3014\u672C\u3015"],[127553,1,"\u3014\u4E09\u3015"],[127554,1,"\u3014\u4E8C\u3015"],[127555,1,"\u3014\u5B89\u3015"],[127556,1,"\u3014\u70B9\u3015"],[127557,1,"\u3014\u6253\u3015"],[127558,1,"\u3014\u76D7\u3015"],[127559,1,"\u3014\u52DD\u3015"],[127560,1,"\u3014\u6557\u3015"],[[127561,127567],3],[127568,1,"\u5F97"],[127569,1,"\u53EF"],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128e3,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128731],3],[128732,2],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128886],2],[[128887,128890],3],[[128891,128895],2],[[128896,128980],2],[[128981,128984],2],[128985,2],[[128986,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],2],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129672],2],[[129673,129679],3],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],2],[[129712,129718],2],[[129719,129722],2],[[129723,129725],2],[129726,3],[129727,2],[[129728,129730],2],[[129731,129733],2],[[129734,129741],3],[[129742,129743],2],[[129744,129750],2],[[129751,129753],2],[[129754,129755],2],[[129756,129759],3],[[129760,129767],2],[129768,2],[[129769,129775],3],[[129776,129782],2],[[129783,129784],2],[[129785,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],3],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[177977,2],[[177978,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,194559],3],[194560,1,"\u4E3D"],[194561,1,"\u4E38"],[194562,1,"\u4E41"],[194563,1,"\u{20122}"],[194564,1,"\u4F60"],[194565,1,"\u4FAE"],[194566,1,"\u4FBB"],[194567,1,"\u5002"],[194568,1,"\u507A"],[194569,1,"\u5099"],[194570,1,"\u50E7"],[194571,1,"\u50CF"],[194572,1,"\u349E"],[194573,1,"\u{2063A}"],[194574,1,"\u514D"],[194575,1,"\u5154"],[194576,1,"\u5164"],[194577,1,"\u5177"],[194578,1,"\u{2051C}"],[194579,1,"\u34B9"],[194580,1,"\u5167"],[194581,1,"\u518D"],[194582,1,"\u{2054B}"],[194583,1,"\u5197"],[194584,1,"\u51A4"],[194585,1,"\u4ECC"],[194586,1,"\u51AC"],[194587,1,"\u51B5"],[194588,1,"\u{291DF}"],[194589,1,"\u51F5"],[194590,1,"\u5203"],[194591,1,"\u34DF"],[194592,1,"\u523B"],[194593,1,"\u5246"],[194594,1,"\u5272"],[194595,1,"\u5277"],[194596,1,"\u3515"],[194597,1,"\u52C7"],[194598,1,"\u52C9"],[194599,1,"\u52E4"],[194600,1,"\u52FA"],[194601,1,"\u5305"],[194602,1,"\u5306"],[194603,1,"\u5317"],[194604,1,"\u5349"],[194605,1,"\u5351"],[194606,1,"\u535A"],[194607,1,"\u5373"],[194608,1,"\u537D"],[[194609,194611],1,"\u537F"],[194612,1,"\u{20A2C}"],[194613,1,"\u7070"],[194614,1,"\u53CA"],[194615,1,"\u53DF"],[194616,1,"\u{20B63}"],[194617,1,"\u53EB"],[194618,1,"\u53F1"],[194619,1,"\u5406"],[194620,1,"\u549E"],[194621,1,"\u5438"],[194622,1,"\u5448"],[194623,1,"\u5468"],[194624,1,"\u54A2"],[194625,1,"\u54F6"],[194626,1,"\u5510"],[194627,1,"\u5553"],[194628,1,"\u5563"],[[194629,194630],1,"\u5584"],[194631,1,"\u5599"],[194632,1,"\u55AB"],[194633,1,"\u55B3"],[194634,1,"\u55C2"],[194635,1,"\u5716"],[194636,1,"\u5606"],[194637,1,"\u5717"],[194638,1,"\u5651"],[194639,1,"\u5674"],[194640,1,"\u5207"],[194641,1,"\u58EE"],[194642,1,"\u57CE"],[194643,1,"\u57F4"],[194644,1,"\u580D"],[194645,1,"\u578B"],[194646,1,"\u5832"],[194647,1,"\u5831"],[194648,1,"\u58AC"],[194649,1,"\u{214E4}"],[194650,1,"\u58F2"],[194651,1,"\u58F7"],[194652,1,"\u5906"],[194653,1,"\u591A"],[194654,1,"\u5922"],[194655,1,"\u5962"],[194656,1,"\u{216A8}"],[194657,1,"\u{216EA}"],[194658,1,"\u59EC"],[194659,1,"\u5A1B"],[194660,1,"\u5A27"],[194661,1,"\u59D8"],[194662,1,"\u5A66"],[194663,1,"\u36EE"],[194664,3],[194665,1,"\u5B08"],[[194666,194667],1,"\u5B3E"],[194668,1,"\u{219C8}"],[194669,1,"\u5BC3"],[194670,1,"\u5BD8"],[194671,1,"\u5BE7"],[194672,1,"\u5BF3"],[194673,1,"\u{21B18}"],[194674,1,"\u5BFF"],[194675,1,"\u5C06"],[194676,3],[194677,1,"\u5C22"],[194678,1,"\u3781"],[194679,1,"\u5C60"],[194680,1,"\u5C6E"],[194681,1,"\u5CC0"],[194682,1,"\u5C8D"],[194683,1,"\u{21DE4}"],[194684,1,"\u5D43"],[194685,1,"\u{21DE6}"],[194686,1,"\u5D6E"],[194687,1,"\u5D6B"],[194688,1,"\u5D7C"],[194689,1,"\u5DE1"],[194690,1,"\u5DE2"],[194691,1,"\u382F"],[194692,1,"\u5DFD"],[194693,1,"\u5E28"],[194694,1,"\u5E3D"],[194695,1,"\u5E69"],[194696,1,"\u3862"],[194697,1,"\u{22183}"],[194698,1,"\u387C"],[194699,1,"\u5EB0"],[194700,1,"\u5EB3"],[194701,1,"\u5EB6"],[194702,1,"\u5ECA"],[194703,1,"\u{2A392}"],[194704,1,"\u5EFE"],[[194705,194706],1,"\u{22331}"],[194707,1,"\u8201"],[[194708,194709],1,"\u5F22"],[194710,1,"\u38C7"],[194711,1,"\u{232B8}"],[194712,1,"\u{261DA}"],[194713,1,"\u5F62"],[194714,1,"\u5F6B"],[194715,1,"\u38E3"],[194716,1,"\u5F9A"],[194717,1,"\u5FCD"],[194718,1,"\u5FD7"],[194719,1,"\u5FF9"],[194720,1,"\u6081"],[194721,1,"\u393A"],[194722,1,"\u391C"],[194723,1,"\u6094"],[194724,1,"\u{226D4}"],[194725,1,"\u60C7"],[194726,1,"\u6148"],[194727,1,"\u614C"],[194728,1,"\u614E"],[194729,1,"\u614C"],[194730,1,"\u617A"],[194731,1,"\u618E"],[194732,1,"\u61B2"],[194733,1,"\u61A4"],[194734,1,"\u61AF"],[194735,1,"\u61DE"],[194736,1,"\u61F2"],[194737,1,"\u61F6"],[194738,1,"\u6210"],[194739,1,"\u621B"],[194740,1,"\u625D"],[194741,1,"\u62B1"],[194742,1,"\u62D4"],[194743,1,"\u6350"],[194744,1,"\u{22B0C}"],[194745,1,"\u633D"],[194746,1,"\u62FC"],[194747,1,"\u6368"],[194748,1,"\u6383"],[194749,1,"\u63E4"],[194750,1,"\u{22BF1}"],[194751,1,"\u6422"],[194752,1,"\u63C5"],[194753,1,"\u63A9"],[194754,1,"\u3A2E"],[194755,1,"\u6469"],[194756,1,"\u647E"],[194757,1,"\u649D"],[194758,1,"\u6477"],[194759,1,"\u3A6C"],[194760,1,"\u654F"],[194761,1,"\u656C"],[194762,1,"\u{2300A}"],[194763,1,"\u65E3"],[194764,1,"\u66F8"],[194765,1,"\u6649"],[194766,1,"\u3B19"],[194767,1,"\u6691"],[194768,1,"\u3B08"],[194769,1,"\u3AE4"],[194770,1,"\u5192"],[194771,1,"\u5195"],[194772,1,"\u6700"],[194773,1,"\u669C"],[194774,1,"\u80AD"],[194775,1,"\u43D9"],[194776,1,"\u6717"],[194777,1,"\u671B"],[194778,1,"\u6721"],[194779,1,"\u675E"],[194780,1,"\u6753"],[194781,1,"\u{233C3}"],[194782,1,"\u3B49"],[194783,1,"\u67FA"],[194784,1,"\u6785"],[194785,1,"\u6852"],[194786,1,"\u6885"],[194787,1,"\u{2346D}"],[194788,1,"\u688E"],[194789,1,"\u681F"],[194790,1,"\u6914"],[194791,1,"\u3B9D"],[194792,1,"\u6942"],[194793,1,"\u69A3"],[194794,1,"\u69EA"],[194795,1,"\u6AA8"],[194796,1,"\u{236A3}"],[194797,1,"\u6ADB"],[194798,1,"\u3C18"],[194799,1,"\u6B21"],[194800,1,"\u{238A7}"],[194801,1,"\u6B54"],[194802,1,"\u3C4E"],[194803,1,"\u6B72"],[194804,1,"\u6B9F"],[194805,1,"\u6BBA"],[194806,1,"\u6BBB"],[194807,1,"\u{23A8D}"],[194808,1,"\u{21D0B}"],[194809,1,"\u{23AFA}"],[194810,1,"\u6C4E"],[194811,1,"\u{23CBC}"],[194812,1,"\u6CBF"],[194813,1,"\u6CCD"],[194814,1,"\u6C67"],[194815,1,"\u6D16"],[194816,1,"\u6D3E"],[194817,1,"\u6D77"],[194818,1,"\u6D41"],[194819,1,"\u6D69"],[194820,1,"\u6D78"],[194821,1,"\u6D85"],[194822,1,"\u{23D1E}"],[194823,1,"\u6D34"],[194824,1,"\u6E2F"],[194825,1,"\u6E6E"],[194826,1,"\u3D33"],[194827,1,"\u6ECB"],[194828,1,"\u6EC7"],[194829,1,"\u{23ED1}"],[194830,1,"\u6DF9"],[194831,1,"\u6F6E"],[194832,1,"\u{23F5E}"],[194833,1,"\u{23F8E}"],[194834,1,"\u6FC6"],[194835,1,"\u7039"],[194836,1,"\u701E"],[194837,1,"\u701B"],[194838,1,"\u3D96"],[194839,1,"\u704A"],[194840,1,"\u707D"],[194841,1,"\u7077"],[194842,1,"\u70AD"],[194843,1,"\u{20525}"],[194844,1,"\u7145"],[194845,1,"\u{24263}"],[194846,1,"\u719C"],[194847,3],[194848,1,"\u7228"],[194849,1,"\u7235"],[194850,1,"\u7250"],[194851,1,"\u{24608}"],[194852,1,"\u7280"],[194853,1,"\u7295"],[194854,1,"\u{24735}"],[194855,1,"\u{24814}"],[194856,1,"\u737A"],[194857,1,"\u738B"],[194858,1,"\u3EAC"],[194859,1,"\u73A5"],[[194860,194861],1,"\u3EB8"],[194862,1,"\u7447"],[194863,1,"\u745C"],[194864,1,"\u7471"],[194865,1,"\u7485"],[194866,1,"\u74CA"],[194867,1,"\u3F1B"],[194868,1,"\u7524"],[194869,1,"\u{24C36}"],[194870,1,"\u753E"],[194871,1,"\u{24C92}"],[194872,1,"\u7570"],[194873,1,"\u{2219F}"],[194874,1,"\u7610"],[194875,1,"\u{24FA1}"],[194876,1,"\u{24FB8}"],[194877,1,"\u{25044}"],[194878,1,"\u3FFC"],[194879,1,"\u4008"],[194880,1,"\u76F4"],[194881,1,"\u{250F3}"],[194882,1,"\u{250F2}"],[194883,1,"\u{25119}"],[194884,1,"\u{25133}"],[194885,1,"\u771E"],[[194886,194887],1,"\u771F"],[194888,1,"\u774A"],[194889,1,"\u4039"],[194890,1,"\u778B"],[194891,1,"\u4046"],[194892,1,"\u4096"],[194893,1,"\u{2541D}"],[194894,1,"\u784E"],[194895,1,"\u788C"],[194896,1,"\u78CC"],[194897,1,"\u40E3"],[194898,1,"\u{25626}"],[194899,1,"\u7956"],[194900,1,"\u{2569A}"],[194901,1,"\u{256C5}"],[194902,1,"\u798F"],[194903,1,"\u79EB"],[194904,1,"\u412F"],[194905,1,"\u7A40"],[194906,1,"\u7A4A"],[194907,1,"\u7A4F"],[194908,1,"\u{2597C}"],[[194909,194910],1,"\u{25AA7}"],[194911,3],[194912,1,"\u4202"],[194913,1,"\u{25BAB}"],[194914,1,"\u7BC6"],[194915,1,"\u7BC9"],[194916,1,"\u4227"],[194917,1,"\u{25C80}"],[194918,1,"\u7CD2"],[194919,1,"\u42A0"],[194920,1,"\u7CE8"],[194921,1,"\u7CE3"],[194922,1,"\u7D00"],[194923,1,"\u{25F86}"],[194924,1,"\u7D63"],[194925,1,"\u4301"],[194926,1,"\u7DC7"],[194927,1,"\u7E02"],[194928,1,"\u7E45"],[194929,1,"\u4334"],[194930,1,"\u{26228}"],[194931,1,"\u{26247}"],[194932,1,"\u4359"],[194933,1,"\u{262D9}"],[194934,1,"\u7F7A"],[194935,1,"\u{2633E}"],[194936,1,"\u7F95"],[194937,1,"\u7FFA"],[194938,1,"\u8005"],[194939,1,"\u{264DA}"],[194940,1,"\u{26523}"],[194941,1,"\u8060"],[194942,1,"\u{265A8}"],[194943,1,"\u8070"],[194944,1,"\u{2335F}"],[194945,1,"\u43D5"],[194946,1,"\u80B2"],[194947,1,"\u8103"],[194948,1,"\u440B"],[194949,1,"\u813E"],[194950,1,"\u5AB5"],[194951,1,"\u{267A7}"],[194952,1,"\u{267B5}"],[194953,1,"\u{23393}"],[194954,1,"\u{2339C}"],[194955,1,"\u8201"],[194956,1,"\u8204"],[194957,1,"\u8F9E"],[194958,1,"\u446B"],[194959,1,"\u8291"],[194960,1,"\u828B"],[194961,1,"\u829D"],[194962,1,"\u52B3"],[194963,1,"\u82B1"],[194964,1,"\u82B3"],[194965,1,"\u82BD"],[194966,1,"\u82E6"],[194967,1,"\u{26B3C}"],[194968,1,"\u82E5"],[194969,1,"\u831D"],[194970,1,"\u8363"],[194971,1,"\u83AD"],[194972,1,"\u8323"],[194973,1,"\u83BD"],[194974,1,"\u83E7"],[194975,1,"\u8457"],[194976,1,"\u8353"],[194977,1,"\u83CA"],[194978,1,"\u83CC"],[194979,1,"\u83DC"],[194980,1,"\u{26C36}"],[194981,1,"\u{26D6B}"],[194982,1,"\u{26CD5}"],[194983,1,"\u452B"],[194984,1,"\u84F1"],[194985,1,"\u84F3"],[194986,1,"\u8516"],[194987,1,"\u{273CA}"],[194988,1,"\u8564"],[194989,1,"\u{26F2C}"],[194990,1,"\u455D"],[194991,1,"\u4561"],[194992,1,"\u{26FB1}"],[194993,1,"\u{270D2}"],[194994,1,"\u456B"],[194995,1,"\u8650"],[194996,1,"\u865C"],[194997,1,"\u8667"],[194998,1,"\u8669"],[194999,1,"\u86A9"],[195e3,1,"\u8688"],[195001,1,"\u870E"],[195002,1,"\u86E2"],[195003,1,"\u8779"],[195004,1,"\u8728"],[195005,1,"\u876B"],[195006,1,"\u8786"],[195007,3],[195008,1,"\u87E1"],[195009,1,"\u8801"],[195010,1,"\u45F9"],[195011,1,"\u8860"],[195012,1,"\u8863"],[195013,1,"\u{27667}"],[195014,1,"\u88D7"],[195015,1,"\u88DE"],[195016,1,"\u4635"],[195017,1,"\u88FA"],[195018,1,"\u34BB"],[195019,1,"\u{278AE}"],[195020,1,"\u{27966}"],[195021,1,"\u46BE"],[195022,1,"\u46C7"],[195023,1,"\u8AA0"],[195024,1,"\u8AED"],[195025,1,"\u8B8A"],[195026,1,"\u8C55"],[195027,1,"\u{27CA8}"],[195028,1,"\u8CAB"],[195029,1,"\u8CC1"],[195030,1,"\u8D1B"],[195031,1,"\u8D77"],[195032,1,"\u{27F2F}"],[195033,1,"\u{20804}"],[195034,1,"\u8DCB"],[195035,1,"\u8DBC"],[195036,1,"\u8DF0"],[195037,1,"\u{208DE}"],[195038,1,"\u8ED4"],[195039,1,"\u8F38"],[195040,1,"\u{285D2}"],[195041,1,"\u{285ED}"],[195042,1,"\u9094"],[195043,1,"\u90F1"],[195044,1,"\u9111"],[195045,1,"\u{2872E}"],[195046,1,"\u911B"],[195047,1,"\u9238"],[195048,1,"\u92D7"],[195049,1,"\u92D8"],[195050,1,"\u927C"],[195051,1,"\u93F9"],[195052,1,"\u9415"],[195053,1,"\u{28BFA}"],[195054,1,"\u958B"],[195055,1,"\u4995"],[195056,1,"\u95B7"],[195057,1,"\u{28D77}"],[195058,1,"\u49E6"],[195059,1,"\u96C3"],[195060,1,"\u5DB2"],[195061,1,"\u9723"],[195062,1,"\u{29145}"],[195063,1,"\u{2921A}"],[195064,1,"\u4A6E"],[195065,1,"\u4A76"],[195066,1,"\u97E0"],[195067,1,"\u{2940A}"],[195068,1,"\u4AB2"],[195069,1,"\u{29496}"],[[195070,195071],1,"\u980B"],[195072,1,"\u9829"],[195073,1,"\u{295B6}"],[195074,1,"\u98E2"],[195075,1,"\u4B33"],[195076,1,"\u9929"],[195077,1,"\u99A7"],[195078,1,"\u99C2"],[195079,1,"\u99FE"],[195080,1,"\u4BCE"],[195081,1,"\u{29B30}"],[195082,1,"\u9B12"],[195083,1,"\u9C40"],[195084,1,"\u9CFD"],[195085,1,"\u4CCE"],[195086,1,"\u4CED"],[195087,1,"\u9D67"],[195088,1,"\u{2A0CE}"],[195089,1,"\u4CF8"],[195090,1,"\u{2A105}"],[195091,1,"\u{2A20E}"],[195092,1,"\u{2A291}"],[195093,1,"\u9EBB"],[195094,1,"\u4D56"],[195095,1,"\u9EF9"],[195096,1,"\u9EFE"],[195097,1,"\u9F05"],[195098,1,"\u9F0F"],[195099,1,"\u9F16"],[195100,1,"\u9F3B"],[195101,1,"\u{2A600}"],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,201551],3],[[201552,205743],2],[[205744,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918e3,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var cB=y((QTe,aB)=>{"use strict";f();aB.exports.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,disallowed_STD3_valid:4,disallowed_STD3_mapped:5,deviation:6,ignored:7}});var pB=y((XTe,dB)=>{"use strict";f();var Hw=iB(),Li=oB(),lB=uB(),{STATUS_MAPPING:Sn}=cB();function qoe(t){return/[^\x00-\x7F]/u.test(t)}function fB(t,{useSTD3ASCIIRules:e}){let r=0,n=lB.length-1;for(;r<=n;){let i=Math.floor((r+n)/2),s=lB[i],o=Array.isArray(s[0])?s[0][0]:s[0],u=Array.isArray(s[0])?s[0][1]:s[0];if(o<=t&&u>=t)return e&&(s[1]===Sn.disallowed_STD3_valid||s[1]===Sn.disallowed_STD3_mapped)?[Sn.disallowed,...s.slice(2)]:s[1]===Sn.disallowed_STD3_valid?[Sn.valid,...s.slice(2)]:s[1]===Sn.disallowed_STD3_mapped?[Sn.mapped,...s.slice(2)]:s.slice(1);o>t?n=i-1:r=i+1}return null}function Loe(t,{useSTD3ASCIIRules:e,processingOption:r}){let n=!1,i="";for(let s of t){let[o,u]=fB(s.codePointAt(0),{useSTD3ASCIIRules:e});switch(o){case Sn.disallowed:n=!0,i+=s;break;case Sn.ignored:break;case Sn.mapped:i+=u;break;case Sn.deviation:r==="transitional"?i+=u:i+=s;break;case Sn.valid:i+=s;break}}return{string:i,error:n}}function joe(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,processingOption:i,useSTD3ASCIIRules:s}){if(t.normalize("NFC")!==t)return!1;let o=Array.from(t);if(e&&(o[2]==="-"&&o[3]==="-"||t.startsWith("-")||t.endsWith("-"))||t.includes(".")||o.length>0&&Li.combiningMarks.test(o[0]))return!1;for(let u of o){let[a]=fB(u.codePointAt(0),{useSTD3ASCIIRules:s});if(i==="transitional"&&a!==Sn.valid||i==="nontransitional"&&a!==Sn.valid&&a!==Sn.deviation)return!1}if(n){let u=0;for(let[a,c]of o.entries())if(c==="\u200C"||c==="\u200D"){if(a>0){if(Li.combiningClassVirama.test(o[a-1]))continue;if(c==="\u200C"){let l=o.indexOf("\u200C",a+1),h=l<0?o.slice(u):o.slice(u,l);if(Li.validZWNJ.test(h.join(""))){u=a+1;continue}}}return!1}}if(r&&o.length>0){let u;if(Li.bidiS1LTR.test(o[0]))u=!1;else if(Li.bidiS1RTL.test(o[0]))u=!0;else return!1;if(u){if(!Li.bidiS2.test(t)||!Li.bidiS3.test(t)||Li.bidiS4EN.test(t)&&Li.bidiS4AN.test(t))return!1}else if(!Li.bidiS5.test(t)||!Li.bidiS6.test(t))return!1}return!0}function Uoe(t){let e=t.map(r=>{if(r.startsWith("xn--"))try{return Hw.decode(r.substring(4))}catch{return""}return r}).join(".");return Li.bidiDomain.test(e)}function hB(t,e){let{processingOption:r}=e,{string:n,error:i}=Loe(t,e);n=n.normalize("NFC");let s=n.split("."),o=Uoe(s);for(let[u,a]of s.entries()){let c=a,l=r;if(c.startsWith("xn--")){try{c=Hw.decode(c.substring(4)),s[u]=c}catch{i=!0;continue}l="nontransitional"}if(i)continue;joe(c,{...e,processingOption:l,checkBidi:e.checkBidi&&o})||(i=!0)}return{string:s.join("."),error:i}}function Voe(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:i=!1,processingOption:s="nontransitional",verifyDNSLength:o=!1}={}){if(s!=="transitional"&&s!=="nontransitional")throw new RangeError("processingOption must be either transitional or nontransitional");let u=hB(t,{processingOption:s,checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:i}),a=u.string.split(".");if(a=a.map(c=>{if(qoe(c))try{return`xn--${Hw.encode(c)}`}catch{u.error=!0}return c}),o){let c=a.join(".").length;(c>253||c===0)&&(u.error=!0);for(let l=0;l<a.length;++l)if(a[l].length>63||a[l].length===0){u.error=!0;break}}return u.error?null:a.join(".")}function zoe(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:i=!1,processingOption:s="nontransitional"}={}){let o=hB(t,{processingOption:s,checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:i});return{domain:o.string,error:o.error}}dB.exports={toASCII:Voe,toUnicode:zoe}});var Kw=y((eDe,yB)=>{"use strict";f();function Gw(t){return t>=48&&t<=57}function mB(t){return t>=65&&t<=90||t>=97&&t<=122}function Woe(t){return mB(t)||Gw(t)}function Hoe(t){return Gw(t)||t>=65&&t<=70||t>=97&&t<=102}yB.exports={isASCIIDigit:Gw,isASCIIAlpha:mB,isASCIIAlphanumeric:Woe,isASCIIHex:Hoe}});var qm=y((rDe,gB)=>{"use strict";f();var Goe=new TextEncoder,Koe=new TextDecoder("utf-8",{ignoreBOM:!0});function Yoe(t){return Goe.encode(t)}function Qoe(t){return Koe.decode(t)}gB.exports={utf8Encode:Yoe,utf8DecodeWithoutBOM:Qoe}});var Lm=y((iDe,OB)=>{"use strict";f();var{isASCIIHex:_B}=Kw(),{utf8Encode:EB}=qm();function Ke(t){return t.codePointAt(0)}function Joe(t){let e=t.toString(16).toUpperCase();return e.length===1&&(e=`0${e}`),`%${e}`}function AB(t){let e=new Uint8Array(t.byteLength),r=0;for(let n=0;n<t.byteLength;++n){let i=t[n];if(i!==37)e[r++]=i;else if(i===37&&(!_B(t[n+1])||!_B(t[n+2])))e[r++]=i;else{let s=parseInt(String.fromCodePoint(t[n+1],t[n+2]),16);e[r++]=s,n+=2}}return e.slice(0,r)}function Xoe(t){let e=EB(t);return AB(e)}function Yw(t){return t<=31||t>126}var Zoe=new Set([Ke(" "),Ke('"'),Ke("<"),Ke(">"),Ke("`")]);function eue(t){return Yw(t)||Zoe.has(t)}var tue=new Set([Ke(" "),Ke('"'),Ke("#"),Ke("<"),Ke(">")]);function Qw(t){return Yw(t)||tue.has(t)}function rue(t){return Qw(t)||t===Ke("'")}var nue=new Set([Ke("?"),Ke("`"),Ke("{"),Ke("}")]);function wB(t){return Qw(t)||nue.has(t)}var iue=new Set([Ke("/"),Ke(":"),Ke(";"),Ke("="),Ke("@"),Ke("["),Ke("\\"),Ke("]"),Ke("^"),Ke("|")]);function SB(t){return wB(t)||iue.has(t)}var sue=new Set([Ke("$"),Ke("%"),Ke("&"),Ke("+"),Ke(",")]);function oue(t){return SB(t)||sue.has(t)}var uue=new Set([Ke("!"),Ke("'"),Ke("("),Ke(")"),Ke("~")]);function aue(t){return oue(t)||uue.has(t)}function bB(t,e){let r=EB(t),n="";for(let i of r)e(i)?n+=Joe(i):n+=String.fromCharCode(i);return n}function cue(t,e){return bB(String.fromCodePoint(t),e)}function lue(t,e,r=!1){let n="";for(let i of t)r&&i===" "?n+="+":n+=bB(i,e);return n}OB.exports={isC0ControlPercentEncode:Yw,isFragmentPercentEncode:eue,isQueryPercentEncode:Qw,isSpecialQueryPercentEncode:rue,isPathPercentEncode:wB,isUserinfoPercentEncode:SB,isURLEncodedPercentEncode:aue,percentDecodeString:Xoe,percentDecodeBytes:AB,utf8PercentEncodeString:lue,utf8PercentEncodeCodePoint:cue}});var rS=y((oDe,bn)=>{"use strict";f();var fue=pB(),Rr=Kw(),{utf8DecodeWithoutBOM:hue}=qm(),{percentDecodeString:due,utf8PercentEncodeCodePoint:Um,utf8PercentEncodeString:Vm,isC0ControlPercentEncode:MB,isFragmentPercentEncode:pue,isQueryPercentEncode:mue,isSpecialQueryPercentEncode:yue,isPathPercentEncode:gue,isUserinfoPercentEncode:Zw}=Lm();function te(t){return t.codePointAt(0)}var vB={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Me=Symbol("failure");function CB(t){return[...t].length}function TB(t,e){let r=t[e];return isNaN(r)?void 0:String.fromCodePoint(r)}function DB(t){return t==="."||t.toLowerCase()==="%2e"}function _ue(t){return t=t.toLowerCase(),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"}function Eue(t,e){return Rr.isASCIIAlpha(t)&&(e===te(":")||e===te("|"))}function BB(t){return t.length===2&&Rr.isASCIIAlpha(t.codePointAt(0))&&(t[1]===":"||t[1]==="|")}function Aue(t){return t.length===2&&Rr.isASCIIAlpha(t.codePointAt(0))&&t[1]===":"}function IB(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1}function wue(t){return IB(t)||t.search(/[\u0000-\u001F]|%|\u007F/u)!==-1}function jm(t){return vB[t]!==void 0}function Nr(t){return jm(t.scheme)}function Jw(t){return!jm(t.scheme)}function PB(t){return vB[t]}function NB(t){if(t==="")return Me;let e=10;if(t.length>=2&&t.charAt(0)==="0"&&t.charAt(1).toLowerCase()==="x"?(t=t.substring(2),e=16):t.length>=2&&t.charAt(0)==="0"&&(t=t.substring(1),e=8),t==="")return 0;let r=/[^0-7]/u;return e===10&&(r=/[^0-9]/u),e===16&&(r=/[^0-9A-Fa-f]/u),r.test(t)?Me:parseInt(t,e)}function Sue(t){let e=t.split(".");if(e[e.length-1]===""&&e.length>1&&e.pop(),e.length>4)return Me;let r=[];for(let s of e){let o=NB(s);if(o===Me)return Me;r.push(o)}for(let s=0;s<r.length-1;++s)if(r[s]>255)return Me;if(r[r.length-1]>=256**(5-r.length))return Me;let n=r.pop(),i=0;for(let s of r)n+=s*256**(3-i),++i;return n}function bue(t){let e="",r=t;for(let n=1;n<=4;++n)e=String(r%256)+e,n!==4&&(e=`.${e}`),r=Math.floor(r/256);return e}function Oue(t){let e=[0,0,0,0,0,0,0,0],r=0,n=null,i=0;if(t=Array.from(t,s=>s.codePointAt(0)),t[i]===te(":")){if(t[i+1]!==te(":"))return Me;i+=2,++r,n=r}for(;i<t.length;){if(r===8)return Me;if(t[i]===te(":")){if(n!==null)return Me;++i,++r,n=r;continue}let s=0,o=0;for(;o<4&&Rr.isASCIIHex(t[i]);)s=s*16+parseInt(TB(t,i),16),++i,++o;if(t[i]===te(".")){if(o===0||(i-=o,r>6))return Me;let u=0;for(;t[i]!==void 0;){let a=null;if(u>0)if(t[i]===te(".")&&u<4)++i;else return Me;if(!Rr.isASCIIDigit(t[i]))return Me;for(;Rr.isASCIIDigit(t[i]);){let c=parseInt(TB(t,i));if(a===null)a=c;else{if(a===0)return Me;a=a*10+c}if(a>255)return Me;++i}e[r]=e[r]*256+a,++u,(u===2||u===4)&&++r}if(u!==4)return Me;break}else if(t[i]===te(":")){if(++i,t[i]===void 0)return Me}else if(t[i]!==void 0)return Me;e[r]=s,++r}if(n!==null){let s=r-n;for(r=7;r!==0&&s>0;){let o=e[n+s-1];e[n+s-1]=e[r],e[r]=o,--r,--s}}else if(n===null&&r!==8)return Me;return e}function Cue(t){let e="",r=Mue(t),n=!1;for(let i=0;i<=7;++i)if(!(n&&t[i]===0)){if(n&&(n=!1),r===i){e+=i===0?"::":":",n=!0;continue}e+=t[i].toString(16),i!==7&&(e+=":")}return e}function Xw(t,e=!1){if(t[0]==="[")return t[t.length-1]!=="]"?Me:Oue(t.substring(1,t.length-1));if(e)return Due(t);let r=hue(due(t)),n=vue(r);return n===Me||wue(n)?Me:Tue(n)?Sue(n):n}function Tue(t){let e=t.split(".");if(e[e.length-1]===""){if(e.length===1)return!1;e.pop()}let r=e[e.length-1];return!!(NB(r)!==Me||/^[0-9]+$/u.test(r))}function Due(t){return IB(t)?Me:Vm(t,MB)}function Mue(t){let e=null,r=1,n=null,i=0;for(let s=0;s<t.length;++s)t[s]!==0?(i>r&&(e=n,r=i),n=null,i=0):(n===null&&(n=s),++i);return i>r?n:e}function eS(t){return typeof t=="number"?bue(t):t instanceof Array?`[${Cue(t)}]`:t}function vue(t,e=!1){let r=fue.toASCII(t,{checkBidi:!0,checkHyphens:!1,checkJoiners:!0,useSTD3ASCIIRules:e,verifyDNSLength:e});return r===null||r===""?Me:r}function Bue(t){return t.replace(/^[\u0000-\u001F\u0020]+|[\u0000-\u001F\u0020]+$/ug,"")}function Iue(t){return t.replace(/\u0009|\u000A|\u000D/ug,"")}function RB(t){let{path:e}=t;e.length!==0&&(t.scheme==="file"&&e.length===1&&Nue(e[0])||e.pop())}function xB(t){return t.username!==""||t.password!==""}function Pue(t){return t.host===null||t.host===""||t.scheme==="file"}function ah(t){return typeof t.path=="string"}function Nue(t){return/^[A-Za-z]:$/u.test(t)}function Ut(t,e,r,n,i){if(this.pointer=0,this.input=t,this.base=e||null,this.encodingOverride=r||"utf-8",this.stateOverride=i,this.url=n,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};let o=Bue(this.input);o!==this.input&&(this.parseError=!0),this.input=o}let s=Iue(this.input);for(s!==this.input&&(this.parseError=!0),this.input=s,this.state=i||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,o=>o.codePointAt(0));this.pointer<=this.input.length;++this.pointer){let o=this.input[this.pointer],u=isNaN(o)?void 0:String.fromCodePoint(o),a=this[`parse ${this.state}`](o,u);if(a){if(a===Me){this.failure=!0;break}}else break}}Ut.prototype["parse scheme start"]=function(e,r){if(Rr.isASCIIAlpha(e))this.buffer+=r.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,Me;return!0};Ut.prototype["parse scheme"]=function(e,r){if(Rr.isASCIIAlphanumeric(e)||e===te("+")||e===te("-")||e===te("."))this.buffer+=r.toLowerCase();else if(e===te(":")){if(this.stateOverride&&(Nr(this.url)&&!jm(this.buffer)||!Nr(this.url)&&jm(this.buffer)||(xB(this.url)||this.url.port!==null)&&this.buffer==="file"||this.url.scheme==="file"&&this.url.host===""))return!1;if(this.url.scheme=this.buffer,this.stateOverride)return this.url.port===PB(this.url.scheme)&&(this.url.port=null),!1;this.buffer="",this.url.scheme==="file"?((this.input[this.pointer+1]!==te("/")||this.input[this.pointer+2]!==te("/"))&&(this.parseError=!0),this.state="file"):Nr(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme?this.state="special relative or authority":Nr(this.url)?this.state="special authority slashes":this.input[this.pointer+1]===te("/")?(this.state="path or authority",++this.pointer):(this.url.path="",this.state="opaque path")}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,Me;return!0};Ut.prototype["parse no scheme"]=function(e){return this.base===null||ah(this.base)&&e!==te("#")?Me:(ah(this.base)&&e===te("#")?(this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):this.base.scheme==="file"?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)};Ut.prototype["parse special relative or authority"]=function(e){return e===te("/")&&this.input[this.pointer+1]===te("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0};Ut.prototype["parse path or authority"]=function(e){return e===te("/")?this.state="authority":(this.state="path",--this.pointer),!0};Ut.prototype["parse relative"]=function(e){return this.url.scheme=this.base.scheme,e===te("/")?this.state="relative slash":Nr(this.url)&&e===te("\\")?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===te("?")?(this.url.query="",this.state="query"):e===te("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer)),!0};Ut.prototype["parse relative slash"]=function(e){return Nr(this.url)&&(e===te("/")||e===te("\\"))?(e===te("\\")&&(this.parseError=!0),this.state="special authority ignore slashes"):e===te("/")?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0};Ut.prototype["parse special authority slashes"]=function(e){return e===te("/")&&this.input[this.pointer+1]===te("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0};Ut.prototype["parse special authority ignore slashes"]=function(e){return e!==te("/")&&e!==te("\\")?(this.state="authority",--this.pointer):this.parseError=!0,!0};Ut.prototype["parse authority"]=function(e,r){if(e===te("@")){this.parseError=!0,this.atFlag&&(this.buffer=`%40${this.buffer}`),this.atFlag=!0;let n=CB(this.buffer);for(let i=0;i<n;++i){let s=this.buffer.codePointAt(i);if(s===te(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let o=Um(s,Zw);this.passwordTokenSeenFlag?this.url.password+=o:this.url.username+=o}this.buffer=""}else if(isNaN(e)||e===te("/")||e===te("?")||e===te("#")||Nr(this.url)&&e===te("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,Me;this.pointer-=CB(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=r;return!0};Ut.prototype["parse hostname"]=Ut.prototype["parse host"]=function(e,r){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(e===te(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,Me;if(this.stateOverride==="hostname")return!1;let n=Xw(this.buffer,Jw(this.url));if(n===Me)return Me;this.url.host=n,this.buffer="",this.state="port"}else if(isNaN(e)||e===te("/")||e===te("?")||e===te("#")||Nr(this.url)&&e===te("\\")){if(--this.pointer,Nr(this.url)&&this.buffer==="")return this.parseError=!0,Me;if(this.stateOverride&&this.buffer===""&&(xB(this.url)||this.url.port!==null))return this.parseError=!0,!1;let n=Xw(this.buffer,Jw(this.url));if(n===Me)return Me;if(this.url.host=n,this.buffer="",this.state="path start",this.stateOverride)return!1}else e===te("[")?this.arrFlag=!0:e===te("]")&&(this.arrFlag=!1),this.buffer+=r;return!0};Ut.prototype["parse port"]=function(e,r){if(Rr.isASCIIDigit(e))this.buffer+=r;else if(isNaN(e)||e===te("/")||e===te("?")||e===te("#")||Nr(this.url)&&e===te("\\")||this.stateOverride){if(this.buffer!==""){let n=parseInt(this.buffer);if(n>2**16-1)return this.parseError=!0,Me;this.url.port=n===PB(this.url.scheme)?null:n,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,Me;return!0};var Rue=new Set([te("/"),te("\\"),te("?"),te("#")]);function FB(t,e){let r=t.length-e;return r>=2&&Eue(t[e],t[e+1])&&(r===2||Rue.has(t[e+2]))}Ut.prototype["parse file"]=function(e){return this.url.scheme="file",this.url.host="",e===te("/")||e===te("\\")?(e===te("\\")&&(this.parseError=!0),this.state="file slash"):this.base!==null&&this.base.scheme==="file"?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===te("?")?(this.url.query="",this.state="query"):e===te("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,FB(this.input,this.pointer)?(this.parseError=!0,this.url.path=[]):RB(this.url),this.state="path",--this.pointer)):(this.state="path",--this.pointer),!0};Ut.prototype["parse file slash"]=function(e){return e===te("/")||e===te("\\")?(e===te("\\")&&(this.parseError=!0),this.state="file host"):(this.base!==null&&this.base.scheme==="file"&&(!FB(this.input,this.pointer)&&Aue(this.base.path[0])&&this.url.path.push(this.base.path[0]),this.url.host=this.base.host),this.state="path",--this.pointer),!0};Ut.prototype["parse file host"]=function(e,r){if(isNaN(e)||e===te("/")||e===te("\\")||e===te("?")||e===te("#"))if(--this.pointer,!this.stateOverride&&BB(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let n=Xw(this.buffer,Jw(this.url));if(n===Me)return Me;if(n==="localhost"&&(n=""),this.url.host=n,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=r;return!0};Ut.prototype["parse path start"]=function(e){return Nr(this.url)?(e===te("\\")&&(this.parseError=!0),this.state="path",e!==te("/")&&e!==te("\\")&&--this.pointer):!this.stateOverride&&e===te("?")?(this.url.query="",this.state="query"):!this.stateOverride&&e===te("#")?(this.url.fragment="",this.state="fragment"):e!==void 0?(this.state="path",e!==te("/")&&--this.pointer):this.stateOverride&&this.url.host===null&&this.url.path.push(""),!0};Ut.prototype["parse path"]=function(e){return isNaN(e)||e===te("/")||Nr(this.url)&&e===te("\\")||!this.stateOverride&&(e===te("?")||e===te("#"))?(Nr(this.url)&&e===te("\\")&&(this.parseError=!0),_ue(this.buffer)?(RB(this.url),e!==te("/")&&!(Nr(this.url)&&e===te("\\"))&&this.url.path.push("")):DB(this.buffer)&&e!==te("/")&&!(Nr(this.url)&&e===te("\\"))?this.url.path.push(""):DB(this.buffer)||(this.url.scheme==="file"&&this.url.path.length===0&&BB(this.buffer)&&(this.buffer=`${this.buffer[0]}:`),this.url.path.push(this.buffer)),this.buffer="",e===te("?")&&(this.url.query="",this.state="query"),e===te("#")&&(this.url.fragment="",this.state="fragment")):(e===te("%")&&(!Rr.isASCIIHex(this.input[this.pointer+1])||!Rr.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=Um(e,gue)),!0};Ut.prototype["parse opaque path"]=function(e){return e===te("?")?(this.url.query="",this.state="query"):e===te("#")?(this.url.fragment="",this.state="fragment"):(!isNaN(e)&&e!==te("%")&&(this.parseError=!0),e===te("%")&&(!Rr.isASCIIHex(this.input[this.pointer+1])||!Rr.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),isNaN(e)||(this.url.path+=Um(e,MB))),!0};Ut.prototype["parse query"]=function(e,r){if((!Nr(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")&&(this.encodingOverride="utf-8"),!this.stateOverride&&e===te("#")||isNaN(e)){let n=Nr(this.url)?yue:mue;this.url.query+=Vm(this.buffer,n),this.buffer="",e===te("#")&&(this.url.fragment="",this.state="fragment")}else isNaN(e)||(e===te("%")&&(!Rr.isASCIIHex(this.input[this.pointer+1])||!Rr.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=r);return!0};Ut.prototype["parse fragment"]=function(e){return isNaN(e)||(e===te("%")&&(!Rr.isASCIIHex(this.input[this.pointer+1])||!Rr.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.url.fragment+=Um(e,pue)),!0};function xue(t,e){let r=`${t.scheme}:`;return t.host!==null&&(r+="//",(t.username!==""||t.password!=="")&&(r+=t.username,t.password!==""&&(r+=`:${t.password}`),r+="@"),r+=eS(t.host),t.port!==null&&(r+=`:${t.port}`)),t.host===null&&!ah(t)&&t.path.length>1&&t.path[0]===""&&(r+="/."),r+=tS(t),t.query!==null&&(r+=`?${t.query}`),!e&&t.fragment!==null&&(r+=`#${t.fragment}`),r}function Fue(t){let e=`${t.scheme}://`;return e+=eS(t.host),t.port!==null&&(e+=`:${t.port}`),e}function tS(t){if(ah(t))return t.path;let e="";for(let r of t.path)e+=`/${r}`;return e}bn.exports.serializeURL=xue;bn.exports.serializePath=tS;bn.exports.serializeURLOrigin=function(t){switch(t.scheme){case"blob":{let e=bn.exports.parseURL(tS(t));return e===null||e.scheme!=="http"&&e.scheme!=="https"?"null":bn.exports.serializeURLOrigin(e)}case"ftp":case"http":case"https":case"ws":case"wss":return Fue({scheme:t.scheme,host:t.host,port:t.port});case"file":return"null";default:return"null"}};bn.exports.basicURLParse=function(t,e){e===void 0&&(e={});let r=new Ut(t,e.baseURL,e.encodingOverride,e.url,e.stateOverride);return r.failure?null:r.url};bn.exports.setTheUsername=function(t,e){t.username=Vm(e,Zw)};bn.exports.setThePassword=function(t,e){t.password=Vm(e,Zw)};bn.exports.serializeHost=eS;bn.exports.cannotHaveAUsernamePasswordPort=Pue;bn.exports.hasAnOpaquePath=ah;bn.exports.serializeInteger=function(t){return String(t)};bn.exports.parseURL=function(t,e){return e===void 0&&(e={}),bn.exports.basicURLParse(t,{baseURL:e.baseURL,encodingOverride:e.encodingOverride})}});var nS=y((aDe,VB)=>{"use strict";f();var{utf8Encode:$ue,utf8DecodeWithoutBOM:$B}=qm(),{percentDecodeBytes:kB,utf8PercentEncodeString:qB,isURLEncodedPercentEncode:LB}=Lm();function jB(t){return t.codePointAt(0)}function kue(t){let e=jue(t,jB("&")),r=[];for(let n of e){if(n.length===0)continue;let i,s,o=n.indexOf(jB("="));o>=0?(i=n.slice(0,o),s=n.slice(o+1)):(i=n,s=new Uint8Array(0)),i=UB(i,43,32),s=UB(s,43,32);let u=$B(kB(i)),a=$B(kB(s));r.push([u,a])}return r}function que(t){return kue($ue(t))}function Lue(t,e=void 0){let r="utf-8";e!==void 0&&(r=e);let n="";for(let[i,s]of t.entries()){let o=qB(s[0],LB,!0),u=s[1];s.length>2&&s[2]!==void 0&&(s[2]==="hidden"&&o==="_charset_"?u=r:s[2]==="file"&&(u=u.name)),u=qB(u,LB,!0),i!==0&&(n+="&"),n+=`${o}=${u}`}return n}function jue(t,e){let r=[],n=0,i=t.indexOf(e);for(;i>=0;)r.push(t.slice(n,i)),n=i+1,i=t.indexOf(e,n);return n!==t.length&&r.push(t.slice(n)),r}function UB(t,e,r){let n=t.indexOf(e);for(;n>=0;)t[n]=r,n=t.indexOf(e,n+1);return t}VB.exports={parseUrlencodedString:que,serializeUrlencoded:Lue}});var HB=y(WB=>{"use strict";f();var zB=Fm(),zm=km();WB.convert=(t,e,{context:r="The provided value"}={})=>{if(typeof e!="function")throw new t.TypeError(r+" is not a function");function n(...i){let s=zm.tryWrapperForImpl(this),o;for(let u=0;u<i.length;u++)i[u]=zm.tryWrapperForImpl(i[u]);return o=Reflect.apply(e,s,i),o=zB.any(o,{context:r,globals:t}),o}return n.construct=(...i)=>{for(let o=0;o<i.length;o++)i[o]=zm.tryWrapperForImpl(i[o]);let s=Reflect.construct(e,i);return s=zB.any(s,{context:r,globals:t}),s},n[zm.wrapperSymbol]=e,n.objectReference=e,n}});var KB=y(GB=>{"use strict";f();var iS=nS();GB.implementation=class{constructor(e,r,{doNotStripQMark:n=!1}){let i=r[0];if(this._list=[],this._url=null,!n&&typeof i=="string"&&i[0]==="?"&&(i=i.slice(1)),Array.isArray(i))for(let s of i){if(s.length!==2)throw new TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([s[0],s[1]])}else if(typeof i=="object"&&Object.getPrototypeOf(i)===null)for(let s of Object.keys(i)){let o=i[s];this._list.push([s,o])}else this._list=iS.parseUrlencodedString(i)}_updateSteps(){if(this._url!==null){let e=iS.serializeUrlencoded(this._list);e===""&&(e=null),this._url._url.query=e,e===null&&this._url._potentiallyStripTrailingSpacesFromAnOpaquePath()}}get size(){return this._list.length}append(e,r){this._list.push([e,r]),this._updateSteps()}delete(e,r){let n=0;for(;n<this._list.length;)this._list[n][0]===e&&(r===void 0||this._list[n][1]===r)?this._list.splice(n,1):n++;this._updateSteps()}get(e){for(let r of this._list)if(r[0]===e)return r[1];return null}getAll(e){let r=[];for(let n of this._list)n[0]===e&&r.push(n[1]);return r}has(e,r){for(let n of this._list)if(n[0]===e&&(r===void 0||n[1]===r))return!0;return!1}set(e,r){let n=!1,i=0;for(;i<this._list.length;)this._list[i][0]===e?n?this._list.splice(i,1):(n=!0,this._list[i][1]=r,i++):i++;n||this._list.push([e,r]),this._updateSteps()}sort(){this._list.sort((e,r)=>e[0]<r[0]?-1:e[0]>r[0]?1:0),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return iS.serializeUrlencoded(this._list)}}});var sS=y(Je=>{"use strict";f();var Rn=Fm(),pt=km(),Uue=HB(),YB=pt.newObjectInRealm,Zt=pt.implSymbol,JB=pt.ctorRegistrySymbol,QB="URLSearchParams";Je.is=t=>pt.isObject(t)&&pt.hasOwn(t,Zt)&&t[Zt]instanceof Wu.implementation;Je.isImpl=t=>pt.isObject(t)&&t instanceof Wu.implementation;Je.convert=(t,e,{context:r="The provided value"}={})=>{if(Je.is(e))return pt.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URLSearchParams'.`)};Je.createDefaultIterator=(t,e,r)=>{let i=t[JB]["URLSearchParams Iterator"],s=Object.create(i);return Object.defineProperty(s,pt.iterInternalSymbol,{value:{target:e,kind:r,index:0},configurable:!0}),s};function XB(t,e){let r;return e!==void 0&&(r=e.prototype),pt.isObject(r)||(r=t[JB].URLSearchParams.prototype),Object.create(r)}Je.create=(t,e,r)=>{let n=XB(t);return Je.setup(n,t,e,r)};Je.createImpl=(t,e,r)=>{let n=Je.create(t,e,r);return pt.implForWrapper(n)};Je._internalSetup=(t,e)=>{};Je.setup=(t,e,r=[],n={})=>(n.wrapper=t,Je._internalSetup(t,e),Object.defineProperty(t,Zt,{value:new Wu.implementation(e,r,n),configurable:!0}),t[Zt][pt.wrapperSymbol]=t,Wu.init&&Wu.init(t[Zt]),t);Je.new=(t,e)=>{let r=XB(t,e);return Je._internalSetup(r,t),Object.defineProperty(r,Zt,{value:Object.create(Wu.implementation.prototype),configurable:!0}),r[Zt][pt.wrapperSymbol]=r,Wu.init&&Wu.init(r[Zt]),r[Zt]};var Vue=new Set(["Window","Worker"]);Je.install=(t,e)=>{if(!e.some(i=>Vue.has(i)))return;let r=pt.initCtorRegistry(t);class n{constructor(){let s=[];{let o=arguments[0];if(o!==void 0)if(pt.isObject(o))if(o[Symbol.iterator]!==void 0)if(pt.isObject(o)){let u=[],a=o;for(let c of a){if(pt.isObject(c)){let l=[],h=c;for(let d of h)d=Rn.USVString(d,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:t}),l.push(d);c=l}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");u.push(c)}o=u}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else if(pt.isObject(o)){let u=Object.create(null);for(let a of Reflect.ownKeys(o)){let c=Object.getOwnPropertyDescriptor(o,a);if(c&&c.enumerable){let l=a;l=Rn.USVString(l,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:t});let h=o[a];h=Rn.USVString(h,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:t}),u[l]=h}}o=u}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else o=Rn.USVString(o,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:t});else o="";s.push(o)}return Je.setup(Object.create(new.target.prototype),t,s)}append(s,o){let u=this!==null&&this!==void 0?this:t;if(!Je.is(u))throw new t.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let a=[];{let c=arguments[0];c=Rn.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:t}),a.push(c)}{let c=arguments[1];c=Rn.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:t}),a.push(c)}return pt.tryWrapperForImpl(u[Zt].append(...a))}delete(s){let o=this!==null&&this!==void 0?this:t;if(!Je.is(o))throw new t.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let u=[];{let a=arguments[0];a=Rn.USVString(a,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:t}),u.push(a)}{let a=arguments[1];a!==void 0&&(a=Rn.USVString(a,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 2",globals:t})),u.push(a)}return pt.tryWrapperForImpl(o[Zt].delete(...u))}get(s){let o=this!==null&&this!==void 0?this:t;if(!Je.is(o))throw new t.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let u=[];{let a=arguments[0];a=Rn.USVString(a,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:t}),u.push(a)}return o[Zt].get(...u)}getAll(s){let o=this!==null&&this!==void 0?this:t;if(!Je.is(o))throw new t.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let u=[];{let a=arguments[0];a=Rn.USVString(a,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:t}),u.push(a)}return pt.tryWrapperForImpl(o[Zt].getAll(...u))}has(s){let o=this!==null&&this!==void 0?this:t;if(!Je.is(o))throw new t.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let u=[];{let a=arguments[0];a=Rn.USVString(a,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:t}),u.push(a)}{let a=arguments[1];a!==void 0&&(a=Rn.USVString(a,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 2",globals:t})),u.push(a)}return o[Zt].has(...u)}set(s,o){let u=this!==null&&this!==void 0?this:t;if(!Je.is(u))throw new t.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let a=[];{let c=arguments[0];c=Rn.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:t}),a.push(c)}{let c=arguments[1];c=Rn.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:t}),a.push(c)}return pt.tryWrapperForImpl(u[Zt].set(...a))}sort(){let s=this!==null&&this!==void 0?this:t;if(!Je.is(s))throw new t.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return pt.tryWrapperForImpl(s[Zt].sort())}toString(){let s=this!==null&&this!==void 0?this:t;if(!Je.is(s))throw new t.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return s[Zt].toString()}keys(){if(!Je.is(this))throw new t.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return Je.createDefaultIterator(t,this,"key")}values(){if(!Je.is(this))throw new t.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return Je.createDefaultIterator(t,this,"value")}entries(){if(!Je.is(this))throw new t.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return Je.createDefaultIterator(t,this,"key+value")}forEach(s){if(!Je.is(this))throw new t.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");s=Uue.convert(t,s,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});let o=arguments[1],u=Array.from(this[Zt]),a=0;for(;a<u.length;){let[c,l]=u[a].map(pt.tryWrapperForImpl);s.call(o,l,c,this),u=Array.from(this[Zt]),a++}}get size(){let s=this!==null&&this!==void 0?this:t;if(!Je.is(s))throw new t.TypeError("'get size' called on an object that is not a valid instance of URLSearchParams.");return s[Zt].size}}Object.defineProperties(n.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},size:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:n.prototype.entries,configurable:!0,writable:!0}}),r[QB]=n,r["URLSearchParams Iterator"]=Object.create(r["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),pt.define(r["URLSearchParams Iterator"],{next(){let i=this&&this[pt.iterInternalSymbol];if(!i)throw new t.TypeError("next() called on a value that is not a URLSearchParams iterator object");let{target:s,kind:o,index:u}=i,a=Array.from(s[Zt]),c=a.length;if(u>=c)return YB(t,{value:void 0,done:!0});let l=a[u];return i.index=u+1,YB(t,pt.iteratorResult(l.map(pt.tryWrapperForImpl),o))}}),Object.defineProperty(t,QB,{configurable:!0,writable:!0,value:n})};var Wu=KB()});var tI=y(eI=>{"use strict";f();var lt=rS(),ZB=nS(),zue=sS();eI.implementation=class{constructor(e,r){let n=r[0],i=r[1],s=null;if(i!==void 0&&(s=lt.basicURLParse(i),s===null))throw new TypeError(`Invalid base URL: ${i}`);let o=lt.basicURLParse(n,{baseURL:s});if(o===null)throw new TypeError(`Invalid URL: ${n}`);let u=o.query!==null?o.query:"";this._url=o,this._query=zue.createImpl(e,[u],{doNotStripQMark:!0}),this._query._url=this}static canParse(e,r){let n=null;return!(r!==void 0&&(n=lt.basicURLParse(r),n===null)||lt.basicURLParse(e,{baseURL:n})===null)}get href(){return lt.serializeURL(this._url)}set href(e){let r=lt.basicURLParse(e);if(r===null)throw new TypeError(`Invalid URL: ${e}`);this._url=r,this._query._list.splice(0);let{query:n}=r;n!==null&&(this._query._list=ZB.parseUrlencodedString(n))}get origin(){return lt.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(e){lt.basicURLParse(`${e}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(e){lt.cannotHaveAUsernamePasswordPort(this._url)||lt.setTheUsername(this._url,e)}get password(){return this._url.password}set password(e){lt.cannotHaveAUsernamePasswordPort(this._url)||lt.setThePassword(this._url,e)}get host(){let e=this._url;return e.host===null?"":e.port===null?lt.serializeHost(e.host):`${lt.serializeHost(e.host)}:${lt.serializeInteger(e.port)}`}set host(e){lt.hasAnOpaquePath(this._url)||lt.basicURLParse(e,{url:this._url,stateOverride:"host"})}get hostname(){return this._url.host===null?"":lt.serializeHost(this._url.host)}set hostname(e){lt.hasAnOpaquePath(this._url)||lt.basicURLParse(e,{url:this._url,stateOverride:"hostname"})}get port(){return this._url.port===null?"":lt.serializeInteger(this._url.port)}set port(e){lt.cannotHaveAUsernamePasswordPort(this._url)||(e===""?this._url.port=null:lt.basicURLParse(e,{url:this._url,stateOverride:"port"}))}get pathname(){return lt.serializePath(this._url)}set pathname(e){lt.hasAnOpaquePath(this._url)||(this._url.path=[],lt.basicURLParse(e,{url:this._url,stateOverride:"path start"}))}get search(){return this._url.query===null||this._url.query===""?"":`?${this._url.query}`}set search(e){let r=this._url;if(e===""){r.query=null,this._query._list=[],this._potentiallyStripTrailingSpacesFromAnOpaquePath();return}let n=e[0]==="?"?e.substring(1):e;r.query="",lt.basicURLParse(n,{url:r,stateOverride:"query"}),this._query._list=ZB.parseUrlencodedString(n)}get searchParams(){return this._query}get hash(){return this._url.fragment===null||this._url.fragment===""?"":`#${this._url.fragment}`}set hash(e){if(e===""){this._url.fragment=null,this._potentiallyStripTrailingSpacesFromAnOpaquePath();return}let r=e[0]==="#"?e.substring(1):e;this._url.fragment="",lt.basicURLParse(r,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}_potentiallyStripTrailingSpacesFromAnOpaquePath(){lt.hasAnOpaquePath(this._url)&&this._url.fragment===null&&this._url.query===null&&(this._url.path=this._url.path.replace(/\u0020+$/u,""))}}});var iI=y(Pe=>{"use strict";f();var xn=Fm(),pi=km(),Xe=pi.implSymbol,Wue=pi.ctorRegistrySymbol,rI="URL";Pe.is=t=>pi.isObject(t)&&pi.hasOwn(t,Xe)&&t[Xe]instanceof Lo.implementation;Pe.isImpl=t=>pi.isObject(t)&&t instanceof Lo.implementation;Pe.convert=(t,e,{context:r="The provided value"}={})=>{if(Pe.is(e))return pi.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URL'.`)};function nI(t,e){let r;return e!==void 0&&(r=e.prototype),pi.isObject(r)||(r=t[Wue].URL.prototype),Object.create(r)}Pe.create=(t,e,r)=>{let n=nI(t);return Pe.setup(n,t,e,r)};Pe.createImpl=(t,e,r)=>{let n=Pe.create(t,e,r);return pi.implForWrapper(n)};Pe._internalSetup=(t,e)=>{};Pe.setup=(t,e,r=[],n={})=>(n.wrapper=t,Pe._internalSetup(t,e),Object.defineProperty(t,Xe,{value:new Lo.implementation(e,r,n),configurable:!0}),t[Xe][pi.wrapperSymbol]=t,Lo.init&&Lo.init(t[Xe]),t);Pe.new=(t,e)=>{let r=nI(t,e);return Pe._internalSetup(r,t),Object.defineProperty(r,Xe,{value:Object.create(Lo.implementation.prototype),configurable:!0}),r[Xe][pi.wrapperSymbol]=r,Lo.init&&Lo.init(r[Xe]),r[Xe]};var Hue=new Set(["Window","Worker"]);Pe.install=(t,e)=>{if(!e.some(i=>Hue.has(i)))return;let r=pi.initCtorRegistry(t);class n{constructor(s){if(arguments.length<1)throw new t.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let u=arguments[0];u=xn.USVString(u,{context:"Failed to construct 'URL': parameter 1",globals:t}),o.push(u)}{let u=arguments[1];u!==void 0&&(u=xn.USVString(u,{context:"Failed to construct 'URL': parameter 2",globals:t})),o.push(u)}return Pe.setup(Object.create(new.target.prototype),t,o)}toJSON(){let s=this!==null&&this!==void 0?this:t;if(!Pe.is(s))throw new t.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return s[Xe].toJSON()}get href(){let s=this!==null&&this!==void 0?this:t;if(!Pe.is(s))throw new t.TypeError("'get href' called on an object that is not a valid instance of URL.");return s[Xe].href}set href(s){let o=this!==null&&this!==void 0?this:t;if(!Pe.is(o))throw new t.TypeError("'set href' called on an object that is not a valid instance of URL.");s=xn.USVString(s,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:t}),o[Xe].href=s}toString(){let s=this;if(!Pe.is(s))throw new t.TypeError("'toString' called on an object that is not a valid instance of URL.");return s[Xe].href}get origin(){let s=this!==null&&this!==void 0?this:t;if(!Pe.is(s))throw new t.TypeError("'get origin' called on an object that is not a valid instance of URL.");return s[Xe].origin}get protocol(){let s=this!==null&&this!==void 0?this:t;if(!Pe.is(s))throw new t.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return s[Xe].protocol}set protocol(s){let o=this!==null&&this!==void 0?this:t;if(!Pe.is(o))throw new t.TypeError("'set protocol' called on an object that is not a valid instance of URL.");s=xn.USVString(s,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:t}),o[Xe].protocol=s}get username(){let s=this!==null&&this!==void 0?this:t;if(!Pe.is(s))throw new t.TypeError("'get username' called on an object that is not a valid instance of URL.");return s[Xe].username}set username(s){let o=this!==null&&this!==void 0?this:t;if(!Pe.is(o))throw new t.TypeError("'set username' called on an object that is not a valid instance of URL.");s=xn.USVString(s,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:t}),o[Xe].username=s}get password(){let s=this!==null&&this!==void 0?this:t;if(!Pe.is(s))throw new t.TypeError("'get password' called on an object that is not a valid instance of URL.");return s[Xe].password}set password(s){let o=this!==null&&this!==void 0?this:t;if(!Pe.is(o))throw new t.TypeError("'set password' called on an object that is not a valid instance of URL.");s=xn.USVString(s,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:t}),o[Xe].password=s}get host(){let s=this!==null&&this!==void 0?this:t;if(!Pe.is(s))throw new t.TypeError("'get host' called on an object that is not a valid instance of URL.");return s[Xe].host}set host(s){let o=this!==null&&this!==void 0?this:t;if(!Pe.is(o))throw new t.TypeError("'set host' called on an object that is not a valid instance of URL.");s=xn.USVString(s,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:t}),o[Xe].host=s}get hostname(){let s=this!==null&&this!==void 0?this:t;if(!Pe.is(s))throw new t.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return s[Xe].hostname}set hostname(s){let o=this!==null&&this!==void 0?this:t;if(!Pe.is(o))throw new t.TypeError("'set hostname' called on an object that is not a valid instance of URL.");s=xn.USVString(s,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:t}),o[Xe].hostname=s}get port(){let s=this!==null&&this!==void 0?this:t;if(!Pe.is(s))throw new t.TypeError("'get port' called on an object that is not a valid instance of URL.");return s[Xe].port}set port(s){let o=this!==null&&this!==void 0?this:t;if(!Pe.is(o))throw new t.TypeError("'set port' called on an object that is not a valid instance of URL.");s=xn.USVString(s,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:t}),o[Xe].port=s}get pathname(){let s=this!==null&&this!==void 0?this:t;if(!Pe.is(s))throw new t.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return s[Xe].pathname}set pathname(s){let o=this!==null&&this!==void 0?this:t;if(!Pe.is(o))throw new t.TypeError("'set pathname' called on an object that is not a valid instance of URL.");s=xn.USVString(s,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:t}),o[Xe].pathname=s}get search(){let s=this!==null&&this!==void 0?this:t;if(!Pe.is(s))throw new t.TypeError("'get search' called on an object that is not a valid instance of URL.");return s[Xe].search}set search(s){let o=this!==null&&this!==void 0?this:t;if(!Pe.is(o))throw new t.TypeError("'set search' called on an object that is not a valid instance of URL.");s=xn.USVString(s,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:t}),o[Xe].search=s}get searchParams(){let s=this!==null&&this!==void 0?this:t;if(!Pe.is(s))throw new t.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return pi.getSameObject(this,"searchParams",()=>pi.tryWrapperForImpl(s[Xe].searchParams))}get hash(){let s=this!==null&&this!==void 0?this:t;if(!Pe.is(s))throw new t.TypeError("'get hash' called on an object that is not a valid instance of URL.");return s[Xe].hash}set hash(s){let o=this!==null&&this!==void 0?this:t;if(!Pe.is(o))throw new t.TypeError("'set hash' called on an object that is not a valid instance of URL.");s=xn.USVString(s,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:t}),o[Xe].hash=s}static canParse(s){if(arguments.length<1)throw new t.TypeError(`Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let u=arguments[0];u=xn.USVString(u,{context:"Failed to execute 'canParse' on 'URL': parameter 1",globals:t}),o.push(u)}{let u=arguments[1];u!==void 0&&(u=xn.USVString(u,{context:"Failed to execute 'canParse' on 'URL': parameter 2",globals:t})),o.push(u)}return Lo.implementation.canParse(...o)}}Object.defineProperties(n.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),Object.defineProperties(n,{canParse:{enumerable:!0}}),r[rI]=n,Object.defineProperty(t,rI,{configurable:!0,writable:!0,value:n}),e.includes("Window")&&Object.defineProperty(t,"webkitURL",{configurable:!0,writable:!0,value:n})};var Lo=tI()});var sI=y(oS=>{"use strict";f();var Gue=iI(),Kue=sS();oS.URL=Gue;oS.URLSearchParams=Kue});var uI=y(rn=>{"use strict";f();var{URL:Yue,URLSearchParams:Que}=sI(),Cs=rS(),oI=Lm(),Wm={Array,Object,Promise,String,TypeError};Yue.install(Wm,["Window"]);Que.install(Wm,["Window"]);rn.URL=Wm.URL;rn.URLSearchParams=Wm.URLSearchParams;rn.parseURL=Cs.parseURL;rn.basicURLParse=Cs.basicURLParse;rn.serializeURL=Cs.serializeURL;rn.serializePath=Cs.serializePath;rn.serializeHost=Cs.serializeHost;rn.serializeInteger=Cs.serializeInteger;rn.serializeURLOrigin=Cs.serializeURLOrigin;rn.setTheUsername=Cs.setTheUsername;rn.setThePassword=Cs.setThePassword;rn.cannotHaveAUsernamePasswordPort=Cs.cannotHaveAUsernamePasswordPort;rn.hasAnOpaquePath=Cs.hasAnOpaquePath;rn.percentDecodeString=oI.percentDecodeString;rn.percentDecodeBytes=oI.percentDecodeBytes});var cI=y(ji=>{"use strict";f();var Jue=ji&&ji.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),Xue=ji&&ji.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Zue=ji&&ji.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&Jue(e,t,r);return Xue(e,t),e};Object.defineProperty(ji,"__esModule",{value:!0});ji.redactConnectionString=ji.redactValidConnectionString=void 0;var aI=Zue(uS());function eae(t,e){var r,n;let i=t.clone(),s=(r=e?.replacementString)!==null&&r!==void 0?r:"_credentials_",o=(n=e?.redactUsernames)!==null&&n!==void 0?n:!0;if((i.username||i.password)&&o?(i.username=s,i.password=""):i.password&&(i.password=s),i.searchParams.has("authMechanismProperties")){let u=new aI.CommaAndColonSeparatedRecord(i.searchParams.get("authMechanismProperties"));u.get("AWS_SESSION_TOKEN")&&(u.set("AWS_SESSION_TOKEN",s),i.searchParams.set("authMechanismProperties",u.toString()))}return i.searchParams.has("tlsCertificateKeyFilePassword")&&i.searchParams.set("tlsCertificateKeyFilePassword",s),i.searchParams.has("proxyUsername")&&o&&i.searchParams.set("proxyUsername",s),i.searchParams.has("proxyPassword")&&i.searchParams.set("proxyPassword",s),i}ji.redactValidConnectionString=eae;function tae(t,e){var r,n;let i=(r=e?.replacementString)!==null&&r!==void 0?r:"<credentials>",s=(n=e?.redactUsernames)!==null&&n!==void 0?n:!0,o;try{o=new aI.default(t)}catch{}if(o)return e={...e,replacementString:"___credentials___"},o.redact(e).toString().replace(/___credentials___/g,i);let u=i,a=[c=>c.replace(s?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`$1${u}$3`),c=>c.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`$1${u}`),c=>c.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`$1${u}`),c=>s?c.replace(/(proxyUsername=)([^&]+)/gi,`$1${u}`):c,c=>c.replace(/(proxyPassword=)([^&]+)/gi,`$1${u}`)];for(let c of a)t=c(t);return t}ji.redactConnectionString=tae});var uS=y(jo=>{"use strict";f();Object.defineProperty(jo,"__esModule",{value:!0});jo.CommaAndColonSeparatedRecord=jo.ConnectionString=jo.redactConnectionString=void 0;var rae=uI(),lI=cI();Object.defineProperty(jo,"redactConnectionString",{enumerable:!0,get:function(){return lI.redactConnectionString}});var ch="__this_is_a_placeholder__";function nae(t){return t.startsWith("mongodb://")||t.startsWith("mongodb+srv://")}var iae=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/,Hm=class extends Map{delete(e){return super.delete(this._normalizeKey(e))}get(e){return super.get(this._normalizeKey(e))}has(e){return super.has(this._normalizeKey(e))}set(e,r){return super.set(this._normalizeKey(e),r)}_normalizeKey(e){e=`${e}`;for(let r of this.keys())if(r.toLowerCase()===e.toLowerCase()){e=r;break}return e}};function sae(t){return class extends t{append(r,n){return super.append(this._normalizeKey(r),n)}delete(r){return super.delete(this._normalizeKey(r))}get(r){return super.get(this._normalizeKey(r))}getAll(r){return super.getAll(this._normalizeKey(r))}has(r){return super.has(this._normalizeKey(r))}set(r,n){return super.set(this._normalizeKey(r),n)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey(r){return Hm.prototype._normalizeKey.call(this,r)}}}var aS=class extends rae.URL{},Ts=class extends Error{get name(){return"MongoParseError"}},Gm=class t extends aS{constructor(e,r={}){var n;let{looseValidation:i}=r;if(!i&&!nae(e))throw new Ts('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');let s=e.match(iae);if(!s)throw new Ts(`Invalid connection string "${e}"`);let{protocol:o,username:u,password:a,hosts:c,rest:l}=(n=s.groups)!==null&&n!==void 0?n:{};if(!i){if(!o||!c)throw new Ts(`Protocol and host list are required in "${e}"`);try{decodeURIComponent(u??""),decodeURIComponent(a??"")}catch(p){throw new Ts(p.message)}let d=/[:/?#[\]@]/gi;if(u?.match(d))throw new Ts(`Username contains unescaped characters ${u}`);if(!u||!a){let p=e.replace(`${o}://`,"");if(p.startsWith("@")||p.startsWith(":"))throw new Ts("URI contained empty userinfo section")}if(a?.match(d))throw new Ts("Password contains unescaped characters")}let h="";typeof u=="string"&&(h+=u),typeof a=="string"&&(h+=`:${a}`),h&&(h+="@");try{super(`${o.toLowerCase()}://${h}${ch}${l}`)}catch(d){throw i&&new t(e,{...r,looseValidation:!1}),typeof d.message=="string"&&(d.message=d.message.replace(ch,c)),d}if(this._hosts=c.split(","),!i){if(this.isSRV&&this.hosts.length!==1)throw new Ts("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some(d=>d.includes(":")))throw new Ts("mongodb+srv URI cannot have port number")}this.pathname||(this.pathname="/"),Object.setPrototypeOf(this.searchParams,sae(this.searchParams.constructor).prototype)}get host(){return ch}set host(e){throw new Error("No single host for connection string")}get hostname(){return ch}set hostname(e){throw new Error("No single host for connection string")}get port(){return""}set port(e){throw new Error("No single host for connection string")}get href(){return this.toString()}set href(e){throw new Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts(e){this._hosts=e}toString(){return super.toString().replace(ch,this.hosts.join(","))}clone(){return new t(this.toString(),{looseValidation:!0})}redact(e){return(0,lI.redactValidConnectionString)(this,e)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){let{href:e,origin:r,protocol:n,username:i,password:s,hosts:o,pathname:u,search:a,searchParams:c,hash:l}=this;return{href:e,origin:r,protocol:n,username:i,password:s,hosts:o,pathname:u,search:a,searchParams:c,hash:l}}};jo.ConnectionString=Gm;var cS=class extends Hm{constructor(e){super();for(let r of(e??"").split(",")){if(!r)continue;let n=r.indexOf(":");n===-1?this.set(r,""):this.set(r.slice(0,n),r.slice(n+1))}}toString(){return[...this].map(e=>e.join(":")).join(",")}};jo.CommaAndColonSeparatedRecord=cS;jo.default=Gm});var fI=y((IDe,oae)=>{oae.exports={name:"mongodb",version:"6.12.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.1.9",bson:"^6.10.1","mongodb-connection-string-url":"^3.0.0"},peerDependencies:{"@aws-sdk/credential-providers":"^3.188.0","@mongodb-js/zstd":"^1.1.0 || ^2.0.0","gcp-metadata":"^5.2.0",kerberos:"^2.0.1","mongodb-client-encryption":">=6.0.0 <7",snappy:"^7.2.2",socks:"^2.7.1"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.686.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.47.11","@microsoft/tsdoc-config":"^0.17.0","@mongodb-js/zstd":"^2.0.0","@types/chai":"^4.3.17","@types/chai-subset":"^1.3.5","@types/express":"^4.17.21","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.9","@types/node":"^22.9.0","@types/saslprep":"^1.0.3","@types/semver":"^7.5.8","@types/sinon":"^17.0.3","@types/sinon-chai":"^3.2.12","@types/whatwg-url":"^11.0.5","@typescript-eslint/eslint-plugin":"8.4.0","@typescript-eslint/parser":"8.4.0",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^5.2.1","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-tsdoc":"^0.3.0","eslint-plugin-unused-imports":"^4.1.4",express:"^4.21.1","gcp-metadata":"^5.3.0","js-yaml":"^4.1.0",mocha:"^10.8.2","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^6.1.0","mongodb-legacy":"^6.1.3",nyc:"^15.1.0",prettier:"^3.3.3",semver:"^7.6.3",sinon:"^18.0.0","sinon-chai":"^3.7.0",snappy:"^7.2.2",socks:"^2.8.1","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.31.2",typescript:"5.5","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^17.7.2"},license:"Apache-2.0",engines:{node:">=16.20.1"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && ESLINT_USE_FLAT_CONFIG=false eslint --no-ignore --fix mongodb.d.ts lib/beta.d.ts","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"node test/benchmarks/driverBench","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"mocha --config test/mocha_lambda.json test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"mocha --config test/mocha_lambda.json test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"npm run build:dts && ESLINT_USE_FLAT_CONFIG=false eslint -v && ESLINT_USE_FLAT_CONFIG=false eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.json test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.json test/integration","check:unit":"mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"mocha --config test/manual/mocharc.json test/manual/atlas_connectivity.test.ts","check:resource-management":"mocha --config test/manual/mocharc.json test/manual/resource_management.test.ts","check:drivers-atlas-testing":"mocha --config test/mocha_mongodb.json test/atlas/drivers_atlas_testing.test.ts","check:adl":"mocha --config test/mocha_mongodb.json test/manual/atlas-data-lake-testing","check:aws":"nyc mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_aws.test.ts","check:oidc-auth":"mocha --config test/mocha_mongodb.json test/integration/auth/auth.spec.test.ts","check:oidc-test":"mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_oidc.prose.test.ts","check:oidc-azure":"mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_oidc_azure.prose.05.test.ts","check:oidc-gcp":"mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_oidc_gcp.prose.06.test.ts","check:oidc-k8s":"mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_oidc_k8s.prose.07.test.ts","check:ocsp":"mocha --config test/manual/mocharc.json test/manual/ocsp_support.test.js","check:kerberos":"nyc mocha --config test/manual/mocharc.json test/manual/kerberos.test.ts","check:tls":"mocha --config test/manual/mocharc.json test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.json test/manual/ldap.test.js","check:socks5":"mocha --config test/manual/mocharc.json test/manual/socks5.test.ts","check:csfle":"mocha --config test/mocha_mongodb.json test/integration/client-side-encryption","check:snappy":"mocha test/unit/assorted/snappy.test.js","check:x509":"mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var lS=y(uc=>{"use strict";f();Object.defineProperty(uc,"__esModule",{value:!0});uc.LimitedSizeDocument=void 0;uc.makeClientMetadata=aae;uc.addContainerMetadata=lae;uc.getFAASEnv=mI;var lh=require("os"),fh=require("process"),Ll=Ye(),hI=re(),uae=fe(),dI=fI().version,hh=class{constructor(e){this.maxSize=e,this.document=new Map,this.documentSize=5}ifItFitsItSits(e,r){let n=Ll.BSON.serialize(new Map().set(e,r)).byteLength-5;return n+this.documentSize>this.maxSize?!1:(this.documentSize+=n,this.document.set(e,r),!0)}toObject(){return Ll.BSON.deserialize(Ll.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}};uc.LimitedSizeDocument=hh;function aae(t){let e=new hh(512),{appName:r=""}=t;if(r.length>0){let l=Buffer.byteLength(r,"utf8")<=128?t.appName:Buffer.from(r,"utf8").subarray(0,128).toString("utf8");e.ifItFitsItSits("application",{name:l})}let{name:n="",version:i="",platform:s=""}=t.driverInfo,o={name:n.length>0?`nodejs|${n}`:"nodejs",version:i.length>0?`${dI}|${i}`:dI};if(!e.ifItFitsItSits("driver",o))throw new hI.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let u=fae();if(s.length>0&&(u=`${u}|${s}`),!e.ifItFitsItSits("platform",u))throw new hI.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");let a=new Map().set("name",fh.platform).set("architecture",fh.arch).set("version",lh.release()).set("type",lh.type());if(!e.ifItFitsItSits("os",a)){for(let l of a.keys())if(a.delete(l),a.size===0||e.ifItFitsItSits("os",a))break}let c=mI();if(c!=null&&!e.ifItFitsItSits("env",c)){for(let l of c.keys())if(c.delete(l),c.size===0||e.ifItFitsItSits("env",c))break}return e.toObject()}var pI;async function cae(){let t={};pI??=(0,uae.fileIsAccessible)("/.dockerenv");let e=await pI,{KUBERNETES_SERVICE_HOST:r=""}=fh.env,n=r.length>0;return e&&(t.runtime="docker"),n&&(t.orchestrator="kubernetes"),t}async function lae(t){let e=await cae();if(Object.keys(e).length===0)return t;let r=new hh(512),n={...t?.env,container:e};for(let[i,s]of Object.entries(t))i!=="env"?r.ifItFitsItSits(i,s):r.ifItFitsItSits("env",n)||r.ifItFitsItSits("env",s);return"env"in t||r.ifItFitsItSits("env",n),r.toObject()}function mI(){let{AWS_EXECUTION_ENV:t="",AWS_LAMBDA_RUNTIME_API:e="",FUNCTIONS_WORKER_RUNTIME:r="",K_SERVICE:n="",FUNCTION_NAME:i="",VERCEL:s="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:o="",AWS_REGION:u="",FUNCTION_MEMORY_MB:a="",FUNCTION_REGION:c="",FUNCTION_TIMEOUT_SEC:l="",VERCEL_REGION:h=""}=fh.env,d=t.startsWith("AWS_Lambda_")||e.length>0,p=r.length>0,m=n.length>0||i.length>0,g=s.length>0,_=new Map;return g&&!(p||m)?(h.length>0&&_.set("region",h),_.set("name","vercel"),_):d&&!(p||m||g)?(u.length>0&&_.set("region",u),o.length>0&&Number.isInteger(+o)&&_.set("memory_mb",new Ll.Int32(o)),_.set("name","aws.lambda"),_):p&&!(m||d||g)?(_.set("name","azure.func"),_):m&&!(p||d||g)?(c.length>0&&_.set("region",c),a.length>0&&Number.isInteger(+a)&&_.set("memory_mb",new Ll.Int32(a)),l.length>0&&Number.isInteger(+l)&&_.set("timeout_sec",new Ll.Int32(l)),_.set("name","gcp.func"),_):null}function fae(){return"Deno"in globalThis?`Deno v${typeof Deno?.version?.deno=="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${lh.endianness()}`:"Bun"in globalThis?`Bun v${typeof Bun?.version=="string"?Bun?.version:"0.0.0-unknown"}, ${lh.endianness()}`:`Node.js ${fh.version}, ${lh.endianness()}`}});var ph=y(Fn=>{"use strict";f();Object.defineProperty(Fn,"__esModule",{value:!0});Fn.OpCompressedRequest=Fn.OpMsgResponse=Fn.OpMsgRequest=Fn.DocumentSequence=Fn.OpReply=Fn.OpQueryRequest=void 0;var Vl=Ye(),dh=re(),fS=mh(),jl=ja(),Ul=0,hae=2,dae=4,pae=8,mae=16,yae=32,gae=64,_ae=128,Eae=1,Aae=2,wae=4,Sae=8,bae=Vl.BSON.onDemand.ByteUtils.encodeUTF8Into,dS=class t{constructor(e,r,n){this.databaseName=e,this.query=r,this.moreToCome=!1;let i=`${e}.$cmd`;if(typeof e!="string")throw new dh.MongoRuntimeError("Database name must be a string for a query");if(r==null)throw new dh.MongoRuntimeError("A query document must be specified for query");if(i.indexOf("\0")!==-1)throw new dh.MongoRuntimeError("Namespace cannot contain a null character");this.ns=i,this.numberToSkip=n.numberToSkip||0,this.numberToReturn=n.numberToReturn||0,this.returnFieldSelector=n.returnFieldSelector||void 0,this.requestId=n.requestId??t.getRequestId(),this.pre32Limit=n.pre32Limit,this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof n.secondaryOk=="boolean"?n.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=Ul++}nextRequestId(){return Ul+1}static getRequestId(){return++Ul}toBin(){let e=[],r=null,n=0;this.tailable&&(n|=hae),this.secondaryOk&&(n|=dae),this.oplogReplay&&(n|=pae),this.noCursorTimeout&&(n|=mae),this.awaitData&&(n|=yae),this.exhaust&&(n|=gae),this.partial&&(n|=_ae),this.batchSize!==this.numberToReturn&&(this.numberToReturn=this.batchSize);let i=Buffer.alloc(4*4+4+Buffer.byteLength(this.ns)+1+4+4);e.push(i);let s=Vl.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});e.push(s),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0&&(r=Vl.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),e.push(r));let o=i.length+s.length+(r?r.length:0),u=4;return i[3]=o>>24&255,i[2]=o>>16&255,i[1]=o>>8&255,i[0]=o&255,i[u+3]=this.requestId>>24&255,i[u+2]=this.requestId>>16&255,i[u+1]=this.requestId>>8&255,i[u]=this.requestId&255,u=u+4,i[u+3]=0,i[u+2]=0,i[u+1]=0,i[u]=0,u=u+4,i[u+3]=jl.OP_QUERY>>24&255,i[u+2]=jl.OP_QUERY>>16&255,i[u+1]=jl.OP_QUERY>>8&255,i[u]=jl.OP_QUERY&255,u=u+4,i[u+3]=n>>24&255,i[u+2]=n>>16&255,i[u+1]=n>>8&255,i[u]=n&255,u=u+4,u=u+i.write(this.ns,u,"utf8")+1,i[u-1]=0,i[u+3]=this.numberToSkip>>24&255,i[u+2]=this.numberToSkip>>16&255,i[u+1]=this.numberToSkip>>8&255,i[u]=this.numberToSkip&255,u=u+4,i[u+3]=this.numberToReturn>>24&255,i[u+2]=this.numberToReturn>>16&255,i[u+1]=this.numberToReturn>>8&255,i[u]=this.numberToReturn&255,u=u+4,e}};Fn.OpQueryRequest=dS;var pS=class{constructor(e,r,n,i){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=e,this.data=n,this.opts=i??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new Vl.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>2**32-1)throw new RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&Eae)!==0,this.queryFailure=(this.responseFlags&Aae)!==0,this.shardConfigStale=(this.responseFlags&wae)!==0,this.awaitCapable=(this.responseFlags&Sae)!==0;for(let e=0;e<this.numberReturned;e++){let r=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index=this.index+r}return this.parsed=!0,this.sections[0]}};Fn.OpReply=pS;var gI=1,_I=2,EI=65536,Km=class{constructor(e,r){this.field=e,this.documents=[],this.chunks=[],this.serializedDocumentsLength=0;let n=Buffer.allocUnsafe(5+this.field.length+1);if(n[0]=1,bae(n,`${this.field}\0`,5),this.chunks.push(n),this.header=n,r)for(let i of r)this.push(i,Vl.serialize(i))}push(e,r){return this.serializedDocumentsLength+=r.length,this.documents.push(e),this.chunks.push(r),this.header?.writeInt32LE(4+this.field.length+1+this.serializedDocumentsLength,1),this.serializedDocumentsLength+this.header.length}toBin(){return Buffer.concat(this.chunks)}};Fn.DocumentSequence=Km;var Ym=class t{constructor(e,r,n){if(this.databaseName=e,this.command=r,this.options=n,r==null)throw new dh.MongoInvalidArgumentError("Query document must be specified for query");this.command.$db=e,this.options=n??{},this.requestId=n.requestId?n.requestId:t.getRequestId(),this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checksumPresent=!1,this.moreToCome=n.moreToCome??r.writeConcern?.w===0,this.exhaustAllowed=typeof n.exhaustAllowed=="boolean"?n.exhaustAllowed:!1}toBin(){let e=[],r=0;this.checksumPresent&&(r|=gI),this.moreToCome&&(r|=_I),this.exhaustAllowed&&(r|=EI);let n=Buffer.alloc(4*4+4);e.push(n);let i=n.length,s=this.command;return i+=this.makeSections(e,s),n.writeInt32LE(i,0),n.writeInt32LE(this.requestId,4),n.writeInt32LE(0,8),n.writeInt32LE(jl.OP_MSG,12),n.writeUInt32LE(r,16),e}makeSections(e,r){let n=this.extractDocumentSequences(r),i=Buffer.allocUnsafe(1);i[0]=0;let s=this.serializeBson(r);return e.push(i),e.push(s),e.push(n),i.length+s.length+n.length}extractDocumentSequences(e){let r=[];for(let[n,i]of Object.entries(e))i instanceof Km&&(r.push(i.toBin()),delete e[n]);return r.length>0?Buffer.concat(r):Buffer.alloc(0)}serializeBson(e){return Vl.serialize(e,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return Ul=Ul+1&2147483647,Ul}};Fn.OpMsgRequest=Ym;var mS=class{constructor(e,r,n,i){this.index=0,this.sections=[],this.parsed=!1,this.raw=e,this.data=n,this.opts=i??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.responseFlags=n.readInt32LE(0),this.checksumPresent=(this.responseFlags&gI)!==0,this.moreToCome=(this.responseFlags&_I)!==0,this.exhaustAllowed=(this.responseFlags&EI)!==0,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];for(this.index=4;this.index<this.data.length;){let e=this.data.readUInt8(this.index++);if(e===0){let r=this.data.readUInt32LE(this.index),n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index+=r}else if(e===1)throw new dh.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}};Fn.OpMsgResponse=mS;var hS=16,yI=9,yS=class{constructor(e,r){this.command=e,this.options=r}static canCompress(e){let r=e instanceof Ym?e.command:e.query,n=Object.keys(r)[0];return!fS.uncompressibleCommands.has(n)}async toBin(){let e=Buffer.concat(this.command.toBin()),r=e.slice(hS),n=e.readInt32LE(12),i=await(0,fS.compress)(this.options,r),s=Buffer.alloc(hS);s.writeInt32LE(hS+yI+i.length,0),s.writeInt32LE(this.command.requestId,4),s.writeInt32LE(0,8),s.writeInt32LE(jl.OP_COMPRESSED,12);let o=Buffer.alloc(yI);return o.writeInt32LE(n,0),o.writeInt32LE(r.length,4),o.writeUInt8(fS.Compressor[this.options.agreedCompressor],8),[s,o,i]}};Fn.OpCompressedRequest=yS});var mh=y(xr=>{"use strict";f();Object.defineProperty(xr,"__esModule",{value:!0});xr.uncompressibleCommands=xr.Compressor=void 0;xr.compress=Mae;xr.decompress=bI;xr.compressCommand=vae;xr.decompressResponse=Bae;var AI=require("util"),Qm=require("zlib"),Oae=Xt(),wI=bs(),_S=re(),zl=ph(),gS=ja();xr.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});xr.uncompressibleCommands=new Set([Oae.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var Cae=3,Tae=(0,AI.promisify)(Qm.inflate.bind(Qm)),Dae=(0,AI.promisify)(Qm.deflate.bind(Qm)),Hu,ac=null;function SI(){if(ac==null){let t=(0,wI.getSnappy)();if("kModuleError"in t)throw t.kModuleError;ac=t}return ac}async function Mae(t,e){let r={};switch(t.agreedCompressor){case"snappy":return ac??=SI(),await ac.compress(e);case"zstd":{if(OI(),"kModuleError"in Hu)throw Hu.kModuleError;return await Hu.compress(e,Cae)}case"zlib":return t.zlibCompressionLevel&&(r.level=t.zlibCompressionLevel),await Dae(e,r);default:throw new _S.MongoInvalidArgumentError(`Unknown compressor ${t.agreedCompressor} failed to compress`)}}async function bI(t,e){if(t!==xr.Compressor.snappy&&t!==xr.Compressor.zstd&&t!==xr.Compressor.zlib&&t!==xr.Compressor.none)throw new _S.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${t})`);switch(t){case xr.Compressor.snappy:return ac??=SI(),await ac.uncompress(e,{asBuffer:!0});case xr.Compressor.zstd:{if(OI(),"kModuleError"in Hu)throw Hu.kModuleError;return await Hu.decompress(e)}case xr.Compressor.zlib:return await Tae(e);default:return e}}function OI(){Hu||(Hu=(0,wI.getZstdLibrary)())}var yh=16;async function vae(t,e){let n=await(e.agreedCompressor==="none"||!zl.OpCompressedRequest.canCompress(t)?t:new zl.OpCompressedRequest(t,{agreedCompressor:e.agreedCompressor??"none",zlibCompressionLevel:e.zlibCompressionLevel??0})).toBin();return Buffer.concat(n)}async function Bae(t){let e={length:t.readInt32LE(0),requestId:t.readInt32LE(4),responseTo:t.readInt32LE(8),opCode:t.readInt32LE(12)};if(e.opCode!==gS.OP_COMPRESSED){let u=e.opCode===gS.OP_MSG?zl.OpMsgResponse:zl.OpReply,a=t.subarray(yh);return new u(t,e,a)}let r={...e,fromCompressed:!0,opCode:t.readInt32LE(yh),length:t.readInt32LE(yh+4)},n=t[yh+8],i=t.slice(yh+9),s=r.opCode===gS.OP_MSG?zl.OpMsgResponse:zl.OpReply,o=await bI(n,i);if(o.length!==r.length)throw new _S.MongoDecompressionError("Message body and message header must be the same length");return new s(t,r,o)}});var AS=y(dr=>{"use strict";f();Object.defineProperty(dr,"__esModule",{value:!0});dr.hmacSha256Hook=dr.hmacSha512Hook=dr.aes256CtrDecryptHook=dr.aes256CtrEncryptHook=dr.aes256CbcDecryptHook=dr.aes256CbcEncryptHook=void 0;dr.makeAES256Hook=_h;dr.randomHook=Iae;dr.sha256Hook=Pae;dr.makeHmacHook=ES;dr.signRsaSha256Hook=Nae;var gh=require("crypto");function _h(t,e){return function(r,n,i,s){let o;try{let u=gh[t](e,r,n);u.setAutoPadding(!1),o=u.update(i);let a=u.final();a.length>0&&(o=Buffer.concat([o,a]))}catch(u){return u}return o.copy(s),o.length}}function Iae(t,e){try{gh.randomFillSync(t,0,e)}catch(r){return r}return e}function Pae(t,e){let r;try{r=gh.createHash("sha256").update(t).digest()}catch(n){return n}return r.copy(e),r.length}function ES(t){return(e,r,n)=>{let i;try{i=gh.createHmac(t,e).update(r).digest()}catch(s){return s}return i.copy(n),i.length}}function Nae(t,e,r){let n;try{let i=gh.createSign("sha256WithRSAEncryption"),s=Buffer.from(`-----BEGIN PRIVATE KEY-----
${t.toString("base64")}
-----END PRIVATE KEY-----
`);n=i.update(e).end().sign(s)}catch(i){return i}return n.copy(r),n.length}dr.aes256CbcEncryptHook=_h("createCipheriv","aes-256-cbc");dr.aes256CbcDecryptHook=_h("createDecipheriv","aes-256-cbc");dr.aes256CtrEncryptHook=_h("createCipheriv","aes-256-ctr");dr.aes256CtrDecryptHook=_h("createDecipheriv","aes-256-ctr");dr.hmacSha512Hook=ES("sha512");dr.hmacSha256Hook=ES("sha256")});var Wl=y($n=>{"use strict";f();Object.defineProperty($n,"__esModule",{value:!0});$n.MongoCryptKMSRequestNetworkTimeoutError=$n.MongoCryptAzureKMSRequestError=$n.MongoCryptCreateEncryptedCollectionError=$n.MongoCryptCreateDataKeyError=$n.MongoCryptInvalidArgumentError=$n.MongoCryptError=void 0;var Rae=re(),Gu=class extends Rae.MongoError{constructor(e,r={}){super(e,r)}get name(){return"MongoCryptError"}};$n.MongoCryptError=Gu;var wS=class extends Gu{constructor(e){super(e)}get name(){return"MongoCryptInvalidArgumentError"}};$n.MongoCryptInvalidArgumentError=wS;var SS=class extends Gu{constructor(e,{cause:r}){super(`Unable to complete creating data keys: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateDataKeyError"}};$n.MongoCryptCreateDataKeyError=SS;var bS=class extends Gu{constructor(e,{cause:r}){super(`Unable to create collection: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateEncryptedCollectionError"}};$n.MongoCryptCreateEncryptedCollectionError=bS;var OS=class extends Gu{constructor(e,r){super(e),this.body=r}get name(){return"MongoCryptAzureKMSRequestError"}};$n.MongoCryptAzureKMSRequestError=OS;var CS=class extends Gu{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}};$n.MongoCryptKMSRequestNetworkTimeoutError=CS});var vS=y(Ku=>{"use strict";f();Object.defineProperty(Ku,"__esModule",{value:!0});Ku.LegacyAWSTemporaryCredentialProvider=Ku.AWSSDKCredentialProvider=Ku.AWSTemporaryCredentialProvider=void 0;var xae=bs(),Fae=re(),Jm=fe(),$ae="http://169.254.170.2",TS="http://169.254.169.254",CI="/latest/meta-data/iam/security-credentials",Uo=class t{static get awsSDK(){return t._awsSDK??=(0,xae.getAwsCredentialProvider)(),t._awsSDK}static get isAWSSDKInstalled(){return!("kModuleError"in t.awsSDK)}};Ku.AWSTemporaryCredentialProvider=Uo;var DS=class extends Uo{get provider(){if("kModuleError"in Uo.awsSDK)throw Uo.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:e="",AWS_REGION:r=""}=process.env;e=e.toLowerCase(),r=r.toLowerCase();let n=r.length!==0&&e.length!==0,s=e==="regional"||e==="legacy"&&!new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]).has(r);return this._provider=n&&s?Uo.awsSDK.fromNodeProviderChain({clientConfig:{region:r}}):Uo.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{let e=await this.provider();return{AccessKeyId:e.accessKeyId,SecretAccessKey:e.secretAccessKey,Token:e.sessionToken,Expiration:e.expiration}}catch(e){throw new Fae.MongoAWSError(e.message,{cause:e})}}};Ku.AWSSDKCredentialProvider=DS;var MS=class extends Uo{async getCredentials(){if(process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI)return await(0,Jm.request)(`${$ae}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`);let e=await(0,Jm.request)(`${TS}/latest/api/token`,{method:"PUT",json:!1,headers:{"X-aws-ec2-metadata-token-ttl-seconds":30}}),r=await(0,Jm.request)(`${TS}/${CI}`,{json:!1,headers:{"X-aws-ec2-metadata-token":e}});return await(0,Jm.request)(`${TS}/${CI}/${r}`,{headers:{"X-aws-ec2-metadata-token":e}})}};Ku.LegacyAWSTemporaryCredentialProvider=MS});var TI=y(BS=>{"use strict";f();Object.defineProperty(BS,"__esModule",{value:!0});BS.loadAWSCredentials=qae;var kae=vS();async function qae(t){let e=new kae.AWSSDKCredentialProvider,{SecretAccessKey:r="",AccessKeyId:n="",Token:i}=await e.getCredentials(),s={secretAccessKey:r,accessKeyId:n};return i!=null&&(s.sessionToken=i),{...t,aws:s}}});var IS=y(kn=>{"use strict";f();Object.defineProperty(kn,"__esModule",{value:!0});kn.tokenCache=kn.AzureCredentialCache=kn.AZURE_BASE_URL=void 0;kn.addAzureParams=DI;kn.prepareRequest=MI;kn.fetchAzureKMSToken=vI;kn.loadAzureCredentials=zae;var Lae=re(),jae=fe(),Hl=Wl(),Uae=6e3;kn.AZURE_BASE_URL="http://169.254.169.254/metadata/identity/oauth2/token?";var Xm=class{constructor(){this.cachedToken=null}async getToken(){return(this.cachedToken==null||this.needsRefresh(this.cachedToken))&&(this.cachedToken=await this._getToken()),{accessToken:this.cachedToken.accessToken}}needsRefresh(e){return e.expiresOnTimestamp-Date.now()<=Uae}resetCache(){this.cachedToken=null}_getToken(){return vI()}};kn.AzureCredentialCache=Xm;kn.tokenCache=new Xm;async function Vae(t){let{status:e,body:r}=t,n=(()=>{try{return JSON.parse(r)}catch{throw new Hl.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(e!==200)throw new Hl.MongoCryptAzureKMSRequestError("Unable to complete request.",n);if(!n.access_token)throw new Hl.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!n.expires_in)throw new Hl.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");let i=Number(n.expires_in)*1e3;if(Number.isNaN(i))throw new Hl.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:n.access_token,expiresOnTimestamp:Date.now()+i}}function DI(t,e,r){return t.searchParams.append("api-version","2018-02-01"),t.searchParams.append("resource",e),r&&t.searchParams.append("client_id",r),t}function MI(t){let e=new URL(t.url?.toString()??kn.AZURE_BASE_URL);return DI(e,"https://vault.azure.net"),{headers:{...t.headers,"Content-Type":"application/json",Metadata:!0},url:e}}async function vI(t={}){let{headers:e,url:r}=MI(t);try{let n=await(0,jae.get)(r,{headers:e});return await Vae(n)}catch(n){throw n instanceof Lae.MongoNetworkTimeoutError?new Hl.MongoCryptAzureKMSRequestError(`[Azure KMS] ${n.message}`):n}}async function zae(t){let e=await kn.tokenCache.getToken();return{...t,azure:e}}});var BI=y(PS=>{"use strict";f();Object.defineProperty(PS,"__esModule",{value:!0});PS.loadGCPCredentials=Hae;var Wae=bs();async function Hae(t){let e=(0,Wae.getGcpMetadata)();if("kModuleError"in e)return t;let{access_token:r}=await e.instance({property:"service-accounts/default/token"});return{...t,gcp:{accessToken:r}}}});var NS=y(ey=>{"use strict";f();Object.defineProperty(ey,"__esModule",{value:!0});ey.isEmptyCredentials=Zm;ey.refreshKMSCredentials=Qae;var Gae=TI(),Kae=IS(),Yae=BI();function Zm(t,e){let r=e[t];return r==null?!1:typeof r=="object"&&Object.keys(r).length===0}async function Qae(t){let e=t;return Zm("aws",t)&&(e=await(0,Gae.loadAWSCredentials)(e)),Zm("gcp",t)&&(e=await(0,Yae.loadGCPCredentials)(e)),Zm("azure",t)&&(e=await(0,Kae.loadAzureCredentials)(e)),e}});var xS=y(ry=>{"use strict";f();Object.defineProperty(ry,"__esModule",{value:!0});ry.StateMachine=void 0;var II=require("fs/promises"),Jae=require("net"),Xae=require("tls"),Vo=Ye(),PI=en(),Zae=bs(),ece=re(),NI=Jr(),Gl=fe(),tce=ny(),Yu=Wl(),Eh=null;function rce(){if(Eh==null){let t=(0,Zae.getSocks)();if("kModuleError"in t)throw t.kModuleError;Eh=t}return Eh}var ty=0,xI=1,FI=2,$I=3,kI=7,qI=4,LI=5,jI=6,nce=443,ice=new Map([[ty,"MONGOCRYPT_CTX_ERROR"],[xI,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[FI,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[$I,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[kI,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[qI,"MONGOCRYPT_CTX_NEED_KMS"],[LI,"MONGOCRYPT_CTX_READY"],[jI,"MONGOCRYPT_CTX_DONE"]]),sce=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames","tlsDisableOCSPEndpointCheck","tlsDisableCertificateRevocationCheck"];function RI(t){process.env.MONGODB_CRYPT_DEBUG&&console.error(t)}var oce,RS=class{constructor(e,r=(0,Vo.pluckBSONSerializeOptions)(e)){this.options=e,this.bsonOptions=r}async execute(e,r,n){let i=e._keyVaultNamespace,s=e._keyVaultClient,o=e._metaDataClient,u=e._mongocryptdClient,a=e._mongocryptdManager,c=null;for(;r.state!==jI&&r.state!==ty;)switch(RI(`[context#${r.id}] ${ice.get(r.state)||r.state}`),r.state){case xI:{let l=(0,Vo.deserialize)(r.nextMongoOperation());if(!o)throw new Yu.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");let h=await this.fetchCollectionInfo(o,r.ns,l,n);h&&r.addMongoOperationResponse(h),r.finishMongoOperation();break}case FI:{let l=r.nextMongoOperation();if(!u)throw new Yu.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");let h=a?await a.withRespawn(this.markCommand.bind(this,u,r.ns,l,n)):await this.markCommand(u,r.ns,l,n);r.addMongoOperationResponse(h),r.finishMongoOperation();break}case $I:{let l=r.nextMongoOperation(),h=await this.fetchKeys(s,i,l,n);h.length===0&&(c=oce??=(0,Vo.serialize)({v:[]}));for await(let d of h)r.addMongoOperationResponse((0,Vo.serialize)(d));r.finishMongoOperation();break}case kI:{let l=await e.askForKMSCredentials();r.provideKMSProviders((0,Vo.serialize)(l));break}case qI:{await Promise.all(this.requests(r,n)),r.finishKMSRequests();break}case LI:{let l=r.finalize();if(r.state===ty){let h=r.status.message||"Finalization error";throw new Yu.MongoCryptError(h)}c=l;break}default:throw new Yu.MongoCryptError(`Unknown state: ${r.state}`)}if(r.state===ty||c==null){let l=r.status.message;throw l||RI("unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message."),new Yu.MongoCryptError(l??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return c}async kmsRequest(e,r){let n=e.endpoint.split(":"),i=n[1]!=null?Number.parseInt(n[1],10):nce,s=(0,tce.autoSelectSocketOptions)(this.options.socketOptions||{}),o={host:n[0],servername:n[0],port:i,...s},u=e.message,a=new Gl.BufferPool,c=new Jae.Socket,l;function h(){for(let S of[l,c])S&&(S.removeAllListeners(),S.destroy())}function d(S){return new Yu.MongoCryptError("KMS request failed",{cause:S})}function p(){return new Yu.MongoCryptError("KMS request closed")}let m=this.options.tlsOptions;if(m){let S=e.kmsProvider,C=m[S];if(C){let O=this.validateTlsOptions(S,C);if(O)throw O;try{await this.setTlsOptions(C,o)}catch(B){throw d(B)}}}let{promise:g,reject:_,resolve:w}=(0,Gl.promiseWithResolvers)();c.once("error",S=>_(d(S))).once("close",()=>_(p())).once("connect",()=>w());try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){let B={host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080,...s};c.connect(B),await g;try{Eh??=rce(),o.socket=(await Eh.SocksClient.createConnection({existing_socket:c,command:"connect",destination:{host:o.host,port:o.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(P){throw d(P)}}l=Xae.connect(o,()=>{l.write(u)});let{promise:S,reject:C,resolve:O}=(0,Gl.promiseWithResolvers)();l.once("error",B=>C(d(B))).once("close",()=>C(p())).on("data",B=>{for(a.append(B);e.bytesNeeded>0&&a.length;){let P=Math.min(e.bytesNeeded,a.length);e.addResponse(a.read(P))}e.bytesNeeded<=0&&O()}),await(r?.csotEnabled()?Promise.all([S,NI.Timeout.expires(r?.remainingTimeMS)]):S)}catch(S){throw S instanceof NI.TimeoutError?new ece.MongoOperationTimeoutError("KMS request timed out"):S}finally{h()}}*requests(e,r){for(let n=e.nextKMSRequest();n!=null;n=e.nextKMSRequest())yield this.kmsRequest(n,r)}validateTlsOptions(e,r){let n=Object.keys(r);for(let i of sce)if(n.includes(i))return new Yu.MongoCryptError(`Insecure TLS options prohibited for ${e}: ${i}`)}async setTlsOptions(e,r){if(e.tlsCertificateKeyFile){let n=await II.readFile(e.tlsCertificateKeyFile);r.cert=r.key=n}e.tlsCAFile&&(r.ca=await II.readFile(e.tlsCAFile)),e.tlsCertificateKeyFilePassword&&(r.passphrase=e.tlsCertificateKeyFilePassword)}async fetchCollectionInfo(e,r,n,i){let{db:s}=Gl.MongoDBCollectionNamespace.fromString(r),u=await e.db(s).listCollections(n,{promoteLongs:!1,promoteValues:!1,timeoutContext:i&&new PI.CursorTimeoutContext(i,Symbol())}).toArray();return u.length>0?(0,Vo.serialize)(u[0]):null}async markCommand(e,r,n,i){let{db:s}=Gl.MongoDBCollectionNamespace.fromString(r),o={promoteLongs:!1,promoteValues:!1},u=(0,Vo.deserialize)(n,o),a=await e.db(s).command(u,{...o,...i?.csotEnabled()?{timeoutMS:i?.remainingTimeMS}:void 0});return(0,Vo.serialize)(a,this.bsonOptions)}fetchKeys(e,r,n,i){let{db:s,collection:o}=Gl.MongoDBCollectionNamespace.fromString(r);return e.db(s).collection(o,{readConcern:{level:"majority"}}).find((0,Vo.deserialize)(n),{timeoutContext:i&&new PI.CursorTimeoutContext(i,Symbol())}).toArray()}};ry.StateMachine=RS});var ny=y(Sh=>{"use strict";f();Object.defineProperty(Sh,"__esModule",{value:!0});Sh.ClientEncryption=void 0;Sh.autoSelectSocketOptions=wh;var qn=Ye(),uce=bs(),Ah=Jr(),Ln=fe(),ace=AS(),cc=Wl(),cce=NS(),iy=xS(),FS=class t{static getMongoCrypt(){let e=(0,uce.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){this._client=e,this._proxyOptions=r.proxyOptions??{},this._tlsOptions=r.tlsOptions??{},this._kmsProviders=r.kmsProviders||{};let{timeoutMS:n}=(0,Ln.resolveTimeoutOptions)(e,r);if(this._timeoutMS=n,r.keyVaultNamespace==null)throw new cc.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");let i={...r,cryptoCallbacks:ace,kmsProviders:Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,qn.serialize)(this._kmsProviders)};this._keyVaultNamespace=r.keyVaultNamespace,this._keyVaultClient=r.keyVaultClient||e;let s=t.getMongoCrypt();this._mongoCrypt=new s(i)}async createDataKey(e,r={}){if(r.keyAltNames&&!Array.isArray(r.keyAltNames))throw new cc.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof r.keyAltNames}.`);let n;r.keyAltNames&&r.keyAltNames.length>0&&(n=r.keyAltNames.map((p,m)=>{if(typeof p!="string")throw new cc.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${m} was of type ${typeof p}`);return(0,qn.serialize)({keyAltName:p})}));let i;r.keyMaterial&&(i=(0,qn.serialize)({keyMaterial:r.keyMaterial}));let s=(0,qn.serialize)({provider:e,...r.masterKey}),o=this._mongoCrypt.makeDataKeyContext(s,{keyAltNames:n,keyMaterial:i}),u=new iy.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:wh(this._client.s.options)}),a=r?.timeoutContext??Ah.TimeoutContext.create((0,Ln.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),c=(0,qn.deserialize)(await u.execute(this,o,a)),{db:l,collection:h}=Ln.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:d}=await this._keyVaultClient.db(l).collection(h).insertOne(c,{writeConcern:{w:"majority"},timeoutMS:a?.csotEnabled()?a?.getRemainingTimeMSOrThrow():void 0});return d}async rewrapManyDataKey(e,r){let n;if(r){let p=Object.assign({provider:r.provider},r.masterKey);n=(0,qn.serialize)(p)}let i=(0,qn.serialize)(e),s=this._mongoCrypt.makeRewrapManyDataKeyContext(i,n),o=new iy.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:wh(this._client.s.options)}),u=Ah.TimeoutContext.create((0,Ln.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),{v:a}=(0,qn.deserialize)(await o.execute(this,s,u));if(a.length===0)return{};let{db:c,collection:l}=Ln.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),h=a.map(p=>({updateOne:{filter:{_id:p._id},update:{$set:{masterKey:p.masterKey,keyMaterial:p.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(c).collection(l).bulkWrite(h,{writeConcern:{w:"majority"},timeoutMS:u.csotEnabled()?u?.remainingTimeMS:void 0})}}async deleteKey(e){let{db:r,collection:n}=Ln.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).deleteOne({_id:e},{writeConcern:{w:"majority"},timeoutMS:this._timeoutMS})}getKeys(){let{db:e,collection:r}=Ln.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(e).collection(r).find({},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKey(e){let{db:r,collection:n}=Ln.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({_id:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKeyByAltName(e){let{db:r,collection:n}=Ln.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({keyAltNames:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async addKeyAltName(e,r){let{db:n,collection:i}=Ln.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(n).collection(i).findOneAndUpdate({_id:e},{$addToSet:{keyAltNames:r}},{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async removeKeyAltName(e,r){let{db:n,collection:i}=Ln.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),s=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[r]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",r]}}}]}}}];return await this._keyVaultClient.db(n).collection(i).findOneAndUpdate({_id:e},s,{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async createEncryptedCollection(e,r,n){let{provider:i,masterKey:s,createCollectionOptions:{encryptedFields:{...o},...u}}=n,a=this._timeoutMS!=null?Ah.TimeoutContext.create((0,Ln.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0;if(Array.isArray(o.fields)){let c=o.fields.map(async d=>d==null||typeof d!="object"||d.keyId!=null?d:{...d,keyId:await this.createDataKey(i,{masterKey:s,timeoutContext:a?.csotEnabled()?a?.clone():void 0})}),l=await Promise.allSettled(c);o.fields=l.map((d,p)=>d.status==="fulfilled"?d.value:o.fields[p]);let h=l.find(d=>d.status==="rejected");if(h!=null)throw new cc.MongoCryptCreateDataKeyError(o,{cause:h.reason})}try{return{collection:await e.createCollection(r,{...u,encryptedFields:o,timeoutMS:a?.csotEnabled()?a?.getRemainingTimeMSOrThrow():void 0}),encryptedFields:o}}catch(c){throw new cc.MongoCryptCreateEncryptedCollectionError(o,{cause:c})}}async encrypt(e,r){return await this._encrypt(e,!1,r)}async encryptExpression(e,r){return await this._encrypt(e,!0,r)}async decrypt(e){let r=(0,qn.serialize)({v:e}),n=this._mongoCrypt.makeExplicitDecryptionContext(r),i=new iy.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:wh(this._client.s.options)}),s=this._timeoutMS!=null?Ah.TimeoutContext.create((0,Ln.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:o}=(0,qn.deserialize)(await i.execute(this,n,s));return o}async askForKMSCredentials(){return await(0,cce.refreshKMSCredentials)(this._kmsProviders)}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}async _encrypt(e,r,n){let{algorithm:i,keyId:s,keyAltName:o,contentionFactor:u,queryType:a,rangeOptions:c}=n,l={expressionMode:r,algorithm:i};if(s&&(l.keyId=s.buffer),o){if(s)throw new cc.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof o!="string")throw new cc.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof o}`);l.keyAltName=(0,qn.serialize)({keyAltName:o})}(typeof u=="number"||typeof u=="bigint")&&(l.contentionFactor=u),typeof a=="string"&&(l.queryType=a),typeof c=="object"&&(l.rangeOptions=(0,qn.serialize)(c));let h=(0,qn.serialize)({v:e}),d=new iy.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:wh(this._client.s.options)}),p=this._mongoCrypt.makeExplicitEncryptionContext(h,l),m=this._timeoutMS!=null?Ah.TimeoutContext.create((0,Ln.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:g}=(0,qn.deserialize)(await d.execute(this,p,m));return g}};Sh.ClientEncryption=FS;function wh(t){let e={autoSelectFamily:!0};return"autoSelectFamily"in t&&(e.autoSelectFamily=t.autoSelectFamily),"autoSelectFamilyAttemptTimeout"in t&&(e.autoSelectFamilyAttemptTimeout=t.autoSelectFamilyAttemptTimeout),e}});var UI=y(oy=>{"use strict";f();Object.defineProperty(oy,"__esModule",{value:!0});oy.MongocryptdManager=void 0;var lce=re(),sy=class t{constructor(e={}){this.spawnPath="",this.spawnArgs=[],this.uri=typeof e.mongocryptdURI=="string"&&e.mongocryptdURI.length>0?e.mongocryptdURI:t.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!e.mongocryptdBypassSpawn,Object.hasOwn(e,"mongocryptdSpawnPath")&&e.mongocryptdSpawnPath&&(this.spawnPath=e.mongocryptdSpawnPath),Object.hasOwn(e,"mongocryptdSpawnArgs")&&Array.isArray(e.mongocryptdSpawnArgs)&&(this.spawnArgs=this.spawnArgs.concat(e.mongocryptdSpawnArgs)),this.spawnArgs.filter(r=>typeof r=="string").every(r=>r.indexOf("--idleShutdownTimeoutSecs")<0)&&this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){let e=this.spawnPath||"mongocryptd",{spawn:r}=require("child_process");this._child=r(e,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(e){try{return await e()}catch(n){if(!(n instanceof lce.MongoNetworkTimeoutError&&!this.bypassSpawn))throw n}return await this.spawn(),await e()}};oy.MongocryptdManager=sy;sy.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020"});var LS=y(Kl=>{"use strict";f();var WI;Object.defineProperty(Kl,"__esModule",{value:!0});Kl.AutoEncrypter=Kl.AutoEncryptionLoggerLevel=void 0;var VI=require("net"),bh=Ye(),fce=Xt(),hce=bs(),$S=re(),dce=Lu(),pce=fe(),kS=ny(),mce=AS(),yce=Wl(),gce=UI(),_ce=NS(),zI=xS();Kl.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});var qS=class t{static getMongoCrypt(){let e=(0,hce.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){this[WI]=!1,this._client=e,this._bypassEncryption=r.bypassAutoEncryption===!0,this._keyVaultNamespace=r.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=r.keyVaultClient||e,this._metaDataClient=r.metadataClient||e,this._proxyOptions=r.proxyOptions||{},this._tlsOptions=r.tlsOptions||{},this._kmsProviders=r.kmsProviders||{};let n={cryptoCallbacks:mce};r.schemaMap&&(n.schemaMap=Buffer.isBuffer(r.schemaMap)?r.schemaMap:(0,bh.serialize)(r.schemaMap)),r.encryptedFieldsMap&&(n.encryptedFieldsMap=Buffer.isBuffer(r.encryptedFieldsMap)?r.encryptedFieldsMap:(0,bh.serialize)(r.encryptedFieldsMap)),n.kmsProviders=Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,bh.serialize)(this._kmsProviders),r.options?.logger&&(n.logger=r.options.logger),r.extraOptions&&r.extraOptions.cryptSharedLibPath&&(n.cryptSharedLibPath=r.extraOptions.cryptSharedLibPath),r.bypassQueryAnalysis&&(n.bypassQueryAnalysis=r.bypassQueryAnalysis),this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!r.bypassQueryAnalysis,r.extraOptions&&r.extraOptions.cryptSharedLibSearchPaths?n.cryptSharedLibSearchPaths=r.extraOptions.cryptSharedLibSearchPaths:this._bypassMongocryptdAndCryptShared||(n.cryptSharedLibSearchPaths=["$SYSTEM"]);let i=t.getMongoCrypt();if(this._mongocrypt=new i(n),this._contextCounter=0,r.extraOptions&&r.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new yce.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new gce.MongocryptdManager(r.extraOptions);let s={serverSelectionTimeoutMS:1e4};(r.extraOptions==null||typeof r.extraOptions.mongocryptdURI!="string")&&!VI.getDefaultAutoSelectFamily&&(s.family=4),VI.getDefaultAutoSelectFamily&&Object.assign(s,(0,kS.autoSelectSocketOptions)(this._client.s?.options??{})),this._mongocryptdClient=new dce.MongoClient(this._mongocryptdManager.uri,s)}}async init(){if(!(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)){if(!this._mongocryptdManager)throw new $S.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new $S.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");this._mongocryptdManager.bypassSpawn||await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(e){let{message:r}=e;throw r&&(r.match(/timed out after/)||r.match(/ENOTFOUND/))?new $S.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:e}):e}}}async teardown(e){await this._mongocryptdClient?.close(e)}async encrypt(e,r,n={}){if(this._bypassEncryption)return r;let i=Buffer.isBuffer(r)?r:(0,bh.serialize)(r,n),s=this._mongocrypt.makeEncryptionContext(pce.MongoDBCollectionNamespace.fromString(e).db,i);s.id=this._contextCounter++,s.ns=e,s.document=r;let o=new zI.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,kS.autoSelectSocketOptions)(this._client.s.options)});return(0,bh.deserialize)(await o.execute(this,s,n.timeoutContext),{promoteValues:!1,promoteLongs:!1})}async decrypt(e,r={}){let n=this._mongocrypt.makeDecryptionContext(e);return n.id=this._contextCounter++,await new zI.StateMachine({...r,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,kS.autoSelectSocketOptions)(this._client.s.options)}).execute(this,n,r.timeoutContext?.csotEnabled()?r.timeoutContext:void 0)}async askForKMSCredentials(){return await(0,_ce.refreshKMSCredentials)(this._kmsProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}};Kl.AutoEncrypter=qS;WI=fce.kDecorateResult});var GI=y(uy=>{"use strict";f();Object.defineProperty(uy,"__esModule",{value:!0});uy.Encrypter=void 0;var Ece=require("util"),Ace=LS(),wce=Xt(),Sce=bs(),HI=re(),bce=Lu(),Oh=Symbol("internalClient"),jS=class{constructor(e,r,n){if(typeof n.autoEncryption!="object")throw new HI.MongoInvalidArgumentError('Option "autoEncryption" must be specified');this[Oh]=null,this.bypassAutoEncryption=!!n.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,n.maxPoolSize===0&&n.autoEncryption.keyVaultClient==null?n.autoEncryption.keyVaultClient=e:n.autoEncryption.keyVaultClient==null&&(n.autoEncryption.keyVaultClient=this.getInternalClient(e,r,n)),this.bypassAutoEncryption?n.autoEncryption.metadataClient=void 0:n.maxPoolSize===0?n.autoEncryption.metadataClient=e:n.autoEncryption.metadataClient=this.getInternalClient(e,r,n),n.proxyHost&&(n.autoEncryption.proxyOptions={proxyHost:n.proxyHost,proxyPort:n.proxyPort,proxyUsername:n.proxyUsername,proxyPassword:n.proxyPassword}),this.autoEncrypter=new Ace.AutoEncrypter(e,n.autoEncryption)}getInternalClient(e,r,n){let i=this[Oh];if(i==null){let s={};for(let o of[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)])["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(o)||Reflect.set(s,o,Reflect.get(n,o));s.minPoolSize=0,i=new bce.MongoClient(r,s),this[Oh]=i;for(let o of wce.MONGO_CLIENT_EVENTS)for(let u of e.listeners(o))i.on(o,u);e.on("newListener",(o,u)=>{i?.on(o,u)}),this.needsConnecting=!0}return i}async connectInternalClient(){let e=this[Oh];this.needsConnecting&&e!=null&&(this.needsConnecting=!1,await e.connect())}closeCallback(e,r,n){(0,Ece.callbackify)(this.close.bind(this))(e,r,n)}async close(e,r){let n;try{await this.autoEncrypter.teardown(r)}catch(s){n=s}let i=this[Oh];if(i!=null&&e!==i)return await i.close(r);if(n!=null)throw n}static checkForMongoCrypt(){let e=(0,Sce.getMongoDBClientEncryption)();if("kModuleError"in e)throw new HI.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:e.kModuleError,dependencyName:"mongodb-client-encryption"})}};uy.Encrypter=jS});var US=y(ay=>{"use strict";f();Object.defineProperty(ay,"__esModule",{value:!0});ay.ConnectionPoolMetrics=void 0;var Yl=class t{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}markPinned(e){e===t.TXN?this.txnConnections+=1:e===t.CURSOR?this.cursorConnections+=1:this.otherConnections+=1}markUnpinned(e){e===t.TXN?this.txnConnections-=1:e===t.CURSOR?this.cursorConnections-=1:this.otherConnections-=1}info(e){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${e}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}};ay.ConnectionPoolMetrics=Yl;Yl.TXN="txn";Yl.CURSOR="cursor";Yl.OTHER="other"});var Ch=y(Xl=>{"use strict";f();Object.defineProperty(Xl,"__esModule",{value:!0});Xl.ServerDescription=void 0;Xl.parseServerType=KI;Xl.compareTopologyVersion=YI;var Ql=Ye(),Oce=re(),Jl=fe(),or=ai(),Cce=new Set([or.ServerType.RSPrimary,or.ServerType.Standalone,or.ServerType.Mongos,or.ServerType.LoadBalancer]),Tce=new Set([or.ServerType.RSPrimary,or.ServerType.RSSecondary,or.ServerType.Mongos,or.ServerType.Standalone,or.ServerType.LoadBalancer]),VS=class{constructor(e,r,n={}){if(e==null||e==="")throw new Oce.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof e=="string"?Jl.HostAddress.fromString(e).toString():e.toString(),this.type=KI(r,n),this.hosts=r?.hosts?.map(i=>i.toLowerCase())??[],this.passives=r?.passives?.map(i=>i.toLowerCase())??[],this.arbiters=r?.arbiters?.map(i=>i.toLowerCase())??[],this.tags=r?.tags??{},this.minWireVersion=r?.minWireVersion??0,this.maxWireVersion=r?.maxWireVersion??0,this.roundTripTime=n?.roundTripTime??-1,this.minRoundTripTime=n?.minRoundTripTime??0,this.lastUpdateTime=(0,Jl.now)(),this.lastWriteDate=r?.lastWrite?.lastWriteDate??0,this.error=n.error??null,this.error?.stack,this.topologyVersion=this.error?.topologyVersion??r?.topologyVersion??null,this.setName=r?.setName??null,this.setVersion=r?.setVersion??null,this.electionId=r?.electionId??null,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes??null,this.maxMessageSizeBytes=r?.maxMessageSizeBytes??null,this.maxWriteBatchSize=r?.maxWriteBatchSize??null,this.maxBsonObjectSize=r?.maxBsonObjectSize??null,this.primary=r?.primary??null,this.me=r?.me?.toLowerCase()??null,this.$clusterTime=r?.$clusterTime??null,this.iscryptd=!!r?.iscryptd}get hostAddress(){return Jl.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===or.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return Tce.has(this.type)}get isWritable(){return Cce.has(this.type)}get host(){let e=`:${this.port}`.length;return this.address.slice(0,-e)}get port(){let e=this.address.split(":").pop();return e?Number.parseInt(e,10):27017}equals(e){let r=this.topologyVersion===e?.topologyVersion||YI(this.topologyVersion,e?.topologyVersion)===0,n=this.electionId!=null&&e?.electionId!=null?(0,Jl.compareObjectId)(this.electionId,e.electionId)===0:this.electionId===e?.electionId;return e!=null&&e.iscryptd===this.iscryptd&&(0,Jl.errorStrictEqual)(this.error,e.error)&&this.type===e.type&&this.minWireVersion===e.minWireVersion&&(0,Jl.arrayStrictEqual)(this.hosts,e.hosts)&&Dce(this.tags,e.tags)&&this.setName===e.setName&&this.setVersion===e.setVersion&&n&&this.primary===e.primary&&this.logicalSessionTimeoutMinutes===e.logicalSessionTimeoutMinutes&&r}};Xl.ServerDescription=VS;function KI(t,e){return e?.loadBalanced?or.ServerType.LoadBalancer:!t||!t.ok?or.ServerType.Unknown:t.isreplicaset?or.ServerType.RSGhost:t.msg&&t.msg==="isdbgrid"?or.ServerType.Mongos:t.setName?t.hidden?or.ServerType.RSOther:t.isWritablePrimary?or.ServerType.RSPrimary:t.secondary?or.ServerType.RSSecondary:t.arbiterOnly?or.ServerType.RSArbiter:or.ServerType.RSOther:or.ServerType.Standalone}function Dce(t,e){let r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(i=>e[i]===t[i])}function YI(t,e){if(t==null||e==null||!t.processId.equals(e.processId))return-1;let r=typeof t.counter=="bigint"?Ql.Long.fromBigInt(t.counter):Ql.Long.isLong(t.counter)?t.counter:Ql.Long.fromNumber(t.counter),n=typeof e.counter=="bigint"?Ql.Long.fromBigInt(e.counter):Ql.Long.isLong(e.counter)?e.counter:Ql.Long.fromNumber(e.counter);return r.compare(n)}});var HS=y(fy=>{"use strict";f();Object.defineProperty(fy,"__esModule",{value:!0});fy.TopologyDescription=void 0;var Mce=Ye(),ly=ja(),cy=re(),zS=fe(),He=ai(),Qu=Ch(),vce=ly.MIN_SUPPORTED_SERVER_VERSION,Bce=ly.MAX_SUPPORTED_SERVER_VERSION,QI=ly.MIN_SUPPORTED_WIRE_VERSION,JI=ly.MAX_SUPPORTED_WIRE_VERSION,Ice=new Set([He.ServerType.Mongos,He.ServerType.Unknown]),XI=new Set([He.ServerType.Mongos,He.ServerType.Standalone]),ZI=new Set([He.ServerType.RSSecondary,He.ServerType.RSArbiter,He.ServerType.RSOther]),WS=class t{constructor(e,r=null,n=null,i=null,s=null,o=null,u=null){u=u??{},this.type=e??He.TopologyType.Unknown,this.servers=r??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=u.heartbeatFrequencyMS??0,this.localThresholdMS=u.localThresholdMS??15,this.setName=n??null,this.maxElectionId=s??null,this.maxSetVersion=i??null,this.commonWireVersion=o??0;for(let a of this.servers.values())if(!(a.type===He.ServerType.Unknown||a.type===He.ServerType.LoadBalancer)&&(a.minWireVersion>JI&&(this.compatible=!1,this.compatibilityError=`Server at ${a.address} requires wire version ${a.minWireVersion}, but this version of the driver only supports up to ${JI} (MongoDB ${Bce})`),a.maxWireVersion<QI)){this.compatible=!1,this.compatibilityError=`Server at ${a.address} reports wire version ${a.maxWireVersion}, but this version of the driver requires at least ${QI} (MongoDB ${vce}).`;break}this.logicalSessionTimeoutMinutes=null;for(let[,a]of this.servers)if(a.isReadable){if(a.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=a.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,a.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(e,r=0){let n=e.hostnames(),i=new Set(this.servers.keys()),s=new Set(n),o=new Set;for(let a of i)s.delete(a),n.has(a)||o.add(a);if(s.size===0&&o.size===0)return this;let u=new Map(this.servers);for(let a of o)u.delete(a);if(s.size>0){if(r===0)for(let a of s)u.set(a,new Qu.ServerDescription(a));else if(u.size<r){let a=(0,zS.shuffle)(s,r-u.size);for(let c of a)u.set(c,new Qu.ServerDescription(c))}}return new t(this.type,u,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(e){let r=e.address,{type:n,setName:i,maxSetVersion:s,maxElectionId:o,commonWireVersion:u}=this,a=e.type,c=new Map(this.servers);if(e.maxWireVersion!==0&&(u==null?u=e.maxWireVersion:u=Math.min(u,e.maxWireVersion)),typeof e.setName=="string"&&typeof i=="string"&&e.setName!==i&&(n===He.TopologyType.Single?e=new Qu.ServerDescription(r):c.delete(r)),c.set(r,e),n===He.TopologyType.Single)return new t(He.TopologyType.Single,c,i,s,o,u,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if(n===He.TopologyType.Unknown&&(a===He.ServerType.Standalone&&this.servers.size!==1?c.delete(r):n=Pce(a)),n===He.TopologyType.Sharded&&(Ice.has(a)||c.delete(r)),n===He.TopologyType.ReplicaSetNoPrimary){if(XI.has(a)&&c.delete(r),a===He.ServerType.RSPrimary){let l=eP(c,e,i,s,o);n=l[0],i=l[1],s=l[2],o=l[3]}else if(ZI.has(a)){let l=Rce(c,e,i);n=l[0],i=l[1]}}if(n===He.TopologyType.ReplicaSetWithPrimary)if(XI.has(a))c.delete(r),n=lc(c);else if(a===He.ServerType.RSPrimary){let l=eP(c,e,i,s,o);n=l[0],i=l[1],s=l[2],o=l[3]}else ZI.has(a)?n=Nce(c,e,i):n=lc(c);return new t(n,c,i,s,o,u,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){let e=Array.from(this.servers.values()).filter(r=>r.error);return e.length>0?e[0].error:null}get hasKnownServers(){return Array.from(this.servers.values()).some(e=>e.type!==He.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some(e=>e.isDataBearing)}hasServer(e){return this.servers.has(e)}toJSON(){return Mce.EJSON.serialize(this)}};fy.TopologyDescription=WS;function Pce(t){switch(t){case He.ServerType.Standalone:return He.TopologyType.Single;case He.ServerType.Mongos:return He.TopologyType.Sharded;case He.ServerType.RSPrimary:return He.TopologyType.ReplicaSetWithPrimary;case He.ServerType.RSOther:case He.ServerType.RSSecondary:return He.TopologyType.ReplicaSetNoPrimary;default:return He.TopologyType.Unknown}}function eP(t,e,r=null,n=null,i=null){if(r=r||e.setName,r!==e.setName)return t.delete(e.address),[lc(t),r,n,i];if(e.maxWireVersion>=17){let u=(0,zS.compareObjectId)(i,e.electionId),a=u===0,c=u===-1,l=(n??-1)<=(e.setVersion??-1);if(c||a&&l)i=e.electionId,n=e.setVersion;else return t.set(e.address,new Qu.ServerDescription(e.address,void 0,{error:new cy.MongoStalePrimaryError(e,n,i)})),[lc(t),r,n,i]}else{let u=e.electionId?e.electionId:null;if(e.setVersion&&u){if(n&&i&&(n>e.setVersion||(0,zS.compareObjectId)(i,u)>0))return t.set(e.address,new Qu.ServerDescription(e.address,void 0,{error:new cy.MongoStalePrimaryError(e,n,i)})),[lc(t),r,n,i];i=e.electionId}e.setVersion!=null&&(n==null||e.setVersion>n)&&(n=e.setVersion)}for(let[u,a]of t)if(a.type===He.ServerType.RSPrimary&&a.address!==e.address){t.set(u,new Qu.ServerDescription(a.address,void 0,{error:new cy.MongoStalePrimaryError(e,n,i)}));break}e.allHosts.forEach(u=>{t.has(u)||t.set(u,new Qu.ServerDescription(u))});let s=Array.from(t.keys()),o=e.allHosts;return s.filter(u=>o.indexOf(u)===-1).forEach(u=>{t.delete(u)}),[lc(t),r,n,i]}function Nce(t,e,r=null){if(r==null)throw new cy.MongoRuntimeError('Argument "setName" is required if connected to a replica set');return(r!==e.setName||e.me&&e.address!==e.me)&&t.delete(e.address),lc(t)}function Rce(t,e,r=null){let n=He.TopologyType.ReplicaSetNoPrimary;return r=r??e.setName,r!==e.setName?(t.delete(e.address),[n,r]):(e.allHosts.forEach(i=>{t.has(i)||t.set(i,new Qu.ServerDescription(i))}),e.me&&e.address!==e.me&&t.delete(e.address),[n,r])}function lc(t){for(let e of t.values())if(e.type===He.ServerType.RSPrimary)return He.TopologyType.ReplicaSetWithPrimary;return He.TopologyType.ReplicaSetNoPrimary}});var KS=y(hy=>{"use strict";f();Object.defineProperty(hy,"__esModule",{value:!0});hy.getReadPreference=$ce;hy.isSharded=kce;var xce=re(),GS=Sr(),tP=ai(),Fce=HS();function $ce(t){let e=t?.readPreference??GS.ReadPreference.primary;if(typeof e=="string"&&(e=GS.ReadPreference.fromString(e)),!(e instanceof GS.ReadPreference))throw new xce.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return e}function kce(t){return t==null?!1:t.description&&t.description.type===tP.ServerType.Mongos?!0:t.description&&t.description instanceof Fce.TopologyDescription?Array.from(t.description.servers.values()).some(r=>r.type===tP.ServerType.Mongos):!1}});var QS=y(Ne=>{"use strict";f();Object.defineProperty(Ne,"__esModule",{value:!0});Ne.Transaction=Ne.TxnState=void 0;Ne.isTransactionCommand=Wce;var rP=re(),qce=Bi(),Lce=Sr(),jce=Qr();Ne.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var Uce={[Ne.TxnState.NO_TRANSACTION]:[Ne.TxnState.NO_TRANSACTION,Ne.TxnState.STARTING_TRANSACTION],[Ne.TxnState.STARTING_TRANSACTION]:[Ne.TxnState.TRANSACTION_IN_PROGRESS,Ne.TxnState.TRANSACTION_COMMITTED,Ne.TxnState.TRANSACTION_COMMITTED_EMPTY,Ne.TxnState.TRANSACTION_ABORTED],[Ne.TxnState.TRANSACTION_IN_PROGRESS]:[Ne.TxnState.TRANSACTION_IN_PROGRESS,Ne.TxnState.TRANSACTION_COMMITTED,Ne.TxnState.TRANSACTION_ABORTED],[Ne.TxnState.TRANSACTION_COMMITTED]:[Ne.TxnState.TRANSACTION_COMMITTED,Ne.TxnState.TRANSACTION_COMMITTED_EMPTY,Ne.TxnState.STARTING_TRANSACTION,Ne.TxnState.NO_TRANSACTION],[Ne.TxnState.TRANSACTION_ABORTED]:[Ne.TxnState.STARTING_TRANSACTION,Ne.TxnState.NO_TRANSACTION],[Ne.TxnState.TRANSACTION_COMMITTED_EMPTY]:[Ne.TxnState.TRANSACTION_COMMITTED_EMPTY,Ne.TxnState.NO_TRANSACTION]},Vce=new Set([Ne.TxnState.STARTING_TRANSACTION,Ne.TxnState.TRANSACTION_IN_PROGRESS]),zce=new Set([Ne.TxnState.TRANSACTION_COMMITTED,Ne.TxnState.TRANSACTION_COMMITTED_EMPTY,Ne.TxnState.TRANSACTION_ABORTED]),YS=class{constructor(e){e=e??{},this.state=Ne.TxnState.NO_TRANSACTION,this.options={};let r=jce.WriteConcern.fromOptions(e);if(r){if(r.w===0)throw new rP.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=r}e.readConcern&&(this.options.readConcern=qce.ReadConcern.fromOptions(e)),e.readPreference&&(this.options.readPreference=Lce.ReadPreference.fromOptions(e)),e.maxCommitTimeMS&&(this.options.maxTimeMS=e.maxCommitTimeMS),this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===Ne.TxnState.STARTING_TRANSACTION}get isActive(){return Vce.has(this.state)}get isCommitted(){return zce.has(this.state)}transition(e){let r=Uce[this.state];if(r&&r.includes(e)){this.state=e,(this.state===Ne.TxnState.NO_TRANSACTION||this.state===Ne.TxnState.STARTING_TRANSACTION||this.state===Ne.TxnState.TRANSACTION_ABORTED)&&this.unpinServer();return}throw new rP.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${e}]`)}pinServer(e){this.isActive&&(this._pinnedServer=e)}unpinServer(){this._pinnedServer=void 0}};Ne.Transaction=YS;function Wce(t){return!!(t.commitTransaction||t.abortTransaction)}});var n1=y(Ds=>{"use strict";f();var sP;Object.defineProperty(Ds,"__esModule",{value:!0});Ds.ServerSessionPool=Ds.ServerSession=Ds.ClientSession=void 0;Ds.maybeClearPinnedConnection=my;Ds.applySession=Xce;Ds.updateSessionFromResponse=Zce;var py=Ye(),yy=US(),Hce=KS(),oP=Xt(),Se=re(),Gce=fi(),dy=Zr(),JS=bl(),Kce=Bi(),XS=Sr(),Yce=Dl(),e4=ai(),ZS=Jr(),dt=QS(),jn=fe(),Zl=Qr(),Qce=8,e1=Symbol("serverSession"),gy=Symbol("snapshotTime"),r1=Symbol("snapshotEnabled"),t1=Symbol("pinnedConnection"),_y=Symbol("txnNumberIncrement"),Ey=class t extends Gce.TypedEventEmitter{constructor(e,r,n,i){if(super(),this[sP]=!1,this.timeoutContext=null,e==null)throw new Se.MongoRuntimeError("ClientSession requires a MongoClient");if(r==null||!(r instanceof Ay))throw new Se.MongoRuntimeError("ClientSession requires a ServerSessionPool");if(n=n??{},n.snapshot===!0&&(this[r1]=!0,n.causalConsistency===!0))throw new Se.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive');this.client=e,this.sessionPool=r,this.hasEnded=!1,this.clientOptions=i,this.timeoutMS=n.defaultTimeoutMS??e.s.options?.timeoutMS,this.explicit=!!n.explicit,this[e1]=this.explicit?this.sessionPool.acquire():null,this[_y]=0;let s=this.explicit&&n.snapshot!==!0;this.supports={causalConsistency:n.causalConsistency??s},this.clusterTime=n.initialClusterTime,this.operationTime=void 0,this.owner=n.owner,this.defaultTransactionOptions={...n.defaultTransactionOptions},this.transaction=new dt.Transaction}get id(){return this[e1]?.id}get serverSession(){let e=this[e1];if(e==null){if(this.explicit)throw new Se.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new Se.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");e=this.sessionPool.acquire(),this[e1]=e}return e}get snapshotEnabled(){return this[r1]}get loadBalanced(){return this.client.topology?.description.type===e4.TopologyType.LoadBalanced}get pinnedConnection(){return this[t1]}pin(e){if(this[t1])throw TypeError("Cannot pin multiple connections to the same session");this[t1]=e,e.emit(oP.PINNED,this.inTransaction()?yy.ConnectionPoolMetrics.TXN:yy.ConnectionPoolMetrics.CURSOR)}unpin(e){if(this.loadBalanced)return my(this,e);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this[t1]:this.transaction.isPinned}async endSession(e){try{this.inTransaction()&&await this.abortTransaction({...e,throwTimeout:!0})}catch(r){if(r.name==="MongoOperationTimeoutError")throw r;(0,jn.squashError)(r)}finally{if(!this.hasEnded){let r=this[e1];r!=null&&(this.sessionPool.release(r),this[e1]=new Th(r)),this.hasEnded=!0,this.emit("ended",this)}my(this,{force:!0,...e})}}async asyncDispose(){await this.endSession({force:!0})}advanceOperationTime(e){if(this.operationTime==null){this.operationTime=e;return}e.greaterThan(this.operationTime)&&(this.operationTime=e)}advanceClusterTime(e){if(!e||typeof e!="object")throw new Se.MongoInvalidArgumentError("input cluster time must be an object");if(!e.clusterTime||e.clusterTime._bsontype!=="Timestamp")throw new Se.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!e.signature||e.signature.hash?._bsontype!=="Binary"||typeof e.signature.keyId!="bigint"&&typeof e.signature.keyId!="number"&&e.signature.keyId?._bsontype!=="Long")throw new Se.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');(0,e4._advanceClusterTime)(this,e)}equals(e){return!(e instanceof t)||this.id==null||e.id==null?!1:jn.ByteUtils.equals(this.id.id.buffer,e.id.id.buffer)}incrementTransactionNumber(){this[_y]+=1}inTransaction(){return this.transaction.isActive}startTransaction(e){if(this[r1])throw new Se.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new Se.MongoTransactionError("Transaction already in progress");this.isPinned&&this.transaction.isCommitted&&this.unpin();let r=(0,jn.maxWireVersion)(this.client.topology);if((0,Hce.isSharded)(this.client.topology)&&r!=null&&r<Qce)throw new Se.MongoCompatibilityError("Transactions are not supported on sharded clusters in MongoDB < 4.2.");this.commitAttempted=!1,this.incrementTransactionNumber(),this.transaction=new dt.Transaction({readConcern:e?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:e?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:e?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:e?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(dt.TxnState.STARTING_TRANSACTION)}async commitTransaction(e){if(this.transaction.state===dt.TxnState.NO_TRANSACTION)throw new Se.MongoTransactionError("No transaction started");if(this.transaction.state===dt.TxnState.STARTING_TRANSACTION||this.transaction.state===dt.TxnState.TRANSACTION_COMMITTED_EMPTY){this.transaction.transition(dt.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(this.transaction.state===dt.TxnState.TRANSACTION_ABORTED)throw new Se.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction");let r={commitTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,i=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(i!=null)if(n==null&&this.timeoutContext==null)Zl.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...i});else{let u=Object.keys(i);(u.length>2||!u.includes("wtimeoutMS")&&!u.includes("wTimeoutMS"))&&Zl.WriteConcern.apply(r,{...i,wtimeoutMS:void 0})}(this.transaction.state===dt.TxnState.TRANSACTION_COMMITTED||this.commitAttempted)&&(n==null&&this.timeoutContext==null?Zl.WriteConcern.apply(r,{wtimeoutMS:1e4,...i,w:"majority"}):Zl.WriteConcern.apply(r,{w:"majority",...i,wtimeoutMS:void 0})),typeof this.transaction.options.maxTimeMS=="number"&&(r.maxTimeMS=this.transaction.options.maxTimeMS),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let s=new JS.RunAdminCommandOperation(r,{session:this,readPreference:XS.ReadPreference.primary,bypassPinningCheck:!0}),o=this.timeoutContext??(typeof n=="number"?ZS.TimeoutContext.create({serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS,timeoutMS:n}):null);try{await(0,dy.executeOperation)(this.client,s,o),this.commitAttempted=void 0;return}catch(u){if(this.commitAttempted=!0,u instanceof Se.MongoError&&(0,Se.isRetryableWriteError)(u)){Zl.WriteConcern.apply(r,{wtimeoutMS:1e4,...i,w:"majority"}),this.unpin({force:!0});try{await(0,dy.executeOperation)(this.client,new JS.RunAdminCommandOperation(r,{session:this,readPreference:XS.ReadPreference.primary,bypassPinningCheck:!0}),o);return}catch(a){throw iP(a)&&a.addErrorLabel(Se.MongoErrorLabel.UnknownTransactionCommitResult),nP(a)&&this.unpin({error:a}),a}}throw iP(u)&&u.addErrorLabel(Se.MongoErrorLabel.UnknownTransactionCommitResult),nP(u)&&this.unpin({error:u}),u}finally{this.transaction.transition(dt.TxnState.TRANSACTION_COMMITTED)}}async abortTransaction(e){if(this.transaction.state===dt.TxnState.NO_TRANSACTION)throw new Se.MongoTransactionError("No transaction started");if(this.transaction.state===dt.TxnState.STARTING_TRANSACTION){this.transaction.transition(dt.TxnState.TRANSACTION_ABORTED);return}if(this.transaction.state===dt.TxnState.TRANSACTION_ABORTED)throw new Se.MongoTransactionError("Cannot call abortTransaction twice");if(this.transaction.state===dt.TxnState.TRANSACTION_COMMITTED||this.transaction.state===dt.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new Se.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction");let r={abortTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:this.timeoutContext?.csotEnabled()?this.timeoutContext.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,i=n!=null?ZS.TimeoutContext.create({timeoutMS:n,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null,s=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;s!=null&&n==null&&Zl.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...s}),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let o=new JS.RunAdminCommandOperation(r,{session:this,readPreference:XS.ReadPreference.primary,bypassPinningCheck:!0});try{await(0,dy.executeOperation)(this.client,o,i),this.unpin();return}catch(u){if(this.unpin(),u.name==="MongoRuntimeError"||e?.throwTimeout&&u.name==="MongoOperationTimeoutError")throw u;if(u instanceof Se.MongoError&&(0,Se.isRetryableWriteError)(u))try{await(0,dy.executeOperation)(this.client,o,i);return}catch(a){if(a.name==="MongoRuntimeError"||e?.throwTimeout&&a.name==="MongoOperationTimeoutError")throw a}}finally{this.transaction.transition(dt.TxnState.TRANSACTION_ABORTED),this.loadBalanced&&my(this,{force:!1})}}toBSON(){throw new Se.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(e,r){let i=r?.timeoutMS??this.timeoutMS??null;this.timeoutContext=i!=null?ZS.TimeoutContext.create({timeoutMS:i,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null;let s=this.timeoutContext?.csotEnabled()?this.timeoutContext.start:(0,jn.now)(),o=!1,u;try{for(;!o;){this.startTransaction(r);try{let a=e(this);if(!(0,jn.isPromiseLike)(a))throw new Se.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise");if(u=await a,this.transaction.state===dt.TxnState.NO_TRANSACTION||this.transaction.state===dt.TxnState.TRANSACTION_COMMITTED||this.transaction.state===dt.TxnState.TRANSACTION_ABORTED)return u}catch(a){if(!(a instanceof Se.MongoError)||a instanceof Se.MongoInvalidArgumentError)throw await this.abortTransaction(),a;if((this.transaction.state===dt.TxnState.STARTING_TRANSACTION||this.transaction.state===dt.TxnState.TRANSACTION_IN_PROGRESS)&&await this.abortTransaction(),a.hasErrorLabel(Se.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,jn.now)()-s<12e4))continue;throw a}for(;!o;)try{await this.commitTransaction(),o=!0}catch(a){if(!wy(a)&&a.hasErrorLabel(Se.MongoErrorLabel.UnknownTransactionCommitResult)&&(this.timeoutContext!=null||(0,jn.now)()-s<12e4))continue;if(a.hasErrorLabel(Se.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,jn.now)()-s<12e4))break;throw a}}return u}finally{this.timeoutContext=null}}};Ds.ClientSession=Ey;sP=r1;(0,Yce.configureResourceManagement)(Ey.prototype);var Jce=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function nP(t){if(t instanceof Se.MongoError){if((0,Se.isRetryableWriteError)(t)||t instanceof Se.MongoWriteConcernError||wy(t)){if(uP(t))return!0}else if(t.hasErrorLabel(Se.MongoErrorLabel.TransientTransactionError))return!0}return!1}function iP(t){let e=(0,Se.isRetryableWriteError)(t);return e||=t instanceof Se.MongoWriteConcernError,e||=wy(t),e&&=uP(t),e}function uP(t){let e=t instanceof Se.MongoServerError&&t.codeName&&Jce.has(t.codeName);return wy(t)||!e&&t.code!==Se.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&t.code!==Se.MONGODB_ERROR_CODES.UnknownReplWriteConcern}function my(t,e){let r=t[t1],n=e?.error;if(t.inTransaction()&&n&&n instanceof Se.MongoError&&n.hasErrorLabel(Se.MongoErrorLabel.TransientTransactionError))return;let i=t.client.topology;if(r&&i!=null){let o=Array.from(i.s.servers.values())[0];(e?.error==null||e?.force)&&(o.pool.checkIn(r),t[t1]=void 0,r.emit(oP.UNPINNED,t.transaction.state!==dt.TxnState.NO_TRANSACTION?yy.ConnectionPoolMetrics.TXN:yy.ConnectionPoolMetrics.CURSOR),e?.forceClear&&o.pool.clear({serviceId:r.serviceId}))}}function wy(t){return t==null||!(t instanceof Se.MongoServerError)?!1:t.code===Se.MONGODB_ERROR_CODES.MaxTimeMSExpired||t.writeConcernError?.code===Se.MONGODB_ERROR_CODES.MaxTimeMSExpired}var Th=class{constructor(e){if(e!=null){let r=Buffer.allocUnsafe(16);r.set(e.id.id.buffer),this.id={id:new py.Binary(r,e.id.id.sub_type)},this.lastUse=e.lastUse,this.txnNumber=e.txnNumber,this.isDirty=e.isDirty;return}this.id={id:new py.Binary((0,jn.uuidV4)(),py.Binary.SUBTYPE_UUID)},this.lastUse=(0,jn.now)(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(e){return Math.round((0,jn.calculateDurationInMs)(this.lastUse)%864e5%36e5/6e4)>e-1}};Ds.ServerSession=Th;var Ay=class{constructor(e){if(e==null)throw new Se.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=e,this.sessions=new jn.List}acquire(){let e=this.client.topology?.logicalSessionTimeoutMinutes??10,r=null;for(;this.sessions.length>0;){let n=this.sessions.shift();if(n!=null&&(this.client.topology?.loadBalanced||!n.hasTimedOut(e))){r=n;break}}return r==null&&(r=new Th),r}release(e){let r=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!r&&this.sessions.unshift(e),!!r&&(this.sessions.prune(n=>n.hasTimedOut(r)),!e.hasTimedOut(r))){if(e.isDirty)return;this.sessions.unshift(e)}}};Ds.ServerSessionPool=Ay;function Xce(t,e,r){if(t.hasEnded)return new Se.MongoExpiredSessionError;let n=t.serverSession;if(n==null)return new Se.MongoRuntimeError("Unable to acquire server session");if(r.writeConcern?.w===0)return t&&t.explicit?new Se.MongoAPIError("Cannot have explicit session with unacknowledged writes"):void 0;n.lastUse=(0,jn.now)(),e.lsid=n.id;let i=t.inTransaction()||(0,dt.isTransactionCommand)(e);if((!!r.willRetryWrite||i)&&(n.txnNumber+=t[_y],t[_y]=0,e.txnNumber=py.Long.fromNumber(n.txnNumber)),!i){t.transaction.state!==dt.TxnState.NO_TRANSACTION&&t.transaction.transition(dt.TxnState.NO_TRANSACTION),t.supports.causalConsistency&&t.operationTime&&(0,jn.commandSupportsReadConcern)(e)?(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime})):t[r1]&&(e.readConcern=e.readConcern||{level:Kce.ReadConcernLevel.snapshot},t[gy]!=null&&Object.assign(e.readConcern,{atClusterTime:t[gy]}));return}if(e.autocommit=!1,t.transaction.state===dt.TxnState.STARTING_TRANSACTION){t.transaction.transition(dt.TxnState.TRANSACTION_IN_PROGRESS),e.startTransaction=!0;let o=t.transaction.options.readConcern||t?.clientOptions?.readConcern;o&&(e.readConcern=o),t.supports.causalConsistency&&t.operationTime&&(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime}))}}function Zce(t,e){if(e.$clusterTime&&(0,e4._advanceClusterTime)(t,e.$clusterTime),e.operationTime&&t&&t.supports.causalConsistency&&t.advanceOperationTime(e.operationTime),e.recoveryToken&&t&&t.inTransaction()&&(t.transaction._recoveryToken=e.recoveryToken),t?.[r1]&&t[gy]==null){let r=e.atClusterTime;r&&(t[gy]=r)}}});var a4=y(Ui=>{"use strict";f();Object.defineProperty(Ui,"__esModule",{value:!0});Ui.SENSITIVE_COMMANDS=Ui.CommandFailedEvent=Ui.CommandSucceededEvent=Ui.CommandStartedEvent=void 0;var Dh=Xt(),Ms=fe(),Sy=ph(),t4=class{constructor(e,r,n){this.name=Dh.COMMAND_STARTED;let i=o4(r),s=i4(i),{address:o,connectionId:u,serviceId:a}=u4(e);Ui.SENSITIVE_COMMANDS.has(s)&&(this.commandObj={},this.commandObj[s]=!0),this.address=o,this.connectionId=u,this.serviceId=a,this.requestId=r.requestId,this.databaseName=r.databaseName,this.commandName=s,this.command=s4(s,i,i),this.serverConnectionId=n}get hasServiceId(){return!!this.serviceId}};Ui.CommandStartedEvent=t4;var r4=class{constructor(e,r,n,i,s){this.name=Dh.COMMAND_SUCCEEDED;let o=o4(r),u=i4(o),{address:a,connectionId:c,serviceId:l}=u4(e);this.address=a,this.connectionId=c,this.serviceId=l,this.requestId=r.requestId,this.commandName=u,this.duration=(0,Ms.calculateDurationInMs)(i),this.reply=s4(u,o,ile(r,n)),this.serverConnectionId=s}get hasServiceId(){return!!this.serviceId}};Ui.CommandSucceededEvent=r4;var n4=class{constructor(e,r,n,i,s){this.name=Dh.COMMAND_FAILED;let o=o4(r),u=i4(o),{address:a,connectionId:c,serviceId:l}=u4(e);this.address=a,this.connectionId=c,this.serviceId=l,this.requestId=r.requestId,this.commandName=u,this.duration=(0,Ms.calculateDurationInMs)(i),this.failure=s4(u,o,n),this.serverConnectionId=s}get hasServiceId(){return!!this.serviceId}};Ui.CommandFailedEvent=n4;Ui.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var ele=new Set(["hello",Dh.LEGACY_HELLO_COMMAND,Dh.LEGACY_HELLO_COMMAND_CAMEL_CASE]),i4=t=>Object.keys(t)[0],tle=t=>t.ns,rle=t=>t.ns.split(".")[1],s4=(t,e,r)=>Ui.SENSITIVE_COMMANDS.has(t)||ele.has(t)&&e.speculativeAuthenticate?{}:r,aP={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},cP={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"},nle=["tailable","oplogReplay","noCursorTimeout","awaitData","partial","exhaust"];function o4(t){if(t instanceof Sy.OpMsgRequest){let n=(0,Ms.deepCopy)(t.command);return n.ops instanceof Sy.DocumentSequence&&(n.ops=n.ops.documents),n.nsInfo instanceof Sy.DocumentSequence&&(n.nsInfo=n.nsInfo.documents),n}if(t.query?.$query){let n;return t.ns==="admin.$cmd"?n=Object.assign({},t.query.$query):(n={find:rle(t)},Object.keys(aP).forEach(i=>{t.query[i]!=null&&(n[aP[i]]=(0,Ms.deepCopy)(t.query[i]))})),Object.keys(cP).forEach(i=>{let s=i;t[s]!=null&&(n[cP[s]]=(0,Ms.deepCopy)(t[s]))}),nle.forEach(i=>{t[i]&&(n[i]=t[i])}),t.pre32Limit!=null&&(n.limit=t.pre32Limit),t.query.$explain?{explain:n}:n}let e={},r={};if(t.query){for(let n in t.query)e[n]=(0,Ms.deepCopy)(t.query[n]);r.query=e}for(let n in t)n!=="query"&&(r[n]=(0,Ms.deepCopy)(t[n]));return t.query?e:r}function ile(t,e){return e&&(t instanceof Sy.OpMsgRequest?(0,Ms.deepCopy)(e.result?e.result:e):t.query&&t.query.$query!=null?{ok:1,cursor:{id:(0,Ms.deepCopy)(e.cursorId),ns:tle(t),firstBatch:(0,Ms.deepCopy)(e.documents)}}:(0,Ms.deepCopy)(e.result?e.result:e))}function u4(t){let e;return"id"in t&&(e=t.id),{address:t.address,serviceId:t.serviceId,connectionId:e}}});var lP=y(by=>{"use strict";f();Object.defineProperty(by,"__esModule",{value:!0});by.StreamDescription=void 0;var sle=Ye(),ole=ai(),ule=Ch(),ale=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"],c4=class{constructor(e,r){this.hello=null,this.address=e,this.type=ole.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48e6,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes,this.loadBalanced=!!r?.loadBalanced,this.compressors=r&&r.compressors&&Array.isArray(r.compressors)?r.compressors:[],this.serverConnectionId=null}receiveResponse(e){if(e!=null){this.hello=e,this.type=(0,ule.parseServerType)(e),"connectionId"in e?this.serverConnectionId=this.parseServerConnectionID(e.connectionId):this.serverConnectionId=null;for(let r of ale)e[r]!=null&&(this[r]=e[r]),"__nodejs_mock_server__"in e&&(this.__nodejs_mock_server__=e.__nodejs_mock_server__);e.compression&&(this.compressor=this.compressors.filter(r=>e.compression?.includes(r))[0])}}parseServerConnectionID(e){return sle.Long.isLong(e)?e.toBigInt():BigInt(e)}};by.StreamDescription=c4});var fP=y(f4=>{"use strict";f();Object.defineProperty(f4,"__esModule",{value:!0});f4.onData=cle;var l4=fe();function cle(t,{timeoutContext:e}){let r=new l4.List,n=new l4.List,i=null,s=!1,o={next(){let h=r.shift();if(h!=null)return Promise.resolve({value:h,done:!1});if(i!=null){let g=Promise.reject(i);return i=null,g}if(s)return l();let{promise:d,resolve:p,reject:m}=(0,l4.promiseWithResolvers)();return n.push({resolve:p,reject:m}),d},return(){return l()},throw(h){return c(h),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this}};t.on("data",a),t.on("error",c);let u=e?.timeoutForSocketRead;return u?.throwIfExpired(),u?.then(void 0,c),o;function a(h){let d=n.shift();d!=null?d.resolve({value:h,done:!1}):r.push(h)}function c(h){let d=n.shift();d!=null?d.reject(h):i=h,l()}function l(){t.off("data",a),t.off("error",c),s=!0,u?.clear();let h={value:void 0,done:s};for(let d of n)d.resolve(h);return Promise.resolve(h)}}});var Ty=y(zo=>{"use strict";f();Object.defineProperty(zo,"__esModule",{value:!0});zo.CryptoConnection=zo.SizedMessageTransform=zo.Connection=void 0;zo.hasSessionSupport=_le;var lle=require("stream"),mP=require("timers"),fle=Ye(),Ju=Xt(),Vt=re(),hP=Ha(),hle=fi(),dle=Sr(),ple=ai(),dP=n1(),pP=Jr(),Vi=fe(),h4=a4(),Oy=ph(),mle=lP(),yle=mh(),gle=fP(),Mh=gs(),d4=KS();function _le(t){return t.description.logicalSessionTimeoutMinutes!=null}function Ele(t,e){if(e.proxyHost)return e.hostAddress.toString();let{remoteAddress:r,remotePort:n}=t;return typeof r=="string"&&typeof n=="number"?Vi.HostAddress.fromHostPort(r,n).toString():(0,Vi.uuidV4)().toString("hex")}var vs=class t extends hle.TypedEventEmitter{constructor(e,r){super(),this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.socket=e,this.id=r.id,this.address=Ele(e,r),this.socketTimeoutMS=r.socketTimeoutMS??0,this.monitorCommands=r.monitorCommands,this.serverApi=r.serverApi,this.mongoLogger=r.mongoLogger,this.established=!1,this.description=new mle.StreamDescription(this.address,r),this.generation=r.generation,this.lastUseTime=(0,Vi.now)(),this.messageStream=this.socket.on("error",this.onError.bind(this)).pipe(new Cy({connection:this})).on("error",this.onError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this)),this.messageStream.pause()}get hello(){return this.description.hello}set hello(e){this.description.receiveResponse(e),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return(0,Vi.calculateDurationInMs)(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&(0,Vi.maxWireVersion)(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(hP.MongoLoggableComponent.COMMAND,hP.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=(0,Vi.now)()}onError(e){this.cleanup(e)}onClose(){let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new Vt.MongoNetworkError(e))}onTimeout(){this.delayedTimeoutId=(0,mP.setTimeout)(()=>{let e=`connection ${this.id} to ${this.address} timed out`,r=this.hello==null;this.cleanup(new Vt.MongoNetworkTimeoutError(e,{beforeHandshake:r}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners(t.PINNED),this.removeAllListeners(t.UNPINNED);let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new Vt.MongoNetworkError(e))}cleanup(e){this.closed||(this.socket.destroy(),this.error=e,this.dataEvents?.throw(e).then(void 0,Vi.squashError),this.closed=!0,this.emit(t.CLOSE))}prepareCommand(e,r,n){let i={...r},s=(0,d4.getReadPreference)(n),o=n?.session,u=this.clusterTime;if(this.serverApi){let{version:l,strict:h,deprecationErrors:d}=this.serverApi;i.apiVersion=l,h!=null&&(i.apiStrict=h),d!=null&&(i.apiDeprecationErrors=d)}if(this.hasSessionSupport&&o){o.clusterTime&&u&&o.clusterTime.clusterTime.greaterThan(u.clusterTime)&&(u=o.clusterTime);let l=(0,dP.applySession)(o,i,n);if(l)throw l}else if(o?.explicit)throw new Vt.MongoCompatibilityError("Current topology does not support sessions");u&&(i.$clusterTime=u),this.description.type!==ple.ServerType.Standalone&&(!(0,d4.isSharded)(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&n.directConnection===!0&&s?.mode==="primary"?i.$readPreference=dle.ReadPreference.primaryPreferred.toJSON():(0,d4.isSharded)(this)&&!this.supportsOpMsg&&s?.mode!=="primary"?i={$query:i,$readPreference:s.toJSON()}:s?.mode!=="primary"&&(i.$readPreference=s.toJSON()));let a={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:s.secondaryOk(),...n};return n.timeoutContext?.addMaxTimeMSToCommand(i,n),this.supportsOpMsg?new Oy.OpMsgRequest(e,i,a):new Oy.OpQueryRequest(e,i,a)}async*sendWire(e,r,n){this.throwIfAborted();let i=r.socketTimeoutMS??r?.timeoutContext?.getSocketTimeoutMS()??this.socketTimeoutMS;this.socket.setTimeout(i);try{if(await this.writeCommand(e,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel,timeoutContext:r.timeoutContext}),r.noResponse||e.moreToCome){yield Mh.MongoDBResponse.empty;return}if(this.throwIfAborted(),r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new Vt.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");for await(let s of this.readMany({timeoutContext:r.timeoutContext})){this.socket.setTimeout(0);let o=s.parse();yield(n??Mh.MongoDBResponse).make(o),this.throwIfAborted(),this.socket.setTimeout(i)}}finally{this.socket.setTimeout(0)}}async*sendCommand(e,r,n,i){let s=this.prepareCommand(e.db,r,n),o=0;this.shouldEmitAndLogCommand&&(o=(0,Vi.now)(),this.emitAndLogCommand(this.monitorCommands,t.COMMAND_STARTED,s.databaseName,this.established,new h4.CommandStartedEvent(this,s,this.description.serverConnectionId)));let u=n.documentsReturnedIn==null||!n.raw?n:{...n,raw:!1,fieldsAsRaw:{[n.documentsReturnedIn]:!0}},a,c;try{this.throwIfAborted();for await(a of this.sendWire(s,n,i)){if(c=void 0,n.session!=null&&(0,dP.updateSessionFromResponse)(n.session,a),a.$clusterTime&&(this.clusterTime=a.$clusterTime,this.emit(t.CLUSTER_TIME_RECEIVED,a.$clusterTime)),a.ok===0)throw n.timeoutContext?.csotEnabled()&&a.isMaxTimeExpiredError?new Vt.MongoOperationTimeoutError("Server reported a timeout error",{cause:new Vt.MongoServerError(c??=a.toObject(u))}):new Vt.MongoServerError(c??=a.toObject(u));this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_SUCCEEDED,s.databaseName,this.established,new h4.CommandSucceededEvent(this,s,n.noResponse?void 0:s.moreToCome?{ok:1}:c??=a.toObject(u),o,this.description.serverConnectionId)),i==null?yield c??=a.toObject(u):yield a,this.throwIfAborted()}}catch(l){throw this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_FAILED,s.databaseName,this.established,new h4.CommandFailedEvent(this,s,l,o,this.description.serverConnectionId)),l}}async command(e,r,n={},i){this.throwIfAborted();for await(let s of this.sendCommand(e,r,n,i)){if(n.timeoutContext?.csotEnabled()){if(Mh.MongoDBResponse.is(s)){if(s.isMaxTimeExpiredError)throw new Vt.MongoOperationTimeoutError("Server reported a timeout error",{cause:new Vt.MongoServerError(s.toObject())})}else if(Array.isArray(s?.writeErrors)&&s.writeErrors.some(o=>o?.code===Vt.MONGODB_ERROR_CODES.MaxTimeMSExpired)||s?.writeConcernError?.code===Vt.MONGODB_ERROR_CODES.MaxTimeMSExpired)throw new Vt.MongoOperationTimeoutError("Server reported a timeout error",{cause:new Vt.MongoServerError(s)})}return s}throw new Vt.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand(e,r,n,i){(async()=>{this.throwIfAborted();for await(let o of this.sendCommand(e,r,n))i(void 0,o),this.throwIfAborted();throw new Vt.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,i)}throwIfAborted(){if(this.error)throw this.error}async writeCommand(e,r){let n=r.agreedCompressor==="none"||!Oy.OpCompressedRequest.canCompress(e)?e:new Oy.OpCompressedRequest(e,{agreedCompressor:r.agreedCompressor??"none",zlibCompressionLevel:r.zlibCompressionLevel??0}),i=Buffer.concat(await n.toBin());if(r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new Vt.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");if(this.socket.write(i))return;let s=(0,Vi.once)(this.socket,"drain"),o=r?.timeoutContext?.timeoutForSocketWrite;if(o)try{return await Promise.race([s,o])}catch(u){let a=u;throw pP.TimeoutError.is(u)&&(a=new Vt.MongoOperationTimeoutError("Timed out at socket write"),this.cleanup(a)),u}finally{o.clear()}return await s}async*readMany(e){try{this.dataEvents=(0,gle.onData)(this.messageStream,e),this.messageStream.resume();for await(let r of this.dataEvents){let n=await(0,yle.decompressResponse)(r);if(yield n,!n.moreToCome)return}}catch(r){let n=r;if(pP.TimeoutError.is(r)){let i=new Vt.MongoOperationTimeoutError(`Timed out during socket read (${r.duration}ms)`);throw this.dataEvents=null,this.onError(i),i}throw n}finally{this.dataEvents=null,this.messageStream.pause(),this.throwIfAborted()}}};zo.Connection=vs;vs.COMMAND_STARTED=Ju.COMMAND_STARTED;vs.COMMAND_SUCCEEDED=Ju.COMMAND_SUCCEEDED;vs.COMMAND_FAILED=Ju.COMMAND_FAILED;vs.CLUSTER_TIME_RECEIVED=Ju.CLUSTER_TIME_RECEIVED;vs.CLOSE=Ju.CLOSE;vs.PINNED=Ju.PINNED;vs.UNPINNED=Ju.UNPINNED;var Cy=class extends lle.Transform{constructor({connection:e}){super({writableObjectMode:!1,readableObjectMode:!0}),this.bufferPool=new Vi.BufferPool,this.connection=e}_transform(e,r,n){this.connection.delayedTimeoutId!=null&&((0,mP.clearTimeout)(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null),this.bufferPool.append(e);let i=this.bufferPool.getInt32();if(i==null)return n();if(i<0)return n(new Vt.MongoParseError(`Invalid message size: ${i}, too small`));if(i>this.bufferPool.length)return n();let s=this.bufferPool.read(i);return n(null,s)}};zo.SizedMessageTransform=Cy;var p4=class extends vs{constructor(e,r){super(e,r),this.autoEncrypter=r.autoEncrypter}async command(e,r,n,i){let{autoEncrypter:s}=this;if(!s)throw new Vt.MongoMissingDependencyError("No AutoEncrypter available for encryption",{dependencyName:"n/a"});let o=(0,Vi.maxWireVersion)(this);if(o===0)return await super.command(e,r,n,i);if(o<8)throw new Vt.MongoCompatibilityError("Auto-encryption requires a minimum MongoDB version of 4.2");let u=r.find||r.findAndModify?r.sort:null,a=r.createIndexes?r.indexes.map(p=>p.key):null,c=await s.encrypt(e.toString(),r,n);if(u!=null&&(r.find||r.findAndModify)&&(c.sort=u),a!=null&&r.createIndexes)for(let[p,m]of a.entries())c.indexes[p].key=m;let l=await super.command(e,c,n,i??Mh.MongoDBResponse),h=await s.decrypt(l.toBytes(),n),d=i?.make(h)??(0,fle.deserialize)(h,n);return s[Ju.kDecorateResult]&&(i==null?(0,Vi.decorateDecryptionResult)(d,l.toObject(),!0):d instanceof Mh.CursorResponse&&(d.encryptedResponse=l)),d}};zo.CryptoConnection=p4});var g4=y(mi=>{"use strict";f();Object.defineProperty(mi,"__esModule",{value:!0});mi.LEGAL_TCP_SOCKET_OPTIONS=mi.LEGAL_TLS_SOCKET_OPTIONS=void 0;mi.connect=ble;mi.makeConnection=EP;mi.performInitialHandshake=AP;mi.prepareHandshakeDocument=wP;mi.makeSocket=My;var gP=require("net"),Ale=require("tls"),_P=Xt(),wle=bs(),xt=re(),m4=fe(),Sle=Vu(),Dy=no(),yP=Ty(),i1=ja();async function ble(t){let e=null;try{let r=await My(t);return e=EP(t,r),await AP(e,t),e}catch(r){throw e?.destroy(),r}}function EP(t,e){let r=t.connectionType??yP.Connection;return t.autoEncrypter&&(r=yP.CryptoConnection),new r(e,t)}function Ole(t,e){let r=Number(t.maxWireVersion),n=Number(t.minWireVersion),i=!Number.isNaN(r)&&r>=i1.MIN_SUPPORTED_WIRE_VERSION,s=!Number.isNaN(n)&&n<=i1.MAX_SUPPORTED_WIRE_VERSION;if(i){if(s)return null;let u=`Server at ${e.hostAddress} reports minimum wire version ${JSON.stringify(t.minWireVersion)}, but this version of the Node.js Driver requires at most ${i1.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${i1.MAX_SUPPORTED_SERVER_VERSION})`;return new xt.MongoCompatibilityError(u)}let o=`Server at ${e.hostAddress} reports maximum wire version ${JSON.stringify(t.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${i1.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${i1.MIN_SUPPORTED_SERVER_VERSION})`;return new xt.MongoCompatibilityError(o)}async function AP(t,e){let r=e.credentials;if(r&&r.mechanism!==Dy.AuthMechanism.MONGODB_DEFAULT&&!e.authProviders.getOrCreateProvider(r.mechanism,r.mechanismProperties))throw new xt.MongoInvalidArgumentError(`AuthMechanism '${r.mechanism}' not supported`);let n=new Sle.AuthContext(t,r,e);t.authContext=n;let i=await wP(n),s={...e,raw:!1};typeof e.connectTimeoutMS=="number"&&(s.socketTimeoutMS=e.connectTimeoutMS);let o=new Date().getTime(),u=await c(i,s);"isWritablePrimary"in u||(u.isWritablePrimary=u[_P.LEGACY_HELLO_COMMAND]),u.helloOk&&(t.helloOk=!0);let a=Ole(u,e);if(a)throw a;if(e.loadBalanced&&!u.serviceId)throw new xt.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.");if(t.hello=u,t.lastHelloMS=new Date().getTime()-o,!u.arbiterOnly&&r){n.response=u;let l=r.resolveAuthMechanism(u),h=e.authProviders.getOrCreateProvider(l.mechanism,l.mechanismProperties);if(!h)throw new xt.MongoInvalidArgumentError(`No AuthProvider for ${l.mechanism} defined.`);try{await h.auth(n)}catch(d){throw d instanceof xt.MongoError&&(d.addErrorLabel(xt.MongoErrorLabel.HandshakeError),(0,xt.needsRetryableWriteLabel)(d,u.maxWireVersion,t.description.type)&&d.addErrorLabel(xt.MongoErrorLabel.RetryableWriteError)),d}}t.established=!0;async function c(l,h){try{return await t.command((0,m4.ns)("admin.$cmd"),l,h)}catch(d){throw d instanceof xt.MongoError&&d.addErrorLabel(xt.MongoErrorLabel.HandshakeError),d}}}async function wP(t){let e=t.options,r=e.compressors?e.compressors:[],{serverApi:n}=t.connection,i=await e.extendedMetadata,s={[n?.version||e.loadBalanced===!0?"hello":_P.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:i,compression:r};e.loadBalanced===!0&&(s.loadBalanced=!0);let o=t.credentials;if(o){if(o.mechanism===Dy.AuthMechanism.MONGODB_DEFAULT&&o.username){s.saslSupportedMechs=`${o.source}.${o.username}`;let a=t.options.authProviders.getOrCreateProvider(Dy.AuthMechanism.MONGODB_SCRAM_SHA256,o.mechanismProperties);if(!a)throw new xt.MongoInvalidArgumentError(`No AuthProvider for ${Dy.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await a.prepare(s,t)}let u=t.options.authProviders.getOrCreateProvider(o.mechanism,o.mechanismProperties);if(!u)throw new xt.MongoInvalidArgumentError(`No AuthProvider for ${o.mechanism} defined.`);return await u.prepare(s,t)}return s}mi.LEGAL_TLS_SOCKET_OPTIONS=["allowPartialTrustChain","ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];mi.LEGAL_TCP_SOCKET_OPTIONS=["autoSelectFamily","autoSelectFamilyAttemptTimeout","family","hints","localAddress","localPort","lookup"];function y4(t){let e=t.hostAddress;if(!e)throw new xt.MongoInvalidArgumentError('Option "hostAddress" is required');let r={};for(let n of mi.LEGAL_TCP_SOCKET_OPTIONS)t[n]!=null&&(r[n]=t[n]);if(typeof e.socketPath=="string")return r.path=e.socketPath,r;if(typeof e.host=="string")return r.host=e.host,r.port=e.port,r;throw new xt.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(e)}`)}function Cle(t){let e=y4(t);for(let r of mi.LEGAL_TLS_SOCKET_OPTIONS)t[r]!=null&&(e[r]=t[r]);return t.existingSocket&&(e.socket=t.existingSocket),e.servername==null&&e.host&&!gP.isIP(e.host)&&(e.servername=e.host),e}async function My(t){let e=t.tls??!1,r=t.noDelay??!0,n=t.connectTimeoutMS??3e4,i=t.existingSocket,s;if(t.proxyHost!=null)return await Dle({...t,connectTimeoutMS:n});if(e){let l=Ale.connect(Cle(t));typeof l.disableRenegotiation=="function"&&l.disableRenegotiation(),s=l}else i?s=i:s=gP.createConnection(y4(t));s.setKeepAlive(!0,3e5),s.setTimeout(n),s.setNoDelay(r);let o=null,{promise:u,resolve:a,reject:c}=(0,m4.promiseWithResolvers)();if(i)a(s);else{let l=performance.now(),h=e?"secureConnect":"connect";s.once(h,()=>a(s)).once("error",d=>c(new xt.MongoNetworkError(xt.MongoError.buildErrorMessage(d),{cause:d}))).once("timeout",()=>{c(new xt.MongoNetworkTimeoutError(`Socket '${h}' timed out after ${performance.now()-l|0}ms (connectTimeoutMS: ${n})`))}).once("close",()=>c(new xt.MongoNetworkError(`Socket closed after ${performance.now()-l|0} during connection establishment`))),t.cancellationToken!=null&&(o=()=>c(new xt.MongoNetworkError(`Socket connection establishment was cancelled after ${performance.now()-l|0}`)),t.cancellationToken.once("cancel",o))}try{return s=await u,s}catch(l){throw s.destroy(),l}finally{s.setTimeout(0),s.removeAllListeners(),o!=null&&t.cancellationToken?.removeListener("cancel",o)}}var vh=null;function Tle(){if(vh==null){let t=(0,wle.getSocks)();if("kModuleError"in t)throw t.kModuleError;vh=t}return vh}async function Dle(t){let e=m4.HostAddress.fromHostPort(t.proxyHost??"",t.proxyPort??1080),r=await My({...t,hostAddress:e,tls:!1,proxyHost:void 0}),n=y4(t);if(typeof n.host!="string"||typeof n.port!="number")throw new xt.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");vh??=Tle();let i;try{i=(await vh.SocksClient.createConnection({existing_socket:r,timeout:t.connectTimeoutMS,command:"connect",destination:{host:n.host,port:n.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:t.proxyUsername||void 0,password:t.proxyPassword||void 0}})).socket}catch(s){throw new xt.MongoNetworkError(xt.MongoError.buildErrorMessage(s),{cause:s})}return await My({...t,existingSocket:i,proxyHost:void 0})}});var vy=y(ur=>{"use strict";f();Object.defineProperty(ur,"__esModule",{value:!0});ur.ServerHeartbeatFailedEvent=ur.ServerHeartbeatSucceededEvent=ur.ServerHeartbeatStartedEvent=ur.TopologyClosedEvent=ur.TopologyOpeningEvent=ur.TopologyDescriptionChangedEvent=ur.ServerClosedEvent=ur.ServerOpeningEvent=ur.ServerDescriptionChangedEvent=void 0;var Wo=Xt(),_4=class{constructor(e,r,n,i){this.name=Wo.SERVER_DESCRIPTION_CHANGED,this.topologyId=e,this.address=r,this.previousDescription=n,this.newDescription=i}};ur.ServerDescriptionChangedEvent=_4;var E4=class{constructor(e,r){this.name=Wo.SERVER_OPENING,this.topologyId=e,this.address=r}};ur.ServerOpeningEvent=E4;var A4=class{constructor(e,r){this.name=Wo.SERVER_CLOSED,this.topologyId=e,this.address=r}};ur.ServerClosedEvent=A4;var w4=class{constructor(e,r,n){this.name=Wo.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=e,this.previousDescription=r,this.newDescription=n}};ur.TopologyDescriptionChangedEvent=w4;var S4=class{constructor(e){this.name=Wo.TOPOLOGY_OPENING,this.topologyId=e}};ur.TopologyOpeningEvent=S4;var b4=class{constructor(e){this.name=Wo.TOPOLOGY_CLOSED,this.topologyId=e}};ur.TopologyClosedEvent=b4;var O4=class{constructor(e,r){this.name=Wo.SERVER_HEARTBEAT_STARTED,this.connectionId=e,this.awaited=r}};ur.ServerHeartbeatStartedEvent=O4;var C4=class{constructor(e,r,n,i){this.name=Wo.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=e,this.duration=r,this.reply=n??{},this.awaited=i}};ur.ServerHeartbeatSucceededEvent=C4;var T4=class{constructor(e,r,n,i){this.name=Wo.SERVER_HEARTBEAT_FAILED,this.connectionId=e,this.duration=r,this.failure=n,this.awaited=i}};ur.ServerHeartbeatFailedEvent=T4});var q4=y(St=>{"use strict";f();Object.defineProperty(St,"__esModule",{value:!0});St.ConnectionPoolClearedEvent=St.ConnectionCheckedInEvent=St.ConnectionCheckedOutEvent=St.ConnectionCheckOutFailedEvent=St.ConnectionCheckOutStartedEvent=St.ConnectionClosedEvent=St.ConnectionReadyEvent=St.ConnectionCreatedEvent=St.ConnectionPoolClosedEvent=St.ConnectionPoolReadyEvent=St.ConnectionPoolCreatedEvent=St.ConnectionPoolMonitoringEvent=void 0;var Bs=Xt(),k4=fe(),Un=class{constructor(e){this.time=new Date,this.address=e.address}};St.ConnectionPoolMonitoringEvent=Un;var D4=class extends Un{constructor(e){super(e),this.name=Bs.CONNECTION_POOL_CREATED;let{maxConnecting:r,maxPoolSize:n,minPoolSize:i,maxIdleTimeMS:s,waitQueueTimeoutMS:o}=e.options;this.options={maxConnecting:r,maxPoolSize:n,minPoolSize:i,maxIdleTimeMS:s,waitQueueTimeoutMS:o}}};St.ConnectionPoolCreatedEvent=D4;var M4=class extends Un{constructor(e){super(e),this.name=Bs.CONNECTION_POOL_READY}};St.ConnectionPoolReadyEvent=M4;var v4=class extends Un{constructor(e){super(e),this.name=Bs.CONNECTION_POOL_CLOSED}};St.ConnectionPoolClosedEvent=v4;var B4=class extends Un{constructor(e,r){super(e),this.name=Bs.CONNECTION_CREATED,this.connectionId=r.id}};St.ConnectionCreatedEvent=B4;var I4=class extends Un{constructor(e,r,n){super(e),this.name=Bs.CONNECTION_READY,this.durationMS=(0,k4.now)()-n,this.connectionId=r.id}};St.ConnectionReadyEvent=I4;var P4=class extends Un{constructor(e,r,n,i){super(e),this.name=Bs.CONNECTION_CLOSED,this.connectionId=r.id,this.reason=n,this.serviceId=r.serviceId,this.error=i??null}};St.ConnectionClosedEvent=P4;var N4=class extends Un{constructor(e){super(e),this.name=Bs.CONNECTION_CHECK_OUT_STARTED}};St.ConnectionCheckOutStartedEvent=N4;var R4=class extends Un{constructor(e,r,n,i){super(e),this.name=Bs.CONNECTION_CHECK_OUT_FAILED,this.durationMS=(0,k4.now)()-n,this.reason=r,this.error=i}};St.ConnectionCheckOutFailedEvent=R4;var x4=class extends Un{constructor(e,r,n){super(e),this.name=Bs.CONNECTION_CHECKED_OUT,this.durationMS=(0,k4.now)()-n,this.connectionId=r.id}};St.ConnectionCheckedOutEvent=x4;var F4=class extends Un{constructor(e,r){super(e),this.name=Bs.CONNECTION_CHECKED_IN,this.connectionId=r.id}};St.ConnectionCheckedInEvent=F4;var $4=class extends Un{constructor(e,r={}){super(e),this.name=Bs.CONNECTION_POOL_CLEARED,this.serviceId=r.serviceId,this.interruptInUseConnections=r.interruptInUseConnections}};St.ConnectionPoolClearedEvent=$4});var V4=y(so=>{"use strict";f();Object.defineProperty(so,"__esModule",{value:!0});so.WaitQueueTimeoutError=so.PoolClearedOnNetworkError=so.PoolClearedError=so.PoolClosedError=void 0;var By=re(),L4=class extends By.MongoDriverError{constructor(e){super("Attempted to check out a connection from closed connection pool"),this.address=e.address}get name(){return"MongoPoolClosedError"}};so.PoolClosedError=L4;var Iy=class extends By.MongoNetworkError{constructor(e,r){let n=r||`Connection pool for ${e.address} was cleared because another operation failed with: "${e.serverError?.message}"`;super(n,e.serverError?{cause:e.serverError}:void 0),this.address=e.address,this.addErrorLabel(By.MongoErrorLabel.PoolRequstedRetry)}get name(){return"MongoPoolClearedError"}};so.PoolClearedError=Iy;var j4=class extends Iy{constructor(e){super(e,`Connection to ${e.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}};so.PoolClearedOnNetworkError=j4;var U4=class extends By.MongoDriverError{constructor(e,r){super(e),this.address=r}get name(){return"MongoWaitQueueTimeoutError"}};so.WaitQueueTimeoutError=U4});var OP=y($r=>{"use strict";f();Object.defineProperty($r,"__esModule",{value:!0});$r.ConnectionPool=$r.PoolState=void 0;var s1=require("timers"),zi=Xt(),oo=re(),SP=fi(),Mle=Jr(),o1=fe(),vle=g4(),Py=Ty(),Fr=q4(),u1=V4(),Ble=US(),a1=Symbol("server"),Ho=Symbol("connections"),c1=Symbol("pending"),Xu=Symbol("checkedOut"),fc=Symbol("minPoolSizeTimer"),l1=Symbol("generation"),bP=Symbol("serviceGenerations"),Ny=Symbol("connectionCounter"),Ry=Symbol("cancellationToken"),Go=Symbol("waitQueue"),xy=Symbol("cancelled"),Fy=Symbol("metrics"),$y=Symbol("processingWaitQueue"),Is=Symbol("poolState");$r.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});var Vn=class t extends SP.TypedEventEmitter{constructor(e,r){if(super(),this.options=Object.freeze({connectionType:Py.Connection,...r,maxPoolSize:r.maxPoolSize??100,minPoolSize:r.minPoolSize??0,maxConnecting:r.maxConnecting??2,maxIdleTimeMS:r.maxIdleTimeMS??0,waitQueueTimeoutMS:r.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:r.minPoolSizeCheckFrequencyMS??100,autoEncrypter:r.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new oo.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this[Is]=$r.PoolState.paused,this[a1]=e,this[Ho]=new o1.List,this[c1]=0,this[Xu]=new Set,this[fc]=void 0,this[l1]=0,this[bP]=new Map,this[Ny]=(0,o1.makeCounter)(1),this[Ry]=new SP.CancellationToken,this[Ry].setMaxListeners(1/0),this[Go]=new o1.List,this[Fy]=new Ble.ConnectionPoolMetrics,this[$y]=!1,this.mongoLogger=this[a1].topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(t.CONNECTION_POOL_CREATED,new Fr.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this[Is]===$r.PoolState.closed}get generation(){return this[l1]}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this[Ho].length}get pendingConnectionCount(){return this[c1]}get currentCheckedOutCount(){return this[Xu].size}get waitQueueSize(){return this[Go].length}get loadBalanced(){return this.options.loadBalanced}get serviceGenerations(){return this[bP]}get serverError(){return this[a1].description.error}get checkedOutConnections(){return this[Xu]}waitQueueErrorMetrics(){return this[Fy].info(this.options.maxPoolSize)}ready(){this[Is]===$r.PoolState.paused&&(this[Is]=$r.PoolState.ready,this.emitAndLog(t.CONNECTION_POOL_READY,new Fr.ConnectionPoolReadyEvent(this)),(0,s1.clearTimeout)(this[fc]),this.ensureMinPoolSize())}async checkOut(e){let r=(0,o1.now)();this.emitAndLog(t.CONNECTION_CHECK_OUT_STARTED,new Fr.ConnectionCheckOutStartedEvent(this));let{promise:n,resolve:i,reject:s}=(0,o1.promiseWithResolvers)(),o=e.timeoutContext.connectionCheckoutTimeout,u={resolve:i,reject:s,checkoutTime:r};this[Go].push(u),process.nextTick(()=>this.processWaitQueue());try{return o?.throwIfExpired(),await(o?Promise.race([n,o]):n)}catch(a){if(Mle.TimeoutError.is(a)){o?.clear(),u[xy]=!0,this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Fr.ConnectionCheckOutFailedEvent(this,"timeout",u.checkoutTime));let c=new u1.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);throw e.timeoutContext.csotEnabled()?new oo.MongoOperationTimeoutError("Timed out during connection checkout",{cause:c}):c}throw a}finally{o?.clear()}}checkIn(e){if(!this[Xu].has(e))return;let r=this.closed,n=this.connectionIsStale(e),i=!!(r||n||e.closed);if(i||(e.markAvailable(),this[Ho].unshift(e)),this[Xu].delete(e),this.emitAndLog(t.CONNECTION_CHECKED_IN,new Fr.ConnectionCheckedInEvent(this,e)),i){let s=e.closed?"error":r?"poolClosed":"stale";this.destroyConnection(e,s)}process.nextTick(()=>this.processWaitQueue())}clear(e={}){if(this.closed)return;if(this.loadBalanced){let{serviceId:s}=e;if(!s)throw new oo.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");let o=s.toHexString(),u=this.serviceGenerations.get(o);if(u==null)throw new oo.MongoRuntimeError("Service generations are required in load balancer mode.");this.serviceGenerations.set(o,u+1),this.emitAndLog(t.CONNECTION_POOL_CLEARED,new Fr.ConnectionPoolClearedEvent(this,{serviceId:s}));return}let r=e.interruptInUseConnections??!1,n=this[l1];this[l1]+=1;let i=this[Is]===$r.PoolState.paused;this[Is]=$r.PoolState.paused,this.clearMinPoolSizeTimer(),i||this.emitAndLog(t.CONNECTION_POOL_CLEARED,new Fr.ConnectionPoolClearedEvent(this,{interruptInUseConnections:r})),r&&process.nextTick(()=>this.interruptInUseConnections(n)),this.processWaitQueue()}interruptInUseConnections(e){for(let r of this[Xu])r.generation<=e&&(r.onError(new u1.PoolClearedOnNetworkError(this)),this.checkIn(r))}close(){if(!this.closed){this[Ry].emit("cancel"),typeof this[Ny].return=="function"&&this[Ny].return(void 0),this[Is]=$r.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let e of this[Ho])this.emitAndLog(t.CONNECTION_CLOSED,new Fr.ConnectionClosedEvent(this,e,"poolClosed")),e.destroy();this[Ho].clear(),this.emitAndLog(t.CONNECTION_POOL_CLOSED,new Fr.ConnectionPoolClosedEvent(this))}}async reauthenticate(e){let r=e.authContext;if(!r)throw new oo.MongoRuntimeError("No auth context found on connection.");let n=r.credentials;if(!n)throw new oo.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");let i=n.resolveAuthMechanism(e.hello),s=this[a1].topology.client.s.authProviders.getOrCreateProvider(i.mechanism,i.mechanismProperties);if(!s)throw new oo.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${n.mechanism}`);await s.reauth(r)}clearMinPoolSizeTimer(){let e=this[fc];e&&(0,s1.clearTimeout)(e)}destroyConnection(e,r){this.emitAndLog(t.CONNECTION_CLOSED,new Fr.ConnectionClosedEvent(this,e,r)),e.destroy()}connectionIsStale(e){let r=e.serviceId;if(this.loadBalanced&&r){let n=r.toHexString(),i=this.serviceGenerations.get(n);return e.generation!==i}return e.generation!==this[l1]}connectionIsIdle(e){return!!(this.options.maxIdleTimeMS&&e.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(e){let r=this.connectionIsStale(e),n=this.connectionIsIdle(e);if(!r&&!n&&!e.closed)return!1;let i=e.closed?"error":r?"stale":"idle";return this.destroyConnection(e,i),!0}createConnection(e){let r={...this.options,id:this[Ny].next().value,generation:this[l1],cancellationToken:this[Ry],mongoLogger:this.mongoLogger,authProviders:this[a1].topology.client.s.authProviders};this[c1]++;let n=(0,o1.now)();this.emitAndLog(t.CONNECTION_CREATED,new Fr.ConnectionCreatedEvent(this,{id:r.id})),(0,vle.connect)(r).then(i=>{if(this[Is]!==$r.PoolState.ready){this[c1]--,i.destroy(),e(this.closed?new u1.PoolClosedError(this):new u1.PoolClearedError(this));return}for(let s of[...zi.APM_EVENTS,Py.Connection.CLUSTER_TIME_RECEIVED])i.on(s,o=>this.emit(s,o));if(this.loadBalanced){i.on(Py.Connection.PINNED,o=>this[Fy].markPinned(o)),i.on(Py.Connection.UNPINNED,o=>this[Fy].markUnpinned(o));let s=i.serviceId;if(s){let o,u=s.toHexString();(o=this.serviceGenerations.get(u))?i.generation=o:(this.serviceGenerations.set(u,0),i.generation=0)}}i.markAvailable(),this.emitAndLog(t.CONNECTION_READY,new Fr.ConnectionReadyEvent(this,i,n)),this[c1]--,e(void 0,i)},i=>{this[c1]--,this[a1].handleError(i),this.emitAndLog(t.CONNECTION_CLOSED,new Fr.ConnectionClosedEvent(this,{id:r.id,serviceId:void 0},"error",i)),(i instanceof oo.MongoNetworkError||i instanceof oo.MongoServerError)&&(i.connectionGeneration=r.generation),e(i??new oo.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){let e=this.options.minPoolSize;this[Is]!==$r.PoolState.ready||e===0||(this[Ho].prune(r=>this.destroyConnectionIfPerished(r)),this.totalConnectionCount<e&&this.pendingConnectionCount<this.options.maxConnecting?this.createConnection((r,n)=>{!r&&n&&(this[Ho].push(n),process.nextTick(()=>this.processWaitQueue())),this[Is]===$r.PoolState.ready&&((0,s1.clearTimeout)(this[fc]),this[fc]=(0,s1.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS))}):((0,s1.clearTimeout)(this[fc]),this[fc]=(0,s1.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)))}processWaitQueue(){if(this[$y])return;for(this[$y]=!0;this.waitQueueSize;){let n=this[Go].first();if(!n){this[Go].shift();continue}if(n[xy]){this[Go].shift();continue}if(this[Is]!==$r.PoolState.ready){let s=this.closed?"poolClosed":"connectionError",o=this.closed?new u1.PoolClosedError(this):new u1.PoolClearedError(this);this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Fr.ConnectionCheckOutFailedEvent(this,s,n.checkoutTime,o)),this[Go].shift(),n.reject(o);continue}if(!this.availableConnectionCount)break;let i=this[Ho].shift();if(!i)break;this.destroyConnectionIfPerished(i)||(this[Xu].add(i),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new Fr.ConnectionCheckedOutEvent(this,i,n.checkoutTime)),this[Go].shift(),n.resolve(i))}let{maxPoolSize:e,maxConnecting:r}=this.options;for(;this.waitQueueSize>0&&this.pendingConnectionCount<r&&(e===0||this.totalConnectionCount<e);){let n=this[Go].shift();!n||n[xy]||this.createConnection((i,s)=>{n[xy]?!i&&s&&this[Ho].push(s):i?(this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Fr.ConnectionCheckOutFailedEvent(this,"connectionError",n.checkoutTime,i)),n.reject(i)):s&&(this[Xu].add(s),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new Fr.ConnectionCheckedOutEvent(this,s,n.checkoutTime)),n.resolve(s)),process.nextTick(()=>this.processWaitQueue())})}this[$y]=!1}};$r.ConnectionPool=Vn;Vn.CONNECTION_POOL_CREATED=zi.CONNECTION_POOL_CREATED;Vn.CONNECTION_POOL_CLOSED=zi.CONNECTION_POOL_CLOSED;Vn.CONNECTION_POOL_CLEARED=zi.CONNECTION_POOL_CLEARED;Vn.CONNECTION_POOL_READY=zi.CONNECTION_POOL_READY;Vn.CONNECTION_CREATED=zi.CONNECTION_CREATED;Vn.CONNECTION_READY=zi.CONNECTION_READY;Vn.CONNECTION_CLOSED=zi.CONNECTION_CLOSED;Vn.CONNECTION_CHECK_OUT_STARTED=zi.CONNECTION_CHECK_OUT_STARTED;Vn.CONNECTION_CHECK_OUT_FAILED=zi.CONNECTION_CHECK_OUT_FAILED;Vn.CONNECTION_CHECKED_OUT=zi.CONNECTION_CHECKED_OUT;Vn.CONNECTION_CHECKED_IN=zi.CONNECTION_CHECKED_IN});var K4=y(qy=>{"use strict";f();Object.defineProperty(qy,"__esModule",{value:!0});qy.Server=void 0;var Ile=Ty(),Ple=OP(),Nle=V4(),uo=Xt(),Bt=re(),Rle=fi(),H4=QS(),ky=fe(),CP=Qr(),mt=ai(),xle=Y4(),G4=Ch(),Bh=(0,ky.makeStateMachine)({[mt.STATE_CLOSED]:[mt.STATE_CLOSED,mt.STATE_CONNECTING],[mt.STATE_CONNECTING]:[mt.STATE_CONNECTING,mt.STATE_CLOSING,mt.STATE_CONNECTED,mt.STATE_CLOSED],[mt.STATE_CONNECTED]:[mt.STATE_CONNECTED,mt.STATE_CLOSING,mt.STATE_CLOSED],[mt.STATE_CLOSING]:[mt.STATE_CLOSING,mt.STATE_CLOSED]}),Ps=class t extends Rle.TypedEventEmitter{constructor(e,r,n){super(),this.serverApi=n.serverApi;let i={hostAddress:r.hostAddress,...n};this.topology=e,this.pool=new Ple.ConnectionPool(this,i),this.s={description:r,options:n,state:mt.STATE_CLOSED,operationCount:0};for(let s of[...uo.CMAP_EVENTS,...uo.APM_EVENTS])this.pool.on(s,o=>this.emit(s,o));if(this.pool.on(Ile.Connection.CLUSTER_TIME_RECEIVED,s=>{this.clusterTime=s}),this.loadBalanced){this.monitor=null;return}this.monitor=new xle.Monitor(this,this.s.options);for(let s of uo.HEARTBEAT_EVENTS)this.monitor.on(s,o=>this.emit(s,o));this.monitor.on("resetServer",s=>z4(this,s)),this.monitor.on(t.SERVER_HEARTBEAT_SUCCEEDED,s=>{this.emit(t.DESCRIPTION_RECEIVED,new G4.ServerDescription(this.description.hostAddress,s.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===mt.STATE_CONNECTING&&(Bh(this,mt.STATE_CONNECTED),this.emit(t.CONNECT,this))})}get clusterTime(){return this.topology.clusterTime}set clusterTime(e){this.topology.clusterTime=e}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter}get loadBalanced(){return this.topology.description.type===mt.TopologyType.LoadBalanced}connect(){this.s.state===mt.STATE_CLOSED&&(Bh(this,mt.STATE_CONNECTING),this.loadBalanced?(Bh(this,mt.STATE_CONNECTED),this.emit(t.CONNECT,this)):this.monitor?.connect())}destroy(){this.s.state!==mt.STATE_CLOSED&&(Bh(this,mt.STATE_CLOSING),this.loadBalanced||this.monitor?.close(),this.pool.close(),Bh(this,mt.STATE_CLOSED),this.emit("closed"))}requestCheck(){this.loadBalanced||this.monitor?.requestCheck()}async command(e,r,n,i){if(e.db==null||typeof e=="string")throw new Bt.MongoInvalidArgumentError("Namespace must not be a string");if(this.s.state===mt.STATE_CLOSING||this.s.state===mt.STATE_CLOSED)throw new Bt.MongoServerClosedError;let s=Object.assign({},n,{wireProtocolCommand:!1,directConnection:this.topology.s.options.directConnection});s.omitReadPreference&&delete s.readPreference,this.description.iscryptd&&(s.omitMaxTimeMS=!0);let o=s.session,u=o?.pinnedConnection;if(this.incrementOperationCount(),u==null)try{u=await this.pool.checkOut(n),this.loadBalanced&&Fle(r,o)&&o?.pin(u)}catch(a){throw this.decrementOperationCount(),a instanceof Nle.PoolClearedError||this.handleError(a),a}try{try{let a=await u.command(e,r,s,i);return(0,CP.throwIfWriteConcernError)(a),a}catch(a){throw this.decorateCommandError(u,r,s,a)}}catch(a){if(a instanceof Bt.MongoError&&a.code===Bt.MONGODB_ERROR_CODES.Reauthenticate){await this.pool.reauthenticate(u);try{let c=await u.command(e,r,s,i);return(0,CP.throwIfWriteConcernError)(c),c}catch(c){throw this.decorateCommandError(u,r,s,c)}}else throw a}finally{this.decrementOperationCount(),o?.pinnedConnection!==u&&this.pool.checkIn(u)}}handleError(e,r){if(!(e instanceof Bt.MongoError)||e.connectionGeneration&&e.connectionGeneration<this.pool.generation)return;let i=e instanceof Bt.MongoNetworkError&&!(e instanceof Bt.MongoNetworkTimeoutError),s=(0,Bt.isNetworkErrorBeforeHandshake)(e),o=e.hasErrorLabel(Bt.MongoErrorLabel.HandshakeError);if(i||s||o)this.loadBalanced?r&&this.pool.clear({serviceId:r.serviceId}):(e.addErrorLabel(Bt.MongoErrorLabel.ResetPool),z4(this,e));else if((0,Bt.isSDAMUnrecoverableError)(e)&&kle(this,e)){let u=(0,ky.maxWireVersion)(this)<=7||(0,Bt.isNodeShuttingDownError)(e);this.loadBalanced&&r&&u&&this.pool.clear({serviceId:r.serviceId}),this.loadBalanced||(u&&e.addErrorLabel(Bt.MongoErrorLabel.ResetPool),z4(this,e),process.nextTick(()=>this.requestCheck()))}}decorateCommandError(e,r,n,i){if(typeof i!="object"||i==null||!("name"in i))throw new Bt.MongoRuntimeError("An unexpected error type: "+typeof i);if(i.name==="AbortError"&&"cause"in i&&i.cause instanceof Bt.MongoError&&(i=i.cause),!(i instanceof Bt.MongoError)||$le(this.pool,e))return i;let s=n?.session;return i instanceof Bt.MongoNetworkError?(s&&!s.hasEnded&&s.serverSession&&(s.serverSession.isDirty=!0),W4(s,r)&&!i.hasErrorLabel(Bt.MongoErrorLabel.TransientTransactionError)&&i.addErrorLabel(Bt.MongoErrorLabel.TransientTransactionError),(TP(this.topology)||(0,H4.isTransactionCommand)(r))&&(0,ky.supportsRetryableWrites)(this)&&!W4(s,r)&&i.addErrorLabel(Bt.MongoErrorLabel.RetryableWriteError)):(TP(this.topology)||(0,H4.isTransactionCommand)(r))&&(0,Bt.needsRetryableWriteLabel)(i,(0,ky.maxWireVersion)(this),this.description.type)&&!W4(s,r)&&i.addErrorLabel(Bt.MongoErrorLabel.RetryableWriteError),s&&s.isPinned&&i.hasErrorLabel(Bt.MongoErrorLabel.TransientTransactionError)&&s.unpin({force:!0}),this.handleError(i,e),i}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}};qy.Server=Ps;Ps.SERVER_HEARTBEAT_STARTED=uo.SERVER_HEARTBEAT_STARTED;Ps.SERVER_HEARTBEAT_SUCCEEDED=uo.SERVER_HEARTBEAT_SUCCEEDED;Ps.SERVER_HEARTBEAT_FAILED=uo.SERVER_HEARTBEAT_FAILED;Ps.CONNECT=uo.CONNECT;Ps.DESCRIPTION_RECEIVED=uo.DESCRIPTION_RECEIVED;Ps.CLOSED=uo.CLOSED;Ps.ENDED=uo.ENDED;function z4(t,e){t.loadBalanced||(e instanceof Bt.MongoNetworkError&&!(e instanceof Bt.MongoNetworkTimeoutError)&&t.monitor?.reset(),t.emit(Ps.DESCRIPTION_RECEIVED,new G4.ServerDescription(t.description.hostAddress,void 0,{error:e})))}function Fle(t,e){return e?e.inTransaction()||e.transaction.isCommitted&&"commitTransaction"in t||"aggregate"in t||"find"in t||"getMore"in t||"listCollections"in t||"listIndexes"in t||"bulkWrite"in t:!1}function $le(t,e){return e.serviceId?e.generation!==t.serviceGenerations.get(e.serviceId.toHexString()):e.generation!==t.generation}function kle(t,e){let r=e.topologyVersion,n=t.description.topologyVersion;return(0,G4.compareTopologyVersion)(n,r)<0}function W4(t,e){return t&&t.inTransaction()&&!(0,H4.isTransactionCommand)(e)}function TP(t){return t.s.options.retryWrites!==!1}});var Y4=y(zn=>{"use strict";f();Object.defineProperty(zn,"__esModule",{value:!0});zn.RTTSampler=zn.MonitorInterval=zn.RTTPinger=zn.Monitor=zn.ServerMonitoringMode=void 0;var Zu=require("timers"),DP=Ye(),Ly=g4(),qle=lS(),Q4=Xt(),f1=re(),Lle=Ha(),MP=fi(),nn=fe(),kr=ai(),Ih=vy(),Ph=K4(),ao=Symbol("server"),co=Symbol("monitorId"),p1=Symbol("cancellationToken"),h1="idle",hc="monitoring",d1=(0,nn.makeStateMachine)({[kr.STATE_CLOSING]:[kr.STATE_CLOSING,h1,kr.STATE_CLOSED],[kr.STATE_CLOSED]:[kr.STATE_CLOSED,hc],[h1]:[h1,hc,kr.STATE_CLOSING],[hc]:[hc,h1,kr.STATE_CLOSING]}),jle=new Set([kr.STATE_CLOSING,kr.STATE_CLOSED,hc]);function Nh(t){return t.s.state===kr.STATE_CLOSED||t.s.state===kr.STATE_CLOSING}zn.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});var J4=class extends MP.TypedEventEmitter{constructor(e,r){super(),this.component=Lle.MongoLoggableComponent.TOPOLOGY,this[ao]=e,this.connection=null,this[p1]=new MP.CancellationToken,this[p1].setMaxListeners(1/0),this[co]=void 0,this.s={state:kr.STATE_CLOSED},this.address=e.description.address,this.options=Object.freeze({connectTimeoutMS:r.connectTimeoutMS??1e4,heartbeatFrequencyMS:r.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:r.minHeartbeatFrequencyMS??500,serverMonitoringMode:r.serverMonitoringMode}),this.isRunningInFaasEnv=(0,qle.getFAASEnv)()!=null,this.mongoLogger=this[ao].topology.client?.mongoLogger,this.rttSampler=new Uy(10);let n=this[p1],i={id:"<monitor>",generation:e.pool.generation,cancellationToken:n,hostAddress:e.description.hostAddress,...r,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};delete i.credentials,i.autoEncrypter&&delete i.autoEncrypter,this.connectOptions=Object.freeze(i)}connect(){if(this.s.state!==kr.STATE_CLOSED)return;let e=this.options.heartbeatFrequencyMS,r=this.options.minHeartbeatFrequencyMS;this[co]=new Rh(BP(this),{heartbeatFrequencyMS:e,minHeartbeatFrequencyMS:r,immediate:!0})}requestCheck(){jle.has(this.s.state)||this[co]?.wake()}reset(){let e=this[ao].description.topologyVersion;if(Nh(this)||e==null)return;d1(this,kr.STATE_CLOSING),vP(this),d1(this,h1);let r=this.options.heartbeatFrequencyMS,n=this.options.minHeartbeatFrequencyMS;this[co]=new Rh(BP(this),{heartbeatFrequencyMS:r,minHeartbeatFrequencyMS:n})}close(){Nh(this)||(d1(this,kr.STATE_CLOSING),vP(this),this.emit("close"),d1(this,kr.STATE_CLOSED))}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample(e){this.rttSampler.addSample(e)}clearRttSamples(){this.rttSampler.clear()}};zn.Monitor=J4;function vP(t){t[co]?.stop(),t[co]=void 0,t.rttPinger?.close(),t.rttPinger=void 0,t[p1].emit("cancel"),t.connection?.destroy(),t.connection=null,t.clearRttSamples()}function X4(t,e){if(e==null)return!1;let r=t.options.serverMonitoringMode;return r===zn.ServerMonitoringMode.poll?!1:r===zn.ServerMonitoringMode.stream?!0:!t.isRunningInFaasEnv}function Ule(t,e){let r,n,i=t[ao].description.topologyVersion,s=X4(t,i);t.emitAndLogHeartbeat(Ph.Server.SERVER_HEARTBEAT_STARTED,t[ao].topology.s.id,void 0,new Ih.ServerHeartbeatStartedEvent(t.address,s));function o(c){t.connection?.destroy(),t.connection=null,t.emitAndLogHeartbeat(Ph.Server.SERVER_HEARTBEAT_FAILED,t[ao].topology.s.id,void 0,new Ih.ServerHeartbeatFailedEvent(t.address,(0,nn.calculateDurationInMs)(r),c,n));let l=c instanceof f1.MongoError?c:new f1.MongoError(f1.MongoError.buildErrorMessage(c),{cause:c});l.addErrorLabel(f1.MongoErrorLabel.ResetPool),l instanceof f1.MongoNetworkTimeoutError&&l.addErrorLabel(f1.MongoErrorLabel.InterruptInUseConnections),t.emit("resetServer",l),e(c)}function u(c){"isWritablePrimary"in c||(c.isWritablePrimary=c[Q4.LEGACY_HELLO_COMMAND]);let l=s&&t.rttPinger?t.rttPinger.latestRtt??(0,nn.calculateDurationInMs)(r):(0,nn.calculateDurationInMs)(r);t.addRttSample(l),t.emitAndLogHeartbeat(Ph.Server.SERVER_HEARTBEAT_SUCCEEDED,t[ao].topology.s.id,c.connectionId,new Ih.ServerHeartbeatSucceededEvent(t.address,l,c,s)),s?(t.emitAndLogHeartbeat(Ph.Server.SERVER_HEARTBEAT_STARTED,t[ao].topology.s.id,void 0,new Ih.ServerHeartbeatStartedEvent(t.address,!0)),r=(0,nn.now)()):(t.rttPinger?.close(),t.rttPinger=void 0,e(void 0,c))}let{connection:a}=t;if(a&&!a.closed){let{serverApi:c,helloOk:l}=a,h=t.options.connectTimeoutMS,d=t.options.heartbeatFrequencyMS,p={[c?.version||l?"hello":Q4.LEGACY_HELLO_COMMAND]:1,...s&&i?{maxAwaitTimeMS:d,topologyVersion:Vle(i)}:{}},m=s?{socketTimeoutMS:h?h+d:0,exhaustAllowed:!0}:{socketTimeoutMS:h};if(s&&t.rttPinger==null&&(t.rttPinger=new jy(t)),r=(0,nn.now)(),s)return n=!0,a.exhaustCommand((0,nn.ns)("admin.$cmd"),p,m,(g,_)=>g?o(g):u(_));n=!1,a.command((0,nn.ns)("admin.$cmd"),p,m).then(u,o);return}(async()=>{let c=await(0,Ly.makeSocket)(t.connectOptions),l=(0,Ly.makeConnection)(t.connectOptions,c);r=(0,nn.now)();try{return await(0,Ly.performInitialHandshake)(l,t.connectOptions),l}catch(h){throw l.destroy(),h}})().then(c=>{if(Nh(t)){c.destroy();return}let l=(0,nn.calculateDurationInMs)(r);t.addRttSample(l),t.connection=c,t.emitAndLogHeartbeat(Ph.Server.SERVER_HEARTBEAT_SUCCEEDED,t[ao].topology.s.id,c.hello?.connectionId,new Ih.ServerHeartbeatSucceededEvent(t.address,l,c.hello,X4(t,c.hello?.topologyVersion))),e(void 0,c.hello)},c=>{t.connection=null,n=!1,o(c)})}function BP(t){return e=>{if(t.s.state===hc){process.nextTick(e);return}d1(t,hc);function r(){Nh(t)||d1(t,h1),e()}Ule(t,(n,i)=>{if(n&&t[ao].description.type===kr.ServerType.Unknown)return r();X4(t,i?.topologyVersion)&&(0,Zu.setTimeout)(()=>{Nh(t)||t[co]?.wake()},0),r()})}}function Vle(t){return{processId:t.processId,counter:DP.Long.isLong(t.counter)?t.counter:DP.Long.fromNumber(t.counter)}}var jy=class{constructor(e){this.connection=void 0,this[p1]=e[p1],this.closed=!1,this.monitor=e,this.latestRtt=e.latestRtt??void 0;let r=e.options.heartbeatFrequencyMS;this[co]=(0,Zu.setTimeout)(()=>this.measureRoundTripTime(),r)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,(0,Zu.clearTimeout)(this[co]),this.connection?.destroy(),this.connection=void 0}measureAndReschedule(e,r){if(this.closed){r?.destroy();return}this.connection==null&&(this.connection=r),this.latestRtt=(0,nn.calculateDurationInMs)(e),this[co]=(0,Zu.setTimeout)(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){let e=(0,nn.now)();if(this.closed)return;let r=this.connection;if(r==null){(0,Ly.connect)(this.monitor.connectOptions).then(i=>{this.measureAndReschedule(e,i)},()=>{this.connection=void 0});return}let n=r.serverApi?.version||r.helloOk?"hello":Q4.LEGACY_HELLO_COMMAND;r.command((0,nn.ns)("admin.$cmd"),{[n]:1},void 0).then(()=>this.measureAndReschedule(e),()=>{this.connection?.destroy(),this.connection=void 0})}};zn.RTTPinger=jy;var Rh=class{constructor(e,r={}){this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{this.stopped||(this.timerId&&(0,Zu.clearTimeout)(this.timerId),this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=(0,nn.now)(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)}))},this.fn=e,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=r.heartbeatFrequencyMS??1e3,this.minHeartbeatFrequencyMS=r.minHeartbeatFrequencyMS??500,r.immediate?this._executeAndReschedule():this._reschedule(void 0)}wake(){let r=(0,nn.now)()-this.lastExecutionEnded;if(r<0)return this._executeAndReschedule();if(!this.isExecutionInProgress&&!this.isExpeditedCallToFnScheduled){if(r<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-r);return}this._executeAndReschedule()}}stop(){this.stopped=!0,this.timerId&&((0,Zu.clearTimeout)(this.timerId),this.timerId=void 0),this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){let e=(0,nn.now)(),r=e-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:e,timeSinceLastCall:r}}_reschedule(e){this.stopped||(this.timerId&&(0,Zu.clearTimeout)(this.timerId),this.timerId=(0,Zu.setTimeout)(this._executeAndReschedule,e||this.heartbeatFrequencyMS))}};zn.MonitorInterval=Rh;var Uy=class{constructor(e=10){this.rttSamples=new Float64Array(e),this.length=0,this.writeIndex=0}addSample(e){this.rttSamples[this.writeIndex++]=e,this.length<this.rttSamples.length&&this.length++,this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let e=this.rttSamples[0];for(let r=1;r<this.length;r++)this.rttSamples[r]<e&&(e=this.rttSamples[r]);return e}average(){if(this.length===0)return 0;let e=0;for(let r=0;r<this.length;r++)e+=this.rttSamples[r];return e/this.length}get last(){return this.length===0?null:this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}};zn.RTTSampler=Uy});var ib=y(sn=>{"use strict";f();Object.defineProperty(sn,"__esModule",{value:!0});sn.FEATURE_FLAGS=sn.DEFAULT_OPTIONS=sn.OPTIONS=void 0;sn.resolveSRVRecord=Qle;sn.parseOptions=Xle;var IP=require("dns"),zle=uS(),Wle=require("url"),m1=Rm(),lo=no(),PP=lS(),NP=mh(),RP=GI(),pe=re(),Vy=Lu(),tb=Ha(),Z4=Bi(),ea=Sr(),Hle=Y4(),qr=fe(),Ko=Qr(),eb=["authSource","replicaSet","loadBalanced"],Gle="loadBalanced option only supported with a single host in the URI",Kle="loadBalanced option not supported with a replicaSet option",Yle="loadBalanced option not supported when directConnection is provided";async function Qle(t){if(typeof t.srvHost!="string")throw new pe.MongoAPIError('Option "srvHost" must not be empty');let e=t.srvHost,r=IP.promises.resolveTxt(e);r.then(void 0,qr.squashError);let n=await IP.promises.resolveSrv(`_${t.srvServiceName}._tcp.${e}`);if(n.length===0)throw new pe.MongoAPIError("No addresses found at host");for(let{name:h}of n)(0,qr.checkParentDomainMatch)(h,e);let i=n.map(h=>qr.HostAddress.fromString(`${h.name}:${h.port??27017}`));rb(i,t,!0);let s;try{s=await r}catch(h){if(h.code!=="ENODATA"&&h.code!=="ENOTFOUND")throw h;return i}if(s.length>1)throw new pe.MongoParseError("Multiple text records not allowed");let o=new Wle.URLSearchParams(s[0].join(""));if([...o.keys()].some(h=>!eb.includes(h)))throw new pe.MongoParseError(`Text record may only set any of: ${eb.join(", ")}`);if(eb.some(h=>o.get(h)===""))throw new pe.MongoParseError("Cannot have empty URI params in DNS TXT Record");let a=o.get("authSource")??void 0,c=o.get("replicaSet")??void 0,l=o.get("loadBalanced")??void 0;if(!t.userSpecifiedAuthSource&&a&&t.credentials&&!lo.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(t.credentials.mechanism)&&(t.credentials=m1.MongoCredentials.merge(t.credentials,{source:a})),!t.userSpecifiedReplicaSet&&c&&(t.replicaSet=c),l==="true"&&(t.loadBalanced=!0),t.replicaSet&&t.srvMaxHosts>0)throw new pe.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return rb(i,t,!0),i}function Jle(t){if(!t)return;let e=(r,n)=>{if(t.has(r)&&t.has(n))throw new pe.MongoAPIError(`The '${r}' option cannot be used with the '${n}' option`)};e("tlsInsecure","tlsAllowInvalidCertificates"),e("tlsInsecure","tlsAllowInvalidHostnames"),e("tlsInsecure","tlsDisableCertificateRevocationCheck"),e("tlsInsecure","tlsDisableOCSPEndpointCheck"),e("tlsAllowInvalidCertificates","tlsDisableCertificateRevocationCheck"),e("tlsAllowInvalidCertificates","tlsDisableOCSPEndpointCheck"),e("tlsDisableCertificateRevocationCheck","tlsDisableOCSPEndpointCheck")}function Yo(t,e){if(typeof e=="boolean")return e;switch(e){case"true":return!0;case"false":return!1;default:throw new pe.MongoParseError(`${t} must be either "true" or "false"`)}}function nb(t,e){let r=(0,qr.parseInteger)(e);if(r!=null)return r;throw new pe.MongoParseError(`Expected ${t} to be stringified int value, got: ${e}`)}function xh(t,e){let r=nb(t,e);if(r<0)throw new pe.MongoParseError(`${t} can only be a positive int value, got: ${e}`);return r}function*xP(t){if(t==="")return;let e=t.split(",");for(let r of e){let[n,i]=r.split(/:(.*)/);if(i==null)throw new pe.MongoParseError("Cannot have undefined values in key value pairs");yield[n,i]}}var y1=class extends Map{constructor(e=[]){super(e.map(([r,n])=>[r.toLowerCase(),n]))}has(e){return super.has(e.toLowerCase())}get(e){return super.get(e.toLowerCase())}set(e,r){return super.set(e.toLowerCase(),r)}delete(e){return super.delete(e.toLowerCase())}};function Xle(t,e=void 0,r={}){if(e!=null&&!(e instanceof Vy.MongoClient)&&(r=e,e=void 0),r.useBigInt64&&typeof r.promoteLongs=="boolean"&&!r.promoteLongs)throw new pe.MongoAPIError("Must request either bigint or Long for int64 deserialization");if(r.useBigInt64&&typeof r.promoteValues=="boolean"&&!r.promoteValues)throw new pe.MongoAPIError("Must request either bigint or Long for int64 deserialization");let n=new zle.default(t),{hosts:i,isSRV:s}=n,o=Object.create(null);for(let w of Object.getOwnPropertySymbols(r))sn.FEATURE_FLAGS.has(w)&&(o[w]=r[w]);o.hosts=s?[]:i.map(qr.HostAddress.fromString);let u=new y1;if(n.pathname!=="/"&&n.pathname!==""){let w=decodeURIComponent(n.pathname[0]==="/"?n.pathname.slice(1):n.pathname);w&&u.set("dbName",[w])}if(n.username!==""){let w={username:decodeURIComponent(n.username)};typeof n.password=="string"&&(w.password=decodeURIComponent(n.password)),u.set("auth",[w])}for(let w of n.searchParams.keys()){let S=n.searchParams.getAll(w),C=/readPreferenceTags/i.test(w);if(!C&&S.length>1)throw new pe.MongoInvalidArgumentError(`URI option "${w}" cannot appear more than once in the connection string`);if(!C&&S.includes(""))throw new pe.MongoAPIError(`URI option "${w}" cannot be specified with no value`);u.has(w)||u.set(w,S)}let a=new y1(Object.entries(r).filter(([,w])=>w!=null));if(u.has("serverApi"))throw new pe.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");let c=u.get("authMechanismProperties");if(c){for(let w of c)if(/(^|,)ALLOWED_HOSTS:/.test(w))throw new pe.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if(a.has("loadBalanced"))throw new pe.MongoParseError("loadBalanced is only a valid option in the URI");let l=new y1,h=new Set([...u.keys(),...a.keys()]);for(let w of h){let S=[],C=a.get(w);C!=null&&S.push(C);let O=u.get(w)??[];S.push(...O),l.set(w,S)}if(l.has("tls")||l.has("ssl")){let w=(l.get("tls")||[]).concat(l.get("ssl")||[]).map(Yo.bind(null,"tls/ssl"));if(new Set(w).size!==1)throw new pe.MongoParseError("All values of tls/ssl must be the same.")}Jle(l);let d=(0,qr.setDifference)(h,Array.from(Object.keys(sn.OPTIONS)).map(w=>w.toLowerCase()));if(d.size!==0){let w=d.size>1?"options":"option",S=d.size>1?"are":"is";throw new pe.MongoParseError(`${w} ${Array.from(d).join(", ")} ${S} not supported`)}for(let[w,S]of Object.entries(sn.OPTIONS)){let C=l.get(w);if(!C||C.length===0)sn.DEFAULT_OPTIONS.has(w)&&FP(o,w,S,[sn.DEFAULT_OPTIONS.get(w)]);else{let{deprecated:O}=S;if(O){let B=typeof O=="string"?`: ${O}`:"";(0,qr.emitWarning)(`${w} is a deprecated option${B}`)}FP(o,w,S,C)}}if(o.credentials){let w=o.credentials.mechanism===lo.AuthMechanism.MONGODB_GSSAPI,S=o.credentials.mechanism===lo.AuthMechanism.MONGODB_X509,C=o.credentials.mechanism===lo.AuthMechanism.MONGODB_AWS,O=o.credentials.mechanism===lo.AuthMechanism.MONGODB_OIDC;if((w||S)&&l.has("authSource")&&o.credentials.source!=="$external")throw new pe.MongoParseError(`authMechanism ${o.credentials.mechanism} requires an authSource of '$external'`);if(!(w||S||C||O)&&o.dbName&&!l.has("authSource")&&(o.credentials=m1.MongoCredentials.merge(o.credentials,{source:o.dbName})),C&&o.credentials.username&&!o.credentials.password)throw new pe.MongoMissingCredentialsError(`When using ${o.credentials.mechanism} password must be set when a username is specified`);o.credentials.validate(),o.credentials.password===""&&o.credentials.username===""&&o.credentials.mechanism===lo.AuthMechanism.MONGODB_DEFAULT&&Object.keys(o.credentials.mechanismProperties).length===0&&delete o.credentials}if(o.dbName||(o.dbName="test"),rb(i,o,s),e&&o.autoEncryption&&(RP.Encrypter.checkForMongoCrypt(),o.encrypter=new RP.Encrypter(e,t,r),o.autoEncrypter=o.encrypter.autoEncrypter),o.userSpecifiedAuthSource=a.has("authSource")||u.has("authSource"),o.userSpecifiedReplicaSet=a.has("replicaSet")||u.has("replicaSet"),s){if(o.srvHost=i[0],o.directConnection)throw new pe.MongoAPIError("SRV URI does not support directConnection");if(o.srvMaxHosts>0&&typeof o.replicaSet=="string")throw new pe.MongoParseError("Cannot use srvMaxHosts option with replicaSet");let w=!a.has("tls")&&!u.has("tls"),S=!a.has("ssl")&&!u.has("ssl");w&&S&&(o.tls=!0)}else if(u.has("srvMaxHosts")||a.has("srvMaxHosts")||u.has("srvServiceName")||a.has("srvServiceName"))throw new pe.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(o.directConnection&&o.hosts.length!==1)throw new pe.MongoParseError("directConnection option requires exactly one host");if(!o.proxyHost&&(o.proxyPort||o.proxyUsername||o.proxyPassword))throw new pe.MongoParseError("Must specify proxyHost if other proxy options are passed");if(o.proxyUsername&&!o.proxyPassword||!o.proxyUsername&&o.proxyPassword)throw new pe.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map(w=>u.get(w)??[]).some(w=>w.length>1))throw new pe.MongoParseError("Proxy options cannot be specified multiple times in the connection string");let m=Symbol.for("@@mdb.enableMongoLogger");o[m]=o[m]??!1;let g={},_={};return o[m]&&(g={MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH,...o[Symbol.for("@@mdb.internalLoggerConfig")]},_={mongodbLogPath:o.mongodbLogPath,mongodbLogComponentSeverities:o.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:o.mongodbLogMaxDocumentLength}),o.mongoLoggerOptions=tb.MongoLogger.resolveOptions(g,_),o.metadata=(0,PP.makeClientMetadata)(o),o.extendedMetadata=(0,PP.addContainerMetadata)(o.metadata).then(void 0,qr.squashError),o}function rb(t,e,r){if(e.loadBalanced){if(t.length>1)throw new pe.MongoParseError(Gle);if(e.replicaSet)throw new pe.MongoParseError(Kle);if(e.directConnection)throw new pe.MongoParseError(Yle);if(r&&e.srvMaxHosts>0)throw new pe.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}}function FP(t,e,r,n){let{target:i,type:s,transform:o}=r,u=i??e;switch(s){case"boolean":t[u]=Yo(u,n[0]);break;case"int":t[u]=nb(u,n[0]);break;case"uint":t[u]=xh(u,n[0]);break;case"string":if(n[0]==null)break;t[u]=String(n[0]);break;case"record":if(!(0,qr.isRecord)(n[0]))throw new pe.MongoParseError(`${u} must be an object`);t[u]=n[0];break;case"any":t[u]=n[0];break;default:{if(!o)throw new pe.MongoParseError("Descriptors missing a type must define a transform");let a=o({name:u,options:t,values:n});t[u]=a;break}}}sn.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:t,options:e,values:[r]}){if(!(0,qr.isRecord)(r,["username","password"]))throw new pe.MongoParseError(`${t} must be an object with 'username' and 'password' properties`);return m1.MongoCredentials.merge(e.credentials,{username:r.username,password:r.password})}},authMechanism:{target:"credentials",transform({options:t,values:[e]}){let r=Object.values(lo.AuthMechanism),[n]=r.filter(o=>o.match(RegExp(String.raw`\b${e}\b`,"i")));if(!n)throw new pe.MongoParseError(`authMechanism one of ${r}, got ${e}`);let i=t.credentials?.source;(n===lo.AuthMechanism.MONGODB_PLAIN||lo.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(n))&&(i="$external");let s=t.credentials?.password;return n===lo.AuthMechanism.MONGODB_X509&&s===""&&(s=void 0),m1.MongoCredentials.merge(t.credentials,{mechanism:n,source:i,password:s})}},authMechanismProperties:{target:"credentials",transform({options:t,values:e}){let r=Object.create(null);for(let n of e)if(typeof n=="string")for(let[i,s]of xP(n))try{r[i]=Yo(i,s)}catch{r[i]=s}else{if(!(0,qr.isRecord)(n))throw new pe.MongoParseError("AuthMechanismProperties must be an object");r={...n}}return m1.MongoCredentials.merge(t.credentials,{mechanismProperties:r})}},authSource:{target:"credentials",transform({options:t,values:[e]}){let r=String(e);return m1.MongoCredentials.merge(t.credentials,{source:r})}},autoEncryption:{type:"record"},autoSelectFamily:{type:"boolean",default:!0},autoSelectFamilyAttemptTimeout:{type:"uint"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[t]}){let e=typeof t=="string"?{version:t}:t,r=e&&e.version;if(!r)throw new pe.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(Vy.ServerApiVersion).join('", "')}"]`);if(!Object.values(Vy.ServerApiVersion).some(n=>n===r))throw new pe.MongoParseError(`Invalid server API version=${r}; must be in the following enum: ["${Object.values(Vy.ServerApiVersion).join('", "')}"]`);return e}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:t}){let e=new Set;for(let r of t){let n=typeof r=="string"?r.split(","):r;if(!Array.isArray(n))throw new pe.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let i of n)if(Object.keys(NP.Compressor).includes(String(i)))e.add(String(i));else throw new pe.MongoInvalidArgumentError(`${i} is not a valid compression mechanism. Must be one of: ${Object.keys(NP.Compressor)}.`)}return[...e]}},connectTimeoutMS:{default:3e4,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:t,values:[e]}){let r=nb(t,e);if(r===4||r===6)return r;throw new pe.MongoParseError(`Option 'family' must be 4 or 6 got ${r}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=Ko.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,fsync:Yo(t,r)}});if(!n)throw new pe.MongoParseError(`Unable to make a writeConcern from fsync=${r}`);return n}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=Ko.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:Yo(t,r)}});if(!n)throw new pe.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},journal:{target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=Ko.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:Yo(t,r)}});if(!n)throw new pe.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:t,values:[e]}){let r=xh(t,e);if(r===0)throw new pe.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return r}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:t,options:e,values:[r]}){let n=xh(t,r);return e.readPreference?ea.ReadPreference.fromOptions({readPreference:{...e.readPreference,maxStalenessSeconds:n}}):new ea.ReadPreference("secondary",void 0,{maxStalenessSeconds:n})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[t],options:e}){return{...e.driverInfo,name:String(t)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:qr.DEFAULT_PK_FACTORY,transform({values:[t]}){if((0,qr.isRecord)(t,["createPk"])&&typeof t.createPk=="function")return t;throw new pe.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${t}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[t],options:e}){if(t instanceof Z4.ReadConcern||(0,qr.isRecord)(t,["level"]))return Z4.ReadConcern.fromOptions({...e.readConcern,...t});throw new pe.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(t)}`)}},readConcernLevel:{target:"readConcern",transform({values:[t],options:e}){return Z4.ReadConcern.fromOptions({...e.readConcern,level:t})}},readPreference:{default:ea.ReadPreference.primary,transform({values:[t],options:e}){if(t instanceof ea.ReadPreference)return ea.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if((0,qr.isRecord)(t,["mode"])){let r=ea.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if(r)return r;throw new pe.MongoParseError(`Cannot make read preference from ${JSON.stringify(t)}`)}if(typeof t=="string"){let r={hedge:e.readPreference?.hedge,maxStalenessSeconds:e.readPreference?.maxStalenessSeconds};return new ea.ReadPreference(t,e.readPreference?.tags,r)}throw new pe.MongoParseError(`Unknown ReadPreference value: ${t}`)}},readPreferenceTags:{target:"readPreference",transform({values:t,options:e}){let r=Array.isArray(t[0])?t[0]:t,n=[];for(let i of r){let s=Object.create(null);if(typeof i=="string")for(let[o,u]of xP(i))s[o]=u;if((0,qr.isRecord)(i))for(let[o,u]of Object.entries(i))s[o]=u;n.push(s)}return ea.ReadPreference.fromOptions({readPreference:e.readPreference,readPreferenceTags:n})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[t]}){if(!Object.values(Hle.ServerMonitoringMode).includes(t))throw new pe.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return t}},serverSelectionTimeoutMS:{default:3e4,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:t,values:[e]}){return!Yo(t,e)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:t,values:[e]}){return Yo(t,e)?()=>{}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:t,options:e,values:[r]}){let n=Yo(t,r);return n?(e.checkServerIdentity=()=>{},e.rejectUnauthorized=!1):(e.checkServerIdentity=e.tlsAllowInvalidHostnames?()=>{}:void 0,e.rejectUnauthorized=!e.tlsAllowInvalidCertificates),n}},w:{target:"writeConcern",transform({values:[t],options:e}){return Ko.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[t],options:e}){if((0,qr.isRecord)(t)||t instanceof Ko.WriteConcern)return Ko.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,...t}});if(t==="majority"||typeof t=="number")return Ko.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}});throw new pe.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(t)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[t],options:e}){let r=Ko.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeout:xh("wtimeout",t)}});if(r)return r;throw new pe.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[t],options:e}){let r=Ko.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeoutMS:xh("wtimeoutMS",t)}});if(r)return r;throw new pe.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},connectionType:{type:"any"},srvPoller:{type:"any"},allowPartialTrustChain:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},useNewUrlParser:{type:"boolean",deprecated:"useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},useUnifiedTopology:{type:"boolean",deprecated:"useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},mongodbLogPath:{transform({values:[t]}){if(!(typeof t=="string"&&["stderr","stdout"].includes(t)||t&&typeof t=="object"&&"write"in t&&typeof t.write=="function"))throw new pe.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return t}},mongodbLogComponentSeverities:{transform({values:[t]}){if(typeof t!="object"||!t)throw new pe.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[e,r]of Object.entries(t)){if(typeof r!="string"||typeof e!="string")throw new pe.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(tb.MongoLoggableComponent).some(n=>n===e)&&e!=="default")throw new pe.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${e}`);if(!Object.values(tb.SeverityLevel).some(n=>n===r))throw new pe.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${r} as a value for ${e}`)}return t}},mongodbLogMaxDocumentLength:{type:"uint"}};sn.DEFAULT_OPTIONS=new y1(Object.entries(sn.OPTIONS).filter(([,t])=>t.default!=null).map(([t,e])=>[t,e.default]));sn.FEATURE_FLAGS=new Set([Symbol.for("@@mdb.skipPingOnConnect"),Symbol.for("@@mdb.enableMongoLogger"),Symbol.for("@@mdb.internalLoggerConfig")])});var $P=y(zy=>{"use strict";f();Object.defineProperty(zy,"__esModule",{value:!0});zy.MongoDBAWS=void 0;var sb=Ye(),ob=bs(),_1=re(),g1=fe(),Zle=Vu(),ub=vS(),e1e=Rm(),t1e=no(),r1e=110,ab={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},cb=class extends Zle.AuthProvider{constructor(){super(),this.credentialFetcher=ub.AWSTemporaryCredentialProvider.isAWSSDKInstalled?new ub.AWSSDKCredentialProvider:new ub.LegacyAWSTemporaryCredentialProvider}async auth(e){let{connection:r}=e;if(!e.credentials)throw new _1.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in ob.aws4)throw ob.aws4.kModuleError;let{sign:n}=ob.aws4;if((0,g1.maxWireVersion)(r)<9)throw new _1.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");e.credentials.username||(e.credentials=await n1e(e.credentials,this.credentialFetcher));let{credentials:i}=e,s=i.username,o=i.password,u=i.mechanismProperties.AWS_SESSION_TOKEN,a=s&&o&&u?{accessKeyId:s,secretAccessKey:o,sessionToken:u}:s&&o?{accessKeyId:s,secretAccessKey:o}:void 0,c=i.source,l=await(0,g1.randomBytes)(32),h={saslStart:1,mechanism:"MONGODB-AWS",payload:sb.serialize({r:l,p:r1e},ab)},d=await r.command((0,g1.ns)(`${c}.$cmd`),h,void 0),p=sb.deserialize(d.payload.buffer,ab),m=p.h,g=p.s.buffer;if(g.length!==64)throw new _1.MongoRuntimeError(`Invalid server nonce length ${g.length}, expected 64`);if(!g1.ByteUtils.equals(g.subarray(0,l.byteLength),l))throw new _1.MongoRuntimeError("Server nonce does not begin with client nonce");if(m.length<1||m.length>255||m.indexOf("..")!==-1)throw new _1.MongoRuntimeError(`Server returned an invalid host: "${m}"`);let _="Action=GetCallerIdentity&Version=2011-06-15",w=n({method:"POST",host:m,region:i1e(p.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":_.length,"X-MongoDB-Server-Nonce":g1.ByteUtils.toBase64(g),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:_},a),S={a:w.headers.Authorization,d:w.headers["X-Amz-Date"]};u&&(S.t=u);let C={saslContinue:1,conversationId:1,payload:sb.serialize(S,ab)};await r.command((0,g1.ns)(`${c}.$cmd`),C,void 0)}};zy.MongoDBAWS=cb;async function n1e(t,e){function r(i){if(!i.AccessKeyId||!i.SecretAccessKey)throw new _1.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new e1e.MongoCredentials({username:i.AccessKeyId,password:i.SecretAccessKey,source:t.source,mechanism:t1e.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:i.Token}})}let n=await e.getCredentials();return r(n)}function i1e(t){let e=t.split(".");return e.length===1||e[1]==="amazonaws"?"us-east-1":e[1]}});var lb=y(Wy=>{"use strict";f();Object.defineProperty(Wy,"__esModule",{value:!0});Wy.finishCommandDocument=s1e;Wy.startCommandDocument=o1e;var E1=Ye(),kP=no();function s1e(t,e){return e!=null?{saslContinue:1,conversationId:e,payload:new E1.Binary(E1.BSON.serialize({jwt:t}))}:{saslStart:1,mechanism:kP.AuthMechanism.MONGODB_OIDC,payload:new E1.Binary(E1.BSON.serialize({jwt:t}))}}function o1e(t){let e={};return t.username&&(e.n=t.username),{saslStart:1,autoAuthorize:1,mechanism:kP.AuthMechanism.MONGODB_OIDC,payload:new E1.Binary(E1.BSON.serialize(e))}}});var Fh=y(Hy=>{"use strict";f();Object.defineProperty(Hy,"__esModule",{value:!0});Hy.MachineWorkflow=void 0;var u1e=require("timers/promises"),a1e=fe(),qP=lb(),fb=100,hb=class{constructor(e){this.cache=e,this.callback=this.withLock(this.getToken.bind(this)),this.lastExecutionTime=Date.now()-fb}async execute(e,r){let n=await this.getTokenFromCacheOrEnv(e,r),i=(0,qP.finishCommandDocument)(n);await e.command((0,a1e.ns)(r.source),i,void 0)}async reauthenticate(e,r){this.cache.hasAccessToken&&(e.accessToken===this.cache.getAccessToken()?(this.cache.removeAccessToken(),delete e.accessToken):e.accessToken=this.cache.getAccessToken()),await this.execute(e,r)}async speculativeAuth(e,r){if(!this.cache.hasAccessToken)return{};let n=await this.getTokenFromCacheOrEnv(e,r),i=(0,qP.finishCommandDocument)(n);return i.db=r.source,{speculativeAuthenticate:i}}async getTokenFromCacheOrEnv(e,r){if(this.cache.hasAccessToken)return this.cache.getAccessToken();{let n=await this.callback(r);return this.cache.put({accessToken:n.access_token,expiresInSeconds:n.expires_in}),e.accessToken=n.access_token,n.access_token}}withLock(e){let r=Promise.resolve();return async n=>(await r,r=r.catch(()=>null).then(async()=>{let i=Date.now()-this.lastExecutionTime;return i<=fb&&await(0,u1e.setTimeout)(fb-i),this.lastExecutionTime=Date.now(),await e(n)}),await r)}};Hy.MachineWorkflow=hb});var jP=y(Gy=>{"use strict";f();Object.defineProperty(Gy,"__esModule",{value:!0});Gy.AzureMachineWorkflow=void 0;var LP=IS(),db=re(),c1e=fe(),l1e=Fh(),f1e=Object.freeze({Metadata:"true",Accept:"application/json"}),h1e="Azure endpoint did not return a value with only access_token and expires_in properties",d1e="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure.",pb=class extends l1e.MachineWorkflow{constructor(e){super(e)}async getToken(e){let r=e?.mechanismProperties.TOKEN_RESOURCE,n=e?.username;if(!r)throw new db.MongoAzureError(d1e);let i=await p1e(r,n);if(!m1e(i))throw new db.MongoAzureError(h1e);return i}};Gy.AzureMachineWorkflow=pb;async function p1e(t,e){let r=new URL(LP.AZURE_BASE_URL);(0,LP.addAzureParams)(r,t,e);let n=await(0,c1e.get)(r,{headers:f1e});if(n.status!==200)throw new db.MongoAzureError(`Status code ${n.status} returned from the Azure endpoint. Response body: ${n.body}`);let i=JSON.parse(n.body);return{access_token:i.access_token,expires_in:Number(i.expires_in)}}function m1e(t){return t==null||typeof t!="object"?!1:"access_token"in t&&typeof t.access_token=="string"&&"expires_in"in t&&typeof t.expires_in=="number"}});var VP=y(Ky=>{"use strict";f();Object.defineProperty(Ky,"__esModule",{value:!0});Ky.GCPMachineWorkflow=void 0;var UP=re(),y1e=fe(),g1e=Fh(),_1e="http://metadata/computeMetadata/v1/instance/service-accounts/default/identity",E1e=Object.freeze({"Metadata-Flavor":"Google"}),A1e="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is gcp.",mb=class extends g1e.MachineWorkflow{constructor(e){super(e)}async getToken(e){let r=e?.mechanismProperties.TOKEN_RESOURCE;if(!r)throw new UP.MongoGCPError(A1e);return await w1e(r)}};Ky.GCPMachineWorkflow=mb;async function w1e(t){let e=new URL(_1e);e.searchParams.append("audience",t);let r=await(0,y1e.get)(e,{headers:E1e});if(r.status!==200)throw new UP.MongoGCPError(`Status code ${r.status} returned from the GCP endpoint. Response body: ${r.body}`);return{access_token:r.body}}});var HP=y(Yy=>{"use strict";f();Object.defineProperty(Yy,"__esModule",{value:!0});Yy.K8SMachineWorkflow=void 0;var S1e=require("fs/promises"),b1e=Fh(),O1e="/var/run/secrets/kubernetes.io/serviceaccount/token",zP="AZURE_FEDERATED_TOKEN_FILE",WP="AWS_WEB_IDENTITY_TOKEN_FILE",yb=class extends b1e.MachineWorkflow{constructor(e){super(e)}async getToken(){let e;return process.env[zP]?e=process.env[zP]:process.env[WP]?e=process.env[WP]:e=O1e,{access_token:await(0,S1e.readFile)(e,"utf8")}}};Yy.K8SMachineWorkflow=yb});var _b=y(Qy=>{"use strict";f();Object.defineProperty(Qy,"__esModule",{value:!0});Qy.TokenCache=void 0;var C1e=re(),$h=class extends C1e.MongoDriverError{},gb=class{get hasAccessToken(){return!!this.accessToken}get hasRefreshToken(){return!!this.refreshToken}get hasIdpInfo(){return!!this.idpInfo}getAccessToken(){if(!this.accessToken)throw new $h("Attempted to get an access token when none exists.");return this.accessToken}getRefreshToken(){if(!this.refreshToken)throw new $h("Attempted to get a refresh token when none exists.");return this.refreshToken}getIdpInfo(){if(!this.idpInfo)throw new $h("Attempted to get IDP information when none exists.");return this.idpInfo}put(e,r){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expiresInSeconds=e.expiresInSeconds,r&&(this.idpInfo=r)}removeAccessToken(){this.accessToken=void 0}removeRefreshToken(){this.refreshToken=void 0}};Qy.TokenCache=gb});var GP=y(Jy=>{"use strict";f();Object.defineProperty(Jy,"__esModule",{value:!0});Jy.TokenMachineWorkflow=void 0;var T1e=require("fs"),D1e=re(),M1e=Fh(),v1e="OIDC_TOKEN_FILE must be set in the environment.",Eb=class extends M1e.MachineWorkflow{constructor(e){super(e)}async getToken(){let e=process.env.OIDC_TOKEN_FILE;if(!e)throw new D1e.MongoAWSError(v1e);return{access_token:await T1e.promises.readFile(e,"utf8")}}};Jy.TokenMachineWorkflow=Eb});var Zy=y(Wi=>{"use strict";f();Object.defineProperty(Wi,"__esModule",{value:!0});Wi.MongoDBOIDC=Wi.OIDC_WORKFLOWS=Wi.OIDC_VERSION=void 0;var YP=re(),B1e=Vu(),I1e=jP(),P1e=VP(),N1e=HP(),Xy=_b(),R1e=GP(),x1e="AuthContext must provide credentials.";Wi.OIDC_VERSION=1;Wi.OIDC_WORKFLOWS=new Map;Wi.OIDC_WORKFLOWS.set("test",()=>new R1e.TokenMachineWorkflow(new Xy.TokenCache));Wi.OIDC_WORKFLOWS.set("azure",()=>new I1e.AzureMachineWorkflow(new Xy.TokenCache));Wi.OIDC_WORKFLOWS.set("gcp",()=>new P1e.GCPMachineWorkflow(new Xy.TokenCache));Wi.OIDC_WORKFLOWS.set("k8s",()=>new N1e.K8SMachineWorkflow(new Xy.TokenCache));var Ab=class extends B1e.AuthProvider{constructor(e){if(super(),!e)throw new YP.MongoInvalidArgumentError("No workflow provided to the OIDC auth provider.");this.workflow=e}async auth(e){let{connection:r,reauthenticating:n,response:i}=e;if(i?.speculativeAuthenticate?.done)return;let s=KP(e);n?await this.workflow.reauthenticate(r,s):await this.workflow.execute(r,s,i)}async prepare(e,r){let{connection:n}=r,i=KP(r),s=await this.workflow.speculativeAuth(n,i);return{...e,...s}}};Wi.MongoDBOIDC=Ab;function KP(t){let{credentials:e}=t;if(!e)throw new YP.MongoMissingCredentialsError(x1e);return e}});var Ob=y(ta=>{"use strict";f();Object.defineProperty(ta,"__esModule",{value:!0});ta.CallbackWorkflow=ta.AUTOMATED_TIMEOUT_MS=ta.HUMAN_TIMEOUT_MS=void 0;var F1e=require("timers/promises"),$1e=re(),QP=fe(),wb=lb();ta.HUMAN_TIMEOUT_MS=3e5;ta.AUTOMATED_TIMEOUT_MS=6e4;var k1e=["accessToken","expiresInSeconds","refreshToken"],q1e="User provided OIDC callbacks must return a valid object with an accessToken.",Sb=100,bb=class{constructor(e,r){this.cache=e,this.callback=this.withLock(r),this.lastExecutionTime=Date.now()-Sb}async speculativeAuth(e,r){if(this.cache.hasAccessToken){let n=this.cache.getAccessToken();e.accessToken=n;let i=(0,wb.finishCommandDocument)(n);return i.db=r.source,{speculativeAuthenticate:i}}return{}}async reauthenticate(e,r){this.cache.hasAccessToken&&(e.accessToken===this.cache.getAccessToken()?(this.cache.removeAccessToken(),delete e.accessToken):e.accessToken=this.cache.getAccessToken()),await this.execute(e,r)}async startAuthentication(e,r,n){let i;return n?.speculativeAuthenticate?i=n.speculativeAuthenticate:i=await e.command((0,QP.ns)(r.source),(0,wb.startCommandDocument)(r),void 0),i}async finishAuthentication(e,r,n,i){await e.command((0,QP.ns)(r.source),(0,wb.finishCommandDocument)(n,i),void 0)}async executeAndValidateCallback(e){let r=await this.callback(e);if(L1e(r))throw new $1e.MongoMissingCredentialsError(q1e);return r}withLock(e){let r=Promise.resolve();return async n=>(await r,r=r.catch(()=>null).then(async()=>{let i=Date.now()-this.lastExecutionTime;return i<=Sb&&await(0,F1e.setTimeout)(Sb-i,{signal:n.timeoutContext}),this.lastExecutionTime=Date.now(),await e(n)}),await r)}};ta.CallbackWorkflow=bb;function L1e(t){return t==null||typeof t!="object"||!("accessToken"in t)?!0:!Object.getOwnPropertyNames(t).every(e=>k1e.includes(e))}});var XP=y(e2=>{"use strict";f();Object.defineProperty(e2,"__esModule",{value:!0});e2.AutomatedCallbackWorkflow=void 0;var Cb=re(),JP=Jr(),j1e=Zy(),Tb=Ob(),Db=class extends Tb.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let i=this.cache.getAccessToken();try{return await this.finishAuthentication(e,r,i)}catch(s){if(s instanceof Cb.MongoError&&s.code===Cb.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),await this.execute(e,r);throw s}}let n=await this.fetchAccessToken(r);this.cache.put(n),e.accessToken=n.accessToken,await this.finishAuthentication(e,r,n.accessToken)}async fetchAccessToken(e){let r=new AbortController,n={timeoutContext:r.signal,version:j1e.OIDC_VERSION};e.username&&(n.username=e.username);let i=JP.Timeout.expires(Tb.AUTOMATED_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(n),i])}catch(s){throw JP.TimeoutError.is(s)?(r.abort(),new Cb.MongoOIDCError(`OIDC callback timed out after ${Tb.AUTOMATED_TIMEOUT_MS}ms.`)):s}finally{i.clear()}}};e2.AutomatedCallbackWorkflow=Db});var eN=y(t2=>{"use strict";f();Object.defineProperty(t2,"__esModule",{value:!0});t2.HumanCallbackWorkflow=void 0;var U1e=Ye(),kh=re(),ZP=Jr(),V1e=Zy(),Mb=Ob(),vb=class extends Mb.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let u=this.cache.getAccessToken();e.accessToken=u;try{return await this.finishAuthentication(e,r,u)}catch(a){if(a instanceof kh.MongoError&&a.code===kh.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),delete e.accessToken,await this.execute(e,r);throw a}}if(this.cache.hasRefreshToken){let u=this.cache.getRefreshToken(),a=await this.fetchAccessToken(this.cache.getIdpInfo(),r,u);this.cache.put(a),e.accessToken=a.accessToken;try{return await this.finishAuthentication(e,r,a.accessToken)}catch(c){if(c instanceof kh.MongoError&&c.code===kh.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeRefreshToken(),delete e.accessToken,await this.execute(e,r);throw c}}let n=await this.startAuthentication(e,r),i=n.conversationId,s=U1e.BSON.deserialize(n.payload.buffer),o=await this.fetchAccessToken(s,r);return this.cache.put(o,s),e.accessToken=o.accessToken,await this.finishAuthentication(e,r,o.accessToken,i)}async fetchAccessToken(e,r,n){let i=new AbortController,s={timeoutContext:i.signal,version:V1e.OIDC_VERSION,idpInfo:e};r.username&&(s.username=r.username),n&&(s.refreshToken=n);let o=ZP.Timeout.expires(Mb.HUMAN_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(s),o])}catch(u){throw ZP.TimeoutError.is(u)?(i.abort(),new kh.MongoOIDCError(`OIDC callback timed out after ${Mb.HUMAN_TIMEOUT_MS}ms.`)):u}finally{o.clear()}}};t2.HumanCallbackWorkflow=vb});var tN=y(r2=>{"use strict";f();Object.defineProperty(r2,"__esModule",{value:!0});r2.Plain=void 0;var z1e=Ye(),W1e=re(),H1e=fe(),G1e=Vu(),Bb=class extends G1e.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(!n)throw new W1e.MongoMissingCredentialsError("AuthContext must provide credentials.");let{username:i,password:s}=n,u={saslStart:1,mechanism:"PLAIN",payload:new z1e.Binary(Buffer.from(`\0${i}\0${s}`)),autoAuthorize:1};await r.command((0,H1e.ns)("$external.$cmd"),u,void 0)}};r2.Plain=Bb});var sN=y((yve,iN)=>{"use strict";f();var rN=t=>t.codePointAt(0),K1e=t=>t[0],Y1e=t=>t[t.length-1];function nN(t){let e=[],r=t.length;for(let n=0;n<r;n+=1){let i=t.charCodeAt(n);if(i>=55296&&i<=56319&&r>n+1){let s=t.charCodeAt(n+1);if(s>=56320&&s<=57343){e.push((i-55296)*1024+s-56320+65536),n+=1;continue}}e.push(i)}return e}function qh({unassigned_code_points:t,commonly_mapped_to_nothing:e,non_ASCII_space_characters:r,prohibited_characters:n,bidirectional_r_al:i,bidirectional_l:s},o,u={}){let a=r,c=e;if(typeof o!="string")throw new TypeError("Expected string.");if(o.length===0)return"";let l=nN(o).map(S=>a.get(S)?32:S).filter(S=>!c.get(S)),h=String.fromCodePoint.apply(null,l).normalize("NFKC"),d=nN(h);if(d.some(S=>n.get(S)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(u.allowUnassigned!==!0&&d.some(C=>t.get(C)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5");let m=d.some(S=>i.get(S)),g=d.some(S=>s.get(S));if(m&&g)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let _=i.get(rN(K1e(h))),w=i.get(rN(Y1e(h)));if(m&&!(_&&w))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return h}qh.saslprep=qh;qh.default=qh;iN.exports=qh});var aN=y((_ve,uN)=>{f();uN.exports=Qo;function Qo(t,e){if(!(this instanceof Qo))return new Qo(t,e);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=t||1024,this.deduplicate=e?e.deduplicate:null,this.zeros=this.deduplicate?n2(this.deduplicate.length):null}Qo.prototype.updated=function(t){for(;this.deduplicate&&t.buffer[t.deduplicate]===this.deduplicate[t.deduplicate];)if(t.deduplicate++,t.deduplicate===this.deduplicate.length){t.deduplicate=0,t.buffer.equals&&t.buffer.equals(this.deduplicate)&&(t.buffer=this.deduplicate);break}t.updated||!this.updates||(t.updated=!0,this.updates.push(t))};Qo.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var t=this.updates.pop();return t.updated=!1,t};Qo.prototype._array=function(t,e){if(t>=this.maxPages){if(e)return;Q1e(this,t)}Z1e(t,this.path);for(var r=this.pages,n=this.level;n>0;n--){var i=this.path[n],s=r[i];if(!s){if(e)return;s=r[i]=new Array(32768)}r=s}return r};Qo.prototype.get=function(t,e){var r=this._array(t,e),n=this.path[0],i=r&&r[n];return!i&&!e&&(i=r[n]=new oN(t,n2(this.pageSize)),t>=this.length&&(this.length=t+1)),i&&i.buffer===this.deduplicate&&this.deduplicate&&!e&&(i.buffer=X1e(i.buffer),i.deduplicate=0),i};Qo.prototype.set=function(t,e){var r=this._array(t,!1),n=this.path[0];if(t>=this.length&&(this.length=t+1),!e||this.zeros&&e.equals&&e.equals(this.zeros)){r[n]=void 0;return}this.deduplicate&&e.equals&&e.equals(this.deduplicate)&&(e=this.deduplicate);var i=r[n],s=J1e(e,this.pageSize);i?i.buffer=s:r[n]=new oN(t,s)};Qo.prototype.toBuffer=function(){for(var t=new Array(this.length),e=n2(this.pageSize),r=0;r<t.length;)for(var n=this._array(r,!0),i=0;i<32768&&r<t.length;i++)t[r++]=n&&n[i]?n[i].buffer:e;return Buffer.concat(t)};function Q1e(t,e){for(;t.maxPages<e;){var r=t.pages;t.pages=new Array(32768),t.pages[0]=r,t.level++,t.maxPages*=32768}}function J1e(t,e){if(t.length===e)return t;if(t.length>e)return t.slice(0,e);var r=n2(e);return t.copy(r),r}function n2(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function X1e(t){var e=Buffer.allocUnsafe?Buffer.allocUnsafe(t.length):new Buffer(t.length);return t.copy(e),e}function oN(t,e){this.offset=t*e.length,this.buffer=e,this.updated=!1,this.deduplicate=0}function Z1e(t,e){t=(t-(e[0]=t&32767))/32768,t=(t-(e[1]=t&32767))/32768,e[3]=(t-(e[2]=t&32767))/32768&32767}});var lN=y((Ave,cN)=>{f();var efe=aN();cN.exports=ra;function ra(t){if(!(this instanceof ra))return new ra(t);if(t||(t={}),Buffer.isBuffer(t)&&(t={buffer:t}),this.pageOffset=t.pageOffset||0,this.pageSize=t.pageSize||1024,this.pages=t.pages||efe(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!rfe(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!t.trackUpdates,this._pageMask=this.pageSize-1,t.buffer){for(var e=0;e<t.buffer.length;e+=this.pageSize)this.pages.set(e/this.pageSize,t.buffer.slice(e,e+this.pageSize));this.byteLength=t.buffer.length,this.length=8*this.byteLength}}ra.prototype.get=function(t){var e=t&7,r=(t-e)/8;return!!(this.getByte(r)&128>>e)};ra.prototype.getByte=function(t){var e=t&this._pageMask,r=(t-e)/this.pageSize,n=this.pages.get(r,!0);return n?n.buffer[e+this.pageOffset]:0};ra.prototype.set=function(t,e){var r=t&7,n=(t-r)/8,i=this.getByte(n);return this.setByte(n,e?i|128>>r:i&(255^128>>r))};ra.prototype.toBuffer=function(){for(var t=tfe(this.pages.length*this.pageSize),e=0;e<this.pages.length;e++){var r=this.pages.get(e,!0),n=e*this.pageSize;r&&r.buffer.copy(t,n,this.pageOffset,this.pageOffset+this.pageSize)}return t};ra.prototype.setByte=function(t,e){var r=t&this._pageMask,n=(t-r)/this.pageSize,i=this.pages.get(n,!1);return r+=this.pageOffset,i.buffer[r]===e?!1:(i.buffer[r]=e,t>=this.byteLength&&(this.byteLength=t+1,this.length=this.byteLength*8),this._trackUpdates&&this.pages.updated(i),!0)};function tfe(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function rfe(t){return!(t&t-1)}});var fN=y(A1=>{"use strict";f();var nfe=A1&&A1.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(A1,"__esModule",{value:!0});A1.createMemoryCodePoints=void 0;var ife=nfe(lN());function sfe(t){let e=0;function r(){let c=t.readUInt32BE(e);e+=4;let l=t.slice(e,e+c);return e+=c,(0,ife.default)({buffer:l})}let n=r(),i=r(),s=r(),o=r(),u=r(),a=r();return{unassigned_code_points:n,commonly_mapped_to_nothing:i,non_ASCII_space_characters:s,prohibited_characters:o,bidirectional_r_al:u,bidirectional_l:a}}A1.createMemoryCodePoints=sfe});var hN=y(Ib=>{"use strict";f();Object.defineProperty(Ib,"__esModule",{value:!0});var ofe=require("zlib");Ib.default=(0,ofe.gunzipSync)(Buffer.from("H4sIAAAAAAACA+3dTYgcaRkA4LemO9Mhxm0FITnE9Cwr4jHgwgZ22B6YywqCJ0HQg5CL4sGTuOjCtGSF4CkHEW856MlTQHD3EJnWkU0Owh5VxE3LHlYQdNxd2U6mU59UV/d09fw4M2EySSXPAzNdP1/9fX/99bzVNZEN4jisRDulVFnQmLxm1aXF9Id/2/xMxNJ4XZlg576yuYlGt9gupV6xoFf8jhu9YvulVrFlp5XSx+lfvYhORGPXvqIRWSxERKtIm8bKFd10WNfKDS5Fo9jJWrq2+M2IlW+8uHgl/+BsROfPF4v5L7148Ur68Sha6dqZpYiVVy8tvLCWXo80Sf/lS89dGX2wHGvpzoXVn75/YWH5wmqe8uika82ViJXTy83Ve2k5Urozm38wm4/ls6t5uT6yfsTSJ7J3T0VKt8c5ExEXI8aFkH729c3eT+7EC6ca8cVULZUiYacX0R5PNWNxlh9L1y90q5kyzrpyy+9WcvOV6URntqw7La9sNVstXyczWVaWYbaaTYqzOHpr7pyiNT3/YzKuT63Z/FqKZlFTiuXtFM2vVOtIq7jiyKJbWZaOWD0euz0yoV2Z7kY0xq2x0YhfzVpmM5px9nTEH7JZ0ot5u39p0ma75Z472/s/H+2yr2inYyuq7fMvJivH2rM72N/Z3lyL31F2b1ya1P0zn816k2KP6JU9UzseucdQH5YqVeH/lFajSN2udg+TLJ9rksNxlvV2lki19rXKI43TPLejFu4ov7k3nMbhyhfY3Xb37f8BAGCf0eMTOH5szf154KmnNgKcnLb+Fzi2AfXktbN7fJelwTAiO/W5uQ2KINXRYu+znqo/WTAdLadURHmy3qciazd3bra4T3w16/f7t7Ms9U5gfJu10955sx1r3vmhBAAAAAAAgId20J1iZbDowNvIjuH427Gr5l/eiC+8OplZON8sVjx/qr9y+Pj+YRItT+NqAM+kkZs3AAAAAID6yfx1FwCAI97/dCh1/ub6SA0AAAAAAAAAgNoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hutp5SiQpYAAAAAAAAAQO2MIpZiT804flnAE2fhwjOeAZXr76kOAAAAAAAA8FjNf4N/l0NE3U/vuVQskLpSd4/Yh2xu9xTu0tFeeNYsLI2f/VMdNxTzj6Je9E/+6pp6Nn3awW3A54goe4Bss6v+PGsjQGMAAAAAAOBp5XEgwH6e7J7rwEQHRb/XvAMAAAAAAAA8yzoDeQDwVGjIAgAAAAAAAACoPfF/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqL/GSkSkClkCAAAAAAAAALXTSAAAAAAAAABA3Y1kAQAAAAAAAADUX8RSXZ9dsHC9+M8Fg2Ex/em1lAZpEBGttcrVjZqLEa+k0XpKw9mG4zWx4ukPUMhkAQAAAAAAABzBqbSe3//rXOS9HxGdo4TqR2XkutCdBu+LaPZw/lBbO7cbHnh2C7N7AIo4evEznllqLqWUp/LnYOtpM2bnOH66wI1+9GO4sOuISwv/TOlumu56FDv3NZhc4mR9v7zYIrafr40j/Cccvj9Xns3t3mu99E7qxUv3bqS0/ouNH/08++RGemfQ+nsx/5uNXsQPGulynPvv3ZTW37zd+1ovrqaYpP/122X6Xpx779Z3zr/3YOPKW1lkaRDf31pPaf3j/msRsVGkL+d/f+/m4sJsPm1cfSsr16e8m9Ldj/KsnyIuR3nXw83Is3EhxLd/2V773ks3m/cj/THKUummdP9qKhIOImuOU0Xjwb3y+oqt735rpTetVbF9n8R4x9crRfO77TKqVOZpDclv5bfK18lMnk+q0K18UpxF/RrGXE0Zxtqx3tWSj+vxbL4XaasfKb0dRbtLW73JsfPGg177H+OmGKlfvS1msllt7JEJm9XOJqXR+Fkfo1H66uy5H1v3Xx5+uJmGLw9jro2u7Loj4PnuR6+f+e3d261+eazNhzrL7X83MohoHpS4PddV8ki1it61//pw1g7z6p1U/26Nm2llST57B5rUvuG0XqSU/rPd7jYrqWcbd+beJQ77BgPMDwn37/8BAGCf0eMTOH4cPlufv9VGgJOzqf8Fjm1APXkd7B7f5dF57GPMaWy/MTvjvNvtXj6h8W2+GXvnzXaseeeHEgAAAAAAAB7aQXeKlcGiadBoEOeLb2dtpGOL2MyOtf391a3P/zD96c3JzIP3t4oV797vrh8+vn+YRL5bBuj/AQAAAABqJvfHXQAAHkX82zfXAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACeAgkAAAAAAAAAqLuRLAAAAAAAAACA2hv9D1iu/VAYaAYA","base64"))});var mN=y((Pb,pN)=>{"use strict";f();var dN=Pb&&Pb.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},ufe=dN(sN()),afe=fN(),cfe=dN(hN()),lfe=(0,afe.createMemoryCodePoints)(cfe.default);function Lh(t,e){return(0,ufe.default)(lfe,t,e)}Lh.saslprep=Lh;Lh.default=Lh;pN.exports=Lh});var SN=y(w1=>{"use strict";f();Object.defineProperty(w1,"__esModule",{value:!0});w1.ScramSHA256=w1.ScramSHA1=void 0;var ffe=mN(),dc=require("crypto"),Nb=Ye(),Ns=re(),o2=fe(),hfe=Vu(),yN=no(),u2=class extends hfe.AuthProvider{constructor(e){super(),this.cryptoMethod=e||"sha1"}async prepare(e,r){let n=this.cryptoMethod,i=r.credentials;if(!i)throw new Ns.MongoMissingCredentialsError("AuthContext must provide credentials.");let s=await(0,o2.randomBytes)(24);return r.nonce=s,{...e,speculativeAuthenticate:{...AN(n,i,s),db:i.source}}}async auth(e){let{reauthenticating:r,response:n}=e;return n?.speculativeAuthenticate&&!r?await wN(this.cryptoMethod,n.speculativeAuthenticate,e):await dfe(this.cryptoMethod,e)}};function _N(t){return t.replace("=","=3D").replace(",","=2C")}function EN(t,e){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(t,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(e.toString("base64"),"utf8")])}function AN(t,e,r){let n=_N(e.username);return{saslStart:1,mechanism:t==="sha1"?yN.AuthMechanism.MONGODB_SCRAM_SHA1:yN.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new Nb.Binary(Buffer.concat([Buffer.from("n,,","utf8"),EN(n,r)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}async function dfe(t,e){let{connection:r,credentials:n}=e;if(!n)throw new Ns.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!e.nonce)throw new Ns.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");let i=e.nonce,s=n.source,o=AN(t,n,i),u=await r.command((0,o2.ns)(`${s}.$cmd`),o,void 0);await wN(t,u,e)}async function wN(t,e,r){let n=r.connection,i=r.credentials;if(!i)throw new Ns.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!r.nonce)throw new Ns.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");let s=r.nonce,o=i.source,u=_N(i.username),a=i.password,c=t==="sha256"?(0,ffe.saslprep)(a):pfe(u,a),l=Buffer.isBuffer(e.payload)?new Nb.Binary(e.payload):e.payload,h=gN(l),d=parseInt(h.i,10);if(d&&d<4096)throw new Ns.MongoRuntimeError(`Server returned an invalid iteration count ${d}`);let p=h.s,m=h.r;if(m.startsWith("nonce"))throw new Ns.MongoRuntimeError(`Server returned an invalid nonce: ${m}`);let g=`c=biws,r=${m}`,_=Efe(c,Buffer.from(p,"base64"),d,t),w=i2(t,_,"Client Key"),S=i2(t,_,"Server Key"),C=yfe(t,w),O=[EN(u,s),l.toString("utf8"),g].join(","),B=i2(t,C,O),P=`p=${mfe(w,B)}`,v=[g,P].join(","),j=i2(t,S,O),k={saslContinue:1,conversationId:e.conversationId,payload:new Nb.Binary(Buffer.from(v))},q=await n.command((0,o2.ns)(`${o}.$cmd`),k,void 0),R=gN(q.payload);if(!Afe(Buffer.from(R.v,"base64"),j))throw new Ns.MongoRuntimeError("Server returned an invalid signature");if(q.done!==!1)return;let F={saslContinue:1,conversationId:q.conversationId,payload:Buffer.alloc(0)};await n.command((0,o2.ns)(`${o}.$cmd`),F,void 0)}function gN(t){let e=t.toString("utf8"),r={},n=e.split(",");for(let i=0;i<n.length;i++){let s=(n[i].match(/^([^=]*)=(.*)$/)??[]).slice(1);r[s[0]]=s[1]}return r}function pfe(t,e){if(typeof t!="string")throw new Ns.MongoInvalidArgumentError("Username must be a string");if(typeof e!="string")throw new Ns.MongoInvalidArgumentError("Password must be a string");if(e.length===0)throw new Ns.MongoInvalidArgumentError("Password cannot be empty");let r;try{r=dc.createHash("md5")}catch(n){throw dc.getFips()?new Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode"):n}return r.update(`${t}:mongo:${e}`,"utf8"),r.digest("hex")}function mfe(t,e){Buffer.isBuffer(t)||(t=Buffer.from(t)),Buffer.isBuffer(e)||(e=Buffer.from(e));let r=Math.max(t.length,e.length),n=[];for(let i=0;i<r;i+=1)n.push(t[i]^e[i]);return Buffer.from(n).toString("base64")}function yfe(t,e){return dc.createHash(t).update(e).digest()}function i2(t,e,r){return dc.createHmac(t,e).update(r).digest()}var s2={},Rb=0;function gfe(){s2={},Rb=0}var _fe={sha256:32,sha1:20};function Efe(t,e,r,n){let i=[t,e.toString("base64"),r].join("_");if(s2[i]!=null)return s2[i];let s=dc.pbkdf2Sync(t,e,r,_fe[n],n);return Rb>=200&&gfe(),s2[i]=s,Rb+=1,s}function Afe(t,e){if(t.length!==e.length)return!1;if(typeof dc.timingSafeEqual=="function")return dc.timingSafeEqual(t,e);let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var xb=class extends u2{constructor(){super("sha1")}};w1.ScramSHA1=xb;var Fb=class extends u2{constructor(){super("sha256")}};w1.ScramSHA256=Fb});var CN=y(a2=>{"use strict";f();Object.defineProperty(a2,"__esModule",{value:!0});a2.X509=void 0;var bN=re(),wfe=fe(),Sfe=Vu(),$b=class extends Sfe.AuthProvider{async prepare(e,r){let{credentials:n}=r;if(!n)throw new bN.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...e,speculativeAuthenticate:ON(n)}}async auth(e){let r=e.connection,n=e.credentials;if(!n)throw new bN.MongoMissingCredentialsError("AuthContext must provide credentials.");e.response?.speculativeAuthenticate||await r.command((0,wfe.ns)("$external.$cmd"),ON(n),void 0)}};a2.X509=$b;function ON(t){let e={authenticate:1,mechanism:"MONGODB-X509"};return t.username&&(e.user=t.username),e}});var Lb=y(c2=>{"use strict";f();Object.defineProperty(c2,"__esModule",{value:!0});c2.MongoClientAuthProviders=void 0;var bfe=Nm(),Ofe=$P(),MN=Zy(),Cfe=XP(),Tfe=eN(),TN=_b(),Dfe=tN(),Jo=no(),DN=SN(),Mfe=CN(),kb=re(),vfe=new Map([[Jo.AuthMechanism.MONGODB_AWS,()=>new Ofe.MongoDBAWS],[Jo.AuthMechanism.MONGODB_CR,()=>{throw new kb.MongoInvalidArgumentError("MONGODB-CR is no longer a supported auth mechanism in MongoDB 4.0+")}],[Jo.AuthMechanism.MONGODB_GSSAPI,()=>new bfe.GSSAPI],[Jo.AuthMechanism.MONGODB_OIDC,t=>new MN.MongoDBOIDC(t)],[Jo.AuthMechanism.MONGODB_PLAIN,()=>new Dfe.Plain],[Jo.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new DN.ScramSHA1],[Jo.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new DN.ScramSHA256],[Jo.AuthMechanism.MONGODB_X509,()=>new Mfe.X509]]),qb=class{constructor(){this.existingProviders=new Map}getOrCreateProvider(e,r){let n=this.existingProviders.get(e);if(n)return n;let i=vfe.get(e);if(!i)throw new kb.MongoInvalidArgumentError(`authMechanism ${e} not supported`);let s;return e===Jo.AuthMechanism.MONGODB_OIDC?s=i(this.getWorkflow(r)):s=i(),this.existingProviders.set(e,s),s}getWorkflow(e){if(e.OIDC_HUMAN_CALLBACK)return new Tfe.HumanCallbackWorkflow(new TN.TokenCache,e.OIDC_HUMAN_CALLBACK);if(e.OIDC_CALLBACK)return new Cfe.AutomatedCallbackWorkflow(new TN.TokenCache,e.OIDC_CALLBACK);{let r=e.ENVIRONMENT,n=MN.OIDC_WORKFLOWS.get(r)?.();if(!n)throw new kb.MongoInvalidArgumentError(`Could not load workflow for environment ${e.ENVIRONMENT}`);return n}}};c2.MongoClientAuthProviders=qb});var vN=y(l2=>{"use strict";f();Object.defineProperty(l2,"__esModule",{value:!0});Bfe(Xo(),l2);function Bfe(t){for(let e of Object.keys(t))Object.defineProperty(l2,e,{enumerable:!0,get:function(){return t[e]}})}});var Ub=y(h2=>{"use strict";f();Object.defineProperty(h2,"__esModule",{value:!0});h2.ClientBulkWriteOperation=void 0;var jb=vN(),Ife=gs(),Pfe=fe(),Nfe=Lt(),S1=nt(),f2=class extends Nfe.CommandOperation{get commandName(){return"bulkWrite"}constructor(e,r){super(void 0,r),this.commandBuilder=e,this.options=r,this.ns=new Pfe.MongoDBNamespace("admin","$cmd")}resetBatch(){return this.commandBuilder.resetBatch()}get canRetryWrite(){return this.commandBuilder.isBatchRetryable}async execute(e,r,n){let i;if(e.description.type===jb.ServerType.LoadBalancer)if(r){let s;r.pinnedConnection?s=r.pinnedConnection:(s=await e.pool.checkOut({timeoutContext:n}),r.pin(s)),i=this.commandBuilder.buildBatch(s.hello?.maxMessageSizeBytes,s.hello?.maxWriteBatchSize,s.hello?.maxBsonObjectSize)}else throw new jb.MongoClientBulkWriteExecutionError("Session provided to the client bulk write operation must be present.");else{if(!e.description.maxWriteBatchSize||!e.description.maxMessageSizeBytes||!e.description.maxBsonObjectSize)throw new jb.MongoClientBulkWriteExecutionError("In order to execute a client bulk write, both maxWriteBatchSize, maxMessageSizeBytes and maxBsonObjectSize must be provided by the servers hello response.");i=this.commandBuilder.buildBatch(e.description.maxMessageSizeBytes,e.description.maxWriteBatchSize,e.description.maxBsonObjectSize)}return this.canRetryWrite||(this.options.willRetryWrite=!1),await super.executeCommand(e,r,i,n,Ife.ClientBulkWriteCursorResponse)}};h2.ClientBulkWriteOperation=f2;(0,S1.defineAspects)(f2,[S1.Aspect.WRITE_OPERATION,S1.Aspect.SKIP_COLLATION,S1.Aspect.CURSOR_CREATING,S1.Aspect.RETRYABLE,S1.Aspect.COMMAND_BATCHING])});var IN=y(d2=>{"use strict";f();Object.defineProperty(d2,"__esModule",{value:!0});d2.ClientBulkWriteCursor=void 0;var Rfe=Ub(),xfe=Zr(),BN=fe(),Ffe=en(),Vb=class t extends Ffe.AbstractCursor{constructor(e,r,n={}){super(e,new BN.MongoDBNamespace("admin","$cmd"),n),this.commandBuilder=r,this.clientBulkWriteOptions=n}get response(){return this.cursorResponse?this.cursorResponse:null}get operations(){return this.commandBuilder.lastOperations}clone(){let e=(0,BN.mergeOptions)({},this.clientBulkWriteOptions);return delete e.session,new t(this.client,this.commandBuilder,{...e})}async _initialize(e){let r=new Rfe.ClientBulkWriteOperation(this.commandBuilder,{...this.clientBulkWriteOptions,...this.cursorOptions,session:e}),n=await(0,xfe.executeOperation)(this.client,r,this.timeoutContext);return this.cursorResponse=n,{server:r.server,session:e,response:n}}};d2.ClientBulkWriteCursor=Vb});var FN=y(Ft=>{"use strict";f();Object.defineProperty(Ft,"__esModule",{value:!0});Ft.buildReplaceOneOperation=Ft.buildUpdateManyOperation=Ft.buildUpdateOneOperation=Ft.buildDeleteManyOperation=Ft.buildDeleteOneOperation=Ft.buildInsertOneOperation=Ft.ClientBulkWriteCommandBuilder=void 0;Ft.buildOperation=Gb;var zb=Ye(),PN=ph(),jh=re(),Kb=fe(),NN=1e3,Hb=class{constructor(e,r,n){this.models=e,this.options=r,this.pkFactory=n??Kb.DEFAULT_PK_FACTORY,this.currentModelIndex=0,this.previousModelIndex=0,this.lastOperations=[],this.isBatchRetryable=!0}get errorsOnly(){return"verboseResults"in this.options?!this.options.verboseResults:!0}hasNextBatch(){return this.currentModelIndex<this.models.length}resetBatch(){return this.currentModelIndex=this.previousModelIndex,!0}buildBatch(e,r,n){this.isBatchRetryable=!0;let i=0,s=0,o=this.baseCommand(),u=new Map;for(this.previousModelIndex=this.currentModelIndex;this.currentModelIndex<this.models.length;){let a=this.models[this.currentModelIndex],c=a.namespace,l=u.get(c);if((a.name==="deleteMany"||a.name==="updateMany")&&(this.isBatchRetryable=!1),l!=null){let h=Gb(a,l,this.pkFactory),d;try{d=zb.BSON.serialize(h)}catch(p){throw new jh.MongoInvalidArgumentError("Could not serialize operation to BSON",{cause:p})}if(Wb("ops",d,n),i+d.length<e&&o.ops.documents.length<r)i=NN+o.ops.push(h,d),this.currentModelIndex++;else break}else{u.set(c,s);let h={ns:c},d=Gb(a,s,this.pkFactory),p,m;try{p=zb.BSON.serialize(h),m=zb.BSON.serialize(d)}catch(g){throw new jh.MongoInvalidArgumentError("Could not serialize ns info to BSON",{cause:g})}if(Wb("nsInfo",p,n),Wb("ops",m,n),i+p.length+m.length<e&&o.ops.documents.length<r)i=NN+o.nsInfo.push(h,p)+o.ops.push(d,m),s++,this.currentModelIndex++;else break}}return this.lastOperations=o.ops.documents,o}baseCommand(){let e={bulkWrite:1,errorsOnly:this.errorsOnly,ordered:this.options.ordered??!0,ops:new PN.DocumentSequence("ops"),nsInfo:new PN.DocumentSequence("nsInfo")};return this.options.bypassDocumentValidation!=null&&(e.bypassDocumentValidation=this.options.bypassDocumentValidation),this.options.let&&(e.let=this.options.let),this.options.comment!==void 0&&(e.comment=this.options.comment),e}};Ft.ClientBulkWriteCommandBuilder=Hb;function Wb(t,e,r){if(e.length>r)throw new jh.MongoInvalidArgumentError(`Client bulk write operation ${t} of length ${e.length} exceeds the max bson object size of ${r}`)}var $fe=(t,e,r)=>{let n={insert:e,document:t.document};return n.document._id=t.document._id??r.createPk(),n};Ft.buildInsertOneOperation=$fe;var kfe=(t,e)=>RN(t,e,!1);Ft.buildDeleteOneOperation=kfe;var qfe=(t,e)=>RN(t,e,!0);Ft.buildDeleteManyOperation=qfe;function RN(t,e,r){let n={delete:e,multi:r,filter:t.filter};return t.hint&&(n.hint=t.hint),t.collation&&(n.collation=t.collation),n}var Lfe=(t,e)=>xN(t,e,!1);Ft.buildUpdateOneOperation=Lfe;var jfe=(t,e)=>xN(t,e,!0);Ft.buildUpdateManyOperation=jfe;function Ufe(t){if(!(0,Kb.hasAtomicOperators)(t))throw new jh.MongoAPIError("Client bulk write update models must only contain atomic modifiers (start with $) and must not be empty.")}function xN(t,e,r){Ufe(t.update);let n={update:e,multi:r,filter:t.filter,updateMods:t.update};return t.hint&&(n.hint=t.hint),t.upsert&&(n.upsert=t.upsert),t.arrayFilters&&(n.arrayFilters=t.arrayFilters),t.collation&&(n.collation=t.collation),n}var Vfe=(t,e)=>{if((0,Kb.hasAtomicOperators)(t.replacement))throw new jh.MongoAPIError("Client bulk write replace models must not contain atomic modifiers (start with $) and must not be empty.");let r={update:e,multi:!1,filter:t.filter,updateMods:t.replacement};return t.hint&&(r.hint=t.hint),t.upsert&&(r.upsert=t.upsert),t.collation&&(r.collation=t.collation),r};Ft.buildReplaceOneOperation=Vfe;function Gb(t,e,r){switch(t.name){case"insertOne":return(0,Ft.buildInsertOneOperation)(t,e,r);case"deleteOne":return(0,Ft.buildDeleteOneOperation)(t,e);case"deleteMany":return(0,Ft.buildDeleteManyOperation)(t,e);case"updateOne":return(0,Ft.buildUpdateOneOperation)(t,e);case"updateMany":return(0,Ft.buildUpdateManyOperation)(t,e);case"replaceOne":return(0,Ft.buildReplaceOneOperation)(t,e)}}});var $N=y(p2=>{"use strict";f();Object.defineProperty(p2,"__esModule",{value:!0});p2.ClientBulkWriteResultsMerger=void 0;var zfe=Xo(),Wfe=re(),Hfe={acknowledged:!1,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},Yb=class{static unacknowledged(){return Hfe}constructor(e){this.options=e,this.currentBatchOffset=0,this.writeConcernErrors=[],this.writeErrors=new Map,this.result={acknowledged:!0,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},e.verboseResults&&(this.result.insertResults=new Map,this.result.updateResults=new Map,this.result.deleteResults=new Map)}get bulkWriteResult(){return{acknowledged:this.result.acknowledged,insertedCount:this.result.insertedCount,upsertedCount:this.result.upsertedCount,matchedCount:this.result.matchedCount,modifiedCount:this.result.modifiedCount,deletedCount:this.result.deletedCount,insertResults:this.result.insertResults,updateResults:this.result.updateResults,deleteResults:this.result.deleteResults}}async merge(e){let r;try{for await(let n of e)if(n.ok===1)this.options.verboseResults&&this.processDocument(e,n);else if(this.options.ordered){let i=new Wfe.MongoClientBulkWriteError({message:"Mongo client ordered bulk write encountered a write error."});throw i.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg}),i.partialResult=this.result,i}else this.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg})}catch(n){if(n instanceof zfe.MongoWriteConcernError){let i=n.result;if(r={insertedCount:i.nInserted,upsertedCount:i.nUpserted,matchedCount:i.nMatched,modifiedCount:i.nModified,deletedCount:i.nDeleted,writeConcernError:i.writeConcernError},this.options.verboseResults&&i.cursor.firstBatch)for(let s of i.cursor.firstBatch)s.ok===1&&this.processDocument(e,s)}else throw n}finally{if(e.response){let n=e.response;this.incrementCounts(n)}this.currentBatchOffset+=e.operations.length}if(r){let n=r.writeConcernError;this.incrementCounts(r),this.writeConcernErrors.push({code:n.code,message:n.errmsg})}return this.result}processDocument(e,r){let n=e.operations[r.idx];if("insert"in n&&this.result.insertResults?.set(r.idx+this.currentBatchOffset,{insertedId:n.document._id}),"update"in n){let i={matchedCount:r.n,modifiedCount:r.nModified??0,didUpsert:r.upserted!=null};r.upserted&&(i.upsertedId=r.upserted._id),this.result.updateResults?.set(r.idx+this.currentBatchOffset,i)}"delete"in n&&this.result.deleteResults?.set(r.idx+this.currentBatchOffset,{deletedCount:r.n})}incrementCounts(e){this.result.insertedCount+=e.insertedCount,this.result.upsertedCount+=e.upsertedCount,this.result.matchedCount+=e.matchedCount,this.result.modifiedCount+=e.modifiedCount,this.result.deletedCount+=e.deletedCount}};p2.ClientBulkWriteResultsMerger=Yb});var LN=y(m2=>{"use strict";f();Object.defineProperty(m2,"__esModule",{value:!0});m2.ClientBulkWriteExecutor=void 0;var kN=en(),Gfe=IN(),pc=re(),Kfe=Jr(),Yfe=fe(),Qfe=Qr(),Jfe=Zr(),Xfe=Ub(),Zfe=FN(),qN=$N(),Qb=class{constructor(e,r,n){if(r.length===0)throw new pc.MongoClientBulkWriteExecutionError("No client bulk write models were provided.");if(this.client=e,this.operations=r,this.options={ordered:!0,bypassDocumentValidation:!1,verboseResults:!1,...n},this.options.writeConcern||(this.options.writeConcern=Qfe.WriteConcern.fromOptions(this.client.s.options)),this.options.writeConcern?.w===0){if(this.options.verboseResults)throw new pc.MongoInvalidArgumentError("Cannot request unacknowledged write concern and verbose results");if(this.options.ordered)throw new pc.MongoInvalidArgumentError("Cannot request unacknowledged write concern and ordered writes")}}async execute(){let e=this.client.s.options.pkFactory,r=new Zfe.ClientBulkWriteCommandBuilder(this.operations,this.options,e),n=(0,Yfe.resolveTimeoutOptions)(this.client,this.options),i=Kfe.TimeoutContext.create(n);if(this.options.writeConcern?.w===0){for(;r.hasNextBatch();){let s=new Xfe.ClientBulkWriteOperation(r,this.options);await(0,Jfe.executeOperation)(this.client,s,i)}return qN.ClientBulkWriteResultsMerger.unacknowledged()}else{let s=new qN.ClientBulkWriteResultsMerger(this.options);for(;r.hasNextBatch();){let o=new kN.CursorTimeoutContext(i,Symbol()),u={...this.options,timeoutContext:o,...n.timeoutMS!=null&&{timeoutMode:kN.CursorTimeoutMode.LIFETIME}},a=new Gfe.ClientBulkWriteCursor(this.client,r,u);try{await s.merge(a)}catch(c){if(c instanceof pc.MongoServerError&&!(c instanceof pc.MongoClientBulkWriteError)){let l=new pc.MongoClientBulkWriteError({message:"Mongo client bulk write encountered an error during execution"});throw l.cause=c,l.partialResult=s.bulkWriteResult,l}else throw c}}if(s.writeConcernErrors.length>0||s.writeErrors.size>0){let o=new pc.MongoClientBulkWriteError({message:"Mongo client bulk write encountered errors during execution."});throw o.writeConcernErrors=s.writeConcernErrors,o.writeErrors=s.writeErrors,o.partialResult=s.bulkWriteResult,o}return s.bulkWriteResult}}};m2.ClientBulkWriteExecutor=Qb});var tO=y(Hi=>{"use strict";f();Object.defineProperty(Hi,"__esModule",{value:!0});Hi.WaitingForSuitableServerEvent=Hi.ServerSelectionSucceededEvent=Hi.ServerSelectionFailedEvent=Hi.ServerSelectionStartedEvent=Hi.ServerSelectionEvent=void 0;var ehe=fe(),y2=Xt(),mc=class{constructor(e,r,n){this.selector=e,this.operation=n,this.topologyDescription=r}};Hi.ServerSelectionEvent=mc;var Jb=class extends mc{constructor(e,r,n){super(e,r,n),this.name=y2.SERVER_SELECTION_STARTED,this.message="Server selection started"}};Hi.ServerSelectionStartedEvent=Jb;var Xb=class extends mc{constructor(e,r,n,i){super(e,r,i),this.name=y2.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=n}};Hi.ServerSelectionFailedEvent=Xb;var Zb=class extends mc{constructor(e,r,n,i){super(e,r,i),this.name=y2.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";let{host:s,port:o}=ehe.HostAddress.fromString(n).toHostPort();this.serverHost=s,this.serverPort=o}};Hi.ServerSelectionSucceededEvent=Zb;var eO=class extends mc{constructor(e,r,n,i){super(e,r,i),this.name=y2.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=n}};Hi.WaitingForSuitableServerEvent=eO});var nO=y(b1=>{"use strict";f();Object.defineProperty(b1,"__esModule",{value:!0});b1.SrvPoller=b1.SrvPollingEvent=void 0;var the=require("dns"),rO=require("timers"),rhe=re(),nhe=fi(),g2=fe(),_2=class{constructor(e){this.srvRecords=e}hostnames(){return new Set(this.srvRecords.map(e=>g2.HostAddress.fromSrvRecord(e).toString()))}};b1.SrvPollingEvent=_2;var E2=class t extends nhe.TypedEventEmitter{constructor(e){if(super(),!e||!e.srvHost)throw new rhe.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=e.srvHost,this.srvMaxHosts=e.srvMaxHosts??0,this.srvServiceName=e.srvServiceName??"mongodb",this.rescanSrvIntervalMS=6e4,this.heartbeatFrequencyMS=e.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){this._timeout||this.schedule()}stop(){this._timeout&&((0,rO.clearTimeout)(this._timeout),this.generation+=1,this._timeout=void 0)}schedule(){this._timeout&&(0,rO.clearTimeout)(this._timeout),this._timeout=(0,rO.setTimeout)(()=>{this._poll().then(void 0,g2.squashError)},this.intervalMS)}success(e){this.haMode=!1,this.schedule(),this.emit(t.SRV_RECORD_DISCOVERY,new _2(e))}failure(){this.haMode=!0,this.schedule()}async _poll(){let e=this.generation,r;try{r=await the.promises.resolveSrv(this.srvAddress)}catch{this.failure();return}if(e!==this.generation)return;let n=[];for(let i of r)try{(0,g2.checkParentDomainMatch)(i.name,this.srvHost),n.push(i)}catch(s){(0,g2.squashError)(s)}if(!n.length){this.failure();return}this.success(n)}};b1.SrvPoller=E2;E2.SRV_RECORD_DISCOVERY="srvRecordDiscovery"});var YN=y(O1=>{"use strict";f();Object.defineProperty(O1,"__esModule",{value:!0});O1.ServerCapabilities=O1.Topology=void 0;var jN=ib(),Wn=Xt(),fo=re(),It=Ha(),ihe=fi(),Uh=Sr(),iO=Jr(),Gi=fe(),Re=ai(),na=vy(),UN=K4(),oO=Ch(),sO=qf(),ia=tO(),A2=nO(),VN=HS(),she=0,Vh=(0,Gi.makeStateMachine)({[Re.STATE_CLOSED]:[Re.STATE_CLOSED,Re.STATE_CONNECTING],[Re.STATE_CONNECTING]:[Re.STATE_CONNECTING,Re.STATE_CLOSING,Re.STATE_CONNECTED,Re.STATE_CLOSED],[Re.STATE_CONNECTED]:[Re.STATE_CONNECTED,Re.STATE_CLOSING,Re.STATE_CLOSED],[Re.STATE_CLOSING]:[Re.STATE_CLOSING,Re.STATE_CLOSED]}),uO=Symbol("cancelled"),Zo=Symbol("waitQueue"),on=class t extends ihe.TypedEventEmitter{constructor(e,r,n){super(),this.client=e,n=n??{hosts:[Gi.HostAddress.fromString("localhost:27017")],...Object.fromEntries(jN.DEFAULT_OPTIONS.entries()),...Object.fromEntries(jN.FEATURE_FLAGS.entries())},typeof r=="string"?r=[Gi.HostAddress.fromString(r)]:Array.isArray(r)||(r=[r]);let i=[];for(let c of r)if(typeof c=="string")i.push(Gi.HostAddress.fromString(c));else if(c instanceof Gi.HostAddress)i.push(c);else throw new fo.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(c)}`);let s=ohe(n),o=she++,u=n.srvMaxHosts==null||n.srvMaxHosts===0||n.srvMaxHosts>=i.length?i:(0,Gi.shuffle)(i,n.srvMaxHosts),a=new Map;for(let c of u)a.set(c.toString(),new oO.ServerDescription(c));this[Zo]=new Gi.List,this.s={id:o,options:n,seedlist:i,state:Re.STATE_CLOSED,description:new VN.TopologyDescription(s,a,n.replicaSet,void 0,void 0,void 0,n),serverSelectionTimeoutMS:n.serverSelectionTimeoutMS,heartbeatFrequencyMS:n.heartbeatFrequencyMS,minHeartbeatFrequencyMS:n.minHeartbeatFrequencyMS,servers:new Map,credentials:n?.credentials,clusterTime:void 0,detectShardedTopology:c=>this.detectShardedTopology(c),detectSrvRecords:c=>this.detectSrvRecords(c)},this.mongoLogger=e.mongoLogger,this.component="topology",n.srvHost&&!n.loadBalanced&&(this.s.srvPoller=n.srvPoller??new A2.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:n.srvHost,srvMaxHosts:n.srvMaxHosts,srvServiceName:n.srvServiceName}),this.on(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology)),this.connectionLock=void 0}detectShardedTopology(e){let r=e.previousDescription.type,n=e.newDescription.type,i=r!==Re.TopologyType.Sharded&&n===Re.TopologyType.Sharded,o=!!this.s.srvPoller?.listeners(A2.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);i&&!o&&(this.s.srvPoller?.on(A2.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start())}detectSrvRecords(e){let r=this.s.description;this.s.description=this.s.description.updateFromSrvPollingEvent(e,this.s.options.srvMaxHosts),this.s.description!==r&&(zN(this),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new na.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description)))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}get capabilities(){return new w2(this.lastHello())}async connect(e){this.connectionLock??=this._connect(e);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}}async _connect(e){if(e=e??{},this.s.state===Re.STATE_CONNECTED)return this;Vh(this,Re.STATE_CONNECTING),this.emitAndLog(t.TOPOLOGY_OPENING,new na.TopologyOpeningEvent(this.s.id)),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new na.TopologyDescriptionChangedEvent(this.s.id,new VN.TopologyDescription(Re.TopologyType.Unknown),this.s.description));let r=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(r.map(u=>[u.address,GN(this,u)])),this.s.options.loadBalanced)for(let u of r){let a=new oO.ServerDescription(u.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(a)}let n=this.client.s.options.serverSelectionTimeoutMS,i=e.readPreference??Uh.ReadPreference.primary,s=iO.TimeoutContext.create({timeoutMS:void 0,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:this.client.s.options.waitQueueTimeoutMS}),o={operationName:"ping",...e,timeoutContext:s};try{let u=await this.selectServer((0,sO.readPreferenceServerSelector)(i),o);return!(this.s.options[Symbol.for("@@mdb.skipPingOnConnect")]===!0)&&this.s.credentials?(await u.command((0,Gi.ns)("admin.$cmd"),{ping:1},{timeoutContext:s}),Vh(this,Re.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this):(Vh(this,Re.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this)}catch(u){throw this.close(),u}}close(){if(!(this.s.state===Re.STATE_CLOSED||this.s.state===Re.STATE_CLOSING)){for(let e of this.s.servers.values())HN(e,this);this.s.servers.clear(),Vh(this,Re.STATE_CLOSING),KN(this[Zo],new fo.MongoTopologyClosedError),this.s.srvPoller&&(this.s.srvPoller.stop(),this.s.srvPoller.removeListener(A2.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords)),this.removeListener(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),Vh(this,Re.STATE_CLOSED),this.emitAndLog(t.TOPOLOGY_CLOSED,new na.TopologyClosedEvent(this.s.id))}}async selectServer(e,r){let n;if(typeof e!="function")if(typeof e=="string")n=(0,sO.readPreferenceServerSelector)(Uh.ReadPreference.fromString(e));else{let d;e instanceof Uh.ReadPreference?d=e:(Uh.ReadPreference.translate(r),d=r.readPreference||Uh.ReadPreference.primary),n=(0,sO.readPreferenceServerSelector)(d)}else n=e;r={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...r},this.client.mongoLogger?.willLog(It.MongoLoggableComponent.SERVER_SELECTION,It.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(It.MongoLoggableComponent.SERVER_SELECTION,new ia.ServerSelectionStartedEvent(e,this.description,r.operationName));let i;r.timeoutContext?i=r.timeoutContext.serverSelectionTimeout:i=iO.Timeout.expires(r.serverSelectionTimeoutMS??0);let s=this.description.type===Re.TopologyType.Sharded,o=r.session,u=o&&o.transaction;if(s&&u&&u.server)return this.client.mongoLogger?.willLog(It.MongoLoggableComponent.SERVER_SELECTION,It.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(It.MongoLoggableComponent.SERVER_SELECTION,new ia.ServerSelectionSucceededEvent(e,this.description,u.server.pool.address,r.operationName)),r.timeoutContext?.clearServerSelectionTimeout&&i?.clear(),u.server;let{promise:a,resolve:c,reject:l}=(0,Gi.promiseWithResolvers)(),h={serverSelector:n,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:u,resolve:c,reject:l,startTime:(0,Gi.now)(),operationName:r.operationName,waitingLogged:!1,previousServer:r.previousServer};this[Zo].push(h),WN(this);try{i?.throwIfExpired();let d=await(i?Promise.race([a,i]):a);return r.timeoutContext?.csotEnabled()&&d.description.minRoundTripTime!==0&&(r.timeoutContext.minRoundTripTime=d.description.minRoundTripTime),d}catch(d){if(iO.TimeoutError.is(d)){h[uO]=!0;let p=new fo.MongoServerSelectionError(`Server selection timed out after ${i?.duration} ms`,this.description);throw this.client.mongoLogger?.willLog(It.MongoLoggableComponent.SERVER_SELECTION,It.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(It.MongoLoggableComponent.SERVER_SELECTION,new ia.ServerSelectionFailedEvent(e,this.description,p,r.operationName)),r.timeoutContext?.csotEnabled()?new fo.MongoOperationTimeoutError("Timed out during server selection",{cause:p}):p}throw d}finally{r.timeoutContext?.clearServerSelectionTimeout&&i?.clear()}}serverUpdateHandler(e){if(!this.s.description.hasServer(e.address)||uhe(this.s.description,e))return;let r=this.s.description,n=this.s.description.servers.get(e.address);if(!n)return;let i=e.$clusterTime;i&&(0,Re._advanceClusterTime)(this,i);let s=n&&n.equals(e);if(this.s.description=this.s.description.update(e),this.s.description.compatibilityError){this.emit(t.ERROR,new fo.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!s){let o=this.s.description.servers.get(e.address);o&&this.emit(t.SERVER_DESCRIPTION_CHANGED,new na.ServerDescriptionChangedEvent(this.s.id,e.address,n,o))}zN(this,e),this[Zo].length>0&&WN(this),s||this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new na.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description))}auth(e,r){typeof e=="function"&&(r=e,e=void 0),typeof r=="function"&&r(void 0,!0)}get clientMetadata(){return this.s.options.metadata}isConnected(){return this.s.state===Re.STATE_CONNECTED}isDestroyed(){return this.s.state===Re.STATE_CLOSED}lastHello(){let e=Array.from(this.description.servers.values());return e.length===0?{}:e.filter(i=>i.type!==Re.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(e){this.s.clusterTime=e}};O1.Topology=on;on.SERVER_OPENING=Wn.SERVER_OPENING;on.SERVER_CLOSED=Wn.SERVER_CLOSED;on.SERVER_DESCRIPTION_CHANGED=Wn.SERVER_DESCRIPTION_CHANGED;on.TOPOLOGY_OPENING=Wn.TOPOLOGY_OPENING;on.TOPOLOGY_CLOSED=Wn.TOPOLOGY_CLOSED;on.TOPOLOGY_DESCRIPTION_CHANGED=Wn.TOPOLOGY_DESCRIPTION_CHANGED;on.ERROR=Wn.ERROR;on.OPEN=Wn.OPEN;on.CONNECT=Wn.CONNECT;on.CLOSE=Wn.CLOSE;on.TIMEOUT=Wn.TIMEOUT;function HN(t,e){for(let r of Wn.LOCAL_SERVER_EVENTS)t.removeAllListeners(r);t.destroy(),e.emitAndLog(on.SERVER_CLOSED,new na.ServerClosedEvent(e.s.id,t.description.address));for(let r of Wn.SERVER_RELAY_EVENTS)t.removeAllListeners(r)}function ohe(t){return t?.directConnection?Re.TopologyType.Single:t?.replicaSet?Re.TopologyType.ReplicaSetNoPrimary:t?.loadBalanced?Re.TopologyType.LoadBalanced:Re.TopologyType.Unknown}function GN(t,e){t.emitAndLog(on.SERVER_OPENING,new na.ServerOpeningEvent(t.s.id,e.address));let r=new UN.Server(t,e,t.s.options);for(let n of Wn.SERVER_RELAY_EVENTS)r.on(n,i=>t.emit(n,i));return r.on(UN.Server.DESCRIPTION_RECEIVED,n=>t.serverUpdateHandler(n)),r.connect(),r}function zN(t,e){if(e&&t.s.servers.has(e.address)){let r=t.s.servers.get(e.address);if(r){if(r.s.description=e,e.error instanceof fo.MongoError&&e.error.hasErrorLabel(fo.MongoErrorLabel.ResetPool)){let n=e.error.hasErrorLabel(fo.MongoErrorLabel.InterruptInUseConnections);r.pool.clear({interruptInUseConnections:n})}else if(e.error==null){let n=t.s.description.type;(e.isDataBearing||e.type!==Re.ServerType.Unknown&&n===Re.TopologyType.Single)&&r.pool.ready()}}}for(let r of t.description.servers.values())if(!t.s.servers.has(r.address)){let n=GN(t,r);t.s.servers.set(r.address,n)}for(let r of t.s.servers){let n=r[0];if(t.description.hasServer(n)||!t.s.servers.has(n))continue;let i=t.s.servers.get(n);t.s.servers.delete(n),i&&HN(i,t)}}function KN(t,e){for(;t.length;){let r=t.shift();r&&(r[uO]||(r.mongoLogger?.willLog(It.MongoLoggableComponent.SERVER_SELECTION,It.SeverityLevel.DEBUG)&&r.mongoLogger?.debug(It.MongoLoggableComponent.SERVER_SELECTION,new ia.ServerSelectionFailedEvent(r.serverSelector,r.topologyDescription,e,r.operationName)),r.reject(e)))}}function WN(t){if(t.s.state===Re.STATE_CLOSED){KN(t[Zo],new fo.MongoTopologyClosedError);return}let e=t.description.type===Re.TopologyType.Sharded,r=Array.from(t.description.servers.values()),n=t[Zo].length;for(let i=0;i<n;++i){let s=t[Zo].shift();if(!s||s[uO])continue;let o;try{let c=s.serverSelector,l=s.previousServer;o=c?c(t.description,r,l?[l]:[]):r}catch(c){t.client.mongoLogger?.willLog(It.MongoLoggableComponent.SERVER_SELECTION,It.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(It.MongoLoggableComponent.SERVER_SELECTION,new ia.ServerSelectionFailedEvent(s.serverSelector,t.description,c,s.operationName)),s.reject(c);continue}let u;if(o.length===0){s.waitingLogged||(t.client.mongoLogger?.willLog(It.MongoLoggableComponent.SERVER_SELECTION,It.SeverityLevel.INFORMATIONAL)&&t.client.mongoLogger?.info(It.MongoLoggableComponent.SERVER_SELECTION,new ia.WaitingForSuitableServerEvent(s.serverSelector,t.description,t.s.serverSelectionTimeoutMS!==0?t.s.serverSelectionTimeoutMS-((0,Gi.now)()-s.startTime):-1,s.operationName)),s.waitingLogged=!0),t[Zo].push(s);continue}else if(o.length===1)u=t.s.servers.get(o[0].address);else{let c=(0,Gi.shuffle)(o,2),l=t.s.servers.get(c[0].address),h=t.s.servers.get(c[1].address);u=l&&h&&l.s.operationCount<h.s.operationCount?l:h}if(!u){let c=new fo.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",t.description);t.client.mongoLogger?.willLog(It.MongoLoggableComponent.SERVER_SELECTION,It.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(It.MongoLoggableComponent.SERVER_SELECTION,new ia.ServerSelectionFailedEvent(s.serverSelector,t.description,c,s.operationName)),s.reject(c);return}let a=s.transaction;e&&a&&a.isActive&&u&&a.pinServer(u),t.client.mongoLogger?.willLog(It.MongoLoggableComponent.SERVER_SELECTION,It.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(It.MongoLoggableComponent.SERVER_SELECTION,new ia.ServerSelectionSucceededEvent(s.serverSelector,s.topologyDescription,u.pool.address,s.operationName)),s.resolve(u)}if(t[Zo].length>0)for(let[,i]of t.s.servers)process.nextTick(function(){return i.requestCheck()})}function uhe(t,e){let n=t.servers.get(e.address)?.topologyVersion;return(0,oO.compareTopologyVersion)(n,e.topologyVersion)>0}var w2=class{constructor(e){this.minWireVersion=e.minWireVersion||0,this.maxWireVersion=e.maxWireVersion||0}get hasAggregationCursor(){return this.maxWireVersion>=1}get hasWriteCommands(){return this.maxWireVersion>=2}get hasTextSearch(){return this.minWireVersion>=0}get hasAuthCommands(){return this.maxWireVersion>=1}get hasListCollectionsCommand(){return this.maxWireVersion>=3}get hasListIndexesCommand(){return this.maxWireVersion>=3}get supportsSnapshotReads(){return this.maxWireVersion>=13}get commandsTakeWriteConcern(){return this.maxWireVersion>=5}get commandsTakeCollation(){return this.maxWireVersion>=5}};O1.ServerCapabilities=w2});var Lu=y(C1=>{"use strict";f();Object.defineProperty(C1,"__esModule",{value:!0});C1.MongoClient=C1.ServerApiVersion=void 0;var aO=require("fs"),ahe=Ye(),che=ec(),lhe=Rm(),fhe=no(),QN=ib(),hhe=Xt(),dhe=wm(),cO=re(),phe=Lb(),JN=Ha(),mhe=fi(),yhe=LN(),ghe=Zr(),_he=bl(),XN=Sr(),Ehe=Dl(),Ahe=qf(),ZN=YN(),eR=n1(),un=fe();C1.ServerApiVersion=Object.freeze({v1:"1"});var zt=Symbol("options"),S2=class extends mhe.TypedEventEmitter{constructor(e,r){super(),this[zt]=(0,QN.parseOptions)(e,this,r);let n=Object.values(this[zt].mongoLoggerOptions.componentSeverities).some(s=>s!==JN.SeverityLevel.OFF);this.mongoLogger=n?new JN.MongoLogger(this[zt].mongoLoggerOptions):void 0;let i=this;this.s={url:e,bsonOptions:(0,ahe.resolveBSONOptions)(this[zt]),namespace:(0,un.ns)("admin"),hasBeenClosed:!1,sessionPool:new eR.ServerSessionPool(this),activeSessions:new Set,authProviders:new phe.MongoClientAuthProviders,get options(){return i[zt]},get readConcern(){return i[zt].readConcern},get writeConcern(){return i[zt].writeConcern},get readPreference(){return i[zt].readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}async asyncDispose(){await this.close()}checkForNonGenuineHosts(){let e=this[zt].hosts.filter(s=>(0,un.isHostMatch)(un.DOCUMENT_DB_CHECK,s.host)),r=(0,un.isHostMatch)(un.DOCUMENT_DB_CHECK,this[zt].srvHost),n=this[zt].hosts.filter(s=>(0,un.isHostMatch)(un.COSMOS_DB_CHECK,s.host)),i=(0,un.isHostMatch)(un.COSMOS_DB_CHECK,this[zt].srvHost);e.length!==0||r?this.mongoLogger?.info("client",un.DOCUMENT_DB_MSG):(n.length!==0||i)&&this.mongoLogger?.info("client",un.COSMOS_DB_MSG)}get options(){return Object.freeze({...this[zt]})}get serverApi(){return this[zt].serverApi&&Object.freeze({...this[zt].serverApi})}get monitorCommands(){return this[zt].monitorCommands}set monitorCommands(e){this[zt].monitorCommands=e}get autoEncrypter(){return this[zt].autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get timeoutMS(){return this.s.options.timeoutMS}async bulkWrite(e,r){if(this.autoEncrypter)throw new cO.MongoInvalidArgumentError("MongoClient bulkWrite does not currently support automatic encryption.");return await new yhe.ClientBulkWriteExecutor(this,e,(0,un.resolveOptions)(this,r)).execute()}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;let e=this[zt];if(e.tls&&(typeof e.tlsCAFile=="string"&&(e.ca??=await aO.promises.readFile(e.tlsCAFile)),typeof e.tlsCRLFile=="string"&&(e.crl??=await aO.promises.readFile(e.tlsCRLFile)),typeof e.tlsCertificateKeyFile=="string"&&(!e.key||!e.cert))){let n=await aO.promises.readFile(e.tlsCertificateKeyFile);e.key??=n,e.cert??=n}if(typeof e.srvHost=="string"){let n=await(0,QN.resolveSRVRecord)(e);for(let[i,s]of n.entries())e.hosts[i]=s}if(e.credentials?.mechanism===fhe.AuthMechanism.MONGODB_OIDC){let n=e.credentials?.mechanismProperties?.ALLOWED_HOSTS||lhe.DEFAULT_ALLOWED_HOSTS;if(!!!e.credentials?.mechanismProperties?.ENVIRONMENT){for(let s of e.hosts)if(!(0,un.hostMatchesWildcards)(s.toHostPort().host,n))throw new cO.MongoInvalidArgumentError(`Host '${s}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${n.join(",")}'`)}}this.topology=new ZN.Topology(this,e.hosts,e),this.topology.once(ZN.Topology.OPEN,()=>this.emit("open",this));for(let n of hhe.MONGO_CLIENT_EVENTS)this.topology.on(n,(...i)=>this.emit(n,...i));let r=async()=>{try{await this.topology?.connect(e)}catch(n){throw this.topology?.close(),n}};return this.autoEncrypter?(await this.autoEncrypter?.init(),await r(),await e.encrypter.connectInternalClient()):await r(),this}async close(e=!1){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1});let r=Array.from(this.s.activeSessions,c=>c.endSession());if(this.s.activeSessions.clear(),await Promise.all(r),this.topology==null)return;let n=(0,Ahe.readPreferenceServerSelector)(XN.ReadPreference.primaryPreferred),i=this.topology.description,s=Array.from(i.servers.values());if(n(i,s).length!==0){let c=Array.from(this.s.sessionPool.sessions,({id:l})=>l);if(c.length!==0)try{await(0,ghe.executeOperation)(this,new _he.RunAdminCommandOperation({endSessions:c},{readPreference:XN.ReadPreference.primaryPreferred,noResponse:!0}))}catch(l){(0,un.squashError)(l)}}let u=this.topology;this.topology=void 0,u.close();let{encrypter:a}=this[zt];a&&await a.close(this,e)}db(e,r){r=r??{},e||(e=this.s.options.dbName);let n=Object.assign({},this[zt],r);return new dhe.Db(this,e,n)}static async connect(e,r){return await new this(e,r).connect()}startSession(e){let r=new eR.ClientSession(this,this.s.sessionPool,{explicit:!0,...e},this[zt]);return this.s.activeSessions.add(r),r.once("ended",()=>{this.s.activeSessions.delete(r)}),r}async withSession(e,r){let n={owner:Symbol(),...typeof e=="object"?e:{}},i=typeof e=="function"?e:r;if(i==null)throw new cO.MongoInvalidArgumentError("Missing required callback parameter");let s=this.startSession(n);try{return await i(s)}finally{try{await s.endSession()}catch(o){(0,un.squashError)(o)}}}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new che.ChangeStream(this,e,(0,un.resolveOptions)(this,r))}};C1.MongoClient=S2;(0,Ehe.configureResourceManagement)(S2.prototype)});var Dl=y(b2=>{"use strict";f();Object.defineProperty(b2,"__esModule",{value:!0});b2.configureResourceManagement=zh;b2.configureExplicitResourceManagement=whe;function zh(t){Symbol.asyncDispose&&Object.defineProperty(t,Symbol.asyncDispose,{value:async function(){await this.asyncDispose()},enumerable:!1,configurable:!0,writable:!0})}function whe(){let{MongoClient:t}=Lu(),{ClientSession:e}=n1(),{AbstractCursor:r}=en(),{ChangeStream:n}=ec();zh(t.prototype),zh(e.prototype),zh(r.prototype),zh(n.prototype)}});var en=y(Wt=>{"use strict";f();Object.defineProperty(Wt,"__esModule",{value:!0});Wt.CursorTimeoutContext=Wt.AbstractCursor=Wt.CursorTimeoutMode=Wt.CURSOR_FLAGS=void 0;var iR=require("stream"),T1=Ye(),Dr=re(),She=fi(),tR=Zr(),bhe=tA(),Ohe=iM(),rR=Bi(),O2=Sr(),Che=Dl(),nR=n1(),lO=Jr(),yc=fe();Wt.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];Wt.CursorTimeoutMode=Object.freeze({ITERATION:"iteration",LIFETIME:"cursorLifetime"});var Wh=class extends She.TypedEventEmitter{constructor(e,r,n={}){if(super(),this.documents=null,this.hasEmittedClose=!1,!e.s.isMongoClient)throw new Dr.MongoRuntimeError("Cursor must be constructed with MongoClient");if(this.cursorClient=e,this.cursorNamespace=r,this.cursorId=null,this.initialized=!1,this.isClosed=!1,this.isKilled=!1,this.cursorOptions={readPreference:n.readPreference&&n.readPreference instanceof O2.ReadPreference?n.readPreference:O2.ReadPreference.primary,...(0,T1.pluckBSONSerializeOptions)(n),timeoutMS:n?.timeoutContext?.csotEnabled()?n.timeoutContext.timeoutMS:n.timeoutMS,tailable:n.tailable,awaitData:n.awaitData},this.cursorOptions.timeoutMS!=null)if(n.timeoutMode==null)if(n.tailable){if(n.awaitData&&n.maxAwaitTimeMS!=null&&n.maxAwaitTimeMS>=this.cursorOptions.timeoutMS)throw new Dr.MongoInvalidArgumentError("Cannot specify maxAwaitTimeMS >= timeoutMS for a tailable awaitData cursor");this.cursorOptions.timeoutMode=Wt.CursorTimeoutMode.ITERATION}else this.cursorOptions.timeoutMode=Wt.CursorTimeoutMode.LIFETIME;else{if(n.tailable&&n.timeoutMode===Wt.CursorTimeoutMode.LIFETIME)throw new Dr.MongoInvalidArgumentError("Cannot set tailable cursor's timeoutMode to LIFETIME");this.cursorOptions.timeoutMode=n.timeoutMode}else if(n.timeoutMode!=null)throw new Dr.MongoInvalidArgumentError("Cannot set timeoutMode without setting timeoutMS");this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null&&(this.cursorOptions.timeoutMode===Wt.CursorTimeoutMode.ITERATION&&!this.cursorOptions.tailable||this.cursorOptions.tailable&&!this.cursorOptions.awaitData);let i=rR.ReadConcern.fromOptions(n);i&&(this.cursorOptions.readConcern=i),typeof n.batchSize=="number"&&(this.cursorOptions.batchSize=n.batchSize),n.comment!==void 0&&(this.cursorOptions.comment=n.comment),typeof n.maxTimeMS=="number"&&(this.cursorOptions.maxTimeMS=n.maxTimeMS),typeof n.maxAwaitTimeMS=="number"&&(this.cursorOptions.maxAwaitTimeMS=n.maxAwaitTimeMS),n.session instanceof nR.ClientSession?this.cursorSession=n.session:this.cursorSession=this.cursorClient.startSession({owner:this,explicit:!1}),this.deserializationOptions={...this.cursorOptions,validation:{utf8:n?.enableUtf8Validation!==!1}},this.timeoutContext=n.timeoutContext}get id(){return this.cursorId??void 0}get isDead(){return(this.cursorId?.isZero()??!1)||this.isClosed||this.isKilled}get client(){return this.cursorClient}get server(){return this.selectedServer}get namespace(){return this.cursorNamespace}get readPreference(){return this.cursorOptions.readPreference}get readConcern(){return this.cursorOptions.readConcern}get session(){return this.cursorSession}set session(e){this.cursorSession=e}get closed(){return this.isClosed&&(this.documents?.length??0)===0}get killed(){return this.isKilled}get loadBalanced(){return!!this.cursorClient.topology?.loadBalanced}async asyncDispose(){await this.close()}bufferedCount(){return this.documents?.length??0}readBufferedDocuments(e){let r=[],n=Math.min(e??this.documents?.length??0,this.documents?.length??0);for(let i=0;i<n;i++){let s=this.documents?.shift(this.deserializationOptions);s!=null&&r.push(s)}return r}async*[Symbol.asyncIterator](){if(!this.closed)try{for(;;){if(this.isKilled||this.closed||this.cursorId!=null&&this.isDead&&(this.documents?.length??0)===0)return;let e=await this.next();if(e===null)return;yield e}}finally{if(!this.isClosed)try{await this.close()}catch(e){(0,yc.squashError)(e)}}}stream(e){if(e?.transform){let r=e.transform,n=new C2(this),i=n.pipe(new iR.Transform({objectMode:!0,highWaterMark:1,transform(s,o,u){try{let a=r(s);u(void 0,a)}catch(a){u(a)}}}));return n.on("error",s=>i.emit("error",s)),i}return new C2(this)}async hasNext(){if(this.cursorId===T1.Long.ZERO)return!1;this.cursorOptions.timeoutMode===Wt.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{if((this.documents?.length??0)!==0)return!0;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===Wt.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return!1}async next(){if(this.cursorId===T1.Long.ZERO)throw new Dr.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===Wt.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===Wt.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async tryNext(){if(this.cursorId===T1.Long.ZERO)throw new Dr.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===Wt.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;if(await this.fetchBatch(),e=this.documents?.shift(this.deserializationOptions),e!=null)return this.transform!=null?await this.transformDocument(e):e}finally{this.cursorOptions.timeoutMode===Wt.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async forEach(e){if(typeof e!="function")throw new Dr.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let r of this)if(e(r)===!1)break}async close(e){await this.cleanup(e?.timeoutMS)}async toArray(){let e=[];for await(let r of this){e.push(r);let n=this.readBufferedDocuments();if(this.transform!=null)for(let i of n)e.push(await this.transformDocument(i));else e.push(...n)}return e}addCursorFlag(e,r){if(this.throwIfInitialized(),!Wt.CURSOR_FLAGS.includes(e))throw new Dr.MongoInvalidArgumentError(`Flag ${e} is not one of ${Wt.CURSOR_FLAGS}`);if(typeof r!="boolean")throw new Dr.MongoInvalidArgumentError(`Flag ${e} must be a boolean value`);return this.cursorOptions[e]=r,this}map(e){this.throwIfInitialized();let r=this.transform;return r?this.transform=n=>e(r(n)):this.transform=e,this}withReadPreference(e){if(this.throwIfInitialized(),e instanceof O2.ReadPreference)this.cursorOptions.readPreference=e;else if(typeof e=="string")this.cursorOptions.readPreference=O2.ReadPreference.fromString(e);else throw new Dr.MongoInvalidArgumentError(`Invalid read preference: ${e}`);return this}withReadConcern(e){this.throwIfInitialized();let r=rR.ReadConcern.fromOptions({readConcern:e});return r&&(this.cursorOptions.readConcern=r),this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new Dr.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.cursorOptions.maxTimeMS=e,this}batchSize(e){if(this.throwIfInitialized(),this.cursorOptions.tailable)throw new Dr.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof e!="number")throw new Dr.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this.cursorOptions.batchSize=e,this}rewind(){if(this.timeoutContext&&this.timeoutContext.owner!==this)throw new Dr.MongoAPIError("Cannot rewind cursor that does not own its timeout context.");if(!this.initialized)return;this.cursorId=null,this.documents?.clear(),this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!1,this.isKilled=!1,this.initialized=!1;let e=this.cursorSession;e&&e.explicit===!1&&(e.hasEnded||e.endSession().then(void 0,yc.squashError),this.cursorSession=this.cursorClient.startSession({owner:this,explicit:!1}))}async getMore(e){if(this.cursorId==null)throw new Dr.MongoRuntimeError("Unexpected null cursor id. A cursor creating command should have set this");if(this.selectedServer==null)throw new Dr.MongoRuntimeError("Unexpected null selectedServer. A cursor creating command should have set this");let r={...this.cursorOptions,session:this.cursorSession,batchSize:e},n=new bhe.GetMoreOperation(this.cursorNamespace,this.cursorId,this.selectedServer,r);return await(0,tR.executeOperation)(this.cursorClient,n,this.timeoutContext)}async cursorInit(){this.cursorOptions.timeoutMS!=null&&(this.timeoutContext??=new Hh(lO.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:this.cursorOptions.timeoutMS}),this));try{let e=await this._initialize(this.cursorSession);this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null;let r=e.response;this.selectedServer=e.server,this.cursorId=r.id,this.cursorNamespace=r.ns??this.namespace,this.documents=r,this.initialized=!0}catch(e){throw this.initialized=!0,await this.cleanup(void 0,e),e}this.isDead&&await this.cleanup()}async fetchBatch(){if(this.isClosed)return;if(this.isDead){await this.cleanup();return}if(this.cursorId==null&&(await this.cursorInit(),(this.documents?.length??0)!==0||this.isDead))return;let e=this.cursorOptions.batchSize||1e3;try{let r=await this.getMore(e);this.cursorId=r.id,this.documents=r}catch(r){try{await this.cleanup(void 0,r)}catch(n){(0,yc.squashError)(n)}throw r}this.isDead&&await this.cleanup()}async cleanup(e,r){this.isClosed=!0;let n=this.cursorSession,i=()=>e!=null?(this.timeoutContext?.clear(),new Hh(lO.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:e}),this)):this.timeoutContext?.refreshed();try{if(!this.isKilled&&this.cursorId&&!this.cursorId.isZero()&&this.cursorNamespace&&this.selectedServer&&!n.hasEnded){this.isKilled=!0;let s=this.cursorId;this.cursorId=T1.Long.ZERO,await(0,tR.executeOperation)(this.cursorClient,new Ohe.KillCursorsOperation(s,this.cursorNamespace,this.selectedServer,{session:n}),i())}}catch(s){(0,yc.squashError)(s)}finally{n?.owner===this&&await n.endSession({error:r}),n?.inTransaction()||(0,nR.maybeClearPinnedConnection)(n,{error:r}),this.emitClose()}}emitClose(){try{!this.hasEmittedClose&&((this.documents?.length??0)===0||this.isClosed)&&this.emit("close")}finally{this.hasEmittedClose=!0}}async transformDocument(e){if(this.transform==null)return e;try{let r=this.transform(e);if(r===null){let n="Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.";throw new Dr.MongoAPIError(n)}return r}catch(r){try{await this.close()}catch(n){(0,yc.squashError)(n)}throw r}}throwIfInitialized(){if(this.initialized)throw new Dr.MongoCursorInUseError}};Wt.AbstractCursor=Wh;Wh.CLOSE="close";var C2=class extends iR.Readable{constructor(e){super({objectMode:!0,autoDestroy:!1,highWaterMark:1}),this._readInProgress=!1,this._cursor=e}_read(e){this._readInProgress||(this._readInProgress=!0,this._readNext())}_destroy(e,r){this._cursor.close().then(()=>r(e),n=>r(n))}_readNext(){if(this._cursor.id===T1.Long.ZERO){this.push(null);return}this._cursor.next().then(e=>{if(e==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,yc.squashError);else{if(this.push(e))return this._readNext();this._readInProgress=!1}},e=>e.message.match(/server is closed/)?(this._cursor.close().then(void 0,yc.squashError),this.push(null)):e.message.match(/operation was interrupted/)?this.push(null):this.destroy(e))}};(0,Che.configureResourceManagement)(Wh.prototype);var Hh=class t extends lO.TimeoutContext{constructor(e,r){super(),this.timeoutContext=e,this.owner=r}get serverSelectionTimeout(){return this.timeoutContext.serverSelectionTimeout}get connectionCheckoutTimeout(){return this.timeoutContext.connectionCheckoutTimeout}get clearServerSelectionTimeout(){return this.timeoutContext.clearServerSelectionTimeout}get timeoutForSocketWrite(){return this.timeoutContext.timeoutForSocketWrite}get timeoutForSocketRead(){return this.timeoutContext.timeoutForSocketRead}csotEnabled(){return this.timeoutContext.csotEnabled()}refresh(){if(typeof this.owner!="symbol")return this.timeoutContext.refresh()}clear(){if(typeof this.owner!="symbol")return this.timeoutContext.clear()}get maxTimeMS(){return this.timeoutContext.maxTimeMS}get timeoutMS(){return this.timeoutContext.csotEnabled()?this.timeoutContext.timeoutMS:null}refreshed(){return new t(this.timeoutContext.refreshed(),this.owner)}addMaxTimeMSToCommand(e,r){this.timeoutContext.addMaxTimeMSToCommand(e,r)}getSocketTimeoutMS(){return this.timeoutContext.getSocketTimeoutMS()}};Wt.CursorTimeoutContext=Hh});var Ja=y(Ki=>{"use strict";f();Object.defineProperty(Ki,"__esModule",{value:!0});Ki.ExplainableCursor=Ki.Explain=Ki.ExplainVerbosity=void 0;Ki.validateExplainTimeoutOptions=Mhe;Ki.decorateWithExplain=vhe;var The=en(),Dhe=re();Ki.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});var fO=class t{constructor(e,r){typeof e=="boolean"?this.verbosity=e?Ki.ExplainVerbosity.allPlansExecution:Ki.ExplainVerbosity.queryPlanner:this.verbosity=e,this.maxTimeMS=r}static fromOptions({explain:e}={}){if(e==null)return;if(typeof e=="boolean"||typeof e=="string")return new t(e);let{verbosity:r,maxTimeMS:n}=e;return new t(r,n)}};Ki.Explain=fO;function Mhe(t,e){let{maxTimeMS:r,timeoutMS:n}=t;if(n!=null&&(r!=null||e?.maxTimeMS!=null))throw new Dhe.MongoAPIError("Cannot use maxTimeMS with timeoutMS for explain commands.")}function vhe(t,e){let{verbosity:r,maxTimeMS:n}=e,i={explain:t,verbosity:r};return typeof n=="number"&&(i.maxTimeMS=n),i}var hO=class extends The.AbstractCursor{resolveExplainTimeoutOptions(e,r){let n,i;return e==null&&r==null?(n=void 0,i=void 0):e!=null&&r==null?(n=typeof e!="object"||"verbosity"in e?e:void 0,i=typeof e=="object"&&"timeoutMS"in e?e:void 0):(n=e,i=r),{timeout:i,explain:n}}};Ki.ExplainableCursor=hO});var Lt=y(D2=>{"use strict";f();Object.defineProperty(D2,"__esModule",{value:!0});D2.CommandOperation=void 0;var Bhe=re(),dO=Ja(),Ihe=Bi(),Phe=qf(),T2=fe(),sR=Qr(),D1=nt(),pO=class extends D1.AbstractOperation{constructor(e,r){super(r),this.options=r??{};let n=r?.dbName||r?.authdb;if(n?this.ns=new T2.MongoDBNamespace(n,"$cmd"):this.ns=e?e.s.namespace.withCollection("$cmd"):new T2.MongoDBNamespace("admin","$cmd"),this.readConcern=Ihe.ReadConcern.fromOptions(r),this.writeConcern=sR.WriteConcern.fromOptions(r),this.hasAspect(D1.Aspect.EXPLAINABLE))this.explain=dO.Explain.fromOptions(r),this.explain&&(0,dO.validateExplainTimeoutOptions)(this.options,this.explain);else if(r?.explain!=null)throw new Bhe.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){return this.hasAspect(D1.Aspect.EXPLAINABLE)?this.explain==null:super.canRetryWrite}async executeCommand(e,r,n,i,s){this.server=e;let o={...this.options,...this.bsonOptions,timeoutContext:i,readPreference:this.readPreference,session:r},u=(0,T2.maxWireVersion)(e),a=this.session&&this.session.inTransaction();return this.readConcern&&(0,T2.commandSupportsReadConcern)(n)&&!a&&Object.assign(n,{readConcern:this.readConcern}),this.trySecondaryWrite&&u<Phe.MIN_SECONDARY_WRITE_WIRE_VERSION&&(o.omitReadPreference=!0),this.writeConcern&&this.hasAspect(D1.Aspect.WRITE_OPERATION)&&!a&&sR.WriteConcern.apply(n,this.writeConcern),o.collation&&typeof o.collation=="object"&&!this.hasAspect(D1.Aspect.SKIP_COLLATION)&&Object.assign(n,{collation:o.collation}),typeof o.maxTimeMS=="number"&&(n.maxTimeMS=o.maxTimeMS),this.hasAspect(D1.Aspect.EXPLAINABLE)&&this.explain&&(n=(0,dO.decorateWithExplain)(n,this.explain)),await e.command(this.ns,n,o,s)}};D2.CommandOperation=pO});var uR=y(v2=>{"use strict";f();Object.defineProperty(v2,"__esModule",{value:!0});v2.ListDatabasesOperation=void 0;var oR=fe(),Nhe=Lt(),mO=nt(),M2=class extends Nhe.CommandOperation{constructor(e,r){super(e,r),this.options=r??{},this.ns=new oR.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}async execute(e,r,n){let i={listDatabases:1};return typeof this.options.nameOnly=="boolean"&&(i.nameOnly=this.options.nameOnly),this.options.filter&&(i.filter=this.options.filter),typeof this.options.authorizedDatabases=="boolean"&&(i.authorizedDatabases=this.options.authorizedDatabases),(0,oR.maxWireVersion)(e)>=9&&this.options.comment!==void 0&&(i.comment=this.options.comment),await super.executeCommand(e,r,i,n)}};v2.ListDatabasesOperation=M2;(0,mO.defineAspects)(M2,[mO.Aspect.READ_OPERATION,mO.Aspect.RETRYABLE])});var aR=y(B2=>{"use strict";f();Object.defineProperty(B2,"__esModule",{value:!0});B2.ValidateCollectionOperation=void 0;var yO=re(),Rhe=Lt(),gO=class extends Rhe.CommandOperation{constructor(e,r,n){let i={validate:r},s=Object.keys(n);for(let o=0;o<s.length;o++)Object.prototype.hasOwnProperty.call(n,s[o])&&s[o]!=="session"&&(i[s[o]]=n[s[o]]);super(e.s.db,n),this.options=n,this.command=i,this.collectionName=r}get commandName(){return"validate"}async execute(e,r,n){let i=this.collectionName,s=await super.executeCommand(e,r,this.command,n);if(s.result!=null&&typeof s.result!="string")throw new yO.MongoUnexpectedServerResponseError("Error with validation data");if(s.result!=null&&s.result.match(/exception|corrupt/)!=null)throw new yO.MongoUnexpectedServerResponseError(`Invalid collection ${i}`);if(s.valid!=null&&!s.valid)throw new yO.MongoUnexpectedServerResponseError(`Invalid collection ${i}`);return s}};B2.ValidateCollectionOperation=gO});var dw=y(P2=>{"use strict";f();Object.defineProperty(P2,"__esModule",{value:!0});P2.Admin=void 0;var xhe=Ye(),I2=Zr(),Fhe=uR(),$he=lw(),khe=bl(),qhe=aR(),_O=class{constructor(e){this.s={db:e}}async command(e,r){return await(0,I2.executeOperation)(this.s.db.client,new khe.RunAdminCommandOperation(e,{...(0,xhe.resolveBSONOptions)(r),session:r?.session,readPreference:r?.readPreference,timeoutMS:r?.timeoutMS??this.s.db.timeoutMS}))}async buildInfo(e){return await this.command({buildinfo:1},e)}async serverInfo(e){return await this.command({buildinfo:1},e)}async serverStatus(e){return await this.command({serverStatus:1},e)}async ping(e){return await this.command({ping:1},e)}async removeUser(e,r){return await(0,I2.executeOperation)(this.s.db.client,new $he.RemoveUserOperation(this.s.db,e,{dbName:"admin",...r}))}async validateCollection(e,r={}){return await(0,I2.executeOperation)(this.s.db.client,new qhe.ValidateCollectionOperation(this,e,r))}async listDatabases(e){return await(0,I2.executeOperation)(this.s.db.client,new Fhe.ListDatabasesOperation(this.s.db,{timeoutMS:this.s.db.timeoutMS,...e}))}async replSetGetStatus(e){return await this.command({replSetGetStatus:1},e)}};P2.Admin=_O});var EO=y(N2=>{"use strict";f();Object.defineProperty(N2,"__esModule",{value:!0});N2.GridFSBucketReadStream=void 0;var Lhe=require("stream"),jhe=en(),yi=re(),Uhe=Jr(),Gh=class extends Lhe.Readable{constructor(e,r,n,i,s){super({emitClose:!0}),this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:e,expected:0,files:r,filter:i,init:!1,expectedEnd:0,options:{start:0,end:0,...s},readPreference:n,timeoutContext:s?.timeoutMS!=null?new Uhe.CSOTTimeoutContext({timeoutMS:s.timeoutMS,serverSelectionTimeoutMS:0}):void 0}}_read(){this.destroyed||Whe(this,()=>Vhe(this))}start(e=0){return cR(this),this.s.options.start=e,this}end(e=0){return cR(this),this.s.options.end=e,this}async abort(){this.push(null),this.destroy();let e=this.s.timeoutContext?.getRemainingTimeMSOrThrow();await this.s.cursor?.close({timeoutMS:e})}};N2.GridFSBucketReadStream=Gh;Gh.FILE="file";function cR(t){if(t.s.init)throw new yi.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")}function Vhe(t){if(t.destroyed||!t.s.cursor||!t.s.file)return;let e=r=>{if(t.destroyed)return;if(!r){t.push(null),t.s.cursor?.close().then(void 0,h=>t.destroy(h));return}if(!t.s.file)return;let n=t.s.file.length-t.s.bytesRead,i=t.s.expected++,s=Math.min(t.s.file.chunkSize,n);if(r.n>i)return t.destroy(new yi.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${r.n}, expected: ${i}`));if(r.n<i)return t.destroy(new yi.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected: ${i}`));let o=Buffer.isBuffer(r.data)?r.data:r.data.buffer;if(o.byteLength!==s)return n<=0?t.destroy(new yi.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected file length ${t.s.file.length} bytes but already read ${t.s.bytesRead} bytes`)):t.destroy(new yi.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${o.byteLength}, expected: ${s}`));if(t.s.bytesRead+=o.byteLength,o.byteLength===0)return t.push(null);let u=null,a=null;t.s.bytesToSkip!=null&&(u=t.s.bytesToSkip,t.s.bytesToSkip=0);let c=i===t.s.expectedEnd-1,l=t.s.options.end-t.s.bytesToSkip;c&&t.s.bytesToTrim!=null?a=t.s.file.chunkSize-t.s.bytesToTrim:t.s.options.end&&l<r.data.byteLength&&(a=l),(u!=null||a!=null)&&(o=o.slice(u||0,a||o.byteLength)),t.push(o)};t.s.cursor.next().then(e,r=>{t.destroyed||t.destroy(r)})}function zhe(t){let e={};t.s.readPreference&&(e.readPreference=t.s.readPreference),t.s.options&&t.s.options.sort&&(e.sort=t.s.options.sort),t.s.options&&t.s.options.skip&&(e.skip=t.s.options.skip);let r=i=>{if(t.destroyed)return;if(!i){let a=`FileNotFound: file ${t.s.filter._id?t.s.filter._id.toString():t.s.filter.filename} was not found`,c=new yi.MongoRuntimeError(a);return c.code="ENOENT",t.destroy(c)}if(i.length<=0){t.push(null);return}if(t.destroyed){t.destroy();return}try{t.s.bytesToSkip=Hhe(t,i,t.s.options)}catch(u){return t.destroy(u)}let s={files_id:i._id};if(t.s.options&&t.s.options.start!=null){let u=Math.floor(t.s.options.start/i.chunkSize);u>0&&(s.n={$gte:u})}let o;try{o=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(u){return t.destroy(u)}t.s.cursor=t.s.chunks.find(s,{timeoutMode:t.s.options.timeoutMS!=null?jhe.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:o}).sort({n:1}),t.s.readPreference&&t.s.cursor.withReadPreference(t.s.readPreference),t.s.expectedEnd=Math.ceil(i.length/i.chunkSize),t.s.file=i;try{t.s.bytesToTrim=Ghe(t,i,t.s.cursor,t.s.options)}catch(u){return t.destroy(u)}t.emit(Gh.FILE,i)},n;try{n=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(i){t.destroyed||t.destroy(i);return}e.timeoutMS=n,t.s.files.findOne(t.s.filter,e).then(r,i=>{t.destroyed||t.destroy(i)})}function Whe(t,e){if(t.s.file)return e();t.s.init||(zhe(t),t.s.init=!0),t.once("file",()=>{e()})}function Hhe(t,e,r){if(r&&r.start!=null){if(r.start>e.length)throw new yi.MongoInvalidArgumentError(`Stream start (${r.start}) must not be more than the length of the file (${e.length})`);if(r.start<0)throw new yi.MongoInvalidArgumentError(`Stream start (${r.start}) must not be negative`);if(r.end!=null&&r.end<r.start)throw new yi.MongoInvalidArgumentError(`Stream start (${r.start}) must not be greater than stream end (${r.end})`);return t.s.bytesRead=Math.floor(r.start/e.chunkSize)*e.chunkSize,t.s.expected=Math.floor(r.start/e.chunkSize),r.start-t.s.bytesRead}throw new yi.MongoInvalidArgumentError("Start option must be defined")}function Ghe(t,e,r,n){if(n&&n.end!=null){if(n.end>e.length)throw new yi.MongoInvalidArgumentError(`Stream end (${n.end}) must not be more than the length of the file (${e.length})`);if(n.start==null||n.start<0)throw new yi.MongoInvalidArgumentError(`Stream end (${n.end}) must not be negative`);let i=n.start!=null?Math.floor(n.start/e.chunkSize):0;return r.limit(Math.ceil(n.end/e.chunkSize)-i),t.s.expectedEnd=Math.ceil(n.end/e.chunkSize),Math.ceil(n.end/e.chunkSize)*e.chunkSize-n.end}throw new yi.MongoInvalidArgumentError("End option must be defined")}});var SO=y(x2=>{"use strict";f();Object.defineProperty(x2,"__esModule",{value:!0});x2.GridFSBucketWriteStream=void 0;var Khe=require("stream"),fR=Ye(),hR=en(),Rs=re(),Yhe=Jr(),lR=fe(),Qhe=Qr(),AO=class extends Khe.Writable{constructor(e,r,n){super(),this.gridFSFile=null,n=n??{},this.bucket=e,this.chunks=e.s._chunksCollection,this.filename=r,this.files=e.s._filesCollection,this.options=n,this.writeConcern=Qhe.WriteConcern.fromOptions(n)||e.s.options.writeConcern,this.done=!1,this.id=n.id?n.id:new fR.ObjectId,this.chunkSizeBytes=n.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},n.timeoutMS!=null&&(this.timeoutContext=new Yhe.CSOTTimeoutContext({timeoutMS:n.timeoutMS,serverSelectionTimeoutMS:(0,lR.resolveTimeoutOptions)(this.bucket.s.db.client,{}).serverSelectionTimeoutMS}))}_construct(e){if(!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,Xhe(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index"),e()},r=>{if(r instanceof Rs.MongoOperationTimeoutError)return gc(this,r,e);(0,lR.squashError)(r),e()});else return process.nextTick(e)}_write(e,r,n){ede(this,e,r,n)}_final(e){if(this.state.streamEnd)return process.nextTick(e);this.state.streamEnd=!0,tde(this,e)}async abort(){if(this.state.streamEnd)throw new Rs.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new Rs.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0;let e=this.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${this.timeoutContext?.timeoutMS}ms`);await this.chunks.deleteMany({files_id:this.id},{timeoutMS:e})}};x2.GridFSBucketWriteStream=AO;function gc(t,e,r){if(t.state.errored){process.nextTick(r);return}t.state.errored=!0,process.nextTick(r,e)}function dR(t,e,r){return{_id:new fR.ObjectId,files_id:t,n:e,data:r}}async function Jhe(t){let e={files_id:1,n:1},r;r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let n;try{n=await t.chunks.listIndexes({timeoutMode:r!=null?hR.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:r}).toArray()}catch(s){if(s instanceof Rs.MongoError&&s.code===Rs.MONGODB_ERROR_CODES.NamespaceNotFound)n=[];else throw s}!!n.find(s=>Object.keys(s.key).length===2&&s.key.files_id===1&&s.key.n===1)||(r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.chunks.createIndex(e,{...t.writeConcern,background:!0,unique:!0,timeoutMS:r}))}function wO(t,e){if(t.done)return process.nextTick(e);if(t.state.streamEnd&&t.state.outstandingRequests===0&&!t.state.errored){t.done=!0;let r=Zhe(t.id,t.length,t.chunkSizeBytes,t.filename,t.options.contentType,t.options.aliases,t.options.metadata);if(R2(t,e))return;let n=t.timeoutContext?.remainingTimeMS;if(n!=null&&n<=0)return gc(t,new Rs.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);t.files.insertOne(r,{writeConcern:t.writeConcern,timeoutMS:n}).then(()=>{t.gridFSFile=r,e()},i=>gc(t,i,e));return}process.nextTick(e)}async function Xhe(t){let e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);if(await t.files.findOne({},{projection:{_id:1},timeoutMS:e})!=null)return;let n={filename:1,uploadDate:1},i;e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let s={timeoutMode:e!=null?hR.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:e};try{i=await t.files.listIndexes(s).toArray()}catch(u){if(u instanceof Rs.MongoError&&u.code===Rs.MONGODB_ERROR_CODES.NamespaceNotFound)i=[];else throw u}!!i.find(u=>Object.keys(u.key).length===2&&u.key.filename===1&&u.key.uploadDate===1)||(e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.files.createIndex(n,{background:!1,timeoutMS:e})),await Jhe(t)}function Zhe(t,e,r,n,i,s,o){let u={_id:t,length:e,chunkSize:r,uploadDate:new Date,filename:n};return i&&(u.contentType=i),s&&(u.aliases=s),o&&(u.metadata=o),u}function ede(t,e,r,n){if(R2(t,n))return;let i=Buffer.isBuffer(e)?e:Buffer.from(e,r);if(t.length+=i.length,t.pos+i.length<t.chunkSizeBytes){i.copy(t.bufToStore,t.pos),t.pos+=i.length,process.nextTick(n);return}let s=i.length,o=t.chunkSizeBytes-t.pos,u=Math.min(o,i.length),a=0;for(;s>0;){let c=i.length-s;i.copy(t.bufToStore,t.pos,c,c+u),t.pos+=u,o-=u;let l;if(o===0){l=dR(t.id,t.n,Buffer.from(t.bufToStore));let h=t.timeoutContext?.remainingTimeMS;if(h!=null&&h<=0)return gc(t,new Rs.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),n);if(++t.state.outstandingRequests,++a,R2(t,n))return;t.chunks.insertOne(l,{writeConcern:t.writeConcern,timeoutMS:h}).then(()=>{--t.state.outstandingRequests,--a,a||wO(t,n)},d=>gc(t,d,n)),o=t.chunkSizeBytes,t.pos=0,++t.n}s-=u,u=Math.min(o,s)}}function tde(t,e){if(t.pos===0)return wO(t,e);let r=Buffer.alloc(t.pos);t.bufToStore.copy(r,0,0,t.pos);let n=dR(t.id,t.n,r);if(R2(t,e))return;let i=t.timeoutContext?.remainingTimeMS;if(i!=null&&i<=0)return gc(t,new Rs.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);++t.state.outstandingRequests,t.chunks.insertOne(n,{writeConcern:t.writeConcern,timeoutMS:i}).then(()=>{--t.state.outstandingRequests,wO(t,e)},s=>gc(t,s,e))}function R2(t,e){return t.state.aborted?(process.nextTick(e,new Rs.MongoAPIError("Stream has been aborted")),!0):!1}});var gR=y($2=>{"use strict";f();Object.defineProperty($2,"__esModule",{value:!0});$2.GridFSBucket=void 0;var bO=re(),rde=fi(),pR=Jr(),OO=fe(),nde=Qr(),mR=EO(),yR=SO(),ide={bucketName:"fs",chunkSizeBytes:255*1024},F2=class extends rde.TypedEventEmitter{constructor(e,r){super(),this.setMaxListeners(0);let n=(0,OO.resolveOptions)(e,{...ide,...r,writeConcern:nde.WriteConcern.fromOptions(r)});this.s={db:e,options:n,_chunksCollection:e.collection(n.bucketName+".chunks"),_filesCollection:e.collection(n.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(e,r){return new yR.GridFSBucketWriteStream(this,e,{timeoutMS:this.s.options.timeoutMS,...r})}openUploadStreamWithId(e,r,n){return new yR.GridFSBucketWriteStream(this,r,{timeoutMS:this.s.options.timeoutMS,...n,id:e})}openDownloadStream(e,r){return new mR.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:e},{timeoutMS:this.s.options.timeoutMS,...r})}async delete(e,r){let{timeoutMS:n}=(0,OO.resolveOptions)(this.s.db,r),i;n&&(i=new pR.CSOTTimeoutContext({timeoutMS:n,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS}));let{deletedCount:s}=await this.s._filesCollection.deleteOne({_id:e},{timeoutMS:i?.remainingTimeMS}),o=i?.remainingTimeMS;if(o!=null&&o<=0)throw new bO.MongoOperationTimeoutError(`Timed out after ${n}ms`);if(await this.s._chunksCollection.deleteMany({files_id:e},{timeoutMS:o}),s===0)throw new bO.MongoRuntimeError(`File not found for id ${e}`)}find(e={},r={}){return this.s._filesCollection.find(e,r)}openDownloadStreamByName(e,r){let n={uploadDate:-1},i;return r&&r.revision!=null&&(r.revision>=0?(n={uploadDate:1},i=r.revision):i=-r.revision-1),new mR.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:e},{timeoutMS:this.s.options.timeoutMS,...r,sort:n,skip:i})}async rename(e,r,n){let i={_id:e},s={$set:{filename:r}},{matchedCount:o}=await this.s._filesCollection.updateOne(i,s,n);if(o===0)throw new bO.MongoRuntimeError(`File with id ${e} not found`)}async drop(e){let{timeoutMS:r}=(0,OO.resolveOptions)(this.s.db,e),n;if(r&&(n=new pR.CSOTTimeoutContext({timeoutMS:r,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS})),n){await this.s._filesCollection.drop({timeoutMS:n.remainingTimeMS});let i=n.getRemainingTimeMSOrThrow(`Timed out after ${r}ms`);await this.s._chunksCollection.drop({timeoutMS:i})}else await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}};$2.GridFSBucket=F2;F2.INDEX="index"});var Xo=y(T=>{"use strict";f();Object.defineProperty(T,"__esModule",{value:!0});T.MongoServerError=T.MongoServerClosedError=T.MongoRuntimeError=T.MongoParseError=T.MongoOperationTimeoutError=T.MongoOIDCError=T.MongoNotConnectedError=T.MongoNetworkTimeoutError=T.MongoNetworkError=T.MongoMissingDependencyError=T.MongoMissingCredentialsError=T.MongoKerberosError=T.MongoInvalidArgumentError=T.MongoGridFSStreamError=T.MongoGridFSChunkError=T.MongoGCPError=T.MongoExpiredSessionError=T.MongoError=T.MongoDriverError=T.MongoDecompressionError=T.MongoCursorInUseError=T.MongoCursorExhaustedError=T.MongoCompatibilityError=T.MongoClientBulkWriteExecutionError=T.MongoClientBulkWriteError=T.MongoClientBulkWriteCursorError=T.MongoChangeStreamError=T.MongoBatchReExecutionError=T.MongoAzureError=T.MongoAWSError=T.MongoAPIError=T.ChangeStreamCursor=T.ClientEncryption=T.MongoBulkWriteError=T.UUID=T.Timestamp=T.ObjectId=T.MinKey=T.MaxKey=T.Long=T.Int32=T.Double=T.Decimal128=T.DBRef=T.Code=T.BSONType=T.BSONSymbol=T.BSONRegExp=T.Binary=T.BSON=void 0;T.ConnectionCheckedInEvent=T.CommandSucceededEvent=T.CommandStartedEvent=T.CommandFailedEvent=T.WriteConcern=T.ReadPreference=T.ReadConcern=T.TopologyType=T.ServerType=T.ReadPreferenceMode=T.ReadConcernLevel=T.ProfilingLevel=T.ReturnDocument=T.ServerApiVersion=T.ExplainVerbosity=T.MongoErrorLabel=T.CursorTimeoutMode=T.CURSOR_FLAGS=T.Compressor=T.AuthMechanism=T.GSSAPICanonicalizationValue=T.AutoEncryptionLoggerLevel=T.BatchType=T.UnorderedBulkOperation=T.OrderedBulkOperation=T.MongoClient=T.ListIndexesCursor=T.ListCollectionsCursor=T.GridFSBucketWriteStream=T.GridFSBucketReadStream=T.GridFSBucket=T.FindCursor=T.ExplainableCursor=T.Db=T.Collection=T.ClientSession=T.ChangeStream=T.CancellationToken=T.AggregationCursor=T.Admin=T.AbstractCursor=T.configureExplicitResourceManagement=T.MongoWriteConcernError=T.MongoUnexpectedServerResponseError=T.MongoTransactionError=T.MongoTopologyClosedError=T.MongoTailableCursorError=T.MongoSystemError=T.MongoStalePrimaryError=T.MongoServerSelectionError=void 0;T.MongoClientAuthProviders=T.MongoCryptKMSRequestNetworkTimeoutError=T.MongoCryptInvalidArgumentError=T.MongoCryptError=T.MongoCryptCreateEncryptedCollectionError=T.MongoCryptCreateDataKeyError=T.MongoCryptAzureKMSRequestError=T.SrvPollingEvent=T.WaitingForSuitableServerEvent=T.ServerSelectionSucceededEvent=T.ServerSelectionStartedEvent=T.ServerSelectionFailedEvent=T.ServerSelectionEvent=T.TopologyOpeningEvent=T.TopologyDescriptionChangedEvent=T.TopologyClosedEvent=T.ServerOpeningEvent=T.ServerHeartbeatSucceededEvent=T.ServerHeartbeatStartedEvent=T.ServerHeartbeatFailedEvent=T.ServerDescriptionChangedEvent=T.ServerClosedEvent=T.ConnectionReadyEvent=T.ConnectionPoolReadyEvent=T.ConnectionPoolMonitoringEvent=T.ConnectionPoolCreatedEvent=T.ConnectionPoolClosedEvent=T.ConnectionPoolClearedEvent=T.ConnectionCreatedEvent=T.ConnectionClosedEvent=T.ConnectionCheckOutStartedEvent=T.ConnectionCheckOutFailedEvent=T.ConnectionCheckedOutEvent=void 0;var sde=dw();Object.defineProperty(T,"Admin",{enumerable:!0,get:function(){return sde.Admin}});var ode=yA();Object.defineProperty(T,"OrderedBulkOperation",{enumerable:!0,get:function(){return ode.OrderedBulkOperation}});var ude=_A();Object.defineProperty(T,"UnorderedBulkOperation",{enumerable:!0,get:function(){return ude.UnorderedBulkOperation}});var ade=ec();Object.defineProperty(T,"ChangeStream",{enumerable:!0,get:function(){return ade.ChangeStream}});var cde=Za();Object.defineProperty(T,"Collection",{enumerable:!0,get:function(){return cde.Collection}});var lde=en();Object.defineProperty(T,"AbstractCursor",{enumerable:!0,get:function(){return lde.AbstractCursor}});var fde=Jf();Object.defineProperty(T,"AggregationCursor",{enumerable:!0,get:function(){return fde.AggregationCursor}});var hde=IA();Object.defineProperty(T,"FindCursor",{enumerable:!0,get:function(){return hde.FindCursor}});var dde=iw();Object.defineProperty(T,"ListCollectionsCursor",{enumerable:!0,get:function(){return dde.ListCollectionsCursor}});var pde=xA();Object.defineProperty(T,"ListIndexesCursor",{enumerable:!0,get:function(){return pde.ListIndexesCursor}});var mde=wm();Object.defineProperty(T,"Db",{enumerable:!0,get:function(){return mde.Db}});var yde=Ja();Object.defineProperty(T,"ExplainableCursor",{enumerable:!0,get:function(){return yde.ExplainableCursor}});var gde=gR();Object.defineProperty(T,"GridFSBucket",{enumerable:!0,get:function(){return gde.GridFSBucket}});var _de=EO();Object.defineProperty(T,"GridFSBucketReadStream",{enumerable:!0,get:function(){return _de.GridFSBucketReadStream}});var Ede=SO();Object.defineProperty(T,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return Ede.GridFSBucketWriteStream}});var Ade=Lu();Object.defineProperty(T,"MongoClient",{enumerable:!0,get:function(){return Ade.MongoClient}});var wde=fi();Object.defineProperty(T,"CancellationToken",{enumerable:!0,get:function(){return wde.CancellationToken}});var Sde=n1();Object.defineProperty(T,"ClientSession",{enumerable:!0,get:function(){return Sde.ClientSession}});var bde=Ye();Object.defineProperty(T,"BSON",{enumerable:!0,get:function(){return bde.BSON}});var On=Ye();Object.defineProperty(T,"Binary",{enumerable:!0,get:function(){return On.Binary}});Object.defineProperty(T,"BSONRegExp",{enumerable:!0,get:function(){return On.BSONRegExp}});Object.defineProperty(T,"BSONSymbol",{enumerable:!0,get:function(){return On.BSONSymbol}});Object.defineProperty(T,"BSONType",{enumerable:!0,get:function(){return On.BSONType}});Object.defineProperty(T,"Code",{enumerable:!0,get:function(){return On.Code}});Object.defineProperty(T,"DBRef",{enumerable:!0,get:function(){return On.DBRef}});Object.defineProperty(T,"Decimal128",{enumerable:!0,get:function(){return On.Decimal128}});Object.defineProperty(T,"Double",{enumerable:!0,get:function(){return On.Double}});Object.defineProperty(T,"Int32",{enumerable:!0,get:function(){return On.Int32}});Object.defineProperty(T,"Long",{enumerable:!0,get:function(){return On.Long}});Object.defineProperty(T,"MaxKey",{enumerable:!0,get:function(){return On.MaxKey}});Object.defineProperty(T,"MinKey",{enumerable:!0,get:function(){return On.MinKey}});Object.defineProperty(T,"ObjectId",{enumerable:!0,get:function(){return On.ObjectId}});Object.defineProperty(T,"Timestamp",{enumerable:!0,get:function(){return On.Timestamp}});Object.defineProperty(T,"UUID",{enumerable:!0,get:function(){return On.UUID}});var Ode=Yf();Object.defineProperty(T,"MongoBulkWriteError",{enumerable:!0,get:function(){return Ode.MongoBulkWriteError}});var Cde=ny();Object.defineProperty(T,"ClientEncryption",{enumerable:!0,get:function(){return Cde.ClientEncryption}});var Tde=rw();Object.defineProperty(T,"ChangeStreamCursor",{enumerable:!0,get:function(){return Tde.ChangeStreamCursor}});var qe=re();Object.defineProperty(T,"MongoAPIError",{enumerable:!0,get:function(){return qe.MongoAPIError}});Object.defineProperty(T,"MongoAWSError",{enumerable:!0,get:function(){return qe.MongoAWSError}});Object.defineProperty(T,"MongoAzureError",{enumerable:!0,get:function(){return qe.MongoAzureError}});Object.defineProperty(T,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return qe.MongoBatchReExecutionError}});Object.defineProperty(T,"MongoChangeStreamError",{enumerable:!0,get:function(){return qe.MongoChangeStreamError}});Object.defineProperty(T,"MongoClientBulkWriteCursorError",{enumerable:!0,get:function(){return qe.MongoClientBulkWriteCursorError}});Object.defineProperty(T,"MongoClientBulkWriteError",{enumerable:!0,get:function(){return qe.MongoClientBulkWriteError}});Object.defineProperty(T,"MongoClientBulkWriteExecutionError",{enumerable:!0,get:function(){return qe.MongoClientBulkWriteExecutionError}});Object.defineProperty(T,"MongoCompatibilityError",{enumerable:!0,get:function(){return qe.MongoCompatibilityError}});Object.defineProperty(T,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return qe.MongoCursorExhaustedError}});Object.defineProperty(T,"MongoCursorInUseError",{enumerable:!0,get:function(){return qe.MongoCursorInUseError}});Object.defineProperty(T,"MongoDecompressionError",{enumerable:!0,get:function(){return qe.MongoDecompressionError}});Object.defineProperty(T,"MongoDriverError",{enumerable:!0,get:function(){return qe.MongoDriverError}});Object.defineProperty(T,"MongoError",{enumerable:!0,get:function(){return qe.MongoError}});Object.defineProperty(T,"MongoExpiredSessionError",{enumerable:!0,get:function(){return qe.MongoExpiredSessionError}});Object.defineProperty(T,"MongoGCPError",{enumerable:!0,get:function(){return qe.MongoGCPError}});Object.defineProperty(T,"MongoGridFSChunkError",{enumerable:!0,get:function(){return qe.MongoGridFSChunkError}});Object.defineProperty(T,"MongoGridFSStreamError",{enumerable:!0,get:function(){return qe.MongoGridFSStreamError}});Object.defineProperty(T,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return qe.MongoInvalidArgumentError}});Object.defineProperty(T,"MongoKerberosError",{enumerable:!0,get:function(){return qe.MongoKerberosError}});Object.defineProperty(T,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return qe.MongoMissingCredentialsError}});Object.defineProperty(T,"MongoMissingDependencyError",{enumerable:!0,get:function(){return qe.MongoMissingDependencyError}});Object.defineProperty(T,"MongoNetworkError",{enumerable:!0,get:function(){return qe.MongoNetworkError}});Object.defineProperty(T,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return qe.MongoNetworkTimeoutError}});Object.defineProperty(T,"MongoNotConnectedError",{enumerable:!0,get:function(){return qe.MongoNotConnectedError}});Object.defineProperty(T,"MongoOIDCError",{enumerable:!0,get:function(){return qe.MongoOIDCError}});Object.defineProperty(T,"MongoOperationTimeoutError",{enumerable:!0,get:function(){return qe.MongoOperationTimeoutError}});Object.defineProperty(T,"MongoParseError",{enumerable:!0,get:function(){return qe.MongoParseError}});Object.defineProperty(T,"MongoRuntimeError",{enumerable:!0,get:function(){return qe.MongoRuntimeError}});Object.defineProperty(T,"MongoServerClosedError",{enumerable:!0,get:function(){return qe.MongoServerClosedError}});Object.defineProperty(T,"MongoServerError",{enumerable:!0,get:function(){return qe.MongoServerError}});Object.defineProperty(T,"MongoServerSelectionError",{enumerable:!0,get:function(){return qe.MongoServerSelectionError}});Object.defineProperty(T,"MongoStalePrimaryError",{enumerable:!0,get:function(){return qe.MongoStalePrimaryError}});Object.defineProperty(T,"MongoSystemError",{enumerable:!0,get:function(){return qe.MongoSystemError}});Object.defineProperty(T,"MongoTailableCursorError",{enumerable:!0,get:function(){return qe.MongoTailableCursorError}});Object.defineProperty(T,"MongoTopologyClosedError",{enumerable:!0,get:function(){return qe.MongoTopologyClosedError}});Object.defineProperty(T,"MongoTransactionError",{enumerable:!0,get:function(){return qe.MongoTransactionError}});Object.defineProperty(T,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return qe.MongoUnexpectedServerResponseError}});Object.defineProperty(T,"MongoWriteConcernError",{enumerable:!0,get:function(){return qe.MongoWriteConcernError}});var Dde=Dl();Object.defineProperty(T,"configureExplicitResourceManagement",{enumerable:!0,get:function(){return Dde.configureExplicitResourceManagement}});var Mde=Yf();Object.defineProperty(T,"BatchType",{enumerable:!0,get:function(){return Mde.BatchType}});var vde=LS();Object.defineProperty(T,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return vde.AutoEncryptionLoggerLevel}});var Bde=Nm();Object.defineProperty(T,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return Bde.GSSAPICanonicalizationValue}});var Ide=no();Object.defineProperty(T,"AuthMechanism",{enumerable:!0,get:function(){return Ide.AuthMechanism}});var Pde=mh();Object.defineProperty(T,"Compressor",{enumerable:!0,get:function(){return Pde.Compressor}});var _R=en();Object.defineProperty(T,"CURSOR_FLAGS",{enumerable:!0,get:function(){return _R.CURSOR_FLAGS}});Object.defineProperty(T,"CursorTimeoutMode",{enumerable:!0,get:function(){return _R.CursorTimeoutMode}});var Nde=re();Object.defineProperty(T,"MongoErrorLabel",{enumerable:!0,get:function(){return Nde.MongoErrorLabel}});var Rde=Ja();Object.defineProperty(T,"ExplainVerbosity",{enumerable:!0,get:function(){return Rde.ExplainVerbosity}});var xde=Lu();Object.defineProperty(T,"ServerApiVersion",{enumerable:!0,get:function(){return xde.ServerApiVersion}});var Fde=jA();Object.defineProperty(T,"ReturnDocument",{enumerable:!0,get:function(){return Fde.ReturnDocument}});var $de=hw();Object.defineProperty(T,"ProfilingLevel",{enumerable:!0,get:function(){return $de.ProfilingLevel}});var kde=Bi();Object.defineProperty(T,"ReadConcernLevel",{enumerable:!0,get:function(){return kde.ReadConcernLevel}});var qde=Sr();Object.defineProperty(T,"ReadPreferenceMode",{enumerable:!0,get:function(){return qde.ReadPreferenceMode}});var ER=ai();Object.defineProperty(T,"ServerType",{enumerable:!0,get:function(){return ER.ServerType}});Object.defineProperty(T,"TopologyType",{enumerable:!0,get:function(){return ER.TopologyType}});var Lde=Bi();Object.defineProperty(T,"ReadConcern",{enumerable:!0,get:function(){return Lde.ReadConcern}});var jde=Sr();Object.defineProperty(T,"ReadPreference",{enumerable:!0,get:function(){return jde.ReadPreference}});var Ude=Qr();Object.defineProperty(T,"WriteConcern",{enumerable:!0,get:function(){return Ude.WriteConcern}});var CO=a4();Object.defineProperty(T,"CommandFailedEvent",{enumerable:!0,get:function(){return CO.CommandFailedEvent}});Object.defineProperty(T,"CommandStartedEvent",{enumerable:!0,get:function(){return CO.CommandStartedEvent}});Object.defineProperty(T,"CommandSucceededEvent",{enumerable:!0,get:function(){return CO.CommandSucceededEvent}});var Yi=q4();Object.defineProperty(T,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return Yi.ConnectionCheckedInEvent}});Object.defineProperty(T,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return Yi.ConnectionCheckedOutEvent}});Object.defineProperty(T,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return Yi.ConnectionCheckOutFailedEvent}});Object.defineProperty(T,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return Yi.ConnectionCheckOutStartedEvent}});Object.defineProperty(T,"ConnectionClosedEvent",{enumerable:!0,get:function(){return Yi.ConnectionClosedEvent}});Object.defineProperty(T,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return Yi.ConnectionCreatedEvent}});Object.defineProperty(T,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return Yi.ConnectionPoolClearedEvent}});Object.defineProperty(T,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return Yi.ConnectionPoolClosedEvent}});Object.defineProperty(T,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return Yi.ConnectionPoolCreatedEvent}});Object.defineProperty(T,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return Yi.ConnectionPoolMonitoringEvent}});Object.defineProperty(T,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return Yi.ConnectionPoolReadyEvent}});Object.defineProperty(T,"ConnectionReadyEvent",{enumerable:!0,get:function(){return Yi.ConnectionReadyEvent}});var eu=vy();Object.defineProperty(T,"ServerClosedEvent",{enumerable:!0,get:function(){return eu.ServerClosedEvent}});Object.defineProperty(T,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return eu.ServerDescriptionChangedEvent}});Object.defineProperty(T,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return eu.ServerHeartbeatFailedEvent}});Object.defineProperty(T,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return eu.ServerHeartbeatStartedEvent}});Object.defineProperty(T,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return eu.ServerHeartbeatSucceededEvent}});Object.defineProperty(T,"ServerOpeningEvent",{enumerable:!0,get:function(){return eu.ServerOpeningEvent}});Object.defineProperty(T,"TopologyClosedEvent",{enumerable:!0,get:function(){return eu.TopologyClosedEvent}});Object.defineProperty(T,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return eu.TopologyDescriptionChangedEvent}});Object.defineProperty(T,"TopologyOpeningEvent",{enumerable:!0,get:function(){return eu.TopologyOpeningEvent}});var Kh=tO();Object.defineProperty(T,"ServerSelectionEvent",{enumerable:!0,get:function(){return Kh.ServerSelectionEvent}});Object.defineProperty(T,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return Kh.ServerSelectionFailedEvent}});Object.defineProperty(T,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return Kh.ServerSelectionStartedEvent}});Object.defineProperty(T,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return Kh.ServerSelectionSucceededEvent}});Object.defineProperty(T,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return Kh.WaitingForSuitableServerEvent}});var Vde=nO();Object.defineProperty(T,"SrvPollingEvent",{enumerable:!0,get:function(){return Vde.SrvPollingEvent}});var M1=Wl();Object.defineProperty(T,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return M1.MongoCryptAzureKMSRequestError}});Object.defineProperty(T,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return M1.MongoCryptCreateDataKeyError}});Object.defineProperty(T,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return M1.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(T,"MongoCryptError",{enumerable:!0,get:function(){return M1.MongoCryptError}});Object.defineProperty(T,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return M1.MongoCryptInvalidArgumentError}});Object.defineProperty(T,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return M1.MongoCryptKMSRequestNetworkTimeoutError}});var zde=Lb();Object.defineProperty(T,"MongoClientAuthProviders",{enumerable:!0,get:function(){return zde.MongoClientAuthProviders}})});var ye=y(pr=>{"use strict";f();pr.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup");pr.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics");pr.arrayParentSymbol=Symbol("mongoose#Array#_parent");pr.arrayPathSymbol=Symbol("mongoose#Array#_path");pr.arraySchemaSymbol=Symbol("mongoose#Array#_schema");pr.documentArrayParent=Symbol("mongoose#documentArrayParent");pr.documentIsSelected=Symbol("mongoose#Document#isSelected");pr.documentIsModified=Symbol("mongoose#Document#isModified");pr.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths");pr.documentSchemaSymbol=Symbol("mongoose#Document#schema");pr.getSymbol=Symbol("mongoose#Document#get");pr.modelSymbol=Symbol("mongoose#Model");pr.objectIdSymbol=Symbol("mongoose#ObjectId");pr.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model");pr.schemaTypeSymbol=Symbol("mongoose#schemaType");pr.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments");pr.scopeSymbol=Symbol("mongoose#Document#scope");pr.validatorErrorSymbol=Symbol("mongoose#validatorError")});var tu=y((bBe,AR)=>{"use strict";f();var Yh=vi().ObjectId,Wde=ye().objectIdSymbol;Object.defineProperty(Yh.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});Yh.prototype.hasOwnProperty("valueOf")||(Yh.prototype.valueOf=function(){return this.toString()});Yh.prototype[Wde]=!0;AR.exports=Yh});var Cn=y((CBe,wR)=>{"use strict";f();wR.exports=function(e){if(e!=null&&typeof e.constructor=="function")return e.constructor.name}});var xs=y(SR=>{"use strict";f();SR.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0,flattenObjectIds:!1}});var k2=y((vBe,bR)=>{"use strict";f();bR.exports=vi().Decimal128});var _c=y((IBe,OR)=>{"use strict";f();OR.exports=new Set(["__proto__","constructor","prototype"])});var q2=y(CR=>{"use strict";f();CR.isMongooseArray=function(t){return Array.isArray(t)&&t.isMongooseArray}});var Qh=y((xBe,TR)=>{"use strict";f();var Hde=q2().isMongooseArray;TR.exports=function(t){return t!=null&&(Hde(t)||t.$__!=null||t.isMongooseBuffer||t.$isMongooseMap)}});var TO=y(($Be,DR)=>{"use strict";f();var Gde=/^function\s*([^\s(]+)/;DR.exports=function(t){return t.name||(t.toString().trim().match(Gde)||[])[1]}});var Lr=y((qBe,MR)=>{"use strict";f();function Kde(t,e){return t!=null&&t._bsontype===e}MR.exports=Kde});var sa=y((jBe,vR)=>{"use strict";f();vR.exports=function(t){return Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object Object]"}});var v1=y((VBe,BR)=>{"use strict";f();BR.exports=function(e){if(e==null||typeof e!="object")return!1;let r=Object.getPrototypeOf(e);return!r||r.constructor.name==="Object"}});var B1=y(DO=>{"use strict";f();var IR=Symbol("mongoose#trustedSymbol");DO.trustedSymbol=IR;DO.trusted=function(e){return e==null||typeof e!="object"||(e[IR]=!0),e}});var $t=y((GBe,PR)=>{"use strict";f();var Yde=k2(),Qde=tu(),Jde=_c(),Xde=Qh(),Zde=TO(),MO=Lr(),epe=q2().isMongooseArray,tpe=sa(),rpe=v1(),npe=ye(),vO=B1().trustedSymbol,ipe=vi();function IO(t,e,r){if(t==null)return t;if(MO(t,"Double"))return new ipe.Double(t.value);if(typeof t=="number"||typeof t=="string"||typeof t=="boolean"||typeof t=="bigint")return t;if(Array.isArray(t))return spe(epe(t)?t.__array:t,e);if(Xde(t)){if(e&&e.retainDocuments&&t.$__!=null){let o=t.$clone();return t.__index!=null&&(o.__index=t.__index),t.__parentArray!=null&&(o.__parentArray=t.__parentArray),o.$__parent=t.$__parent,o}let i=t.$isSingleNested;if(rpe(t)&&t.$__!=null&&t._doc!=null)return t._doc;let s;return e&&e.json&&typeof t.toJSON=="function"?s=t.toJSON(e):s=t.toObject(e),e&&e.minimize&&!t.constructor.$__required&&i&&Object.keys(s).length===0?void 0:s}let n=t.constructor;if(n)switch(Zde(n)){case"Object":return BO(t,e,r);case"Date":return new n(+t);case"RegExp":return ope(t);default:break}return MO(t,"ObjectId")?e&&e.flattenObjectIds?t.toJSON():new Qde(t.id):MO(t,"Decimal128")?e&&e.flattenDecimals?t.toJSON():Yde.fromString(t.toString()):!n&&tpe(t)?BO(t,e,r):typeof t=="object"&&t[npe.schemaTypeSymbol]?t.clone():e&&e.bson&&typeof t.toBSON=="function"?t:typeof t.valueOf=="function"?t.valueOf():BO(t,e,r)}PR.exports=IO;function BO(t,e,r){let n=e&&e.minimize,i=e&&e.omitUndefined,s=e&&e._seen,o={},u;if(s&&s.has(t))return s.get(t);s&&s.set(t,o),vO in t&&(o[vO]=t[vO]);let a=Object.keys(t),c=a.length;for(let l=0;l<c;++l){let h=a[l];if(Jde.has(h))continue;let d=IO(t[h],e,!1);(n===!1||i)&&typeof d>"u"?delete o[h]:(n!==!0||typeof d<"u")&&(u||(u=!0),o[h]=d)}return n&&!r?u&&o:o}function spe(t,e){let r=0,n=t.length,i=new Array(n);for(r=0;r<n;++r)i[r]=IO(t[r],e,!0);return i}function ope(t){let e=new RegExp(t.source,t.flags);return e.lastIndex!==t.lastIndex&&(e.lastIndex=t.lastIndex),e}});var xR=y((YBe,RR)=>{"use strict";f();var L2=vT(),PO=Fe(),NO=Xo().Collection,upe=tu(),NR=Cn(),ape=xs().internalToObjectOptions,cpe=require("stream"),RO=require("util");function Fs(t,e,r){this.collection=null,this.Promise=r.Promise||Promise,this.modelName=r.modelName,delete r.modelName,this._closed=!1,L2.apply(this,arguments)}Object.setPrototypeOf(Fs.prototype,L2.prototype);Fs.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),L2.prototype.onOpen.call(this),this.collection};Fs.prototype.onClose=function(t){L2.prototype.onClose.call(this,t)};Fs.prototype._getCollection=function(){return this.collection?this.collection:this.conn.db!=null?(this.collection=this.conn.db.collection(this.name),this.collection):null};var Jh={watch:!0,find:!0,aggregate:!0};function lpe(t){Fs.prototype[t]=function(){let e=this._getCollection(),r=Array.from(arguments),n=this,i=n&&n.conn&&n.conn.base&&n.conn.base.options&&n.conn.base.options.debug,s=n&&n.conn&&n.conn.options&&n.conn.options.debug,o=s??i,u=arguments[arguments.length-1],a=new upe;if(this.conn.$wasForceClosed){let h=new PO("Connection was force closed");if(r.length>0&&typeof r[r.length-1]=="function"){r[r.length-1](h);return}else throw h}let c=r,l=null;if(this._shouldBufferCommands()&&this.buffer){this.conn.emit("buffer",{_id:a,modelName:n.modelName,collectionName:n.name,method:t,args:r});let h,d=r,p=null,m=null;Jh[t]&&typeof u=="function"?(this.addQueue(t,d),h=u):Jh[t]?p=new this.Promise((_,w)=>{h=function(C,O){if(m!=null&&clearTimeout(m),C!=null)return w(C);_(O)},d=r.concat([h]),this.addQueue(t,d)}):typeof u=="function"?(h=function(){return m!=null&&clearTimeout(m),u.apply(this,arguments)},d=r.slice(0,r.length-1).concat([h])):p=new Promise((_,w)=>{h=function(C,O){if(m!=null&&clearTimeout(m),C!=null)return w(C);_(O)},d=r.concat([h]),this.addQueue(t,d)});let g=this._getBufferTimeoutMS();if(m=setTimeout(()=>{if(this.removeQueue(t,d)){let w="Operation `"+this.name+"."+t+"()` buffering timed out after "+g+"ms",S=new PO(w);this.conn.emit("buffer-end",{_id:a,modelName:n.modelName,collectionName:n.name,method:t,error:S}),h(S)}},g),!Jh[t]&&typeof u=="function"){this.addQueue(t,d);return}return p}else!Jh[t]&&typeof u=="function"&&(l=function(d,p){return d!=null?n.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:n.name,method:t,error:d}):n.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:n.name,method:t,result:p}),u.apply(this,arguments)},c=r.slice(0,r.length-1).concat([l]));if(o)if(typeof o=="function"){let h=null;typeof r[r.length-1]=="function"?h=r.slice(0,r.length-1):h=r,o.apply(n,[n.name,t].concat(h))}else if(o instanceof cpe.Writable)this.$printToStream(n.name,t,r,o);else{let h=o.color==null?!0:o.color,d=o.shell==null?!1:o.shell;this.$print(n.name,t,r,h,d)}this.conn.emit("operation-start",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,params:c});try{if(e==null){let d="Cannot call `"+this.name+"."+t+"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.";throw new PO(d)}if(Jh[t]&&typeof u=="function"){let d=e[t].apply(e,c.slice(0,c.length-1));return this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,result:d}),u.call(this,null,d)}let h=e[t].apply(e,c);return h!=null&&typeof h.then=="function"?h.then(d=>(typeof u=="function"?u(null,d):this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,result:d}),d),d=>{if(typeof u=="function"){u(d);return}else this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,error:d});throw d}):h}catch(h){if(typeof u=="function")return u(h);throw this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,error:h}),h}}}for(let t of Object.getOwnPropertyNames(NO.prototype))Object.getOwnPropertyDescriptor(NO.prototype,t).get===void 0&&typeof NO.prototype[t]=="function"&&lpe(t);Fs.prototype.$print=function(t,e,r,n,i){let s=n?"\x1B[0;36mMongoose:\x1B[0m ":"Mongoose: ",o=[t,e].join("."),u=[];for(let c=r.length-1;c>=0;--c)(this.$format(r[c])||u.length)&&u.unshift(this.$format(r[c],n,i));let a="("+u.join(", ")+")";console.info(s+o+a)};Fs.prototype.$printToStream=function(t,e,r,n){let i=[t,e].join("."),s=[];for(let u=r.length-1;u>=0;--u)(this.$format(r[u])||s.length)&&s.unshift(this.$format(r[u]));let o="("+s.join(", ")+")";n.write(i+o,"utf8")};Fs.prototype.$format=function(t,e,r){let n=typeof t;return n==="function"||n==="undefined"?"":xO(t,!1,e,r)};function I1(t){let e={inspect:function(){return t}};return RO.inspect.custom&&(e[RO.inspect.custom]=e.inspect),e}function fpe(t){return xO(t,!0)}function hpe(t,e){t[e]=I1('ObjectId("'+t[e].toHexString()+'")')}function dpe(t,e,r){r?t[e]=I1('ISODate("'+t[e].toUTCString()+'")'):t[e]=I1('new Date("'+t[e].toUTCString()+'")')}function xO(t,e,r,n){if(t&&typeof t.toBSON=="function"&&(t=t.toBSON()),t==null)return t;let s=$t()(t,ape),o=NR(s);if(o==="Binary")s="BinData("+s.sub_type+', "'+s.toString("base64")+'")';else if(o==="ObjectId")s=I1('ObjectId("'+s.toHexString()+'")');else if(o==="Date")s=I1('new Date("'+s.toUTCString()+'")');else if(o==="Object"){let u=Object.keys(s),a=u.length,c;for(let l=0;l<a;++l)if(c=u[l],s[c]){let h;if(typeof s[c].toBSON=="function")try{s[c]=s[c].toBSON()}catch(p){h=p}let d=NR(s[c]);if(d==="Binary")s[c]="BinData("+s[c].sub_type+', "'+s[c].buffer.toString("base64")+'")';else if(d==="Object")s[c]=xO(s[c],!0);else if(d==="ObjectId")hpe(s,c);else if(d==="Date")dpe(s,c,n);else if(d==="ClientSession")s[c]=I1('ClientSession("'+(s[c]&&s[c].id&&s[c].id.id&&s[c].id.id.buffer||"").toString("hex")+'")');else if(Array.isArray(s[c]))s[c]=s[c].map(fpe);else if(h!=null)throw h}}return e?s:RO.inspect(s,!1,10,r).replace(/\n/g,"").replace(/\s{2,}/g," ")}Fs.prototype.getIndexes=Fs.prototype.indexInformation;RR.exports=Fs});var $O=y((JBe,$R)=>{"use strict";f();var ppe=require("events").EventEmitter,Xh=Fe();var FR=["close","change","end","error","resumeTokenChanged"];var FO=class extends ppe{constructor(e,r,n){if(super(),this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=r,this.options=n,this.errored=!1,n&&n.hydrate&&!n.model)throw new Error("Cannot create change stream with `hydrate: true` unless calling `Model.watch()`");let i=null;if(this.$driverChangeStreamPromise=new Promise((s,o)=>{try{e((u,a)=>{if(u!=null)return this.errored=!0,this.emit("error",u),o(u);this.driverChangeStream=a,this.emit("ready"),s()})}catch(u){i=u,this.errored=!0,this.emit("error",u),o(u)}}),i!=null)throw i}_bindEvents(){if(!this.bindedEvents){if(this.bindedEvents=!0,this.driverChangeStream==null){this.$driverChangeStreamPromise.then(()=>{this.driverChangeStream.on("close",()=>{this.closed=!0}),FR.forEach(e=>{this.driverChangeStream.on(e,r=>{r!=null&&r.fullDocument!=null&&this.options&&this.options.hydrate&&(r.fullDocument=this.options.model.hydrate(r.fullDocument)),this.emit(e,r)})})},()=>{});return}this.driverChangeStream.on("close",()=>{this.closed=!0}),FR.forEach(e=>{this.driverChangeStream.on(e,r=>{r!=null&&r.fullDocument!=null&&this.options&&this.options.hydrate&&(r.fullDocument=this.options.model.hydrate(r.fullDocument)),this.emit(e,r)})})}}hasNext(e){if(this.errored)throw new Xh("Cannot call hasNext() on errored ChangeStream");return this.driverChangeStream.hasNext(e)}next(e){if(this.errored)throw new Xh("Cannot call next() on errored ChangeStream");if(this.options&&this.options.hydrate){if(e!=null){let n=e;e=(i,s)=>i!=null?n(i):(s.fullDocument!=null&&(s.fullDocument=this.options.model.hydrate(s.fullDocument)),n(null,s))}let r=this.driverChangeStream.next(e);return r&&typeof r.then=="function"&&(r=r.then(n=>(n.fullDocument!=null&&(n.fullDocument=this.options.model.hydrate(n.fullDocument)),n))),r}return this.driverChangeStream.next(e)}addListener(e,r){if(this.errored)throw new Xh("Cannot call addListener() on errored ChangeStream");return this._bindEvents(),super.addListener(e,r)}on(e,r){if(this.errored)throw new Xh("Cannot call on() on errored ChangeStream");return this._bindEvents(),super.on(e,r)}once(e,r){if(this.errored)throw new Xh("Cannot call once() on errored ChangeStream");return this._bindEvents(),super.once(e,r)}_queue(e){this.once("ready",()=>e())}close(){return this.closed=!0,this.driverChangeStream?this.driverChangeStream.close():this.$driverChangeStreamPromise.then(()=>this.driverChangeStream.close(),()=>{})}};$R.exports=FO});var P1=y((ZBe,LR)=>{"use strict";f();function ut(){this._pres=new Map,this._posts=new Map}ut.skipWrappedFunction=function(){if(!(this instanceof ut.skipWrappedFunction))return new ut.skipWrappedFunction(...arguments);this.args=[...arguments]};ut.overwriteResult=function(){if(!(this instanceof ut.overwriteResult))return new ut.overwriteResult(...arguments);this.args=[...arguments]};ut.prototype.execPre=function(t,e,r,n){arguments.length===3&&(n=r,r=[]);let i=this._pres.get(t)||[],s=i.length,o=i.numAsync||0,u=0,a=o,c=!1,l=r,h=null;if(!s)return ed(function(){n(null)});function d(){if(u>=s)return;let m=i[u];if(m.isAsync){let g=[Zh(p),Zh(function(_){if(_){if(c)return;if(_ instanceof ut.skipWrappedFunction)h=_;else return c=!0,n(_)}if(--a===0&&u>=s)return n(h)})];j2(m.fn,e,g,g[0])}else if(m.fn.length>0){let g=[Zh(p)],_=arguments.length>=2?arguments:[null].concat(l);for(let w=1;w<_.length;++w)w===_.length-1&&typeof _[w]=="function"||g.push(_[w]);j2(m.fn,e,g,g[0])}else{let g=null;try{g=m.fn.call(e)}catch(_){if(_!=null)return n(_)}if(U2(g))g.then(()=>p(),_=>p(_));else{if(++u>=s)return a>0?void 0:ed(function(){n(h)});d()}}}d.apply(null,[null].concat(r));function p(m){if(m){if(c)return;if(m instanceof ut.skipWrappedFunction)h=m;else return c=!0,n(m)}if(++u>=s)return a>0?void 0:n(h);d.apply(e,arguments)}};ut.prototype.execPreSync=function(t,e,r){let n=this._pres.get(t)||[],i=n.length;for(let s=0;s<i;++s)n[s].fn.apply(e,r||[])};ut.prototype.execPost=function(t,e,r,n,i){arguments.length<5&&(i=n,n=null);let s=this._posts.get(t)||[],o=s.length,u=0,a=null;if(n&&n.error&&(a=n.error),!o)return ed(function(){i.apply(null,[a].concat(r))});function c(){let l=s[u].fn,h=0,d=r.length,p=[];for(let m=0;m<d;++m)h+=r[m]&&r[m]._kareemIgnore?0:1,(!r[m]||!r[m]._kareemIgnore)&&p.push(r[m]);if(a)if(qR(s[u],h)){let m=Zh(function(g){if(g){if(g instanceof ut.overwriteResult)return r=g.args,++u>=o?i.call(null,a):c();a=g}if(++u>=o)return i.call(null,a);c()});j2(l,e,[a].concat(p).concat([m]),m)}else{if(++u>=o)return i.call(null,a);c()}else{let m=Zh(function(g){if(g)return g instanceof ut.overwriteResult?(r=g.args,++u>=o?i.apply(null,[null].concat(r)):c()):(a=g,c());if(++u>=o)return i.apply(null,[null].concat(r));c()});if(qR(s[u],h))return++u>=o?i.apply(null,[null].concat(r)):c();if(l.length===h+1)j2(l,e,p.concat([m]),m);else{let g,_;try{_=l.apply(e,p)}catch(w){g=w,a=w}if(U2(_))return _.then(w=>{m(w instanceof ut.overwriteResult?w:null)},w=>m(w));if(_ instanceof ut.overwriteResult&&(r=_.args),++u>=o)return i.apply(null,[g].concat(r));c()}}}c()};ut.prototype.execPostSync=function(t,e,r){let n=this._posts.get(t)||[],i=n.length;for(let s=0;s<i;++s){let o=n[s].fn.apply(e,r||[]);o instanceof ut.overwriteResult&&(r=o.args)}return r};ut.prototype.createWrapperSync=function(t,e){let r=this;return function(){r.execPreSync(t,this,arguments);let i=e.apply(this,arguments);return r.execPostSync(t,this,[i])[0]}};function kR(t,e,r,n,i,s,o){return s.useErrorHandlers?t.execPost(r,n,i,{error:e},function(u){return typeof o=="function"&&o(u)}):typeof o=="function"&&o(e)}ut.prototype.wrap=function(t,e,r,n,i){let s=n.length>0?n[n.length-1]:null,o=Array.from(n);typeof s=="function"&&o.pop();let u=this;i=i||{};let a=i.checkForPromise;this.execPre(t,r,n,function(c){if(c&&!(c instanceof ut.skipWrappedFunction)){let p=i.numCallbackParams||0,m=i.contextParameter?[r]:[];for(let g=m.length;g<p;++g)m.push(null);return kR(u,c,t,r,m,i,s)}let l=e.length,h;if(c instanceof ut.skipWrappedFunction)return h=c.args[0],d(null,...c.args);try{h=e.apply(r,o.concat(d))}catch(p){return d(p)}if(a){if(U2(h))return h.then(p=>d(null,p),p=>d(p));if(l<o.length+1)return d(null,h)}function d(){let p=Array.from(arguments);if(p.shift(),i.nullResultByDefault&&p.length===0&&p.push(null),arguments[0])return kR(u,arguments[0],t,r,p,i,s);u.execPost(t,r,p,function(){s!==null&&(arguments[0]?s(arguments[0]):s.apply(r,arguments))})}})};ut.prototype.filter=function(t){let e=this.clone(),r=Array.from(e._pres.keys());for(let i of r){let s=this._pres.get(i).map(o=>Object.assign({},o,{name:i})).filter(t);if(s.length===0){e._pres.delete(i);continue}s.numAsync=s.filter(o=>o.isAsync).length,e._pres.set(i,s)}let n=Array.from(e._posts.keys());for(let i of n){let s=this._posts.get(i).map(o=>Object.assign({},o,{name:i})).filter(t);if(s.length===0){e._posts.delete(i);continue}e._posts.set(i,s)}return e};ut.prototype.hasHooks=function(t){return this._pres.has(t)||this._posts.has(t)};ut.prototype.createWrapper=function(t,e,r,n){let i=this;return this.hasHooks(t)?function(){let s=r||this;i.wrap(t,e,s,Array.from(arguments),n)}:function(){ed(()=>e.apply(this,arguments))}};ut.prototype.pre=function(t,e,r,n,i){let s={};typeof e=="object"&&e!==null?(s=e,e=s.isAsync):typeof arguments[1]!="boolean"&&(r=e,e=!1);let o=this._pres.get(t)||[];if(this._pres.set(t,o),e&&(o.numAsync=o.numAsync||0,++o.numAsync),typeof r!="function")throw new Error('pre() requires a function, got "'+typeof r+'"');return i?o.unshift(Object.assign({},s,{fn:r,isAsync:e})):o.push(Object.assign({},s,{fn:r,isAsync:e})),this};ut.prototype.post=function(t,e,r,n){let i=this._posts.get(t)||[];if(typeof e=="function"&&(n=!!r,r=e,e={}),typeof r!="function")throw new Error('post() requires a function, got "'+typeof r+'"');return n?i.unshift(Object.assign({},e,{fn:r})):i.push(Object.assign({},e,{fn:r})),this._posts.set(t,i),this};ut.prototype.clone=function(){let t=new ut;for(let e of this._pres.keys()){let r=this._pres.get(e).slice();r.numAsync=this._pres.get(e).numAsync,t._pres.set(e,r)}for(let e of this._posts.keys())t._posts.set(e,this._posts.get(e).slice());return t};ut.prototype.merge=function(t,e){e=arguments.length===1?!0:e;let r=e?this.clone():this;for(let n of t._pres.keys()){let i=r._pres.get(n)||[],s=t._pres.get(n).filter(u=>i.map(a=>a.fn).indexOf(u.fn)===-1),o=i.concat(s);o.numAsync=i.numAsync||0,o.numAsync+=s.filter(u=>u.isAsync).length,r._pres.set(n,o)}for(let n of t._posts.keys()){let i=r._posts.get(n)||[],s=t._posts.get(n).filter(o=>i.indexOf(o)===-1);r._posts.set(n,i.concat(s))}return r};function j2(t,e,r,n){let i;try{i=t.apply(e,r)}catch(s){return n(s)}U2(i)&&i.then(()=>n(),s=>n(s))}function U2(t){return typeof t=="object"&&t!==null&&typeof t.then=="function"}function Zh(t){let e=!1,r=this;return function(){if(!e)return e=!0,ed(()=>t.apply(r,arguments))}}var ed=typeof process=="object"&&process!==null&&process.nextTick||function(e){setTimeout(e,0)};function qR(t,e){return t.errorHandler?!0:t.fn.length===e+2}LR.exports=ut});var VR=y((jR,UR)=>{"use strict";f();var an=UR.exports=jR={};an.DocumentNotFoundError=null;an.general={};an.general.default="Validator failed for path `{PATH}` with value `{VALUE}`";an.general.required="Path `{PATH}` is required.";an.Number={};an.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).";an.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).";an.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";an.Date={};an.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).";an.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).";an.String={};an.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";an.String.match="Path `{PATH}` is invalid ({VALUE}).";an.String.minlength="Path `{PATH}` (`{VALUE}`) is shorter than the minimum allowed length ({MINLENGTH}).";an.String.maxlength="Path `{PATH}` (`{VALUE}`) is longer than the maximum allowed length ({MAXLENGTH})."});var z2=y((rIe,WR)=>{"use strict";f();var zR=Fe(),mpe=require("util"),V2=class extends zR{constructor(e,r,n,i){let s,o=zR.messages;o.DocumentNotFoundError!=null?s=typeof o.DocumentNotFoundError=="function"?o.DocumentNotFoundError(e,r):o.DocumentNotFoundError:s='No document found for query "'+mpe.inspect(e)+'" on model "'+r+'"',super(s),this.result=i,this.numAffected=n,this.filter=e,this.query=e}};Object.defineProperty(V2.prototype,"name",{value:"DocumentNotFoundError"});WR.exports=V2});var cn=y((iIe,KR)=>{"use strict";f();var ype=Fe(),gpe=require("util"),W2=class extends ype{constructor(e,r,n,i,s){if(arguments.length>0){let o=HR(r),u=GR(s),a=kO(null,e,r,n,u,o,i);super(a),this.init(e,r,n,i,s)}else super(kO())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init(e,r,n,i,s){this.stringValue=qO(r),this.messageFormat=GR(s),this.kind=e,this.value=r,this.path=n,this.reason=i,this.valueType=HR(r)}copy(e){this.messageFormat=e.messageFormat,this.stringValue=e.stringValue,this.kind=e.kind,this.value=e.value,this.path=e.path,this.reason=e.reason,this.message=e.message,this.valueType=e.valueType}setModel(e){this.message=kO(e,this.kind,this.value,this.path,this.messageFormat,this.valueType)}};Object.defineProperty(W2.prototype,"name",{value:"CastError"});function qO(t){let e=gpe.inspect(t);return e=e.replace(/^'|'$/g,'"'),e.startsWith('"')||(e='"'+e+'"'),e}function HR(t){if(t==null)return""+t;let e=typeof t;return e!=="object"||typeof t.constructor!="function"?e:t.constructor.name}function GR(t){let e=t&&t._castErrorMessage||null;if(typeof e=="string"||typeof e=="function")return e}function kO(t,e,r,n,i,s,o){if(typeof i=="string"){let u=qO(r),a=i.replace("{KIND}",e).replace("{VALUE}",u).replace("{PATH}",n);return t!=null&&(a=a.replace("{MODEL}",t.modelName)),a}else{if(typeof i=="function")return i(r,n,t,e);{let u=qO(r),a=s?" (type "+s+")":"",c="Cast to "+e+" failed for value "+u+a+' at path "'+n+'"';return t!=null&&(c+=' for model "'+t.modelName+'"'),o!=null&&typeof o.constructor=="function"&&o.constructor.name!=="AssertionError"&&o.constructor.name!=="Error"&&(c+=' because of "'+o.constructor.name+'"'),c}}}KR.exports=W2});var LO=y((oIe,YR)=>{"use strict";f();YR.exports=function(e){let r=Object.keys(e.errors||{}),n=r.length,i=[],s;for(let o=0;o<n;++o)s=r[o],e!==e.errors[s]&&i.push(s+": "+e.errors[s].message);return i.join(", ")}});var Ac=y((aIe,XR)=>{"use strict";f();var _pe=Fe(),Epe=Cn(),QR=require("util"),JR=LO(),Ec=class t extends _pe{constructor(e){let r;Epe(e)==="model"?r=e.constructor.modelName+" validation failed":r="Validation failed",super(r),this.errors={},this._message=r,e&&(e.$errors=this.errors)}toString(){return this.name+": "+JR(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(e,r){if(r instanceof t){let{errors:n}=r;for(let i of Object.keys(n))this.addError(`${e}.${i}`,n[i]);return}this.errors[e]=r,this.message=this._message+": "+JR(this)}};QR.inspect.custom&&(Ec.prototype[QR.inspect.custom]=Ec.prototype.inspect);Object.defineProperty(Ec.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(Ec.prototype,"name",{value:"ValidationError"});XR.exports=Ec});var jO=y((lIe,tx)=>{"use strict";f();var ZR=Fe(),N1=class extends ZR{constructor(e,r){let n=e.message;n||(n=ZR.messages.general.default);let i=ex(n,e,r);super(i),e=Object.assign({},e,{message:i}),this.properties=e,this.kind=e.type,this.path=e.path,this.value=e.value,this.reason=e.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}};Object.defineProperty(N1.prototype,"name",{value:"ValidatorError"});Object.defineProperty(N1.prototype,"properties",{enumerable:!1,writable:!0,value:null});N1.prototype.formatMessage=ex;function ex(t,e,r){if(typeof t=="function")return t(e,r);let n=Object.keys(e);for(let i of n)i!=="message"&&(t=t.replace("{"+i.toUpperCase()+"}",e[i]));return t}tx.exports=N1});var UO=y((hIe,rx)=>{"use strict";f();var Ape=Fe(),H2=class extends Ape{constructor(e,r,n){let i=n.join(", ");super('No matching document found for id "'+e._doc._id+'" version '+r+' modifiedPaths "'+i+'"'),this.version=r,this.modifiedPaths=n}};Object.defineProperty(H2.prototype,"name",{value:"VersionError"});rx.exports=H2});var VO=y((pIe,nx)=>{"use strict";f();var wpe=Fe(),G2=class extends wpe{constructor(e){super("Can't save() the same doc multiple times in parallel. Document: "+e._doc._id)}};Object.defineProperty(G2.prototype,"name",{value:"ParallelSaveError"});nx.exports=G2});var zO=y((yIe,ix)=>{"use strict";f();var Spe=Fe(),K2=class extends Spe{constructor(e){super("Cannot overwrite `"+e+"` model once compiled.")}};Object.defineProperty(K2.prototype,"name",{value:"OverwriteModelError"});ix.exports=K2});var ox=y((_Ie,sx)=>{"use strict";f();var bpe=Fe(),Y2=class extends bpe{constructor(e){let r=`Schema hasn't been registered for model "`+e+`".
Use mongoose.model(name, schema)`;super(r)}};Object.defineProperty(Y2.prototype,"name",{value:"MissingSchemaError"});sx.exports=Y2});var ax=y((AIe,ux)=>{"use strict";f();var Ope=Cn();ux.exports=function(e){if(Ope(e)!=="TopologyDescription")return!1;let r=Array.from(e.servers.values());return r.length>0&&r.every(n=>n.type==="Unknown")}});var lx=y((SIe,cx)=>{"use strict";f();var Cpe=Cn();cx.exports=function(e){if(Cpe(e)!=="TopologyDescription"||e.servers.size===0)return!1;for(let r of e.servers.values())if(r.host.endsWith(".mongodb.net")===!1||r.port!==27017)return!1;return!0}});var hx=y((OIe,fx)=>{"use strict";f();var Tpe=Cn(),Dpe="Client network socket disconnected before secure TLS connection was established";fx.exports=function(e){if(Tpe(e)!=="TopologyDescription")return!1;let r=Array.from(e.servers.values());return r.length>0&&r.every(n=>n.error&&n.error.message.indexOf(Dpe)!==-1)}});var WO=y((TIe,dx)=>{"use strict";f();var Mpe=Fe(),vpe=ax(),Bpe=lx(),Ipe=hx();var Ppe="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/",Npe="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html",Q2=class extends Mpe{assimilateError(e){let r=e.reason;Bpe(r)&&vpe(r)&&e.message.indexOf("bad auth")===-1&&e.message.indexOf("Authentication failed")===-1?this.message=Ppe:Ipe(r)?this.message=Npe:this.message=e.message;for(let i in e)i!=="name"&&(this[i]=e[i]);return this}};Object.defineProperty(Q2.prototype,"name",{value:"MongooseServerSelectionError"});dx.exports=Q2});var HO=y((MIe,px)=>{"use strict";f();var Rpe=Fe(),J2=class extends Rpe{constructor(e){let r="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+e.join(`
  `)+`
Use Model.updateOne() to update these arrays instead.`;super(r)}};Object.defineProperty(J2.prototype,"name",{value:"DivergentArrayError"});px.exports=J2});var oa=y((BIe,mx)=>{"use strict";f();var xpe=Fe(),X2=class extends xpe{constructor(e,r,n){r=r||"Field `"+e+"` is not in schema and strict mode is set to throw.",super(r),this.isImmutableError=!!n,this.path=e}};Object.defineProperty(X2.prototype,"name",{value:"StrictModeError"});mx.exports=X2});var GO=y((PIe,yx)=>{"use strict";f();var Fpe=Fe(),Z2=class extends Fpe{constructor(e,r){r=r||"Cannot populate path `"+e+"` because it is not in your schema. Set the `strictPopulate` option to false to override.",super(r),this.path=e}};Object.defineProperty(Z2.prototype,"name",{value:"StrictPopulateError"});yx.exports=Z2});var Hn=y((gx,_x)=>{"use strict";f();var ln=Fe();_x.exports=gx=ln;ln.messages=VR();ln.Messages=ln.messages;ln.DocumentNotFoundError=z2();ln.CastError=cn();ln.ValidationError=Ac();ln.ValidatorError=jO();ln.VersionError=UO();ln.ParallelSaveError=VO();ln.OverwriteModelError=zO();ln.MissingSchemaError=ox();ln.MongooseServerSelectionError=WO();ln.DivergentArrayError=HO();ln.StrictModeError=oa();ln.StrictPopulateError=GO()});var Qi=y((xIe,Ex)=>{"use strict";f();Ex.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})});var gi=y(($Ie,Ax)=>{"use strict";f();var $pe=$t(),jr=class{constructor(e){if(e==null)return this;Object.assign(this,$pe(e))}},Gn=Qi();Object.defineProperty(jr.prototype,"type",Gn);Object.defineProperty(jr.prototype,"validate",Gn);Object.defineProperty(jr.prototype,"cast",Gn);Object.defineProperty(jr.prototype,"required",Gn);Object.defineProperty(jr.prototype,"default",Gn);Object.defineProperty(jr.prototype,"ref",Gn);Object.defineProperty(jr.prototype,"refPath",Gn);Object.defineProperty(jr.prototype,"select",Gn);Object.defineProperty(jr.prototype,"index",Gn);Object.defineProperty(jr.prototype,"unique",Gn);Object.defineProperty(jr.prototype,"immutable",Gn);Object.defineProperty(jr.prototype,"sparse",Gn);Object.defineProperty(jr.prototype,"text",Gn);Object.defineProperty(jr.prototype,"transform",Gn);Ax.exports=jr});var eg=y((qIe,R1)=>{"use strict";f();var kpe=cn();R1.exports=function(e,r){if(R1.exports.convertToTrue.has(e))return!0;if(R1.exports.convertToFalse.has(e))return!1;if(e==null)return e;throw new kpe("boolean",e,r)};R1.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]);R1.exports.convertToFalse=new Set([!1,"false",0,"0","no"])});var tg=y((jIe,wx)=>{"use strict";f();var qpe=eg();wx.exports=function(t){let e=this!=null?this.path:null;return qpe(t,e)}});var KO=y((VIe,Sx)=>{"use strict";f();Sx.exports=function(t){if(Array.isArray(t)){if(!t.every(e=>typeof e=="number"||typeof e=="string"))throw new Error("$type array values must be strings or numbers");return t}if(typeof t!="number"&&typeof t!="string")throw new Error("$type parameter must be number, string, or array of numbers and strings");return t}});var Ox=y((WIe,bx)=>{"use strict";f();var Lpe=oa();bx.exports=function(t){t.$immutable?(t.$immutableSetter=jpe(t.path,t.options.immutable),t.set(t.$immutableSetter)):t.$immutableSetter&&(t.setters=t.setters.filter(e=>e!==t.$immutableSetter),delete t.$immutableSetter)};function jpe(t,e){return function(n,i,s,o){if(this==null||this.$__==null||this.isNew||o&&o.overwriteImmutable||!(typeof e=="function"?e.call(this,this):e))return n;let a=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue(t):this.$__getValue(t);if(this.$__.strictMode==="throw"&&n!==a)throw new Lpe(t,"Path `"+t+"` is immutable and strict mode is set to throw.",!0);return a}}});var Tx=y((GIe,Cx)=>{"use strict";f();Cx.exports=function(e){return typeof e=="function"&&e.constructor&&e.constructor.name==="AsyncFunction"}});var Mx=y((YIe,Dx)=>{"use strict";f();Dx.exports=function(e){let r=Object.keys(e),n=!0;for(let i=0,s=r.length;i<s;++i)if(typeof e[r[i]]=="object"&&e[r[i]]!==null){n=!1;break}return n}});var ng=y((JIe,vx)=>{f();var x1=1e3,F1=x1*60,$1=F1*60,wc=$1*24,Upe=wc*7,Vpe=wc*365.25;vx.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return zpe(t);if(r==="number"&&isFinite(t))return e.long?Hpe(t):Wpe(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function zpe(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Vpe;case"weeks":case"week":case"w":return r*Upe;case"days":case"day":case"d":return r*wc;case"hours":case"hour":case"hrs":case"hr":case"h":return r*$1;case"minutes":case"minute":case"mins":case"min":case"m":return r*F1;case"seconds":case"second":case"secs":case"sec":case"s":return r*x1;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Wpe(t){var e=Math.abs(t);return e>=wc?Math.round(t/wc)+"d":e>=$1?Math.round(t/$1)+"h":e>=F1?Math.round(t/F1)+"m":e>=x1?Math.round(t/x1)+"s":t+"ms"}function Hpe(t){var e=Math.abs(t);return e>=wc?rg(t,e,wc,"day"):e>=$1?rg(t,e,$1,"hour"):e>=F1?rg(t,e,F1,"minute"):e>=x1?rg(t,e,x1,"second"):t+" ms"}function rg(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Ix=y((ZIe,Bx)=>{"use strict";f();Bx.exports=function(e){let r=[],n="",i="DEFAULT";for(let s=0;s<e.length;++s)i==="IN_SQUARE_BRACKETS"&&!/\d/.test(e[s])&&e[s]!=="]"&&(i="DEFAULT",n=r[r.length-1]+"["+n,r.splice(r.length-1,1)),e[s]==="["?(i!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(r.push(n),n=""),i="IN_SQUARE_BRACKETS"):e[s]==="]"?i==="IN_SQUARE_BRACKETS"?(i="IMMEDIATELY_AFTER_SQUARE_BRACKETS",r.push(n),n=""):(i="DEFAULT",n+=e[s]):e[s]==="."?(i!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(r.push(n),n=""),i="DEFAULT"):n+=e[s];return i!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&r.push(n),r}});var xx=y(ru=>{f();var td=Ix(),Px=["__proto__","constructor","prototype"];ru.get=function(t,e,r,n){var i;typeof r=="function"&&(r.length<2?(n=r,r=void 0):(i=r,r=void 0)),n||(n=Rx);var s=typeof t=="string"?td(t):t;if(!Array.isArray(s))throw new TypeError("Invalid `path`. Must be either string or array");for(var o=e,u,a=0;a<s.length;++a){if(u=s[a],typeof s[a]!="string"&&typeof s[a]!="number")throw new TypeError("Each segment of path to `get()` must be a string or number, got "+typeof s[a]);if(Array.isArray(o)&&!/^\d+$/.test(u)){var c=s.slice(a);return[].concat(o).map(function(h){return h?ru.get(c,h,r||i,n):n(void 0)})}if(i)o=i(o,u);else{var l=r&&o[r]?o[r]:o;o=l instanceof Map?l.get(u):l[u]}if(!o)return n(o)}return n(o)};ru.has=function(t,e){var r=typeof t=="string"?td(t):t;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var n=r.length,i=e,s=0;s<n;++s){if(typeof r[s]!="string"&&typeof r[s]!="number")throw new TypeError("Each segment of path to `has()` must be a string or number, got "+typeof r[s]);if(i==null||typeof i!="object"||!(r[s]in i))return!1;i=i[r[s]]}return!0};ru.unset=function(t,e){var r=typeof t=="string"?td(t):t;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var n=r.length,i=e,s=0;s<n;++s){if(i==null||typeof i!="object"||!(r[s]in i))return!1;if(typeof r[s]!="string"&&typeof r[s]!="number")throw new TypeError("Each segment of path to `unset()` must be a string or number, got "+typeof r[s]);if(Px.indexOf(r[s])!==-1)return!1;if(s===n-1)return delete i[r[s]],!0;i=i instanceof Map?i.get(r[s]):i[r[s]]}return!0};ru.set=function(t,e,r,n,i,s){var o;typeof n=="function"&&(n.length<2?(i=n,n=void 0):(o=n,n=void 0)),i||(i=Rx);var u=typeof t=="string"?td(t):t;if(!Array.isArray(u))throw new TypeError("Invalid `path`. Must be either string or array");if(r!=null){for(var a=0;a<u.length;++a){if(typeof u[a]!="string"&&typeof u[a]!="number")throw new TypeError("Each segment of path to `set()` must be a string or number, got "+typeof u[a]);if(Px.indexOf(u[a])!==-1)return}for(var c=s||/\$/.test(t)&&s!==!1,l=r,h,a=0,d=u.length-1;a<d;++a){if(h=u[a],h=="$"){if(a==d-1)break;continue}if(Array.isArray(l)&&!/^\d+$/.test(h)){var p=u.slice(a);if(!c&&Array.isArray(e))for(var m=0;m<l.length&&m<e.length;++m)ru.set(p,e[m],l[m],n||o,i,c);else for(var m=0;m<l.length;++m)ru.set(p,e,l[m],n||o,i,c);return}if(o)l=o(l,h);else{var g=n&&l[n]?l[n]:l;l=g instanceof Map?g.get(h):g[h]}if(!l)return}if(h=u[d],n&&l[n]&&(l=l[n]),Array.isArray(l)&&!/^\d+$/.test(h))if(!c&&Array.isArray(e))Nx(l,e,h,o,n,i);else for(var m=0;m<l.length;++m){var _=l[m];_&&(o?o(_,h,i(e)):(_[n]&&(_=_[n]),_[h]=i(e)))}else o?o(l,h,i(e)):l instanceof Map?l.set(h,i(e)):l[h]=i(e)}};ru.stringToParts=td;function Nx(t,e,r,n,i,s){for(var o,u=0;u<t.length&&u<e.length;++u)o=t[u],Array.isArray(o)&&Array.isArray(e[u])?Nx(o,e[u],r,n,i,s):o&&(n?n(o,r,s(e[u])):(o[i]&&(o=o[i]),o[r]=s(e[u])))}function Rx(t){return t}});var _i=y((Fx,$x)=>{"use strict";f();$x.exports=Fx=xx()});var QO=y((iPe,kx)=>{"use strict";f();var Gpe=$t(),YO=class{constructor(e){if(this._docs={},this._childDocs=[],e!=null&&(e=Gpe(e),Object.assign(this,e),typeof e.subPopulate=="object"&&(this.populate=e.subPopulate),e.perDocumentLimit!=null&&e.limit!=null))throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+e.path+"`.")}};kx.exports=YO});var Lx=y(qx=>{"use strict";f();qx.isMongooseDocumentArray=function(t){return Array.isArray(t)&&t.isMongooseDocumentArray}});var ig=y((aPe,jx)=>{"use strict";f();var Kpe=Ti(),k1=Symbol("mongoose#emitted");jx.exports=function(e,r,n,i){if(typeof e=="function")try{return r(function(s){if(s!=null){n!=null&&n.listeners!=null&&n.listeners("error").length>0&&!s[k1]&&(s[k1]=!0,n.emit("error",s));try{e(s)}catch(o){return Kpe(()=>{throw o})}return}e.apply(this,arguments)})}catch(s){return n!=null&&n.listeners!=null&&n.listeners("error").length>0&&!s[k1]&&(s[k1]=!0,n.emit("error",s)),e(s)}return i=i||global.Promise,new i((s,o)=>{r(function(u,a){if(u!=null)return n!=null&&n.listeners!=null&&n.listeners("error").length>0&&!u[k1]&&(u[k1]=!0,n.emit("error",u)),o(u);if(arguments.length>2)return s(Array.prototype.slice.call(arguments,1));s(a)})})}});var sg=y((lPe,Ux)=>{"use strict";f();Ux.exports=function(e,r,n){let i=Object.keys(r.tree),s={};for(let o of i)n&&(e.paths[o]||e.nested[o]||e.singleNestedPaths[o])||(s[o]=r.tree[o]);e.options._isMerging=!0,e.add(s,null),delete e.options._isMerging,e.callQueue=e.callQueue.concat(r.callQueue),e.method(r.methods),e.static(r.statics);for(let[o,u]of Object.entries(r._userProvidedOptions))o in e._userProvidedOptions||e.set(o,u);for(let o in r.query)e.query[o]=r.query[o];for(let o in r.virtuals)e.virtuals[o]=r.virtuals[o].clone();e._indexes=e._indexes.concat(r._indexes||[]),e.s.hooks.merge(r.s.hooks,!1)}});var Wx=y((Vx,zx)=>{"use strict";f();var hPe=Ce(),Ji=zx.exports=Vx=function(){};Ji.ctor=function(){let t=[...arguments],e=function(){Ji.apply(this,arguments),this.paths={},this.states={}};return e.prototype=new Ji,e.prototype.constructor=e,e.prototype.stateNames=t,t.forEach(function(r){e.prototype[r]=function(n){this._changeState(n,r)}}),e};Ji.prototype._changeState=function(e,r){let n=this.paths[e];if(n===r)return;let i=this.states[n];i&&delete i[e],this.paths[e]=r,this.states[r]=this.states[r]||{},this.states[r][e]=!0};Ji.prototype.clear=function(e){if(this.states[e]==null)return;let r=Object.keys(this.states[e]),n=r.length,i;for(;n--;)i=r[n],delete this.states[e][i],delete this.paths[i]};Ji.prototype.clearPath=function(e){let r=this.paths[e];r&&(delete this.paths[e],delete this.states[r][e])};Ji.prototype.getStatePaths=function(e){return this.states[e]!=null?this.states[e]:{}};Ji.prototype.some=function(){let e=this,r=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(r,function(n){return e.states[n]==null?!1:Object.keys(e.states[n]).length})};Ji.prototype._iter=function(e){return function(){let r=[...arguments],n=r.pop();r.length||(r=this.stateNames);let i=this;return r.reduce(function(o,u){return i.states[u]==null?o:o.concat(Object.keys(i.states[u]))},[])[e](function(o,u,a){return n(o,u,a)})}};Ji.prototype.forEach=function(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)};Ji.prototype.map=function(){return this.map=this._iter("map"),this.map.apply(this,arguments)};Ji.prototype.clone=function(){let e=new this.constructor;e.paths={...this.paths};for(let r of this.stateNames)r in this.states&&(e.states[r]=this.states[r]==null?this.states[r]:{...this.states[r]});return e}});var Kx=y((Hx,Gx)=>{"use strict";f();var Ype=Wx(),Qpe=Ype.ctor("require","modify","init","default","ignore");Gx.exports=Hx=Ht;function Ht(){this.activePaths=new Qpe}Ht.prototype.strictMode=!0;Ht.prototype.fullPath=void 0;Ht.prototype.selected=void 0;Ht.prototype.shardval=void 0;Ht.prototype.saveError=void 0;Ht.prototype.validationError=void 0;Ht.prototype.adhocPaths=void 0;Ht.prototype.removing=void 0;Ht.prototype.inserting=void 0;Ht.prototype.saving=void 0;Ht.prototype.version=void 0;Ht.prototype._id=void 0;Ht.prototype.ownerDocument=void 0;Ht.prototype.populate=void 0;Ht.prototype.populated=void 0;Ht.prototype.primitiveAtomics=void 0;Ht.prototype.wasPopulated=!1;Ht.prototype.scope=void 0;Ht.prototype.session=null;Ht.prototype.pathsToScopes=null;Ht.prototype.cachedRequired=null});var rd=y((mPe,Jx)=>{"use strict";f();var JO=vi().Binary,Yx=Ce();function Kn(t,e,r){let n=t;t==null&&(n=0);let i,s,o;Array.isArray(e)?(s=e[0],o=e[1]):i=e;let u;return typeof n=="number"||n instanceof Number?u=Buffer.alloc(n):u=Buffer.from(n,i,r),Yx.decorate(u,Kn.mixin),u.isMongooseBuffer=!0,u[Kn.pathSymbol]=s,u[Qx]=o,u._subtype=0,u}var Jpe=Symbol.for("mongoose#Buffer#_path"),Qx=Symbol.for("mongoose#Buffer#_parent");Kn.pathSymbol=Jpe;Kn.mixin={_subtype:void 0,_markModified:function(){let t=this[Qx];return t&&t.markModified(this[Kn.pathSymbol]),this},write:function(){let t=Buffer.prototype.write.apply(this,arguments);return t>0&&this._markModified(),t},copy:function(t){let e=Buffer.prototype.copy.apply(this,arguments);return t&&t.isMongooseBuffer&&t._markModified(),e}};Yx.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(t){Buffer.prototype[t]&&(Kn.mixin[t]=function(){let e=Buffer.prototype[t].apply(this,arguments);return this._markModified(),e})});Kn.mixin.toObject=function(t){let e=typeof t=="number"?t:this._subtype||0;return new JO(Buffer.from(this),e)};Kn.mixin.$toObject=Kn.mixin.toObject;Kn.mixin.toBSON=function(){return new JO(this,this._subtype||0)};Kn.mixin.equals=function(t){if(!Buffer.isBuffer(t)||this.length!==t.length)return!1;for(let e=0;e<this.length;++e)if(this[e]!==t[e])return!1;return!0};Kn.mixin.subtype=function(t){if(typeof t!="number")throw new TypeError("Invalid subtype. Expected a number");this._subtype!==t&&this._markModified(),this._subtype=t};Kn.Binary=JO;Jx.exports=Kn});var Sc=y(XO=>{"use strict";f();XO.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed");XO.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")});var bc=y((EPe,Xx)=>{"use strict";f();var og=ar(),Xpe=Sc(),Zpe=sa(),e0e=Ce();function $s(t,e){if(e&&e.default){let r=e.default;Array.isArray(r)&&r.length===0?e.default=Array:!e.shared&&Zpe(r)&&Object.keys(r).length===0&&(e.default=function(){return{}})}og.call(this,t,e,"Mixed"),this[Xpe.schemaMixedSymbol]=!0}$s.schemaName="Mixed";$s.defaultOptions={};$s.prototype=Object.create(og.prototype);$s.prototype.constructor=$s;$s.get=og.get;$s.set=og.set;$s.setters=[];$s.prototype.cast=function(t){return t instanceof Error?e0e.errorToPOJO(t):t};$s.prototype.castForQuery=function(t,e){return e};Xx.exports=$s});var eF=y((SPe,Zx)=>{"use strict";f();Zx.exports=class{constructor(e,r,n){this.subdocSnapshot=e,this.activePaths=r,this.version=n}}});var ZO=y((OPe,tF)=>{"use strict";f();var t0e=Fe(),ug=class extends t0e{constructor(e,r){let n=Array.isArray(r)?"array":"primitive value";super("Tried to set nested object field `"+e+`\` to ${n} \``+r+"`"),this.path=e}};Object.defineProperty(ug.prototype,"name",{value:"ObjectExpectedError"});tF.exports=ug});var cg=y((TPe,rF)=>{"use strict";f();var r0e=Fe(),ag=class extends r0e{constructor(e,r,n){super('Parameter "'+r+'" to '+n+'() must be an object, got "'+e.toString()+'" (type '+typeof e+")")}};Object.defineProperty(ag.prototype,"name",{value:"ObjectParameterError"});rF.exports=ag});var iF=y((MPe,nF)=>{"use strict";f();var n0e=Fe(),lg=class extends n0e{constructor(e){super("Can't validate() the same doc multiple times in parallel. Document: "+e._doc._id)}};Object.defineProperty(lg.prototype,"name",{value:"ParallelValidateError"});nF.exports=lg});var eC=y((BPe,sF)=>{"use strict";f();sF.exports=function(e){let r={},n=Object.keys(e);for(let i of n){if(i.indexOf(".")===-1){r[i]=1;continue}let s=i.split("."),o=s[0];for(let u=0;u<s.length;++u)r[o]=1,u+1<s.length&&(o=o+"."+s[u+1])}return r}});var uF=y((PPe,oF)=>{"use strict";f();oF.exports=function(e){return e==null||typeof e!="object"?!1:e.$slice==null&&e.$elemMatch==null&&e.$meta==null&&e.$==null}});var fg=y((RPe,aF)=>{"use strict";f();var i0e=uF();aF.exports=function(e,r,n,i,s,o,u){let a=Object.keys(e.$__schema.paths),c=a.length,l=u&&u.skipParentChangeTracking;for(let h=0;h<c;++h){let d,p="",m=a[h];if(m==="_id"&&e.$__.skipId)continue;let g=e.$__schema.paths[m],_=g.splitPath(),w=_.length,S=!1,C=e._doc;for(let O=0;O<w&&C!=null;++O){let B=_[O];if(p+=(p.length?".":"")+B,n===!0){if(p in r)break}else if(n===!1&&r&&!S){let P=g.$isSingleNested||g.$isMongooseDocumentArray;if(p in r&&!i0e(r[p])||O===w-1&&P&&i!=null&&i[p])S=!0;else if(i!=null&&!i[p])break}if(O===w-1){if(C[B]!==void 0)break;if(s!=null){if(typeof g.defaultValue=="function"){if(!g.defaultValue.$runBeforeSetters&&s||g.defaultValue.$runBeforeSetters&&!s)break}else if(!s)continue}if(o&&o[p])break;if(r&&n!==null){if(n===!0){if(m in r)continue;try{d=g.getDefault(e,!1)}catch(P){e.invalidate(m,P);break}typeof d<"u"&&(C[B]=d,tC(e,m,l))}else if(S){try{d=g.getDefault(e,!1)}catch(P){e.invalidate(m,P);break}typeof d<"u"&&(C[B]=d,tC(e,m,l))}}else{try{d=g.getDefault(e,!1)}catch(P){e.invalidate(m,P);break}typeof d<"u"&&(C[B]=d,tC(e,m,l))}}else C=C[B]}}};function tC(t,e,r){t.$__.activePaths.default(e),!r&&t.$isSubdocument&&t.$isSingleNested&&t.$parent()!=null&&t.$parent().$__.activePaths.default(t.$__pathRelativeToParent(e))}});var hg=y((FPe,lF)=>{"use strict";f();lF.exports=function(e,r,n){n=n||{};let i=n.skipDocArrays,s=0;if(!e)return s;for(let o of Object.keys(e.$__.activePaths.getStatePaths("modify"))){if(i){let u=e.$__schema.path(o);if(u&&u.$isMongooseDocumentArray)continue}o.startsWith(r+".")&&(e.$__.activePaths.clearPath(o),++s,e.$isSubdocument&&cF(e,o))}return s};function cF(t,e,r=new Set){if(r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");let n=t.$parent(),i=t.$__pathRelativeToParent(void 0,!1)+"."+e;n.$__.activePaths.clearPath(i),n.$isSubdocument&&cF(n,i,r)}});var pg=y(rC=>{"use strict";f();var s0e=$t(),o0e=ye().documentSchemaSymbol,u0e=xs().internalToObjectOptions,a0e=Ce(),q1,c0e=ye().getSymbol,dg=ye().scopeSymbol,fF=a0e.isPOJO;rC.compile=hF;rC.defineKey=dF;var l0e=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),f0e=Object.freeze({noDottedPath:!0});function hF(t,e,r,n){q1=q1||Yn();let i=n.typeKey;for(let s of Object.keys(t)){let o=t[s],a=fF(o)&&Object.keys(o).length>0&&(!o[i]||i==="type"&&fF(o.type)&&o.type.type)?o:null;dF({prop:s,subprops:a,prototype:e,prefix:r,options:n})}}function dF({prop:t,subprops:e,prototype:r,prefix:n,options:i}){q1=q1||Yn();let s=(n?n+".":"")+t;n=n||"";let o=n?Object.freeze({}):f0e;e?Object.defineProperty(r,t,{enumerable:!0,configurable:!0,get:function(){let u=this;if(this.$__.getters||(this.$__.getters={}),!this.$__.getters[s]){let a=Object.create(q1.prototype,h0e(this));n||(a.$__[dg]=this),a.$__.nestedPath=s,Object.defineProperty(a,"schema",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(a,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(a,o0e,{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(a,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return s0e(u.get(s,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty(a,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return u.get(s,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null})}}),Object.defineProperty(a,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return u.get(s,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toJSON&&this.schema.options.toJSON.virtuals||null})}}),Object.defineProperty(a,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty(a,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(s,null,l0e)||{}).length===0}}),Object.defineProperty(a,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),hF(e,a,s,i),this.$__.getters[s]=a}return this.$__.getters[s]},set:function(u){u!=null&&u.$__isNested?u=u.$__get():u instanceof q1&&!u.$__isNested&&(u=u.$toObject(u0e)),(this.$__[dg]||this).$set(s,u)}}):Object.defineProperty(r,t,{enumerable:!0,configurable:!0,get:function(){return this[c0e].call(this.$__[dg]||this,s,null,o)},set:function(u){this.$set.call(this.$__[dg]||this,s,u)}})}function h0e(t){let e={};return Object.getOwnPropertyNames(t).forEach(function(r){["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(r)!==-1&&(e[r]=Object.getOwnPropertyDescriptor(t,r),e[r].enumerable=!1)}),e}});var mF=y((LPe,pF)=>{"use strict";f();pF.exports=function(e){return e==null?null:Object.keys(e)[0]}});var L1=y(nC=>{"use strict";f();var d0e=vi().Binary,yF=Lr(),gF=Qh(),p0e=Hn(),m0e=require("util");nC.flatten=_F;nC.modifiedPaths=EF;function _F(t,e,r,n){let i;t&&gF(t)&&!Buffer.isBuffer(t)?i=Object.keys(t.toObject({transform:!1,virtuals:!1})||{}):i=Object.keys(t||{});let s=i.length,o={};e=e?e+".":"";for(let u=0;u<s;++u){let a=i[u],c=t[a];o[e+a]=c;let l=n&&n.path&&n.path(e+a),h=n&&n.nested&&n.nested[e+a];if(!(l&&l.instance==="Mixed")){if(AF(c)){if(r&&r.skipArrays&&Array.isArray(c))continue;let d=_F(c,e+a,r,n);for(let p in d)o[p]=d[p];Array.isArray(c)&&(o[e+a]=c)}if(h){let d=Object.keys(n.paths);for(let p of d)p.startsWith(e+a+".")&&!o.hasOwnProperty(p)&&(o[p]=void 0)}}}return o}function EF(t,e,r,n=null){if(t==null||typeof t!="object")return;if(n==null&&(n={raw:{update:t,path:e},trace:new WeakSet}),n.trace.has(t))throw new p0e(`a circular reference in the update value, updateValue:
${m0e.inspect(n.raw.update,{showHidden:!1,depth:1})}
updatePath: '${n.raw.path}'`);n.trace.add(t);let i=Object.keys(t||{}),s=i.length;r=r||{},e=e?e+".":"";for(let o=0;o<s;++o){let u=i[o],a=t[u],c=e+u;r[c]=!0,!Buffer.isBuffer(a)&&gF(a)&&(a=a.toObject({transform:!1,virtuals:!1})),AF(a)&&EF(a,e+u,r,n)}return n.trace.delete(t),r}function AF(t){return t&&typeof t=="object"&&!(t instanceof Date)&&!yF(t,"ObjectId")&&(!Array.isArray(t)||t.length!==0)&&!(t instanceof Buffer)&&!yF(t,"Decimal128")&&!(t instanceof d0e)}});var Gt=y((zPe,wF)=>{"use strict";f();wF.exports=function(e,r,n){let i,s=!1;if(typeof r=="string"){if(r.indexOf(".")===-1){let a=iC(e,r);return a??n}i=r.split(".")}else if(s=!0,i=r,i.length===1){let a=iC(e,i[0]);return a??n}let o=r,u=e;for(let a of i){if(u==null)return n;if(!s&&u[o]!=null)return u[o];u=iC(u,a),s||(o=o.substr(a.length+1))}return u??n};function iC(t,e){return t==null?t:t instanceof Map?t.get(e):t[e]}});var sC=y((HPe,bF)=>{"use strict";f();var SF=Lr();bF.exports=function(e,r){return typeof e=="string"&&typeof r=="string"||typeof e=="number"&&typeof r=="number"?e===r:SF(e,"ObjectId")&&SF(r,"ObjectId")?e.toString()===r.toString():!1}});var mg=y((KPe,OF)=>{"use strict";f();var y0e=sC();OF.exports=function(e,r){if(e==null||e.discriminators==null)return null;for(let n of Object.keys(e.discriminators)){let i=e.discriminators[n];if(i.discriminatorMapping!=null&&y0e(i.discriminatorMapping.value,r))return i}return null}});var TF=y((QPe,CF)=>{"use strict";f();var g0e=Gt(),_0e=mg();CF.exports=function t(e,r,n){n=n||{};let i=n.typeOnly,s=Array.isArray(r)?r:r.indexOf(".")===-1?[r]:r.split("."),o=null,u="adhocOrUndefined",a=_0e(e.schema,e.get(e.schema.options.discriminatorKey))||e.schema;for(let c=0;c<s.length;++c){let l=s.slice(0,c+1).join(".");if(o=a.path(l),o==null){u="adhocOrUndefined";continue}if(o.instance==="Mixed")return i?"real":o;if(u=a.pathType(l),(o.$isSingleNested||o.$isMongooseDocumentArrayElement)&&o.schema.discriminators!=null){let h=o.schema.discriminators,d=e.get(l+"."+g0e(o,"schema.options.discriminatorKey"));if(d==null||h[d]==null)continue;let p=s.slice(c+1).join(".");return t(e.get(l),p,n)}}return i?u:o}});var MF=y((XPe,DF)=>{"use strict";f();var E0e=Gt();DF.exports=function(e,r,n){let i=n!=null?Object.keys(E0e(e.tree,n,{})):Object.keys(e.tree),s=new Set(Object.keys(r)),o;if(s.size>1){o=new Set;for(let u of i)s.has(u)&&o.add(u);for(let u of s)o.has(u)||o.add(u);o=Array.from(o)}else o=Array.from(s);return o}});var BF=y((eNe,vF)=>{"use strict";f();vF.exports=function(e,r){if(r.length===1)return;let n=r[0],i;for(let s=0;s<r.length-1;++s){let o=e.path(n);o&&o.schema?(i=o.schema.options.strict,e=o.schema,n=o.$isMongooseDocumentArray&&!isNaN(r[s+1])?"":r[s+1]):n+=n.length?"."+r[s+1]:r[s+1]}return i}});var yg=y((rNe,IF)=>{"use strict";f();var A0e=Ce(),w0e=new Set(["__index","__parentArray","_doc"]);IF.exports=function(e,r){if(A0e.isPOJO(e)&&e.$__!=null&&e._doc!=null){if(r){let n={};for(let i of Object.keys(e))typeof i!="symbol"&&i[0]!=="$"&&(w0e.has(i)||(n[i]=e[i]));return{...e._doc,...n}}return e._doc}return e}});var j1=y((iNe,PF)=>{"use strict";f();PF.exports=function(e){return e==null?!0:typeof e=="object"?!("$meta"in e)&&!("$slice"in e):!0}});var U1=y((oNe,NF)=>{"use strict";f();var S0e=j1(),b0e=v1();NF.exports=function t(e){if(e==null)return null;let r=Object.keys(e),n=null;if(r.length===1&&r[0]==="_id")n=!e._id;else for(let i=0;i<r.length;++i){let s=r[i];if(s!=="_id"&&S0e(e[s])&&(n=b0e(e[s])?t(e[s])??n:!e[s],n!=null))break}return n}});var oC=y((aNe,RF)=>{"use strict";f();var O0e=j1();RF.exports=function(e,r){if(e==null)return!1;if(r==="_id")return e._id===0;let n=Object.keys(e),i=null;for(let s of n)if(O0e(e[s])){i=e[r]===1?"inclusive":"exclusive";break}return i==="inclusive"?e[r]!==1:i==="exclusive"?e[r]===0:!1}});var uC=y((lNe,xF)=>{"use strict";f();var C0e=Ce();xF.exports=function(e,r){if(e._doc._id==null||r==null||r.length===0)return;let n=String(e._doc._id);for(let i of r){if(i.isVirtual)continue;let o=i.path.split(".");for(let u=0;u<o.length-1;++u){let a=o.slice(0,u+1).join("."),c=o.slice(u+1).join("."),l=e.get(a);if(l!=null&&C0e.isMongooseDocumentArray(l)){for(let h=0;h<l.length;++h)l[h]&&l[h].populated(c,i._docs[n]==null?void 0:i._docs[n][h],i);break}}}}});var aC=y((hNe,$F)=>{"use strict";f();var{isPOJO:T0e}=Ce();$F.exports=FF;function FF(t){let e=Object.keys(t),r=e.length,n,i,s;for(;r--;){if(i=e[r],s=t[i],T0e(s)&&(t[i]=FF(s)),t[i]===void 0){delete t[i];continue}n=!0}return n?t:void 0}});var cC=y((pNe,kF)=>{"use strict";f();var D0e=/\./g;kF.exports=function(e){if(e.indexOf(".")===-1)return[e];let r=e.split(D0e),n=r.length,i=new Array(n),s="";for(let o=0;o<n;++o)s+=s.length!==0?"."+r[o]:r[o],i[o]=s;return i}});var LF=y((yNe,qF)=>{"use strict";f();qF.exports=function(e,r,n,i,s){let o=Object.keys(e).reduce((a,c)=>a||c.startsWith(r+"."),!1),u=r+"."+n.options.discriminatorKey;!o&&s.length===1&&s[0]===u&&i.splice(i.indexOf(u),1)}});var Xi=y((_Ne,jF)=>{"use strict";f();var M0e=sC();jF.exports=function(e,r){if(e==null)return null;for(let n of Object.keys(e)){let i=e[n];if(i.schema&&i.schema.discriminatorMapping&&M0e(i.schema.discriminatorMapping.value,r))return i}return null}});var gg=y((ANe,UF)=>{"use strict";f();UF.exports=function(e,r){let n=r.split("."),i="",s,o,u;for(let a=0;a<n.length;++a)if(i+=i.length?".":""+n[a],e[i]){for(o=Object.keys(e),u=o.length,s=0;s<u;++s)o[a].indexOf(i+".")===0&&o[a].indexOf(r);return!0}return!1}});var nd=y(Oc=>{"use strict";f();var VF=QO(),v0e=LF(),zF=Gt(),B0e=Xi(),I0e=j1(),P0e=$t(),N0e=gg();Oc.preparePopulationOptionsMQ=function(e,r){let n=e._mongooseOptions.populate,i=Object.keys(n).reduce((u,a)=>u.concat([n[a]]),[]);r.lean!=null&&i.filter(u=>(u&&u.options&&u.options.lean)==null).forEach(R0e(r.lean));let s=e&&e.options&&e.options.session||null;s!=null&&i.forEach(u=>{if(u.options==null){u.options={session:s};return}"session"in u.options||(u.options.session=s)});let o=e._fieldsForExec();for(let u=0;u<i.length;++u)i[u]instanceof VF?i[u]=new VF({...i[u],_queryProjection:o,_localModel:e.model}):(i[u]._queryProjection=o,i[u]._localModel=e.model);return i};Oc.createModel=function(e,r,n,i,s){e.hooks.execPreSync("createModel",r);let o=e.schema?e.schema.discriminatorMapping:null,u=o&&o.isRoot?o.key:null,a=r[u];if(u&&a&&e.discriminators){let l=e.discriminators[a]||B0e(e.discriminators,a);if(l){let h=P0e(i);return Oc.applyPaths(h,l.schema),new l(void 0,h,!0)}}let c={skipId:!0,isNew:!1,willInit:!0};return s!=null&&"defaults"in s&&(c.defaults=s.defaults),new e(void 0,n,c)};Oc.createModelAndInit=function(e,r,n,i,s,o,u){let a=o?{populated:o}:void 0,c=Oc.createModel(e,r,n,i,s);try{c.$init(r,a,u)}catch(l){u(l,c)}};Oc.applyPaths=function(e,r,n){let i,s,o=new Set;if(e){s=Object.keys(e);let d=[];for(let p=0;p<s.length;++p){let m=s[p];s[p][0]==="-"&&(delete e[m],m==="-_id"?e._id=0:d.push(m.slice(1)))}s=Object.keys(e);for(let p=0;p<s.length;++p){if(s[p][0]==="+")continue;let m=e[s[p]];if(I0e(m)&&!(s[p]==="_id"&&s.length>1)&&!(s[p]===r.options.discriminatorKey&&s.length>1&&m!=null&&!m)){i=!m;break}}for(let p of d){let m=r.path(p);!m||!m.selected||i!==!1?(e[p]=0,i=!0):m&&m.selected&&i===!1&&o.add(p)}}let u=[],a=[],c=[];switch(l(r),i){case!0:for(let d of a)e[d]=0;break;case!1:r&&r.paths._id&&r.paths._id.options&&r.paths._id.options.select===!1&&(e._id=0);for(let d of u)o.has(d)||N0e(e,d)||(e[d]=e[d]||1);break;case void 0:if(e==null)break;for(let d of Object.keys(e||{}))d.startsWith("+")&&delete e[d];for(let d of a)e[d]==null&&(e[d]=0);break}function l(d,p){if(p||(p=""),c.indexOf(d)!==-1)return[];c.push(d);let m=[];return d.eachPath(function(g,_){if(p&&(g=p+"."+g),_.$isSchemaMap||g.endsWith(".$*")){let S="+"+g,C=e&&S in e;_.options&&_.options.select===!1&&!C&&a.push(g);return}let w=h(g,_);if(w==null&&!Array.isArray(_)&&_.$isMongooseArray&&!_.$isMongooseDocumentArray&&(w=h(g,_.caster)),w!=null&&m.push(w),_.schema){let S=l(_.schema,g);i===!1&&v0e(e,g,_.schema,u,S)}}),c.pop(),m}function h(d,p){if(e==null||typeof p.selected!="boolean")return;if(p.selected===!1&&e[d]){n&&(e[d]=0);return}if(!i&&p.selected&&d===r.options.discriminatorKey&&e[d]!=null&&!e[d]){delete e[d];return}if(i===!1&&p.selected&&e[d]!=null&&!e[d]){delete e[d];return}let m="+"+d;if(e&&m in e){delete e[m],i===!1&&s.length>1&&!~s.indexOf(d)&&!n?e[d]=1:i==null&&n&&p.selected===!1&&(e[d]=0);return}let _=d.split("."),w="";for(let S=0;S<_.length;++S)if(w+=w.length?"."+_[S]:_[S],a.indexOf(w)!==-1)return;if(!i&&(p&&p.options&&p.options.$skipDiscriminatorCheck)){let S="";for(let C=0;C<_.length;++C){S+=(S.length===0?"":".")+_[C];let O=zF(e,S,!1)||zF(e,S+".$",!1);if(O&&typeof O!="object")return}}return(p.selected?u:a).push(d),d}};function R0e(t){return function(e){e.options||(e.options={}),t!=null&&Array.isArray(t.virtuals)&&(t=Object.assign({},t),t.virtuals=t.virtuals.filter(r=>typeof r=="string"&&r.startsWith(e.path+".")).map(r=>r.slice(e.path.length+1))),e.options.lean=t}}});var lC=y((ONe,WF)=>{"use strict";f();function x0e(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}WF.exports=x0e});var GF=y((TNe,HF)=>{"use strict";f();HF.exports=function(e,r,n){let i=r[0],s=n,o=e;for(let u=0;u<r.length-1;++u){let a=s.path(i);if(a&&a.schema){let c=o.get(i);if(s=a.schema,i=r[u+1],Array.isArray(c)&&!isNaN(i)&&(c=c[i],i=""),c==null)break;o=c}else i+=i.length?"."+r[u+1]:r[u+1]}return o}});var _g=y((MNe,YF)=>{"use strict";f();var ua=Yn(),F0e=Ti(),$0e=xs().internalToObjectOptions,KF=require("util"),k0e=Ce();YF.exports=yt;function yt(t,e,r,n,i){if(typeof n=="object"&&n!=null&&i==null&&(i=n,n=void 0),r!=null){let s={isNew:r.isNew};"defaults"in r.$__&&(s.defaults=r.$__.defaults),i=Object.assign(s,i)}i!=null&&i.path!=null&&(this.$basePath=i.path),ua.call(this,t,e,n,i),delete this.$__.priorDoc}yt.prototype=Object.create(ua.prototype);Object.defineProperty(yt.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0});Object.defineProperty(yt.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0});yt.prototype.toBSON=function(){return this.toObject($0e)};yt.prototype.save=async function(e){return e=e||{},e.suppressWarning||k0e.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app."),new Promise((r,n)=>{this.$__save(i=>{if(i!=null)return n(i);r(this)})})};yt.prototype.$__fullPath=function(t){return this.$__.fullPath||this.ownerDocument(),t?this.$__.fullPath+"."+t:this.$__.fullPath};yt.prototype.$__pathRelativeToParent=function(t){return t==null?this.$basePath:[this.$basePath,t].join(".")};yt.prototype.$__save=function(t){return F0e(()=>t(null,this))};yt.prototype.$isValid=function(t){let e=this.$parent(),r=this.$__pathRelativeToParent(t);return e!=null&&r!=null?e.$isValid(r):ua.prototype.$isValid.call(this,t)};yt.prototype.markModified=function(t){ua.prototype.markModified.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);if(e==null||r==null)return;let n=this.$__pathRelativeToParent().replace(/\.$/,"");e.isDirectModified(n)||this.isNew||this.$__parent.markModified(r,this)};yt.prototype.isModified=function(t,e,r){let n=this.$parent();return n!=null?(Array.isArray(t)||typeof t=="string"?(t=Array.isArray(t)?t:t.split(" "),t=t.map(i=>this.$__pathRelativeToParent(i)).filter(i=>i!=null)):t||(t=this.$__pathRelativeToParent()),n.$isModified(t,e,r)):ua.prototype.isModified.call(this,t,e,r)};yt.prototype.$markValid=function(t){ua.prototype.$markValid.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);e!=null&&r!=null&&e.$markValid(r)};yt.prototype.invalidate=function(t,e,r){ua.prototype.invalidate.call(this,t,e,r);let n=this.$parent(),i=this.$__pathRelativeToParent(t);if(n!=null&&i!=null)n.invalidate(i,e,r);else if(e.kind==="cast"||e.name==="CastError"||i==null)throw e;return this.ownerDocument().$__.validationError};yt.prototype.$ignore=function(t){ua.prototype.$ignore.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);e!=null&&r!=null&&e.$ignore(r)};yt.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let t=this,e=[],r=new Set([t]);for(;typeof t.$__pathRelativeToParent=="function";){e.unshift(t.$__pathRelativeToParent(void 0,!0));let n=t.$parent();if(n==null)break;if(t=n,r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");r.add(t)}return this.$__.fullPath=e.join("."),this.$__.ownerDocument=t,this.$__.ownerDocument};yt.prototype.$__fullPathWithIndexes=function(){let t=this,e=[],r=new Set([t]);for(;typeof t.$__pathRelativeToParent=="function";){e.unshift(t.$__pathRelativeToParent(void 0,!1));let n=t.$parent();if(n==null)break;if(t=n,r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");r.add(t)}return e.join(".")};yt.prototype.parent=function(){return this.$__parent};yt.prototype.$parent=yt.prototype.parent;yt.prototype.$__deleteOne=function(t){if(t!=null)return t(null,this)};yt.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)};yt.prototype.deleteOne=function(t,e){if(typeof t=="function"&&(e=t,t=null),q0e(this),!t||!t.noop){this.$__removeFromParent();let r=this.ownerDocument();r.$__.removedSubdocs=r.$__.removedSubdocs||[],r.$__.removedSubdocs.push(this)}return this.$__deleteOne(e)};yt.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')};yt.prototype.inspect=function(){return this.toObject()};KF.inspect.custom&&(yt.prototype[KF.inspect.custom]=yt.prototype.inspect);function q0e(t){let e=t.ownerDocument();function r(){e.$removeListener("save",r),e.$removeListener("deleteOne",r),t.emit("deleteOne",t),t.constructor.emit("deleteOne",t)}e.$on("save",r),e.$on("deleteOne",r)}});var V1=y((BNe,XF)=>{"use strict";f();var QF=require("events").EventEmitter,JF=_g(),L0e=Ce(),id=ye().documentArrayParent;function Qn(t,e,r,n,i){L0e.isMongooseDocumentArray(e)?(this.__parentArray=e,this[id]=e.$parent()):(this.__parentArray=void 0,this[id]=void 0),this.$setIndex(i),this.$__parent=this[id];let s;typeof r=="object"&&r!=null?(s={isNew:!0,...r},r=void 0):s={isNew:!0},JF.call(this,t,n,this[id],r,s)}Qn.prototype=Object.create(JF.prototype);Qn.prototype.constructor=Qn;Object.defineProperty(Qn.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1});Object.defineProperty(Qn.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0});for(let t in QF.prototype)Qn[t]=QF.prototype[t];Qn.prototype.$setIndex=function(t){if(this.__index=t,this.$__!=null&&this.$__.validationError!=null){let e=Object.keys(this.$__.validationError.errors);for(let r of e)this.invalidate(r,this.$__.validationError.errors[r])}};Qn.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')};Qn.prototype.$__removeFromParent=function(){let t=this._doc._id;if(!t)throw new Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:t})};Qn.prototype.$__fullPath=function(t,e){return this.__index==null?null:(this.$__.fullPath||this.ownerDocument(),e?t?this.$__.fullPath+"."+t:this.$__.fullPath:t?this.$__.fullPath+"."+this.__index+"."+t:this.$__.fullPath+"."+this.__index)};Qn.prototype.$__pathRelativeToParent=function(t,e){return this.__index==null||!this.__parentArray||!this.__parentArray.$path?null:e?t==null?this.__parentArray.$path():this.__parentArray.$path()+"."+t:t==null?this.__parentArray.$path()+"."+this.__index:this.__parentArray.$path()+"."+this.__index+"."+t};Qn.prototype.$parent=function(){return this[id]};Qn.prototype.parentArray=function(){return this.__parentArray};XF.exports=Qn});var wg=y((PNe,o$)=>{"use strict";f();var dC=Yn(),fC=V1(),j0e=Fe(),ZF=hg(),U0e=$t(),e$=xs().internalToObjectOptions,n$=_i(),fn=Ce(),hC=Lr(),nu=ye().arrayAtomicsSymbol,iu=ye().arrayParentSymbol,su=ye().arrayPathSymbol,Jn=ye().arraySchemaSymbol,i$=ye().populateModelSymbol,V0e=Symbol("mongoose#Array#sliced"),t$=Array.prototype.push;var Ag={$__getAtomics(){let t=[],e=Object.keys(this[nu]||{}),r=e.length,n=Object.assign({},e$,{_isNested:!0});if(r===0)return t[0]=["$set",this.toObject(n)],t;for(;r--;){let i=e[r],s=this[nu][i];fn.isMongooseObject(s)?s=s.toObject(n):Array.isArray(s)?s=this.toObject.call(s,n):s!=null&&Array.isArray(s.$each)?s.$each=this.toObject.call(s.$each,n):s!=null&&typeof s.valueOf=="function"&&(s=s.valueOf()),i==="$addToSet"&&(s={$each:s}),t.push([i,s])}return t},$atomics(){return this[nu]},$parent(){return this[iu]},$path(){return this[su]},$shift(){this._registerAtomic("$pop",-1),this._markModified();let t=this.__array;if(!t._shifted)return t._shifted=!0,[].shift.call(t)},$pop(){if(this._registerAtomic("$pop",1),this._markModified(),!this._popped)return this._popped=!0,[].pop.call(this)},$schema(){return this[Jn]},_cast(t){let e=!1,r,n=this[iu];if(n&&(e=n.$populated(this[su],!0)),e&&t!==null&&t!==void 0){if(r=e.options[i$],r==null)throw new j0e("No populated model found for path `"+this[su]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");return(Buffer.isBuffer(t)||hC(t,"ObjectId")||!fn.isObject(t))&&(t={_id:t}),t.schema&&t.schema.discriminatorMapping&&t.schema.discriminatorMapping.key!==void 0||(t=new r(t)),this[Jn].caster.applySetters(t,n,!0)}return this[Jn].caster.applySetters(t,n,!1)},_mapCast(t,e){return this._cast(t,this.length+e)},_markModified(t){let e=this[iu],r;if(e){if(r=this[su],arguments.length&&(r=r+"."+t),r!=null&&r.endsWith(".$"))return this;e.markModified(r,arguments.length!==0?t:e)}return this},_registerAtomic(t,e){if(this[V0e])return;if(t==="$set")return this[nu]={$set:e},ZF(this[iu],this[su]),this._markModified(),this;let r=this[nu];if(t==="$pop"&&!("$pop"in r)){let i=this;this[iu].once("save",function(){i._popped=i._shifted=null})}if(r.$set||Object.keys(r).length&&!(t in r))return this[nu]={$set:this},this;let n;if(t==="$pullAll"||t==="$addToSet")r[t]||(r[t]=[]),r[t]=r[t].concat(e);else if(t==="$pullDocs"){let i=r.$pull||(r.$pull={});e[0]instanceof fC?(n=i.$or||(i.$or=[]),Array.prototype.push.apply(n,e.map(s=>s.toObject({transform:(o,u)=>(s==null||s.$__==null||Object.keys(s.$__.activePaths.getStatePaths("default")).forEach(a=>{n$.unset(a,u),s$(u,a)}),u),virtuals:!1})))):(n=i._id||(i._id={$in:[]}),n.$in=n.$in.concat(e))}else if(t==="$push")if(r.$push=r.$push||{$each:[]},e!=null&&fn.hasUserDefinedProperty(e,"$each"))r.$push=e;else if(e.length===1)r.$push.$each.push(e[0]);else if(e.length<1e4)r.$push.$each.push(...e);else for(let i of e)r.$push.$each.push(i);else r[t]=e;return this},addToSet(){Eg(this,arguments),r$(this,arguments);let t=[].map.call(arguments,this._mapCast,this),e=[],r="";t[0]instanceof fC?r="doc":t[0]instanceof Date?r="date":hC(t[0],"ObjectId")&&(r="ObjectId");let n=fn.isMongooseArray(t)?t.__array:t,i=fn.isMongooseArray(this)?this.__array:this;return n.forEach(function(s){let o,u=+s;switch(r){case"doc":o=this.some(function(a){return a.equals(s)});break;case"date":o=this.some(function(a){return+a===u});break;case"ObjectId":o=this.find(a=>a.toString()===s.toString());break;default:o=~this.indexOf(s);break}o||(this._markModified(),i.push(s),this._registerAtomic("$addToSet",s),[].push.call(e,s))},this),e},hasAtomics(){return fn.isPOJO(this[nu])?Object.keys(this[nu]).length:0},includes(t,e){return this.indexOf(t,e)!==-1},indexOf(t,e){hC(t,"ObjectId")&&(t=t.toString()),e=e??0;let r=this.length;for(let n=e;n<r;++n)if(t==this[n])return n;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){let t=[].map.call(arguments,this._mapCast,this);this._markModified();let e=[].push.apply(this,t);return this._registerAtomic("$set",this),e},pop(){this._markModified();let t=[].pop.call(this);return this._registerAtomic("$set",this),t},pull(){let t=[].map.call(arguments,(i,s)=>this._cast(i,s,{defaults:!1}),this),e=this[iu].get(this[su]);fn.isMongooseArray(e)&&(e=e.__array);let r=e.length,n;for(this._markModified();r--;)n=e[r],n instanceof dC?t.some(function(s){return n.equals(s)})&&e.splice(r,1):~this.indexOf.call(t,n)&&e.splice(r,1);return t[0]instanceof fC?this._registerAtomic("$pullDocs",t.map(function(i){let s=i.$__getValue("_id");return s===void 0||i.$isDefault("_id")?i:s})):this._registerAtomic("$pullAll",t),ZF(this[iu],this[su])>0&&this._registerAtomic("$set",this),this},push(){let t=arguments,e=t,r=t[0]!=null&&fn.hasUserDefinedProperty(t[0],"$each"),n=fn.isMongooseArray(this)?this.__array:this;if(r&&(e=t[0],t=t[0].$each),this[Jn]==null)return t$.apply(this,t);Eg(this,t),r$(this,t),t=[].map.call(t,this._mapCast,this);let i,s=this[nu];return this._markModified(),r?(e.$each=t,(s.$push&&s.$push.$each&&s.$push.$each.length||0)!==0&&s.$push.$position!=e.$position?(e.$position!=null?([].splice.apply(n,[e.$position,0].concat(t)),i=n.length):i=[].push.apply(n,t),this._registerAtomic("$set",this)):e.$position!=null?([].splice.apply(n,[e.$position,0].concat(t)),i=this.length):i=[].push.apply(n,t)):(e=t,i=t$.apply(n,t)),this._registerAtomic("$push",e),i},remove(){return this.pull.apply(this,arguments)},set(t,e,r){let n=this.__array;if(r)return n[t]=e,this;let i=Ag._cast.call(this,e,t);return Ag._markModified.call(this,t),n[t]=i,this},shift(){let t=fn.isMongooseArray(this)?this.__array:this;this._markModified();let e=[].shift.call(t);return this._registerAtomic("$set",this),e},sort(){let t=fn.isMongooseArray(this)?this.__array:this,e=[].sort.apply(t,arguments);return this._registerAtomic("$set",this),e},splice(){let t,e=fn.isMongooseArray(this)?this.__array:this;if(this._markModified(),Eg(this,Array.prototype.slice.call(arguments,2)),arguments.length){let r;if(this[Jn]==null)r=arguments;else{r=[];for(let n=0;n<arguments.length;++n)r[n]=n<2?arguments[n]:this._cast(arguments[n],arguments[0]+(n-2))}t=[].splice.apply(e,r),this._registerAtomic("$set",this)}return t},toBSON(){return this.toObject(e$)},toObject(t){let e=fn.isMongooseArray(this)?this.__array:this;return t&&t.depopulate?(t=U0e(t),t._isNested=!0,[].concat(e).map(function(r){return r instanceof dC?r.toObject(t):r})):[].concat(e)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){Eg(this,arguments);let t;this[Jn]==null?t=arguments:t=[].map.call(arguments,this._cast,this);let e=fn.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(e,t),this._registerAtomic("$set",this),this.length}};function z0e(t,e){if(!e)return!1;for(let r of t){if(r==null)return!1;let n=r.constructor;if(!(r instanceof dC)||n.modelName!==e&&n.baseModelName!==e)return!1}return!0}function s$(t,e,r){if(typeof e=="string"){if(e.indexOf(".")===-1)return;e=n$.stringToParts(e)}r=r||0,!(r>=e.length)&&(t==null||typeof t!="object"||(s$(t[e[0]],e,r+1),t[e[0]]!=null&&typeof t[e[0]]=="object"&&Object.keys(t[e[0]]).length===0&&delete t[e[0]]))}function Eg(t,e){let r=t==null?null:t[Jn]&&t[Jn].caster&&t[Jn].caster.options&&t[Jn].caster.options.ref||null;t.length===0&&e.length!==0&&z0e(e,r)&&t[iu].$populated(t[su],[],{[i$]:e[0].constructor})}function r$(t,e){let r=t==null?null:t[Jn]&&t[Jn].caster&&t[Jn].caster.options&&t[Jn].caster.options.ref||null,n=t[iu],i=t[su];if(!(!r||!n.populated(i))){for(let s of e)if(s!=null&&(typeof s!="object"||s instanceof String||s instanceof Number||s instanceof Buffer||fn.isMongooseType(s))){n.depopulate(i);break}}}var W0e=["filter","flat","flatMap","map","slice"];for(let t of W0e)Array.prototype[t]!=null&&(Ag[t]=function(){let e=fn.isMongooseArray(this)?this.__array:this,r=[].concat(e);return r[t].apply(r,arguments)});o$.exports=Ag});var mC=y((f$,h$)=>{"use strict";f();var H0e=Yn(),pC=wg(),Sg=ye().arrayAtomicsSymbol,G0e=ye().arrayAtomicsBackupSymbol,u$=ye().arrayParentSymbol,K0e=ye().arrayPathSymbol,a$=ye().arraySchemaSymbol,c$=Array.prototype.push,l$=/^\d+$/;function Y0e(t,e,r,n){let i;if(Array.isArray(t)){let u=t.length;if(u===0)i=new Array;else if(u===1)i=new Array(1),i[0]=t[0];else if(u<1e4)i=new Array,c$.apply(i,t);else{i=new Array;for(let a=0;a<u;++a)c$.call(i,t[a])}}else i=[];let s={[Sg]:{},[G0e]:void 0,[K0e]:e,[a$]:n,[u$]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:i};t&&t[Sg]!=null&&(s[Sg]=t[Sg]),r!=null&&r instanceof H0e&&(s[u$]=r,s[a$]=n||r.schema.path(e));let o=new Proxy(i,{get:function(u,a){return s.hasOwnProperty(a)?s[a]:pC.hasOwnProperty(a)?pC[a]:n&&n.virtuals&&n.virtuals.hasOwnProperty(a)?n.virtuals[a].applyGetters(void 0,u):typeof a=="string"&&l$.test(a)&&n?.$embeddedSchemaType!=null?n.$embeddedSchemaType.applyGetters(i[a],r):i[a]},set:function(u,a,c){return typeof a=="string"&&l$.test(a)?pC.set.call(o,a,c,!1):s.hasOwnProperty(a)?s[a]=c:n&&n.virtuals&&n.virtuals.hasOwnProperty(a)?n.virtuals[a].applySetters(c,u):i[a]=c,!0}});return o}h$.exports=f$=Y0e});var gC=y((xNe,p$)=>{"use strict";f();var d$=Lr(),yC=tu();p$.exports=function(e){if(e==null||d$(e,"ObjectId"))return e;if(e._id){if(d$(e._id,"ObjectId"))return e._id;if(e._id.toString instanceof Function)return new yC(e._id.toString())}return e.toString instanceof Function?new yC(e.toString()):new yC(e)}});var _$=y(($Ne,g$)=>{"use strict";f();var bg=wg(),Q0e=Yn(),J0e=gC(),m$=Xi(),X0e=xs().internalToObjectOptions,Og=Ce(),_C=Lr(),Tg=ye().arrayParentSymbol,AC=ye().arrayPathSymbol,EC=ye().arraySchemaSymbol,y$=ye().documentArrayParent,Z0e=Array.prototype.toString,wC={toBSON(){return this.toObject(X0e)},toString(){return Z0e.call(this.__array.map(t=>t!=null&&t.$__!=null?t.toString():t))},getArrayParent(){return this[Tg]},_cast(t,e,r){if(this[EC]==null)return t;let n=this[EC].casterConstructor;if((n.$isMongooseDocumentArray?Og.isMongooseDocumentArray(t):t instanceof n)||t&&t.constructor&&t.constructor.baseCasterConstructor===n)return t[y$]&&t.__parentArray||(t[y$]=this[Tg],t.__parentArray=this),t.$setIndex(e),t;if(t==null)return null;if((Buffer.isBuffer(t)||_C(t,"ObjectId")||!Og.isObject(t))&&(t={_id:t}),t&&n.discriminators&&n.schema&&n.schema.options&&n.schema.options.discriminatorKey)if(typeof t[n.schema.options.discriminatorKey]=="string"&&n.discriminators[t[n.schema.options.discriminatorKey]])n=n.discriminators[t[n.schema.options.discriminatorKey]];else{let o=m$(n.discriminators,t[n.schema.options.discriminatorKey]);o&&(n=o)}if(n.$isMongooseDocumentArray)return n.cast(t,this,void 0,void 0,e);let s=new n(t,this,r,void 0,e);return s.isNew=!0,s},id(t){let e,r,n;try{e=J0e(t).toString()}catch{e=null}for(let i of this)if(i&&(n=i.get("_id"),!(n===null||typeof n>"u"))){if(n instanceof Q0e){if(r||(r=String(t)),r==n._id)return i}else if(!_C(t,"ObjectId")&&!_C(n,"ObjectId")){if(t==n||Og.deepEqual(t,n))return i}else if(e==n)return i}return null},toObject(t){return[].concat(this.map(function(e){return e==null?null:typeof e.toObject!="function"?e:e.toObject(t)}))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){let t=bg.push.apply(this,arguments);return Cg(this),t},pull(){let t=bg.pull.apply(this,arguments);return Cg(this),t},shift(){let t=bg.shift.apply(this,arguments);return Cg(this),t},splice(){let t=bg.splice.apply(this,arguments);return Cg(this),t},inspect(){return this.toObject()},create(t){let e=this[EC].casterConstructor;if(t&&e.discriminators&&e.schema&&e.schema.options&&e.schema.options.discriminatorKey)if(typeof t[e.schema.options.discriminatorKey]=="string"&&e.discriminators[t[e.schema.options.discriminatorKey]])e=e.discriminators[t[e.schema.options.discriminatorKey]];else{let r=m$(e.discriminators,t[e.schema.options.discriminatorKey]);r&&(e=r)}return new e(t,this)},notify(t){let e=this;return function r(n,i){i=i||e;let s=i.length;for(;s--;)if(i[s]!=null){switch(t){case"save":n=e[s];break;default:break}Og.isMongooseArray(i[s])?r(n,i[s]):i[s]&&i[s].emit(t,n)}}},set(t,e,r){let n=this.__array;if(r)return n[t]=e,this;let i=wC._cast.call(this,e,t);return wC._markModified.call(this,t),n[t]=i,this},_markModified(t,e){let r=this[Tg],n;if(r){if(n=this[AC],arguments.length)if(e!=null){let i=t.__index;n=n+"."+i+"."+e}else n=n+"."+t;if(n!=null&&n.endsWith(".$"))return this;r.markModified(n,arguments.length!==0?t:r)}return this}};g$.exports=wC;function Cg(t){let e=t[Tg];if(!e||e.$__.populated==null)return;let r=Object.keys(e.$__.populated).filter(n=>n.startsWith(t[AC]+"."));for(let n of r){let i=n.slice((t[AC]+".").length);Array.isArray(e.$__.populated[n].value)&&(e.$__.populated[n].value=t.map(s=>s.$populated(i)))}}});var Tc=y((qNe,A$)=>{"use strict";f();var E$=wg(),SC=_$(),eme=Yn(),bC=ye().arrayAtomicsSymbol,tme=ye().arrayAtomicsBackupSymbol,OC=ye().arrayParentSymbol,CC=ye().arrayPathSymbol,Cc=ye().arraySchemaSymbol,rme=Array.prototype.push,nme=/^\d+$/;function ime(t,e,r,n){let i=[],s={[bC]:{},[tme]:void 0,[CC]:e,[Cc]:void 0,[OC]:void 0};if(Array.isArray(t)&&(t[CC]===e&&t[OC]===r&&(s[bC]=Object.assign({},t[bC])),t.forEach(u=>{rme.call(i,u)})),s[CC]=e,s.__array=i,r&&r instanceof eme)for(s[OC]=r,s[Cc]=r.$__schema.path(e);s[Cc]!=null&&s[Cc].$isMongooseArray&&!s[Cc].$isMongooseDocumentArray;)s[Cc]=s[Cc].casterConstructor;let o=new Proxy(i,{get:function(u,a){return a==="isMongooseArray"||a==="isMongooseArrayProxy"||a==="isMongooseDocumentArray"||a==="isMongooseDocumentArrayProxy"?!0:s.hasOwnProperty(a)?s[a]:SC.hasOwnProperty(a)?SC[a]:n&&n.virtuals&&n.virtuals.hasOwnProperty(a)?n.virtuals[a].applyGetters(void 0,u):E$.hasOwnProperty(a)?E$[a]:i[a]},set:function(u,a,c){return typeof a=="string"&&nme.test(a)?SC.set.call(o,a,c,!1):s.hasOwnProperty(a)?s[a]=c:n&&n.virtuals&&n.virtuals.hasOwnProperty(a)?n.virtuals[a].applySetters(c,u):i[a]=c,!0}});return o}A$.exports=ime});var Yn=y((k$,q$)=>{"use strict";f();var sme=HO(),MC=require("events").EventEmitter,ome=Kx(),ume=rd(),Xn=Hn(),w$=bc(),ame=eF(),cme=ZO(),lme=cg(),S$=iF(),fme=z1(),vC=oa(),Bg=Ac(),B$=jO(),I$=eC(),BC=fg(),TC=hg(),ho=$t(),hme=pg().compile,dme=pg().defineKey,pme=mF(),mme=L1().flatten,DC=TF(),b$=MF(),yme=BF(),gme=yg(),O$=Ti(),C$=Lr(),P$=j1(),_me=U1(),T$=oC(),IC=require("util").inspect,N$=xs().internalToObjectOptions,Eme=uC(),Ame=aC(),wme=_i(),PC=cC(),Sme=nd(),Te=Ce(),bme=lC(),Mg=Te.deepEqual,Ome=Te.isMongooseObject,od=ye().arrayAtomicsBackupSymbol,Tn=ye().arrayAtomicsSymbol,Cme=ye().documentArrayParent,Tme=ye().documentIsModified,R$=ye().documentModifiedPaths,Dme=ye().documentSchemaSymbol,Mme=ye().getSymbol,D$=ye().populateModelSymbol,vme=ye().scopeSymbol,Bme=Sc().schemaMixedSymbol,Ime=GF(),Dg=ye().sessionNewDocuments,vg,M$,sd,Pme=Te.specialProperties,ud=1,NC=2,ou=ud|NC;function H(t,e,r,n){if(typeof r=="object"&&r!=null&&(n=r,r=n.skipId),n=Object.assign({},n),this.$__schema==null){let c=Te.isObject(e)&&!e.instanceOfSchema?new fme(e):e;this.$__setSchema(c),e=r,r=n,n=arguments[4]||{}}if(this.$__=new ome,n.isNew!=null&&n.isNew!==!0&&(this.$isNew=n.isNew),n.priorDoc!=null&&(this.$__.priorDoc=n.priorDoc),r&&(this.$__.skipId=r),t!=null&&typeof t!="object")throw new lme(t,"obj","Document");let i=!0;n.defaults!==void 0&&(this.$__.defaults=n.defaults,i=n.defaults);let s=this.$__schema;typeof e=="boolean"||e==="throw"?(e!==!0&&(this.$__.strictMode=e),e=void 0):s.options.strict!==!0&&(this.$__.strictMode=s.options.strict);let o=s.requiredPaths(!0);for(let c of o)this.$__.activePaths.require(c);let u=null;Te.isPOJO(e)&&Object.keys(e).length>0&&(u=_me(e),this.$__.selected=e,this.$__.exclude=u);let a=u===!1&&e?I$(e):null;if(this._doc==null&&(this.$__buildDoc(t,e,r,u,a,!1),i&&BC(this,e,u,a,!0,null,{skipParentChangeTracking:!0})),t&&(this.$__original_set?this.$__original_set(t,void 0,!0,n):this.$set(t,void 0,!0,n),t instanceof H&&(this.$isNew=t.$isNew)),n.willInit&&i?n.skipDefaults&&(this.$__.skipDefaults=n.skipDefaults):i&&BC(this,e,u,a,!1,n.skipDefaults),!this.$__.strictMode&&t){let c=this;Object.keys(this._doc).forEach(function(h){!(h in s.tree)&&!(h in s.methods)&&!(h in s.virtuals)&&!h.startsWith("$")&&dme({prop:h,subprops:null,prototype:c})})}jme(this)}H.prototype.$isMongooseDocumentPrototype=!0;Object.defineProperty(H.prototype,"isNew",{get:function(){return this.$isNew},set:function(t){this.$isNew=t}});Object.defineProperty(H.prototype,"errors",{get:function(){return this.$errors},set:function(t){this.$errors=t}});H.prototype.$isNew=!0;Te.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(t){H.prototype[t]=function(){if(!this.$__.emitter){if(t==="emit")return;this.$__.emitter=new MC,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[t].apply(this.$__.emitter,arguments)},H.prototype[`$${t}`]=H.prototype[t]});H.prototype.constructor=H;for(let t in MC.prototype)H[t]=MC.prototype[t];H.prototype.$__schema;H.prototype.schema;Object.defineProperty(H.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){return this.$__.locals==null&&(this.$__.locals={}),this.$__.locals},set:function(t){this.$__.locals=t}});H.prototype.isNew;Object.defineProperty(H.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0});H.prototype.id;H.prototype.$errors;Object.defineProperty(H.prototype,"$op",{get:function(){return this.$__.op||null},set:function(t){this.$__.op=t}});function Nme(t,e,r){if(t==null)return;let n=Object.keys(r.$__schema.paths),i=n.length,s=e.indexOf(".")===-1?[e]:e.split(".");for(let o=0;o<i;++o){let u="",a=n[o];if(!a.startsWith(e+"."))continue;let c=r.$__schema.paths[a],l=c.splitPath().slice(s.length),h=l.length;if(c.defaultValue===void 0)continue;let d=t;for(let p=0;p<h&&d!=null;++p){let m=l[p];if(p===h-1){if(d[m]!==void 0)break;try{let g=c.getDefault(r,!1);g!==void 0&&(d[m]=g)}catch(g){r.invalidate(e+"."+u,g);break}break}u+=(u.length?".":"")+m,d[m]=d[m]||{},d=d[m]}}}H.prototype.$__buildDoc=function(t,e,r,n,i){let s={},o=Object.keys(this.$__schema.paths).filter(c=>!c.includes("$*")),u=o.length,a=0;for(;a<u;++a){let c=o[a];if(c==="_id"&&(r||t&&"_id"in t))continue;let l=this.$__schema.paths[c].splitPath(),h=l.length,d=h-1,p="",m=s,g=!1;for(let _=0;_<h;++_){let w=l[_];if(p.length?p+="."+w:p=w,n===!0){if(p in e)break}else if(n===!1&&e&&!g){if(p in e)g=!0;else if(!i[p])break}_<d&&(m=m[w]||(m[w]={}))}}this._doc=s};H.prototype.toBSON=function(){return this.toObject(N$)};H.prototype.init=function(t,e,r){return typeof e=="function"&&(r=e,e=null),this.$__init(t,e),r&&r(null,this),this};H.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)};H.prototype.$__init=function(t,e){if(this.$isNew=!1,e=e||{},t._id!=null&&e.populated&&e.populated.length){let n=String(t._id);for(let i of e.populated)if(i.isVirtual?this.$populated(i.path,Te.getValue(i.path,t),i):this.$populated(i.path,i._docs[n],i),i._childDocs!=null){for(let s of i._childDocs)s==null||s.$__==null||(s.$__.parent=this);i._childDocs=[]}}x$(this,t,this._doc,e),Eme(this,e.populated),this.$emit("init",this),this.constructor.emit("init",this);let r=this.$__.exclude===!1&&this.$__.selected?I$(this.$__.selected):null;return BC(this,this.$__.selected,this.$__.exclude,r,!1,this.$__.skipDefaults),this};function x$(t,e,r,n,i){i=i||"",e.$__!=null&&(e=e._doc);let s=Object.keys(e),o=s.length,u,a,c,l=0,h=t.$__.strictMode,d=t.$__schema;for(;l<o;)p(l++);function p(m){if(c=s[m],c==="__proto__"||c==="constructor"||(a=i?i+c:c,u=d.path(a),d.$isRootDiscriminator&&!t.$__isSelected(a)))return;let g=e[c];if(!u&&Te.isPOJO(g))r[c]||(r[c]={},!h&&!(c in d.tree)&&!(c in d.methods)&&!(c in d.virtuals)&&(t[c]=r[c])),x$(t,g,r[c],n,a+".");else if(!u)r[c]=g,!h&&!i&&(t[c]=g);else{if(r.hasOwnProperty(c)&&g!==void 0&&!n.hydratedPopulatedDocs&&delete r[c],g===null)r[c]=u._castNullish(null);else if(g!==void 0){let _=g.$__==null?null:g.$__.wasPopulated;if(u&&!_&&!n.hydratedPopulatedDocs)try{n&&n.setters?r[c]=u.applySetters(g,t,!1):r[c]=u.cast(g,t,!0)}catch(w){t.invalidate(w.path,new B$({path:w.path,message:w.message,type:"cast",value:w.value,reason:w}))}else n.hydratedPopulatedDocs?(r[c]=u.cast(g,t,!0),r[c]&&r[c].$__&&r[c].$__.wasPopulated?t.$populated(a,r[c].$__.wasPopulated.value,r[c].$__.wasPopulated.options):Array.isArray(r[c])&&r[c].length&&r[c][0]?.$__?.wasPopulated&&t.$populated(a,r[c].map(w=>w?.$__?.wasPopulated?.value).filter(w=>w!=null),r[c][0].$__.wasPopulated.options)):r[c]=g}t.$isModified(a)||t.$__.activePaths.init(a)}}}H.prototype.updateOne=function(e,r,n){let i=this.constructor.updateOne({_id:this._doc._id},e,r),s=this;return i.pre(function(u){s.constructor._middleware.execPre("updateOne",s,[s],u)}),i.post(function(u){s.constructor._middleware.execPost("updateOne",s,[s],{},u)}),this.$session()!=null&&("session"in i.options||(i.options.session=this.$session())),n!=null?i.exec(n):i};H.prototype.replaceOne=function(){let e=[...arguments];return e.unshift({_id:this._doc._id}),this.constructor.replaceOne.apply(this.constructor,e)};H.prototype.$session=function(e){if(arguments.length===0)return this.$__.session!=null&&this.$__.session.hasEnded?(this.$__.session=null,null):this.$__.session;if(e!=null&&e.hasEnded)throw new Xn("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(!(e==null&&this.$__.session==null)){if(this.$__.session=e,!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)n.$session(e)}return e}};H.prototype.$timestamps=function(e){if(arguments.length===0)return this.$__.timestamps!=null?this.$__.timestamps:this.$__schema?this.$__schema.options.timestamps:void 0;let r=this.$timestamps();return e!==r&&(this.$__.timestamps=e),this};H.prototype.overwrite=function(e){let r=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(e))));for(let n of r)n!=="_id"&&(this.$__schema.options.versionKey&&n===this.$__schema.options.versionKey||this.$__schema.options.discriminatorKey&&n===this.$__schema.options.discriminatorKey||this.$set(n,e[n]));return this};H.prototype.$set=function(e,r,n,i){Te.isPOJO(n)&&(i=n,n=void 0);let s=i&&i.merge,o=n&&n!==!0,u=n===!0,a,c,l=0,h,d,p,m=i&&"strict"in i,g=m?i.strict:this.$__.strictMode;if(o&&(a=this.$__.adhocPaths||(this.$__.adhocPaths={}),a[e]=this.$__schema.interpretAsType(e,n,this.$__schema.options)),e==null)[e,r]=[r,e];else if(typeof e!="string"){e instanceof H&&(e.$__isNested?e=e.toObject():e=e.$__schema===this.$__schema?RC(e,{...e._doc}):e._doc),e==null&&([e,r]=[r,e]),p=r?r+".":"",c=b$(this.$__schema,e);let j=c.length,k=i&&i._skipMinimizeTopLevel||!1;if(j===0&&k)return delete i._skipMinimizeTopLevel,r&&this.$set(r,{}),this;i=Object.assign({},i,{_skipMinimizeTopLevel:!1});for(let F=0;F<j;++F){d=c[F];let z=p?p+d:d;h=this.$__schema.pathType(z);let J=e[d];if(n===!0&&!p&&J!=null&&h==="nested"&&this._doc[d]!=null&&delete this._doc[d],Te.isNonBuiltinObject(J)&&h==="nested"){this.$set(z,J,u,Object.assign({},i,{_skipMarkModified:!0})),Nme(this.$get(z),z,this);continue}else if(g){if(u&&J===void 0&&this.$get(z)!==void 0)continue;if(h==="adhocOrUndefined"&&(h=DC(this,z,{typeOnly:!0})),h==="real"||h==="virtual")this.$set(z,J,u,i);else if(h==="nested"&&J instanceof H)this.$set(z,J.toObject({transform:!1}),u,i);else{if(g==="throw")throw h==="nested"?new cme(d,J):new vC(d);h==="nested"&&J==null&&this.$set(z,J,u,i)}}else J!==void 0&&this.$set(z,J,u,i)}let q={},R=Object.keys(this.$__schema.tree);for(let F=0,z=R.length;F<z;++F)(d=R[F])&&this._doc.hasOwnProperty(d)&&(q[d]=void 0);return this._doc=Object.assign(q,this._doc),this}let _=this.$__schema.pathType(e),w=null;if(_==="adhocOrUndefined"&&(w=e.indexOf(".")===-1?[e]:e.split("."),_=DC(this,w,{typeOnly:!0})),_==="adhocOrUndefined"&&!m){w==null&&(w=e.indexOf(".")===-1?[e]:e.split("."));let j=yme(this.$__schema,w);j!==void 0&&(g=j)}r=gme(r,!0);let S=(()=>{if(this.$__.priorDoc!=null)return this.$__.priorDoc.$__getValue(e);if(!u)return this.$__getValue(e)})();if(_==="nested"&&r){if(typeof r=="object"&&r!=null){if(r.$__!=null&&(r=r.toObject(N$)),r==null)return this.invalidate(e,new Xn.CastError("Object",r,e)),this;let j=this.$isModified(e),k=this.$__.savedState!=null&&this.$__.savedState.hasOwnProperty(e);if(this.$__.savedState!=null&&!this.$isNew&&!this.$__.savedState.hasOwnProperty(e)){let R=this.$__getValue(e);this.$__.savedState[e]=R;let F=Object.keys(R||{});for(let z of F)this.$__.savedState[e+"."+z]=R[z]}if(!s)this.$__setValue(e,null),TC(this,e);else return this.$set(r,e,u,i);let q=b$(this.$__schema,r,e);this.$__setValue(e,{});for(let R of q)this.$set(e+"."+R,r[R],u,{...i,_skipMarkModified:!0});return S!=null&&(!j||k)&&Te.deepEqual(k?this.$__.savedState[e]:S,r)?this.unmarkModified(e):this.markModified(e),this}return this.invalidate(e,new Xn.CastError("Object",r,e)),this}let C;if(w==null&&(w=e.indexOf(".")===-1?[e]:e.split(".")),typeof this.$__schema.aliases[w[0]]=="string"&&(w[0]=this.$__schema.aliases[w[0]]),_==="adhocOrUndefined"&&g){let j;for(l=0;l<w.length;++l){let k=w.slice(0,l+1).join(".");if(l+1<w.length&&this.$__schema.pathType(k)==="virtual")return wme.set(e,r,this),this;if(C=this.$__schema.path(k),C!=null){if(C instanceof w$){j=!0;break}else if(C.$isSchemaMap&&C.$__schemaType instanceof w$&&l<w.length-1){j=!0,C=C.$__schemaType;break}}}if(C==null&&(C=DC(this,e)),!j&&!C){if(g==="throw")throw new vC(e);return this}}else{if(_==="virtual")return C=this.$__schema.virtualpath(e),C.applySetters(r,this),this;C=this.$__path(e)}let O=this._doc,B="";for(l=0;l<w.length-1;++l)O=O[w[l]],B+=(B.length!==0?".":"")+w[l],O||(this.$set(B,{}),this.$__isSelected(B)||this.unmarkModified(B),O=this.$__getValue(B));let P;if(w.length<=1)P=e;else{let j=w.length;for(l=0;l<j;++l){let k=w.slice(0,l+1).join(".");if(this.$get(k,null,{getters:!1})===null){P=k;break}}P||(P=e)}if(!C)return this.$__set(P,e,i,u,w,C,r,S),_==="nested"&&r==null&&TC(this,e),this;if((C.$isSingleNested||C.$isMongooseArray)&&qme(this,e),r!=null&&s&&C.$isSingleNested){r instanceof H&&(r=r.toObject({virtuals:!1,transform:!1}));let j=Object.keys(r);for(let k of j)this.$set(e+"."+k,r[k],u,i);return this}let v=!0;try{let j=(()=>{if(C.options==null||!(r instanceof H))return!1;let F=r.constructor,z=C.options.ref;if(z!=null&&(z===F.modelName||z===F.baseModelName))return!0;let J=C.options.refPath;if(J==null)return!1;let De=r.get(J);return De===F.modelName||De===F.baseModelName})(),k=!1;if(j&&r instanceof H&&(!r.$__.wasPopulated||Te.deepEqual(r.$__.wasPopulated.value,r._doc._id))){let F=C&&C.$isSingleNested?C.cast(r,this):r._doc._id;this.$populated(e,F,{[D$]:r.constructor}),r.$__.wasPopulated={value:F},k=!0}let q,R=this.$__schema.options.typeKey;if(C.options&&Array.isArray(C.options[R])&&C.options[R].length&&C.options[R][0]&&C.options[R][0].ref&&Rme(r,C.options[R][0].ref)){q={[D$]:r[0].constructor},this.$populated(e,r.map(function(F){return F._doc._id}),q);for(let F of r)F.$__.wasPopulated={value:F._doc._id};k=!0}if(!j||!C.$isSingleNested||!r.$__){let F=this;this.$__schema.singleNestedPaths[e]!=null&&w.length>1&&(F=Ime(this,w,this.schema)),i!=null&&i.overwriteImmutable?r=C.applySetters(r,F,!1,S,{overwriteImmutable:!0}):r=C.applySetters(r,F,!1,S)}if(Array.isArray(r)&&!Array.isArray(C)&&C.$isMongooseDocumentArray&&r.length!==0&&r[0]!=null&&r[0].$__!=null&&r[0].$__.populated!=null){let F=Object.keys(r[0].$__.populated);for(let z of F)this.$populated(e+"."+z,r.map(J=>J.$populated(z)),r[0].$__.populated[z].options);k=!0}if(!k&&this.$__.populated){if(Array.isArray(r)&&this.$__.populated[e])for(let F=0;F<r.length;++F)r[F]instanceof H&&r.set(F,r[F]._doc._id,!0);delete this.$__.populated[e]}r!=null&&C.$isSingleNested&&Lme(r,C,S),this.$markValid(e)}catch(j){j instanceof Xn.StrictModeError&&j.isImmutableError?this.invalidate(e,j):j instanceof Xn.CastError?(this.invalidate(j.path,j),j.$originalErrorPath&&this.invalidate(e,new Xn.CastError(C.instance,r,e,j.$originalErrorPath))):this.invalidate(e,new Xn.CastError(C.instance,r,e,j)),v=!1}if(v){let j=null,k=null;if(!u){let F=this.$isSubdocument?this.ownerDocument():this;j=F.$__.savedState,k=this.$isSubdocument?this.$__.fullPath+"."+e:e,F.$__saveInitialState(k)}this.$__set(P,e,i,u,w,C,r,S);let q=!!this.$__.session?.transaction,R=this.$__.session&&this.$__.session[Dg]&&this.$__.session[Dg].has(this)&&this.$__.session[Dg].get(this).modifiedPaths&&!this.$__.session[Dg].get(this).modifiedPaths.has(k);j!=null&&j.hasOwnProperty(k)&&(!q||R)&&Te.deepEqual(r,j[k])&&this.unmarkModified(e)}return C.$isSingleNested&&(this.isDirectModified(e)||r==null)&&TC(this,e),this};function Rme(t,e){if(!Array.isArray(t)||t.length===0)return!1;for(let r of t)if(!(r instanceof H)||r.constructor.modelName==null||r.constructor.modelName!=e&&r.constructor.baseModelName!=e)return!1;return!0}H.prototype.set=H.prototype.$set;H.prototype.$__shouldModify=function(t,e,r,n,i,s,o,u){return r&&r._skipMarkModified?!1:this.$isNew||e in this.$__.activePaths.getStatePaths("modify")||o===void 0&&!this.$__isSelected(e)?!0:o===void 0&&e in this.$__.activePaths.getStatePaths("default")||this.$populated(e)&&o instanceof H&&Mg(o._doc._id,u)?!1:!!(!Mg(o,u!==void 0?u:Te.getValue(e,this))||!n&&o!==null&&o!==void 0&&e in this.$__.activePaths.getStatePaths("default")&&Mg(o,s.getDefault(this,n)))};H.prototype.$__set=function(t,e,r,n,i,s,o,u){sd=sd||V1();let a=this.$__shouldModify(t,e,r,n,i,s,o,u);a?(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[e]&&(delete this.$__.primitiveAtomics[e],Object.keys(this.$__.primitiveAtomics).length===0&&delete this.$__.primitiveAtomics),this.markModified(t),M$||(M$=mC()),o&&Te.isMongooseArray(o)&&(o._registerAtomic("$set",o),Te.isMongooseDocumentArray(o)&&o.forEach(function(p){p&&p.__parentArray&&(p.__parentArray=o)}))):Array.isArray(o)&&Array.isArray(u)&&Te.isMongooseArray(o)&&Te.isMongooseArray(u)&&(o[Tn]=u[Tn],o[od]=u[od],Te.isMongooseDocumentArray(o)&&o.forEach(p=>{p!=null&&(p.$isNew=!1)}));let c=this._doc,l=0,h=i.length,d="";for(;l<h;l++){let m=l+1===h;if(d+=d?"."+i[l]:i[l],Pme.has(i[l]))return;if(m)c instanceof Map?c.set(i[l],o):c.$isSingleNested?(i[l]in c||(c[i[l]]=o),c._doc[i[l]]=o,a&&c.markModified(i[l])):c[i[l]]=o;else{let g=c instanceof Map,_=g?c.get(i[l]):c[i[l]];Te.isPOJO(_)||_&&_ instanceof sd||_&&!Array.isArray(_)&&_.$isSingleNested||_&&Array.isArray(_)||_==null&&(_={},g?c.set(i[l],_):c[i[l]]=_),c=_}}};H.prototype.$__getValue=function(t){if(typeof t!="string"&&!Array.isArray(t))throw new TypeError(`Invalid \`path\`. Must be either string or array. Got "${t}" (type ${typeof t})`);return Te.getValue(t,this._doc)};H.prototype.$inc=function(e,r){if(r==null&&(r=1),Array.isArray(e))return e.forEach(a=>this.$inc(a,r)),this;let n=this.$__path(e);if(n==null){if(this.$__.strictMode==="throw")throw new vC(e);if(this.$__.strictMode===!0)return this}else if(n.instance!=="Number")return this.invalidate(e,new Xn.CastError(n.instance,r,e)),this;let i=this.$__getValue(e)||0,s=!1,o=null,u=r;try{r=n.cast(r),o=n.applySetters(i+r,this),u=o-i,s=!0}catch(a){this.invalidate(e,new Xn.CastError("number",r,e,a))}return s&&(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[e]==null?this.$__.primitiveAtomics[e]={$inc:u}:this.$__.primitiveAtomics[e].$inc+=u,this.markModified(e),this.$__setValue(e,o)),this};H.prototype.$__setValue=function(t,e){return Te.setValue(t,e,this._doc),this};H.prototype.get=function(t,e,r){let n;r==null&&(r={}),e&&(n=this.$__schema.interpretAsType(t,e,this.$__schema.options));let i=r.noDottedPath,s=i?this.$__schema.paths[t]:this.$__path(t);if(s==null&&(s=this.$__schema.virtualpath(t),s!=null))return s.applyGetters(void 0,this);if(i){let c=this._doc[t];return n&&(c=n.cast(c)),s!=null&&r.getters!==!1?s.applyGetters(c,this):c}if(s!=null&&s.instance==="Mixed"){let c=this.$__schema.virtualpath(t);c!=null&&(s=c)}let o=t.indexOf(".")!==-1,u=this._doc,a=o?t.split("."):[t];typeof this.$__schema.aliases[a[0]]=="string"&&(a[0]=this.$__schema.aliases[a[0]]);for(let c=0,l=a.length;c<l;c++)u&&u._doc&&(u=u._doc),u==null?u=void 0:u instanceof Map?u=u.get(a[c],{getters:!1}):c===l-1?u=Te.getValue(a[c],u):u=u[a[c]];if(n&&(u=n.cast(u)),s!=null&&r.getters!==!1)u=s.applyGetters(u,this);else if(this.$__schema.nested[t]&&r.virtuals)return RC(this,ho(u)||{},{path:t});return u};H.prototype[Mme]=H.prototype.get;H.prototype.$get=H.prototype.get;H.prototype.$__path=function(t){let e=this.$__.adhocPaths,r=e&&e.hasOwnProperty(t)?e[t]:null;return r||this.$__schema.path(t)};H.prototype.markModified=function(t,e){this.$__saveInitialState(t),this.$__.activePaths.modify(t),e!=null&&!this.$isSubdocument&&(this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[t]=e)};H.prototype.$__saveInitialState=function(e){let r=this.$__.savedState,n=e;if(r!=null){let i=n.indexOf("."),s=i===-1?n:n.slice(0,i);r.hasOwnProperty(s)||(r[s]=ho(this.$__getValue(s)))}};H.prototype.unmarkModified=function(t){this.$__.activePaths.init(t),this.$__.pathsToScopes!=null&&delete this.$__.pathsToScopes[t]};H.prototype.$ignore=function(t){this.$__.activePaths.ignore(t)};H.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))};H.prototype.$isEmpty=function(t){let e={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){let r=this.$get(t);return r==null?!0:typeof r!="object"?!1:Te.isPOJO(r)?F$(r):Object.keys(r.toObject(e)).length===0}return Object.keys(this.toObject(e)).length===0};function F$(t){if(t==null)return!0;if(typeof t!="object"||Array.isArray(t))return!1;for(let e of Object.keys(t))if(!F$(t[e]))return!1;return!0}H.prototype.modifiedPaths=function(t){t=t||{};let e=Object.keys(this.$__.activePaths.getStatePaths("modify")),r=new Set,n=0,i=0,s=e.length;for(n=0;n<s;++n){let o=e[n],u=PC(o),a=u.length;for(i=0;i<a;++i)r.add(u[i]);if(!t.includeChildren)continue;let c=0,l=this.$get(o);if(typeof l=="object"&&l!==null){l._doc&&(l=l._doc);let h=l.length;if(Array.isArray(l))for(c=0;c<h;++c){let d=o+"."+c;if(!r.has(d)&&(r.add(d),l[c]!=null&&l[c].$__)){let p=l[c].modifiedPaths(),m=0,g=p.length;for(m=0;m<g;++m)r.add(d+"."+p[m])}}else{let d=Object.keys(l),p=0,m=d.length;for(p=0;p<m;++p)r.add(o+"."+d[p])}}}return Array.from(r)};H.prototype[R$]=H.prototype.modifiedPaths;H.prototype.isModified=function(t,e,r){if(t){let n=e&&e.ignoreAtomics,i=this.$__.activePaths.states.modify;if(i==null)return!1;typeof t=="string"&&(t=t.indexOf(" ")===-1?[t]:t.split(" "));for(let a of t)if(i[a]!=null)return!0;let s=r||this[R$](),o=t.some(function(a){return!!~s.indexOf(a)}),u=Object.keys(i);return n&&(u=u.filter(a=>{let c=this.$__getValue(a);return!(c!=null&&c[Tn]!=null&&c[Tn].$set===void 0)})),o||t.some(function(a){return u.some(function(c){return c===a||a.startsWith(c+".")})})}return this.$__.activePaths.some("modify")};H.prototype.$isModified=H.prototype.isModified;H.prototype[Tme]=H.prototype.isModified;H.prototype.$isDefault=function(t){if(t==null)return this.$__.activePaths.some("default");if(typeof t=="string"&&t.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("default").hasOwnProperty(t);let e=t;return Array.isArray(e)||(e=e.split(" ")),e.some(r=>this.$__.activePaths.getStatePaths("default").hasOwnProperty(r))};H.prototype.$isDeleted=function(t){return arguments.length===0?!!this.$__.isDeleted:(this.$__.isDeleted=!!t,this)};H.prototype.isDirectModified=function(t){if(t==null)return this.$__.activePaths.some("modify");if(typeof t=="string"&&t.indexOf(" ")===-1){let r=this.$__.activePaths.getStatePaths("modify").hasOwnProperty(t);if(r||t.indexOf(".")===-1)return r;let n=t.split(".");for(let i=0;i<n.length-1;++i){let s=n.slice(0,i+1).join("."),o=this.$get(s);if(o!=null&&o.$__!=null&&o.isDirectModified(n.slice(i+1).join(".")))return!0}return!1}let e=t;return typeof e=="string"&&(e=e.split(" ")),e.some(r=>this.isDirectModified(r))};H.prototype.isInit=function(t){if(t==null)return this.$__.activePaths.some("init");if(typeof t=="string"&&t.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("init").hasOwnProperty(t);let e=t;return Array.isArray(e)||(e=e.split(" ")),e.some(r=>this.$__.activePaths.getStatePaths("init").hasOwnProperty(r))};H.prototype.isSelected=function(e){if(this.$__.selected==null)return!0;if(!e)return!1;if(e==="_id")return this.$__.selected._id!==0;if(e.indexOf(" ")!==-1&&(e=e.split(" ")),Array.isArray(e))return e.some(s=>this.$__isSelected(s));let r=Object.keys(this.$__.selected),n=null;if(r.length===1&&r[0]==="_id")return this.$__.selected._id===0;for(let s of r)if(s!=="_id"&&P$(this.$__.selected[s])){n=!!this.$__.selected[s];break}if(n===null)return!0;if(e in this.$__.selected)return n;let i=e+".";for(let s of r)if(s!=="_id"){if(s.startsWith(i))return n||s!==i;if(i.startsWith(s+"."))return n}return!n};H.prototype.$__isSelected=H.prototype.isSelected;H.prototype.isDirectSelected=function(e){if(this.$__.selected==null)return!0;if(e==="_id")return this.$__.selected._id!==0;if(e.indexOf(" ")!==-1&&(e=e.split(" ")),Array.isArray(e))return e.some(i=>this.isDirectSelected(i));let r=Object.keys(this.$__.selected),n=null;if(r.length===1&&r[0]==="_id")return this.$__.selected._id===0;for(let i of r)if(i!=="_id"&&P$(this.$__.selected[i])){n=!!this.$__.selected[i];break}return n===null?!0:this.$__.selected.hasOwnProperty(e)?n:!n};H.prototype.validate=async function(e,r){if(typeof e=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new Xn("Document.prototype.validate() no longer accepts a callback");let n;if(this.$op="validate",arguments.length===1&&typeof arguments[0]=="object"&&!Array.isArray(arguments[0])&&(r=arguments[0],e=null),r&&typeof r.pathsToSkip=="string"){let s=r.pathsToSkip.indexOf(" ")===-1;r.pathsToSkip=s?[r.pathsToSkip]:r.pathsToSkip.split(" ")}let i=r&&r._skipParallelValidateCheck;if(this.$isSubdocument!=null||(this.$__.validating&&!i?n=new S$(this,{parentStack:r&&r.parentStack,conflictStack:this.$__.validating.stack}):i||(this.$__.validating=new S$(this,{parentStack:r&&r.parentStack}))),n!=null)throw n;return new Promise((s,o)=>{this.$__validate(e,r,u=>{if(this.$op=null,this.$__.validating=null,u!=null)return o(u);s()})})};H.prototype.$validate=H.prototype.validate;function xme(t){let e=Object.keys(t.$__.activePaths.getStatePaths("require")),r=0,n=e.length;for(r=0;r<n;++r){let i=e[r],s=t.$__schema.path(i);if(s!=null&&typeof s.originalRequiredValue=="function"){t.$__.cachedRequired=t.$__.cachedRequired||{};try{t.$__.cachedRequired[i]=s.originalRequiredValue.call(t,t)}catch(o){t.invalidate(i,o)}}}}function $$(t,e,r,n){let i={};xme(t);let s=new Set(Object.keys(t.$__.activePaths.getStatePaths("require")).filter(function(a){return!t.$__isSelected(a)&&!t.$isModified(a)?!1:t.$__.cachedRequired!=null&&a in t.$__.cachedRequired?t.$__.cachedRequired[a]:!0}));Object.keys(t.$__.activePaths.getStatePaths("init")).forEach(o),Object.keys(t.$__.activePaths.getStatePaths("modify")).forEach(o),Object.keys(t.$__.activePaths.getStatePaths("default")).forEach(o);function o(a){s.add(a)}if(!n){let a=t.$getAllSubdocs({useCache:!0}),c=t.modifiedPaths();for(let l of a)if(l.$basePath){let h=l.$isSingleNested?l.$__pathRelativeToParent():l.$__fullPathWithIndexes();for(let d of l.modifiedPaths())s.delete(h+"."+d);t.$isModified(h,null,c)&&!t.$__.activePaths.getStatePaths("modify").hasOwnProperty(h)&&!t.$isDefault(h)&&(s.add(h),t.$__.pathsToScopes==null&&(t.$__.pathsToScopes={}),t.$__.pathsToScopes[h]=l.$isDocumentArrayElement?l.__parentArray:l.$parent(),i[h]={skipSchemaValidators:!0},l.$isDocumentArrayElement&&l.__index!=null&&(i[h].index=l.__index))}}for(let a of s){let c=t.$__schema.path(a);if(c){if(c.$isMongooseDocumentArray)for(let l of s)(l==null||l.startsWith(c.path+"."))&&s.delete(l);(!c.caster&&c.validators.length===0&&!c.$parentSchemaDocArray||c.$isMongooseArray&&!c.$isMongooseDocumentArray&&!c.$embeddedSchemaType.$isMongooseArray&&c.validators.length===0&&c.$embeddedSchemaType.validators.length===0)&&s.delete(a)}}Array.isArray(e)?s=$me(s,e):Array.isArray(r)&&(s=kme(s,r)),Fme(t,s);let u={skipArrays:!0};for(let a of s)if(t.$__schema.nested[a]){let c=t.$__getValue(a);Ome(c)&&(c=c.toObject({transform:!1}));let l=mme(c,a,u,t.$__schema);Object.keys(l).filter(h=>!t.$__schema.singleNestedPaths.hasOwnProperty(h)).forEach(o)}for(let a of s){let c=t.$__schema.path(a);if(!c||(c.$parentSchemaDocArray&&typeof c.$parentSchemaDocArray.path=="string"&&s.add(c.$parentSchemaDocArray.path),!c.$isSchemaMap))continue;let l=t.$__getValue(a);if(l!=null)for(let h of l.keys())s.add(a+"."+h)}return s=Array.from(s),[s,i]}function Fme(t,e){for(let r of e){let n=t.$__schema.path(r);if(!n||!n.$isMongooseArray||!Array.isArray(n)&&n.$isMongooseDocumentArray&&!(n&&n.schemaOptions&&n.schemaOptions.required)||n.$isMongooseArray&&!n.$isMongooseDocumentArray&&!n.$embeddedSchemaType.$isMongooseArray&&n.$embeddedSchemaType.validators.length===0)continue;let i=t.$__getValue(r);Ig(i,e,r)}}function Ig(t,e,r){if(t!=null){let n=t.length;for(let i=0;i<n;++i)Array.isArray(t[i])?Ig(t[i],e,r+"."+i):e.add(r+"."+i)}}H.prototype.$__validate=function(t,e,r){this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!t?t=[...this.$__.saveOptions.pathsToSave]:typeof t=="function"?(r=t,e=null,t=null):typeof e=="function"&&(r=e,e=null);let n=e&&typeof e=="object"&&"validateModifiedOnly"in e,i=e&&e.pathsToSkip||null,s;n?s=!!e.validateModifiedOnly:s=this.$__schema.options.validateModifiedOnly;let o=e&&e.validateAllPaths;if(o){if(i)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(t)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if(n&&s)throw new TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}let u=this,a=()=>{let _=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,s&&_!=null){let w=Object.keys(_.errors);for(let S of w)this.$isModified(S)||delete _.errors[S];Object.keys(_.errors).length===0&&(_=void 0)}if(this.$__.cachedRequired={},this.$emit("validate",u),this.constructor.emit("validate",u),_){for(let w in _.errors)!this[Cme]&&_.errors[w]instanceof Xn.CastError&&this.invalidate(w,_.errors[w]);return _}},c,l;if(o){c=new Set(Object.keys(this.$__schema.paths));for(let _ of c){let w=this.$__schema.path(_);if(!w||!w.$isMongooseArray)continue;let S=this.$__getValue(_);S&&Ig(S,c,_)}c=[...c],l={}}else{let _=$$(this,t,i,e&&e._nestedValidate);c=s?_[0].filter(w=>this.$isModified(w)):_[0],l=_[1]}if(typeof t=="string"&&(t=t.split(" ")),c.length===0)return O$(function(){let _=a();if(_)return u.$__schema.s.hooks.execPost("validate:error",u,[u],{error:_},function(w){r(w)});r(null,u)});let h={},d=0,p=this.$__.saveOptions?.pathsToSave;if(Array.isArray(p)){p=new Set(p);for(let _ of c)p.has(_)&&m(_)}else for(let _ of c)m(_);function m(_){_==null||h[_]||(h[_]=!0,d++,O$(function(){let w=u.$__schema.path(_);if(!w)return--d||g();if(!u.$isValid(_)){--d||g();return}if(w[Bme]!=null&&_!==w.path)return--d||g();let S=u.$__getValue(_),C;(C=u.$populated(_))?S=C:S!=null&&S.$__!=null&&S.$__.wasPopulated&&(S=S._doc._id);let O=u.$__.pathsToScopes!=null&&_ in u.$__.pathsToScopes?u.$__.pathsToScopes[_]:u,B={...l[_],path:_,validateAllPaths:o,_nestedValidate:!0};w.doValidate(S,function(P){if(P){if((w.$isSingleNested||w.$isArraySubdocument||w.$isMongooseDocumentArray)&&P instanceof Bg)return--d||g();u.invalidate(_,P,void 0,!0)}--d||g()},O,B)}))}function g(){let _=a();if(_)return u.$__schema.s.hooks.execPost("validate:error",u,[u],{error:_},function(w){r(w)});r(null,u)}};function $me(t,e){let r=new Set(e),n=new Map([]);for(let s of e){if(s.indexOf(".")===-1)continue;let o=s.split("."),u=o[0];for(let a=1;a<o.length;++a)n.set(u,s),u=u+"."+o[a]}let i=new Set;for(let s of t)r.has(s)?i.add(s):n.has(s)&&i.add(n.get(s));return i}function kme(t,e){return e=new Set(e),t=Array.from(t).filter(r=>!e.has(r)),new Set(t)}H.prototype.validateSync=function(t,e){let r=this;arguments.length===1&&typeof arguments[0]=="object"&&!Array.isArray(arguments[0])&&(e=arguments[0],t=null);let n=e&&typeof e=="object"&&"validateModifiedOnly"in e,i;n?i=!!e.validateModifiedOnly:i=this.$__schema.options.validateModifiedOnly;let s=e&&e.pathsToSkip,o=e&&e.validateAllPaths;if(o){if(s)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(t)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}typeof t=="string"?t=t.indexOf(" ")===-1?[t]:t.split(" "):typeof s=="string"&&s.indexOf(" ")!==-1&&(s=s.split(" "));let u,a;if(o){u=new Set(Object.keys(this.$__schema.paths));for(let h of u){let d=this.$__schema.path(h);if(!d||!d.$isMongooseArray)continue;let p=this.$__getValue(h);p&&Ig(p,u,h)}u=[...u],a={}}else{let h=$$(this,t,s);u=i?h[0].filter(d=>this.$isModified(d)):h[0],a=h[1]}let c={};for(let h=0,d=u.length;h<d;++h){let p=u[h];if(c[p])continue;c[p]=!0;let m=r.$__schema.path(p);if(!m||!r.$isValid(p))continue;let g=r.$__getValue(p),_=m.doValidateSync(g,r,{skipSchemaValidators:a[p],path:p,validateModifiedOnly:i,validateAllPaths:o});if(_){if((m.$isSingleNested||m.$isArraySubdocument||m.$isMongooseDocumentArray)&&_ instanceof Bg)continue;r.invalidate(p,_,void 0,!0)}}let l=r.$__.validationError;if(r.$__.validationError=void 0,r.$emit("validate",r),r.constructor.emit("validate",r),l)for(let h in l.errors)l.errors[h]instanceof Xn.CastError&&r.invalidate(h,l.errors[h]);return l};H.prototype.invalidate=function(t,e,r,n){if(this.$__.validationError||(this.$__.validationError=new Bg(this)),!this.$__.validationError.errors[t])return(!e||typeof e=="string")&&(e=new B$({path:t,message:e,type:n||"user defined",value:r})),this.$__.validationError===e?this.$__.validationError:(this.$__.validationError.addError(t,e),this.$__.validationError)};H.prototype.$markValid=function(t){!this.$__.validationError||!this.$__.validationError.errors[t]||(delete this.$__.validationError.errors[t],Object.keys(this.$__.validationError.errors).length===0&&(this.$__.validationError=null))};function qme(t,e){if(!t.$__.validationError)return;let r=Object.keys(t.$__.validationError.errors);for(let n of r)n.startsWith(e+".")&&delete t.$__.validationError.errors[n];Object.keys(t.$__.validationError.errors).length===0&&(t.$__.validationError=null)}function Lme(t,e,r){let n=e.schema;if(n!=null)for(let i of Object.keys(n.paths)){let s=n.paths[i];if(s.$immutableSetter==null)continue;let o=r?.$__getValue(i);s.$immutableSetter.call(t,o)}}H.prototype.$isValid=function(t){return this.$__.validationError==null||Object.keys(this.$__.validationError.errors).length===0?!0:t==null?!1:(t.indexOf(" ")!==-1&&(t=t.split(" ")),Array.isArray(t)?t.some(e=>this.$__.validationError.errors[e]==null):this.$__.validationError.errors[t]==null)};H.prototype.$__reset=function(){let e=this,r=this.$isSubdocument?null:this.$getAllSubdocs({useCache:!0});if(r&&r.length>0)for(let n of r)n.$__reset();return this.$__dirty().forEach(function(n){let i=n.value;i&&i[Tn]&&(i[od]=i[Tn],i[Tn]={})}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,e=this,this.$__schema.requiredPaths().forEach(function(n){e.$__.activePaths.require(n)}),this};H.prototype.$__undoReset=function(){if(!(this.$__.backup==null||this.$__.backup.activePaths==null)){this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(let e of this.$__dirty()){let r=e.value;r&&r[Tn]&&r[od]&&(r[Tn]=r[od])}for(let e of this.$getAllSubdocs())e.$__undoReset()}};H.prototype.$__dirty=function(){let t=this,e=this.$__.activePaths.map("modify",function(i){return{path:i,value:t.$__getValue(i),schema:t.$__path(i)}});e=e.concat(this.$__.activePaths.map("default",function(i){if(!(i==="_id"||t.$__getValue(i)==null))return{path:i,value:t.$__getValue(i),schema:t.$__path(i)}}));let r=new Map(e.filter(i=>i!=null).map(i=>[i.path,i.value])),n=[];return e.forEach(function(i){if(!i)return;let s=null,o=PC(i.path);for(let u=0;u<o.length-1;u++)if(r.has(o[u])){s=r.get(o[u]);break}s==null?n.push(i):s!=null&&s[Tn]!=null&&s.hasAtomics()&&(s[Tn]={},s[Tn].$set=s)}),n};H.prototype.$__setSchema=function(t){hme(t.tree,this,void 0,t.options);for(let e of Object.keys(t.virtuals))t.virtuals[e]._applyDefaultGetters();t.path("schema")==null&&(this.schema=t),this.$__schema=t,this[Dme]=t};H.prototype.$__getArrayPathsToValidate=function(){return vg||(vg=Tc()),this.$__.activePaths.map("init","modify",function(t){return this.$__getValue(t)}.bind(this)).filter(function(t){return t&&Array.isArray(t)&&Te.isMongooseDocumentArray(t)&&t.length}).reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return t})};H.prototype.$getAllSubdocs=function(t){if(t?.useCache&&this.$__.saveOptions?.__subdocs)return this.$__.saveOptions.__subdocs;vg||(vg=Tc()),sd=sd||V1();let e=[];function r(n){let i=[];for(let{path:s}of n.$__schema.childSchemas){let o=n.$__getValue(s);if(o!=null){if(o.$__&&i.push(o),Array.isArray(o))for(let u of o)u!=null&&u.$__&&i.push(u);if(o instanceof Map)for(let u of o.values())u!=null&&u.$__&&i.push(u)}}for(let s of i)r(s);e.push(...i)}return r(this),this.$__.saveOptions&&(this.$__.saveOptions.__subdocs=e),e};function jme(t){let e=t.$__schema&&t.$__schema.callQueue;if(e.length)for(let r of e)r[0]!=="pre"&&r[0]!=="post"&&r[0]!=="on"&&t[r[0]].apply(t,r[1])}H.prototype.$__handleReject=function(e){this.$listeners("error").length?this.$emit("error",e):this.constructor.listeners&&this.constructor.listeners("error").length&&this.constructor.emit("error",e)};H.prototype.$toObject=function(t,e){let r=this.$__schema._defaultToObjectOptions(e),n=this.$__hasOnlyPrimitiveValues();t=Te.isPOJO(t)?{...t}:{},t._calledWithOptions=t._calledWithOptions||{...t};let i;t._calledWithOptions.minimize!=null?i=t.minimize:r!=null&&r.minimize!=null?i=r.minimize:i=this.$__schema.options.minimize,t.minimize=i,n||(t._seen=t._seen||new Map);let s=t._calledWithOptions.depopulate??r?.depopulate??t.depopulate??!1;if(s&&t._isNested&&this.$__.wasPopulated)return ho(this.$__.wasPopulated.value||this._doc._id,t);if(s&&(t.depopulate=!0),r!=null)for(let d of Object.keys(r))t[d]==null&&(t[d]=r[d]);t._isNested=!0,t.json=e,t.minimize=i;let o=t._parentOptions;t._parentOptions=this.$isSubdocument?t:null;let u;n&&!t.flattenObjectIds?u=this.$__toObjectShallow():u=ho(this._doc,t)||{};let a=t._calledWithOptions.getters??t.getters??r.getters??!1;a&&(Ume(this,u),t.minimize&&(u=Ame(u)||{}));let c=t._calledWithOptions.virtuals??r.virtuals??o?.virtuals??void 0;(c||a&&c!==!1)&&RC(this,u,t,t),t.versionKey===!1&&this.$__schema.options.versionKey&&delete u[this.$__schema.options.versionKey];let l=t._calledWithOptions.transform??!0,h;if(l===!0?h=r.transform:typeof l=="function"&&(h=l),l&&Vme(this,u),t.useProjection&&zme(this,u),typeof h=="function"){let d=h(this,u,t);typeof d<"u"&&(u=d)}return u};H.prototype.$__toObjectShallow=function(){let e={};if(this._doc!=null)for(let r of Object.keys(this._doc)){let n=this._doc[r];n instanceof Date?e[r]=new Date(n):n!==void 0&&(e[r]=n)}return e};H.prototype.toObject=function(t){return this.$toObject(t)};function RC(t,e,r,n){let i=t.$__schema,s=i.virtuals,o=Object.keys(s),u=o.length,a=u,c,l,h=t._doc,d,p=typeof(n&&n.aliases)=="boolean"?n.aliases:!0;r=r||{};let m=null;if(Array.isArray(r.virtuals))m=new Set(r.virtuals);else if(r.virtuals&&r.virtuals.pathsToSkip){m=new Set(o);for(let g=0;g<r.virtuals.pathsToSkip.length;g++)m.has(r.virtuals.pathsToSkip[g])&&m.delete(r.virtuals.pathsToSkip[g])}if(!h)return e;for(u=0;u<a;++u){if(c=o[u],m!=null&&!m.has(c)||!p&&i.aliases.hasOwnProperty(c))continue;if(l=c,r.path!=null){if(!c.startsWith(r.path+"."))continue;l=c.substring(r.path.length+1)}if(l.indexOf(".")===-1&&l===c){if(d=s[c].applyGetters(void 0,t),d===void 0)continue;d=ho(d,r),e[l]=d;continue}let g=l.split(".");if(d=ho(t.get(c),r),d===void 0)continue;let _=g.length;h=e;for(let w=0;w<_-1;++w)h[g[w]]=h[g[w]]||{},h=h[g[w]];h[g[_-1]]=d}return e}function Ume(t,e){let r=t.$__schema,n=Object.keys(r.paths),i=n.length,s,o=t._doc,u;if(!o)return e;for(;i--;){s=n[i];let a=s.split("."),c=a.length,l=c-1,h=e,d;if(o=t._doc,!!t.$__isSelected(s))for(let p=0;p<c&&(d=a[p],u=o[d],!(h!=null&&typeof h!="object"));++p){if(p===l){if(h[d]=r.paths[s].applyGetters(h[d],t),Array.isArray(h[d])&&r.paths[s].$embeddedSchemaType)for(let m=0;m<h[d].length;++m)h[d][m]=r.paths[s].$embeddedSchemaType.applyGetters(h[d][m],t)}else if(u==null){d in o&&(h[d]=u);break}else h=h[d]||(h[d]={});o=u}}return e}function Vme(t,e){let r=t.$__schema,n=Object.keys(r.paths||{});if(!t._doc)return e;for(let s of n){let o=r.paths[s];if(typeof o.options.transform=="function"){let u=t.$get(s);if(u===void 0)continue;let a=o.options.transform.call(t,u);v$(s,a),Te.setValue(s,a,e)}else if(o.$embeddedSchemaType!=null&&typeof o.$embeddedSchemaType.options.transform=="function"){let u=t.$get(s);if(u===void 0)continue;let a=[].concat(u),c=o.$embeddedSchemaType.options.transform;for(let l=0;l<a.length;++l){let h=c.call(t,a[l]);a[l]=h,v$(s,h)}e[s]=a}}return e}function v$(t,e){if(bme(e))throw new Error("`transform` function must be synchronous, but the transform on path `"+t+"` returned a promise.")}function zme(t,e){let r=t.$__schema,n=Object.keys(r.paths||{});if(!t._doc)return e;let s=t.$__.selected;if(s===void 0&&(s={},Sme.applyPaths(s,r)),s==null||Object.keys(s).length===0)return e;for(let o of n)s[o]!=null&&!s[o]&&delete e[o];return e}H.prototype.toJSON=function(t){return this.$toObject(t,!0)};H.prototype.ownerDocument=function(){return this};H.prototype.parent=function(){return this.$isSubdocument||this.$__.wasPopulated?this.$__.parent:this};H.prototype.$parent=H.prototype.parent;H.prototype.inspect=function(t){let e=Te.isPOJO(t),r;e&&(r=t,r.minimize=!1);let n=arguments.length>0?this.toObject(r):this.toObject();return n??"MongooseDocument { "+n+" }"};IC.custom&&(H.prototype[IC.custom]=H.prototype.inspect);H.prototype.toString=function(){let t=this.inspect();return typeof t=="string"?t:IC(t)};H.prototype.equals=function(t){if(!t)return!1;let e=this.$__getValue("_id"),r=t.$__!=null?t.$__getValue("_id"):t;return!e&&!r?Mg(this,t):e&&e.equals?e.equals(r):e===r};H.prototype.populate=async function(){let e={},r=[...arguments];if(typeof r[r.length-1]=="function")throw new Xn("Document.prototype.populate() no longer accepts a callback");if(r.length!==0){let s=Te.populate.apply(null,r);for(let o of s)e[o.path]=o}let n=Te.object.vals(e),i=this.constructor;if(this.$__isNested){i=this.$__[vme].constructor;let s=this.$__.nestedPath;n.forEach(function(o){o.path=s+"."+o.path})}if(this.$session()!=null){let s=this.$session();n.forEach(o=>{if(o.options==null){o.options={session:s};return}"session"in o.options||(o.options.session=s)})}return n.forEach(s=>{s._localModel=i}),i.populate(this,n)};H.prototype.$getPopulatedDocs=function(){let e=[];this.$__.populated!=null&&(e=e.concat(Object.keys(this.$__.populated)));let r=[];for(let n of e){let i=this.$get(n);Array.isArray(i)?r=r.concat(i):i instanceof H&&r.push(i)}return r};H.prototype.populated=function(t,e,r){if(e==null||e===!0){if(!this.$__.populated||typeof t!="string")return;let i=t.endsWith(".$*")?t.replace(/\.\$\*$/,""):t,s=this.$__.populated[i];return s?e===!0?s:s.value:void 0}this.$__.populated||(this.$__.populated={}),this.$__.populated[t]={value:e,options:r};let n=t.split(".");for(let i=0;i<n.length-1;++i){let s=n.slice(0,i+1).join("."),o=this.$get(s);if(o!=null&&o.$__!=null&&this.$populated(s)){let u=n.slice(i+1).join(".");o.$populated(u,e,r);break}}return e};H.prototype.$populated=H.prototype.populated;H.prototype.$assertPopulated=function(e,r){if(Array.isArray(e))return e.forEach(n=>this.$assertPopulated(n,r)),this;if(arguments.length>1&&this.$set(r),!this.$populated(e))throw new Xn(`Expected path "${e}" to be populated`);return this};H.prototype.depopulate=function(t){typeof t=="string"&&(t=t.indexOf(" ")===-1?[t]:t.split(" "));let e,r=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],n=this.$__&&this.$__.populated||{};if(arguments.length===0){for(let s of r)delete this.$$populatedVirtuals[s],delete this._doc[s],delete n[s];let i=Object.keys(n);for(let s of i)if(e=this.$populated(s),!!e)if(delete n[s],Array.isArray(e)){let o=Te.getValue(s,this._doc);if(o.isMongooseArray){let u=o.__array;for(let a=0;a<u.length;++a){let c=u[a];c!=null&&(u[a]=c instanceof H?c._doc._id:c._id)}}else Te.setValue(s,e,this._doc)}else Te.setValue(s,e,this._doc);return this}for(let i of t)if(e=this.$populated(i),delete n[i],r.indexOf(i)!==-1)delete this.$$populatedVirtuals[i],delete this._doc[i];else if(e)if(Array.isArray(e)){let s=Te.getValue(i,this._doc);if(s.isMongooseArray){let o=s.__array;for(let u=0;u<o.length;++u){let a=o[u];a!=null&&(o[u]=a instanceof H?a._doc._id:a._id)}}else Te.setValue(i,e,this._doc)}else Te.setValue(i,e,this._doc);return this};H.prototype.$__fullPath=function(t){return t||""};H.prototype.getChanges=function(){let t=this.$__delta();return t?t[1]:{}};H.prototype.$__delta=function(){let e=this.$__dirty(),r=this.$__schema.options.optimisticConcurrency;if(r)if(Array.isArray(r)){let a=new Set(r);this.modifiedPaths().find(l=>a.has(l))&&(this.$__.version=e.length?ou:ud)}else this.$__.version=e.length?ou:ud;if(!e.length&&ou!==this.$__.version)return;let n={},i={},s=e.length,o=[],u=0;for(n._id=this._doc._id,(n&&n._id&&n._id.$__||null)!=null&&(n._id=n._id.toObject({transform:!1,depopulate:!0}));u<s;++u){let a=e[u],c=a.value,l=Wme(this,a.path,c);if(l){o.push(l);continue}if(!this.$populated(a.path,!0)&&this.$__.selected){let d=a.path.split("."),p=d[0];if(this.$__.selected[p]&&this.$__.selected[p].$elemMatch)if(d.length>1&&d[1]==0&&typeof n[p]>"u")n[p]=this.$__.selected[p],d[1]="$",a.path=d.join(".");else{o.push(a.path);continue}}if(!(this.$isDefault(a.path)&&this.$__.selected&&(a.path.indexOf(".")===-1&&T$(this.$__.selected,a.path)||PC(a.path).find(p=>T$(this.$__.isSelected,p))))&&!o.length)if(c===void 0)aa(this,n,i,a,1,"$unset");else if(c===null)aa(this,n,i,a,null);else if(Te.isMongooseArray(c)&&c.$path()&&c[Tn])Hme(this,n,i,a,c);else if(c[ume.pathSymbol]&&Buffer.isBuffer(c))c=c.toObject(),aa(this,n,i,a,c);else if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[a.path]!=null){let d=this.$__.primitiveAtomics[a.path],p=pme(d);aa(this,n,i,a,d[p],p)}else c=ho(c,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),aa(this,n,i,a,c)}return o.length?new sme(o):(this.$__.version&&this.$__version(n,i),Object.keys(i).length===0?[n,null]:[n,i])};function Wme(t,e,r){let n=t.$populated(e,!0);if(!n&&t.$__.selected){let s=e.split(".")[0];if(t.$__.selected[s+".$"])return s}if(!(n&&Te.isMongooseArray(r)))return;if(n.options.match||n.options.options&&Te.object.hasOwnProperty(n.options.options,"limit")||n.options.options&&n.options.options.skip||n.options.select&&(n.options.select._id===0||/\s?-_id\s?/.test(n.options.select))){let s=r[Tn];if(Object.keys(s).length===0||s.$set||s.$pop)return e}}function aa(t,e,r,n,i,s){if(s||(s="$set"),r[s]||(r[s]={}),r[s][n.path]=i,t.$__schema.options.versionKey!==!1&&!Gme(t,n.path)&&ou!==(ou&t.$__.version)&&!t.$__schema.options.optimisticConcurrency){switch(s){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}s==="$push"||s==="$addToSet"||s==="$pullAll"||s==="$pull"?/\.\d+\.|\.\d+$/.test(n.path)?t.$__.version=ou:t.$__.version=NC:/^\$p/.test(s)||Array.isArray(i)?t.$__.version=ou:/\.\d+\.|\.\d+$/.test(n.path)&&(t.$__.version=ud)}}function Hme(t,e,r,n,i){if(r.$set&&r.$set[n.path])return;if(typeof i.$__getAtomics=="function"){i.$__getAtomics().forEach(function(h){let d=h[0],p=h[1];aa(t,e,r,n,p,d)});return}let s=i[Tn],o=Object.keys(s),u=o.length,a,c;if(u===0)return Te.isMongooseObject(i)?i=i.toObject({depopulate:1,_isNested:!0}):i.valueOf&&(i=i.valueOf()),aa(t,e,r,n,i);function l(h){return Te.isMongooseObject(h)?h.toObject({depopulate:1,_isNested:!0}):h}for(;u--;)c=o[u],a=s[c],Te.isMongooseObject(a)?a=a.toObject({depopulate:!0,transform:!1,_isNested:!0}):Array.isArray(a)?a=a.map(l):a.valueOf&&(a=a.valueOf()),c==="$addToSet"&&(a={$each:a}),aa(t,e,r,n,a,c)}function Gme(t,e){let r=t.$__schema.options.skipVersioning;return r?(e=e.replace(/\.\d+\./,"."),r[e]):!1}H.prototype.$clone=function(){let t=this.constructor,e=new t;if(e.$isNew=this.$isNew,this._doc&&(e._doc=ho(this._doc,{retainDocuments:!0})),this.$__){let r=this.$__.constructor,n=new r;for(let i of Object.getOwnPropertyNames(this.$__))i!=="activePaths"&&(n[i]=ho(this.$__[i]));Object.assign(n.activePaths,ho({...this.$__.activePaths})),e.$__=n}return e};H.prototype.$createModifiedPathsSnapshot=function(){let e=new WeakMap;if(!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)e.set(n,n.$__.activePaths.clone())}return new ame(e,this.$__.activePaths.clone(),this.$__.version)};H.prototype.$restoreModifiedPathsSnapshot=function(e){if(this.$__.activePaths=e.activePaths.clone(),this.$__.version=e.version,!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)e.subdocSnapshot.has(n)&&(n.$__.activePaths=e.subdocSnapshot.get(n))}return this};H.prototype.$clearModifiedPaths=function(){if(this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("init"),this.$__.version=0,!this.$isSubdocument){let e=this.$getAllSubdocs();for(let r of e)r.$clearModifiedPaths()}return this};H.prototype.$__hasOnlyPrimitiveValues=function(){return!this.$__.populated&&!this.$__.wasPopulated&&(this._doc==null||Object.values(this._doc).every(e=>e==null||typeof e!="object"||Te.isNativeObject(e)&&!Array.isArray(e)||C$(e,"ObjectId")||C$(e,"Decimal128")))};H.VERSION_WHERE=ud;H.VERSION_INC=NC;H.VERSION_ALL=ou;H.ValidationError=Bg;q$.exports=k$=H});var Ce=y(he=>{"use strict";f();var Kme=vi().UUID,Yme=ng(),j$=_i(),Qme=tu(),U$=QO(),FC=$t(),Jme=Ti(),Xme=sa(),V$=q2(),z$=Lx(),ca=Lr(),Zme=v1(),eye=TO(),ad=Qh(),tye=ig(),rye=sg(),cd=_c(),{trustedSymbol:W1}=B1(),xC;he.specialProperties=cd;he.isMongooseArray=V$.isMongooseArray;he.isMongooseDocumentArray=z$.isMongooseDocumentArray;he.registerMongooseArray=V$.registerMongooseArray;he.registerMongooseDocumentArray=z$.registerMongooseDocumentArray;var $C=/\s/,kC=/\s+/;he.toCollectionName=function(t,e){if(t==="system.profile"||t==="system.indexes")return t;if(typeof e=="function"){if(typeof t!="string")throw new TypeError("Collection name must be a string");if(t.length===0)throw new TypeError("Collection name cannot be empty");return e(t)}return t};he.deepEqual=function t(e,r){if(e===r)return!0;if(typeof e!="object"||typeof r!="object")return e===r;if(e instanceof Date&&r instanceof Date)return e.getTime()===r.getTime();if(ca(e,"ObjectId")&&ca(r,"ObjectId")||ca(e,"Decimal128")&&ca(r,"Decimal128"))return e.toString()===r.toString();if(e instanceof RegExp&&r instanceof RegExp)return e.source===r.source&&e.ignoreCase===r.ignoreCase&&e.multiline===r.multiline&&e.global===r.global&&e.dotAll===r.dotAll&&e.unicode===r.unicode&&e.sticky===r.sticky&&e.hasIndices===r.hasIndices;if(e==null||r==null||e.prototype!==r.prototype)return!1;if(e instanceof Map||r instanceof Map)return!(e instanceof Map)||!(r instanceof Map)?!1:t(Array.from(e.keys()),Array.from(r.keys()))&&t(Array.from(e.values()),Array.from(r.values()));if(e instanceof Number&&r instanceof Number)return e.valueOf()===r.valueOf();if(Buffer.isBuffer(e))return he.buffer.areEqual(e,r);if(Array.isArray(e)||Array.isArray(r)){if(!Array.isArray(e)||!Array.isArray(r))return!1;let o=e.length;if(o!==r.length)return!1;for(let u=0;u<o;++u)if(!t(e[u],r[u]))return!1;return!0}e.$__!=null?e=e._doc:ad(e)&&(e=e.toObject()),r.$__!=null?r=r._doc:ad(r)&&(r=r.toObject());let n=Object.keys(e),i=Object.keys(r),s=n.length;if(s!==i.length)return!1;for(let o=s-1;o>=0;o--)if(n[o]!==i[o])return!1;for(let o of n)if(!t(e[o],r[o]))return!1;return!0};he.last=function(t){if(t.length>0)return t[t.length-1]};he.promiseOrCallback=tye;he.cloneArrays=function(e){return Array.isArray(e)?e.map(r=>he.cloneArrays(r)):e};he.omit=function(e,r){if(r==null)return Object.assign({},e);Array.isArray(r)||(r=[r]);let n=Object.assign({},e);for(let i of r)delete n[i];return n};he.merge=function t(e,r,n,i){n=n||{};let s=Object.keys(r),o=0,u=s.length,a;r[W1]&&(e[W1]=r[W1]),i=i||"";let c=n.omitNested||{};for(;o<u;)if(a=s[o++],!(n.omit&&n.omit[a])&&!c[i]&&!cd.has(a))if(e[a]==null)Zme(r[a])?e[a]={...r[a]}:Array.isArray(r[a])?e[a]=[...r[a]]:e[a]=r[a];else if(he.isObject(r[a])){if(he.isObject(e[a])||(e[a]={}),r[a]!=null){if(n.isDiscriminatorSchemaMerge&&r[a].$isSingleNested&&e[a].$isMongooseDocumentArray||r[a].$isMongooseDocumentArray&&e[a].$isSingleNested)continue;if(r[a].instanceOfSchema){e[a].instanceOfSchema?rye(e[a],r[a].clone(),n.isDiscriminatorSchemaMerge):e[a]=r[a].clone();continue}else if(ca(r[a],"ObjectId")){e[a]=new Qme(r[a]);continue}}t(e[a],r[a],n,i?i+"."+a:a)}else n.overwrite&&(e[a]=r[a]);return e};he.toObject=function t(e){xC||(xC=Yn());let r;if(e==null)return e;if(e instanceof xC)return e.toObject();if(Array.isArray(e)){r=[];for(let n of e)r.push(t(n));return r}if(he.isPOJO(e)){r={},e[W1]&&(r[W1]=e[W1]);for(let n of Object.keys(e))cd.has(n)||(r[n]=t(e[n]));return r}return e};he.isObject=Xme;he.isPOJO=v1();he.isNonBuiltinObject=function(e){return typeof e=="object"&&!he.isNativeObject(e)&&!he.isMongooseType(e)&&!(e instanceof Kme)&&e!=null};he.isNativeObject=function(t){return Array.isArray(t)||t instanceof Date||t instanceof Boolean||t instanceof Number||t instanceof String};he.isEmptyObject=function(t){return t!=null&&typeof t=="object"&&Object.keys(t).length===0};he.hasKey=function(e,r){let n=Object.keys(e);for(let i of n)if(i===r||he.isPOJO(e[i])&&he.hasKey(e[i],r))return!0;return!1};he.tick=function(e){if(typeof e=="function")return function(){try{e.apply(this,arguments)}catch(r){Jme(function(){throw r})}}};he.isMongooseType=function(t){return ca(t,"ObjectId")||ca(t,"Decimal128")||t instanceof Buffer};he.isMongooseObject=ad;he.expires=function(e){e&&e.constructor.name==="Object"&&"expires"in e&&(e.expireAfterSeconds=typeof e.expires!="string"?e.expires:Math.round(Yme(e.expires)/1e3),delete e.expires)};he.populate=function(e,r,n,i,s,o,u,a){let c=null;if(arguments.length===1){if(e instanceof U$)return e._docs={},e._childDocs=[],[e];if(Array.isArray(e))return l(e).map(d=>he.populate(d)[0]);he.isObject(e)?c=Object.assign({},e):c={path:e}}else typeof n=="object"?c={path:e,select:r,match:n,options:i}:c={path:e,select:r,model:n,match:i,options:s,populate:o,justOne:u,count:a};if(typeof c.path!="string")throw new TypeError("utils.populate: invalid path. Expected string. Got typeof `"+typeof e+"`");return nye(c);function l(h){let d=[];return h.forEach(function(p){$C.test(p.path)?p.path.split(kC).forEach(function(g){let _=Object.assign({},p);_.path=g,d.push(_)}):d.push(p)}),d}};function nye(t){if(Array.isArray(t.populate)){let n=[];t.populate.forEach(function(i){if($C.test(i.path)){let s=Object.assign({},i);s.path.split(kC).forEach(function(u){s.path=u,n.push(he.populate(s)[0])})}else n.push(he.populate(i)[0])}),t.populate=he.populate(n)}else t.populate!=null&&typeof t.populate=="object"&&(t.populate=he.populate(t.populate));let e=[],r=$C.test(t.path)?t.path.split(kC):[t.path];t.options!=null&&(t.options=FC(t.options));for(let n of r)e.push(new U$(Object.assign({},t,{path:n})));return e}he.getValue=function(t,e,r){return j$.get(t,e,sye,r)};var iye=Object.freeze({getters:!1});function sye(t,e){let r=t?._doc||t;return r!=null&&r.isMongooseArrayProxy&&(r=r.__array),r instanceof Map?r.get(e,iye):r[e]}he.setValue=function(t,e,r,n,i){j$.set(t,e,r,"_doc",n,i)};he.object={};he.object.vals=function(e){let r=Object.keys(e),n=r.length,i=[];for(;n--;)i.push(e[r[n]]);return i};var oye=Object.prototype.hasOwnProperty;he.object.hasOwnProperty=function(t,e){return oye.call(t,e)};he.isNullOrUndefined=function(t){return t==null};he.array={};he.array.flatten=function t(e,r,n){return n||(n=[]),e.forEach(function(i){Array.isArray(i)?t(i,r,n):(!r||r(i))&&n.push(i)}),n};var uye=Object.prototype.hasOwnProperty;he.hasUserDefinedProperty=function(t,e){if(t==null)return!1;if(Array.isArray(e)){for(let r of e)if(he.hasUserDefinedProperty(t,r))return!0;return!1}if(uye.call(t,e))return!0;if(typeof t=="object"&&e in t){let r=t[e];return r!==Object.prototype[e]&&r!==Array.prototype[e]}return!1};var L$=Math.pow(2,32)-1;he.isArrayIndex=function(t){return typeof t=="number"?t>=0&&t<=L$:typeof t=="string"&&/^\d+$/.test(t)?(t=+t,t>=0&&t<=L$):!1};he.array.unique=function(t){let e=new Set,r=new Set,n=[];for(let i of t)if(typeof i=="number"||typeof i=="string"||i==null){if(e.has(i))continue;n.push(i),e.add(i)}else if(ca(i,"ObjectId")){if(r.has(i.toString()))continue;n.push(i),r.add(i.toString())}else n.push(i);return n};he.buffer={};he.buffer.areEqual=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;++r)if(t[r]!==e[r])return!1;return!0};he.getFunctionName=eye;he.decorate=function(t,e){for(let r in e)cd.has(r)||(t[r]=e[r])};he.mergeClone=function(t,e){ad(e)&&(e=e.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1}));let r=Object.keys(e),n=r.length,i=0,s;for(;i<n;)if(s=r[i++],!cd.has(s))if(typeof t[s]>"u")t[s]=FC(e[s],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let o=e[s];if(o!=null&&o.valueOf&&!(o instanceof Date)&&(o=o.valueOf()),he.isObject(o)){let u=o;ad(o)&&!o.isMongooseBuffer&&(u=u.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1})),o.isMongooseBuffer&&(u=Buffer.from(u)),he.mergeClone(t[s],u)}else t[s]=FC(o,{flattenDecimals:!1})}};he.each=function(t,e){for(let r of t)e(r)};he.renameObjKey=function(t,e,r){return Object.keys(t).reduce((i,s)=>(s===e?i[r]=t[e]:i[s]=t[s],i),{})};he.getOption=function(t){let e=Array.prototype.slice.call(arguments,1);for(let r of e)if(r!=null&&r[t]!=null)return r[t];return null};he.noop=function(){};he.errorToPOJO=function(e){if(!(e instanceof Error))throw new Error("`error` must be `instanceof Error`.");let n={};for(let i of Object.getOwnPropertyNames(e))n[i]=e[i];return n};he.warn=function(e){return process.emitWarning(e,{code:"MONGOOSE"})};he.injectTimestampsOption=function(e,r){r!=null&&(e.timestamps=r)}});var ar=y((Ng,X$)=>{"use strict";f();var ld=Hn(),Q$=gi(),aye=tg(),cye=KO(),Pg=$t(),qC=Ox(),lye=Tx(),LC=Mx(),W$=Ti(),fye=ye().schemaTypeSymbol,Dc=Ce(),J$=ye().validatorErrorSymbol,hye=ye().documentIsModified,H$=ye().populateModelSymbol,jC=ld.CastError,UC=ld.ValidatorError,dye={_skipMarkModified:!0};function Be(t,e,r){this[fye]=!0,this.path=t,this.instance=r,this.validators=[],this.getters=this.constructor.hasOwnProperty("getters")?this.constructor.getters.slice():[],this.setters=this.constructor.hasOwnProperty("setters")?this.constructor.setters.slice():[],this.splitPath(),e=e||{};let n=this.constructor.defaultOptions||{},i=Object.keys(n);for(let u of i)u==="validate"?this.validate(n.validate):n.hasOwnProperty(u)&&!Object.prototype.hasOwnProperty.call(e,u)&&(e[u]=n[u]);e.select==null&&delete e.select;let s=this.OptionsConstructor||Q$;this.options=new s(e),this._index=null,Dc.hasUserDefinedProperty(this.options,"immutable")&&(this.$immutable=this.options.immutable,qC(this));let o=Object.keys(this.options);for(let u of o){if(u==="cast"){Array.isArray(this.options[u])?this.castFunction.apply(this,this.options[u]):this.castFunction(this.options[u]);continue}if(Dc.hasUserDefinedProperty(this.options,u)&&typeof this[u]=="function"){if(u==="index"&&this._index){if(e.index===!1){let l=this._index;if(typeof l=="object"&&l!=null){if(l.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(l.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}let a=e[u];if(u==="default"){this.default(a);continue}let c=Array.isArray(a)?a:[a];this[u].apply(this,c)}}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}Be.prototype.OptionsConstructor=Q$;Be.prototype.path;Be.prototype.validators;Be.prototype.isRequired;Be.prototype.splitPath=function(){if(this._presplitPath!=null)return this._presplitPath;if(this.path!=null)return this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath};Be.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=r=>r),this._cast=e,this._cast)};Be.prototype.castFunction=function(e,r){return arguments.length===0?this._castFunction:(e===!1&&(e=this.constructor._defaultCaster||(n=>n)),typeof e=="string"?(this._castErrorMessage=e,this._castFunction):(e!=null&&(this._castFunction=e),r!=null&&(this._castErrorMessage=r),this._castFunction))};Be.prototype.cast=function(){throw new Error("Base SchemaType class does not implement a `cast()` function")};Be.set=function(e,r){this.hasOwnProperty("defaultOptions")||(this.defaultOptions=Object.assign({},this.defaultOptions)),this.defaultOptions[e]=r};Be.get=function(t){this.getters=this.hasOwnProperty("getters")?this.getters:[],this.getters.push(t)};Be.prototype.default=function(t){if(arguments.length===1){if(t===void 0){this.defaultValue=void 0;return}if(t!=null&&t.instanceOfSchema)throw new ld("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=t,this.defaultValue}else arguments.length>1&&(this.defaultValue=[...arguments]);return this.defaultValue};Be.prototype.index=function(t){return this._index=t,Dc.expires(this._index),this};Be.prototype.unique=function(e,r){if(this._index===!1){if(!e)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}return!this.options.hasOwnProperty("index")&&e===!1?this:(this._index==null||this._index===!0?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.unique=!!e,typeof r=="string"&&(this._duplicateKeyErrorMessage=r),this)};Be.prototype.text=function(t){if(this._index===!1){if(!t)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}return!this.options.hasOwnProperty("index")&&t===!1?this:(this._index===null||this._index===void 0||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.text=t,this)};Be.prototype.sparse=function(t){if(this._index===!1){if(!t)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}return!this.options.hasOwnProperty("index")&&t===!1?this:(this._index==null||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.sparse=t,this)};Be.prototype.immutable=function(t){return this.$immutable=t,qC(this),this};Be.prototype.transform=function(t){return this.options.transform=t,this};Be.prototype.set=function(t){if(typeof t!="function")throw new TypeError("A setter must be a function.");return this.setters.push(t),this};Be.prototype.get=function(t){if(typeof t!="function")throw new TypeError("A getter must be a function.");return this.getters.push(t),this};Be.prototype.validateAll=function(t){for(let e=0;e<t.length;e++)this.validate(t[e]);return this};Be.prototype.validate=function(t,e,r){if(typeof t=="function"||t&&Dc.getFunctionName(t.constructor)==="RegExp"){let o;return typeof e=="function"?(o={validator:t,message:e},o.type=r||"user defined"):e instanceof Object&&!r?(o=LC(e)?Object.assign({},e):Pg(e),o.message||(o.message=o.msg),o.validator=t,o.type=o.type||"user defined"):(e==null&&(e=ld.messages.general.default),r||(r="user defined"),o={message:e,type:r,validator:t}),this.validators.push(o),this}let n,i,s;for(n=0,i=arguments.length;n<i;n++){if(s=arguments[n],!Dc.isPOJO(s)){let o="Invalid validator. Received ("+typeof s+") "+s+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw new Error(o)}this.validate(s.validator,s)}return this};Be.prototype.required=function(t,e){let r={};if(arguments.length>0&&t==null)return this.validators=this.validators.filter(function(s){return s.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(typeof t=="object"&&(r=t,e=r.message||e,t=t.isRequired),t===!1)return this.validators=this.validators.filter(function(s){return s.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;let n=this;this.isRequired=!0,this.requiredValidator=function(s){let o=this&&this.$__&&this.$__.cachedRequired;if(o!=null&&!this.$__isSelected(n.path)&&!this[hye](n.path))return!0;if(o!=null&&n.path in o){let u=o[n.path]?n.checkRequired(s,this):!0;return delete o[n.path],u}else if(typeof t=="function")return t.apply(this)?n.checkRequired(s,this):!0;return n.checkRequired(s,this)},this.originalRequiredValue=t,typeof t=="string"&&(e=t,t=void 0);let i=e||ld.messages.general.required;return this.validators.unshift(Object.assign({},r,{validator:this.requiredValidator,message:i,type:"required"})),this};Be.prototype.ref=function(t){return this.options.ref=t,this};Be.prototype.getDefault=function(t,e,r){let n;if(typeof this.defaultValue=="function"?this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid"?n=this.defaultValue.call(t):n=this.defaultValue.call(t,t):n=this.defaultValue,n!=null){if(typeof n=="object"&&(!this.options||!this.options.shared)&&(n=Pg(n)),r&&r.skipCast)return this._applySetters(n,t);let i=this.applySetters(n,t,e,void 0,dye);return i&&!Array.isArray(i)&&i.$isSingleNested&&(i.$__parent=t),i}return n};Be.prototype._applySetters=function(t,e,r,n,i){let s=t;if(r)return s;let o=this.setters;for(let u=o.length-1;u>=0;u--)s=o[u].call(e,s,n,this,i);return s};Be.prototype._castNullish=function(e){return e};Be.prototype.applySetters=function(t,e,r,n,i){let s=this._applySetters(t,e,r,n,i);return s==null?this._castNullish(s):(s=this.cast(s,e,r,n,i),s)};Be.prototype.applyGetters=function(t,e){let r=t,n=this.getters,i=n.length;if(i===0)return r;for(let s=0;s<i;++s)r=n[s].call(e,r,this);return r};Be.prototype.select=function(e){return this.selected=!!e,this};Be.prototype.doValidate=function(t,e,r,n){let i=!1,s=this.path;if(typeof e!="function")throw new TypeError(`Must pass callback function to doValidate(), got ${typeof e}`);let o=this.validators.filter(c=>typeof c=="object"&&c!==null),u=o.length;if(!u)return e(null);for(let c=0,l=o.length;c<l&&!i;++c){let h=o[c],d=h.validator,p,m=LC(h)?Object.assign({},h):Pg(h);if(m.path=n&&n.path?n.path:s,m.fullPath=this.$fullPath,m.value=t,d instanceof RegExp){a(d.test(t),m,r);continue}if(typeof d=="function"){if(t===void 0&&d!==this.requiredValidator){a(!0,m,r);continue}try{m.propsParameter?p=d.call(r,t,m):p=d.call(r,t)}catch(g){p=!1,m.reason=g,g.message&&(m.message=g.message)}p!=null&&typeof p.then=="function"?p.then(function(g){a(g,m,r)},function(g){m.reason=g,m.message=g.message,p=!1,a(p,m,r)}):a(p,m,r)}}function a(c,l,h){if(!i)if(c===void 0||c)--u<=0&&W$(function(){e(null)});else{let d=l.ErrorConstructor||UC;i=new d(l,h),i[J$]=!0,W$(function(){e(i)})}}};function G$(t,e){if(t!==void 0&&!t){let r=e.ErrorConstructor||UC,n=new r(e);return n[J$]=!0,n}}Be.prototype.doValidateSync=function(t,e,r){let n=this.path;if(!this.validators.length)return null;let s=this.validators;if(t===void 0)if(this.validators.length!==0&&this.validators[0].type==="required")s=[this.validators[0]];else return null;let o=null,u=0,a=s.length;for(u=0;u<a;++u){let c=s[u];if(c===null||typeof c!="object")continue;let l=c.validator,h=LC(c)?Object.assign({},c):Pg(c);h.path=r&&r.path?r.path:n,h.fullPath=this.$fullPath,h.value=t;let d=!1;if(!lye(l)){if(l instanceof RegExp){o=G$(l.test(t),h);continue}if(typeof l=="function"){try{h.propsParameter?d=l.call(e,t,h):d=l.call(e,t)}catch(p){d=!1,h.reason=p}if(!(d!=null&&typeof d.then=="function")&&(o=G$(d,h),o))break}}}return o};Be._isRef=function(t,e,r,n){let i=n&&t.options&&(t.options.ref||t.options.refPath);if(!i&&r&&r.$__!=null){let s=r.$__fullPath(t.path,!0),o=r.ownerDocument();i=s!=null&&o.$populated(s)||r.$populated(t.path)}return i?e==null||!Buffer.isBuffer(e)&&e._bsontype!=="Binary"&&Dc.isObject(e)?!0:n:!1};Be.prototype._castRef=function(e,r,n){if(e==null)return e;if(e.$__!=null)return e.$__.wasPopulated=e.$__.wasPopulated||{value:e._doc._id},e;if(Buffer.isBuffer(e)||!Dc.isObject(e)){if(n)return e;throw new jC(this.instance,e,this.path,null,this)}let i=r.$__fullPath(this.path,!0),o=r.ownerDocument().$populated(i,!0),u=e;if(!r.$__.populated||!r.$__.populated[i]||!r.$__.populated[i].options||!r.$__.populated[i].options.options||!r.$__.populated[i].options.options.lean){let a=o?o.options[H$]:r.constructor.db.model(this.options.ref);u=new a(e),u.$__.wasPopulated={value:u._doc._id,options:{[H$]:a}}}return u};function K$(t,e){return this.castForQuery(null,t,e)}function pye(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}function Y$(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return Array.isArray(n)&&n.length===0?n:r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}Be.prototype.$conditionalHandlers={$all:pye,$eq:K$,$in:Y$,$ne:K$,$nin:Y$,$exists:aye,$type:cye};Be.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t);return n.call(this,e,r)}try{return this.applySetters(e,r)}catch(i){throw i instanceof jC&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};Be.checkRequired=function(t){return arguments.length!==0&&(this._checkRequired=t),this._checkRequired};Be.prototype.checkRequired=function(t){return t!=null};Be.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,t,this.instance);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),this.defaultValue!==void 0&&(e.defaultValue=this.defaultValue),this.$immutable!==void 0&&this.options.immutable===void 0&&(e.$immutable=this.$immutable,qC(e)),this._index!==void 0&&(e._index=this._index),this.selected!==void 0&&(e.selected=this.selected),this.isRequired!==void 0&&(e.isRequired=this.isRequired),this.originalRequiredValue!==void 0&&(e.originalRequiredValue=this.originalRequiredValue),e.getters=this.getters.slice(),e.setters=this.setters.slice(),e};Be.prototype.getEmbeddedSchemaType=function(){return this.$embeddedSchemaType};Be.prototype._duplicateKeyErrorMessage=null;X$.exports=Ng=Be;Ng.CastError=jC;Ng.ValidatorError=UC});var VC=y((WNe,Z$)=>{"use strict";f();var ks=Qi(),Zn=class{constructor(e){Object.assign(this,e),e!=null&&e.options!=null&&(this.options=Object.assign({},e.options))}};Object.defineProperty(Zn.prototype,"ref",ks);Object.defineProperty(Zn.prototype,"refPath",ks);Object.defineProperty(Zn.prototype,"localField",ks);Object.defineProperty(Zn.prototype,"foreignField",ks);Object.defineProperty(Zn.prototype,"justOne",ks);Object.defineProperty(Zn.prototype,"count",ks);Object.defineProperty(Zn.prototype,"match",ks);Object.defineProperty(Zn.prototype,"options",ks);Object.defineProperty(Zn.prototype,"skip",ks);Object.defineProperty(Zn.prototype,"limit",ks);Object.defineProperty(Zn.prototype,"perDocumentLimit",ks);Z$.exports=Zn});var Rg=y((GNe,ek)=>{"use strict";f();ek.exports=function(e,r,n){return e==null?e:(e._doc!=null&&(e=e._doc),arguments.length>=3?typeof e!="object"||n===void 0?void 0:(e instanceof Map?e.set(r,n):e[r]=n,n):r==="$*"?e instanceof Map?Array.from(e.values()):Object.keys(e).map(i=>e[i]):e instanceof Map?e.get(r):e[r])}});var zC=y((YNe,ik)=>{"use strict";f();var mye=Fe(),yye=oC(),tk=Rg(),rk=_i(),gye=require("util"),_ye=Ce(),nk=/(\.\d+$|\.\d+\.)/g;ik.exports=function(e,r,n,i,s){if(e==null)return[];if(typeof e=="string"&&s!=null&&yye(s,e))throw new mye("refPath `"+e+"` must not be excluded in projection, got "+gye.inspect(s));if(nk.test(n)){let a=n.split(nk);if(a[a.length-1]==="")throw new Error("Can't populate individual element in an array");let c="",l=e;for(let p=0;p<a.length;p+=2){let m=a[p];if(l.startsWith(m+"."))c+=l.substring(0,m.length)+a[p+1],l=l.substring(m.length+1);else if(p===a.length-1){c+=l,l="";break}else throw new Error("Could not normalize ref path, chunk "+m+" not in populated path")}let h=rk.get(c,r,tk),d=Array.isArray(h)?h:[h];return d=_ye.array.flatten(d),d}let o=rk.get(e,r,tk),u;return i!=null&&i.virtuals.hasOwnProperty(e)?u=[i.virtuals[e].applyGetters(void 0,r)]:u=Array.isArray(o)?o:[o],u}});var xg=y((JNe,sk)=>{"use strict";f();var Eye=zC(),Aye=Ce(),wye=ye().modelSymbol;function uu(t,e){this.path=e,this.getters=[],this.setters=[],this.options=Object.assign({},t)}uu.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;let e="$"+this.path;this.getters.push(function(){return this.$locals[e]}),this.setters.push(function(r){this.$locals[e]=r})};uu.prototype.clone=function(){let t=new uu(this.options,this.path);return t.getters=[].concat(this.getters),t.setters=[].concat(this.setters),t};uu.prototype.get=function(t){return this.getters.push(t),this};uu.prototype.set=function(t){return this.setters.push(t),this};uu.prototype.applyGetters=function(t,e){Aye.hasUserDefinedProperty(this.options,["ref","refPath"])&&e.$$populatedVirtuals&&e.$$populatedVirtuals.hasOwnProperty(this.path)&&(t=e.$$populatedVirtuals[this.path]);let r=t;for(let n of this.getters)r=n.call(e,r,this,e);return r};uu.prototype.applySetters=function(t,e){let r=t;for(let n of this.setters)r=n.call(e,r,this,e);return r};uu.prototype._getModelNamesForPopulate=function(e){if(this.options.refPath)return Eye(this.options.refPath,e,this.path);let r=null;return typeof this.options.ref=="function"&&!this.options.ref[wye]?r=this.options.ref.call(e,e):r=this.options.ref,r!=null&&!Array.isArray(r)?[r]:r};sk.exports=uu});var WC=y((ZNe,ok)=>{"use strict";f();ok.exports=function(e){let r={_id:{auto:!0}};r._id[e.options.typeKey]="ObjectId",e.add(r)}});var HC=y((tRe,uk)=>{"use strict";f();uk.exports=function(e,r){let n=e.discriminatorMapping&&e.discriminatorMapping.value;if(n&&!("sparse"in r)){let i=e.options.discriminatorKey;r.partialFilterExpression=r.partialFilterExpression||{},r.partialFilterExpression[i]=n}return r}});var ck=y((nRe,ak)=>{"use strict";f();var GC=Gt(),Sye=sa(),bye=HC();ak.exports=function(e){let r=[],n=new WeakMap,i=e.constructor.indexTypes,s=new Map;return o(e),r;function o(a,c,l){if(n.has(a))return;n.set(a,!0),c=c||"";let h=Object.keys(a.paths);for(let d of h){let p=a.paths[d];if(l!=null&&l.paths[d])continue;if(p._duplicateKeyErrorMessage!=null&&(a._duplicateKeyErrorMessagesByPath=a._duplicateKeyErrorMessagesByPath||{},a._duplicateKeyErrorMessagesByPath[d]=p._duplicateKeyErrorMessage),p.$isMongooseDocumentArray||p.$isSingleNested){if(GC(p,"options.excludeIndexes")!==!0&&GC(p,"schemaOptions.excludeIndexes")!==!0&&GC(p,"schema.options.excludeIndexes")!==!0&&o(p.schema,c+d+"."),p.schema.discriminators!=null){let g=p.schema.discriminators,_=Object.keys(g);for(let w of _)o(g[w],c+d+".",p.schema)}if(p.$isMongooseDocumentArray)continue}let m=p._index||p.caster&&p.caster._index;if(m!==!1&&m!==null&&m!==void 0){let g={},_=Sye(m),w=_?m:{},S=typeof m=="string"?m:_?m.type:!1;if(S&&i.indexOf(S)!==-1)g[c+d]=S;else if(w.text)g[c+d]="text",delete w.text;else{let O=!1;m==="descending"||m==="desc"?O=!0:m==="ascending"||m==="asc"?O=!1:O=Number(m)===-1,g[c+d]=O?-1:1}delete w.type,"background"in w||(w.background=!0),a.options.autoIndex!=null&&(w._autoIndex=a.options.autoIndex);let C=w&&w.name;typeof C=="string"?s.has(C)?Object.assign(s.get(C),g):(r.push([g,w]),s.set(C,g)):(r.push([g,w]),s.set(C,g))}}n.delete(a),c?u(a,c):(a._indexes.forEach(function(d){let p=d[1];"background"in p||(p.background=!0),bye(a,p)}),r=r.concat(a._indexes))}function u(a,c){let l=a._indexes,h=l.length;for(let d=0;d<h;++d){let p=l[d][0],m=l[d][1],g=Object.keys(p),_=g.length,w={};for(let C=0;C<_;++C){let O=g[C];w[c+O]=p[O]}let S=Object.assign({},m);if(m!=null&&m.partialFilterExpression!=null){S.partialFilterExpression={};let C=m.partialFilterExpression;for(let O of Object.keys(C))S.partialFilterExpression[c+O]=C[O]}r.push([w,S])}}}});var KC=y((sRe,lk)=>{"use strict";f();lk.exports=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest";break}return e}});var hk=y((uRe,fk)=>{"use strict";f();fk.exports=function(e){return!(!e.paths.id&&e.paths._id&&e.options.id)||e.aliases&&e.aliases.id||e.virtual("id").get(Oye),e};function Oye(){return this._id!=null?this._id.toString():null}});var pk=y((cRe,dk)=>{"use strict";f();dk.exports=function(e,r){let n=Object.keys(e),i=Object.keys(r);if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++){let o=n[s];if(o!==i[s]||e[o]!==r[o])return!1}return!0}});var yk=y((fRe,mk)=>{"use strict";f();mk.exports=function(e,r,n,i){return i.justOne||i.count?(e[r]=Array.isArray(n)?n[0]:n,typeof e[r]!="object"&&(e[r]=i.count?n:null)):(e[r]=Array.isArray(n)?n:n==null?[]:[n],e[r]=e[r].filter(function(s){return s&&typeof s=="object"})),e[r]}});var fd=y((dRe,gk)=>{"use strict";f();gk.exports=function(e){return e.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}});var Fg=y((mRe,_k)=>{"use strict";f();_k.exports=Cye;function Cye(t,e){return t==null?null:typeof t=="boolean"?e:typeof t[e]=="boolean"?t[e]?e:null:e in t?t[e]:e}});var QC=y((gRe,Ek)=>{"use strict";f();var Tye=fd(),au=Fg();Ek.exports=Mc;function Mc(t,e,r){if(e==null)return;if(Object.keys(e).some(u=>u[0]==="$")){if(e.$push&&o(e.$push),e.$addToSet&&o(e.$addToSet),e.$set!=null){let u=Object.keys(e.$set);for(let a of u)YC(r,a,e.$set,t)}if(e.$setOnInsert!=null){let u=Object.keys(e.$setOnInsert);for(let a of u)YC(r,a,e.$setOnInsert,t)}}let s=Object.keys(e).filter(u=>u[0]!=="$");for(let u of s)YC(r,u,e,t);function o(u){for(let a of Object.keys(u)){let c=r.path(a.replace(/\.\$\./i,".").replace(/.\$$/,""));if(u[a]&&c&&c.$isMongooseDocumentArray&&c.schema.options.timestamps){let l=c.schema.options.timestamps,h=au(l,"createdAt"),d=au(l,"updatedAt");u[a].$each?u[a].$each.forEach(function(p){d!=null&&(p[d]=t),h!=null&&(p[h]=t),Mc(t,p,c.schema)}):(d!=null&&(u[a][d]=t),h!=null&&(u[a][h]=t),Mc(t,u[a],c.schema))}}}}function Dye(t,e,r){let n=e.schema.options.timestamps,i=t.length;if(!n){for(let u=0;u<i;++u)Mc(r,t[u],e.schema);return}let s=au(n,"createdAt"),o=au(n,"updatedAt");for(let u=0;u<i;++u)o!=null&&(t[u][o]=r),s!=null&&(t[u][s]=r),Mc(r,t[u],e.schema)}function Mye(t,e,r){let n=e.schema.options.timestamps;if(!n){Mc(r,t,e.schema);return}let i=au(n,"createdAt"),s=au(n,"updatedAt");s!=null&&(t[s]=r),i!=null&&(t[i]=r),Mc(r,t,e.schema)}function YC(t,e,r,n){let i=Tye(e),s=t.path(i);if(!s)return;let o=[],u=i.split(".");for(let a=u.length-1;a>0;--a){let c=t.path(u.slice(0,a).join("."));c!=null&&(c.$isMongooseDocumentArray||c.$isSingleNested)&&o.push({parentPath:e.split(".").slice(0,a).join("."),parentSchemaType:c})}if(Array.isArray(r[e])&&s.$isMongooseDocumentArray)Dye(r[e],s,n);else if(r[e]&&s.$isSingleNested)Mye(r[e],s,n);else if(o.length>0)for(let a of o){let c=a.parentPath,l=a.parentSchemaType,h=l.schema.options.timestamps,d=au(h,"updatedAt");if(!(!h||d==null)){if(l.$isSingleNested)r[c+"."+d]=n;else if(l.$isMongooseDocumentArray){let p=e.substring(c.length+1);if(/^\d+$/.test(p)){r[c+"."+p][d]=n;continue}let m=p.indexOf(".");p=m!==-1?p.substring(0,m):p,r[c+"."+p+"."+d]=n}}}else if(s.schema!=null&&s.schema!=t&&r[e]){let a=s.schema.options.timestamps,c=au(a,"createdAt"),l=au(a,"updatedAt");if(!a)return;l!=null&&(r[e][l]=n),c!=null&&(r[e][c]=n)}}});var JC=y((ERe,Ak)=>{"use strict";f();var vye=Gt();Ak.exports=Bye;function Bye(t,e,r,n,i,s){let o=n,u=o,a=vye(i,"timestamps",!0);if(!a||o==null)return n;let c=a!=null&&a.createdAt===!1,l=a!=null&&a.updatedAt===!1;if(s)return n&&n.$set&&(n=n.$set,o.$set={},u=o.$set),!l&&r&&!n[r]&&(u[r]=t),!c&&e&&!n[e]&&(u[e]=t),o;if(n=n||{},Array.isArray(o))return r==null||o.push({$set:{[r]:t}}),o;if(o.$set=o.$set||{},!l&&r&&(!n.$currentDate||!n.$currentDate[r])){let h=!1;if(r.indexOf(".")!==-1){let d=r.split(".");for(let p=1;p<d.length;++p){let m=d.slice(-p).join("."),g=d.slice(0,-p).join(".");if(n[g]!=null){n[g][m]=t,h=!0;break}else if(n.$set&&n.$set[g]){n.$set[g][m]=t,h=!0;break}}}h||(o.$set[r]=t),o.hasOwnProperty(r)&&delete o[r]}if(!c&&e){n[e]&&delete n[e],n.$set&&n.$set[e]&&delete n.$set[e];let h=!1;if(e.indexOf(".")!==-1){let d=e.split(".");for(let p=1;p<d.length;++p){let m=d.slice(-p).join("."),g=d.slice(0,-p).join(".");if(n[g]!=null){n[g][m]=t,h=!0;break}else if(n.$set&&n.$set[g]){n.$set[g][m]=t,h=!0;break}}}h||(o.$setOnInsert=o.$setOnInsert||{},o.$setOnInsert[e]=t)}return Object.keys(o.$set).length===0&&delete o.$set,o}});var Sk=y((wRe,wk)=>{"use strict";f();wk.exports=function(e,r,n,i,s){let o=r!=null&&r.updatedAt===!1,u=r!=null&&r.createdAt===!1,a=n!=null?n():e.ownerDocument().constructor.base.now();if(!u&&(e.isNew||e.$isSubdocument)&&i&&!e.$__getValue(i)&&e.$__isSelected(i)&&e.$set(i,a,void 0,{overwriteImmutable:!0}),!o&&s&&(e.isNew||e.$isModified())){let c=a;e.isNew&&i!=null&&(c=e.$__getValue(i)),e.$set(s,c)}}});var Tk=y((bRe,Ck)=>{"use strict";f();var Iye=QC(),Pye=JC(),Nye=Gt(),bk=Fg(),Rye=Sk(),xye=Sc(),Ok=new Set(["replaceOne","findOneAndReplace"]);Ck.exports=function(e,r){let n=e.childSchemas.find(i);function i(h){return!!h.schema.options.timestamps}if(!r&&!n)return;let s=bk(r,"createdAt"),o=bk(r,"updatedAt"),u=r!=null&&r.hasOwnProperty("currentTime")?r.currentTime:null,a={};if(e.$timestamps={createdAt:s,updatedAt:o},s&&!e.paths[s]){let h=e.base!=null?e.base.get("timestamps.createdAt.immutable"):null,d=h??!0;a[s]={[e.options.typeKey||"type"]:Date,immutable:d}}o&&!e.paths[o]&&(a[o]=Date),e.add(a),e.pre("save",function(d){let p=Nye(this,"$__.saveOptions.timestamps");if(p===!1)return d();Rye(this,p,u,s,o),d()}),e.methods.initializeTimestamps=function(){let h=u!=null?u():this.constructor.base.now();if(s&&!this.get(s)&&this.$set(s,h),o&&!this.get(o)&&this.$set(o,h),this.$isSubdocument)return this;let d=this.$getAllSubdocs();for(let p of d)p.initializeTimestamps&&p.initializeTimestamps();return this},l[xye.builtInMiddleware]=!0;let c={query:!0,model:!1};e.pre("findOneAndReplace",c,l),e.pre("findOneAndUpdate",c,l),e.pre("replaceOne",c,l),e.pre("update",c,l),e.pre("updateOne",c,l),e.pre("updateMany",c,l);function l(h){let d=u!=null?u():this.model.base.now();Ok.has(this.op)&&this.getUpdate()==null&&this.setUpdate({}),Pye(d,s,o,this.getUpdate(),this._mongooseOptions,Ok.has(this.op)),Iye(d,this.getUpdate(),this.model.schema),h()}}});var Mk=y((CRe,Dk)=>{"use strict";f();var Fye=Fe(),$ye=require("util");Dk.exports=kye;function kye(t,e){if(typeof t!="string"&&typeof t!="function")throw new Fye('Invalid ref at path "'+e+'". Got '+$ye.inspect(t,{depth:0}))}});var $g=y(H1=>{"use strict";f();var vk=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]);H1.queryOperations=vk;var qye=vk.concat(["validate"]);H1.queryMiddlewareFunctions=qye;var Lye=["aggregate"];H1.aggregateMiddlewareFunctions=Lye;var jye=["bulkWrite","createCollection","insertMany"];H1.modelMiddlewareFunctions=jye;var Uye=["validate","save","remove","updateOne","deleteOne","init"];H1.documentMiddlewareFunctions=Uye});var kg=y((vRe,Bk)=>{"use strict";f();var Vye=Sc(),zye=ig();Bk.exports=hd;hd.middlewareFunctions=["deleteOne","save","validate","remove","updateOne","init"];var Wye=new Set(hd.middlewareFunctions.flatMap(t=>[t,`$__${t}`]));function hd(t,e,r){r=r||{};let n={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},i=r.decorateDoc?t:t.prototype;t.$appliedHooks=!0;for(let c of Object.keys(e.paths)){let l=e.paths[c],h=null;if(l.$isSingleNested)h=l.caster;else if(l.$isMongooseDocumentArray)h=l.Constructor;else continue;if(!h.$appliedHooks&&(hd(h,l.schema,{...r,isChildSchema:!0}),h.discriminators!=null)){let d=Object.keys(h.discriminators);for(let p of d)hd(h.discriminators[p],h.discriminators[p].schema,r)}}let s=e.s.hooks.filter(c=>c.name==="updateOne"||c.name==="deleteOne"?!!c.document:c.name==="remove"||c.name==="init"?c.document==null||!!c.document:c.query!=null||c.document!=null?c.document!==!1:!0).filter(c=>e.methods[c.name]?!c.fn[Vye.builtInMiddleware]:!0);t._middleware=s,i.$__originalValidate=i.$__originalValidate||i.$__validate;let o=r&&r.isChildSchema?["save","validate","deleteOne"]:["save","validate"];for(let c of o){let l=c==="validate"?"$__originalValidate":`$__${c}`,h=s.createWrapper(c,i[l],null,n);i[`$__${c}`]=h}i.$__init=s.createWrapperSync("init",i.$__init,null,n);let u=Object.keys(e.methods),a=Object.assign({},n,{checkForPromise:!0});for(let c of u){if(Wye.has(c)||!s.hasHooks(c))continue;let l=i[c];i[c]=function(){let h=Array.prototype.slice.call(arguments),d=h.slice(-1).pop(),p=typeof d=="function"?h.slice(0,h.length-1):h;return zye(d,m=>this[`$__${c}`].apply(this,p.concat([m])),t.events)},i[`$__${c}`]=s.createWrapper(c,l,null,a)}}});var qg=y((IRe,xk)=>{"use strict";f();var Hye=bc(),Gye=Fe(),Ik=$t(),Kye=Ce().deepEqual,Yye=Cn(),Qye=yg(),Pk=require("util"),Jye=_c(),XC=Lr(),Xye=hg(),Nk=ye().populateModelSymbol;var qs=class extends Map{constructor(e,r,n,i){Yye(e)==="Object"&&(e=Object.keys(e).reduce((s,o)=>s.concat([[o,e[o]]]),[])),super(e),this.$__parent=n!=null&&n.$__!=null?n:null,this.$__path=r,this.$__schemaType=i??new Hye(r),this.$__runDeferred()}$init(e,r){Rk(e),super.set(e,r),r!=null&&r.$isSingleNested&&(r.$basePath=this.$__path+"."+e)}$__set(e,r){super.set(e,r)}get(e,r){return XC(e,"ObjectId")&&(e=e.toString()),r=r||{},r.getters===!1?super.get(e):this.$__schemaType.applyGetters(super.get(e),this.$__parent)}set(e,r){if(XC(e,"ObjectId")&&(e=e.toString()),Rk(e),r=Qye(r),this.$__schemaType==null){this.$__deferred=this.$__deferred||[],this.$__deferred.push({key:e,value:r});return}let n,i=this.$__parent,s=i!=null&&i.$__&&i.$__.populated?i.$populated(u.call(this),!0)||i.$populated(this.$__path,!0):null,o=this.get(e);if(s!=null){if(this.$__schemaType.$isSingleNested)throw new Gye(`Cannot manually populate single nested subdoc underneath Map at path "${this.$__path}". Try using an array instead of a Map.`);Array.isArray(r)&&this.$__schemaType.$isMongooseArray?r=r.map(a=>(a.$__==null&&(a=new s.options[Nk](a)),a.$__.wasPopulated={value:a._doc._id},a)):r!=null&&(r.$__==null&&(r=new s.options[Nk](r)),r.$__.wasPopulated={value:r._doc._id})}else try{let a=this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested?{path:u.call(this)}:null;r=this.$__schemaType.applySetters(r,this.$__parent,!1,this.get(e),a)}catch(a){if(this.$__parent!=null&&this.$__parent.$__!=null){this.$__parent.invalidate(u.call(this),a);return}throw a}if(super.set(e,r),i!=null&&i.$__!=null&&!Kye(r,o)){let a=u.call(this);i.markModified(a),(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested)&&Xye(i,a)}function u(){return n||(n=this.$__path+"."+e,n)}}clear(){super.clear();let e=this.$__parent;e?.markModified(this.$__path)}delete(e){return XC(e,"ObjectId")&&(e=e.toString()),this.set(e,void 0),super.delete(e)}toBSON(){return new Map(this)}toObject(e){if(e&&e.flattenMaps){let r={},n=this.keys();for(let i of n)r[i]=Ik(this.get(i),e);return r}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON(e){if(typeof(e&&e.flattenMaps)!="boolean"||e.flattenMaps){let r={},n=this.keys();for(let i of n)r[i]=Ik(this.get(i),e);return r}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(this.$__deferred){for(let e of this.$__deferred)this.set(e.key,e.value);this.$__deferred=null}}};Pk.inspect.custom&&Object.defineProperty(qs.prototype,Pk.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:qs.prototype.inspect});Object.defineProperty(qs.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(qs.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(qs.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(qs.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(qs.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0});Object.defineProperty(qs.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0});function Rk(t){let e=typeof t;if(e!=="string")throw new TypeError(`Mongoose maps only support string keys, got ${e}`);if(t.startsWith("$"))throw new Error(`Mongoose maps do not support keys that start with "$", got "${t}"`);if(t.includes("."))throw new Error(`Mongoose maps do not support keys that contain ".", got "${t}"`);if(Jye.has(t))throw new Error(`Mongoose maps do not support reserved key name "${t}"`)}xk.exports=qs});var $k=y((NRe,Fk)=>{"use strict";f();Fk.exports=vi().UUID});var G1=y(Ls=>{"use strict";f();Ls.Array=mC();Ls.Buffer=rd();Ls.Document=Ls.Embedded=V1();Ls.DocumentArray=Tc();Ls.Decimal128=k2();Ls.ObjectId=tu();Ls.Map=qg();Ls.Subdocument=_g();Ls.UUID=$k()});var qk=y(($Re,kk)=>{"use strict";f();var Zye=gi(),K1=class extends Zye{},ZC=Qi();Object.defineProperty(K1.prototype,"enum",ZC);Object.defineProperty(K1.prototype,"of",ZC);Object.defineProperty(K1.prototype,"castNonArrays",ZC);kk.exports=K1});var jk=y((qRe,Lk)=>{"use strict";f();Lk.exports=e9;function e9(t){if(!Array.isArray(t))return{min:0,max:0,containsNonArrayItem:!0};if(t.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(t.length===1&&!Array.isArray(t[0]))return{min:1,max:1,containsNonArrayItem:!1};let e=e9(t[0]);for(let r=1;r<t.length;++r){let n=e9(t[r]);n.min<e.min&&(e.min=n.min),n.max>e.max&&(e.max=n.max),e.containsNonArrayItem=e.containsNonArrayItem||n.containsNonArrayItem}return e.min=e.min+1,e.max=e.max+1,e}});var dd=y((jRe,Vk)=>{"use strict";f();var Uk=require("assert");Vk.exports=function(e){if(e==null)return e;if(e==="")return null;if((typeof e=="string"||typeof e=="boolean")&&(e=Number(e)),Uk.ok(!isNaN(e)),e instanceof Number)return e.valueOf();if(typeof e=="number")return e;if(!Array.isArray(e)&&typeof e.valueOf=="function")return Number(e.valueOf());if(e.toString&&!Array.isArray(e)&&e.toString()==Number(e))return Number(e);Uk.ok(!1)}});var t9=y((VRe,zk)=>{"use strict";f();zk.exports=function(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e))for(let r=e.length-1;r>=0;--r)e[r]===void 0&&e.splice(r,1);for(let r of Object.keys(e))e[r]===void 0&&delete e[r];return e}});var Gk=y((WRe,Hk)=>{"use strict";f();var Y1=cn(),Wk=oa(),Lg=dd(),e2e=t9(),t2e=new Set(["$and","$or"]),r2e=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),n2e=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),i2e=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),s2e=new Set(["$arrayElemAt","$first","$last"]),o2e=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),u2e=new Set(["$not"]);Hk.exports=function(e,r,n){if(typeof e!="object"||e===null)throw new Error("`$expr` must be an object");return Zi(e,r,n)};function Zi(t,e,r){if(pd(t)||t===null)return t;t.$cond!=null?Array.isArray(t.$cond)?t.$cond=t.$cond.map(i=>Zi(i,e,r)):(t.$cond.if=Zi(t.$cond.if,e,r),t.$cond.then=Zi(t.$cond.then,e,r),t.$cond.else=Zi(t.$cond.else,e,r)):t.$ifNull!=null?t.$ifNull.map(i=>Zi(i,e,r)):t.$switch!=null&&(Array.isArray(t.$switch.branches)&&(t.$switch.branches=t.$switch.branches.map(i=>Zi(i,e,r))),"default"in t.$switch&&(t.$switch.default=Zi(t.$switch.default,e,r)));let n=Object.keys(t);for(let i of n)t2e.has(i)?t[i]=t[i].map(s=>Zi(s,e,r)):r2e.has(i)?t[i]=l2e(t[i],e,r):n2e.has(i)?t[i]=c2e(t[i],e,r):i2e.has(i)?t[i]=r9(t[i],e,r):u2e.has(i)&&(t[i]=Zi(t[i],e,r));if(t.$in&&(t.$in=a2e(t.$in,e,r)),t.$size&&(t.$size=r9(t.$size,e,r)),t.$round){let i=t.$round;if(!Array.isArray(i)||i.length<1||i.length>2)throw new Y1("Array",i,"$round");t.$round=i.map(s=>r9(s,e,r))}return e2e(t),t}function r9(t){if(!jg(t))return t;try{return Lg(t)}catch{throw new Y1("Number",t)}}function a2e(t,e,r){let n=t[1];if(!pd(n))return t;let i=t[0],s=e.path(n.slice(1));if(s===null){if(r===!1)return t;if(r==="throw")throw new Wk("$in");return}if(!s.$isMongooseArray)throw new Error("Path must be an array for $in");return[s.$isMongooseDocumentArray?s.$embeddedSchemaType.cast(i):s.caster.cast(i),n]}function c2e(t){if(!Array.isArray(t)){if(!jg(t))return t;try{return Lg(t)}catch{throw new Y1("Number",t)}}return t.map(e=>{if(!jg(e))return e;try{return Lg(e)}catch{throw new Y1("Number",e)}})}function l2e(t,e,r){if(!Array.isArray(t)||t.length!==2)throw new Error("Comparison operator must be an array of length 2");t[0]=Zi(t[0],e,r);let n=t[0];if(jg(t[1])){let i=null,s=null,o=null;if(pd(n))i=n.slice(1),s=e.path(i);else if(typeof n=="object"&&n!=null)for(let a of Object.keys(n))o2e.has(a)&&pd(n[a])?(i=n[a].slice(1)+"."+a,o=Lg):s2e.has(a)&&pd(n[a])&&(i=n[a].slice(1)+"."+a,s=e.path(n[a].slice(1)),s!=null&&(s.$isMongooseDocumentArray?s=s.$embeddedSchemaType:s.$isMongooseArray&&(s=s.caster)));let u=typeof t[1]=="object"&&t[1]!=null&&t[1].$literal!=null;if(s!=null)u?t[1]={$literal:s.cast(t[1].$literal)}:t[1]=s.cast(t[1]);else if(o!=null)if(u)try{t[1]={$literal:o(t[1].$literal)}}catch{throw new Y1(o.name.replace(/^cast/,""),t[1],i+".$literal")}else try{t[1]=o(t[1])}catch{throw new Y1(o.name.replace(/^cast/,""),t[1],i)}else{if(i!=null&&r===!0)return;if(i!=null&&r==="throw")throw new Wk(i)}}else t[1]=Zi(t[1]);return t}function pd(t){return typeof t=="string"&&t[0]==="$"}function jg(t){return typeof t=="string"&&t[0]==="$"?!1:typeof t=="object"&&t!==null&&Object.keys(t).find(e=>e[0]==="$")?t.$literal!=null:!0}});var Ug=y((GRe,Kk)=>{"use strict";f();var f2e=cn();Kk.exports=function(e,r){if(e==null)return e;if(e._id&&typeof e._id=="string")return e._id;if(e.toString&&e.toString!==Object.prototype.toString&&!Array.isArray(e))return e.toString();throw new f2e("string",e,r)}});var Xk=y((YRe,Jk)=>{"use strict";f();var h2e=cn(),Yk=eg(),Qk=Ug();Jk.exports=function(e,r){if(e==null||typeof e!="object")throw new h2e("$text",e,r);return e.$search!=null&&(e.$search=Qk(e.$search,r+".$search")),e.$language!=null&&(e.$language=Qk(e.$language,r+".$language")),e.$caseSensitive!=null&&(e.$caseSensitive=Yk(e.$caseSensitive,r+".$castSensitive")),e.$diacriticSensitive!=null&&(e.$diacriticSensitive=Yk(e.$diacriticSensitive,r+".$diacriticSensitive")),e}});var md=y((JRe,Zk)=>{"use strict";f();var d2e=new Set(["$ref","$id","$db"]);Zk.exports=function(e){return e[0]==="$"&&!d2e.has(e)}});var vc=y((ZRe,iq)=>{"use strict";f();var eq=cn(),n9=oa(),p2e=yd(),m2e=Gk(),y2e=Ug(),g2e=Xk(),_2e=Gt(),tq=mg(),rq=md(),E2e=require("util"),s9=sa(),i9=Qh(),nq=Ce(),A2e=["Polygon","MultiPolygon"];iq.exports=function t(e,r,n,i){if(Array.isArray(r))throw new Error("Query filter must be an object, got an array ",E2e.inspect(r));if(r==null)return r;e!=null&&e.discriminators!=null&&r[e.options.discriminatorKey]!=null&&(e=tq(e,r[e.options.discriminatorKey])||e);let s=Object.keys(r),o=s.length,u,a,c,l,h,d,p;for(n=n||{};o--;)if(h=s[o],p=r[h],h==="$or"||h==="$nor"||h==="$and"){if(!Array.isArray(p))throw new eq("Array",p,h);for(let m=p.length-1;m>=0;m--){if(p[m]==null||typeof p[m]!="object")throw new eq("Object",p[m],h+"."+m);let g=Object.keys(p[m]).length,_=p[m][e.options.discriminatorKey];if(_==null)p[m]=t(e,p[m],n,i);else{let w=tq(i.schema,_);p[m]=t(w||e,p[m],n,i)}Object.keys(p[m]).length===0&&g!==0&&p.splice(m,1)}p.length===0&&delete r[h]}else if(h==="$where"){if(d=typeof p,d!=="string"&&d!=="function")throw new Error("Must have a string or function for $where");d==="function"&&(r[h]=p.toString());continue}else if(h==="$expr"){p=m2e(p,e);continue}else if(h==="$elemMatch")p=t(e,p,n,i);else if(h==="$text")p=g2e(p,h);else if(h==="$comment"&&!e.paths.hasOwnProperty("$comment"))p=y2e(p,h),r[h]=p;else{if(!e)continue;if(c=e.path(h),!c){let m=h.split("."),g=m.length;for(;g--;){let _=m.slice(0,g).join("."),w=m.slice(g).join("."),S=e.path(_),C=S&&S.schema&&S.schema.options&&S.schema.options.discriminatorKey;if(S!=null&&(S.schema&&S.schema.discriminators)!=null&&C!=null&&w!==C){let O=_2e(r,_+"."+C),B=S.schema.discriminators;typeof O=="string"&&B[O]!=null?c=B[O].path(w):O!=null&&Object.keys(O).length===1&&Array.isArray(O.$in)&&O.$in.length===1&&typeof O.$in[0]=="string"&&B[O.$in[0]]!=null&&(c=B[O.$in[0]].path(w))}}}if(c){if(p==null)continue;if(nq.isPOJO(p))if(a=Object.keys(p).some(rq),!a)r[h]=c.castForQuery(null,p,i);else{let m=Object.keys(p),g,_=m.length;for(;_--;)if(g=m[_],l=p[g],g==="$elemMatch")l&&c!=null&&c.schema!=null?t(c.schema,l,n,i):l&&c!=null&&c.$isMongooseArray&&(nq.isPOJO(l)&&l.$not!=null?t(e,l,n,i):p[g]=c.castForQuery(g,l,i));else if(g==="$not"){if(l&&c){if(u=Object.keys(l),u.length&&rq(u[0]))for(let w in l)l[w]=c.castForQuery(w,l[w],i);else p[g]=c.castForQuery(g,l,i);continue}}else p[g]=c.castForQuery(g,l,i)}else if(Array.isArray(p)&&["Buffer","Array"].indexOf(c.instance)===-1&&!n.sanitizeFilter){let m=[],g=p;for(let _ of g)m.push(c.castForQuery(null,_,i));r[h]={$in:m}}else r[h]=c.castForQuery(null,p,i)}else{let m=h.split("."),g=m.length,_,w,S;for(;g--&&(_=m.slice(0,g).join("."),c=e.path(_),!c););if(c){if(c.caster&&c.caster.schema){S={},w=m.slice(g).join("."),S[w]=p;let B=t(c.caster.schema,S,n,i)[w];B===void 0?delete r[h]:r[h]=B}else r[h]=p;continue}if(s9(p)){let B="";if(p.$near?B="$near":p.$nearSphere?B="$nearSphere":p.$within?B="$within":p.$geoIntersects?B="$geoIntersects":p.$geoWithin&&(B="$geoWithin"),B){let P=new p2e.Number("__QueryCasting__"),v=p[B];if(p.$maxDistance!=null&&(p.$maxDistance=P.castForQuery(null,p.$maxDistance,i)),p.$minDistance!=null&&(p.$minDistance=P.castForQuery(null,p.$minDistance,i)),B==="$within"){let j=v.$center||v.$centerSphere||v.$box||v.$polygon;if(!j)throw new Error("Bad $within parameter: "+JSON.stringify(p));v=j}else if(B==="$near"&&typeof v.type=="string"&&Array.isArray(v.coordinates))v=v.coordinates;else if((B==="$near"||B==="$nearSphere"||B==="$geoIntersects")&&v.$geometry&&typeof v.$geometry.type=="string"&&Array.isArray(v.$geometry.coordinates))v.$maxDistance!=null&&(v.$maxDistance=P.castForQuery(null,v.$maxDistance,i)),v.$minDistance!=null&&(v.$minDistance=P.castForQuery(null,v.$minDistance,i)),i9(v.$geometry)&&(v.$geometry=v.$geometry.toObject({transform:!1,virtuals:!1})),v=v.$geometry.coordinates;else if(B==="$geoWithin")if(v.$geometry){i9(v.$geometry)&&(v.$geometry=v.$geometry.toObject({virtuals:!1}));let j=v.$geometry.type;if(A2e.indexOf(j)===-1)throw new Error('Invalid geoJSON type for $geoWithin "'+j+'", must be "Polygon" or "MultiPolygon"');v=v.$geometry.coordinates}else v=v.$box||v.$polygon||v.$center||v.$centerSphere,i9(v)&&(v=v.toObject({virtuals:!1}));o9(v,P,i);continue}}if(e.nested[h])continue;let C="strict"in n?n.strict:e.options.strict,O=w2e(n,e._userProvidedOptions,e.options,i);if(n.upsert&&C)throw C==="throw"?new n9(h):new n9(h,'Path "'+h+'" is not in schema, strict mode is `true`, and upsert is `true`.');if(O==="throw")throw new n9(h,'Path "'+h+`" is not in schema and strictQuery is 'throw'.`);O&&delete r[h]}}return r};function o9(t,e,r){if(Array.isArray(t))t.forEach(function(n,i){if(Array.isArray(n)||s9(n))return o9(n,e,r);t[i]=e.castForQuery(null,n,r)});else{let n=Object.keys(t),i=n.length;for(;i--;){let s=n[i],o=t[s];Array.isArray(o)||s9(o)?(o9(o,e,r),t[s]=o):t[s]=e.castForQuery({val:o,context:r})}}}function w2e(t,e,r,n){if("strictQuery"in t)return t.strictQuery;if("strictQuery"in e)return e.strictQuery;let i=n&&n.mongooseCollection&&n.mongooseCollection.conn&&n.mongooseCollection.conn.base&&n.mongooseCollection.conn.base.options;return i&&"strictQuery"in i?i.strictQuery:r.strictQuery}});var oq=y((txe,sq)=>{"use strict";f();var S2e=gi(),Bc=class extends S2e{},Vg=Qi();Object.defineProperty(Bc.prototype,"min",Vg);Object.defineProperty(Bc.prototype,"max",Vg);Object.defineProperty(Bc.prototype,"enum",Vg);Object.defineProperty(Bc.prototype,"populate",Vg);sq.exports=Bc});var zg=y((nxe,aq)=>{"use strict";f();var b2e=cn();function O2e(t){let e=this;return Array.isArray(t)?t.map(function(r){return uq(e.path,r)}):Buffer.isBuffer(t)?t:uq(e.path,t)}function uq(t,e){let r=Number(e);if(isNaN(r))throw new b2e("number",e,t);return r}aq.exports=O2e});var c9=y((sxe,cq)=>{"use strict";f();var Gg=Hn(),C2e=oq(),cu=ar(),T2e=dd(),Wg=zg(),u9=Ce(),a9=cu.CastError;function Pt(t,e){cu.call(this,t,e,"Number")}Pt.get=cu.get;Pt.set=cu.set;Pt.setters=[];Pt._cast=T2e;Pt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Pt._defaultCaster=t=>{if(typeof t!="number")throw new Error;return t};Pt.schemaName="Number";Pt.defaultOptions={};Pt.prototype=Object.create(cu.prototype);Pt.prototype.constructor=Pt;Pt.prototype.OptionsConstructor=C2e;Pt._checkRequired=t=>typeof t=="number"||t instanceof Number;Pt.checkRequired=cu.checkRequired;Pt.prototype.checkRequired=function(e,r){return typeof e=="object"&&cu._isRef(this,e,r,!0)?e!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Pt.checkRequired())(e)};Pt.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minValidator},this)),t!=null){let r=e||Gg.messages.Number.min;r=r.replace(/{MIN}/,t),this.validators.push({validator:this.minValidator=function(n){return n==null||n>=t},message:r,type:"min",min:t})}return this};Pt.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxValidator},this)),t!=null){let r=e||Gg.messages.Number.max;r=r.replace(/{MAX}/,t),this.validators.push({validator:this.maxValidator=function(n){return n==null||n<=t},message:r,type:"max",max:t})}return this};Pt.prototype.enum=function(t,e){return this.enumValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.enumValidator},this)),Array.isArray(t)||(u9.isPOJO(t)&&t.values!=null?(e=t.message,t=t.values):typeof t=="number"&&(t=Array.prototype.slice.call(arguments),e=null),u9.isPOJO(t)&&(t=Object.values(t)),e=e||Gg.messages.Number.enum),e=e??Gg.messages.Number.enum,this.enumValidator=r=>r==null||t.indexOf(r)!==-1,this.validators.push({validator:this.enumValidator,message:e,type:"enum",enumValues:t}),this};Pt.prototype.cast=function(t,e,r){if(typeof t!="number"&&cu._isRef(this,t,e,r)&&(t==null||u9.isNonBuiltinObject(t)))return this._castRef(t,e,r);let n=t&&typeof t._id<"u"?t._id:t,i;typeof this._castFunction=="function"?i=this._castFunction:typeof this.constructor.cast=="function"?i=this.constructor.cast():i=Pt.cast();try{return i(n)}catch(s){throw new a9("Number",n,this.path,s,this)}};function Hg(t){return this.cast(t)}function D2e(t){let e=this;return Array.isArray(t)?t.map(function(r){return e.cast(r)}):[this.cast(t)]}Pt.prototype.$conditionalHandlers={...cu.prototype.$conditionalHandlers,$bitsAllClear:Wg,$bitsAnyClear:Wg,$bitsAllSet:Wg,$bitsAnySet:Wg,$gt:Hg,$gte:Hg,$lt:Hg,$lte:Hg,$mod:D2e};Pt.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new a9("number",e,this.path,null,this);return n.call(this,e,r)}try{e=this.applySetters(e,r)}catch(i){throw i instanceof a9&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}return e};cq.exports=Pt});var gd=y(l9=>{"use strict";f();var M2e=c9();l9.castToNumber=lq;l9.castArraysOfNumbers=fq;function lq(t){return M2e.cast()(t)}function fq(t,e){t.forEach(function(r,n){Array.isArray(r)?fq(r,e):t[n]=lq.call(e,r)})}});var d9=y(Kg=>{"use strict";f();var hq=gd().castArraysOfNumbers,_d=gd().castToNumber;Kg.cast$geoIntersects=I2e;Kg.cast$near=v2e;Kg.cast$within=B2e;function v2e(t){let e=Yg();if(Array.isArray(t))return hq(t,this),t;if(h9(this,t),t&&t.$geometry)return f9(t,this);if(!Array.isArray(t))throw new TypeError("$near must be either an array or an object with a $geometry property");return e.prototype.castForQuery.call(this,null,t)}function f9(t,e){switch(t.$geometry.type){case"Polygon":case"LineString":case"Point":hq(t.$geometry.coordinates,e);break;default:break}return h9(e,t),t}function B2e(t){if(h9(this,t),t.$box||t.$polygon){let e=t.$box?"$box":"$polygon";t[e].forEach(r=>{if(!Array.isArray(r)){let n="Invalid $within $box argument. Expected an array, received "+r;throw new TypeError(n)}r.forEach((n,i)=>{r[i]=_d.call(this,n)})})}else if(t.$center||t.$centerSphere){let e=t.$center?"$center":"$centerSphere";t[e].forEach((r,n)=>{Array.isArray(r)?r.forEach((i,s)=>{r[s]=_d.call(this,i)}):t[e][n]=_d.call(this,r)})}else t.$geometry&&f9(t,this);return t}function I2e(t){if(t.$geometry)return f9(t,this),t}function h9(t,e){e.$maxDistance&&(e.$maxDistance=_d.call(t,e.$maxDistance)),e.$minDistance&&(e.$minDistance=_d.call(t,e.$minDistance))}});var Yg=y((fxe,yq)=>{"use strict";f();var P2e=tg(),N2e=KO(),pq=Fe(),R2e=qk(),es=ar(),Jg=es.CastError,Xg=bc(),x2e=VC(),dq=xg(),F2e=jk(),p9=vc(),$2e=$t(),k2e=Cn(),q2e=md(),Zg=require("util"),la=Ce(),L2e=gd().castToNumber,m9=d9(),j2e=Xi(),Ed,Qg,mq=Symbol("mongoose#isNestedArray"),U2e=Object.freeze({});function Ze(t,e,r,n){Qg||(Qg=G1().Embedded);let i="type";if(n&&n.typeKey&&(i=n.typeKey),this.schemaOptions=n,e){let u={};la.isPOJO(e)&&(e[i]?(u=$2e(e),delete u[i],e=e[i]):e=Xg),r!=null&&r.ref!=null&&u.ref==null&&(u.ref=r.ref),e===Object&&(e=Xg);let a=typeof e=="string"?e:la.getFunctionName(e),c=yd(),l=c.hasOwnProperty(a)?c[a]:e;if(this.casterConstructor=l,this.casterConstructor instanceof Ze&&(this.casterConstructor[mq]=!0),typeof l=="function"&&!l.$isArraySubdocument&&!l.$isSchemaMap){let h=this.caster instanceof Qg?null:t;this.caster=new l(h,u)}else this.caster=l,this.caster instanceof Qg||(this.caster.path=t);this.$embeddedSchemaType=this.caster}this.$isMongooseArray=!0,es.call(this,t,r,"Array");let s,o;if(this.defaultValue!=null&&(s=this.defaultValue,o=typeof s=="function"),!("defaultValue"in this)||this.defaultValue!=null){let u=function(){return o?s.call(this):s!=null?[].concat(s):[]};u.$runBeforeSetters=!o,this.default(u)}}Ze.schemaName="Array";Ze.options={castNonArrays:!0};Ze.defaultOptions={};Ze.set=es.set;Ze.setters=[];Ze.get=es.get;Ze.prototype=Object.create(es.prototype);Ze.prototype.constructor=Ze;Ze.prototype.OptionsConstructor=R2e;Ze._checkRequired=es.prototype.checkRequired;Ze.checkRequired=es.checkRequired;Ze.prototype.virtuals=null;Ze.prototype.checkRequired=function(e,r){return typeof e=="object"&&es._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Ze.checkRequired())(e)};Ze.prototype.enum=function(){let t=this;for(;;){let r=t&&t.caster&&t.caster.instance;if(r==="Array"){t=t.caster;continue}if(r!=="String"&&r!=="Number")throw new Error("`enum` can only be set on an array of strings or numbers , not "+r);break}let e=arguments;return!Array.isArray(arguments)&&la.isObject(arguments)&&(e=la.object.vals(e)),t.caster.enum.apply(t.caster,e),this};Ze.prototype.applyGetters=function(t,e){return e!=null&&e.$__!=null&&e.$populated(this.path)?t:es.prototype.applyGetters.call(this,t,e)};Ze.prototype._applySetters=function(t,e,r,n){if(this.casterConstructor.$isMongooseArray&&Ze.options.castNonArrays&&!this[mq]){let i=0,s=this;for(;s!=null&&s.$isMongooseArray&&!s.$isMongooseDocumentArray;)++i,s=s.casterConstructor;if(t!=null&&t.length!==0){let o=F2e(t);if(o.min===o.max&&o.max<i&&o.containsNonArrayItem)for(let u=o.max;u<i;++u)t=[t]}}return es.prototype._applySetters.call(this,t,e,r,n)};Ze.prototype.cast=function(t,e,r,n,i){Ed||(Ed=G1().Array);let s,o;if(Array.isArray(t)){if(!t.length&&e){let p=e.schema.indexedPaths(),m=this.path;for(s=0,o=p.length;s<o;++s){let _=p[s][0][m];if(_==="2dsphere"||_==="2d")return}let g=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(g!=null){for(s=0,o=p.length;s<o;++s)if(p[s][0][g]==="2dsphere")return}}i=i||U2e;let c=la.isMongooseArray(t)?t.__array:t,l=i.path||this.path;if(i.arrayPathIndex!=null&&(l+="."+i.arrayPathIndex),t=Ed(c,l,e,this),c=t.__array,r&&e!=null&&e.$__!=null&&e.$populated(this.path))return t;let h=this.caster,d=h.$isMongooseArray;if(h&&this.casterConstructor!==Xg)try{let p=c.length;for(s=0;s<p;s++){let m={};d&&(i.arrayPath!=null||h._arrayParentPath!=null)&&(m.arrayPathIndex=s),c[s]=h.applySetters(c[s],e,r,void 0,m)}}catch(p){throw new Jg("["+p.kind+"]",Zg.inspect(t),this.path+"."+s,p,this)}return t}let u=this.options.castNonArrays!=null?this.options.castNonArrays:Ze.options.castNonArrays;if(r||u)return e&&r&&e.markModified(this.path),this.cast([t],e,r);throw new Jg("Array",Zg.inspect(t),this.path,null,this)};Ze.prototype._castForPopulate=function(e,r){if(Ed||(Ed=G1().Array),Array.isArray(e)){let n,i=e.__array?e.__array:e,s=i.length,o=this.caster;if(o&&this.casterConstructor!==Xg)try{for(n=0;n<s;n++){let u={};o.$isMongooseArray&&o._arrayParentPath!=null&&(u.arrayPathIndex=n),i[n]=o.cast(i[n],r,!1,void 0,u)}}catch(u){throw new Jg("["+u.kind+"]",Zg.inspect(e),this.path+"."+n,u,this)}return e}throw new Jg("Array",Zg.inspect(e),this.path,null,this)};Ze.prototype.$toObject=Ze.prototype.toObject;Ze.prototype.discriminator=function(...t){let e=this;for(;e.$isMongooseArray&&!e.$isMongooseDocumentArray;)if(e=e.casterConstructor,e==null||typeof e=="function")throw new pq("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return e.discriminator(...t)};Ze.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,this.caster,t,this.schemaOptions);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),e};Ze.prototype._castForQuery=function(t,e){let r=this.casterConstructor;if(t&&r.discriminators&&r.schema&&r.schema.options&&r.schema.options.discriminatorKey)if(typeof t[r.schema.options.discriminatorKey]=="string"&&r.discriminators[t[r.schema.options.discriminatorKey]])r=r.discriminators[t[r.schema.options.discriminatorKey]];else{let a=j2e(r.discriminators,t[r.schema.options.discriminatorKey]);a&&(r=a)}let n=this.casterConstructor.prototype,i=n&&n.castForQuery,s=n&&n.cast,o=r.castForQuery,u=this.caster;return Array.isArray(t)?(this.setters.reverse().forEach(a=>{t=a.call(this,t,this)}),t=t.map(function(a){return la.isObject(a)&&a.$elemMatch?a:i?(a=i.call(u,null,a,e),a):s?(a=s.call(u,a),a):o?(a=o.call(u,null,a,e),a):(a!=null&&(a=new r(a)),a)})):i?t=i.call(u,null,t,e):s?t=s.call(u,t):o?t=o.call(u,null,t,e):t!=null&&(t=new r(t)),t};Ze.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with Array.");return n.call(this,e,r)}else return this._castForQuery(e,r)};Ze.prototype.virtual=function(e,r){if(e instanceof dq||k2e(e)==="VirtualType")return this.virtual(e.path,e.options);if(r=new x2e(r),la.hasUserDefinedProperty(r,["ref","refPath"]))throw new pq("Cannot set populate virtual as a property of an array");let n=new dq(r,e);return this.virtuals===null&&(this.virtuals={}),this.virtuals[e]=n,n};function V2e(t,e){return Array.isArray(t)||(t=[t]),t=t.map(r=>{if(!la.isObject(r))return r;if(r.$elemMatch!=null)return{$elemMatch:p9(this.casterConstructor.schema,r.$elemMatch,null,this&&this.$$context)};let n={};return n[this.path]=r,p9(this.casterConstructor.schema,n,null,this&&this.$$context)[this.path]},this),this.castForQuery(null,t,e)}function z2e(t,e){let r=Object.keys(t),n=r.length;for(let i=0;i<n;++i){let s=r[i],o=t[s];q2e(s)&&o!=null&&(t[s]=this.castForQuery(s,o,e))}return t}var bt=Ze.prototype.$conditionalHandlers={};bt.$all=V2e;bt.$options=String;bt.$elemMatch=z2e;bt.$geoIntersects=m9.cast$geoIntersects;bt.$or=y9("$or");bt.$and=y9("$and");bt.$nor=y9("$nor");function y9(t){return function(r,n){if(!Array.isArray(r))throw new TypeError("conditional "+t+" requires an array");let i=[];for(let s of r)i.push(p9(this.casterConstructor.schema??n.schema,s,null,this&&this.$$context));return i}}bt.$near=bt.$nearSphere=m9.cast$near;bt.$within=bt.$geoWithin=m9.cast$within;bt.$size=bt.$minDistance=bt.$maxDistance=L2e;bt.$exists=P2e;bt.$type=N2e;bt.$eq=bt.$gt=bt.$gte=bt.$lt=bt.$lte=bt.$not=bt.$regex=bt.$ne=Ze.prototype._castForQuery;bt.$nin=es.prototype.$conditionalHandlers.$nin;bt.$in=es.prototype.$conditionalHandlers.$in;yq.exports=Ze});var _q=y((dxe,gq)=>{"use strict";f();var W2e=require("assert"),{Long:H2e}=vi();gq.exports=function(e){if(e==null)return e;if(e==="")return null;if(typeof e=="bigint")return e;if(e instanceof H2e)return e.toBigInt();if(typeof e=="string"||typeof e=="number")return BigInt(e);W2e.ok(!1)}});var wq=y((mxe,Aq)=>{"use strict";f();var Eq=cn(),Q1=ar(),G2e=_q();function er(t,e){Q1.call(this,t,e,"BigInt")}er.schemaName="BigInt";er.defaultOptions={};er.prototype=Object.create(Q1.prototype);er.prototype.constructor=er;er._cast=G2e;er.set=Q1.set;er.setters=[];er.get=Q1.get;er.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};er._checkRequired=t=>t!=null;er.checkRequired=Q1.checkRequired;er.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};er.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=er.cast();try{return e(t)}catch(r){throw new Eq("BigInt",t,this.path,r,this)}};er.$conditionalHandlers={...Q1.prototype.$conditionalHandlers,$gt:e_,$gte:e_,$lt:e_,$lte:e_};function e_(t,e){return this.castForQuery(null,t,e)}er.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=er.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(null,e,r);try{return this.applySetters(e,r)}catch(i){throw i instanceof Eq&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};er.prototype._castNullish=function(e){return typeof e>"u"||(typeof this.constructor.cast=="function"?this.constructor.cast():er.cast())==null,e};Aq.exports=er});var Oq=y((gxe,bq)=>{"use strict";f();var Sq=cn(),J1=ar(),Ad=eg();function Nt(t,e){J1.call(this,t,e,"Boolean")}Nt.schemaName="Boolean";Nt.defaultOptions={};Nt.prototype=Object.create(J1.prototype);Nt.prototype.constructor=Nt;Nt._cast=Ad;Nt.set=J1.set;Nt.setters=[];Nt.get=J1.get;Nt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Nt._defaultCaster=t=>{if(t!=null&&typeof t!="boolean")throw new Error;return t};Nt._checkRequired=t=>t===!0||t===!1;Nt.checkRequired=J1.checkRequired;Nt.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Object.defineProperty(Nt,"convertToTrue",{get:()=>Ad.convertToTrue,set:t=>{Ad.convertToTrue=t}});Object.defineProperty(Nt,"convertToFalse",{get:()=>Ad.convertToFalse,set:t=>{Ad.convertToFalse=t}});Nt.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Nt.cast();try{return e(t)}catch(r){throw new Sq("Boolean",t,this.path,r,this)}};Nt.$conditionalHandlers={...J1.prototype.$conditionalHandlers};Nt.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=Nt.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(null,e,r);try{return this.applySetters(e,r)}catch(i){throw i instanceof Sq&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};Nt.prototype._castNullish=function(e){if(typeof e>"u")return e;let r=typeof this.constructor.cast=="function"?this.constructor.cast():Nt.cast();return r==null?e:r.convertToFalse instanceof Set&&r.convertToFalse.has(e)?!1:r.convertToTrue instanceof Set&&r.convertToTrue.has(e)?!0:e};bq.exports=Nt});var Tq=y((Exe,Cq)=>{"use strict";f();var K2e=gi(),t_=class extends K2e{},Y2e=Qi();Object.defineProperty(t_.prototype,"subtype",Y2e);Cq.exports=t_});var vq=y((wxe,Mq)=>{"use strict";f();var X1=rd(),Q2e=Tq(),lu=ar(),r_=zg(),Dq=Ce(),g9=X1.Binary,i_=lu.CastError;function Ur(t,e){lu.call(this,t,e,"Buffer")}Ur.schemaName="Buffer";Ur.defaultOptions={};Ur.prototype=Object.create(lu.prototype);Ur.prototype.constructor=Ur;Ur.prototype.OptionsConstructor=Q2e;Ur._checkRequired=t=>!!(t&&t.length);Ur.set=lu.set;Ur.setters=[];Ur.get=lu.get;Ur.checkRequired=lu.checkRequired;Ur.prototype.checkRequired=function(t,e){return lu._isRef(this,t,e,!0)?!!t:this.constructor._checkRequired(t)};Ur.prototype.cast=function(t,e,r){let n;if(lu._isRef(this,t,e,r)){if(t&&t.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return(!t||!t.isMongooseBuffer)&&(t=new X1(t,[this.path,e]),this.options.subtype!=null&&(t._subtype=this.options.subtype)),t;if(t instanceof g9){if(n=new X1(t.value(!0),[this.path,e]),typeof t.sub_type!="number")throw new i_("Buffer",t,this.path,null,this);return n._subtype=t.sub_type,n}if(t==null||Dq.isNonBuiltinObject(t))return this._castRef(t,e,r)}if(t&&t._id&&(t=t._id),t&&t.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return(!t||!t.isMongooseBuffer)&&(t=new X1(t,[this.path,e]),this.options.subtype!=null&&(t._subtype=this.options.subtype)),t;if(t instanceof g9){if(n=new X1(t.value(!0),[this.path,e]),typeof t.sub_type!="number")throw new i_("Buffer",t,this.path,null,this);return n._subtype=t.sub_type,n}if(t===null)return t;let i=typeof t;if(i==="string"||i==="number"||Array.isArray(t)||i==="object"&&t.type==="Buffer"&&Array.isArray(t.data))return i==="number"&&(t=[t]),n=new X1(t,[this.path,e]),this.options.subtype!=null&&(n._subtype=this.options.subtype),n;if(Dq.isPOJO(t)&&(t.$binary instanceof g9||typeof t.$binary=="string")){let s=this.cast(Buffer.from(t.$binary,"base64"));if(t.$type!=null)return s._subtype=t.$type,s}throw new i_("Buffer",t,this.path,null,this)};Ur.prototype.subtype=function(t){return this.options.subtype=t,this};function n_(t,e){return this.castForQuery(null,t,e)}Ur.prototype.$conditionalHandlers={...lu.prototype.$conditionalHandlers,$bitsAllClear:r_,$bitsAnyClear:r_,$bitsAllSet:r_,$bitsAnySet:r_,$gt:n_,$gte:n_,$lt:n_,$lte:n_};Ur.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with Buffer.");return n.call(this,e)}let i;try{i=this.applySetters(e,r)}catch(s){throw s instanceof i_&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}return i&&i.toObject({transform:!1,virtuals:!1})};Mq.exports=Ur});var Iq=y((bxe,Bq)=>{"use strict";f();var J2e=gi(),Z1=class extends J2e{},_9=Qi();Object.defineProperty(Z1.prototype,"min",_9);Object.defineProperty(Z1.prototype,"max",_9);Object.defineProperty(Z1.prototype,"expires",_9);Bq.exports=Z1});var Nq=y((Cxe,Pq)=>{"use strict";f();var E9=require("assert");Pq.exports=function(e){if(e==null||e==="")return null;if(e instanceof Date)return E9.ok(!isNaN(e.valueOf())),e;let r;if(E9.ok(typeof e!="boolean"),e instanceof Number||typeof e=="number"?r=new Date(e):typeof e=="string"&&!isNaN(Number(e))&&(Number(e)>=275761||Number(e)<-271820)?r=new Date(Number(e)):typeof e.valueOf=="function"?r=new Date(e.valueOf()):r=new Date(e),!isNaN(r.valueOf()))return r;E9.ok(!1)}});var $q=y((Dxe,Fq)=>{"use strict";f();var Rq=Hn(),X2e=Iq(),fa=ar(),Z2e=Nq(),ege=Cn(),tge=Ce(),xq=fa.CastError;function Rt(t,e){fa.call(this,t,e,"Date")}Rt.schemaName="Date";Rt.defaultOptions={};Rt.prototype=Object.create(fa.prototype);Rt.prototype.constructor=Rt;Rt.prototype.OptionsConstructor=X2e;Rt._cast=Z2e;Rt.set=fa.set;Rt.setters=[];Rt.get=fa.get;Rt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Rt._defaultCaster=t=>{if(t!=null&&!(t instanceof Date))throw new Error;return t};Rt.prototype.expires=function(t){return ege(this._index)!=="Object"&&(this._index={}),this._index.expires=t,tge.expires(this._index),this};Rt._checkRequired=t=>t instanceof Date;Rt.checkRequired=fa.checkRequired;Rt.prototype.checkRequired=function(t,e){return typeof t=="object"&&fa._isRef(this,t,e,!0)?t!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Rt.checkRequired())(t)};Rt.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minValidator},this)),t){let r=e||Rq.messages.Date.min;typeof r=="string"&&(r=r.replace(/{MIN}/,t===Date.now?"Date.now()":t.toString()));let n=this;this.validators.push({validator:this.minValidator=function(i){let s=t;typeof t=="function"&&t!==Date.now&&(s=s.call(this));let o=s===Date.now?s():n.cast(s);return i===null||i.valueOf()>=o.valueOf()},message:r,type:"min",min:t})}return this};Rt.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxValidator},this)),t){let r=e||Rq.messages.Date.max;typeof r=="string"&&(r=r.replace(/{MAX}/,t===Date.now?"Date.now()":t.toString()));let n=this;this.validators.push({validator:this.maxValidator=function(i){let s=t;typeof s=="function"&&s!==Date.now&&(s=s.call(this));let o=s===Date.now?s():n.cast(s);return i===null||i.valueOf()<=o.valueOf()},message:r,type:"max",max:t})}return this};Rt.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Rt.cast();try{return e(t)}catch(r){throw new xq("date",t,this.path,r,this)}};function s_(t){return this.cast(t)}Rt.prototype.$conditionalHandlers={...fa.prototype.$conditionalHandlers,$gt:s_,$gte:s_,$lt:s_,$lte:s_};Rt.prototype.castForQuery=function(t,e,r){if(t==null)try{return this.applySetters(e,r)}catch(i){throw i instanceof xq&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}let n=this.$conditionalHandlers[t];if(!n)throw new Error("Can't use "+t+" with Date.");return n.call(this,e)};Fq.exports=Rt});var qq=y((vxe,kq)=>{"use strict";f();var Ic=k2(),rge=require("assert");kq.exports=function(e){if(e==null)return e;if(typeof e=="object"&&typeof e.$numberDecimal=="string")return Ic.fromString(e.$numberDecimal);if(e instanceof Ic)return e;if(typeof e=="string")return Ic.fromString(e);if(typeof Buffer=="function"&&Buffer.isBuffer(e))return new Ic(e);if(typeof Uint8Array=="function"&&e instanceof Uint8Array)return new Ic(e);if(typeof e=="number")return Ic.fromString(String(e));if(typeof e.valueOf=="function"&&typeof e.valueOf()=="string")return Ic.fromString(e.valueOf());rge.ok(!1)}});var jq=y((Ixe,Lq)=>{"use strict";f();var fu=ar(),nge=fu.CastError,ige=qq(),A9=Lr();function mr(t,e){fu.call(this,t,e,"Decimal128")}mr.schemaName="Decimal128";mr.defaultOptions={};mr.prototype=Object.create(fu.prototype);mr.prototype.constructor=mr;mr._cast=ige;mr.set=fu.set;mr.setters=[];mr.get=fu.get;mr.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};mr._defaultCaster=t=>{if(t!=null&&!A9(t,"Decimal128"))throw new Error;return t};mr._checkRequired=t=>A9(t,"Decimal128");mr.checkRequired=fu.checkRequired;mr.prototype.checkRequired=function(e,r){return fu._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():mr.checkRequired())(e)};mr.prototype.cast=function(t,e,r){if(fu._isRef(this,t,e,r))return A9(t,"Decimal128")?t:this._castRef(t,e,r);let n;typeof this._castFunction=="function"?n=this._castFunction:typeof this.constructor.cast=="function"?n=this.constructor.cast():n=mr.cast();try{return n(t)}catch(i){throw new nge("Decimal128",t,this.path,i,this)}};function o_(t){return this.cast(t)}mr.prototype.$conditionalHandlers={...fu.prototype.$conditionalHandlers,$gt:o_,$gte:o_,$lt:o_,$lte:o_};Lq.exports=mr});var Vq=y((Nxe,Uq)=>{"use strict";f();var sge=gi(),u_=class extends sge{},oge=Qi();Object.defineProperty(u_.prototype,"_id",oge);Uq.exports=u_});var w9=y((xxe,zq)=>{"use strict";f();zq.exports=function(e,r,n){if(e.length===0)return n();let i=e.length,s=null;for(let o of e)r(o,function(u){if(s==null){if(u!=null)return s=u,n(s);if(--i<=0)return n()}})}});var Hq=y(($xe,Wq)=>{"use strict";f();var uge=w9();Wq.exports=function(e){e.s.hooks.pre("save",!1,function(i){if(this.$isSubdocument){i();return}let s=this,o=this.$getAllSubdocs({useCache:!0});if(!o.length){i();return}uge(o,function(u,a){u.$__schema.s.hooks.execPre("save",u,function(c){a(c)})},function(u){if(s.$__.saveOptions&&(s.$__.saveOptions.__subdocs=null),u)return s.$__schema.s.hooks.execPost("save:error",s,[s],{error:u},function(a){i(a)});i()})},null,!0),e.s.hooks.post("save",async function(){let i=this.$__.removedSubdocs;if(!i||!i.length)return;let s=[];for(let o of i)s.push(new Promise((u,a)=>{o.$__schema.s.hooks.execPost("deleteOne",o,[o],function(c){if(c)return a(c);u()})}));this.$__.removedSubdocs=null,await Promise.all(s)}),e.s.hooks.post("save",async function(){if(this.$isSubdocument)return;let i=this,s=this.$getAllSubdocs({useCache:!0});if(!s.length)return;let o=[];for(let u of s)o.push(new Promise((a,c)=>{u.$__schema.s.hooks.execPost("save",u,[u],function(l){if(l)return c(l);a()})}));try{await Promise.all(o)}catch(u){await new Promise((a,c)=>{this.$__schema.s.hooks.execPost("save:error",i,[i],{error:u},function(l){if(l)return c(l);a()})})}},null,!0)}});var Yq=y((qxe,b9)=>{"use strict";f();var age=ye().objectIdSymbol,Gq=Ce();b9.exports=function(e){e.post("init",function(){return S9.call(this),this}),e.pre("save",function(n){Kq.call(this),n()}),e.pre("remove",function(n){Kq.call(this),n()}),e.post("save",function(){S9.call(this)})};function Kq(){let t,e;if(this.$__.shardval){t=Object.keys(this.$__.shardval),e=t.length,this.$where=this.$where||{};for(let r=0;r<e;++r)this.$where[t[r]]=this.$__.shardval[t[r]]}}b9.exports.storeShard=S9;function S9(){let t=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!Gq.isPOJO(t))return;let e=this.$__.shardval={},r=Object.keys(t),n=r.length,i;for(let s=0;s<n;++s)i=this.$__getValue(r[s]),i==null?e[r[s]]=i:Gq.isMongooseObject(i)?e[r[s]]=i.toObject({depopulate:!0,_isNested:!0}):i instanceof Date||i[age]?e[r[s]]=i:typeof i.valueOf=="function"?e[r[s]]=i.valueOf():e[r[s]]=i}});var Xq=y((jxe,Jq)=>{"use strict";f();var ef=ye().arrayAtomicsSymbol,O9=ye().sessionNewDocuments,cge=Ce();Jq.exports=function(e){e.pre("save",function(){let n=this.$session();if(n!=null&&!(n.transaction==null||n[O9]==null)&&!n[O9].has(this)){let i={};this.isNew&&(i.isNew=!0),this.$__schema.options.versionKey&&(i.versionKey=this.get(this.$__schema.options.versionKey)),i.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),i.atomics=lge(this),n[O9].set(this,i)}})};function lge(t,e){let r=new Map;e=e||new Map;let n=Object.keys(t.$__.activePaths.init).concat(Object.keys(t.$__.activePaths.modify));for(let s of n){let o=t.$__getValue(s);if(o!=null&&Array.isArray(o)&&cge.isMongooseDocumentArray(o)&&o.length&&o[ef]!=null&&Object.keys(o[ef]).length!==0){let u=e.get(s)||{};r.set(s,Qq(u,o[ef]))}}let i=t.$__dirty();for(let s of i){let o=s.path,u=s.value;if(u!=null&&u[ef]!=null&&Object.keys(u[ef]).length!==0){let a=e.get(o)||{};r.set(o,Qq(a,u[ef]))}}return r}function Qq(t,e){return t=t||{},e.$pullAll!=null&&(t.$pullAll=(t.$pullAll||[]).concat(e.$pullAll)),e.$push!=null&&(t.$push=t.$push||{},t.$push.$each=(t.$push.$each||[]).concat(e.$push.$each)),e.$addToSet!=null&&(t.$addToSet=(t.$addToSet||[]).concat(e.$addToSet)),e.$set!=null&&(t.$set=Array.isArray(e.$set)?[...e.$set]:Object.assign({},e.$set)),t}});var eL=y((Vxe,Zq)=>{"use strict";f();Zq.exports=function(e){e.pre("save",!1,function(i,s){let o=this;if(this.$isSubdocument)return i();let u=s&&typeof s=="object"&&"validateBeforeSave"in s,a;if(u?a=!!s.validateBeforeSave:a=this.$__schema.options.validateBeforeSave,a){let l=s&&typeof s=="object"&&"validateModifiedOnly"in s?{validateModifiedOnly:s.validateModifiedOnly}:null;this.$validate(l).then(()=>{this.$op="save",i()},h=>{o.$__schema.s.hooks.execPost("save:error",o,[o],{error:h},function(d){o.$op="save",i(d)})})}else i()},null,!0)}});var C9=y(wd=>{"use strict";f();wd.saveSubdocs=Hq();wd.sharding=Yq();wd.trackTransaction=Xq();wd.validateBeforeSave=eL()});var nL=y((Gxe,rL)=>{"use strict";f();var tL=C9();rL.exports=function(e){for(let r of Object.values(tL))r(e,{deduplicate:!0});e.plugins=Object.values(tL).map(r=>({fn:r,opts:{deduplicate:!0}})).concat(e.plugins)}});var oL=y((Yxe,sL)=>{"use strict";f();var fge=sg(),hge=_c(),dge=Lr(),pge=tu(),iL=sa();sL.exports=function t(e,r,n,i){let s=Object.keys(r),o=0,u=s.length,a;if(n=n||"",i=i||new WeakSet,!i.has(r)){for(i.add(r);o<u;)if(a=s[o++],!(!n&&(a==="discriminators"||a==="base"||a==="_applyDiscriminators"||a==="_userProvidedOptions"||a==="options"||a==="tree"))&&!(n==="tree"&&r!=null&&r.instanceOfSchema)&&!hge.has(a)){if(e[a]==null)e[a]=r[a];else if(iL(r[a])){if(iL(e[a])||(e[a]={}),r[a]!=null){if(r[a].$isSingleNested&&e[a].$isMongooseDocumentArray||r[a].$isMongooseDocumentArray&&e[a].$isSingleNested||r[a].$isMongooseDocumentArrayElement&&e[a].$isMongooseDocumentArrayElement)continue;if(r[a].instanceOfSchema){e[a].instanceOfSchema?fge(e[a],r[a].clone(),!0):e[a]=r[a].clone();continue}else if(dge(r[a],"ObjectId")){e[a]=new pge(r[a]);continue}}t(e[a],r[a],n?n+"."+a:a,i)}}r!=null&&r.instanceOfSchema&&(e.tree=Object.assign({},r.tree,e.tree))}}});var a_=y((Jxe,cL)=>{"use strict";f();var uL=bc(),mge=nL(),yge=$t(),gge=pg().defineKey,_ge=Gt(),T9=Ce(),Ege=oL(),aL={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0};cL.exports=function(e,r,n,i,s,o,u){if(!(n&&n.instanceOfSchema))throw new Error("You must pass a valid discriminator Schema");if(o=o??!0,e.schema.discriminatorMapping&&!e.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+r+'" can only be a discriminator of the root model');if(s){let d=_ge(e.base,"options.applyPluginsToDiscriminators",!1)||!o;e.base._applyPlugins(n,{skipTopLevel:!d})}else o||mge(n);let a=e.schema.options.discriminatorKey,c=e.schema.path(a);if(c!=null)T9.hasUserDefinedProperty(c.options,"select")||(c.options.select=!0),c.options.$skipDiscriminatorCheck=!0;else{let d={};d[a]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},d[a][e.schema.options.typeKey]=String,e.schema.add(d),gge({prop:a,prototype:e.prototype,options:e.schema.options})}if(n.path(a)&&n.path(a).options.$skipDiscriminatorCheck!==!0)throw new Error('Discriminator "'+r+'" cannot have field with name "'+a+'"');let l=r;(typeof i=="string"&&i.length||i!=null)&&(l=i);function h(d,p){d._baseSchema=p,p.paths._id&&p.paths._id.options&&!p.paths._id.options.auto&&d.remove("_id");let m=Object.keys(p.paths),g=[];for(let v of m){if(d.nested[v]){g.push(v);continue}if(v.indexOf(".")===-1)continue;let j=v.split(".").slice(0,-1),k="";for(let q of j)k+=(k.length?".":"")+q,(d.paths[k]instanceof uL||d.singleNestedPaths[k]instanceof uL)&&g.push(v)}d.obj={...d.obj},Ege(d,p),d._gatherChildSchemas();for(let v of g)delete d.paths[v];d.childSchemas.forEach(v=>{v.model.prototype.$__setSchema(v.schema)});let _={};_[a]={default:l,select:!0,set:function(v){if(v===l||Array.isArray(l)&&T9.deepEqual(v,l))return l;throw new Error(`Can't set discriminator key "`+a+'"')},$skipDiscriminatorCheck:!0},_[a][d.options.typeKey]=c?c.options[d.options.typeKey]:String,d.add(_),d.discriminatorMapping={key:a,value:l,isRoot:!1},p.options.collection&&(d.options.collection=p.options.collection);let w=d.options.toJSON,S=d.options.toObject,C=d.options._id,O=d.options.id,B=Object.keys(d.options);d.options.discriminatorKey=p.options.discriminatorKey;let P=d._userProvidedOptions;for(let v of B)if(!aL[v]&&v in P&&!T9.deepEqual(d.options[v],p.options[v]))throw new Error("Can't customize discriminator option "+v+" (can only modify "+Object.keys(aL).join(", ")+")");d.options=yge(p.options);for(let v of Object.keys(P))d.options[v]=P[v];w&&(d.options.toJSON=w),S&&(d.options.toObject=S),typeof C<"u"&&(d.options._id=C),d.options.id=O,o&&(d.s.hooks=e.schema.s.hooks.merge(d.s.hooks)),s&&(d.plugins=Array.prototype.slice.call(p.plugins)),d.callQueue=p.callQueue.concat(d.callQueue),delete d._requiredpaths}if(h(n,e.schema),e.discriminators||(e.discriminators={}),e.schema.discriminatorMapping||(e.schema.discriminatorMapping={key:a,value:null,isRoot:!0}),e.schema.discriminators||(e.schema.discriminators={}),e.schema.discriminators[r]=n,e.discriminators[r]&&!n.options.overwriteModels&&!u)throw new Error('Discriminator with name "'+r+'" already exists');return n}});var c_=y((Zxe,lL)=>{"use strict";f();var Age=Xi();lL.exports=function(e,r,n){let i=e.schema.options.discriminatorKey,s=r!=null&&r[i];if(s==null&&(s=n),e.discriminators&&s!=null)if(e.discriminators[s])e=e.discriminators[s];else{let o=Age(e.discriminators,s);o&&(e=o)}return e}});var D9=y((tFe,fL)=>{"use strict";f();var wge=WC();fL.exports=function(e,r){return r==null||r._id==null||(e=e.clone(),r._id?e.paths._id||(wge(e),e.options._id=!0):(e.remove("_id"),e.options._id=!1)),e}});var M9=y((nFe,hL)=>{"use strict";f();var Sge=Fe(),l_=class extends Sge{constructor(e,r){let n=`Cannot create use schema for property "${e}" because the schema has the ${r} option enabled.`;super(n)}};Object.defineProperty(l_.prototype,"name",{value:"InvalidSchemaOptionError"});hL.exports=l_});var P9=y((sFe,yL)=>{"use strict";f();var dL=cn(),v9=require("events").EventEmitter,bge=ZO(),Oge=Vq(),tf=ar(),Cge=fg(),Tge=tg(),pL=gd().castToNumber,Dge=a_(),B9=d9(),I9=c_(),Mge=D9(),vge=xs().internalToObjectOptions,Bge=U1(),Ige=Ce(),Pge=M9(),f_;yL.exports=gt;function gt(t,e,r){if(t.options.timeseries)throw new Pge(e,"timeseries");let n=gt.defaultOptions&&gt.defaultOptions._id;n!=null&&(r=r||{},r._id=n),t=Mge(t,r),this.caster=mL(t,null,r),this.caster.path=e,this.caster.prototype.$basePath=e,this.schema=t,this.$isSingleNested=!0,this.base=t.base,tf.call(this,e,r,"Embedded")}gt.prototype=Object.create(tf.prototype);gt.prototype.constructor=gt;gt.prototype.OptionsConstructor=Oge;function mL(t,e,r){f_||(f_=_g());let n=function(o,u,a){this.$__parent=a,f_.apply(this,arguments),a!=null&&this.$session(a.$session())};t._preCompile();let i=e!=null?e.prototype:f_.prototype;n.prototype=Object.create(i),n.prototype.$__setSchema(t),n.prototype.constructor=n,n.$__required=r?.required,n.base=t.base,n.schema=t,n.$isSingleNested=!0,n.events=new v9,n.prototype.toBSON=function(){return this.toObject(vge)};for(let s in t.methods)n.prototype[s]=t.methods[s];for(let s in t.statics)n[s]=t.statics[s];for(let s in v9.prototype)n[s]=v9.prototype[s];return n}gt.prototype.$conditionalHandlers.$geoWithin=function(e,r){return{$geometry:this.castForQuery(null,e.$geometry,r)}};gt.prototype.$conditionalHandlers.$near=gt.prototype.$conditionalHandlers.$nearSphere=B9.cast$near;gt.prototype.$conditionalHandlers.$within=gt.prototype.$conditionalHandlers.$geoWithin=B9.cast$within;gt.prototype.$conditionalHandlers.$geoIntersects=B9.cast$geoIntersects;gt.prototype.$conditionalHandlers.$minDistance=pL;gt.prototype.$conditionalHandlers.$maxDistance=pL;gt.prototype.$conditionalHandlers.$exists=Tge;gt.prototype.cast=function(t,e,r,n,i){if(t&&t.$isSingleNested&&t.parent===e)return t;if(t!=null&&(typeof t!="object"||Array.isArray(t)))throw new bge(this.path,t);let s=this.schema.path(this.schema.options.discriminatorKey),o=s==null?null:s.getDefault(e),u=I9(this.caster,t,o),a,c=e&&e.$__&&e.$__.selected,l=this.path,h=c==null?null:Object.keys(c).reduce((d,p)=>(p.startsWith(l+".")&&(d=d||{},d[p.substring(l.length+1)]=c[p]),d),null);if(r){a=new u(void 0,h,e,!1,{defaults:!1}),delete a.$__.defaults,a.$init(t);let d=Bge(h);Cge(a,h,d)}else return i=Object.assign({},i,{priorDoc:n}),Object.keys(t).length===0?new u({},h,e,void 0,i):new u(t,h,e,void 0,i);return a};gt.prototype.castForQuery=function(t,e,r,n){let i;if(t!=null){if(i=this.$conditionalHandlers[t],!i)throw new Error("Can't use "+t);return i.call(this,e)}if(e==null)return e;let s=I9(this.caster,e);if(e instanceof s)return e;this.options.runSetters&&(e=this._applySetters(e,r));let o=n!=null&&n.strict!=null?n.strict:void 0;try{e=new s(e,o)}catch(u){throw u instanceof dL?u:new dL("Embedded",e,this.path,u,this)}return e};gt.prototype.doValidate=function(t,e,r,n){let i=I9(this.caster,t);if(t&&!(t instanceof i)&&(t=new i(t,null,r!=null&&r.$__!=null?r:null)),n&&n.skipSchemaValidators)return t?t.validate().then(()=>e(null),s=>e(s)):e(null);tf.prototype.doValidate.call(this,t,function(s){if(s)return e(s);if(!t)return e(null);t.validate().then(()=>e(null),o=>e(o))},r,n)};gt.prototype.doValidateSync=function(t,e,r){if(!r||!r.skipSchemaValidators){let n=tf.prototype.doValidateSync.call(this,t,e);if(n)return n}if(t)return t.validateSync()};gt.prototype.discriminator=function(t,e,r){r=r||{};let n=Ige.isPOJO(r)?r.value:r,i=typeof r.clone=="boolean"?r.clone:!0;return e.instanceOfSchema&&i&&(e=e.clone()),e=Dge(this.caster,t,e,n,null,null,r.overwriteExisting),this.caster.discriminators[t]=mL(e,this.caster),this.caster.discriminators[t]};gt.defaultOptions={};gt.set=tf.set;gt.setters=[];gt.get=tf.get;gt.prototype.toJSON=function(){return{path:this.path,options:this.options}};gt.prototype.clone=function(){let t=new this.constructor(this.schema,this.path,{...this.options,_skipApplyDiscriminators:!0});return t.validators=this.validators.slice(),this.requiredValidator!==void 0&&(t.requiredValidator=this.requiredValidator),t.caster.discriminators=Object.assign({},this.caster.discriminators),t}});var _L=y((uFe,gL)=>{"use strict";f();var Nge=Fe(),N9=ar(),Rge=P9(),xge=c_();function hu(t,e){if(this.$parentSchemaType=e&&e.$parentSchemaType,!this.$parentSchemaType)throw new Nge("Cannot create DocumentArrayElement schematype without a parent");delete e.$parentSchemaType,N9.call(this,t,e,"DocumentArrayElement"),this.$isMongooseDocumentArrayElement=!0}hu.schemaName="DocumentArrayElement";hu.defaultOptions={};hu.prototype=Object.create(N9.prototype);hu.prototype.constructor=hu;hu.prototype.cast=function(...t){return this.$parentSchemaType.cast(...t)[0]};hu.prototype.doValidate=function(t,e,r,n){let i=xge(this.caster,t);return t&&!(t instanceof i)&&(t=new i(t,r,null,null,n&&n.index!=null?n.index:null)),Rge.prototype.doValidate.call(this,t,e,r,n)};hu.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;let t=N9.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,t.caster=this.caster,t.schema=this.schema,t};gL.exports=hu});var wL=y((cFe,AL)=>{"use strict";f();var Fge=gi(),Sd=class extends Fge{},EL=Qi();Object.defineProperty(Sd.prototype,"excludeIndexes",EL);Object.defineProperty(Sd.prototype,"_id",EL);AL.exports=Sd});var vL=y((fFe,ML)=>{"use strict";f();var SL=cn(),$ge=_L(),R9=require("events").EventEmitter,F9=Yg(),kge=wL(),bd=ar(),bL=vc(),qge=a_(),OL=D9(),Lge=yg(),jge=md(),rf=Ce(),h_=c_(),Uge=M9(),CL=ye().arrayAtomicsSymbol,x9=ye().arrayPathSymbol,Vge=ye().documentArrayParent,du,Pc;function kt(t,e,r,n){if(e.options&&e.options.timeseries)throw new Uge(t,"timeseries");let i=kt.defaultOptions&&kt.defaultOptions._id;i!=null&&(n=n||{},n._id=i),n!=null&&n._id!=null?e=OL(e,n):r!=null&&r._id!=null&&(e=OL(e,r));let s=DL(e,r);s.prototype.$basePath=t,F9.call(this,t,s,r),this.schema=e,this.schemaOptions=n||{},this.$isMongooseDocumentArray=!0,this.Constructor=s,s.base=e.base;let o=this.defaultValue;(!("defaultValue"in this)||o!=null)&&this.default(function(){let a=o.call(this);return a!=null&&!Array.isArray(a)&&(a=[a]),a});let u=this;this.$embeddedSchemaType=new $ge(t+".$",{required:this&&this.schemaOptions&&this.schemaOptions.required||!1,$parentSchemaType:u}),this.$embeddedSchemaType.caster=this.Constructor,this.$embeddedSchemaType.schema=this.schema}kt.schemaName="DocumentArray";kt.options={castNonArrays:!0};kt.prototype=Object.create(F9.prototype);kt.prototype.constructor=kt;kt.prototype.OptionsConstructor=kge;kt.prototype.$conditionalHandlers={...F9.prototype.$conditionalHandlers};function DL(t,e,r){Pc||(Pc=V1());function n(){Pc.apply(this,arguments),!(this.__parentArray==null||this.__parentArray.getArrayParent()==null)&&this.$session(this.__parentArray.getArrayParent().$session())}t._preCompile();let i=r!=null?r.prototype:Pc.prototype;n.prototype=Object.create(i),n.prototype.$__setSchema(t),n.schema=t,n.prototype.constructor=n,n.$isArraySubdocument=!0,n.events=new R9,n.base=t.base;for(let s in t.methods)n.prototype[s]=t.methods[s];for(let s in t.statics)n[s]=t.statics[s];for(let s in R9.prototype)n[s]=R9.prototype[s];return n.options=e,n}kt.prototype.discriminator=function(t,e,r){typeof t=="function"&&(t=rf.getFunctionName(t)),r=r||{};let n=rf.isPOJO(r)?r.value:r,i=typeof r.clone=="boolean"?r.clone:!0;e.instanceOfSchema&&i&&(e=e.clone()),e=qge(this.casterConstructor,t,e,n,null,null,r?.overwriteExisting);let s=DL(e,null,this.casterConstructor);s.baseCasterConstructor=this.casterConstructor;try{Object.defineProperty(s,"name",{value:t})}catch{}return this.casterConstructor.discriminators[t]=s,this.casterConstructor.discriminators[t]};kt.prototype.doValidate=function(t,e,r,n){du||(du=Tc());let i=this;try{bd.prototype.doValidate.call(this,t,s,r)}catch(o){return e(o)}function s(o){if(o)return e(o);let u=t&&t.length,a;if(!u||n&&n.updateValidator)return e();rf.isMongooseDocumentArray(t)||(t=new du(t,i.path,r));function c(l){l!=null&&(a=l),--u||e(a)}for(let l=0,h=u;l<h;++l){let d=t[l];if(d==null){--u||e(a);continue}if(!(d instanceof Pc)){let p=h_(i.casterConstructor,t[l]);d=t[l]=new p(d,t,void 0,void 0,l)}if(n!=null&&n.validateModifiedOnly&&!d.$isModified()){--u||e(a);continue}d.$__validate(null,n,c)}}};kt.prototype.doValidateSync=function(t,e,r){let n=bd.prototype.doValidateSync.call(this,t,e);if(n!=null)return n;let i=t&&t.length,s=null;if(i){for(let o=0,u=i;o<u;++o){let a=t[o];if(!a)continue;if(!(a instanceof Pc)){let l=h_(this.casterConstructor,t[o]);a=t[o]=new l(a,t,void 0,void 0,o)}if(r!=null&&r.validateModifiedOnly&&!a.$isModified())continue;let c=a.validateSync(r);c&&s==null&&(s=c)}return s}};kt.prototype.getDefault=function(t,e,r){let n=typeof this.defaultValue=="function"?this.defaultValue.call(t):this.defaultValue;if(n==null||r&&r.skipCast)return n;du||(du=Tc()),Array.isArray(n)||(n=[n]),n=new du(n,this.path,t);for(let i=0;i<n.length;++i){let s=h_(this.casterConstructor,n[i]),o=new s({},n,void 0,void 0,i);o.$init(n[i]),o.isNew=!0,Object.assign(o.$__.activePaths.default,o.$__.activePaths.init),o.$__.activePaths.init={},n[i]=o}return n};var zge=Object.freeze({transform:!1,virtuals:!1}),TL=Object.freeze({skipId:!1,willInit:!0});kt.prototype.cast=function(t,e,r,n,i){if(du||(du=Tc()),t!=null&&t[x9]!=null&&t===n)return t;let s,o;i=i||{};let u=i.path||this.path;if(!Array.isArray(t)){if(!r&&!kt.options.castNonArrays)throw new SL("DocumentArray",t,this.path,null,this);return e&&r&&e.markModified(u),this.cast([t],e,r,n,i)}(!i.skipDocumentArrayCast||rf.isMongooseDocumentArray(t))&&(t=new du(t,u,e,this)),n!=null&&(t[CL]=n[CL]||{}),i.arrayPathIndex!=null&&(t[x9]=u+"."+i.arrayPathIndex);let a=rf.isMongooseDocumentArray(t)?t.__array:t,c=a.length;for(let l=0;l<c;++l){if(!a[l])continue;let h=h_(this.casterConstructor,a[l]),d=Lge(a[l],!0);if(a[l]!==d&&(a[l]=d),a[l]instanceof Pc){if(a[l][Vge]!==e)if(r){let p=new h(null,t,TL,s,l);a[l]=p.$init(a[l])}else{let p=new h(a[l],t,void 0,void 0,l);a[l]=p}a[l].__index==null&&a[l].$setIndex(l)}else if(a[l]!=null)if(r)e?s||(s=Wge(this,e.$__.selected,r)):s=!0,o=new h(null,t,TL,s,l),a[l]=o.$init(a[l]);else if(n&&typeof n.id=="function"&&(o=n.id(a[l]._id)),n&&o&&rf.deepEqual(o.toObject(zge),a[l]))o.set(a[l]),a[l]=o;else try{o=new h(a[l],t,void 0,void 0,l),a[l]=o}catch(p){throw new SL("embedded",a[l],t[x9],p,this)}}return t};kt.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,this.schema,t,this.schemaOptions);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),e.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),e};kt.prototype.applyGetters=function(t,e){return bd.prototype.applyGetters.call(this,t,e)};function Wge(t,e,r){if(!(r&&e))return;let n=t.path+".",i=Object.keys(e),s=i.length,o={},u,a,c;for(;s--;)if(a=i[s],a.startsWith(n)){if(c=a.substring(n.length),c==="$")continue;c.startsWith("$.")&&(c=c.substring(2)),u||(u=!0),o[c]=e[a]}return u&&o||void 0}kt.defaultOptions={};kt.set=bd.set;kt.setters=[];kt.get=bd.get;kt.prototype.$conditionalHandlers.$elemMatch=Hge;function Hge(t,e){let r=Object.keys(t),n=r.length;for(let u=0;u<n;++u){let a=r[u],c=t[a];jge(a)&&c!=null&&(t[a]=this.castForQuery(a,c,e))}let i=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.options&&this.casterConstructor.schema.options.discriminatorKey,s=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.discriminators||{};if(i!=null&&t[i]!=null&&s[t[i]]!=null)return bL(s[t[i]],t,null,this&&this.$$context);let o=this.casterConstructor.schema??e.schema;return bL(o,t,null,this&&this.$$context)}ML.exports=kt});var IL=y((dFe,BL)=>{"use strict";f();var Gge=gi(),d_=class extends Gge{},Kge=Qi();Object.defineProperty(d_.prototype,"of",Kge);BL.exports=d_});var RL=y((mFe,NL)=>{"use strict";f();var $9=qg(),Yge=IL(),PL=ar();var nf=class extends PL{constructor(e,r){super(e,r,"Map"),this.$isSchemaMap=!0}set(e,r){return PL.set(e,r)}cast(e,r,n){if(e instanceof $9)return e;let i=this.path;if(n){let s=new $9({},i,r,this.$__schemaType);if(e instanceof global.Map)for(let o of e.keys()){let u=e.get(o);u==null?u=s.$__schemaType._castNullish(u):u=s.$__schemaType.cast(u,r,!0,null,{path:i+"."+o}),s.$init(o,u)}else for(let o of Object.keys(e)){let u=e[o];u==null?u=s.$__schemaType._castNullish(u):u=s.$__schemaType.cast(u,r,!0,null,{path:i+"."+o}),s.$init(o,u)}return s}return new $9(e,i,r,this.$__schemaType)}clone(){let e=super.clone();return this.$__schemaType!=null&&(e.$__schemaType=this.$__schemaType.clone()),e}};nf.schemaName="Map";nf.prototype.OptionsConstructor=Yge;nf.defaultOptions={};NL.exports=nf});var $L=y((gFe,FL)=>{"use strict";f();var Qge=gi(),Od=class extends Qge{},xL=Qi();Object.defineProperty(Od.prototype,"auto",xL);Object.defineProperty(Od.prototype,"populate",xL);FL.exports=Od});var jL=y((EFe,LL)=>{"use strict";f();var Jge=$L(),pu=ar(),Xge=gC(),Zge=Cn(),q9=tu(),L9=Lr(),kL=Ce(),e_e=pu.CastError,k9;function tr(t,e){let r=typeof t=="string"&&t.length===24&&/^[a-f0-9]+$/i.test(t),n=e&&e.suppressWarning;(r||typeof t>"u")&&!n&&kL.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema."),pu.call(this,t,e,"ObjectId")}tr.schemaName="ObjectId";tr.defaultOptions={};tr.prototype=Object.create(pu.prototype);tr.prototype.constructor=tr;tr.prototype.OptionsConstructor=Jge;tr.get=pu.get;tr.set=pu.set;tr.setters=[];tr.prototype.auto=function(t){return t&&(this.default(qL),this.set(t_e)),this};tr._checkRequired=t=>L9(t,"ObjectId");tr._cast=Xge;tr.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};tr._defaultCaster=t=>{if(!L9(t,"ObjectId"))throw new Error(t+" is not an instance of ObjectId");return t};tr.checkRequired=pu.checkRequired;tr.prototype.checkRequired=function(e,r){return pu._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():tr.checkRequired())(e)};tr.prototype.cast=function(t,e,r){if(!L9(t,"ObjectId")&&pu._isRef(this,t,e,r)){if((Zge(t)||"").toLowerCase()==="objectid")return new q9(t.toHexString());if(t==null||kL.isNonBuiltinObject(t))return this._castRef(t,e,r)}let n;typeof this._castFunction=="function"?n=this._castFunction:typeof this.constructor.cast=="function"?n=this.constructor.cast():n=tr.cast();try{return n(t)}catch(i){throw new e_e("ObjectId",t,this.path,i,this)}};function p_(t){return this.cast(t)}tr.prototype.$conditionalHandlers={...pu.prototype.$conditionalHandlers,$gt:p_,$gte:p_,$lt:p_,$lte:p_};function qL(){return new q9}qL.$runBeforeSetters=!0;function t_e(t){return k9||(k9=Yn()),this instanceof k9&&t===void 0?new q9:t}LL.exports=tr});var VL=y((wFe,UL)=>{"use strict";f();var r_e=gi(),Ei=class extends r_e{},po=Qi();Object.defineProperty(Ei.prototype,"enum",po);Object.defineProperty(Ei.prototype,"match",po);Object.defineProperty(Ei.prototype,"lowercase",po);Object.defineProperty(Ei.prototype,"trim",po);Object.defineProperty(Ei.prototype,"uppercase",po);Object.defineProperty(Ei.prototype,"minLength",po);Object.defineProperty(Ei.prototype,"minlength",po);Object.defineProperty(Ei.prototype,"maxLength",po);Object.defineProperty(Ei.prototype,"maxlength",po);Object.defineProperty(Ei.prototype,"populate",po);UL.exports=Ei});var j9=y((bFe,GL)=>{"use strict";f();var mu=ar(),Td=Hn(),n_e=VL(),i_e=Ug(),zL=Ce(),s_e=Lr(),HL=mu.CastError;function it(t,e){this.enumValues=[],this.regExp=null,mu.call(this,t,e,"String")}it.schemaName="String";it.defaultOptions={};it.prototype=Object.create(mu.prototype);it.prototype.constructor=it;Object.defineProperty(it.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:n_e});it._cast=i_e;it.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};it._defaultCaster=t=>{if(t!=null&&typeof t!="string")throw new Error;return t};it.get=mu.get;it.set=mu.set;it.setters=[];it._checkRequired=t=>(t instanceof String||typeof t=="string")&&t.length;it.checkRequired=mu.checkRequired;it.prototype.enum=function(){if(this.enumValidator&&(this.validators=this.validators.filter(function(n){return n.validator!==this.enumValidator},this),this.enumValidator=!1),arguments[0]===void 0||arguments[0]===!1)return this;let t,e;zL.isObject(arguments[0])?Array.isArray(arguments[0].values)?(t=arguments[0].values,e=arguments[0].message):(t=zL.object.vals(arguments[0]),e=Td.messages.String.enum):(t=arguments,e=Td.messages.String.enum);for(let n of t)n!==void 0&&this.enumValues.push(this.cast(n));let r=this.enumValues;return this.enumValidator=function(n){return n==null||~r.indexOf(n)},this.validators.push({validator:this.enumValidator,message:e,type:"enum",enumValues:r}),this};it.prototype.lowercase=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.toLowerCase()))};it.prototype.uppercase=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.toUpperCase()))};it.prototype.trim=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.trim()))};it.prototype.minlength=function(t,e){if(this.minlengthValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minlengthValidator},this)),t!=null){let r=e||Td.messages.String.minlength;r=r.replace(/{MINLENGTH}/,t),this.validators.push({validator:this.minlengthValidator=function(n){return n===null||n.length>=t},message:r,type:"minlength",minlength:t})}return this};it.prototype.minLength=it.prototype.minlength;it.prototype.maxlength=function(t,e){if(this.maxlengthValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxlengthValidator},this)),t!=null){let r=e||Td.messages.String.maxlength;r=r.replace(/{MAXLENGTH}/,t),this.validators.push({validator:this.maxlengthValidator=function(n){return n===null||n.length<=t},message:r,type:"maxlength",maxlength:t})}return this};it.prototype.maxLength=it.prototype.maxlength;it.prototype.match=function(e,r){let n=r||Td.messages.String.match,i=function(s){return e?(e.lastIndex=0,s!=null&&s!==""?e.test(s):!0):!1};return this.validators.push({validator:i,message:n,type:"regexp",regexp:e}),this};it.prototype.checkRequired=function(e,r){return typeof e=="object"&&mu._isRef(this,e,r,!0)?e!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():it.checkRequired())(e)};it.prototype.cast=function(t,e,r){if(typeof t!="string"&&mu._isRef(this,t,e,r))return this._castRef(t,e,r);let n;typeof this._castFunction=="function"?n=this._castFunction:typeof this.constructor.cast=="function"?n=this.constructor.cast():n=it.cast();try{return n(t)}catch{throw new HL("string",t,this.path,null,this)}};function Cd(t,e){return this.castForQuery(null,t,e)}function o_e(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}function WL(t){return t==null?this._castNullish(t):this.cast(t,this)}var u_e={...mu.prototype.$conditionalHandlers,$all:o_e,$gt:Cd,$gte:Cd,$lt:Cd,$lte:Cd,$options:WL,$regex:function(e){return Object.prototype.toString.call(e)==="[object RegExp]"?e:WL.call(this,e)},$not:Cd};Object.defineProperty(it.prototype,"$conditionalHandlers",{configurable:!1,enumerable:!1,writable:!1,value:Object.freeze(u_e)});it.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with String.");return n.call(this,e,r)}if(Object.prototype.toString.call(e)==="[object RegExp]"||s_e(e,"BSONRegExp"))return e;try{return this.applySetters(e,r)}catch(i){throw i instanceof HL&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};GL.exports=it});var XL=y((CFe,JL)=>{"use strict";f();var z9=rd(),ha=ar(),g_=ha.CastError,YL=Ce(),m_=zg(),V9=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i,QL=z9.Binary;function a_e(t){return t!=null&&Buffer.from(t,"hex")}function KL(t){typeof t!="string"&&(t="");let e=t.replace(/[{}-]/g,""),r=a_e(e),n=new z9(r);return n._subtype=4,n}function y_(t){let e;return typeof t!="string"&&t!=null?(e=t.toString("hex"),e.substring(0,8)+"-"+e.substring(8,12)+"-"+e.substring(12,16)+"-"+e.substring(16,20)+"-"+e.substring(20,32)):t}function rr(t,e){ha.call(this,t,e,"UUID"),this.getters.push(function(r){return r!=null&&r.$__!=null?r:Buffer.isBuffer(r)?y_(r):r instanceof QL?y_(r.buffer):YL.isPOJO(r)&&r.type==="Buffer"&&Array.isArray(r.data)?y_(Buffer.from(r.data)):r})}rr.schemaName="UUID";rr.defaultOptions={};rr.prototype=Object.create(ha.prototype);rr.prototype.constructor=rr;rr._cast=function(t){if(t==null)return t;function e(r){let n=new z9(r);return n._subtype=4,n}if(typeof t=="string"){if(V9.test(t))return KL(t);throw new g_(rr.schemaName,t,this.path)}if(Buffer.isBuffer(t))return e(t);if(t instanceof QL)return e(t.value(!0));if(t.toString&&t.toString!==Object.prototype.toString&&V9.test(t.toString()))return KL(t.toString());throw new g_(rr.schemaName,t,this.path)};rr.get=ha.get;rr.set=ha.set;rr.setters=[];rr.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};rr._checkRequired=t=>t!=null;rr.checkRequired=ha.checkRequired;rr.prototype.checkRequired=function(e){return Buffer.isBuffer(e)&&(e=y_(e)),e!=null&&V9.test(e)};rr.prototype.cast=function(t,e,r){if(YL.isNonBuiltinObject(t)&&ha._isRef(this,t,e,r))return this._castRef(t,e,r);let n;typeof this._castFunction=="function"?n=this._castFunction:typeof this.constructor.cast=="function"?n=this.constructor.cast():n=rr.cast();try{return n(t)}catch(i){throw new g_(rr.schemaName,t,this.path,i,this)}};function Dd(t){return this.cast(t)}function U9(t){return t.map(e=>this.cast(e))}rr.prototype.$conditionalHandlers={...ha.prototype.$conditionalHandlers,$bitsAllClear:m_,$bitsAnyClear:m_,$bitsAllSet:m_,$bitsAnySet:m_,$all:U9,$gt:Dd,$gte:Dd,$in:U9,$lt:Dd,$lte:Dd,$ne:Dd,$nin:U9};rr.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with UUID.");return n.call(this,e,r)}try{return this.applySetters(e,r)}catch(i){throw i instanceof g_&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};JL.exports=rr});var tj=y((DFe,ej)=>{"use strict";f();var ZL=require("assert"),W9=vi(),c_e=Lr();ej.exports=function(e){if(e==null||e==="")return null;let r;if(c_e(e,"Long"))r=e.toNumber();else if(typeof e=="string")try{return r=W9.Double.fromString(e),r}catch{ZL.ok(!1)}else if(typeof e=="object"){let n=e.valueOf()??e.toString();if(typeof n=="string")try{return r=W9.Double.fromString(e),r}catch{ZL.ok(!1)}else r=Number(n)}else r=Number(e);return new W9.Double(r)}});var nj=y((vFe,rj)=>{"use strict";f();var l_e=cn(),sf=ar(),f_e=tj();function Mr(t,e){sf.call(this,t,e,"Double")}Mr.schemaName="Double";Mr.defaultOptions={};Mr.prototype=Object.create(sf.prototype);Mr.prototype.constructor=Mr;Mr._cast=f_e;Mr.set=sf.set;Mr.setters=[];Mr.get=sf.get;Mr._defaultCaster=t=>{if(t!=null&&t._bsontype!=="Double")throw new Error;return t};Mr.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Mr._checkRequired=t=>t!=null;Mr.checkRequired=sf.checkRequired;Mr.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Mr.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Mr.cast();try{return e(t)}catch(r){throw new l_e("Double",t,this.path,r,this)}};function __(t){return this.cast(t)}Mr.prototype.$conditionalHandlers={...sf.prototype.$conditionalHandlers,$gt:__,$gte:__,$lt:__,$lte:__};rj.exports=Mr});var sj=y((IFe,ij)=>{"use strict";f();var h_e=Lr(),d_e=require("assert");ij.exports=function(e){if(e==null)return e;if(e==="")return null;let r=h_e(e,"Long")?e.toNumber():Number(e);if(r===(r|0)&&r>=-2147483648&&r<=2147483647)return r;d_e.ok(!1)}});var aj=y((NFe,uj)=>{"use strict";f();var oj=cn(),of=ar(),p_e=sj();function cr(t,e){of.call(this,t,e,"Int32")}cr.schemaName="Int32";cr.defaultOptions={};cr.prototype=Object.create(of.prototype);cr.prototype.constructor=cr;cr._cast=p_e;cr.set=of.set;cr.setters=[];cr.get=of.get;cr._defaultCaster=t=>{if(t!=null&&(typeof t!="number"||t!==(t|0)||t<-2147483648||t>2147483647))throw new Error;return t};cr.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};cr._checkRequired=t=>t!=null;cr.checkRequired=of.checkRequired;cr.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};cr.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=cr.cast();try{return e(t)}catch(r){throw new oj("Int32",t,this.path,r,this)}};cr.$conditionalHandlers={...of.prototype.$conditionalHandlers,$gt:E_,$gte:E_,$lt:E_,$lte:E_};function E_(t,e){return this.castForQuery(null,t,e)}cr.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=cr.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(null,e,r);try{return this.applySetters(e,r)}catch(i){throw i instanceof oj&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}};uj.exports=cr});var yd=y(Ot=>{"use strict";f();Ot.Array=Yg();Ot.BigInt=wq();Ot.Boolean=Oq();Ot.Buffer=vq();Ot.Date=$q();Ot.Decimal128=Ot.Decimal=jq();Ot.DocumentArray=vL();Ot.Map=RL();Ot.Mixed=bc();Ot.Number=c9();Ot.ObjectId=jL();Ot.String=j9();Ot.Subdocument=P9();Ot.UUID=XL();Ot.Double=nj();Ot.Int32=aj();Ot.Oid=Ot.ObjectId;Ot.Object=Ot.Mixed;Ot.Bool=Ot.Boolean;Ot.ObjectID=Ot.ObjectId});var z1=y((Y9,Aj)=>{"use strict";f();var m_e=require("events").EventEmitter,y_e=P1(),mo=Fe(),cj=ar(),lj=gi(),g_e=VC(),K9=xg(),fj=WC(),Dn=$t(),hj=Gt(),__e=Cn(),E_e=ck(),S_=KC(),A_e=hk(),dj=pk(),w_e=sg(),A_=_i(),S_e=yk(),b_e=Tk(),Ct=Ce(),O_e=Mk(),C_e=/\.\d+(\.|$)/,da,T_e=$g().queryMiddlewareFunctions,D_e=kg().middlewareFunctions,pj=T_e.concat(D_e).reduce((t,e)=>t.add(e),new Set),H9=Ct.isPOJO,mj=0,M_e=/^\d+$/;function oe(t,e){if(!(this instanceof oe))return new oe(t,e);if(this.obj=t,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=e&&e.methods||{},this.methodOptions={},this.statics=e&&e.statics||{},this.tree={},this.query=e&&e.query||{},this.childSchemas=[],this.plugins=[],this.$id=++mj,this.mapPaths=[],this.s={hooks:new y_e},this.options=this.defaultOptions(e),Array.isArray(t))for(let i of t)this.add(i);else t&&this.add(t);if(e&&e.virtuals){let i=e.virtuals,s=Object.keys(i);for(let o of s){let u=i[o].options?i[o].options:void 0,a=this.virtual(o,u);i[o].get&&a.get(i[o].get),i[o].set&&a.set(i[o].set)}}let r=t&&t._id&&Ct.isObject(t._id);!this.paths._id&&this.options._id&&!r&&fj(this),this.setupTimestamp(this.options.timestamps)}function yj(t,e){for(let r of Object.keys(e)){let n=null;if(e[r]!=null)n=e[r];else{let s=hj(t.paths[r],"options");if(s==null)continue;n=s.alias}if(!n)continue;let i=t.paths[r].path;if(Array.isArray(n)){for(let s of n){if(typeof s!="string")throw new Error("Invalid value for alias option on "+i+", got "+s);t.aliases[s]=i,t.virtual(s).get(function(o){return function(){return typeof this.get=="function"?this.get(o):this[o]}}(i)).set(function(o){return function(u){return this.$set(o,u)}}(i))}continue}if(typeof n!="string")throw new Error("Invalid value for alias option on "+i+", got "+n);t.aliases[n]=i,t.virtual(n).get(function(s){return function(){return typeof this.get=="function"?this.get(s):this[s]}}(i)).set(function(s){return function(o){return this.$set(s,o)}}(i))}}oe.prototype=Object.create(m_e.prototype);oe.prototype.constructor=oe;oe.prototype.instanceOfSchema=!0;Object.defineProperty(oe.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0});Object.defineProperty(oe.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(oe.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0});oe.prototype.obj;oe.prototype.paths;oe.prototype.tree;oe.prototype.clone=function(){let t=this._clone();return t.on("init",e=>this.emit("init",e)),t};oe.prototype._clone=function(e){e=e||(this.base==null?oe:this.base.Schema);let r=new e({},this._userProvidedOptions);r.base=this.base,r.obj=this.obj,r.options=Dn(this.options),r.callQueue=this.callQueue.map(function(n){return n}),r.methods=Dn(this.methods),r.methodOptions=Dn(this.methodOptions),r.statics=Dn(this.statics),r.query=Dn(this.query),r.plugins=Array.prototype.slice.call(this.plugins),r._indexes=Dn(this._indexes),r._searchIndexes=Dn(this._searchIndexes),r.s.hooks=this.s.hooks.clone(),r.tree=Dn(this.tree),r.paths=Object.fromEntries(Object.entries(this.paths).map(([n,i])=>[n,i.clone()])),r.nested=Dn(this.nested),r.subpaths=Dn(this.subpaths);for(let n of Object.values(r.paths))if(n.$isSingleNested){let i=n.path;for(let s of Object.keys(n.schema.paths))r.singleNestedPaths[i+"."+s]=n.schema.paths[s];for(let s of Object.keys(n.schema.singleNestedPaths))r.singleNestedPaths[i+"."+s]=n.schema.singleNestedPaths[s];for(let s of Object.keys(n.schema.subpaths))r.singleNestedPaths[i+"."+s]=n.schema.subpaths[s];for(let s of Object.keys(n.schema.nested))r.singleNestedPaths[i+"."+s]="nested"}return r._gatherChildSchemas(),r.virtuals=Dn(this.virtuals),r.$globalPluginsApplied=this.$globalPluginsApplied,r.$isRootDiscriminator=this.$isRootDiscriminator,r.$implicitlyCreated=this.$implicitlyCreated,r.$id=++mj,r.$originalSchemaId=this.$id,r.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null&&(r.discriminatorMapping=Object.assign({},this.discriminatorMapping)),this.discriminators!=null&&(r.discriminators=Object.assign({},this.discriminators)),this._applyDiscriminators!=null&&(r._applyDiscriminators=new Map(this._applyDiscriminators)),r.aliases=Object.assign({},this.aliases),r};oe.prototype.pick=function(t,e){let r=new oe({},e||this.options);if(!Array.isArray(t))throw new mo('Schema#pick() only accepts an array argument, got "'+typeof t+'"');for(let n of t)if(this.nested[n])r.add({[n]:hj(this.tree,n)});else{let i=this.path(n);if(i==null)throw new mo("Path `"+n+"` is not in the schema");r.add({[n]:i})}return r};oe.prototype.omit=function(t,e){let r=new oe(this,e||this.options);if(!Array.isArray(t))throw new mo('Schema#omit() only accepts an array argument, got "'+typeof t+'"');r.remove(t);for(let n in r.singleNestedPaths)t.includes(n)&&delete r.singleNestedPaths[n];return r};oe.prototype.defaultOptions=function(t){this._userProvidedOptions=t==null?{}:Dn(t);let e=this.base&&this.base.options||{},r="strict"in e?e.strict:!0,n="strictQuery"in e?e.strictQuery:!1,i="id"in e?e.id:!0;if(t={strict:r,strictQuery:n,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:i,typeKey:"type",...t},t.versionKey&&typeof t.versionKey!="string")throw new mo("`versionKey` must be falsy or string, got `"+typeof t.versionKey+"`");if(typeof t.read=="string"?t.read=S_(t.read):Array.isArray(t.read)&&typeof t.read[0]=="string"&&(t.read={mode:S_(t.read[0]),tags:t.read[1]}),t.optimisticConcurrency&&!t.versionKey)throw new mo("Must set `versionKey` if using `optimisticConcurrency`");return t};oe.prototype.discriminator=function(t,e,r){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(t,{schema:e,options:r}),this};oe.prototype._defaultToObjectOptions=function(t){let e=t?"toJSON":"toObject";if(this._defaultToObjectOptionsMap&&this._defaultToObjectOptionsMap[e])return this._defaultToObjectOptionsMap[e];let r=this.base&&this.base.options&&this.base.options[e]||{},n=this.options[e]||{},i=Object.assign({},r,n);return this._defaultToObjectOptionsMap=this._defaultToObjectOptionsMap||{},this._defaultToObjectOptionsMap[e]=i,i};oe.prototype.add=function(e,r){if(e instanceof oe||e!=null&&e.instanceOfSchema)return w_e(this,e),this;if(e._id===!1&&r==null&&(this.options._id=!1),r=r||"",r==="__proto__."||r==="constructor."||r==="prototype.")return this;let n=Object.keys(e),i=this.options.typeKey;for(let o of n){if(Ct.specialProperties.has(o))continue;let u=r+o,a=e[o];if(a==null)throw new TypeError("Invalid value for schema path `"+u+'`, got value "'+a+'"');if(o==="_id"&&a===!1)continue;let c=!1;if(typeof a=="string"){let l=this.base!=null?this.base.Schema.Types:oe.Types,h=a.charAt(0).toUpperCase()+a.substring(1);c=l[h]!=null}if(o!=="_id"&&(typeof a!="object"&&typeof a!="function"&&!c||a==null))throw new TypeError(`Invalid schema configuration: \`${a}\` is not a valid type at path \`${o}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(a instanceof K9||(a.constructor&&a.constructor.name||null)==="VirtualType"){this.virtual(a);continue}if(Array.isArray(a)&&a.length===1&&a[0]==null)throw new TypeError("Invalid value for schema Array path `"+u+'`, got value "'+a[0]+'"');if(H9(a)||a instanceof lj)if(Object.keys(a).length<1)r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(u,a);else if(!a[i]||i==="type"&&H9(a.type)&&a.type.type)this.nested[u]=!0,this.add(a,u+".");else{let l=a[i];if(H9(l)&&Object.keys(l).length>0){r&&(this.nested[r.substring(0,r.length-1)]=!0);let h={};this._userProvidedOptions.typeKey&&(h.typeKey=this._userProvidedOptions.typeKey),this._userProvidedOptions.strict!=null&&(h.strict=this._userProvidedOptions.strict),this._userProvidedOptions.toObject!=null&&(h.toObject=Ct.omit(this._userProvidedOptions.toObject,["transform"])),this._userProvidedOptions.toJSON!=null&&(h.toJSON=Ct.omit(this._userProvidedOptions.toJSON,["transform"]));let d=new oe(l,h);d.$implicitlyCreated=!0;let p=Object.assign({},a,{[i]:d});this.path(r+o,p)}else if(r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(r+o,a),a!=null&&!a.instanceOfSchema&&Ct.isPOJO(a.discriminators)){let h=this.path(r+o);for(let d in a.discriminators)h.discriminator(d,a.discriminators[d])}}else if(r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(r+o,a),a[0]!=null&&!a[0].instanceOfSchema&&Ct.isPOJO(a[0].discriminators)){let l=this.path(r+o);for(let h in a[0].discriminators)l.discriminator(h,a[0].discriminators[h])}}let s=Object.fromEntries(Object.entries(e).map(([o])=>[r+o,null]));return yj(this,s),this};oe.prototype.alias=function(t,e){return yj(this,{[t]:e}),this};oe.prototype.removeIndex=function(e){if(arguments.length>1)throw new Error("removeIndex() takes only 1 argument");if(typeof e!="object"&&typeof e!="string")throw new Error("removeIndex() may only take either an object or a string as an argument");if(typeof e=="object")for(let r=this._indexes.length-1;r>=0;--r)dj(this._indexes[r][0],e)&&this._indexes.splice(r,1);else for(let r=this._indexes.length-1;r>=0;--r)this._indexes[r][1]!=null&&this._indexes[r][1].name===e&&this._indexes.splice(r,1);return this};oe.prototype.clearIndexes=function(){return this._indexes.length=0,this};oe.prototype.searchIndex=function(e){return this._searchIndexes.push(e),this};oe.reserved=Object.create(null);oe.prototype.reserved=oe.reserved;var Vr=oe.reserved;Vr.prototype=Vr.emit=Vr.listeners=Vr.removeListener=Vr.collection=Vr.errors=Vr.get=Vr.init=Vr.isModified=Vr.isNew=Vr.populated=Vr.remove=Vr.save=Vr.toObject=Vr.validate=1;Vr.collection=1;oe.prototype.path=function(t,e){if(e===void 0){if(this.paths[t]!=null)return this.paths[t];let a=gj(t),c=v_e(this,t,a);if(c!=null)return c;let l=_j(this,t);return l??(c=this.hasMixedParent(a),c??(C_e.test(t)?I_e(this,t,a):void 0))}let r=t.split(".")[0];if(Vr[r]&&!this.options.suppressReservedKeysWarning){let a=`\`${r}\` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass \`suppressReservedKeysWarning\` as a schema option.`;Ct.warn(a)}typeof e=="object"&&Ct.hasUserDefinedProperty(e,"ref")&&O_e(e.ref,t);let n=t.split(/\./),i=n.pop(),s=this.tree,o="";for(let a of n){if(Ct.specialProperties.has(a))throw new Error("Cannot set special property `"+a+"` on a schema");if(o=o+=(o.length>0?".":"")+a,s[a]||(this.nested[o]=!0,s[a]={}),typeof s[a]!="object"){let c="Cannot set nested path `"+t+"`. Parent path `"+o+"` already set to type "+s[a].name+".";throw new Error(c)}s=s[a]}s[i]=Dn(e),this.paths[t]=this.interpretAsType(t,e,this.options);let u=this.paths[t];if(u.$isSchemaMap){let a=t+".$*";this.paths[a]=u.$__schemaType,this.mapPaths.push(this.paths[a]),u.$__schemaType.$isSingleNested&&this.childSchemas.push({schema:u.$__schemaType.schema,model:u.$__schemaType.caster,path:t})}if(u.$isSingleNested){for(let a of Object.keys(u.schema.paths))this.singleNestedPaths[t+"."+a]=u.schema.paths[a];for(let a of Object.keys(u.schema.singleNestedPaths))this.singleNestedPaths[t+"."+a]=u.schema.singleNestedPaths[a];for(let a of Object.keys(u.schema.subpaths))this.singleNestedPaths[t+"."+a]=u.schema.subpaths[a];for(let a of Object.keys(u.schema.nested))this.singleNestedPaths[t+"."+a]="nested";Object.defineProperty(u.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),u.caster.base=this.base,this.childSchemas.push({schema:u.schema,model:u.caster,path:t})}else u.$isMongooseDocumentArray&&(Object.defineProperty(u.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),u.casterConstructor.base=this.base,this.childSchemas.push({schema:u.schema,model:u.casterConstructor,path:t}));if(u.$isMongooseArray&&u.caster instanceof cj){let a=t,c=u,l=[];for(;c.$isMongooseArray;)a=a+".$",c.$isMongooseDocumentArray?(c.$embeddedSchemaType._arrayPath=a,c.$embeddedSchemaType._arrayParentPath=t,c=c.$embeddedSchemaType):(c.caster._arrayPath=a,c.caster._arrayParentPath=t,c=c.caster),this.subpaths[a]=c;for(let h of l)this.subpaths[h.path]=h}if(u.$isMongooseDocumentArray){for(let a of Object.keys(u.schema.paths)){let c=u.schema.paths[a];this.subpaths[t+"."+a]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=u)}for(let a of Object.keys(u.schema.subpaths)){let c=u.schema.subpaths[a];this.subpaths[t+"."+a]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=u)}for(let a of Object.keys(u.schema.singleNestedPaths)){let c=u.schema.singleNestedPaths[a];this.subpaths[t+"."+a]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=u)}}return this};oe.prototype._gatherChildSchemas=function(){let e=[];for(let r of Object.keys(this.paths)){if(typeof r!="string")continue;let n=this.paths[r];n.$isMongooseDocumentArray||n.$isSingleNested?e.push({schema:n.schema,model:n.caster,path:r}):n.$isSchemaMap&&n.$__schemaType.$isSingleNested&&e.push({schema:n.$__schemaType.schema,model:n.$__schemaType.caster,path:r})}return this.childSchemas=e,e};function v_e(t,e,r){if(t.paths.hasOwnProperty(e))return t.paths[e];if(t.subpaths.hasOwnProperty(r)){let n=t.subpaths[r];return n==="nested"?void 0:n}if(t.singleNestedPaths.hasOwnProperty(r)&&typeof t.singleNestedPaths[r]=="object"){let n=t.singleNestedPaths[r];return n==="nested"?void 0:n}return null}function gj(t){return/\.\d+/.test(t)?t.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$"):t}function _j(t,e){if(t.mapPaths.length===0)return null;for(let r of t.mapPaths){let n=r.path;if(new RegExp("^"+n.replace(/\.\$\*/g,"\\.[^.]+")+"$").test(e))return t.paths[n]}return null}Object.defineProperty(oe.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null});oe.prototype.interpretAsType=function(t,e,r){if(e instanceof cj){if(e.path===t)return e;let a=e.clone();return a.path=t,a}let n=this.base!=null?this.base.Schema.Types:oe.Types,i=this.base!=null?this.base.Types:G1();if(!Ct.isPOJO(e)&&!(e instanceof lj)&&Ct.getFunctionName(e.constructor)!=="Object"){let c=e;e={},e[r.typeKey]=c}let s=e[r.typeKey]&&(e[r.typeKey]instanceof Function||r.typeKey!=="type"||!e.type.type)?e[r.typeKey]:{},o;if(Ct.isPOJO(s)||s==="mixed")return new n.Mixed(t,e);if(Array.isArray(s)||s===Array||s==="array"||s===n.Array){let a=s===Array||s==="array"?e.cast||e.of:s[0];if(a&&a.instanceOfSchema){if(!(a instanceof oe))if(this.options._isMerging)a=new oe(a);else throw new TypeError("Schema for array path `"+t+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${t}: new Schema(...)`);return new n.DocumentArray(t,a,e)}if(a&&a[r.typeKey]&&a[r.typeKey].instanceOfSchema){if(!(a[r.typeKey]instanceof oe))if(this.options._isMerging)a[r.typeKey]=new oe(a[r.typeKey]);else throw new TypeError("Schema for array path `"+t+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${t}: new Schema(...)`);return new n.DocumentArray(t,a[r.typeKey],e,a)}if(typeof a<"u"&&(Array.isArray(a)||a.type===Array||a.type=="Array"))return a&&a.type=="Array"&&(a.type=Array),new n.Array(t,this.interpretAsType(t,a,r),e);let c=a!=null&&a[r.typeKey]&&(r.typeKey!=="type"||!a.type.type)?a[r.typeKey]:a;if(typeof a=="string")a=n[a.charAt(0).toUpperCase()+a.substring(1)];else if(Ct.isPOJO(c))if(Object.keys(c).length){let l={minimize:r.minimize};r.typeKey&&(l.typeKey=r.typeKey),r.hasOwnProperty("strict")&&(l.strict=r.strict),r.hasOwnProperty("strictQuery")&&(l.strictQuery=r.strictQuery),r.hasOwnProperty("toObject")&&(l.toObject=Ct.omit(r.toObject,["transform"])),r.hasOwnProperty("toJSON")&&(l.toJSON=Ct.omit(r.toJSON,["transform"])),this._userProvidedOptions.hasOwnProperty("_id")?l._id=this._userProvidedOptions._id:oe.Types.DocumentArray.defaultOptions._id!=null&&(l._id=oe.Types.DocumentArray.defaultOptions._id);let h=new oe(c,l);return h.$implicitlyCreated=!0,new n.DocumentArray(t,h,e)}else return new n.Array(t,n.Mixed,e);if(a){if(s=a[r.typeKey]&&(r.typeKey!=="type"||!a.type.type)?a[r.typeKey]:a,Array.isArray(s))return new n.Array(t,this.interpretAsType(t,s,r),e);if(o=typeof s=="string"?s:s.schemaName||Ct.getFunctionName(s),o==="ClockDate"&&(o="Date"),o===void 0)throw new TypeError(`Invalid schema configuration: Could not determine the embedded type for array \`${t}\`. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(!n.hasOwnProperty(o))throw new TypeError(`Invalid schema configuration: \`${o}\` is not a valid type within the array \`${t}\`.See https://bit.ly/mongoose-schematypes for a list of valid schema types.`)}return new n.Array(t,a||n.Mixed,e,r)}if(s&&s.instanceOfSchema)return new n.Subdocument(s,t,e);if(Buffer.isBuffer(s)?o="Buffer":typeof s=="function"||typeof s=="object"?o=s.schemaName||Ct.getFunctionName(s):s===i.ObjectId?o="ObjectId":s===i.Decimal128?o="Decimal128":o=s==null?""+s:s.toString(),o&&(o=o.charAt(0).toUpperCase()+o.substring(1)),o==="ObjectID"&&(o="ObjectId"),o==="ClockDate"&&(o="Date"),o===void 0)throw new TypeError(`Invalid schema configuration: \`${t}\` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(n[o]==null)throw new TypeError(`Invalid schema configuration: \`${o}\` is not a valid type at path \`${t}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);let u=new n[o](t,e);return u.$isSchemaMap&&B_e(this,u,t,e,r),u};function B_e(t,e,r,n,i){let s=r+".$*",o={type:{}};Ct.hasUserDefinedProperty(n,"of")&&(Ct.isPOJO(n.of)&&Object.keys(n.of).length>0&&!Ct.hasUserDefinedProperty(n.of,t.options.typeKey)?o={[t.options.typeKey]:new oe(n.of)}:Ct.isPOJO(n.of)?o=Object.assign({},n.of):o={[t.options.typeKey]:n.of},o[t.options.typeKey]&&o[t.options.typeKey].instanceOfSchema&&o[t.options.typeKey].eachPath((c,l)=>{if(l.options.select===!0||l.options.select===!1)throw new mo('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+r+"."+c+'"')}),Ct.hasUserDefinedProperty(n,"ref")&&(o.ref=n.ref)),e.$__schemaType=t.interpretAsType(s,o,i)}oe.prototype.eachPath=function(t){let e=Object.keys(this.paths),r=e.length;for(let n=0;n<r;++n)t(e[n],this.paths[e[n]]);return this};oe.prototype.requiredPaths=function(e){if(this._requiredpaths&&!e)return this._requiredpaths;let r=Object.keys(this.paths),n=r.length,i=[];for(;n--;){let s=r[n];this.paths[s].isRequired&&i.push(s)}return this._requiredpaths=i,this._requiredpaths};oe.prototype.indexedPaths=function(){return this._indexedpaths?this._indexedpaths:(this._indexedpaths=this.indexes(),this._indexedpaths)};oe.prototype.pathType=function(t){if(this.paths.hasOwnProperty(t))return"real";if(this.virtuals.hasOwnProperty(t))return"virtual";if(this.nested.hasOwnProperty(t))return"nested";let e=gj(t);if(this.subpaths.hasOwnProperty(e)||this.subpaths.hasOwnProperty(t))return"real";let r=this.singleNestedPaths.hasOwnProperty(e)||this.singleNestedPaths.hasOwnProperty(t);return r?r==="nested"?"nested":"real":_j(this,t)!=null?"real":/\.\d+\.|\.\d+$/.test(t)?Ej(this,t,e):"adhocOrUndefined"};oe.prototype.hasMixedParent=function(t){let e=t.split(/\./g);t="";for(let r=0;r<e.length;++r)if(t=r>0?t+"."+e[r]:e[r],this.paths.hasOwnProperty(t)&&this.paths[t]instanceof da.Mixed)return this.paths[t];return null};oe.prototype.setupTimestamp=function(t){return b_e(this,t)};function Ej(t,e,r){let n=e.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(n.length<2)return t.paths.hasOwnProperty(n[0])?t.paths[n[0]]:"adhocOrUndefined";let i=t.path(n[0]),s=!1;if(!i)return"adhocOrUndefined";let o=n.length-1;for(let u=1;u<n.length;++u){s=!1;let a=n[u];if(u===o&&i&&!/\D/.test(a)){i.$isMongooseDocumentArray?i=i.$embeddedSchemaType:i instanceof da.Array?i=i.caster:i=void 0;break}if(!/\D/.test(a)){i instanceof da.Array&&u!==o&&(i=i.caster);continue}if(!(i&&i.schema)){i=void 0;break}s=i.schema.pathType(a)==="nested",i=i.schema.path(a)}return t.subpaths[r]=i,i?"real":s?"nested":"adhocOrUndefined"}function I_e(t,e,r){return Ej(t,e,r),t.subpaths[r]}oe.prototype.queue=function(t,e){return this.callQueue.push([t,e]),this};oe.prototype.pre=function(t){if(t instanceof RegExp){let e=Array.prototype.slice.call(arguments,1);for(let r of pj)t.test(r)&&this.pre.apply(this,[r].concat(e));return this}if(Array.isArray(t)){let e=Array.prototype.slice.call(arguments,1);for(let r of t)this.pre.apply(this,[r].concat(e));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this};oe.prototype.post=function(t){if(t instanceof RegExp){let e=Array.prototype.slice.call(arguments,1);for(let r of pj)t.test(r)&&this.post.apply(this,[r].concat(e));return this}if(Array.isArray(t)){let e=Array.prototype.slice.call(arguments,1);for(let r of t)this.post.apply(this,[r].concat(e));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this};oe.prototype.plugin=function(t,e){if(typeof t!="function")throw new Error('First param to `schema.plugin()` must be a function, got "'+typeof t+'"');if(e&&e.deduplicate){for(let r of this.plugins)if(r.fn===t)return this}return this.plugins.push({fn:t,opts:e}),t(this,e),this};oe.prototype.method=function(t,e,r){if(typeof t!="string")for(let n in t)this.methods[n]=t[n],this.methodOptions[n]=Dn(r);else this.methods[t]=e,this.methodOptions[t]=Dn(r);return this};oe.prototype.static=function(t,e){if(typeof t!="string")for(let r in t)this.statics[r]=t[r];else this.statics[t]=e;return this};oe.prototype.index=function(t,e){t||(t={}),e||(e={}),e.expires&&Ct.expires(e);for(let r in t)this.aliases[r]&&(t=Ct.renameObjKey(t,r,this.aliases[r]));for(let r of Object.keys(t))t[r]==="ascending"||t[r]==="asc"?t[r]=1:(t[r]==="descending"||t[r]==="desc")&&(t[r]=-1);for(let r of this.indexes())if(e.name==null&&r[1].name==null&&dj(r[0],t))throw new mo(`Schema already has an index on ${JSON.stringify(t)}`);return this._indexes.push([t,e]),this};oe.prototype.set=function(t,e,r){if(arguments.length===1)return this.options[t];switch(t){case"read":typeof e=="string"?this.options[t]={mode:S_(e),tags:r}:Array.isArray(e)&&typeof e[0]=="string"?this.options[t]={mode:S_(e[0]),tags:e[1]}:this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case"timestamps":this.setupTimestamp(e),this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case"_id":this.options[t]=e,this._userProvidedOptions[t]=this.options[t],e&&!this.paths._id?fj(this):!e&&this.paths._id!=null&&this.paths._id.auto&&this.remove("_id");break;default:this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break}return t==="strict"&&Md(this,{strict:e}),t==="strictQuery"&&Md(this,{strictQuery:e}),t==="toObject"&&(e={...e},delete e.transform,Md(this,{toObject:e})),t==="toJSON"&&(e={...e},delete e.transform,Md(this,{toJSON:e})),this};function Md(t,e){for(let{schema:r}of t.childSchemas)r.$implicitlyCreated&&(Object.assign(r.options,e),Md(r,e))}oe.prototype.get=function(t){return this.options[t]};var P_e="2d 2dsphere hashed text".split(" ");Object.defineProperty(oe,"indexTypes",{get:function(){return P_e},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}});oe.prototype.indexes=function(){return E_e(this)};oe.prototype.virtual=function(t,e){if(t instanceof K9||__e(t)==="VirtualType")return this.virtual(t.path,t.options);if(e=new g_e(e),Ct.hasUserDefinedProperty(e,["ref","refPath"])){if(e.localField==null)throw new Error("Reference virtuals require `localField` option");if(e.foreignField==null)throw new Error("Reference virtuals require `foreignField` option");let i=this.virtual(t);i.options=e,this.pre("init",function(a,c){if(A_.has(t,a)){let l=A_.get(t,a);if(this.$$populatedVirtuals||(this.$$populatedVirtuals={}),e.justOne||e.count?this.$$populatedVirtuals[t]=Array.isArray(l)?l[0]:l:this.$$populatedVirtuals[t]=Array.isArray(l)?l:l==null?[]:[l],c?.hydratedPopulatedDocs&&!e.count){let h=i._getModelNamesForPopulate(this),d=this.$$populatedVirtuals[t];if(!Array.isArray(d)&&!d.$__&&h?.length===1){let p=this.db.model(h[0]);this.$$populatedVirtuals[t]=p.hydrate(d)}else if(Array.isArray(d)&&h?.length===1){let p=this.db.model(h[0]);for(let m=0;m<d.length;++m)d[m].$__||(d[m]=p.hydrate(d[m]))}}A_.unset(t,a)}}),i.set(function(u){return this.$$populatedVirtuals||(this.$$populatedVirtuals={}),S_e(this.$$populatedVirtuals,t,u,e)}),typeof e.get=="function"&&i.get(e.get);let s=t.split("."),o=s[0];for(let u=0;u<s.length-1;++u)if(this.paths[o]!=null){if(this.paths[o].$isMongooseDocumentArray||this.paths[o].$isSingleNested){let a=s.slice(u+1).join(".");this.paths[o].schema.virtual(a,e);break}o+="."+s[u+1]}return i}let r=this.virtuals,n=t.split(".");if(this.pathType(t)==="real")throw new Error('Virtual path "'+t+'" conflicts with a real path in the schema');if(r[t]=n.reduce(function(i,s,o){return i[s]||(i[s]=o===n.length-1?new K9(e,t):{}),i[s]},this.tree),e&&e.applyToArray&&n.length>1){let i=this.path(n.slice(0,-1).join("."));if(i&&i.$isMongooseArray)return i.virtual(n[n.length-1],e);throw new mo(`Path "${i}" is not an array`)}return r[t]};oe.prototype.virtualpath=function(t){return this.virtuals.hasOwnProperty(t)?this.virtuals[t]:null};oe.prototype.remove=function(t){return typeof t=="string"&&(t=[t]),Array.isArray(t)&&t.forEach(function(e){if(!(this.path(e)==null&&!this.nested[e])){if(this.nested[e]){let r=Object.keys(this.paths).concat(Object.keys(this.nested));for(let n of r)n.startsWith(e+".")&&(delete this.paths[n],delete this.nested[n],G9(this,n));delete this.nested[e],G9(this,e);return}delete this.paths[e],G9(this,e)}},this),this};function G9(t,e){let r=e.split("."),n=r.pop(),i=t.tree;for(let s of r)i=i[s];delete i[n]}oe.prototype.removeVirtual=function(t){if(typeof t=="string"&&(t=[t]),Array.isArray(t)){for(let e of t)if(this.virtuals[e]==null)throw new mo(`Attempting to remove virtual "${e}" that does not exist.`);for(let e of t)delete this.paths[e],delete this.virtuals[e],e.indexOf(".")!==-1?A_.unset(e,this.tree):delete this.tree[e]}return this};oe.prototype.loadClass=function(t,e){return t===Object.prototype||t===Function.prototype||t.prototype.hasOwnProperty("$isMongooseModelPrototype")||t.prototype.hasOwnProperty("$isMongooseDocumentPrototype")?this:(this.loadClass(Object.getPrototypeOf(t),e),e||Object.getOwnPropertyNames(t).forEach(function(r){if(r.match(/^(length|name|prototype|constructor|__proto__)$/))return;let n=Object.getOwnPropertyDescriptor(t,r);n.hasOwnProperty("value")&&this.static(r,n.value)},this),Object.getOwnPropertyNames(t.prototype).forEach(function(r){if(r.match(/^(constructor)$/))return;let n=Object.getOwnPropertyDescriptor(t.prototype,r);e||typeof n.value=="function"&&this.method(r,n.value),typeof n.get=="function"&&(this.virtuals[r]&&(this.virtuals[r].getters=[]),this.virtual(r).get(n.get)),typeof n.set=="function"&&(this.virtuals[r]&&(this.virtuals[r].setters=[]),this.virtual(r).set(n.set))},this),this)};oe.prototype._getSchema=function(t){let e=this,r=e.path(t),n=[];if(r)return r.$fullPath=t,r;function i(o,u){let a=o.length+1,c,l;for(;a--;)if(l=o.slice(0,a).join("."),c=u.path(l),c){if(n.push(l),c.caster){if(c.caster instanceof da.Mixed)return c.caster.$fullPath=n.join("."),c.caster;if(a!==o.length){if(a+1===o.length&&c.$embeddedSchemaType&&(o[a]==="$"||w_(o[a])))return c.$embeddedSchemaType;if(c.schema){let h;return o[a]==="$"||w_(o[a])?a+1===o.length?c.$embeddedSchemaType:(h=i(o.slice(a+1),c.schema),h&&(h.$parentSchemaDocArray=h.$parentSchemaDocArray||(c.schema.$isSingleNested?null:c)),h):(h=i(o.slice(a),c.schema),h&&(h.$parentSchemaDocArray=h.$parentSchemaDocArray||(c.schema.$isSingleNested?null:c)),h)}}}else if(c.$isSchemaMap){if(a>=o.length)return c;if(a+1>=o.length||c.$__schemaType instanceof da.Mixed)return c.$__schemaType;if(c.$__schemaType.schema!=null)return i(o.slice(a+1),c.$__schemaType.schema)}return c.$fullPath=n.join("."),c}}let s=t.split(".");for(let o=0;o<s.length;++o)(s[o]==="$"||w_(s[o]))&&(s[o]="0"),M_e.test(s[o])&&(s[o]="$");return i(s,e)};oe.prototype._getPathType=function(t){let e=this;if(e.path(t))return"real";function n(i,s){let o=i.length+1,u,a;for(;o--;){if(a=i.slice(0,o).join("."),u=s.path(a),u)return u.caster?u.caster instanceof da.Mixed?{schema:u,pathType:"mixed"}:o!==i.length&&u.schema?i[o]==="$"||w_(i[o])?o===i.length-1?{schema:u,pathType:"nested"}:n(i.slice(o+1),u.schema):n(i.slice(o),u.schema):{schema:u,pathType:u.$isSingleNested?"nested":"array"}:{schema:u,pathType:"real"};if(o===i.length&&s.nested[a])return{schema:s,pathType:"nested"}}return{schema:u||s,pathType:"undefined"}}return n(t.split("."),e)};oe.prototype._transformDuplicateKeyError=function(e){if(!this._duplicateKeyErrorMessagesByPath||e.code!==11e3&&e.code!==11001)return e;if(e.keyPattern!=null){let r=e.keyPattern,n=Object.keys(r);if(n.length!==1)return e;let i=n[0];return this._duplicateKeyErrorMessagesByPath.hasOwnProperty(i)?new mo(this._duplicateKeyErrorMessagesByPath[i],{cause:e}):e}return e};function w_(t){return t.startsWith("$[")&&t.endsWith("]")}oe.prototype._preCompile=function(){this.plugin(A_e,{deduplicate:!0})};Aj.exports=Y9=oe;oe.Types=da=yd();Y9.ObjectId=da.ObjectId});var Q9=y((kFe,wj)=>{"use strict";f();var N_e=Hn(),b_=class extends N_e{constructor(e,r,n,i){let s=e.map(o=>o.message).join(", ");s.length>200&&(s=s.slice(0,200)+"..."),super(`${i} failed with ${e.length} Mongoose validation errors: ${s}`),this.validationErrors=e,this.results=r,this.rawResult=n,this.operation=i}};Object.defineProperty(b_.prototype,"name",{value:"MongooseBulkWriteError"});wj.exports=b_});var bj=y((LFe,Sj)=>{"use strict";f();var R_e=Fe(),O_=class extends R_e{constructor(e,r){super(e),this.errors=r}};Object.defineProperty(O_.prototype,"name",{value:"SyncIndexesError"});Sj.exports=O_});var J9=y((UFe,Oj)=>{"use strict";f();Oj.exports=function t(e,r,n,i){if(e[i])return;if(e[i]=!0,!n||!n.skipTopLevel){let a=null;for(let c of r){let l=c[1]==null?null:c[1].tags;if(!Array.isArray(l)){e.plugin(c[0],c[1]);continue}a=a||new Set(e.options.pluginTags||[]),l.find(h=>a.has(h))&&e.plugin(c[0],c[1])}}if(n=Object.assign({},n),delete n.skipTopLevel,n.applyPluginsToChildSchemas!==!1)for(let a of Object.keys(e.paths)){let c=e.paths[a];c.schema!=null&&(t(c.schema,r,n,i),c.caster.prototype.$__setSchema(c.schema))}let s=e.discriminators;if(s==null)return;let o=n.applyPluginsToDiscriminators,u=Object.keys(s);for(let a of u){let c=s[a];t(c,r,{skipTopLevel:!o},i)}}});var C_=y((zFe,X9)=>{"use strict";f();var Cj=null;X9.exports.get=function(){return Cj};X9.exports.set=function(t){Cj=t}});var Z9=y((HFe,Tj)=>{"use strict";f();function x_e(){return{result:{ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]},insertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,upsertedCount:0,upsertedIds:{},insertedIds:{},n:0}}Tj.exports=x_e});var Mj=y((KFe,Dj)=>{"use strict";f();var F_e=Fe(),T_=class extends F_e{constructor(e,r){super(e),this.errors=r}};Object.defineProperty(T_.prototype,"name",{value:"CreateCollectionsError"});Dj.exports=T_});var e5=y((QFe,Bj)=>{"use strict";f();var vj=L1().modifiedPaths;Bj.exports=function(e){let r=Object.keys(e),n={},i={};for(let s of r){if(s.startsWith("$")){vj(e[s],"",n);continue}i[s]=e[s]}return vj(i,"",n),n}});var t5=y((XFe,Ij)=>{"use strict";f();var $_e=e5();Ij.exports=function(e){if(e==null)return{};let r=$_e(e);return Object.keys(r).reduce((n,i)=>{let s=i.match(/\$\[[^\]]+\]/g);if(s==null)return n;for(let o of s){let u=i.indexOf(o);if(u!==i.lastIndexOf(o))throw new Error(`Path '${i}' contains the same array filter multiple times`);n[o.substring(2,o.length-1)]=i.substring(0,u-1).replace(/\$\[[^\]]+\]/g,"0")}return n},{})}});var Rj=y((e$e,Nj)=>{"use strict";f();var k_e=fd(),Pj=Gt(),q_e=Xi(),L_e=t5();Nj.exports=function(e,r,n,i,s){let o=i.split("."),u=null,a="adhocOrUndefined";n=n||{},r=r||{};let c=s!=null&&Array.isArray(s.arrayFilters)?s.arrayFilters:[],l=L_e(r);for(let h=0;h<o.length;++h){let d=o.slice(0,h+1).join("."),p=k_e(d);if(u=e.path(p),u!=null&&(a=e.pathType(p),(u.$isSingleNested||u.$isMongooseDocumentArrayElement)&&u.schema.discriminators!=null)){let m=Pj(u,"schema.options.discriminatorKey"),g=p+"."+m,_=g.replace(/\.\d+\./,"."),w=null;g in n&&(w=n[g]),_ in n&&(w=n[_]);let S=p.replace(/\.\d+$/,"");u.$isMongooseDocumentArrayElement&&Pj(n[S],"$elemMatch."+m)!=null&&(w=n[S].$elemMatch[m]);let C=d+"."+m;C in r&&(w=r[C]),g in r&&(w=r[g]);for(let v of Object.keys(l)){let j=l[v]+"."+m,k=v+"."+m;if(j===_){let q=c.find(R=>R.hasOwnProperty(k));q!=null&&(w=q[k])}}if(w==null)continue;let O=q_e(u.caster.discriminators,w),B=O&&O.schema;if(B==null)continue;let P=o.slice(h+1).join(".");if(u=B.path(P),u!=null){a=B._getPathType(P);break}}}return{type:a,schematype:u}}});var Fj=y((r$e,xj)=>{"use strict";f();var j_e=oa();xj.exports=function(e,r,n,i,s,o,u){if(e==null||!e.options||!e.options.immutable)return!1;let a=e.options.immutable;if(typeof a=="function"&&(a=a.call(u,u)),!a||o&&o.overwriteImmutable||r===!1)return!1;if(r==="throw")throw new j_e(null,`Field ${s} is immutable and strict = 'throw'`);return delete n[i],!0}});var qj=y((i$e,kj)=>{"use strict";f();var U_e=Gt();kj.exports=function(e,r,n){if(r==null)return;let i=Object.keys(r);for(let s of i){let o=s.startsWith("$");if(s==="$set"){let u=Object.keys(r[s]);for(let a of u)$j(e,r[s],a,r,n)}else o||$j(e,r,s,r,n)}};function $j(t,e,r,n,i){let s=t.path(r);if(s==null)return;let o=U_e(s,"options.immutable",null);o!=null&&(typeof o=="function"&&(o=o.call(i,i)),o&&(n.$setOnInsert=n.$setOnInsert||{},n.$setOnInsert[r]=e[r],delete e[r]))}});var n5=y((o$e,Lj)=>{"use strict";f();var r5=_c();Lj.exports=function(e,r,n){if(r.indexOf(".")===-1){if(r5.has(r))return;e[r]=n;return}let i=r.split("."),s=i.pop(),o=e;for(let u of i)r5.has(u)||(o[u]==null&&(o[u]={}),o=o[u]);r5.has(s)||(o[s]=n)}});var a5=y((a$e,Yj)=>{"use strict";f();var D_=cn(),vd=Fe(),jj=j9(),Uj=oa(),V_e=Ac(),s5=dd(),z_e=vc(),W_e=Cn(),Vj=Xi(),i5=Rj(),zj=Fj(),H_e=qj(),Gj=Sc().schemaMixedSymbol,G_e=n5(),Bd=Ce(),{internalToObjectOptions:K_e}=xs(),o5=new Set(["$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$bit"]);Yj.exports=function(e,r,n,i,s){if(r==null)return;if(n=n||{},Array.isArray(r)){let h=r.length;for(let d=0;d<h;++d){let p=Object.keys(r[d]);for(let m of p)r[d][m]=Y_e(m,r[d][m])}return r}if(e!=null&&s!=null&&Bd.hasUserDefinedProperty(s,e.options.discriminatorKey)&&typeof s[e.options.discriminatorKey]!="object"&&e.discriminators!=null){let h=s[e.options.discriminatorKey],d=Vj(i.model.discriminators,h);e=e.discriminators[h]||d&&d.schema||e}else if(e!=null&&n.overwriteDiscriminatorKey&&Bd.hasUserDefinedProperty(r,e.options.discriminatorKey)&&e.discriminators!=null){let h=r[e.options.discriminatorKey],d=Vj(i.model.discriminators,h);e=e.discriminators[h]||d&&d.schema||e}n.upsert&&H_e(e,r,i);let o=Object.keys(r),u=o.length,a={},c,l=!1;for(s=s||{};u--;){let h=o[u];o5.has(h)?h==="$set"&&a.$set||(a[h]=r[h]):(a.$set||(r.$set?a.$set=r.$set:a.$set={}),a.$set[h]=r[h],o.splice(u,1),~o.indexOf("$set")||o.push("$set"))}for(u=o.length;u--;){let h=o[u];if(c=a[h],l=l||h.startsWith("$"),c!=null&&c.$__&&(c=c.toObject(K_e),a[h]=c),c&&typeof c=="object"&&!Buffer.isBuffer(c)&&o5.has(h))Kj(e,c,h,n,i,s);else{let d="Invalid atomic update value for "+h+". Expected an object, received "+typeof c;throw new Error(d)}h.startsWith("$")&&Bd.isEmptyObject(c)&&delete a[h]}return Object.keys(a).length===0&&n.upsert&&Object.keys(s).length>0?{$setOnInsert:{...s}}:a};function Y_e(t,e){if(t==="$unset"){if(typeof e!="string"&&(!Array.isArray(e)||e.find(r=>typeof r!="string")))throw new vd("Invalid $unset in pipeline, must be  a string or an array of strings");return e}if(t==="$project"){if(e==null||typeof e!="object")throw new vd("Invalid $project in pipeline, must be an object");return e}if(t==="$addFields"||t==="$set"){if(e==null||typeof e!="object")throw new vd("Invalid "+t+" in pipeline, must be an object");return e}else if(t==="$replaceRoot"||t==="$replaceWith"){if(e==null||typeof e!="object")throw new vd("Invalid "+t+" in pipeline, must be an object");return e}throw new vd('Invalid update pipeline operator: "'+t+'"')}function Kj(t,e,r,n,i,s,o){let u=n.strict,a=o?o+".":"",c=Object.keys(e),l=c.length,h=!1,d,p,m,g=null,_=u??t.options.strict;for(;l--;){if(p=c[l],m=e[p],r==="$pull"){if(d=t._getSchema(a+p),d==null){let S=i5(t,e,s,a+p,n);S.schematype!=null&&(d=S.schematype)}if(d!=null&&d.schema!=null){e[p]=z_e(d.schema,e[p],n,i),h=!0;continue}}let w=a?a+p:p;if(t.discriminatorMapping!=null&&w===t.options.discriminatorKey&&t.discriminatorMapping.value!==e[p]&&!n.overwriteDiscriminatorKey){if(_==="throw"){let S=new Error(`Can't modify discriminator key "`+w+'" on discriminator model');g=Nc(S,i,w,g);continue}else if(_){delete e[p];continue}}if(W_e(m)==="Object"){if(d=t._getSchema(a+p),d==null){let S=i5(t,e,s,a+p,n);S.schematype!=null&&(d=S.schematype)}if(r!=="$setOnInsert"&&zj(d,u,e,p,a+p,n,i))continue;if(d&&d.caster&&r in u5)if("$each"in m){h=!0;try{e[p]={$each:uf(d,m.$each,r,p,i,a+p)}}catch(S){g=Nc(S,i,p,g)}m.$slice!=null&&(e[p].$slice=m.$slice|0),m.$sort&&(e[p].$sort=m.$sort),m.$position!=null&&(e[p].$position=s5(m.$position))}else{if(d!=null&&d.$isSingleNested){let S=u??d.schema.options.strict;try{e[p]=d.castForQuery(null,m,i,{strict:S})}catch(C){g=Nc(C,i,p,g)}}else try{e[p]=uf(d,m,r,p,i,a+p)}catch(S){g=Nc(S,i,p,g)}if(e[p]===void 0){delete e[p];continue}h=!0}else if(r==="$currentDate"||r in u5&&d){try{e[p]=uf(d,m,r,p,i,a+p)}catch(S){g=Nc(S,i,p,g)}if(e[p]===void 0){delete e[p];continue}h=!0}else if(r==="$rename"){let S=new jj(`${a}${p}.$rename`);try{e[p]=uf(S,m,r,p,i,a+p)}catch(C){g=Nc(C,i,p,g)}if(e[p]===void 0){delete e[p];continue}h=!0}else{let S=a+p,C=t._getPathType(S),O=u;if(C&&C.schema&&O==null&&(O=C.schema.options.strict),C.pathType==="undefined"){if(O==="throw")throw new Uj(S);if(O){delete e[p];continue}}h|=Kj(t,m,r,n,i,s,a+p)||Bd.isObject(m)&&Object.keys(m).length===0}}else{let S=p==="$each"||p==="$or"||p==="$and"||p==="$in"?o:a+p;if(d=t._getSchema(S),r!=="$setOnInsert"&&zj(d,u,e,p,a+p,n,i))continue;let C=t._getPathType(S);if(d==null){let P=i5(t,e,s,S,n);P.schematype!=null&&(d=P.schematype,C=P.type)}let O=u;if(C&&C.schema&&u==null&&(O=C.schema.options.strict),O&&!d&&!/real|nested/.test(C.pathType)){if(O==="throw"&&t.virtuals[S]==null)throw new Uj(a+p);delete e[p]}else{if(r==="$rename"){if(e[p]==null)throw new D_("String",e[p],`${a}${p}.$rename`);let P=new jj(`${a}${p}.$rename`);e[p]=P.castForQuery(null,e[p],i);continue}try{a.length===0||p.indexOf(".")===-1?e[p]=uf(d,m,r,p,i,a+p):(O!==!1||d!=null)&&(G_e(e,p,uf(d,m,r,p,i,a+p)),delete e[p])}catch(P){g=Nc(P,i,p,g)}if(Array.isArray(e[p])&&(r==="$addToSet"||r==="$push")&&p!=="$each"&&d&&d.caster&&!d.caster.$isMongooseArray&&!d.caster[Gj]&&(e[p]={$each:e[p]}),e[p]===void 0){delete e[p];continue}h=!0}}}if(g!=null)throw g;return h}function Nc(t,e,r,n){if(typeof e!="object"||!e.options.multipleCastError)throw t;return n=n||new V_e,n.addError(r,t),n}var Wj={$pop:1,$inc:1},Q_e={$unset:1},u5={$push:1,$addToSet:1,$set:1,$setOnInsert:1};var Hj={$set:1,$setOnInsert:1};function uf(t,e,r,n,i,s){if(!t){if(r in Wj)try{return s5(e)}catch{throw new D_("number",e,s)}return e}if(t.caster&&r in u5&&(Bd.isObject(e)||Array.isArray(e))&&!Hj[r]){let u=0,a=t;for(;a.$isMongooseArray;)++u,a=a.caster;let c=0,l=e;for(;Array.isArray(l);)++c,l=l[0];let h=u-c;for(;c<u;)e=[e],++c;let d=t.applySetters(Array.isArray(e)?e:[e],i);for(let p=0;p<h;++p)d=d[0];return d}if(r in Q_e)return e;if(r in Wj){if(e==null)throw new D_("number",e,t.path);if(r==="$inc")return t.castForQuery(null,e,i);try{return s5(e)}catch{throw new D_("number",e,t.path)}}if(r==="$currentDate")return typeof e=="object"?{$type:e.$type}:!!e;if(o5.has(n))return t.castForQuery(n,e,i);if(Hj[r]){let u=e!=null&&t.$isMongooseArray&&t.$fullPath!=null&&!t.$fullPath.match(/\d+$/),a=t[Gj]!=null;return u||a?t.applySetters(e,i):t.castForQuery(null,e,i)}return t.castForQuery(null,e,i)}});var c5=y((l$e,Qj)=>{"use strict";f();var J_e=e5();Qj.exports=function(e,r,n){if(!n||!(r&&r.upsert))return;J_e(e)[n]||(r.overwrite?e[n]=0:(e.$setOnInsert||(e.$setOnInsert={}),e.$setOnInsert[n]=0))}});var l5=y((h$e,Xj)=>{"use strict";f();var Jj=L1().modifiedPaths,X_e=Gt();Xj.exports=function(t,e,r,n){n=n||{};let i=n.setDefaultsOnInsert!=null?n.setDefaultsOnInsert:e.base.options.setDefaultsOnInsert;if(!n.upsert||i===!1)return r;let s=Object.keys(r||{}),o={},u={},a=s.length,c={},l=!1;for(let p=0;p<a;++p)s[p].startsWith("$")&&(Jj(r[s[p]],"",c),l=!0);l||Jj(r,"",c);let h=Object.keys(t),d=h.length;for(let p=0;p<d;++p){let m=h[p],g=t[m];if(g&&typeof g=="object"){let _=Object.keys(g),w=_.length,S=!1;for(let C=0;C<w;++C)if(_[C].startsWith("$")){S=!0;break}if(S)continue}o[m]=!0,c[m]=!0}return n&&n.overwrite&&!l||e.eachPath(function(p,m){if(m.path==="_id"&&m.options.auto)return;let g=m.getDefault(null,!0);Z_e(c,p)||typeof g>"u"||m.splitPath().includes("$*")||(r=r||{},r.$setOnInsert=r.$setOnInsert||{},X_e(r,p)==null&&(r.$setOnInsert[p]=g),u[p]=g)}),r};function Z_e(t,e){if(t[e])return!0;let r=e.split("."),n=r[0];for(let s=1;s<r.length;++s){if(t[n])return!0;n+="."+r[s]}let i=Object.keys(t);if(i.length){let s=e+".";for(let o of i)if(o.slice(0,e.length+1)===s)return!0}return!1}});var f5=y((p$e,nr)=>{"use strict";f();var eEe=Fe(),tEe=Xi(),Zj=QC(),eU=JC(),Id=vc(),tU=a5(),rEe=$t(),rU=c5(),{inspect:nEe}=require("util"),nU=l5();nr.exports=function(e,r,n){let i=e.base.now();return r.insertOne?s=>nr.exports.castInsertOne(e,r.insertOne,n).then(()=>s(null),o=>s(o)):r.updateOne?s=>{try{nr.exports.castUpdateOne(e,r.updateOne,n,i),s(null)}catch(o){s(o)}}:r.updateMany?s=>{try{nr.exports.castUpdateMany(e,r.updateMany,n,i),s(null)}catch(o){s(o)}}:r.replaceOne?s=>{nr.exports.castReplaceOne(e,r.replaceOne,n).then(()=>s(null),o=>s(o))}:r.deleteOne?s=>{try{nr.exports.castDeleteOne(e,r.deleteOne),s(null)}catch(o){s(o)}}:r.deleteMany?s=>{try{nr.exports.castDeleteMany(e,r.deleteMany),s(null)}catch(o){s(o)}}:s=>{let o=new eEe(`Invalid op passed to \`bulkWrite()\`: ${nEe(r)}`);s(o,null)}};nr.exports.castInsertOne=async function(e,r,n){let i=af(e,r.document),s=new i(r.document);i.schema.options.timestamps&&M_(r,n)&&s.initializeTimestamps(),n.session!=null&&s.$session(n.session);let o=i?.schema?.options?.versionKey;return o&&s[o]==null&&(s[o]=0),r.document=s,n.skipValidation||r.skipValidation||await r.document.$validate(),r};nr.exports.castUpdateOne=function(e,r,n,i){if(!r.filter)throw new Error("Must provide a filter object.");if(!r.update)throw new Error("Must provide an update object.");let s=af(e,r.filter),o=s.schema,u=n.strict!=null?n.strict:s.schema.options.strict,a=rEe(r.update);Pd(o,r.filter);let c=M_(r,n);if(s.schema.$timestamps!=null&&c){let d=s.schema.$timestamps.createdAt,p=s.schema.$timestamps.updatedAt;eU(i,d,p,a,{})}c&&Zj(i,a,s.schema);let l=e.base.options.setDefaultsOnInsert;return(r.setDefaultsOnInsert==null?l:r.setDefaultsOnInsert)!==!1&&nU(r.filter,s.schema,a,{setDefaultsOnInsert:!0,upsert:r.upsert}),rU(a,r,s.schema.options.versionKey),r.filter=Id(s.schema,r.filter,{strict:u,upsert:r.upsert}),r.update=tU(s.schema,a,{strict:u,upsert:r.upsert,arrayFilters:r.arrayFilters,overwriteDiscriminatorKey:r.overwriteDiscriminatorKey},s,r.filter),r};nr.exports.castUpdateMany=function(e,r,n,i){if(!r.filter)throw new Error("Must provide a filter object.");if(!r.update)throw new Error("Must provide an update object.");let s=af(e,r.filter),o=s.schema,u=n.strict!=null?n.strict:s.schema.options.strict,a=e.base.options.setDefaultsOnInsert;(r.setDefaultsOnInsert==null?a:r.setDefaultsOnInsert)!==!1&&nU(r.filter,s.schema,r.update,{setDefaultsOnInsert:!0,upsert:r.upsert});let l=M_(r,n);if(s.schema.$timestamps!=null&&l){let h=s.schema.$timestamps.createdAt,d=s.schema.$timestamps.updatedAt;eU(i,h,d,r.update,{})}l&&Zj(i,r.update,s.schema),Pd(o,r.filter),rU(r.update,r,s.schema.options.versionKey),r.filter=Id(s.schema,r.filter,{strict:u,upsert:r.upsert}),r.update=tU(s.schema,r.update,{strict:u,upsert:r.upsert,arrayFilters:r.arrayFilters,overwriteDiscriminatorKey:r.overwriteDiscriminatorKey},s,r.filter)};nr.exports.castReplaceOne=async function(e,r,n){let i=af(e,r.filter),s=i.schema,o=n.strict!=null?n.strict:i.schema.options.strict;Pd(s,r.filter),r.filter=Id(i.schema,r.filter,{strict:o,upsert:r.upsert});let u=new i(r.replacement,o,!0);i.schema.options.timestamps&&M_(r,n)&&u.initializeTimestamps(),n.session!=null&&u.$session(n.session);let a=i?.schema?.options?.versionKey;if(a&&u[a]==null&&(u[a]=0),r.replacement=u,n.skipValidation||r.skipValidation){r.replacement=r.replacement.toBSON();return}await r.replacement.$validate(),r.replacement=r.replacement.toBSON()};nr.exports.castDeleteOne=function(e,r){let n=af(e,r.filter),i=n.schema;Pd(i,r.filter),r.filter=Id(n.schema,r.filter)};nr.exports.castDeleteMany=function(e,r){let n=af(e,r.filter),i=n.schema;Pd(i,r.filter),r.filter=Id(n.schema,r.filter)};nr.exports.cast={insertOne:nr.exports.castInsertOne,updateOne:nr.exports.castUpdateOne,updateMany:nr.exports.castUpdateMany,replaceOne:nr.exports.castReplaceOne,deleteOne:nr.exports.castDeleteOne,deleteMany:nr.exports.castDeleteMany};function Pd(t,e){t!=null&&t.discriminatorMapping&&!t.discriminatorMapping.isRoot&&(e[t.discriminatorMapping.key]=t.discriminatorMapping.value)}function af(t,e){let r=t.schema.options.discriminatorKey;return e!=null&&e.hasOwnProperty(r)&&(t=tEe(t.discriminators,e[r])||t),t}function M_(t,e){let r=t.timestamps,n=e.timestamps;return r??n??!0}});var aU=y((y$e,uU)=>{"use strict";f();var iEe=$O(),h5=require("events").EventEmitter,sEe=z1(),sr=tl(),iU=Q9(),ir=Hn(),oEe=WO(),uEe=bj(),aEe=J9(),cEe=$t(),lEe=C_(),fEe=Gt(),hEe=Z9(),sU=Ti(),d5=Ce(),dEe=Mj(),v_=f5(),{modelSymbol:B_}=ye(),pEe=lC(),mEe=ye().arrayAtomicsSymbol,Nd=ye().sessionNewDocuments,yEe=["MONGODB-X509"];function _e(t){this.base=t,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=sr,this._readyState=sr.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],typeof t>"u"||!t.connections.length?this.id=0:this.id=t.nextConnectionId,this._queue=[]}Object.setPrototypeOf(_e.prototype,h5.prototype);Object.defineProperty(_e.prototype,"readyState",{get:function(){return this._readyState===sr.connected&&this._lastHeartbeatAt!=null&&this.client?.topology?.s?.description?.type!=="LoadBalanced"&&typeof this.client?.topology?.s?.description?.heartbeatFrequencyMS=="number"&&Date.now()-this._lastHeartbeatAt>=this.client.topology.s.description.heartbeatFrequencyMS*2?sr.disconnected:this._readyState},set:function(t){if(!(t in sr))throw new Error("Invalid connection state: "+t);if(this._readyState!==t){this._readyState=t;for(let e of this.otherDbs)e.readyState=t;sr.connected===t&&(this._hasOpened=!0),this.emit(sr[t])}}});_e.prototype.get=function(e){return this.config.hasOwnProperty(e)?this.config[e]:fEe(this.options,e)};_e.prototype.set=function(e,r){return this.config.hasOwnProperty(e)?(this.config[e]=r,r):(this.options=this.options||{},this.options[e]=r,r)};_e.prototype.collections;_e.prototype.name;_e.prototype.models;_e.prototype.id;Object.defineProperty(_e.prototype,"plugins",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(_e.prototype,"host",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(_e.prototype,"port",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(_e.prototype,"user",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(_e.prototype,"pass",{configurable:!0,enumerable:!0,writable:!0});_e.prototype.db;_e.prototype.client;_e.prototype.config;_e.prototype.createCollection=async function(e,r){if(typeof r=="function"||arguments.length>=3&&typeof arguments[2]=="function")throw new ir("Connection.prototype.createCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.createCollection(e,r)};_e.prototype.bulkWrite=async function(e,r){await this._waitForConnect(),r=r||{};let n=r.ordered==null?!0:r.ordered,i=this.base.transactionAsyncLocalStorage?.getStore();(!r||!r.hasOwnProperty("session"))&&i?.session!=null&&(r={...r,session:i.session});let s=this.base.now(),o=null;if(n){let u=[];for(let a of e){if(typeof a.model!="string"&&!a.model?.[B_])throw new ir("Must specify model in Connection.prototype.bulkWrite() operations");let c=a.model[B_]?a.model:this.model(a.model);if(a.name==null)throw new ir("Must specify operation name in Connection.prototype.bulkWrite()");if(!v_.cast.hasOwnProperty(a.name))throw new ir(`Unrecognized bulkWrite() operation name ${a.name}`);await v_.cast[a.name](c,a,r,s),u.push({...a,namespace:c.namespace()})}o=await this.client.bulkWrite(u,r)}else{let u=[],a=[],c=[],l=[],h=[];for(let p=0;p<e.length;++p){let m=e[p];if(typeof m.model!="string"&&!m.model?.[B_]){let w=new ir("Must specify model in Connection.prototype.bulkWrite() operations");c.push({index:p,error:w}),h[p]=w;continue}let g;try{g=m.model[B_]?m.model:this.model(m.model)}catch(w){c.push({index:p,error:w});continue}if(m.name==null){let w=new ir("Must specify operation name in Connection.prototype.bulkWrite()");c.push({index:p,error:w}),h[p]=w;continue}if(!v_.cast.hasOwnProperty(m.name)){let w=new ir(`Unrecognized bulkWrite() operation name ${m.name}`);c.push({index:p,error:w}),h[p]=w;continue}let _=null;try{_=v_.cast[m.name](g,m,r,s)}catch(w){c.push({index:p,error:w}),h[p]=w;continue}pEe(_)?l.push(_.then(()=>{u.push({...m,namespace:g.namespace()}),a.push(p)},w=>{c.push({index:p,error:w}),h[p]=w})):(u.push({...m,namespace:g.namespace()}),a.push(p))}if(l.length>0&&await Promise.all(l),c=c.sort((p,m)=>p.index-m.index).map(p=>p.error),u.length===0){if(r.throwOnValidationError&&c.length)throw new iU(c,h,o,"bulkWrite");return hEe()}let d;[o,d]=await this.client.bulkWrite(u,r).then(p=>[p,null]).catch(p=>[null,p]),d&&c.length>0&&(d.mongoose=d.mongoose||{},d.mongoose.validationErrors=c);for(let p=0;p<a.length;++p)h[a[p]]=null;if(c.length>0){if(r.throwOnValidationError)throw new iU(c,h,o,"bulkWrite");o.mongoose=o.mongoose||{},o.mongoose.validationErrors=c,o.mongoose.results=h}}return o};_e.prototype.createCollections=async function(e={}){let r={},n={},{continueOnError:i}=e;delete e.continueOnError;for(let s of Object.values(this.models))try{r[s.modelName]=await s.createCollection({})}catch(o){if(i)r[s.modelName]=o;else{n[s.modelName]=o;break}}if(!i&&Object.keys(n).length){let s=Object.entries(n).map(([u,a])=>`${u}: ${a.message}`).join(", ");throw new dEe(s,n)}return r};_e.prototype.withSession=async function(e){if(arguments.length===0)throw new Error("Please provide an executor function");return await this.client.withSession(e)};_e.prototype.startSession=async function(e){if(arguments.length>=2&&typeof arguments[1]=="function")throw new ir("Connection.prototype.startSession() no longer accepts a callback");return await this._waitForConnect(),this.client.startSession(e)};_e.prototype.transaction=function(e,r){return this.startSession().then(n=>(n[Nd]=new Map,n.withTransaction(()=>gEe(e,n,this.base),r).then(i=>(delete n[Nd],i)).catch(i=>{throw delete n[Nd],i}).finally(()=>{n.endSession().catch(()=>{})})))};async function gEe(t,e,r){try{return r.transactionAsyncLocalStorage==null?await t(e):await new Promise(i=>{r.transactionAsyncLocalStorage.run({session:e},()=>i(t(e)))})}catch(n){throw _Ee(e),n}}function _Ee(t){for(let e of t[Nd].keys()){let r=t[Nd].get(e);r.hasOwnProperty("isNew")&&(e.$isNew=r.isNew),r.hasOwnProperty("versionKey")&&e.set(e.schema.options.versionKey,r.versionKey),r.modifiedPaths.length>0&&e.$__.activePaths.states.modify==null&&(e.$__.activePaths.states.modify={});for(let n of r.modifiedPaths){let i=e.$__.activePaths.paths[n];i!=null&&delete e.$__.activePaths[i][n],e.$__.activePaths.paths[n]="modify",e.$__.activePaths.states.modify[n]=!0}for(let n of r.atomics.keys()){let i=e.$__getValue(n);i!=null&&(i[mEe]=r.atomics.get(n))}}}_e.prototype.dropCollection=async function(e){if(arguments.length>=2&&typeof arguments[1]=="function")throw new ir("Connection.prototype.dropCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.dropCollection(e)};_e.prototype._waitForConnect=async function(){(this.readyState===sr.connecting||this.readyState===sr.disconnected)&&this._shouldBufferCommands()&&await new Promise(e=>{this._queue.push({fn:e})})};_e.prototype.listCollections=async function(){return await this._waitForConnect(),await this.db.listCollections().toArray()};_e.prototype.listDatabases=async function(){throw new ir("listDatabases() not implemented by driver")};_e.prototype.dropDatabase=async function(){if(arguments.length>=1&&typeof arguments[0]=="function")throw new ir("Connection.prototype.dropDatabase() no longer accepts a callback");await this._waitForConnect();for(let e of Object.values(this.models))delete e.$init;return this.db.dropDatabase()};_e.prototype._shouldBufferCommands=function(){return this.config.bufferCommands!=null?this.config.bufferCommands:this.base.get("bufferCommands")!=null?this.base.get("bufferCommands"):!0};_e.prototype.error=function(e,r){return r?(r(e),null):(this.listeners("error").length>0&&this.emit("error",e),Promise.reject(e))};_e.prototype.onOpen=function(){this.readyState=sr.connected;for(let t of this._queue)t.fn.apply(t.ctx,t.args);this._queue=[];for(let t in this.collections)d5.object.hasOwnProperty(this.collections,t)&&this.collections[t].onOpen();this.emit("open")};_e.prototype.openUri=async function(e,r){if((this.readyState===sr.connecting||this.readyState===sr.connected)&&this._connectionString===e)return this;this._closeCalled=!1;let n=!1;r&&"_fireAndForget"in r&&(n=r._fireAndForget,delete r._fireAndForget);try{EEe.apply(arguments)}catch(i){throw n||(this.$initialConnection=Promise.reject(i)),i}this.$initialConnection=this.createClient(e,r).then(()=>this).catch(i=>{throw this.readyState=sr.disconnected,this.listeners("error").length>0&&sU(()=>this.emit("error",i)),i});for(let i of Object.values(this.models))i.init().catch(function(){});if(n)return this;try{await this.$initialConnection}catch(i){throw oU(i)}return this};_e.prototype.on=function(e,r){return e==="error"&&this.$initialConnection&&this.$initialConnection.catch(()=>{}),h5.prototype.on.call(this,e,r)};_e.prototype.once=function(e,r){return e==="error"&&this.$initialConnection&&this.$initialConnection.catch(()=>{}),h5.prototype.once.call(this,e,r)};function EEe(t,e,r){if(typeof e=="function"&&r==null)throw new ir("Connection.prototype.openUri() no longer accepts a callback");if(typeof r=="function")throw new ir("Connection.prototype.openUri() no longer accepts a callback")}function oU(t){if(t?.name==="MongoServerSelectionError"){let e=t;t=new oEe,t.assimilateError(e)}return t}_e.prototype.destroy=async function(e){if(typeof e=="function"||arguments.length===2&&typeof arguments[1]=="function")throw new ir("Connection.prototype.destroy() no longer accepts a callback");return e!=null&&typeof e=="object"?this.$wasForceClosed=!!e.force:this.$wasForceClosed=!!e,this._close(e,!0)};_e.prototype.close=async function(e){if(typeof e=="function"||arguments.length===2&&typeof arguments[1]=="function")throw new ir("Connection.prototype.close() no longer accepts a callback");e!=null&&typeof e=="object"?this.$wasForceClosed=!!e.force:this.$wasForceClosed=!!e;for(let r of Object.values(this.models))delete r.$init;return this._close(e,!1)};_e.prototype._close=async function(e,r){let n=this,i=this._closeCalled;this._closeCalled=!0,this._destroyCalled=r,this.client!=null&&(this.client._closeCalled=!0,this.client._destroyCalled=r);let s=this;switch(this.readyState){case sr.disconnected:r&&this.base.connections.indexOf(s)!==-1&&this.base.connections.splice(this.base.connections.indexOf(s),1),i||(await this.doClose(e),this.onClose(e));break;case sr.connected:this.readyState=sr.disconnecting,await this.doClose(e),r&&n.base.connections.indexOf(s)!==-1&&this.base.connections.splice(this.base.connections.indexOf(s),1),this.onClose(e);break;case sr.connecting:return new Promise((o,u)=>{let a=()=>{this.removeListener("open",a),this.removeListener("error",a),r?this.destroy(e).then(o,u):this.close(e).then(o,u)};this.once("open",a),this.once("error",a)});case sr.disconnecting:return new Promise(o=>{this.once("close",()=>{r&&this.base.connections.indexOf(s)!==-1&&this.base.connections.splice(this.base.connections.indexOf(s),1),o()})})}return this};_e.prototype.doClose=function(){throw new Error("Connection#doClose unimplemented by driver")};_e.prototype.onClose=function(e){this.readyState=sr.disconnected;for(let r in this.collections)d5.object.hasOwnProperty(this.collections,r)&&this.collections[r].onClose(e);this.emit("close",e);for(let r of this.otherDbs)this._destroyCalled?r.destroy({force:e,skipCloseClient:!0}):r.close({force:e,skipCloseClient:!0})};_e.prototype.collection=function(t,e){let r={autoIndex:this.config.autoIndex!=null?this.config.autoIndex:this.base.options.autoIndex,autoCreate:this.config.autoCreate!=null?this.config.autoCreate:this.base.options.autoCreate,autoSearchIndex:this.config.autoSearchIndex!=null?this.config.autoSearchIndex:this.base.options.autoSearchIndex};e=Object.assign({},r,e?cEe(e):{}),e.$wasForceClosed=this.$wasForceClosed;let n=this.base&&this.base.__driver&&this.base.__driver.Collection||lEe.get().Collection;return t in this.collections||(this.collections[t]=new n(t,this,e)),this.collections[t]};_e.prototype.plugin=function(t,e){return this.plugins.push([t,e]),this};_e.prototype.model=function(e,r,n,i){if(!(this instanceof _e))throw new ir("`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead");let s;if(typeof e=="function"&&(s=e,e=s.name),typeof r=="string"&&(n=r,r=!1),d5.isObject(r)&&(r.instanceOfSchema?r instanceof this.base.Schema||(r=r._clone(this.base.Schema)):r=new sEe(r)),r&&!r.instanceOfSchema)throw new Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");let o={cache:!1,overwriteModels:this.base.options.overwriteModels},u=Object.assign(o,i,{connection:this});if(this.models[e]&&!n&&u.overwriteModels!==!0){if(r&&r.instanceOfSchema&&r!==this.models[e].schema)throw new ir.OverwriteModelError(e);return this.models[e]}let a;if(r&&r.instanceOfSchema)return aEe(r,this.plugins,null,"$connectionPluginsApplied"),a=this.base._model(s||e,r,n,u),this.models[e]||(this.models[e]=a),a.init().catch(function(){}),a;if(this.models[e]&&n)return a=this.models[e],r=a.prototype.schema,a.__subclass(this,r,n);if(arguments.length===1){if(a=this.models[e],!a)throw new ir.MissingSchemaError(e);return a}if(!a)throw new ir.MissingSchemaError(e);return this===a.prototype.db&&(!n||n===a.collection.name)?(this.models[e]||(this.models[e]=a),a):(this.models[e]=a.__subclass(this,r,n),this.models[e])};_e.prototype.deleteModel=function(e){if(typeof e=="string"){let r=this.model(e);if(r==null)return this;let n=r.collection.name;delete this.models[e],delete this.collections[n],this.emit("deleteModel",r)}else if(e instanceof RegExp){let r=e,n=this.modelNames();for(let i of n)r.test(i)&&this.deleteModel(i)}else throw new Error('First parameter to `deleteModel()` must be a string or regexp, got "'+e+'"');return this};_e.prototype.watch=function(e,r){let n=s=>{sU(()=>{if(this.readyState===sr.connecting)this.once("open",function(){let o=this.db.watch(e,r);s(null,o)});else{let o=this.db.watch(e,r);s(null,o)}})};return new iEe(n,e,r)};_e.prototype.asPromise=async function(){try{return await this.$initialConnection,this}catch(e){throw oU(e)}};_e.prototype.modelNames=function(){return Object.keys(this.models)};_e.prototype.shouldAuthenticate=function(){return this.user!=null&&(this.pass!=null||this.authMechanismDoesNotRequirePassword())};_e.prototype.authMechanismDoesNotRequirePassword=function(){return this.options&&this.options.auth?yEe.indexOf(this.options.auth.authMechanism)>=0:!0};_e.prototype.optionsProvideAuthenticationData=function(e){return e&&e.user&&(e.pass||this.authMechanismDoesNotRequirePassword())};_e.prototype.getClient=function(){return this.client};_e.prototype.setClient=function(){throw new ir("Connection#setClient not implemented by driver")};_e.prototype.createClient=function(){throw new ir("Connection#createClient not implemented by driver")};_e.prototype.syncIndexes=async function(e={}){let r={},n={},{continueOnError:i}=e;delete e.continueOnError;for(let s of Object.values(this.models))try{r[s.modelName]=await s.syncIndexes(e)}catch(o){if(i)r[s.modelName]=o;else{n[s.modelName]=o;break}}if(!i&&Object.keys(n).length){let s=Object.entries(n).map(([u,a])=>`${u}: ${a.message}`).join(", ");throw new uEe(s,n)}return r};_e.STATES=sr;uU.exports=_e});var p5=y((_$e,AEe)=>{AEe.exports={name:"mongoose",description:"Mongoose MongoDB ODM",version:"8.9.2",author:"Guillermo Rauch <guillermo@learnboost.com>",keywords:["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],license:"MIT",dependencies:{bson:"^6.10.1",kareem:"2.6.3",mongodb:"~6.12.0",mpath:"0.9.0",mquery:"5.0.0",ms:"2.1.3",sift:"17.1.3"},devDependencies:{"@babel/core":"7.26.0","@babel/preset-env":"7.26.0","@typescript-eslint/eslint-plugin":"^8.18.0","@typescript-eslint/parser":"^8.18.0",acquit:"1.3.0","acquit-ignore":"0.2.1","acquit-require":"0.1.1","assert-browserify":"2.0.0",axios:"1.1.3","babel-loader":"8.2.5","broken-link-checker":"^0.7.8",buffer:"^5.6.0",cheerio:"1.0.0","crypto-browserify":"3.12.1",dotenv:"16.4.5",dox:"1.0.0",eslint:"8.57.0","eslint-plugin-markdown":"^5.0.0","eslint-plugin-mocha-no-only":"1.2.0",express:"^4.19.2","fs-extra":"~11.2.0","highlight.js":"11.10.0","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","markdownlint-cli2":"^0.15.0",marked:"15.0.3",mkdirp:"^3.0.1",mocha:"10.8.2",moment:"2.30.1","mongodb-memory-server":"10.1.2",ncp:"^2.0.0",nyc:"15.1.0",pug:"3.0.3",q:"1.5.1",sinon:"19.0.2","stream-browserify":"3.0.0",tsd:"0.31.2",typescript:"5.7.2",uuid:"11.0.3",webpack:"5.96.1"},directories:{lib:"./lib/mongoose"},scripts:{"docs:clean":"npm run docs:clean:stable","docs:clean:stable":"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:5x":"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:6x":"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:copy:tmp":"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/","docs:copy:tmp:5x":"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x","docs:copy:tmp:6x":"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x","docs:generate":"node ./scripts/website.js","docs:generate:sponsorData":"node ./scripts/loadSponsorData.js","docs:test":"npm run docs:generate","docs:view":"node ./scripts/static.js","docs:prepare:publish:stable":"git checkout gh-pages && git merge master && npm run docs:generate","docs:prepare:publish:5x":"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x","docs:prepare:publish:6x":"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x","docs:prepare:publish:7x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x","docs:check-links":"blc http://127.0.0.1:8089 -ro",lint:"eslint .","lint-js":"eslint . --ext .js --ext .cjs","lint-ts":"eslint . --ext .ts","lint-md":'markdownlint-cli2 "**/*.md" "#node_modules" "#benchmarks"',"build-browser":"(rm ./dist/* || true) && node ./scripts/build-browser.js",prepublishOnly:"npm run build-browser",release:"git pull && git push origin master --tags && npm publish","release-5x":"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x","release-6x":"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x",mongo:"node ./tools/repl.js","publish-7x":"npm publish --tag 7x",test:"mocha --exit ./test/*.test.js","test-deno":"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.js","test-rs":"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js","test-tsd":"node ./test/types/check-types-filename && tsd",tdd:"mocha ./test/*.test.js --inspect --watch --recursive --watch-files ./**/*.{js,ts}","test-coverage":"nyc --reporter=html --reporter=text npm test","ts-benchmark":"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check"},main:"./index.js",types:"./types/index.d.ts",engines:{node:">=16.20.1"},bugs:{url:"https://github.com/Automattic/mongoose/issues/new"},repository:{type:"git",url:"git://github.com/Automattic/mongoose.git"},homepage:"https://mongoosejs.com",browser:"./dist/browser.umd.js",config:{mongodbMemoryServer:{disablePostinstall:!0}},funding:{type:"opencollective",url:"https://opencollective.com/mongoose"},tsd:{directory:"test/types",compilerOptions:{esModuleInterop:!1,strict:!0,allowSyntheticDefaultImports:!0,strictPropertyInitialization:!1,noImplicitAny:!1,strictNullChecks:!0,module:"commonjs",target:"ES2017"}}}});var lU=y((E$e,cU)=>{"use strict";f();var wEe=$t(),SEe=Hn();function bEe(t,e){let r=e||{},n=r.readPreference?r.readPreference:DEe(t),i=wEe(r);return n&&n!=="primary"&&n!=="primaryPreferred"?OEe(n,i):i}function OEe(t,e){if(CEe(e)&&TEe(t))vEe();else return MEe(e)}function CEe(t){let e=t.config&&t.config.autoIndex,{autoCreate:r,autoIndex:n}=t;return!!(e||r||n)}function TEe(t){return t==="secondary"||t==="secondaryPreferred"}function DEe(t){let r=/(?:&|\?)readPreference=(\w+)(?:&|$)/.exec(t);return r?r[1]:null}function MEe(t){return t.config={autoIndex:!1},t.autoCreate=!1,t.autoIndex=!1,t}function vEe(){throw new SEe('MongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex')}cU.exports=bEe});var hU=y(fU=>{"use strict";f();fU.setTimeout=setTimeout});var gU=y((b$e,yU)=>{"use strict";f();var dU=aU(),Rc=Hn(),ei=tl(),pU=Xo(),BEe=p5(),IEe=lU(),PEe=hU().setTimeout,mU=Ce();function yu(){dU.apply(this,arguments),this._listening=!1,this._lastHeartbeatAt=null}yu.STATES=ei;Object.setPrototypeOf(yu.prototype,dU.prototype);yu.prototype.useDb=function(t,e){if(e=e||{},e.useCache&&this.relatedDbs[t])return this.relatedDbs[t];let r=new this.constructor;r.name=t,r.base=this.base,r.collections={},r.models={},r.replica=this.replica,r.config=Object.assign({},this.config,r.config),r.name=this.name,r.options=this.options,r._readyState=this._readyState,r._closeCalled=this._closeCalled,r._hasOpened=this._hasOpened,r._listening=!1,r._parent=this,r.host=this.host,r.port=this.port,r.user=this.user,r.pass=this.pass;let n=this;r.client=n.client,this.db&&this._readyState===ei.connected?i():this._queue.push({fn:i});function i(){r.client=n.client;let s={};e.hasOwnProperty("noListener")&&(s.noListener=e.noListener),r.db=n.client.db(t,s),r._lastHeartbeatAt=n._lastHeartbeatAt,r.onOpen()}return r.name=t,e.noListener!==!0&&this.otherDbs.push(r),r.otherDbs.push(this),e&&e.useCache&&(this.relatedDbs[r.name]=r,r.relatedDbs=this.relatedDbs),r};yu.prototype.removeDb=function(e){let r=this.otherDbs.filter(n=>n.name===e);if(!r.length)throw new Rc(`No connections to database "${e}" found`);for(let n of r)n._closeCalled=!0,n._destroyCalled=!0,n._readyState=ei.disconnected,n.$wasForceClosed=!0;delete this.relatedDbs[e],this.otherDbs=this.otherDbs.filter(n=>n.name!==e)};yu.prototype.doClose=async function(e){if(this.client==null)return this;let r=!1;return e!=null&&typeof e=="object"&&(r=e.skipCloseClient,e=e.force),r?this:(await this.client.close(e),await new Promise(n=>PEe(n,1)),this)};yu.prototype.listDatabases=async function(){return await this._waitForConnect(),await this.db.admin().listDatabases()};yu.prototype.createClient=async function(e,r){if(typeof e!="string")throw new Rc(`The \`uri\` parameter to \`openUri()\` must be a string, got "${typeof e}". Make sure the first parameter to \`mongoose.connect()\` or \`mongoose.createConnection()\` is a string.`);if(this._destroyCalled)throw new Rc("Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.");if((this.readyState===ei.connecting||this.readyState===ei.connected)&&this._connectionString!==e)throw new Rc("Can't call `openUri()` on an active connection with different connection strings. Make sure you aren't calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections");if(r=IEe(e,r),r){let s=r.config&&r.config.autoIndex!=null?r.config.autoIndex:r.autoIndex;s!=null&&(this.config.autoIndex=s!==!1,delete r.config,delete r.autoIndex),"autoCreate"in r&&(this.config.autoCreate=!!r.autoCreate,delete r.autoCreate),"sanitizeFilter"in r&&(this.config.sanitizeFilter=r.sanitizeFilter,delete r.sanitizeFilter),"autoSearchIndex"in r&&(this.config.autoSearchIndex=r.autoSearchIndex,delete r.autoSearchIndex),(r.user||r.pass)&&(r.auth=r.auth||{},r.auth.username=r.user,r.auth.password=r.pass,this.user=r.user,this.pass=r.pass),delete r.user,delete r.pass,r.bufferCommands!=null&&(this.config.bufferCommands=r.bufferCommands,delete r.bufferCommands)}else r={};this._connectionOptions=r;let n=r.dbName;n!=null&&(this.$dbName=n),delete r.dbName,mU.hasUserDefinedProperty(r,"driverInfo")||(r.driverInfo={name:"Mongoose",version:BEe.version}),this.readyState=ei.connecting,this._connectionString=e;let i;try{i=new pU.MongoClient(e,r)}catch(s){throw this.readyState=ei.disconnected,s}this.client=i,i.setMaxListeners(0),await i.connect(),m5(this,i,r,n);for(let s of this.otherDbs)m5(s,i,{},s.name);return this};yu.prototype.setClient=function(e){if(!(e instanceof pU.MongoClient))throw new Rc("Must call `setClient()` with an instance of MongoClient");if(this.readyState!==ei.disconnected)throw new Rc("Cannot call `setClient()` on a connection that is already connected.");if(e.topology==null)throw new Rc("Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.");this._connectionString=e.s.url,m5(this,e,{},e.s.options.dbName);for(let r of Object.values(this.models))r.init().catch(function(){});return this};function m5(t,e,r,n){let i=n!=null?e.db(n):e.db();t.db=i,t.client=e,t.host=e&&e.s&&e.s.options&&e.s.options.hosts&&e.s.options.hosts[0]&&e.s.options.hosts[0].host||void 0,t.port=e&&e.s&&e.s.options&&e.s.options.hosts&&e.s.options.hosts[0]&&e.s.options.hosts[0].port||void 0,t.name=n??i.databaseName,t._closeCalled=e._closeCalled;let s=()=>{t.readyState!==ei.connected&&(t.readyState=ei.connected,t.emit("reconnect"),t.emit("reconnected"),t.onOpen())},o=e&&e.topology&&e.topology.description&&e.topology.description.type||"";o==="Single"?e.on("serverDescriptionChanged",u=>{u.newDescription.type==="Unknown"?t.readyState=ei.disconnected:s()}):o.startsWith("ReplicaSet")&&e.on("topologyDescriptionChanged",u=>{let a=u.newDescription;t.readyState===ei.connected&&a.type!=="ReplicaSetWithPrimary"?t.readyState=ei.disconnected:t.readyState===ei.disconnected&&a.type==="ReplicaSetWithPrimary"&&s()}),e.on("serverHeartbeatSucceeded",()=>{t._lastHeartbeatAt=Date.now()}),r.monitorCommands&&(e.on("commandStarted",u=>t.emit("commandStarted",u)),e.on("commandFailed",u=>t.emit("commandFailed",u)),e.on("commandSucceeded",u=>t.emit("commandSucceeded",u))),t.onOpen();for(let u in t.collections)mU.object.hasOwnProperty(t.collections,u)&&t.collections[u].onOpen()}yU.exports=yu});var _U=y(y5=>{"use strict";f();y5.Collection=xR();y5.Connection=gU()});var AU=y((D$e,EU)=>{"use strict";f();var NEe=Object.freeze(["allowDiskUse","applyPluginsToChildSchemas","applyPluginsToDiscriminators","autoCreate","autoIndex","autoSearchIndex","bufferCommands","bufferTimeoutMS","cloneSchemas","createInitialConnection","debug","forceRepopulate","id","timestamps.createdAt.immutable","maxTimeMS","objectIdGetter","overwriteModels","returnOriginal","runValidators","sanitizeFilter","sanitizeProjection","selectPopulatedPaths","setDefaultsOnInsert","strict","strictPopulate","strictQuery","toJSON","toObject","transactionAsyncLocalStorage","translateAliases"]);EU.exports=NEe});var SU=y((v$e,wU)=>{"use strict";f();var REe=Fe(),I_=class extends REe{constructor(e){let r=e.map(n=>n.message).join(", ");r.length>50&&(r=r.slice(0,50)+"..."),super(`eachAsync() finished with ${e.length} errors: ${r}`),this.errors=e}};Object.defineProperty(I_.prototype,"name",{value:"EachAsyncMultiError"});wU.exports=I_});var _5=y((I$e,OU)=>{"use strict";f();var xEe=SU(),g5=Ti();OU.exports=async function(e,r,n){let i=n.parallel||1,s=n.batchSize,o=n.signal,u=n.continueOnError,a=[],c=FEe(),l=!1;return new Promise((p,m)=>{if(o!=null){if(o.aborted)return p(null);o.addEventListener("abort",()=>(l=!0,p(null)),{once:!0})}if(s!=null){if(typeof s!="number")throw new TypeError("batchSize must be a number");if(Number.isInteger(s)){if(s<1)throw new TypeError("batchSize must be at least 1")}else throw new TypeError("batchSize must be an integer")}h((g,_)=>{if(g!=null)return m(g);p(_)})});function h(p){let m=0,g=0,_=null;for(let S=0;S<i;++S)c(w());function w(){let S=[],C=!1;return O;function O(B){if(C||l)return B();if(_)return B();e(function(P,v){if(_!=null)return B();if(P!=null)if(P.name==="MongoCursorExhaustedError")v=null;else if(u)a.push(P);else return _=P,p(P),B();if(v==null){if(C=!0,m<=0){let q=u?bU(a):_;p(q)}else s&&S.length&&d(S,g++,k);return B()}if(++m,g5(()=>B()),s&&S.push(v),s&&S.length!==s){g5(()=>c(O));return}let j=s?S:v;function k(q){if(s?(m-=S.length,S=[]):--m,q!=null)if(u)a.push(q);else return _=q,p(q);if((C||l)&&m<=0){let R=u?bU(a):_;return p(R)}g5(()=>c(O))}d(j,g++,k)})}}}function d(p,m,g){let _;try{_=r(p,m)}catch(w){return g(w)}_&&typeof _.then=="function"?_.then(function(){g(null)},function(w){g(w||new Error("`eachAsync()` promise rejected without error"))}):g(null)}};function FEe(){let t=[],e=null,r=0;return function(s){if(e===null&&t.length===0)return e=r++,s(n);t.push(s)};function n(){t.length!==0?(e=r++,t.shift()(n)):e=null}}function bU(t){return t.length===0?null:new xEe(t)}});var NU=y((N$e,PU)=>{"use strict";f();var Rd=Fe(),MU=require("stream").Readable,$Ee=_5(),vU=nd(),kEe=P1(),E5=Ti(),{once:qEe}=require("events"),BU=require("util");function hn(t){MU.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.skipped=!1,this.query=t,this._closed=!1;let e=t.model;this._mongooseOptions={},this._transforms=[],this.model=e,this.options={},e.hooks.execPre("find",t,r=>{if(r!=null){if(r instanceof kEe.skipWrappedFunction){let n=r.args[0];if(n!=null&&(!Array.isArray(n)||n.length)){let i=new Rd('Cannot `skipMiddlewareFunction()` with a value when using `.find().cursor()`, value must be nullish or empty array, got "'+BU.inspect(n)+'".');this._markError(i),this.listeners("error").length>0&&this.emit("error",i);return}this.skipped=!0,this.emit("cursor",null);return}this._markError(r),this.listeners("error").length>0&&this.emit("error",r);return}Object.assign(this.options,t._optionsForExec()),this._transforms=this._transforms.concat(t._transforms.slice()),this.options.transform&&this._transforms.push(this.options.transform),this.options.batchSize&&(this.options._populateBatchSize=Math.min(this.options.batchSize,5e3)),e.collection._shouldBufferCommands()&&e.collection.buffer?e.collection.queue.push([()=>CU(t,this)]):CU(t,this)})}BU.inherits(hn,MU);function CU(t,e){try{let r=t.model.collection.find(t._conditions,e.options);e.cursor=r,e.emit("cursor",r)}catch(r){e._markError(r),e.listeners("error").length>0&&e.emit("error",e._error)}}hn.prototype._read=function(){N_(this,(t,e)=>{if(t)return this.emit("error",t);if(!e){this.push(null),this.cursor.close(function(r){if(r)return this.emit("error",r)});return}this.push(e)})};hn.prototype.getDriverCursor=async function(){return this.cursor?this.cursor:(await qEe(this,"cursor"),this.cursor)};Object.defineProperty(hn.prototype,"map",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0});hn.prototype._markError=function(t){return this._error=t,this};hn.prototype.close=async function(){if(typeof arguments[0]=="function")throw new Rd("QueryCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close(),this._closed=!0,this.emit("close")}catch(e){throw this.listeners("error").length>0&&this.emit("error",e),e}};hn.prototype._destroy=function(e,r){let n=null;return this.cursor?n=Promise.resolve():n=new Promise(i=>{this.once("cursor",i)}),n.then(()=>{this.cursor.close()}).then(()=>{this._closed=!0,r()}).catch(i=>{r(i)}),this};hn.prototype.rewind=function(){return IU(this,()=>{this.cursor.rewind()}),this};hn.prototype.next=async function(){if(typeof arguments[0]=="function")throw new Rd("QueryCursor.prototype.next() no longer accepts a callback");if(this._closed)throw new Rd("Cannot call `next()` on a closed cursor");return new Promise((e,r)=>{N_(this,function(n,i){if(n)return r(n);e(i)})})};hn.prototype.eachAsync=function(t,e){if(typeof arguments[2]=="function")throw new Rd("QueryCursor.prototype.eachAsync() no longer accepts a callback");return typeof e=="function"&&(e={}),e=e||{},$Ee(r=>N_(this,r),t,e)};hn.prototype.options;hn.prototype.addCursorFlag=function(t,e){return IU(this,()=>{this.cursor.addCursorFlag(t,e)}),this};hn.prototype.transformNull=function(t){return arguments.length===0&&(t=!0),this._mongooseOptions.transformNull=t,this};hn.prototype._transformForAsyncIterator=function(){return this._transforms.indexOf(TU)===-1&&this.map(TU),this};Symbol.asyncIterator!=null&&(hn.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()});function TU(t){return t==null?{done:!0}:{value:t,done:!1}}function N_(t,e){let r=e;if(t._transforms.length&&(r=function(n,i){if(n||i===null&&!t._mongooseOptions.transformNull)return e(n,i);e(n,t._transforms.reduce(function(s,o){return o.call(t,s)},i))}),t._error)return E5(function(){r(t._error)});if(t.skipped)return E5(()=>r(null,null));if(t.cursor)if(t.query._mongooseOptions.populate&&!t._pop&&(t._pop=vU.preparePopulationOptionsMQ(t.query,t.query._mongooseOptions),t._pop.__noPromise=!0),t.query._mongooseOptions.populate&&t.options._populateBatchSize>1){if(t._batchDocs&&t._batchDocs.length)return P_(t,t._batchDocs.shift(),t._pop,r);if(t._batchExhausted)return r(null,null);t._batchDocs=[],t.cursor.next().then(n=>{cf.call({ctx:t,callback:r},null,n)},n=>{cf.call({ctx:t,callback:r},n)});return}else return t.cursor.next().then(n=>{if(!n){r(null,null);return}if(!t.query._mongooseOptions.populate)return P_(t,n,null,r);t.query.model.populate(n,t._pop).then(i=>{P_(t,i,t._pop,r)},i=>{r(i)})},n=>{r(n)});else t.once("error",e),t.once("cursor",function(n){if(t.removeListener("error",e),n==null)return t.skipped?e(null,null):void 0;N_(t,e)})}function cf(t,e){if(t)return this.callback(t);if(!e)return this.ctx._batchExhausted=!0,DU.call(this);if(this.ctx._batchDocs.push(e),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize){if(this.ctx._batchDocs.length>0&&this.ctx._batchDocs.length%1e3===0)return E5(()=>this.ctx.cursor.next().then(r=>{cf.call(this,null,r)},r=>{cf.call(this,r)}));this.ctx.cursor.next().then(r=>{cf.call(this,null,r)},r=>{cf.call(this,r)})}else DU.call(this)}function DU(){if(!this.ctx._batchDocs.length)return this.callback(null,null);this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{P_(this.ctx,this.ctx._batchDocs.shift(),this.ctx._pop,this.callback)},t=>{this.callback(t)})}function P_(t,e,r,n){if(t.query._mongooseOptions.lean)return t.model.hooks.execPost("find",t.query,[[e]],a=>{if(a!=null)return n(a);n(null,e)});let{model:i,_fields:s,_userProvidedFields:o,options:u}=t.query;vU.createModelAndInit(i,e,s,o,u,r,(a,c)=>{if(a!=null)return n(a);t.model.hooks.execPost("find",t.query,[[c]],l=>{if(l!=null)return n(l);n(null,c)})})}function IU(t,e){if(t.cursor)return e();t.once("cursor",function(r){r!=null&&e()})}PU.exports=hn});var w5=y((x$e,xU)=>{"use strict";f();var A5=Ce();function LEe(t,e,r){RU(t,e,r,"maxTimeMS")}function jEe(t,e,r){RU(t,e,r,"allowDiskUse")}xU.exports={applyGlobalMaxTimeMS:LEe,applyGlobalDiskUse:jEe};function RU(t,e,r,n){A5.hasUserDefinedProperty(t,n)||(A5.hasUserDefinedProperty(e,n)?t[n]=e[n]:A5.hasUserDefinedProperty(r,n)&&(t[n]=r[n]))}});var S5=y(($$e,FU)=>{"use strict";f();FU.exports=function(e,r){if(r.readConcern!==void 0||r&&r.session&&r.session.transaction)return;let n=e.options?.readConcern?.level;n!=null&&(r.readConcern={level:n})}});var b5=y((q$e,$U)=>{"use strict";f();$U.exports=function(e,r){if(r.writeConcern!=null||r&&r.session&&r.session.transaction)return;let n=e.options.writeConcern??{};Object.keys(n).length!=0?(r.writeConcern={},!("w"in r)&&n.w!=null&&(r.writeConcern.w=n.w),!("j"in r)&&n.j!=null&&(r.writeConcern.j=n.j),!("wtimeout"in r)&&n.wtimeout!=null&&(r.writeConcern.wtimeout=n.wtimeout)):(!("w"in r)&&n.w!=null&&(r.w=n.w),!("j"in r)&&n.j!=null&&(r.j=n.j),!("wtimeout"in r)&&n.wtimeout!=null&&(r.wtimeout=n.wtimeout))}});var LU=y((j$e,qU)=>{"use strict";f();var kU=md();qU.exports=function(e,r,n){if(!Object.keys(n).some(kU))return r.castForQuery(null,n,e);let s=Object.keys(n),o=s.length;for(;o--;){let u=s[o],a=n[u];if(u==="$not"){if(a&&r&&!r.caster){let c=Object.keys(a);if(c.length&&kU(c[0]))for(let l of Object.keys(a))a[l]=r.castForQuery(l,a[l],e);else n[u]=r.castForQuery(u,a,e);continue}}else n[u]=r.castForQuery(u,a,e)}return n}});var UU=y((V$e,jU)=>{"use strict";f();var UEe=/^\d+$/;jU.exports=function(e,r){let n=e.path(r);if(n!=null)return n;let i=r.split("."),s="",o=!1;for(let u of i)o&&UEe.test(u)||(s=s.length===0?u:s+"."+u,n=e.path(s),n!=null&&n.schema&&(e=n.schema,s="",!o&&n.$isMongooseDocumentArray&&(o=!0)));return n}});var GU=y((W$e,HU)=>{"use strict";f();var VEe=LU(),VU=fd(),zU=UU(),zEe=t5();HU.exports=function(e){let r=e.options.arrayFilters,n=e.getUpdate(),i=e.schema,s=zEe(n),o=i.options.strict;e._mongooseOptions.strict!=null&&(o=e._mongooseOptions.strict),e.model&&e.model.base.options.strictQuery!=null&&(o=e.model.base.options.strictQuery),i._userProvidedOptions.strictQuery!=null&&(o=i._userProvidedOptions.strictQuery),e._mongooseOptions.strictQuery!=null&&(o=e._mongooseOptions.strictQuery),WU(r,i,o,s,e)};function WU(t,e,r,n,i){if(Array.isArray(t))for(let s of t){if(s==null)throw new Error(`Got null array filter in ${t}`);let o=Object.keys(s).filter(p=>s[p]!=null);if(o.length===0)continue;let u=o[0];if(u==="$and"||u==="$or"){for(let p of o)WU(s[p],e,r,n,i);continue}let a=u.indexOf("."),c=a===-1?u:u.substring(0,a);if(n[c]==null)continue;let l=VU(n[c]),h=zU(e,l),d=h!=null?h.schema:null;d!=null&&d.discriminators!=null&&s[c+"."+d.options.discriminatorKey]&&(d=d.discriminators[s[c+"."+d.options.discriminatorKey]]||d);for(let p of o){if(n[p]===null||Object.keys(n).length===0)continue;let m=p.indexOf("."),g=m===-1?null:p.substring(m),_;if(g==null||d==null?_=h:(g=VU(g),_=zU(d,g)),_==null){if(!r)return;let w=g==null?l+".0":l+".0"+g;throw new Error(`Could not find path "${w}" in schema`)}typeof s[p]=="object"?s[p]=VEe(i,_,s[p]):s[p]=_.castForQuery(null,s[p])}}}});var R_=y((G$e,KU)=>{"use strict";f();var WEe=j1(),HEe=v1();KU.exports=function t(e){if(e==null)return!1;let r=Object.keys(e),n=r.length;if(n===0)return!1;for(let i=0;i<n;++i){let s=r[i];if(!s.startsWith("+")&&WEe(e[s])&&e[s])return HEe(e[s])?t(e[s]):!!e[s]}return!1}});var QU=y((Y$e,YU)=>{"use strict";f();YU.exports=function(e,r){return e===r||r.startsWith(e+".")}});var JU=y(lr=>{"use strict";f();var O5=["__proto__","constructor","prototype"],x_=lr.clone=function t(e,r){if(e==null)return e;if(Array.isArray(e))return lr.cloneArray(e,r);if(e.constructor){if(/ObjectI[dD]$/.test(e.constructor.name))return typeof e.clone=="function"?e.clone():new e.constructor(e.id);if(e.constructor.name==="ReadPreference")return new e.constructor(e.mode,t(e.tags,r));if(e._bsontype=="Binary"&&e.buffer&&e.value)return typeof e.clone=="function"?e.clone():new e.constructor(e.value(!0),e.sub_type);if(e.constructor.name==="Date"||e.constructor.name==="Function")return new e.constructor(+e);if(e.constructor.name==="RegExp")return new RegExp(e);if(e.constructor.name==="Buffer")return Buffer.from(e)}if(KEe(e))return lr.cloneObject(e,r);if(e.valueOf)return e.valueOf()};lr.cloneObject=function(e,r){let n=r&&r.minimize,i={},s=Object.keys(e),o=s.length,u=!1,a,c="",l=0;for(l=0;l<o;++l)c=s[l],O5.indexOf(c)===-1&&(a=x_(e[c],r),(!n||typeof a<"u")&&(u||(u=!0),i[c]=a));return n?u&&i:i};lr.cloneArray=function(e,r){let n=[],i=e.length,s=0;for(;s<i;s++)n.push(x_(e[s],r));return n};lr.merge=function t(e,r){let n=Object.keys(r);for(let i of n)O5.indexOf(i)===-1&&(typeof e[i]>"u"?e[i]=r[i]:lr.isObject(r[i])?t(e[i],r[i]):e[i]=r[i])};lr.mergeClone=function t(e,r){let n=Object.keys(r);for(let i of n)O5.indexOf(i)===-1&&(typeof e[i]>"u"?e[i]=x_(r[i]):lr.isObject(r[i])?t(e[i],r[i]):e[i]=x_(r[i]))};lr.readPref=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest";break}return e};lr.readConcern=function(e){if(typeof e=="string"){switch(e){case"l":e="local";break;case"a":e="available";break;case"m":e="majority";break;case"lz":e="linearizable";break;case"s":e="snapshot";break}e={level:e}}return e};var GEe=Object.prototype.toString;lr.toString=function(t){return GEe.call(t)};var KEe=lr.isObject=function(t){return lr.toString(t)=="[object Object]"};lr.keys=Object.keys;lr.create=typeof Object.create=="function"?Object.create:YEe;function YEe(t){if(arguments.length>1)throw new Error("Adding properties is not supported");function e(){}return e.prototype=t,new e}lr.inherits=function(t,e){t.prototype=lr.create(e.prototype),t.prototype.constructor=t};lr.isArgumentsObject=function(t){return Object.prototype.toString.call(t)==="[object Arguments]"}});var C5=y((Z$e,XU)=>{f();function QEe(t){r.debug=r,r.default=r,r.coerce=a,r.disable=o,r.enable=i,r.enabled=u,r.humanize=ng(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let h=0;for(let d=0;d<l.length;d++)h=(h<<5)-h+l.charCodeAt(d),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(l){let h,d=null,p,m;function g(..._){if(!g.enabled)return;let w=g,S=Number(new Date),C=S-(h||S);w.diff=C,w.prev=h,w.curr=S,h=S,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let O=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(P,v)=>{if(P==="%%")return"%";O++;let j=r.formatters[v];if(typeof j=="function"){let k=_[O];P=j.call(w,k),_.splice(O,1),O--}return P}),r.formatArgs.call(w,_),(w.log||r.log).apply(w,_)}return g.namespace=l,g.useColors=r.useColors(),g.color=r.selectColor(l),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>d!==null?d:(p!==r.namespaces&&(p=r.namespaces,m=r.enabled(l)),m),set:_=>{d=_}}),typeof r.init=="function"&&r.init(g),g}function n(l,h){let d=r(this.namespace+(typeof h>"u"?":":h)+l);return d.log=this.log,d}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let h=(typeof l=="string"?l:"").trim().replace(" ",",").split(",").filter(Boolean);for(let d of h)d[0]==="-"?r.skips.push(d.slice(1)):r.names.push(d)}function s(l,h){let d=0,p=0,m=-1,g=0;for(;d<l.length;)if(p<h.length&&(h[p]===l[d]||h[p]==="*"))h[p]==="*"?(m=p,g=d,p++):(d++,p++);else if(m!==-1)p=m+1,g++,d=g;else return!1;for(;p<h.length&&h[p]==="*";)p++;return p===h.length}function o(){let l=[...r.names,...r.skips.map(h=>"-"+h)].join(",");return r.enable(""),l}function u(l){for(let h of r.skips)if(s(l,h))return!1;for(let h of r.names)if(s(l,h))return!0;return!1}function a(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}XU.exports=QEe});var ZU=y((Ai,F_)=>{f();Ai.formatArgs=XEe;Ai.save=ZEe;Ai.load=e3e;Ai.useColors=JEe;Ai.storage=t3e();Ai.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();Ai.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function JEe(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function XEe(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+F_.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}Ai.log=console.debug||console.log||(()=>{});function ZEe(t){try{t?Ai.storage.setItem("debug",t):Ai.storage.removeItem("debug")}catch{}}function e3e(){let t;try{t=Ai.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function t3e(){try{return localStorage}catch{}}F_.exports=C5()(Ai);var{formatters:r3e}=F_.exports;r3e.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var tV=y((rke,eV)=>{"use strict";f();eV.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),i=e.indexOf("--");return n!==-1&&(i===-1||n<i)}});var iV=y((ike,nV)=>{"use strict";f();var n3e=require("os"),rV=require("tty"),ts=tV(),{env:vr}=process,pa;ts("no-color")||ts("no-colors")||ts("color=false")||ts("color=never")?pa=0:(ts("color")||ts("colors")||ts("color=true")||ts("color=always"))&&(pa=1);"FORCE_COLOR"in vr&&(vr.FORCE_COLOR==="true"?pa=1:vr.FORCE_COLOR==="false"?pa=0:pa=vr.FORCE_COLOR.length===0?1:Math.min(parseInt(vr.FORCE_COLOR,10),3));function T5(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function D5(t,e){if(pa===0)return 0;if(ts("color=16m")||ts("color=full")||ts("color=truecolor"))return 3;if(ts("color=256"))return 2;if(t&&!e&&pa===void 0)return 0;let r=pa||0;if(vr.TERM==="dumb")return r;if(process.platform==="win32"){let n=n3e.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in vr)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in vr)||vr.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in vr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(vr.TEAMCITY_VERSION)?1:0;if(vr.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in vr){let n=parseInt((vr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(vr.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(vr.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(vr.TERM)||"COLORTERM"in vr?1:r}function i3e(t){let e=D5(t,t&&t.isTTY);return T5(e)}nV.exports={supportsColor:i3e,stdout:T5(D5(!0,rV.isatty(1))),stderr:T5(D5(!0,rV.isatty(2)))}});var oV=y((Br,k_)=>{f();var s3e=require("tty"),$_=require("util");Br.init=h3e;Br.log=c3e;Br.formatArgs=u3e;Br.save=l3e;Br.load=f3e;Br.useColors=o3e;Br.destroy=$_.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Br.colors=[6,2,3,4,5,1];try{let t=iV();t&&(t.stderr||t).level>=2&&(Br.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Br.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,s)=>s.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function o3e(){return"colors"in Br.inspectOpts?!!Br.inspectOpts.colors:s3e.isatty(process.stderr.fd)}function u3e(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,i="\x1B[3"+(n<8?n:"8;5;"+n),s=`  ${i};1m${e} \x1B[0m`;t[0]=s+t[0].split(`
`).join(`
`+s),t.push(i+"m+"+k_.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=a3e()+e+" "+t[0]}function a3e(){return Br.inspectOpts.hideDate?"":new Date().toISOString()+" "}function c3e(...t){return process.stderr.write($_.formatWithOptions(Br.inspectOpts,...t)+`
`)}function l3e(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function f3e(){return process.env.DEBUG}function h3e(t){t.inspectOpts={};let e=Object.keys(Br.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Br.inspectOpts[e[r]]}k_.exports=C5()(Br);var{formatters:sV}=k_.exports;sV.o=function(t){return this.inspectOpts.colors=this.useColors,$_.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};sV.O=function(t){return this.inspectOpts.colors=this.useColors,$_.inspect(t,this.inspectOpts)}});var xd=y((uke,M5)=>{f();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?M5.exports=ZU():M5.exports=oV()});var aV=y(uV=>{"use strict";f();var Kt=uV;Kt.distinct=function(t){if(t._fields&&Object.keys(t._fields).length>0)return"field selection and slice";let e=Object.keys(Kt.distinct),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};Kt.distinct.select=Kt.distinct.slice=Kt.distinct.sort=Kt.distinct.limit=Kt.distinct.skip=Kt.distinct.batchSize=Kt.distinct.hint=Kt.distinct.tailable=!0;Kt.findOneAndUpdate=Kt.findOneAndRemove=function(t){let e=Object.keys(Kt.findOneAndUpdate),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};Kt.findOneAndUpdate.limit=Kt.findOneAndUpdate.skip=Kt.findOneAndUpdate.batchSize=Kt.findOneAndUpdate.tailable=!0;Kt.count=function(t){if(t._fields&&Object.keys(t._fields).length>0)return"field selection and slice";let e=Object.keys(Kt.count),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};Kt.count.slice=Kt.count.batchSize=Kt.count.tailable=!0});var v5=y((js,cV)=>{"use strict";f();js.isNode=typeof process<"u"&&typeof cV=="object"&&typeof global=="object"&&typeof Buffer=="function"&&process.argv;js.isMongo=!js.isNode&&typeof printjson=="function"&&typeof ObjectId=="function"&&typeof rs=="function"&&typeof sh=="function";js.isBrowser=!js.isNode&&!js.isMongo&&typeof window<"u";js.type=js.isNode?"node":js.isMongo?"mongo":js.isBrowser?"browser":"unknown"});var Fd=y((lV,fV)=>{"use strict";f();var B5=["find","findOne","updateMany","updateOne","replaceOne","count","distinct","findOneAndDelete","findOneAndUpdate","aggregate","findCursor","deleteOne","deleteMany"];function I5(){}for(let t=0,e=B5.length;t<e;++t){let r=B5[t];I5.prototype[r]=d3e(r)}fV.exports=lV=I5;I5.methods=B5;function d3e(t){return function(){throw new Error("collection."+t+" not implemented")}}});var pV=y((hV,dV)=>{"use strict";f();var p3e=Fd(),P5=class extends p3e{constructor(e){super(),this.collection=e,this.collectionName=e.collectionName}async find(e,r){return this.collection.find(e,r).toArray()}async findOne(e,r){return this.collection.findOne(e,r)}async count(e,r){return this.collection.count(e,r)}async distinct(e,r,n){return this.collection.distinct(e,r,n)}async updateMany(e,r,n){return this.collection.updateMany(e,r,n)}async updateOne(e,r,n){return this.collection.updateOne(e,r,n)}async replaceOne(e,r,n){return this.collection.replaceOne(e,r,n)}async deleteOne(e,r){return this.collection.deleteOne(e,r)}async deleteMany(e,r){return this.collection.deleteMany(e,r)}async findOneAndDelete(e,r){return this.collection.findOneAndDelete(e,r)}async findOneAndUpdate(e,r,n){return this.collection.findOneAndUpdate(e,r,n)}findCursor(e,r){return this.collection.find(e,r)}};dV.exports=hV=P5});var yV=y((pke,mV)=>{"use strict";f();var N5=v5();if(N5.type=="unknown")throw new Error("Unknown environment");mV.exports=N5.isNode?pV():N5.isMongo?Fd():Fd()});var $5=y((_V,EV)=>{"use strict";f();var m3e=require("assert"),y3e=require("util"),et=JU(),gu=xd()("mquery");function K(t,e){if(!(this instanceof K))return new K(t,e);let r=this.constructor.prototype;this.op=r.op||void 0,this.options=Object.assign({},r.options),this._conditions=r._conditions?et.clone(r._conditions):{},this._fields=r._fields?et.clone(r._fields):void 0,this._updateDoc=r._updateDoc?et.clone(r._updateDoc):void 0,this._path=r._path||void 0,this._distinctDoc=r._distinctDoc||void 0,this._collection=r._collection||void 0,this._traceFunction=r._traceFunction||void 0,e&&this.setOptions(e),t&&this.find(t)}var xc="$geoWithin";Object.defineProperty(K,"use$geoWithin",{get:function(){return xc=="$geoWithin"},set:function(t){t===!0?xc="$geoWithin":xc="$within"}});K.prototype.toConstructor=function(){function e(n,i){if(!(this instanceof e))return new e(n,i);K.call(this,n,i)}et.inherits(e,K);let r=e.prototype;return r.options={},r.setOptions(this.options),r.op=this.op,r._conditions=et.clone(this._conditions),r._fields=et.clone(this._fields),r._updateDoc=et.clone(this._updateDoc),r._path=this._path,r._distinctDoc=this._distinctDoc,r._collection=this._collection,r._traceFunction=this._traceFunction,e};K.prototype.setOptions=function(t){if(!(t&&et.isObject(t)))return this;let e=et.keys(t),r;for(let n=0;n<e.length;++n)if(r=e[n],typeof this[r]=="function"){let i=Array.isArray(t[r])?t[r]:[t[r]];this[r].apply(this,i)}else this.options[r]=t[r];return this};K.prototype.collection=function(e){return this._collection=new K.Collection(e),this};K.prototype.collation=function(t){return this.options.collation=t,this};K.prototype.$where=function(t){return this._conditions.$where=t,this};K.prototype.where=function(){if(!arguments.length)return this;this.op||(this.op="find");let t=typeof arguments[0];if(t=="string")return this._path=arguments[0],arguments.length===2&&(this._conditions[this._path]=arguments[1]),this;if(t=="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")};K.prototype.equals=function(e){this._ensurePath("equals");let r=this._path;return this._conditions[r]=e,this};K.prototype.eq=function(e){this._ensurePath("eq");let r=this._path;return this._conditions[r]=e,this};K.prototype.or=function(e){let r=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};K.prototype.nor=function(e){let r=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};K.prototype.and=function(e){let r=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function(t){K.prototype[t]=function(){let e,r;arguments.length===1?(this._ensurePath(t),r=arguments[0],e=this._path):(r=arguments[1],e=arguments[0]);let n=this._conditions[e]===null||typeof this._conditions[e]=="object"?this._conditions[e]:this._conditions[e]={};return n["$"+t]=r,this}});K.prototype.mod=function(){let t,e;arguments.length===1?(this._ensurePath("mod"),t=arguments[0],e=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),t=[arguments[0],arguments[1]],e=this._path):arguments.length===3?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]);let r=this._conditions[e]||(this._conditions[e]={});return r.$mod=t,this};K.prototype.exists=function(){let t,e;arguments.length===0?(this._ensurePath("exists"),t=this._path,e=!0):arguments.length===1?typeof arguments[0]=="boolean"?(this._ensurePath("exists"),t=this._path,e=arguments[0]):(t=arguments[0],e=!0):arguments.length===2&&(t=arguments[0],e=arguments[1]);let r=this._conditions[t]||(this._conditions[t]={});return r.$exists=e,this};K.prototype.elemMatch=function(){if(arguments[0]==null)throw new TypeError("Invalid argument");let t,e,r;if(typeof arguments[0]=="function")this._ensurePath("elemMatch"),e=this._path,t=arguments[0];else if(et.isObject(arguments[0]))this._ensurePath("elemMatch"),e=this._path,r=arguments[0];else if(typeof arguments[1]=="function")e=arguments[0],t=arguments[1];else if(arguments[1]&&et.isObject(arguments[1]))e=arguments[0],r=arguments[1];else throw new TypeError("Invalid argument");t&&(r=new K,t(r),r=r._conditions);let n=this._conditions[e]||(this._conditions[e]={});return n.$elemMatch=r,this};K.prototype.within=function(){if(this._ensurePath("within"),this._geoComparison=xc,arguments.length===0)return this;if(arguments.length===2)return this.box.apply(this,arguments);if(2<arguments.length)return this.polygon.apply(this,arguments);let e=arguments[0];if(!e)throw new TypeError("Invalid argument");if(e.center)return this.circle(e);if(e.box)return this.box.apply(this,e.box);if(e.polygon)return this.polygon.apply(this,e.polygon);if(e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")};K.prototype.box=function(){let t,e;if(arguments.length===3)t=arguments[0],e=[arguments[1],arguments[2]];else if(arguments.length===2)this._ensurePath("box"),t=this._path,e=[arguments[0],arguments[1]];else throw new TypeError("Invalid argument");let r=this._conditions[t]||(this._conditions[t]={});return r[this._geoComparison||xc]={$box:e},this};K.prototype.polygon=function(){let t,e;typeof arguments[0]=="string"?(t=Array.from(arguments),e=t.shift()):(this._ensurePath("polygon"),e=this._path,t=Array.from(arguments));let r=this._conditions[e]||(this._conditions[e]={});return r[this._geoComparison||xc]={$polygon:t},this};K.prototype.circle=function(){let t,e;if(arguments.length===1)this._ensurePath("circle"),t=this._path,e=arguments[0];else if(arguments.length===2)t=arguments[0],e=arguments[1];else throw new TypeError("Invalid argument");if(!("radius"in e&&e.center))throw new Error("center and radius are required");let r=this._conditions[t]||(this._conditions[t]={}),n=e.spherical?"$centerSphere":"$center",i=this._geoComparison||xc;return r[i]={},r[i][n]=[e.center,e.radius],"unique"in e&&(r[i].$uniqueDocs=!!e.unique),this};K.prototype.near=function(){let e,r;if(this._geoComparison="$near",arguments.length===0)return this;if(arguments.length===1)this._ensurePath("near"),e=this._path,r=arguments[0];else if(arguments.length===2)e=arguments[0],r=arguments[1];else throw new TypeError("Invalid argument");if(!r.center)throw new Error("center is required");let n=this._conditions[e]||(this._conditions[e]={}),i=r.spherical?"$nearSphere":"$near";if(Array.isArray(r.center)){n[i]=r.center;let s="maxDistance"in r?r.maxDistance:null;s!=null&&(n.$maxDistance=s),r.minDistance!=null&&(n.$minDistance=r.minDistance)}else{if(r.center.type!="Point"||!Array.isArray(r.center.coordinates))throw new Error(y3e.format("Invalid GeoJSON specified for %s",i));n[i]={$geometry:r.center},"maxDistance"in r&&(n[i].$maxDistance=r.maxDistance),"minDistance"in r&&(n[i].$minDistance=r.minDistance)}return this};K.prototype.intersects=function(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",arguments.length===0)return this;let e=arguments[0];if(e!=null&&e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")};K.prototype.geometry=function(){if(!(this._geoComparison=="$within"||this._geoComparison=="$geoWithin"||this._geoComparison=="$near"||this._geoComparison=="$geoIntersects"))throw new Error("geometry() must come after `within()`, `intersects()`, or `near()");let e,r;if(arguments.length===1)this._ensurePath("geometry"),r=this._path,e=arguments[0];else throw new TypeError("Invalid argument");if(!(e.type&&Array.isArray(e.coordinates)))throw new TypeError("Invalid argument");let n=this._conditions[r]||(this._conditions[r]={});return n[this._geoComparison]={$geometry:e},this};K.prototype.select=function(){let e=arguments[0];if(!e)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let r=this._fields||(this._fields={}),n=typeof e,i,s;if((n=="string"||et.isArgumentsObject(e))&&typeof e.length=="number"||Array.isArray(e)){for(n=="string"&&(e=e.split(/\s+/)),i=0,s=e.length;i<s;++i){let o=e[i];if(!o)continue;let u=o[0]=="-"?0:1;u===0&&(o=o.substring(1)),r[o]=u}return this}if(et.isObject(e)){let o=et.keys(e);for(i=0;i<o.length;++i)r[o[i]]=e[o[i]];return this}throw new TypeError("Invalid select() argument. Must be string or object.")};K.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let t,e;if(arguments.length===1){let n=arguments[0];if(typeof n=="object"&&!Array.isArray(n)){let i=Object.keys(n),s=i.length;for(let o=0;o<s;++o)this.slice(i[o],n[i[o]]);return this}this._ensurePath("slice"),t=this._path,e=arguments[0]}else arguments.length===2?typeof arguments[0]=="number"?(this._ensurePath("slice"),t=this._path,e=[arguments[0],arguments[1]]):(t=arguments[0],e=arguments[1]):arguments.length===3&&(t=arguments[0],e=[arguments[1],arguments[2]]);let r=this._fields||(this._fields={});return r[t]={$slice:e},this};K.prototype.sort=function(t){if(!t)return this;let e,r,n;this._validate("sort");let i=typeof t;if(Array.isArray(t)){for(r=t.length,e=0;e<t.length;++e){if(!Array.isArray(t[e]))throw new Error("Invalid sort() argument, must be array of arrays");g3e(this.options,t[e][0],t[e][1])}return this}if(arguments.length===1&&i=="string"){for(t=t.split(/\s+/),r=t.length,e=0;e<r;++e){if(n=t[e],!n)continue;let s=n[0]=="-"?-1:1;s===-1&&(n=n.substring(1)),gV(this.options,n,s)}return this}if(et.isObject(t)){let s=et.keys(t);for(e=0;e<s.length;++e)n=s[e],gV(this.options,n,t[n]);return this}if(typeof Map<"u"&&t instanceof Map)return _3e(this.options,t),this;throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")};var R5={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};function gV(t,e,r){if(Array.isArray(t.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let n;if(r&&r.$meta){n=t.sort||(t.sort={}),n[e]={$meta:r.$meta};return}n=t.sort||(t.sort={});let i=String(r||1).toLowerCase();if(i=R5[i],!i)throw new TypeError("Invalid sort value: { "+e+": "+r+" }");n[e]=i}function g3e(t,e,r){if(t.sort=t.sort||[],!Array.isArray(t.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let n=String(r||1).toLowerCase();if(n=R5[n],!n)throw new TypeError("Invalid sort value: [ "+e+", "+r+" ]");t.sort.push([e,n])}function _3e(t,e){if(t.sort=t.sort||new Map,!(t.sort instanceof Map))throw new TypeError("Can't mix sort syntaxes. Use either array or object or map consistently");e.forEach(function(r,n){let i=String(r||1).toLowerCase();if(i=R5[i],!i)throw new TypeError("Invalid sort value: < "+n+": "+r+" >");t.sort.set(n,i)})}["limit","skip","batchSize","comment"].forEach(function(t){K.prototype[t]=function(e){return this._validate(t),this.options[t]=e,this}});K.prototype.maxTime=K.prototype.maxTimeMS=function(t){return this._validate("maxTime"),this.options.maxTimeMS=t,this};K.prototype.hint=function(){if(arguments.length===0)return this;this._validate("hint");let t=arguments[0];if(et.isObject(t)){let e=this.options.hint||(this.options.hint={});for(let r in t)e[r]=t[r];return this}if(typeof t=="string")return this.options.hint=t,this;throw new TypeError("Invalid hint. "+t)};K.prototype.j=function(e){return this.options.j=e,this};K.prototype.slaveOk=function(t){return this.options.slaveOk=arguments.length?!!t:!0,this};K.prototype.read=K.prototype.setReadPreference=function(t){return arguments.length>1&&!K.prototype.read.deprecationWarningIssued&&(console.error("Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),K.prototype.read.deprecationWarningIssued=!0),this.options.readPreference=et.readPref(t),this};K.prototype.readConcern=K.prototype.r=function(t){return this.options.readConcern=et.readConcern(t),this};K.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=arguments.length?!!arguments[0]:!0,this};K.prototype.writeConcern=K.prototype.w=function(e){return typeof e=="object"?(typeof e.j<"u"&&(this.options.j=e.j),typeof e.w<"u"&&(this.options.w=e.w),typeof e.wtimeout<"u"&&(this.options.wtimeout=e.wtimeout)):this.options.w=e==="m"?"majority":e,this};K.prototype.wtimeout=K.prototype.wTimeout=function(e){return this.options.wtimeout=e,this};K.prototype.merge=function(t){if(!t)return this;if(!K.canMerge(t))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");return t instanceof K?(t._conditions&&et.merge(this._conditions,t._conditions),t._fields&&(this._fields||(this._fields={}),et.merge(this._fields,t._fields)),t.options&&(this.options||(this.options={}),et.merge(this.options,t.options)),t._updateDoc&&(this._updateDoc||(this._updateDoc={}),et.mergeClone(this._updateDoc,t._updateDoc)),t._distinctDoc&&(this._distinctDoc=t._distinctDoc),this):(et.merge(this._conditions,t),this)};K.prototype.find=function(t){return this.op="find",K.canMerge(t)&&this.merge(t),this};K.prototype._find=async function(){let e=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),gu("_find",this._collection.collectionName,e,r),this._collection.find(e,r)};K.prototype.cursor=function(e){if(this.op){if(this.op!=="find")throw new TypeError(".cursor only support .find method")}else this.find(e);let r=this._conditions,n=this._optionsForExec();return this.$useProjection?n.projection=this._fieldsForExec():n.fields=this._fieldsForExec(),gu("findCursor",this._collection.collectionName,r,n),this._collection.findCursor(r,n)};K.prototype.findOne=function(t){return this.op="findOne",K.canMerge(t)&&this.merge(t),this};K.prototype._findOne=async function(){let e=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),gu("findOne",this._collection.collectionName,e,r),this._collection.findOne(e,r)};K.prototype.count=function(t){return this.op="count",this._validate(),K.canMerge(t)&&this.merge(t),this};K.prototype._count=async function(){let e=this._conditions,r=this._optionsForExec();return gu("count",this._collection.collectionName,e,r),this._collection.count(e,r)};K.prototype.distinct=function(t,e){return this.op="distinct",this._validate(),!e&&typeof t=="string"&&(e=t,t=void 0),typeof e=="string"&&(this._distinctDoc=e),K.canMerge(t)&&this.merge(t),this};K.prototype._distinct=async function(){if(!this._distinctDoc)throw new Error("No value for `distinct` has been declared");let e=this._conditions,r=this._optionsForExec();return gu("distinct",this._collection.collectionName,e,r),this._collection.distinct(this._distinctDoc,e,r)};K.prototype.updateMany=function(e,r,n){return arguments.length===1&&(r=e,e=n=void 0),x5(this,"updateMany",e,r,n)};K.prototype._updateMany=async function(){return F5(this,"updateMany")};K.prototype.updateOne=function(e,r,n){return arguments.length===1&&(r=e,e=n=void 0),x5(this,"updateOne",e,r,n)};K.prototype._updateOne=async function(){return F5(this,"updateOne")};K.prototype.replaceOne=function(e,r,n){return arguments.length===1&&(r=e,e=n=void 0),this.setOptions({overwrite:!0}),x5(this,"replaceOne",e,r,n)};K.prototype._replaceOne=async function(){return F5(this,"replaceOne")};function x5(t,e,r,n,i){return t.op=e,K.canMerge(r)&&t.merge(r),n&&t._mergeUpdate(n),et.isObject(i)&&t.setOptions(i),t}async function F5(t,e){let r=t._optionsForExec(),n=t._conditions,i=t._updateForExec();return gu("update",t._collection.collectionName,n,i,r),t._collection[e](n,i,r)}K.prototype.deleteOne=function(t){return this.op="deleteOne",K.canMerge(t)&&this.merge(t),this};K.prototype._deleteOne=async function(){let t=this._optionsForExec();delete t.justOne;let e=this._conditions;return gu("deleteOne",this._collection.collectionName,e,t),this._collection.deleteOne(e,t)};K.prototype.deleteMany=function(t){return this.op="deleteMany",K.canMerge(t)&&this.merge(t),this};K.prototype._deleteMany=async function(){let t=this._optionsForExec();delete t.justOne;let e=this._conditions;return gu("deleteOne",this._collection.collectionName,e,t),this._collection.deleteMany(e,t)};K.prototype.findOneAndUpdate=function(t,e,r){return this.op="findOneAndUpdate",this._validate(),arguments.length===1&&(e=t,t=r=void 0),K.canMerge(t)&&this.merge(t),e&&this._mergeUpdate(e),r&&this.setOptions(r),this};K.prototype._findOneAndUpdate=async function(){let t=this._conditions,e=this._updateForExec(),r=this._optionsForExec();return this._collection.findOneAndUpdate(t,e,r)};K.prototype.findOneAndRemove=K.prototype.findOneAndDelete=function(t,e){return this.op="findOneAndRemove",this._validate(),K.canMerge(t)&&this.merge(t),e&&this.setOptions(e),this};K.prototype._findOneAndRemove=async function(){let t=this._optionsForExec(),e=this._conditions;return this._collection.findOneAndDelete(e,t)};K.prototype.setTraceFunction=function(t){return this._traceFunction=t,this};K.prototype.exec=async function(e){typeof e=="string"&&(this.op=e),m3e.ok(this.op,"Missing query type: (find, etc)");let r="_"+this.op;if(typeof this[r]!="function")throw new TypeError(`this[${r}] is not a function`);return this[r]()};K.prototype.then=async function(t,e){return this.exec().then(t,e)};K.prototype.cursor=function(){if(this.op!="find")throw new Error("cursor() is only available for find");let t=this._conditions,e=this._optionsForExec();return this.$useProjection?e.projection=this._fieldsForExec():e.fields=this._fieldsForExec(),gu("cursor",this._collection.collectionName,t,e),this._collection.findCursor(t,e)};K.prototype.selected=function(){return!!(this._fields&&Object.keys(this._fields).length>0)};K.prototype.selectedInclusively=function(){if(!this._fields)return!1;let e=Object.keys(this._fields);if(e.length===0)return!1;for(let r=0;r<e.length;++r){let n=e[r];if(this._fields[n]===0||this._fields[n]&&typeof this._fields[n]=="object"&&this._fields[n].$meta)return!1}return!0};K.prototype.selectedExclusively=function(){if(!this._fields)return!1;let e=Object.keys(this._fields);if(e.length===0)return!1;for(let r=0;r<e.length;++r){let n=e[r];if(this._fields[n]===0)return!0}return!1};K.prototype._mergeUpdate=function(t){this._updateDoc||(this._updateDoc={}),t instanceof K?t._updateDoc&&et.mergeClone(this._updateDoc,t._updateDoc):et.mergeClone(this._updateDoc,t)};K.prototype._optionsForExec=function(){return et.clone(this.options)};K.prototype._fieldsForExec=function(){return et.clone(this._fields)};K.prototype._updateForExec=function(){let t=et.clone(this._updateDoc),e=et.keys(t),r={};for(let n of e){if(this.options.overwrite){r[n]=t[n];continue}n[0]!=="$"?(r.$set||(t.$set?r.$set=t.$set:r.$set={}),r.$set[n]=t[n],~e.indexOf("$set")||e.push("$set")):n==="$set"&&r.$set||(r[n]=t[n])}return this._compiledUpdate=r,r};K.prototype._ensurePath=function(t){if(!this._path){let e=t+"() must be used after where() when called with these arguments";throw new Error(e)}};K.permissions=aV();K._isPermitted=function(t,e){let r=K.permissions[e];return r?r[t]!==!0:!0};K.prototype._validate=function(t){let e,r;if(t===void 0){if(r=K.permissions[this.op],typeof r!="function")return!0;e=r(this)}else K._isPermitted(t,this.op)||(e=t);if(e)throw new Error(e+" cannot be used with "+this.op)};K.canMerge=function(t){return t instanceof K||et.isObject(t)};K.setGlobalTraceFunction=function(t){K.traceFunction=t};K.utils=et;K.env=v5();K.Collection=yV();K.BaseCollection=Fd();EV.exports=_V=K});var k5=y((gke,AV)=>{"use strict";f();AV.exports=function(e,r){if(typeof e==="string"&&(e=e.split(/\s+/)),!Array.isArray(e)&&Object.prototype.toString.call(e)!=="[object Arguments]")return e;let i=e.length,s={};for(let o=0;o<i;++o){let u=e[o];if(!u)continue;let a=u[0]=="-"?0:1;!r&&a===0&&(u=u.substring(1)),s[u]=a}return s}});var bV=y((Eke,SV)=>{"use strict";f();SV.exports=function(e,r){let n=Object.keys(e).map(i=>Object.keys(e[i])).reduce((i,s)=>i.concat(s),[]);return r.filter(i=>wV(i,n))};function wV(t,e){let r=Object.keys(t)[0];if(r==="$and"||r==="$or")return Array.isArray(t[r])?t[r].find(s=>wV(s,e))!=null:!1;let n=r.indexOf("."),i=n===-1?r:r.slice(0,n);return e.find(s=>s.includes("$["+i+"]"))!=null}});var q_=y((wke,OV)=>{"use strict";f();OV.exports=function(e){if(typeof e!="object"||e===null)return!1;let r=Object.keys(e),n=r.length;for(let i=0;i<n;++i)if(r[i][0]==="$")return!0;return!1}});var q5=y((bke,CV)=>{"use strict";f();var E3e=q_(),{trustedSymbol:A3e}=B1();CV.exports=function t(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e)){for(let n of e)t(n);return e}let r=Object.keys(e);for(let n of r){let i=e[n];if(!(i!=null&&i[A3e])){if(n==="$and"||n==="$or"){t(i);continue}if(E3e(i)){let s=Object.keys(i);if(s.length===1&&s[0]==="$eq")continue;e[n]={$eq:e[n]}}}}return e}});var DV=y((Cke,TV)=>{"use strict";f();TV.exports=function(e){if(e==null)return;let r=Object.keys(e);for(let n=0;n<r.length;++n)typeof e[r[n]]=="string"&&(e[r[n]]=1)}});var BV=y((Dke,vV)=>{"use strict";f();var w3e=U1(),S3e=R_();vV.exports=function(e,r,n){if(n==null)return;let i=Object.keys(n);if(r=r||{},S3e(e))for(let s of i){MV(r,s)?r[s]===0&&delete e[s]:e[s]=1;let o=n[s]?.refPath;typeof o=="string"&&(MV(r,o)?r[o]===0&&delete e[o]:e[o]=1)}else if(w3e(e))for(let s of i){r[s]==null&&delete e[s];let o=n[s]?.refPath;typeof o=="string"&&r[o]==null&&delete e[o]}};function MV(t,e){let r=e.split("."),n=r.length,i=r[0];for(let s=1;s<n;++s){if(t[i]!=null||t[i+".$"]!=null)return!0;i+="."+r[s]}return t[i]!=null||t[i+".$"]!=null}});var xV=y((vke,RV)=>{"use strict";f();var IV=Ac(),b3e=fd(),PV=L1().flatten,NV=L1().modifiedPaths;RV.exports=function(t,e,r,n,i){let s=Object.keys(r||{}),o={},u={},a={},c={},l=s.length,h=!1,d={},p,m,g;for(g=0;g<l;++g)if(s[g].startsWith("$")){if(h=!0,s[g]==="$push"||s[g]==="$addToSet"){let z=Object.keys(r[s[g]]);for(let J=0;J<z.length;++J)p=r[s[g]][z[J]],p&&p.$each?c[z[J]]=(c[z[J]]||[]).concat(p.$each):c[z[J]]=(c[z[J]]||[]).concat([p]);continue}NV(r[s[g]],"",d);let q=PV(r[s[g]],null,null,e),R=Object.keys(q),F=R.length;for(let z=0;z<F;++z){let J=b3e(R[z]);m=s[g],!J.includes("$")&&(m==="$set"||m==="$setOnInsert"||m==="$pull"||m==="$pullAll"?(u[J]=q[R[z]],a[J]=m==="$pull"||m==="$pullAll"):m==="$unset"&&(u[J]=void 0),o[J]=!0)}}h||(NV(r,"",d),u=PV(r,null,null,e),o=Object.keys(u));let _=Object.keys(u),w=_.length,S=[],C=[],O=[],B=t;function P(q,R){let F=e._getSchema(_[q]);if(F!=null&&!(F.instance==="Mixed"&&F.path!==_[q]))if(R&&Array.isArray(R.$in))R.$in.forEach((z,J)=>{S.push(function(De){F.doValidate(z,function(W){W&&(W.path=_[J]+".$in."+J,C.push(W)),De(null)},B,{updateValidator:!0})})});else{if(a[_[q]]&&F.$isMongooseArray)return;F.$isMongooseDocumentArrayElement&&R!=null&&R.$__!=null?(O.push(_[q]),S.push(function(z){F.doValidate(R,function(J){if(J)if(J.errors)for(let De of Object.keys(J.errors)){let W=J.errors[De];W.path=_[q]+"."+De,C.push(W)}else J.path=_[q],C.push(J);return z(null)},B,{updateValidator:!0})})):S.push(function(z){for(let J of O)if(_[q].startsWith(J+"."))return z(null);F.doValidate(R,function(J){if(F.schema!=null&&F.schema.options.storeSubdocValidationError===!1&&J instanceof IV)return z(null);J&&(J.path=_[q],C.push(J)),z(null)},B,{updateValidator:!0})})}}for(g=0;g<w;++g)P(g,u[_[g]]);let v=Object.keys(c);for(let q of v){let R=e._getSchema(q);if(R&&R.$isMongooseDocumentArray)S.push(function(F){R.doValidate(c[q],k(q,C,F),n&&n.context==="query"?t:null)});else{R=e._getSchema(q+".0");for(let F of c[q])S.push(function(z){R.doValidate(F,k(q,C,z),n&&n.context==="query"?t:null,{updateValidator:!0})})}}if(i!=null){let q=S.length;if(q===0)return j(i);for(let R of S)R(function(){--q<=0&&j(i)});return}return function(q){let R=S.length;if(R===0)return j(q);for(let F of S)F(function(){--R<=0&&j(q)})};function j(q){if(C.length){let R=new IV(null);for(let F of C)R.addError(F.path,F);return q(R)}q(null)}function k(q,R,F){return function(z){z&&(z.path=q,R.push(z)),F(null)}}}});var U_=y((Ike,KV)=>{"use strict";f();var kd=cn(),O3e=z2(),j5=P1(),Mn=Fe(),ma=cg(),FV=NU(),$V=Ac(),{applyGlobalMaxTimeMS:qd,applyGlobalDiskUse:Ld}=w5(),C3e=KC(),T3e=S5(),D3e=b5(),M3e=vc(),v3e=GU(),j_=dd(),B3e=a5(),ti=$t(),I3e=Xi(),jd=nd(),P3e=xs().internalToObjectOptions,N3e=U1(),R3e=R_(),x3e=gg(),kV=QU(),LV=_i(),wi=$5(),F3e=k5(),$3e=bV(),k3e=q5(),q3e=DV(),L3e=BV(),jV=l5(),L_=_c(),j3e=xV(),$d=require("util"),Tt=Ce(),U3e=$g().queryMiddlewareFunctions,V3e=new Set(["allowDiskUse","batchSize","collation","comment","explain","hint","j","lean","limit","maxTimeMS","populate","projection","read","select","skip","slice","sort","tailable","w","writeConcern","wtimeout"]);function G(t,e,r,n){this._mongooseOptions||(this._mongooseOptions={}),e=e||{},this._transforms=[],this._hooks=new j5,this._executionStack=null;let i=Object.keys(e);for(let o of i)this._mongooseOptions[o]=e[o];n&&(this.mongooseCollection=n),r&&(this.model=r,this.schema=r.schema),this.model&&this.model._mapreduce&&this.lean(),wi.call(this,null,e),n&&this.collection(n),t&&this.find(t),this.options=this.options||{},this.$useProjection=!0;let s=this&&this.schema&&this.schema.options&&this.schema.options.collation||null;s!=null&&(this.options.collation=s)}G.prototype=new wi;G.prototype.constructor=G;G.prototype.count=void 0;G.prototype.findOneAndRemove=void 0;G.base=wi.prototype;Object.defineProperty(G.prototype,"_distinct",{configurable:!0,writable:!0,enumerable:!0,value:void 0});G.use$geoWithin=wi.use$geoWithin;G.prototype.toConstructor=function(){let e=this.model,r=this.mongooseCollection,n=function(o,u){if(!(this instanceof n))return new n(o,u);this._mongooseOptions=ti(i._mongooseOptions),G.call(this,o,u||null,e,r)};$d.inherits(n,e.Query);let i=n.prototype;i.options={};let s=Object.assign({},this.options);return s.sort!=null&&(i.sort(s.sort),delete s.sort),i.setOptions(s),i.op=this.op,i._validateOp(),i._conditions=ti(this._conditions),i._fields=ti(this._fields),i._update=ti(this._update,{flattenDecimals:!1}),i._path=this._path,i._distinct=this._distinct,i._collection=this._collection,i._mongooseOptions=this._mongooseOptions,n};G.prototype.clone=function(){let t=this.model,e=this.mongooseCollection,r=new this.model.Query({},{},t,e),n=Object.assign({},this.options);return n.sort!=null&&(r.sort(n.sort),delete n.sort),r.setOptions(n),r.op=this.op,r._validateOp(),r._conditions=ti(this._conditions),r._fields=ti(this._fields),r._update=ti(this._update,{flattenDecimals:!1}),r._path=this._path,r._distinct=this._distinct,r._collection=this._collection,r._mongooseOptions=this._mongooseOptions,r};G.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let t,e;if(arguments.length===1){let n=arguments[0];if(typeof n=="object"&&!Array.isArray(n)){let i=Object.keys(n),s=i.length;for(let o=0;o<s;++o)this.slice(i[o],n[i[o]]);return this}this._ensurePath("slice"),t=this._path,e=arguments[0]}else arguments.length===2?typeof arguments[0]=="number"?(this._ensurePath("slice"),t=this._path,e=[arguments[0],arguments[1]]):(t=arguments[0],e=arguments[1]):arguments.length===3&&(t=arguments[0],e=[arguments[1],arguments[2]]);let r={};return r[t]={$slice:e},this.select(r),this};var z3e=new Set(U3e);G.prototype._validateOp=function(){this.op!=null&&!z3e.has(this.op)&&this.error(new Error('Query has invalid `op`: "'+this.op+'"'))};G.prototype.mod=function(){let t,e;arguments.length===1?(this._ensurePath("mod"),t=arguments[0],e=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),t=[arguments[0],arguments[1]],e=this._path):arguments.length===3?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]);let r=this._conditions[e]||(this._conditions[e]={});return r.$mod=t,this};G.prototype.limit=function(e){if(this._validate("limit"),typeof e=="string")try{e=j_(e)}catch{throw new kd("Number",e,"limit")}return this.options.limit=e,this};G.prototype.skip=function(e){if(this._validate("skip"),typeof e=="string")try{e=j_(e)}catch{throw new kd("Number",e,"skip")}return this.options.skip=e,this};G.prototype.projection=function(t){return arguments.length===0?this._fields:(this._fields={},this._userProvidedFields={},this.select(t),this._fields)};G.prototype.select=function(){let e=arguments[0];if(!e)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let r=this._fields||(this._fields={}),n=this._userProvidedFields||(this._userProvidedFields={}),i;this.model!=null&&Tt.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection")?i=this.model.db.options.sanitizeProjection:this.model!=null&&Tt.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection")?i=this.model.base.options.sanitizeProjection:i=this._mongooseOptions.sanitizeProjection;function s(o){return typeof o=="string"&&i?o=1:o}if(e=F3e(e,!0),Tt.isObject(e)){if(this.selectedInclusively())Object.entries(e).forEach(([o,u])=>{u?(r["-"+o]!=null&&delete r["-"+o],r[o]=n[o]=s(u)):Object.keys(n).forEach(a=>{kV(o,a)&&(delete r[a],delete n[a])})});else if(this.selectedExclusively())Object.entries(e).forEach(([o,u])=>{u?Object.keys(n).forEach(a=>{kV(o,a)&&(delete r[a],delete n[a])}):(r["+"+o]!=null&&delete r["+"+o],r[o]=n[o]=s(u))});else{let o=Object.keys(e);for(let u=0;u<o.length;++u){let a=e[o[u]],c=o[u];r[c]=s(a),n[c]=s(a)}}return this}throw new TypeError("Invalid select() argument. Must be string or object.")};G.prototype.schemaLevelProjections=function(e){return this._mongooseOptions.schemaLevelProjections=e,this};G.prototype.sanitizeProjection=function(e){return this._mongooseOptions.sanitizeProjection=e,this};G.prototype.read=function(e,r){return typeof e=="string"?(e=C3e(e),this.options.readPreference={mode:e,tags:r}):this.options.readPreference=e,this};G.prototype.toString=function(){return this.op==="count"||this.op==="countDocuments"||this.op==="find"||this.op==="findOne"||this.op==="deleteMany"||this.op==="deleteOne"||this.op==="findOneAndDelete"||this.op==="remove"?`${this.model.modelName}.${this.op}(${$d.inspect(this._conditions)})`:this.op==="distinct"?`${this.model.modelName}.distinct('${this._distinct}', ${$d.inspect(this._conditions)})`:this.op==="findOneAndReplace"||this.op==="findOneAndUpdate"||this.op==="replaceOne"||this.op==="update"||this.op==="updateMany"||this.op==="updateOne"?`${this.model.modelName}.${this.op}(${$d.inspect(this._conditions)}, ${$d.inspect(this._update)})`:`${this.model.modelName}.${this.op}()`};G.prototype.session=function(e){return e==null&&delete this.options.session,this.options.session=e,this};G.prototype.writeConcern=function(e){return e==null?(delete this.options.writeConcern,this):(this.options.writeConcern=e,this)};G.prototype.w=function(e){return e==null&&delete this.options.w,this.options.writeConcern!=null?this.options.writeConcern.w=e:this.options.w=e,this};G.prototype.j=function(e){return e==null&&delete this.options.j,this.options.writeConcern!=null?this.options.writeConcern.j=e:this.options.j=e,this};G.prototype.wtimeout=function(e){return e==null&&delete this.options.wtimeout,this.options.writeConcern!=null?this.options.writeConcern.wtimeout=e:this.options.wtimeout=e,this};G.prototype.getOptions=function(){return this.options};G.prototype.setOptions=function(t,e){if(e)return this._mongooseOptions=t&&ti(t)||{},this.options=t||{},"populate"in t&&this.populate(this._mongooseOptions),this;if(t==null)return this;if(typeof t!="object")throw new Error('Options must be an object, got "'+t+'"');if(t=Object.assign({},t),Array.isArray(t.populate)){let r=t.populate;delete t.populate;let n=r.length;for(let i=0;i<n;++i)this.populate(r[i])}if("setDefaultsOnInsert"in t&&(this._mongooseOptions.setDefaultsOnInsert=t.setDefaultsOnInsert,delete t.setDefaultsOnInsert),"overwriteDiscriminatorKey"in t&&(this._mongooseOptions.overwriteDiscriminatorKey=t.overwriteDiscriminatorKey,delete t.overwriteDiscriminatorKey),"overwriteImmutable"in t&&(this._mongooseOptions.overwriteImmutable=t.overwriteImmutable,delete t.overwriteImmutable),"sanitizeProjection"in t&&(t.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection&&q3e(this._fields),this._mongooseOptions.sanitizeProjection=t.sanitizeProjection,delete t.sanitizeProjection),"sanitizeFilter"in t&&(this._mongooseOptions.sanitizeFilter=t.sanitizeFilter,delete t.sanitizeFilter),"timestamps"in t&&(this._mongooseOptions.timestamps=t.timestamps,delete t.timestamps),"defaults"in t&&(this._mongooseOptions.defaults=t.defaults),"translateAliases"in t&&(this._mongooseOptions.translateAliases=t.translateAliases,delete t.translateAliases),"schemaLevelProjections"in t&&(this._mongooseOptions.schemaLevelProjections=t.schemaLevelProjections,delete t.schemaLevelProjections),t.lean==null&&this.schema&&"lean"in this.schema.options&&(this._mongooseOptions.lean=this.schema.options.lean),typeof t.limit=="string")try{t.limit=j_(t.limit)}catch{throw new kd("Number",t.limit,"limit")}if(typeof t.skip=="string")try{t.skip=j_(t.skip)}catch{throw new kd("Number",t.skip,"skip")}for(let r of Object.keys(t))if(V3e.has(r)){let n=Array.isArray(t[r])?t[r]:[t[r]];this[r].apply(this,n)}else this.options[r]=t[r];return this};G.prototype.explain=function(e){return arguments.length===0?this.options.explain=!0:e===!1?delete this.options.explain:this.options.explain=e,this};G.prototype.allowDiskUse=function(t){return arguments.length===0?this.options.allowDiskUse=!0:t===!1?delete this.options.allowDiskUse:this.options.allowDiskUse=t,this};G.prototype.maxTimeMS=function(t){return this.options.maxTimeMS=t,this};G.prototype.getFilter=function(){return this._conditions};G.prototype.getQuery=function(){return this._conditions};G.prototype.setQuery=function(t){this._conditions=t};G.prototype.getUpdate=function(){return this._update};G.prototype.setUpdate=function(t){this._update=t};G.prototype._fieldsForExec=function(){return this._fields==null||Object.keys(this._fields).length===0?null:ti(this._fields)};G.prototype._updateForExec=function(){let t=ti(this._update,{transform:!1,depopulate:!0}),e=Object.keys(t),r=e.length,n={};for(;r--;){let i=e[r];i[0]!=="$"?(n.$set||(t.$set?n.$set=t.$set:n.$set={}),n.$set[i]=t[i],e.splice(r,1),~e.indexOf("$set")||e.push("$set")):i==="$set"&&n.$set||(n[i]=t[i])}return n};G.prototype._optionsForExec=function(t){let e=ti(this.options);if(delete e.populate,t=t||this.model,!t)return e;T3e(t.schema,e),D3e(t.schema,e);let r=this.model?.db?.base.transactionAsyncLocalStorage?.getStore();!this.options.hasOwnProperty("session")&&r?.session!=null&&(e.session=r.session);let n=t&&t.schema&&t.schema.options&&t.schema.options.read;if(!("readPreference"in e)&&n&&(e.readPreference=n),e.upsert!==void 0&&(e.upsert=!!e.upsert),e.writeConcern&&(e.j&&(e.writeConcern.j=e.j,delete e.j),e.w&&(e.writeConcern.w=e.w,delete e.w),e.wtimeout&&(e.writeConcern.wtimeout=e.wtimeout,delete e.wtimeout)),this._applyPaths(),this._fields!=null){this._fields=this._castFields(this._fields);let i=this._fieldsForExec();i!=null&&(e.projection=i)}return e};G.prototype.lean=function(t){return this._mongooseOptions.lean=arguments.length?t:!0,this};G.prototype.set=function(t,e){if(typeof t=="object"){let r=Object.keys(t);for(let n of r)this.set(n,t[n]);return this}return this._update=this._update||{},t in this._update&&delete this._update[t],this._update.$set=this._update.$set||{},this._update.$set[t]=e,this};G.prototype.get=function(e){let r=this._update;if(r==null)return;let n=r.$set;if(n==null||Tt.hasUserDefinedProperty(r,e))return r[e];if(Tt.hasUserDefinedProperty(n,e))return n[e]};G.prototype.error=function(e){return arguments.length===0?this._error:(this._error=e,this)};G.prototype._unsetCastError=function(){if(!(this._error==null||!(this._error instanceof kd)))return this.error(null)};G.prototype.mongooseOptions=function(t){return arguments.length>0&&(this._mongooseOptions=t),this._mongooseOptions};G.prototype._castConditions=function(){let t;this.model?.db.options?.sanitizeFilter!=null?t=this.model.db.options.sanitizeFilter:this.model?.base.options?.sanitizeFilter!=null?t=this.model.base.options.sanitizeFilter:t=this._mongooseOptions.sanitizeFilter,t&&k3e(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(e){this.error(e)}};function UV(t){try{v3e(t)}catch(e){t.error(e)}}G.prototype._find=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let e=this._mongooseOptions,r=this,n=r._userProvidedFields||{};qd(this.options,this.model.db.options,this.model.base.options),Ld(this.options,this.model.db.options,this.model.base.options);let i=Object.assign({},{session:this&&this.options&&this.options.session||null,lean:e.lean||null}),s=this._optionsForExec(),o=this._conditions,u=s.projection,a=await this.mongooseCollection.find(o,s);if(s.explain)return a.explain();let c=await a.toArray();if(c.length===0)return c;if(!e.populate){let h=r.schema.options.versionKey;return e.lean&&e.lean.versionKey===!1&&h&&c.forEach(d=>{h in d&&delete d[h]}),e.lean?zV(r.model.schema,c,null,i):r._completeMany(c,u,n,i)}let l=jd.preparePopulationOptionsMQ(r,e);return e.lean?r.model.populate(c,l):(c=await r._completeMany(c,u,n,i),await this.model.populate(c,l),c)};G.prototype.find=function(t){if(typeof t=="function"||typeof arguments[1]=="function")throw new Mn("Query.prototype.find() no longer accepts a callback");return this.op="find",wi.canMerge(t)?(this.merge(t),Ud(this)):t!=null&&this.error(new ma(t,"filter","find")),this};G.prototype.merge=function(t){if(!t)return this;let e={overwrite:!0};return t instanceof G?(t._conditions&&(e.omit={},this._conditions&&this._conditions.$and&&t._conditions.$and&&(e.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(t._conditions.$and)),this._conditions&&this._conditions.$or&&t._conditions.$or&&(e.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(t._conditions.$or)),Tt.merge(this._conditions,t._conditions,e)),t._fields&&(this._fields||(this._fields={}),Tt.merge(this._fields,t._fields,e)),t.options&&(this.options||(this.options={}),Tt.merge(this.options,t.options,e)),t._update&&(this._update||(this._update={}),Tt.mergeClone(this._update,t._update)),t._distinct&&(this._distinct=t._distinct),Tt.merge(this._mongooseOptions,t._mongooseOptions),this):this.model!=null&&t instanceof this.model.base.Types.ObjectId?(Tt.merge(this._conditions,{_id:t},e),this):(t&&t.$__&&(t=t.toObject(P3e)),e.omit={},Array.isArray(t.$and)&&(e.omit.$and=!0,this._conditions||(this._conditions={}),this._conditions.$and=(this._conditions.$and||[]).concat(t.$and.map(r=>Tt.isPOJO(r)?Tt.merge({},r):r))),Array.isArray(t.$or)&&(e.omit.$or=!0,this._conditions||(this._conditions={}),this._conditions.$or=(this._conditions.$or||[]).concat(t.$or.map(r=>Tt.isPOJO(r)?Tt.merge({},r):r))),Tt.merge(this._conditions,t,e),this)};G.prototype.collation=function(t){return this.options==null&&(this.options={}),this.options.collation=t,this};G.prototype._completeOne=function(t,e,r,n){if(!t&&!this.options.includeResultMetadata)return n(null,null);let i=this.model,s=this._userProvidedFields||{},o=this._mongooseOptions,u=this.options;if(!u.lean&&o.lean&&(u.lean=o.lean),u.explain)return n(null,t);if(!o.populate){let c=this.schema.options.versionKey;return o.lean&&o.lean.versionKey===!1&&c&&c in t&&delete t[c],o.lean?U5(i.schema,t,null,e,u,n):qV(i,t,e,u,r,s,null,n)}let a=jd.preparePopulationOptionsMQ(this,this._mongooseOptions);if(o.lean)return i.populate(t,a).then(c=>{U5(i.schema,c,null,e,u,n)},c=>{n(c)});qV(i,t,e,u,r,s,[],(c,l)=>{if(c!=null)return n(c);i.populate(l,a).then(h=>{n(null,h)},h=>{n(h)})})};G.prototype._completeMany=async function(e,r,n,i){let s=this.model;return Promise.all(e.map(o=>new Promise((u,a)=>{let c=o;o=jd.createModel(s,o,r,n),i.session!=null&&o.$session(i.session),o.$init(c,i,l=>{if(l!=null)return a(l);u(o)})})))};G.prototype._findOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();qd(this.options,this.model.db.options,this.model.base.options),Ld(this.options,this.model.db.options,this.model.base.options);let e=this._optionsForExec(),r=await this.mongooseCollection.findOne(this._conditions,e);return new Promise((n,i)=>{this._completeOne(r,null,e.projection,(s,o)=>{if(s)return i(s);n(o)})})};G.prototype.findOne=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new Mn("Query.prototype.findOne() no longer accepts a callback");return this.op="findOne",this._validateOp(),r&&this.setOptions(r),e&&this.select(e),wi.canMerge(t)?(this.merge(t),Ud(this)):t!=null&&this.error(new ma(t,"filter","findOne")),this};G.prototype._countDocuments=async function(){this._applyTranslateAliases();try{this.cast(this.model)}catch(n){this.error(n)}if(this.error())throw this.error();qd(this.options,this.model.db.options,this.model.base.options),Ld(this.options,this.model.db.options,this.model.base.options);let e=this._optionsForExec(),r=this._conditions;return this.mongooseCollection.countDocuments(r,e)};G.prototype._applyTranslateAliases=function(){let e=!1;"translateAliases"in this._mongooseOptions?e=this._mongooseOptions.translateAliases:this.model?.schema?._userProvidedOptions?.translateAliases!=null?e=this.model.schema._userProvidedOptions.translateAliases:this.model?.base?.options?.translateAliases!=null&&(e=this.model.base.options.translateAliases),e&&this.model?.schema?.aliases&&Object.keys(this.model.schema.aliases).length>0&&(this.model.translateAliases(this._conditions,!0),this.model.translateAliases(this._fields,!0),this.model.translateAliases(this._update,!0),this._distinct!=null&&this.model.schema.aliases[this._distinct]!=null&&(this._distinct=this.model.schema.aliases[this._distinct]))};G.prototype._estimatedDocumentCount=async function(){if(this.error())throw this.error();let e=this._optionsForExec();return this.mongooseCollection.estimatedDocumentCount(e)};G.prototype.estimatedDocumentCount=function(t){if(typeof t=="function"||typeof arguments[1]=="function")throw new Mn("Query.prototype.estimatedDocumentCount() no longer accepts a callback");return this.op="estimatedDocumentCount",this._validateOp(),t!=null&&this.setOptions(t),this};G.prototype.countDocuments=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new Mn("Query.prototype.countDocuments() no longer accepts a callback");return this.op="countDocuments",this._validateOp(),wi.canMerge(t)&&this.merge(t),e!=null&&this.setOptions(e),this};G.prototype.__distinct=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();qd(this.options,this.model.db.options,this.model.base.options),Ld(this.options,this.model.db.options,this.model.base.options);let e=this._optionsForExec();return this.mongooseCollection.distinct(this._distinct,this._conditions,e)};G.prototype.distinct=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new Mn("Query.prototype.distinct() no longer accepts a callback");return this.op="distinct",this._validateOp(),wi.canMerge(e)?(this.merge(e),Ud(this)):e!=null&&this.error(new ma(e,"filter","distinct")),t!=null&&(this._distinct=t),r!=null&&this.setOptions(r),this};G.prototype.sort=function(t,e){if(arguments.length>2)throw new Error("sort() takes at most 2 arguments");if(e!=null&&typeof e!="object")throw new Error("sort() options argument must be an object or nullish");this.options.sort==null&&(this.options.sort={}),e&&e.override&&(this.options.sort={});let r=this.options.sort;if(typeof t=="string"){let n=t.indexOf(" ")===-1?[t]:t.split(" ");for(let i of n){let s=i[0]=="-"?-1:1;s===-1&&(i=i.slice(1)),!L_.has(i)&&(r[i]=s)}}else if(Array.isArray(t))for(let n of t){if(!Array.isArray(n))throw new TypeError("Invalid sort() argument, must be array of arrays");let i=""+n[0];L_.has(i)||(r[i]=L5(n[1],i))}else if(typeof t=="object"&&t!=null&&!(t instanceof Map))for(let n of Object.keys(t))L_.has(n)||(r[n]=L5(t[n],n));else if(t instanceof Map)for(let n of t.keys())n=""+n,!L_.has(n)&&(r[n]=L5(t.get(n),n));else if(t!=null)throw new TypeError("Invalid sort() argument. Must be a string, object, array, or map.");return this};function L5(t,e){if(t===1||t==="asc"||t==="ascending")return 1;if(t===-1||t==="desc"||t==="descending")return-1;if(t?.$meta!=null)return{$meta:t.$meta};throw new TypeError("Invalid sort value: { "+e+": "+t+" }")}G.prototype.deleteOne=function(e,r){if(typeof e=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new Mn("Query.prototype.deleteOne() no longer accepts a callback");return this.op="deleteOne",this.setOptions(r),wi.canMerge(e)?(this.merge(e),Ud(this)):e!=null&&this.error(new ma(e,"filter","deleteOne")),this};G.prototype._deleteOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let e=this._optionsForExec();return this.mongooseCollection.deleteOne(this._conditions,e)};G.prototype.deleteMany=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new Mn("Query.prototype.deleteMany() no longer accepts a callback");return this.setOptions(e),this.op="deleteMany",wi.canMerge(t)?(this.merge(t),Ud(this)):t!=null&&this.error(new ma(t,"filter","deleteMany")),this};G.prototype._deleteMany=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let e=this._optionsForExec();return this.mongooseCollection.deleteMany(this._conditions,e)};function qV(t,e,r,n,i,s,o,u){if(n.includeResultMetadata&&e==null)return a(null),null;jd.createModelAndInit(t,e,i,s,n,o,a);function a(c,l){if(c)return u(c);if(n.includeResultMetadata)return e&&l?(n.session!=null&&l.$session(n.session),r.value=l):r.value=null,u(null,r);n.session!=null&&l.$session(n.session),u(null,l)}}function Ud(t){if(!t||!t.model||!t.model.schema)return;let e=t.model.schema;e&&e.discriminatorMapping&&!e.discriminatorMapping.isRoot&&(t._conditions[e.discriminatorMapping.key]=e.discriminatorMapping.value)}G.prototype.findOneAndUpdate=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new Mn("Query.prototype.findOneAndUpdate() no longer accepts a callback");switch(this.op="findOneAndUpdate",this._validateOp(),this._validate(),arguments.length){case 2:r=void 0;break;case 1:e=t,t=r=void 0;break}wi.canMerge(t)?this.merge(t):t!=null&&this.error(new ma(t,"filter","findOneAndUpdate")),e&&this._mergeUpdate(e),r=r?ti(r):{},r.projection&&(this.select(r.projection),delete r.projection),r.fields&&(this.select(r.fields),delete r.fields);let n=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;return r.new==null&&r.returnDocument==null&&r.returnOriginal==null&&n!=null&&(r.returnOriginal=n),this.setOptions(r),this};G.prototype._findOneAndUpdate=async function(){if(this._applyTranslateAliases(),this._castConditions(),UV(this),this.error())throw this.error();qd(this.options,this.model.db.options,this.model.base.options),Ld(this.options,this.model.db.options,this.model.base.options),"strict"in this.options&&(this._mongooseOptions.strict=this.options.strict);let e=this._optionsForExec(this.model);VV(e),this._update=this._castUpdate(this._update);let r=Object.assign({},e,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=jV(this._conditions,this.model.schema,this._update,r),!this._update||Object.keys(this._update).length===0)if(e.upsert){let o=ti(this._update);delete o._id,this._update={$set:o}}else return this._executionStack=null,await this._findOne();else{if(this._update instanceof Error)throw this._update;this._update.$set&&Object.keys(this._update.$set).length===0&&delete this._update.$set}V5(this,"runValidators",!1)&&await this.validate(this._update,e,!1),this._update.toBSON&&(this._update=this._update.toBSON());let i=await this.mongooseCollection.findOneAndUpdate(this._conditions,this._update,e);for(let o of this._transforms)i=o(i);let s=e.includeResultMetadata?i.value:i;return new Promise((o,u)=>{this._completeOne(s,i,e.projection,(a,c)=>{if(a)return u(a);o(c)})})};G.prototype.findOneAndDelete=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new Mn("Query.prototype.findOneAndDelete() no longer accepts a callback");return this.op="findOneAndDelete",this._validateOp(),this._validate(),wi.canMerge(t)&&this.merge(t),e&&this.setOptions(e),this};G.prototype._findOneAndDelete=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let e=this.options.includeResultMetadata,r=this._conditions,n=this._optionsForExec(this.model),i=await this.mongooseCollection.findOneAndDelete(r,n);for(let o of this._transforms)i=o(i);let s=e?i.value:i;return new Promise((o,u)=>{this._completeOne(s,i,n.projection,(a,c)=>{if(a)return u(a);o(c)})})};G.prototype.findOneAndReplace=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[4]=="function")throw new Mn("Query.prototype.findOneAndReplace() no longer accepts a callback");this.op="findOneAndReplace",this._validateOp(),this._validate(),wi.canMerge(t)?this.merge(t):t!=null&&this.error(new ma(t,"filter","findOneAndReplace")),e!=null&&this._mergeUpdate(e),r=r||{};let n=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;return r.new==null&&r.returnDocument==null&&r.returnOriginal==null&&n!=null&&(r.returnOriginal=n),this.setOptions(r),this};G.prototype._findOneAndReplace=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();"strict"in this.options&&(this._mongooseOptions.strict=this.options.strict,delete this.options.strict);let e=this._conditions,r=this._optionsForExec();VV(r);let n=this.options.includeResultMetadata,i={skipId:!0};"strict"in this._mongooseOptions&&(i.strict=this._mongooseOptions.strict);let s=V5(this,"runValidators",!1);try{let a=new this.model(this._update,null,i);if(s)await a.validate();else if(a.$__.validationError)throw a.$__.validationError;this._update=a.toBSON()}catch(a){if(a instanceof $V)throw a;let c=new $V;throw c.errors[a.path]=a,c}let o=await this.mongooseCollection.findOneAndReplace(e,this._update,r);for(let a of this._transforms)o=a(o);let u=n?o.value:o;return new Promise((a,c)=>{this._completeOne(u,o,r.projection,(l,h)=>{if(l)return c(l);a(h)})})};function VV(t){"new"in t&&(t.returnDocument=t.new?"after":"before",delete t.new),"returnOriginal"in t&&(t.returnDocument=t.returnOriginal?"before":"after",delete t.returnOriginal),typeof t.returnDocument=="string"&&(t.returnOriginal=t.returnDocument==="before")}function V5(t,e,r){let n=t._optionsForExec(t.model);return e in n?n[e]:e in t.model.base.options?t.model.base.options[e]:r}function U5(t,e,r,n,i,s){if(i.lean&&typeof i.lean.transform=="function"){i.lean.transform(e);for(let o=0;o<t.childSchemas.length;o++){let u=r?r+"."+t.childSchemas[o].model.path:t.childSchemas[o].model.path,a=t.childSchemas[o].schema,c=LV.get(u,e);if(c!=null){if(Array.isArray(c))for(let l=0;l<c.length;l++)i.lean.transform(c[l]);else i.lean.transform(c);U5(a,c,u,n,i)}}return s?s(null,e):void 0}return i.includeResultMetadata?s(null,n):s(null,e)}function zV(t,e,r,n){if(n.lean&&typeof n.lean.transform=="function"){for(let i of e)n.lean.transform(i);for(let i=0;i<t.childSchemas.length;i++){let s=r?r+"."+t.childSchemas[i].model.path:t.childSchemas[i].model.path,o=t.childSchemas[i].schema,u=LV.get(s,e);if(u!=null){u=u.flat();for(let a=0;a<u.length;a++)n.lean.transform(u[a]);zV(o,u,s,n)}}}return e}G.prototype._mergeUpdate=function(t){if(this._update||(this._update=Array.isArray(t)?[]:{}),!(t==null||typeof t=="object"&&Object.keys(t).length===0))if(t instanceof G){if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");t._update&&Tt.mergeClone(this._update,t._update)}else if(Array.isArray(t)){if(!Array.isArray(this._update))throw new Error("Cannot mix array and object updates");this._update=this._update.concat(t)}else{if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");Tt.mergeClone(this._update,t)}};async function z5(t){if(this._applyTranslateAliases(),this._castConditions(),UV(this),this.error()!=null)throw this.error();let e=this._conditions,r=this._optionsForExec(this.model);this._update=ti(this._update,r);let n=t==="replaceOne";if(n)this._update=new this.model(this._update,null,!0);else{if(this._update=this._castUpdate(this._update),this._update==null||Object.keys(this._update).length===0)return{acknowledged:!1};let s=Object.assign({},r,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=jV(this._conditions,this.model.schema,this._update,s)}return Array.isArray(r.arrayFilters)&&(r.arrayFilters=$3e(this._update,r.arrayFilters)),V5(this,"runValidators",!1)&&await this.validate(this._update,r,n),this._update.toBSON&&(this._update=this._update.toBSON()),this.mongooseCollection[t](e,this._update,r)}G.prototype.validate=async function(e,r,n){if(typeof arguments[3]=="function")throw new Mn("Query.prototype.validate() no longer accepts a callback");await HV(this,"validate"),n?await e.$validate():await new Promise((i,s)=>{j3e(this,this.model.schema,e,r,o=>{if(o!=null)return s(o);i()})}),await WV(this,null,null,"validate")};G.prototype._updateMany=async function(){return z5.call(this,"updateMany")};G.prototype._updateOne=async function(){return z5.call(this,"updateOne")};G.prototype._replaceOne=async function(){return z5.call(this,"replaceOne")};G.prototype.updateMany=function(t,e,r,n){return typeof r=="function"?(n=r,r=null):typeof e=="function"?(n=e,e=t,t={},r=null):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),W5(this,"updateMany",t,e,r,n)};G.prototype.updateOne=function(t,e,r,n){return typeof r=="function"?(n=r,r=null):typeof e=="function"?(n=e,e=t,t={},r=null):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),W5(this,"updateOne",t,e,r,n)};G.prototype.replaceOne=function(t,e,r,n){return typeof r=="function"?(n=r,r=null):typeof e=="function"?(n=e,e=t,t={},r=null):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),W5(this,"replaceOne",t,e,r,n)};function W5(t,e,r,n,i,s){return t.op=e,t._validateOp(),n=n||{},i!=null&&"strict"in i&&(t._mongooseOptions.strict=i.strict),!(r instanceof G)&&r!=null&&r.toString()!=="[object Object]"?t.error(new ma(r,"filter",e)):t.merge(r),Tt.isObject(i)&&t.setOptions(i),t._mergeUpdate(n),s&&t.exec(s),t}G.prototype.transform=function(t){return this._transforms.push(t),this};G.prototype.orFail=function(t){return this.transform(e=>{switch(this.op){case"find":if(e.length===0)throw lf(t,this);break;case"findOne":if(e==null)throw lf(t,this);break;case"replaceOne":case"updateMany":case"updateOne":if(e&&e.matchedCount===0)throw lf(t,this);break;case"findOneAndDelete":case"findOneAndUpdate":case"findOneAndReplace":if(this.options.includeResultMetadata&&e!=null&&e.value==null)throw lf(t,this);if(!this.options.includeResultMetadata&&e==null)throw lf(t,this);break;case"deleteMany":case"deleteOne":if(e.deletedCount===0)throw lf(t,this);break;default:break}return e}),this};function lf(t,e){return typeof t=="function"&&(t=t.call(e)),t==null&&(t=new O3e(e.getQuery(),e.model.modelName)),t}G.prototype.isPathSelectedInclusive=function(t){return x3e(this._fields,t)};G.prototype.exec=async function(e){if(typeof e=="function"||arguments.length>=2&&typeof arguments[1]=="function")throw new Mn("Query.prototype.exec() no longer accepts a callback");if(typeof e=="string"&&(this.op=e),this.op==null)throw new Mn("Query must have `op` before executing");if(this.model==null)throw new Mn("Query must have an associated model before executing");if(this._validateOp(),!this.op)return;if(this.options&&this.options.sort&&Object.keys(this.options.sort).includes(""))throw new Error('Invalid field "" passed to sort()');let r="_"+this.op;if(this.op==="distinct"&&(r="__distinct"),this._executionStack!=null){let o=this.toString();o.length>60&&(o=o.slice(0,60)+"...");let u=new Mn("Query was already executed: "+o);throw u.originalStack=this._executionStack,u}else this._executionStack=new Error().stack;let n=null;try{await H3e(this)}catch(o){if(o instanceof j5.skipWrappedFunction)n=o;else throw o}let i,s=null;try{await HV(this),i=n?n.args[0]:await this[r]();for(let o of this._transforms)i=o(i)}catch(o){o instanceof j5.skipWrappedFunction?i=o.args[0]:s=o,s=this.model.schema._transformDuplicateKeyError(s)}return i=await WV(this,i,s),await W3e(this),i};function W3e(t){return new Promise((e,r)=>{t._hooks.execPost("exec",t,[],{},n=>{if(n)return r(n);e()})})}function WV(t,e,r,n){if(t._queryMiddleware==null){if(r!=null)throw r;return e}return new Promise((i,s)=>{let o=r?{error:r}:{};t._queryMiddleware.execPost(n||t.op,t,[e],o,(u,a)=>{if(u)return s(u);i(a)})})}function H3e(t){return new Promise((e,r)=>{t._hooks.execPre("exec",t,[],n=>{if(n!=null)return r(n);e()})})}function HV(t,e){if(t._queryMiddleware!=null)return new Promise((r,n)=>{t._queryMiddleware.execPre(e||t.op,t,[],i=>{if(i!=null)return n(i);r()})})}G.prototype.then=function(t,e){return this.exec().then(t,e)};G.prototype.catch=function(t){return this.exec().then(null,t)};G.prototype.finally=function(t){return this.exec().finally(t)};G.prototype[Symbol.toStringTag]=function(){return`Query { ${this.op} }`};G.prototype.pre=function(t){return this._hooks.pre("exec",t),this};G.prototype.post=function(t){return this._hooks.post("exec",t),this};G.prototype._castUpdate=function(e){let r=this.schema,n=r.options.discriminatorKey,i=r._baseSchema?r._baseSchema:r;if(this._mongooseOptions.overwriteDiscriminatorKey&&e[n]!=null&&i.discriminators){let o=Object.values(i.discriminators).find(u=>u.discriminatorMapping.value===e[n]);o!=null&&(r=o)}let s;return"upsert"in this.options&&(s=this.options.upsert),B3e(r,e,{strict:this._mongooseOptions.strict,upsert:s,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey,overwriteImmutable:this._mongooseOptions.overwriteImmutable},this,this._conditions)};G.prototype.populate=function(){let t=Array.from(arguments);if(!t.some(Boolean))return this;let e=Tt.populate.apply(null,t);if(this.options!=null){let i=this.options.readConcern,s=this.options.readPreference;for(let o of e)i!=null&&(o&&o.options&&o.options.readConcern)==null&&(o.options=o.options||{},o.options.readConcern=i),s!=null&&(o&&o.options&&o.options.readPreference)==null&&(o.options=o.options||{},o.options.readPreference=s)}let r=this._mongooseOptions;if(r.lean!=null){let i=r.lean;for(let s of e)(s&&s.options&&s.options.lean)==null&&(s.options=s.options||{},s.options.lean=i)}Tt.isObject(r.populate)||(r.populate={});let n=r.populate;for(let i of e){let s=i.path;n[s]&&n[s].populate&&i.populate&&(i.populate=n[s].populate.concat(i.populate)),n[i.path]=i}return this};G.prototype.getPopulatedPaths=function(){let e=this._mongooseOptions.populate||{},r=Object.keys(e);for(let n of Object.keys(e)){let i=e[n];Array.isArray(i.populate)&&GV(r,i.populate,n+".")}return r};function GV(t,e,r){for(let n of e)t.push(r+n.path),Array.isArray(n.populate)&&GV(t,n.populate,r+n.path+".")}G.prototype.cast=function(t,e){e||(e=this._conditions),t=t||this.model;let r=t.schema.options.discriminatorKey;e!=null&&e.hasOwnProperty(r)&&(t=I3e(t.discriminators,e[r])||t);let n={upsert:this.options&&this.options.upsert};this.options&&("strict"in this.options&&(n.strict=this.options.strict),"strictQuery"in this.options&&(n.strictQuery=this.options.strictQuery)),"sanitizeFilter"in this._mongooseOptions&&(n.sanitizeFilter=this._mongooseOptions.sanitizeFilter);try{return M3e(t.schema,e,n,this)}catch(i){throw typeof i.setModel=="function"&&i.setModel(t),i}};G.prototype._castFields=function(e){let r,n,i,s,o;if(e){i=Object.keys(e),n=[];for(let u=0;u<i.length;++u)s=i[u],e[s].$elemMatch&&(r||(r={}),r[s]=e[s],n.push(s))}if(r){try{o=this.cast(this.model,r)}catch(u){return u}for(let u=0;u<n.length;++u)s=n[u],e[s]=o[s]}return e};G.prototype._applyPaths=function(){if(!this.model)return;this._fields=this._fields||{};let e;this.model!=null&&Tt.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection")?e=this.model.db.options.sanitizeProjection:this.model!=null&&Tt.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection")?e=this.model.base.options.sanitizeProjection:e=this._mongooseOptions.sanitizeProjection,(this._mongooseOptions.schemaLevelProjections??!0)&&jd.applyPaths(this._fields,this.model.schema,e);let n=!0;"selectPopulatedPaths"in this.model.base.options&&(n=this.model.base.options.selectPopulatedPaths),"selectPopulatedPaths"in this.model.schema.options&&(n=this.model.schema.options.selectPopulatedPaths),n&&L3e(this._fields,this._userProvidedFields,this._mongooseOptions.populate)};G.prototype.cursor=function(e){e&&this.setOptions(e);try{this.cast(this.model)}catch(r){return new FV(this)._markError(r)}return new FV(this)};G.prototype.tailable=function(t,e){if(t!=null&&typeof t.constructor=="function"&&t.constructor.name==="Object"&&(e=t,t=!0),t===void 0&&(t=!0),e&&typeof e=="object")for(let r of Object.keys(e))r==="awaitData"||r==="awaitdata"?this.options.awaitData=!!e[r]:this.options[r]=e[r];return this.options.tailable=arguments.length?!!t:!0,this};G.prototype.near=function(){let t=[],e=this._mongooseOptions.nearSphere;if(arguments.length===1)if(Array.isArray(arguments[0]))t.push({center:arguments[0],spherical:e});else if(typeof arguments[0]=="string")t.push(arguments[0]);else if(Tt.isObject(arguments[0]))typeof arguments[0].spherical!="boolean"&&(arguments[0].spherical=e),t.push(arguments[0]);else throw new TypeError("invalid argument");else if(arguments.length===2)if(typeof arguments[0]=="number"&&typeof arguments[1]=="number")t.push({center:[arguments[0],arguments[1]],spherical:e});else if(typeof arguments[0]=="string"&&Array.isArray(arguments[1]))t.push(arguments[0]),t.push({center:arguments[1],spherical:e});else if(typeof arguments[0]=="string"&&Tt.isObject(arguments[1]))t.push(arguments[0]),typeof arguments[1].spherical!="boolean"&&(arguments[1].spherical=e),t.push(arguments[1]);else throw new TypeError("invalid argument");else if(arguments.length===3)if(typeof arguments[0]=="string"&&typeof arguments[1]=="number"&&typeof arguments[2]=="number")t.push(arguments[0]),t.push({center:[arguments[1],arguments[2]],spherical:e});else throw new TypeError("invalid argument");else throw new TypeError("invalid argument");return G.base.near.apply(this,t)};G.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this};Symbol.asyncIterator!=null&&(G.prototype[Symbol.asyncIterator]=function(){return this.cursor().transformNull()._transformForAsyncIterator()});G.prototype.box=function(t,e){return!Array.isArray(t)&&Tt.isObject(t)&&(e=t.ur,t=t.ll),G.base.box.call(this,t,e)};G.prototype.center=G.base.circle;G.prototype.centerSphere=function(){arguments[0]!=null&&typeof arguments[0].constructor=="function"&&arguments[0].constructor.name==="Object"&&(arguments[0].spherical=!0),arguments[1]!=null&&typeof arguments[1].constructor=="function"&&arguments[1].constructor.name==="Object"&&(arguments[1].spherical=!0),G.base.circle.apply(this,arguments)};G.prototype.selectedInclusively=function(){return R3e(this._fields)};G.prototype.selectedExclusively=function(){return N3e(this._fields)};G.prototype.model;KV.exports=G});var XV=y((Nke,JV)=>{"use strict";f();var V_=Fe(),QV=require("stream").Readable,G3e=_5(),K3e=Ti(),Y3e=require("util");function ri(t){QV.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=t,this._transforms=[];let e=t._model;delete t.options.cursor.useMongooseAggCursor,this._mongooseOptions={},Q3e(e,this,t)}Y3e.inherits(ri,QV);function Q3e(t,e,r){t.collection.buffer?t.collection.emitter.once("queue",function(){t.hooks.execPre("aggregate",r,function(){typeof r.options?.cursor?.transform=="function"&&e._transforms.push(r.options.cursor.transform),e.cursor=t.collection.aggregate(r._pipeline,r.options||{}),e.emit("cursor",e.cursor)})}):t.hooks.execPre("aggregate",r,function(){typeof r.options?.cursor?.transform=="function"&&e._transforms.push(r.options.cursor.transform),e.cursor=t.collection.aggregate(r._pipeline,r.options||{}),e.emit("cursor",e.cursor)})}ri.prototype._read=function(){let t=this;z_(this,function(e,r){if(e)return t.emit("error",e);if(!r){t.push(null),t.cursor.close(function(n){if(n)return t.emit("error",n)});return}t.push(r)})};if(Symbol.asyncIterator!=null){let t="Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation";ri.prototype[Symbol.asyncIterator]=function(){throw new V_(t)}}Object.defineProperty(ri.prototype,"map",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0});ri.prototype._markError=function(t){return this._error=t,this};ri.prototype.close=async function(){if(typeof arguments[0]=="function")throw new V_("AggregationCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close()}catch(e){throw this.listeners("error").length>0&&this.emit("error",e),e}this.emit("close")};ri.prototype._destroy=function(e,r){let n=null;return this.cursor?n=Promise.resolve():n=new Promise(i=>{this.once("cursor",i)}),n.then(()=>this.cursor.close()).then(()=>{this._closed=!0,r()}).catch(i=>{r(i)}),this};ri.prototype.next=async function(){if(typeof arguments[0]=="function")throw new V_("AggregationCursor.prototype.next() no longer accepts a callback");return new Promise((e,r)=>{z_(this,(n,i)=>{if(n!=null)return r(n);e(i)})})};ri.prototype.eachAsync=function(t,e){if(typeof arguments[2]=="function")throw new V_("AggregationCursor.prototype.eachAsync() no longer accepts a callback");let r=this;return typeof e=="function"&&(e={}),e=e||{},G3e(function(n){return z_(r,n)},t,e)};Symbol.asyncIterator!=null&&(ri.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()});ri.prototype._transformForAsyncIterator=function(){return this._transforms.indexOf(YV)===-1&&this.map(YV),this};ri.prototype.transformNull=function(t){return arguments.length===0&&(t=!0),this._mongooseOptions.transformNull=t,this};function YV(t){return t==null?{done:!0}:{value:t,done:!1}}ri.prototype.addCursorFlag=function(t,e){let r=this;return J3e(this,function(){r.cursor.addCursorFlag(t,e)}),this};function J3e(t,e){if(t.cursor)return e();t.once("cursor",function(){e()})}function z_(t,e){let r=e;if(t._transforms.length&&(r=function(n,i){if(n||i===null&&!t._mongooseOptions.transformNull)return e(n,i);e(n,t._transforms.reduce(function(s,o){return o(s)},i))}),t._error)return K3e(function(){r(t._error)});if(t.cursor)return t.cursor.next().then(n=>{if(!n)return r(null,null);r(null,n)},n=>r(n));t.once("cursor",function(){z_(t,e)})}JV.exports=ri});var H5=y((xke,ZV)=>{"use strict";f();ZV.exports=function(e,r,n){let i=r&&r.discriminatorMapping;if(n=n||"",i&&!i.isRoot){let s=e,o=(n.length>0?n+".":n)+i.key,u=i.value;if(s[0]!=null&&s[0].$match&&(s[0].$match[o]===void 0||s[0].$match[o]===u))s[0].$match[o]=u;else if(s[0]!=null&&s[0].$geoNear)s[0].$geoNear.query=s[0].$geoNear.query||{},s[0].$geoNear.query[o]=u;else if(s[0]!=null&&s[0].$search)if(s[1]&&s[1].$match!=null)s[1].$match[o]=s[1].$match[o]||u;else{let a={};a[o]=u,s.splice(1,0,{$match:a})}else{let a={};a[o]=u,s.unshift({$match:a})}}}});var tz=y(($ke,ez)=>{"use strict";f();ez.exports=function t(e){if(Array.isArray(e))for(let r of e){if(r==null)continue;let n=r.$group||r.$bucket||r.$bucketAuto;if(n!=null)for(let s of Object.keys(n))X3e(n[s]);let i=Object.keys(r)[0];if(i&&typeof r[i]=="object"){let s=r[i];for(let o of Object.keys(s))s[o]!=null&&s[o].$function!=null&&typeof s[o].$function.body=="function"&&(s[o].$function.body=s[o].$function.body.toString())}if(r.$facet!=null)for(let s of Object.keys(r.$facet))t(r.$facet[s])}};function X3e(t){if(!(t==null||t.$accumulator==null))for(let e of["init","accumulate","merge","finalize"])typeof t.$accumulator[e]=="function"&&(t.$accumulator[e]=String(t.$accumulator[e]))}});var Y5=y((qke,oz)=>{"use strict";f();var iz=XV(),G5=Fe(),sz=U_(),{applyGlobalMaxTimeMS:Z3e,applyGlobalDiskUse:e6e}=w5(),t6e=$t(),r6e=Cn(),K5=H5(),n6e=tz(),rz=Ce(),i6e=sz.prototype.read,s6e=sz.prototype.readConcern,nz=new Set(["$$DESCEND","$$PRUNE","$$KEEP"]);function Ue(t,e){this._pipeline=[],this._model=e,this.options={},arguments.length===1&&Array.isArray(t)&&this.append.apply(this,t)}Ue.prototype.options;Ue.prototype._optionsForExec=function(){let t=this.options||{},e=this.model()?.db?.base.transactionAsyncLocalStorage?.getStore();return!t.hasOwnProperty("session")&&e?.session!=null&&(t.session=e.session),t};Ue.prototype.model=function(t){return arguments.length===0?this._model:(this._model=t,t.schema!=null&&(this.options.readPreference==null&&t.schema.options.read!=null&&(this.options.readPreference=t.schema.options.read),this.options.collation==null&&t.schema.options.collation!=null&&(this.options.collation=t.schema.options.collation)),t)};Ue.prototype.append=function(){let t=arguments.length===1&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!t.every(o6e))throw new Error("Arguments must be aggregate pipeline operators");return this._pipeline=this._pipeline.concat(t),this};Ue.prototype.addFields=function(t){if(typeof t!="object"||t===null||Array.isArray(t))throw new Error("Invalid addFields() argument. Must be an object");return this.append({$addFields:Object.assign({},t)})};Ue.prototype.project=function(t){let e={};if(typeof t=="object"&&!Array.isArray(t))Object.keys(t).forEach(function(r){e[r]=t[r]});else if(arguments.length===1&&typeof t=="string")t.split(/\s+/).forEach(function(r){if(!r)return;let n=r[0]==="-"?0:1;n===0&&(r=r.substring(1)),e[r]=n});else throw new Error("Invalid project() argument. Must be string or object");return this.append({$project:e})};Ue.prototype.near=function(t){let e={};return e.$geoNear=t,this.append(e)};"group match skip limit out densify fill".split(" ").forEach(function(t){Ue.prototype[t]=function(e){let r={};return r["$"+t]=e,this.append(r)}});Ue.prototype.unwind=function(){let t=[...arguments],e=[];for(let r of t)if(r&&typeof r=="object")e.push({$unwind:r});else if(typeof r=="string")e.push({$unwind:r[0]==="$"?r:"$"+r});else throw new Error('Invalid arg "'+r+'" to unwind(), must be string or object');return this.append.apply(this,e)};Ue.prototype.replaceRoot=function(t){let e;return typeof t=="string"?e=t.startsWith("$")?t:"$"+t:e=t,this.append({$replaceRoot:{newRoot:e}})};Ue.prototype.count=function(t){return this.append({$count:t})};Ue.prototype.sortByCount=function(t){if(t&&typeof t=="object")return this.append({$sortByCount:t});if(typeof t=="string")return this.append({$sortByCount:t[0]==="$"?t:"$"+t});throw new TypeError('Invalid arg "'+t+'" to sortByCount(), must be string or object')};Ue.prototype.lookup=function(t){return this.append({$lookup:t})};Ue.prototype.graphLookup=function(t){let e={};if(t){if(!rz.isObject(t))throw new TypeError("Invalid graphLookup() argument. Must be an object.");rz.mergeClone(e,t);let r=e.startWith;r&&typeof r=="string"&&(e.startWith=e.startWith.startsWith("$")?e.startWith:"$"+e.startWith)}return this.append({$graphLookup:e})};Ue.prototype.sample=function(t){return this.append({$sample:{size:t}})};Ue.prototype.sort=function(t){let e={};if(r6e(t)==="Object"){let r=["desc","descending",-1];Object.keys(t).forEach(function(n){if(t[n]instanceof Object&&t[n].$meta){e[n]=t[n];return}e[n]=r.indexOf(t[n])===-1?1:-1})}else if(arguments.length===1&&typeof t=="string")t.split(/\s+/).forEach(function(r){if(!r)return;let n=r[0]==="-"?-1:1;n===-1&&(r=r.substring(1)),e[r]=n});else throw new TypeError("Invalid sort() argument. Must be a string or object.");return this.append({$sort:e})};Ue.prototype.unionWith=function(t){return this.append({$unionWith:t})};Ue.prototype.read=function(t,e){return i6e.call(this,t,e),this};Ue.prototype.readConcern=function(t){return s6e.call(this,t),this};Ue.prototype.redact=function(t,e,r){if(arguments.length===3){if(typeof e=="string"&&!nz.has(e)||typeof r=="string"&&!nz.has(r))throw new Error("If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP");t={$cond:{if:t,then:e,else:r}}}else if(arguments.length!==1)throw new TypeError("Invalid arguments");return this.append({$redact:t})};Ue.prototype.explain=async function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new G5("Aggregate.prototype.explain() no longer accepts a callback");let r=this._model;if(!this._pipeline.length)throw new Error("Aggregate has empty pipeline");K5(this._pipeline,this._model.schema),await new Promise((o,u)=>{r.hooks.execPre("aggregate",this,a=>{if(a){let c={error:a};return r.hooks.execPost("aggregate",this,[null],c,l=>{u(l)})}else o()})});let n=r.collection.aggregate(this._pipeline,this.options);e==null&&(e=!0);let i=null;try{i=await n.explain(e)}catch(o){await new Promise((u,a)=>{let c={error:o};r.hooks.execPost("aggregate",this,[null],c,l=>l?a(l):u())})}let s={error:null};return await new Promise((o,u)=>{r.hooks.execPost("aggregate",this,[i],s,a=>a?u(a):o())}),i};Ue.prototype.allowDiskUse=function(t){return this.options.allowDiskUse=t,this};Ue.prototype.hint=function(t){return this.options.hint=t,this};Ue.prototype.session=function(t){return t==null?delete this.options.session:this.options.session=t,this};Ue.prototype.option=function(t){for(let e in t)this.options[e]=t[e];return this};Ue.prototype.cursor=function(t){return this._optionsForExec(),this.options.cursor=t||{},new iz(this)};Ue.prototype.collation=function(t){return this.options.collation=t,this};Ue.prototype.facet=function(t){return this.append({$facet:t})};Ue.prototype.search=function(t){return this.append({$search:t})};Ue.prototype.pipeline=function(){return this._pipeline};Ue.prototype.exec=async function(){if(!this._model)throw new Error("Aggregate not bound to any Model");if(typeof arguments[0]=="function")throw new G5("Aggregate.prototype.exec() no longer accepts a callback");let e=this._model,r=this._model.collection;if(Z3e(this.options,e.db.options,e.base.options),e6e(this.options,e.db.options,e.base.options),this._optionsForExec(),this.options&&this.options.cursor)return new iz(this);if(K5(this._pipeline,this._model.schema),n6e(this._pipeline),await new Promise((o,u)=>{e.hooks.execPre("aggregate",this,a=>{if(a){let c={error:a};return e.hooks.execPost("aggregate",this,[null],c,l=>{u(l)})}else o()})}),!this._pipeline.length)throw new G5("Aggregate has empty pipeline");let n=t6e(this.options||{}),i;try{i=await(await r.aggregate(this._pipeline,n)).toArray()}catch(o){await new Promise((u,a)=>{let c={error:o};e.hooks.execPost("aggregate",this,[null],c,l=>{if(l)return a(l);u()})})}let s={error:null};return await new Promise((o,u)=>{e.hooks.execPost("aggregate",this,[i],s,a=>a?u(a):o())}),i};Ue.prototype.then=function(t,e){return this.exec().then(t,e)};Ue.prototype.catch=function(t){return this.exec().then(null,t)};Ue.prototype.finally=function(t){return this.exec().finally(t)};Symbol.asyncIterator!=null&&(Ue.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()});function o6e(t){if(typeof t!="object"||t===null)return!1;let e=Object.keys(t);return e.length===1&&e[0][0]==="$"}Ue._prepareDiscriminatorPipeline=K5;oz.exports=Ue});var az=y((jke,uz)=>{"use strict";f();var u6e=$t(),W_=class{constructor(e){e!=null&&Object.assign(this,u6e(e))}};W_.prototype.__subdocs=null;uz.exports=W_});var lz=y((Vke,cz)=>{"use strict";f();cz.exports=function t(e,r){let n=Object.keys(r.paths),i=n.length;for(let s=0;s<i;++s){let o="",u=n[s],a=r.paths[u],c=a.splitPath(),l=c.length,h=e;for(let d=0;d<l&&h!=null;++d){let p=c[d];if(o+=(o.length?".":"")+p,d===l-1){if(typeof h[p]<"u"){a.$isSingleNested?t(h[p],a.caster.schema):a.$isMongooseDocumentArray&&Array.isArray(h[p])&&h[p].forEach(g=>t(g,a.schema));break}let m=a.getDefault(e,!1,{skipCast:!0});typeof m<"u"&&(h[p]=m,a.$isSingleNested?t(m,a.caster.schema):a.$isMongooseDocumentArray&&Array.isArray(m)&&m.forEach(g=>t(g,a.schema)))}else h[p]==null&&(h[p]={}),h=h[p]}}}});var J5=y((Wke,fz)=>{"use strict";f();fz.exports=Q5;function Q5(t,e=new WeakSet,r=!1){if(!e.has(t)){e.add(t);for(let n of Object.keys(t.paths)){let i=t.paths[n];if(i.schema&&(Q5(i.schema,e),!!i.schema._applyDiscriminators&&!(i._appliedDiscriminators&&!r))){for(let s of i.schema._applyDiscriminators.keys()){let{schema:o,options:u}=i.schema._applyDiscriminators.get(s);Q5(o,e),i.discriminator(s,o,r?{...u,overwriteExisting:!0}:u)}i._appliedDiscriminators=!0}}}}});var dz=y((Gke,hz)=>{"use strict";f();var a6e=Gt(),c6e=Ce();hz.exports=function t(e,r){let n=X5();function i(s,o){Object.defineProperty(e.prototype,s,{get:function(){let u={};for(let a in o.methods[s])u[a]=o.methods[s][a].bind(this);return u},configurable:!0})}for(let s of Object.keys(r.methods)){let o=r.methods[s];if(r.tree.hasOwnProperty(s))throw new Error('You have a method and a property in your schema both named "'+s+'"');if(typeof o=="function"&&n.prototype[s]===o){delete r.methods[s];continue}r.reserved[s]&&!a6e(r,`methodOptions.${s}.suppressWarning`,!1)&&c6e.warn(`mongoose: the method name "${s}" is used by mongoose internally, overwriting it may cause bugs. If you're sure you know what you're doing, you can suppress this error by using \`schema.method('${s}', fn, { suppressWarning: true })\`.`),typeof o=="function"?e.prototype[s]=o:i(s,r)}e.$appliedMethods=!0;for(let s of Object.keys(r.paths)){let o=r.paths[s];o.$isSingleNested&&!o.caster.$appliedMethods&&t(o.caster,o.schema),o.$isMongooseDocumentArray&&!o.Constructor.$appliedMethods&&t(o.Constructor,o.schema)}}});var yz=y((Yke,mz)=>{"use strict";f();var pz=eC(),l6e=U1(),f6e=R_(),K_=Ce().isPOJO;mz.exports=function(e,r,n){if(r==null||e==null)return e;let i=null;return f6e(r)?i=!1:l6e(r)&&(i=!0),i==null?e:i?(n=n||pz(r),H_(e,r,n)):(n=n||pz(r),G_(e,r,n))};function H_(t,e,r,n,i){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(o=>H_(o,e,r,n,i));let s={...t};n=i?n||{}:e;for(let o of Object.keys(s)){let u=i?i+"."+o:o;e.hasOwnProperty(u)||n.hasOwnProperty(o)?K_(e[u])||K_(n[o])?s[o]=H_(s[o],e,r,n[o],u):delete s[o]:r[u]&&(s[o]=H_(s[o],e,r,n[o],u))}return s}function G_(t,e,r,n,i){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(o=>G_(o,e,r,n,i));let s={...t};n=i?n||{}:e;for(let o of Object.keys(s)){let u=i?i+"."+o:o;if(e.hasOwnProperty(u)||n.hasOwnProperty(o)){(K_(e[u])||K_(n[o]))&&(s[o]=G_(s[o],e,r,n[o],u));continue}else r[u]?s[o]=G_(s[o],e,r,n[o],u):delete s[o]}return s}});var _z=y((Jke,gz)=>{"use strict";f();gz.exports=function(e){let r=!1;for(let n of Object.keys(e))e[n]==="text"&&(r=!0);return r}});var Az=y((Zke,Ez)=>{"use strict";f();var h6e=_z();Ez.exports=function(e,r,n){h6e(e)||n.hasOwnProperty("collation")&&!r.hasOwnProperty("collation")&&(r.collation=n.collation)}});var Sz=y((tqe,wz)=>{"use strict";f();var d6e=ig(),{queryMiddlewareFunctions:p6e,aggregateMiddlewareFunctions:m6e,modelMiddlewareFunctions:y6e,documentMiddlewareFunctions:g6e}=$g(),_6e=Array.from(new Set([...p6e,...m6e,...y6e,...g6e]));wz.exports=function(e,r,n){let i={useErrorHandlers:!0,numCallbackParams:1};e.$__insertMany=r.createWrapper("insertMany",e.$__insertMany,e,i),r=r.filter(s=>_6e.indexOf(s.name)!==-1?!!s.model:s.model!==!1);for(let s of Object.keys(n))if(r.hasHooks(s)){let o=e[s];e[s]=function(){let u=arguments.length,a=u>0?arguments[u-1]:null,c=typeof a=="function"?a:null,l=Array.prototype.slice.call(arguments,0,c==null?u:u-1);return d6e(c,h=>{r.execPre(s,e,l,function(d){if(d!=null)return h(d);let p=0,m=o.apply(e,l.concat(g));m!=null&&typeof m.then=="function"&&m.then(_=>g(null,_),_=>g(_));function g(_,w){if(!(p++>0)){if(_!=null)return h(_);r.execPost(s,e,[w],function(S){if(S!=null)return h(S);h(null,w)})}}})},e.events)}}}});var Oz=y((nqe,bz)=>{"use strict";f();bz.exports=function(e,r){for(let n in r.statics)e[n]=r.statics[n]}});var vz=y((sqe,Mz)=>{"use strict";f();var Cz=Fg(),E6e=_i();Mz.exports=Tz;function Tz(t,e,r){return e==null?e:(A6e(t,e,r),Dz(t,e,r))}function A6e(t,e,r){for(let n of t.childSchemas){let i=n.model.path,s=n.schema;if(!i)continue;let o=E6e.get(i,e);o==null||Array.isArray(o)&&o.flat(1/0).length===0||Tz(s,o,r)}}function Dz(t,e,r){if(e==null||typeof e!="object")return;if(Array.isArray(e)){for(let u of e)Dz(t,u,r);return}if(t.discriminators&&Object.keys(t.discriminators).length>0)for(let u of Object.keys(t.discriminators)){let a=t.discriminators[u],c=a.discriminatorMapping.key,l=a.discriminatorMapping.value;if(e[c]==l){t=a;break}}let n=Cz(t.options.timestamps,"createdAt"),i=Cz(t.options.timestamps,"updatedAt"),s=r?.currentTime,o=null;s!=null?o=s():t.base?.now?o=t.base.now():o=new Date,n&&e[n]==null&&!r?.isUpdate&&(e[n]=o),i&&(e[i]=o)}});var Pz=y((uqe,Iz)=>{"use strict";f();var w6e=_i();Iz.exports=Bz;function Bz(t,e,r){if(e==null)return e;let n=r,i=null;if(Array.isArray(r)){n=[],i=[];for(let s of r)s.length===1?i.push(s[0]):n.push(s)}return S6e(t,e,n),Z5(t,e,i)}function S6e(t,e,r){let n=!1;for(let i of t.childSchemas){let s=i.model.path,o=i.schema;if(!s)continue;let u=w6e.get(s,e);if(u==null||Array.isArray(u)&&u.flat(1/0).length===0)continue;let a=null;if(Array.isArray(r)){a=[];for(let c of r)c[0]==s&&a.push(c.slice(1));if(a.length===0)continue}Bz(o,u,a),n=!0}r&&r.length&&!n&&Z5(t,e,r)}function Z5(t,e,r){if(!(e==null||typeof e!="object")){if(Array.isArray(e)){for(let n of e)Z5(t,n,r);return}if(t.discriminators&&Object.keys(t.discriminators).length>0)for(let n of Object.keys(t.discriminators)){let i=t.discriminators[n],s=i.discriminatorMapping.key,o=i.discriminatorMapping.value;if(e[s]==o){t=i;break}}r==null&&(r=Object.keys(t.virtuals));for(let n of r){if(t.virtuals[n]==null)continue;let i=t.virtuals[n],s=Array.isArray(n)?n:n.indexOf(".")===-1?[n]:n.split("."),o=e;for(let c=0;c<s.length-1;++c)o[s[c]]=s[c]in o?o[s[c]]:{},o=o[s[c]];let u=i.applyGetters(o[s[s.length-1]],e);i.options&&(i.options.ref||i.options.refPath)&&u===void 0&&(i.options.justOne?u=null:u=[]),o[s[s.length-1]]=u}}}});var Y_=y((cqe,Nz)=>{"use strict";f();Nz.exports=function t(e){return this instanceof t?(this.val=e,this):new t(e)}});var Vd=y((fqe,Rz)=>{"use strict";f();Rz.exports=new WeakMap});var kz=y((dqe,$z)=>{"use strict";f();var b6e=$t(),xz=Vd(),O6e=ye().modelSymbol,C6e=Ce();$z.exports=Fz;var Q_=Symbol("mongoose#assignRawDocsToIdStructure#hasArray");function Fz(t,e,r,n,i){let s=[],o=n.isVirtual&&n.justOne&&t.length>1?!1:n.sort&&t.length>1,u=n.$nullIfNotFound,a,c,l;C6e.isMongooseArray(t)&&(t=t.__array);let h=0,d=t.length;if(o&&i&&n[Q_]===void 0){n[Q_]=!1;for(let p in r)if(Array.isArray(r[p])){n[Q_]=!0;break}}for(h=0;h<d;++h){if(l=t[h],Array.isArray(l)){Fz(l,e,r,n,!0),s.push(l);continue}if(l===null&&o===!1){s.push(l);continue}if(c=String(l),a=e[c],n.clone&&a!=null)if(n.lean){let p=xz.get(a);a=b6e(a),xz.set(a,p)}else a=a.constructor.hydrate(a._doc);if(i)if(a)if(o){let p=r[c];n[Q_]?s.push(a):s[p]=a}else s.push(a);else l!=null&&l[O6e]!=null?s.push(l):s.push(n.retainNullValues||u?null:l);else s[h]=a||null}t.length=0,s.length&&s.forEach(function(p,m){t[m]=p})}});var t8=y((mqe,qz)=>{"use strict";f();qz.exports=e8;function e8(t,e){if(t.virtuals[e])return{virtual:t.virtuals[e],path:void 0};let r=e.split("."),n="",i="";for(let s=0;s<r.length;++s){if(n+=(n.length>0?".":"")+r[s],t.virtuals[n]){if(s===r.length-1)return{virtual:t.virtuals[n],path:i};continue}if(!t.nested[n]){if(t.paths[n]&&t.paths[n].schema){t=t.paths[n].schema;let o=r.slice(s+1).join(".");if(t.virtuals[o]){if(s===r.length-2)return{virtual:t.virtuals[o],nestedSchemaPath:[i,n].filter(u=>!!u).join(".")};continue}if(s+1<r.length&&t.discriminators)for(let u of Object.keys(t.discriminators)){let a=e8(t.discriminators[u],o);if(a!=null){let c=[i,n,a.nestedSchemaPath].filter(l=>!!l).join(".");return{virtual:a.virtual,nestedSchemaPath:c}}}i+=(i.length>0?".":"")+n,n="";continue}if(t.discriminators)for(let o of Object.keys(t.discriminators)){let u=e8(t.discriminators[o],e);if(u)return u}return null}}}});var jz=y((J_,Lz)=>{f();(function(t,e){typeof J_=="object"&&typeof Lz<"u"?e(J_):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.sift={}))})(J_,function(t){"use strict";var e=function(D,M){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,L){N.__proto__=L}||function(N,L){for(var ne in L)Object.prototype.hasOwnProperty.call(L,ne)&&(N[ne]=L[ne])},e(D,M)};function r(D,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");e(D,M);function N(){this.constructor=D}D.prototype=M===null?Object.create(M):(N.prototype=M.prototype,new N)}typeof SuppressedError=="function"&&SuppressedError;var n=function(D){var M="[object "+D+"]";return function(N){return i(N)===M}},i=function(D){return Object.prototype.toString.call(D)},s=function(D){return D instanceof Date?D.getTime():u(D)?D.map(s):D&&typeof D.toJSON=="function"?D.toJSON():D},o=function(D){return D??null},u=n("Array"),a=n("Object"),c=n("Function"),l=function(D,M){return D.hasOwnProperty(M)&&!c(D[M])},h=function(D){return D&&(D.constructor===Object||D.constructor===Array||D.constructor.toString()==="function Object() { [native code] }"||D.constructor.toString()==="function Array() { [native code] }")&&!D.toJSON},d=function(D,M){if(D==null&&D==M||D===M)return!0;if(Object.prototype.toString.call(D)!==Object.prototype.toString.call(M))return!1;if(u(D)){if(D.length!==M.length)return!1;for(var N=0,L=D.length;N<L;N++)if(!d(D[N],M[N]))return!1;return!0}else if(a(D)){if(Object.keys(D).length!==Object.keys(M).length)return!1;for(var ne in D)if(!d(D[ne],M[ne]))return!1;return!0}return!1},p=function(D,M,N,L,ne,me){var Oe=M[L];if(u(D)&&isNaN(Number(Oe))&&!l(D,Oe)){for(var Le=0,_r=D.length;Le<_r;Le++)if(!p(D[Le],M,N,L,Le,D))return!1}return L===M.length||D==null?N(D,ne,me,L===0,L===M.length):p(D[Oe],M,N,L+1,Oe,D)},m=function(){function D(M,N,L,ne){this.params=M,this.owneryQuery=N,this.options=L,this.name=ne,this.init()}return D.prototype.init=function(){},D.prototype.reset=function(){this.done=!1,this.keep=!1},D}(),g=function(D){r(M,D);function M(N,L,ne,me){var Oe=D.call(this,N,L,ne)||this;return Oe.children=me,Oe}return M.prototype.reset=function(){this.keep=!1,this.done=!1;for(var N=0,L=this.children.length;N<L;N++)this.children[N].reset()},M.prototype.childrenNext=function(N,L,ne,me,Oe){for(var Le=!0,_r=!0,pn=0,Oi=this.children.length;pn<Oi;pn++){var Oo=this.children[pn];if(Oo.done||Oo.next(N,L,ne,me,Oe),Oo.keep||(_r=!1),Oo.done){if(!Oo.keep)break}else Le=!1}this.done=Le,this.keep=_r},M}(m),_=function(D){r(M,D);function M(N,L,ne,me,Oe){var Le=D.call(this,N,L,ne,me)||this;return Le.name=Oe,Le}return M}(g),w=function(D){r(M,D);function M(){var N=D!==null&&D.apply(this,arguments)||this;return N.propop=!0,N}return M.prototype.next=function(N,L,ne,me){this.childrenNext(N,L,ne,me)},M}(g),S=function(D){r(M,D);function M(N,L,ne,me,Oe){var Le=D.call(this,L,ne,me,Oe)||this;return Le.keyPath=N,Le.propop=!0,Le._nextNestedValue=function(_r,pn,Oi,Oo,g3){return Le.childrenNext(_r,pn,Oi,Oo,g3),!Le.done},Le}return M.prototype.next=function(N,L,ne){p(N,this.keyPath,this._nextNestedValue,0,L,ne)},M}(g),C=function(D,M){if(D instanceof Function)return D;if(D instanceof RegExp)return function(L){var ne=typeof L=="string"&&D.test(L);return D.lastIndex=0,ne};var N=s(D);return function(L){return M(N,s(L))}},O=function(D){r(M,D);function M(){var N=D!==null&&D.apply(this,arguments)||this;return N.propop=!0,N}return M.prototype.init=function(){this._test=C(this.params,this.options.compare)},M.prototype.next=function(N,L,ne){(!Array.isArray(ne)||ne.hasOwnProperty(L))&&this._test(N,L,ne)&&(this.done=!0,this.keep=!0)},M}(m),B=function(D,M,N){return new O(D,M,N)},P=function(D){return function(M,N,L,ne){return D(M,N,L,ne)}},v=function(D){return P(function(M,N,L,ne){var me=typeof s(M),Oe=D(M);return new O(function(Le){var _r=o(Le);return typeof s(_r)===me&&Oe(_r)},N,L,ne)})},j=function(D,M,N,L){var ne=L.operations[D];return ne||k(D),ne(M,N,L,D)},k=function(D){throw new Error("Unsupported operation: ".concat(D))},q=function(D,M){for(var N in D)if(M.operations.hasOwnProperty(N)||N.charAt(0)==="$")return!0;return!1},R=function(D,M,N,L,ne){if(q(M,ne)){var me=z(M,N,ne),Oe=me[0],Le=me[1];if(Le.length)throw new Error("Property queries must contain only operations, or exact objects.");return new S(D,M,L,ne,Oe)}return new S(D,M,L,ne,[new O(M,L,ne)])},F=function(D,M,N){M===void 0&&(M=null);var L=N===void 0?{}:N,ne=L.compare,me=L.operations,Oe={compare:ne||d,operations:Object.assign({},me||{})},Le=z(D,null,Oe),_r=Le[0],pn=Le[1],Oi=[];return _r.length&&Oi.push(new S([],D,M,Oe,_r)),Oi.push.apply(Oi,pn),Oi.length===1?Oi[0]:new w(D,M,Oe,Oi)},z=function(D,M,N){var L=[],ne=[];if(!h(D))return L.push(new O(D,D,N)),[L,ne];for(var me in D)if(N.operations.hasOwnProperty(me)){var Oe=j(me,D[me],D,N);if(Oe&&!Oe.propop&&M&&!N.operations[M])throw new Error("Malformed query. ".concat(me," cannot be matched against property."));Oe!=null&&L.push(Oe)}else me.charAt(0)==="$"?k(me):ne.push(R(me.split("."),D[me],me,D,N));return[L,ne]},J=function(D){return function(M,N,L){return D.reset(),D.next(M,N,L),D.keep}},De=function(D,M){return M===void 0&&(M={}),J(F(D,null,M))},W=function(D){r(M,D);function M(){var N=D!==null&&D.apply(this,arguments)||this;return N.propop=!0,N}return M.prototype.init=function(){this._test=C(this.params,this.options.compare)},M.prototype.reset=function(){D.prototype.reset.call(this),this.keep=!0},M.prototype.next=function(N){this._test(N)&&(this.done=!0,this.keep=!1)},M}(m),Z=function(D){r(M,D);function M(){var N=D!==null&&D.apply(this,arguments)||this;return N.propop=!0,N}return M.prototype.init=function(){if(!this.params||typeof this.params!="object")throw new Error("Malformed query. $elemMatch must by an object.");this._queryOperation=F(this.params,this.owneryQuery,this.options)},M.prototype.reset=function(){D.prototype.reset.call(this),this._queryOperation.reset()},M.prototype.next=function(N){if(u(N)){for(var L=0,ne=N.length;L<ne;L++){this._queryOperation.reset();var me=N[L];this._queryOperation.next(me,L,N,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},M}(m),be=function(D){r(M,D);function M(){var N=D!==null&&D.apply(this,arguments)||this;return N.propop=!0,N}return M.prototype.init=function(){this._queryOperation=F(this.params,this.owneryQuery,this.options)},M.prototype.reset=function(){D.prototype.reset.call(this),this._queryOperation.reset()},M.prototype.next=function(N,L,ne,me){this._queryOperation.next(N,L,ne,me),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},M}(m),rt=function(D){r(M,D);function M(){var N=D!==null&&D.apply(this,arguments)||this;return N.propop=!0,N}return M.prototype.init=function(){},M.prototype.next=function(N){u(N)&&N.length===this.params&&(this.done=!0,this.keep=!0)},M}(m),ce=function(D){if(D.length===0)throw new Error("$and/$or/$nor must be a nonempty array")},qt=function(D){r(M,D);function M(){var N=D!==null&&D.apply(this,arguments)||this;return N.propop=!1,N}return M.prototype.init=function(){var N=this;ce(this.params),this._ops=this.params.map(function(L){return F(L,null,N.options)})},M.prototype.reset=function(){this.done=!1,this.keep=!1;for(var N=0,L=this._ops.length;N<L;N++)this._ops[N].reset()},M.prototype.next=function(N,L,ne){for(var me=!1,Oe=!1,Le=0,_r=this._ops.length;Le<_r;Le++){var pn=this._ops[Le];if(pn.next(N,L,ne),pn.keep){me=!0,Oe=pn.keep;break}}this.keep=Oe,this.done=me},M}(m),us=function(D){r(M,D);function M(){var N=D!==null&&D.apply(this,arguments)||this;return N.propop=!1,N}return M.prototype.next=function(N,L,ne){D.prototype.next.call(this,N,L,ne),this.keep=!this.keep},M}(qt),Ws=function(D){r(M,D);function M(){var N=D!==null&&D.apply(this,arguments)||this;return N.propop=!0,N}return M.prototype.init=function(){var N=this,L=Array.isArray(this.params)?this.params:[this.params];this._testers=L.map(function(ne){if(q(ne,N.options))throw new Error("cannot nest $ under ".concat(N.name.toLowerCase()));return C(ne,N.options.compare)})},M.prototype.next=function(N,L,ne){for(var me=!1,Oe=!1,Le=0,_r=this._testers.length;Le<_r;Le++){var pn=this._testers[Le];if(pn(N)){me=!0,Oe=!0;break}}this.keep=Oe,this.done=me},M}(m),bu=function(D){r(M,D);function M(N,L,ne,me){var Oe=D.call(this,N,L,ne,me)||this;return Oe.propop=!0,Oe._in=new Ws(N,L,ne,me),Oe}return M.prototype.next=function(N,L,ne,me){this._in.next(N,L,ne),u(ne)&&!me?this._in.keep?(this.keep=!1,this.done=!0):L==ne.length-1&&(this.keep=!0,this.done=!0):(this.keep=!this._in.keep,this.done=!0)},M.prototype.reset=function(){D.prototype.reset.call(this),this._in.reset()},M}(m),Jc=function(D){r(M,D);function M(){var N=D!==null&&D.apply(this,arguments)||this;return N.propop=!0,N}return M.prototype.next=function(N,L,ne,me,Oe){Oe?ne.hasOwnProperty(L)===this.params&&(this.done=!0,this.keep=!0):(this.done=!0,this.keep=!this.params)},M}(m),Ou=function(D){r(M,D);function M(N,L,ne,me){var Oe=D.call(this,N,L,ne,N.map(function(Le){return F(Le,L,ne)}),me)||this;return Oe.propop=!1,ce(N),Oe}return M.prototype.next=function(N,L,ne,me){this.childrenNext(N,L,ne,me)},M}(_),as=function(D){r(M,D);function M(N,L,ne,me){var Oe=D.call(this,N,L,ne,N.map(function(Le){return F(Le,L,ne)}),me)||this;return Oe.propop=!0,Oe}return M.prototype.next=function(N,L,ne,me){this.childrenNext(N,L,ne,me)},M}(_),Hr=function(D,M,N){return new O(D,M,N)},Ta=function(D,M,N,L){return new W(D,M,N,L)},Xc=function(D,M,N,L){return new qt(D,M,N,L)},Da=function(D,M,N,L){return new us(D,M,N,L)},Ma=function(D,M,N,L){return new Z(D,M,N,L)},So=function(D,M,N,L){return new bu(D,M,N,L)},bo=function(D,M,N,L){return new Ws(D,M,N,L)},Zc=v(function(D){return function(M){return M!=null&&M<D}}),Hs=v(function(D){return function(M){return M===D||M<=D}}),cs=v(function(D){return function(M){return M!=null&&M>D}}),Cu=v(function(D){return function(M){return M===D||M>=D}}),el=function(D,M,N){var L=D[0],ne=D[1];return new O(function(me){return s(me)%L===ne},M,N)},va=function(D,M,N,L){return new Jc(D,M,N,L)},Dp=function(D,M,N){return new O(new RegExp(D,M.$options),M,N)},Mp=function(D,M,N,L){return new be(D,M,N,L)},vp={number:function(D){return typeof D=="number"},string:function(D){return typeof D=="string"},bool:function(D){return typeof D=="boolean"},array:function(D){return Array.isArray(D)},null:function(D){return D===null},timestamp:function(D){return D instanceof Date}},Bp=function(D,M,N){return new O(function(L){if(typeof D=="string"){if(!vp[D])throw new Error("Type alias does not exist");return vp[D](L)}return L!=null?L instanceof D||L.constructor===D:!1},M,N)},Ip=function(D,M,N,L){return new Ou(D,M,N,L)},Pp=function(D,M,N,L){return new as(D,M,N,L)},Np=function(D,M,N){return new rt(D,M,N,"$size")},Rp=function(){return null},xp=function(D,M,N){var L;if(c(D))L=D;else if(!process.env.CSP_ENABLED)L=new Function("obj","return "+D);else throw new Error('In CSP mode, sift does not support strings in "$where" condition');return new O(function(ne){return L.bind(ne)(ne)},M,N)},y3=Object.freeze({__proto__:null,$Size:rt,$all:Pp,$and:Ip,$elemMatch:Ma,$eq:Hr,$exists:va,$gt:cs,$gte:Cu,$in:bo,$lt:Zc,$lte:Hs,$mod:el,$ne:Ta,$nin:So,$nor:Da,$not:Mp,$options:Rp,$or:Xc,$regex:Dp,$size:Np,$type:Bp,$where:xp}),Fp=function(D,M,N){var L=N===void 0?{}:N,ne=L.compare,me=L.operations;return F(D,M,{compare:ne,operations:Object.assign({},y3,me||{})})},Cf=function(D,M){M===void 0&&(M={});var N=Fp(D,null,M);return J(N)};t.$Size=rt,t.$all=Pp,t.$and=Ip,t.$elemMatch=Ma,t.$eq=Hr,t.$exists=va,t.$gt=cs,t.$gte=Cu,t.$in=bo,t.$lt=Zc,t.$lte=Hs,t.$mod=el,t.$ne=Ta,t.$nin=So,t.$nor=Da,t.$not=Mp,t.$options=Rp,t.$or=Xc,t.$regex=Dp,t.$size=Np,t.$type=Bp,t.$where=xp,t.EqualsOperation=O,t.createDefaultQueryOperation=Fp,t.createEqualsOperation=B,t.createOperationTester=J,t.createQueryOperation=F,t.createQueryTester=De,t.default=Cf,Object.defineProperty(t,"__esModule",{value:!0})})});var Vz=y((_qe,r8)=>{f();var Uz=jz();r8.exports=Uz.default;Object.assign(r8.exports,Uz)});var Yz=y((Aqe,Kz)=>{"use strict";f();var T6e=qg(),D6e=Y_(),M6e=kz(),X_=Gt(),v6e=t8(),Gz=Vd(),zz=Rg(),B6e=uC(),n8=_i(),Wz=Vz().default,Z_=Ce(),{populateModelSymbol:I6e}=ye();Kz.exports=function(e){let r=Object.assign({},X_(e,"allOptions.options.options"),X_(e,"allOptions.options")),n=Object.assign({},e.options,r,{justOne:e.justOne,isVirtual:e.isVirtual});n.$nullIfNotFound=e.isVirtual;let i=e.populatedModel,s=[].concat(e.rawIds);e.allIds=[].concat(e.allIds),M6e(e.rawIds,e.rawDocs,e.rawOrder,n);let o=e.docs,u=e.rawIds,a=e.options,c=e.count&&e.isVirtual,l,h=0;function d(p){if(++h,c)return p;if(p instanceof D6e)return p.val;if(p===void 0)return p;let m=e.allIds[l];if(e.path.endsWith(".$*"))return zd(p,a,n,m);if(e.justOne===!0&&Array.isArray(p)){let g=[];for(let _ of p){let w=Gz.get(_);(w==null||w===i)&&g.push(_)}for(;p.length>g.length;)Array.prototype.pop.apply(p,[]);for(let _=0;_<g.length;++_)p[_]=g[_];return zd(p[0],a,n,m)}else{if(e.justOne===!1&&!Array.isArray(p))return zd([p],a,n,m);if(e.justOne===!0&&!Array.isArray(p)&&Array.isArray(m))return zd(p,a,n,p==null?p:m[h-1])}return zd(p,a,n,m)}for(l=0;l<o.length;++l){h=0;let p=e.path.endsWith(".$*")?e.path.slice(0,-3):e.path,m=n8.get(p,o[l],zz);if(m==null&&!v6e(e.originalModel.schema,p))continue;let g;c?g=P6e(u[l]):Array.isArray(e.match)?g=Array.isArray(u[l])?u[l].filter(B=>B==null||Wz(e.match[l])(B)):[u[l]].filter(B=>B==null||Wz(e.match[l])(B))[0]:g=u[l];let _=e.originalModel.schema,w=X_(o[l],"$__",null)!=null,S=w?m instanceof Map:Z_.isPOJO(m);if(S=S&&X_(_._getSchema(p),"$isSchemaMap"),!e.isVirtual&&S){let B=m instanceof Map?Array.from(m.keys()):Object.keys(m);g=g.reduce((P,v,j)=>(P.set(B[j],v),P),new Map)}if(w&&Array.isArray(g))for(let B of g)B!=null&&B.$__!=null&&(B.$__.parent=o[l]);else w&&g!=null&&g.$__!=null&&(g.$__.parent=o[l]);if(e.isVirtual&&w){o[l].$populated(p,e.justOne?s[0]:s,e.allOptions),Array.isArray(g)&&(g=g.map(B=>B??void 0)),n8.set(p,g,o[l],void 0,d,!1);continue}let C=p.split("."),O=o[l];for(let B=0;B<C.length-1&&!(Array.isArray(O)&&!Z_.isArrayIndex(C[B])||C[B]==="$*");++B){if(O[C[B]]==null){let P=C.slice(0,B+1).join("."),v=_._getSchema(P);if(g==null&&v!=null&&v.$isMongooseArray)break;O[C[B]]={}}if(O=O[C[B]],typeof O!="object")break}o[l].$__&&(e.allOptions.options[I6e]=e.allOptions.model,o[l].$populated(p,e.unpopulatedValues[l],e.allOptions.options),g!=null&&g.$__!=null&&(g.$__.wasPopulated={value:e.unpopulatedValues[l]}),g instanceof Map&&!g.$isMongooseMap&&(g=new T6e(g,p,o[l],o[l].schema.path(p).$__schemaType))),n8.set(p,g,o[l],zz,d,!1),o[l].$__&&B6e(o[l],[e.allOptions.options])}};function P6e(t){return Array.isArray(t)?t.some(e=>Array.isArray(e)||e===null)?t.map(e=>e==null?0:Array.isArray(e)?e.filter(r=>r!=null).length:1):t.filter(e=>e!=null).length:t==null?0:1}function zd(t,e,r,n){let i=typeof r.transform=="function",s=i?r.transform:o=>o;if(Array.isArray(t)){let o=[],u=t.length;for(let l=0;l<u;++l){let h=t[l],d=Array.isArray(n)?n[l]:n;if(!(!i8(h)&&(!r.retainNullValues||h!=null)&&!i)){{if(!r.retainNullValues&&h==null)continue;i&&(h=s(i8(h)?h:null,d))}if(Hz(h,e),o.push(h),e.originalLimit&&o.length>=e.originalLimit)break}}let a=o.length;for(;t.length>a;)Array.prototype.pop.apply(t,[]);let c=0;if(Z_.isMongooseArray(t))for(c=0;c<a;++c)t.set(c,o[c],!0);else for(c=0;c<a;++c)t[c]=o[c];return t}return i8(t)||Z_.isPOJO(t)?(Hz(t,e),s(t,n)):t instanceof Map?t:r.justOne===!1?[]:t==null?s(t,n):s(null,n)}function Hz(t,e){t!=null&&e.excludeId&&(typeof t.$__setValue=="function"?delete t._doc._id:delete t._id)}function i8(t){return t==null?!1:Array.isArray(t)||t.$isMongooseMap||t.$__!=null||Gz.has(t)}});var Zz=y((Sqe,Xz)=>{"use strict";f();var N6e=Y_(),R6e=cC(),{trusted:eE}=B1(),Qz=q_();Xz.exports=function(e,r,n,i,s){let o=x6e(r);if(n.size===1){let u=Array.from(n)[0],a=i.schema.path(u);if(u!=="_id"||!o._id)e=Jz(e,a,s),o[u]=eE({$in:e});else if(u==="_id"&&o._id){let l=Qz(o[u])?o[u]:{$eq:o[u]};o[u]={...eE({$in:e}),...l}}let c=R6e(u);for(let l=0;l<c.length-1;++l){let h=c[l];if(o[h]!=null&&o[h].$elemMatch!=null){o[h].$elemMatch[u.slice(h.length+1)]=eE({$in:e}),delete o[u];break}}}else{let u=[];Array.isArray(o.$or)?(o.$and=[{$or:o.$or},{$or:u}],delete o.$or):o.$or=u;for(let a of n)if(a!=="_id"||!o._id){let c=i.schema.path(a);e=Jz(e,c,s),u.push({[a]:{$in:e}})}else if(a==="_id"&&o._id){let c=Qz(o[a])?o[a]:{$eq:o[a]};o[a]={...eE({$in:e}),...c}}}return o};function Jz(t,e,r){return t=t.filter(n=>!(n instanceof N6e)),r?t.filter(n=>{try{return e.cast(n),!0}catch{return!1}}):t}function x6e(t){return Array.isArray(t)?t.length>1?{$or:[].concat(t.map(e=>Object.assign({},e)))}:Object.assign({},t[0]):Object.assign({},t)}});var nW=y((Oqe,rW)=>{"use strict";f();var eW=bc(),F6e=Gt(),$6e=Xi(),tW=Vd(),ff=_i(),k6e=ye().populateModelSymbol;rW.exports=function t(e,r,n,i){let s=r.path(i),o=n;if(s)return s;let u=r.discriminatorMapping&&r.discriminatorMapping.key;if(u&&e!=null){if(n!=null&&n[u]!=null){let l=$6e(e.discriminators,n[u]);r=l?l.schema:r}else if(e.discriminators!=null)return Object.keys(e.discriminators).reduce((l,h)=>{let d=e.discriminators[h];return l.concat(t(d,d.schema,null,i))},[])}function a(l,h,d,p){let m=l.length+1,g,_;for(;m--;){if(_=l.slice(0,m).join("."),g=h.path(_),g==null)continue;if(g.caster){if(g.caster instanceof eW)return g.caster;let C=null;if(g.schema!=null&&g.schema.discriminators!=null){let O=g.schema.discriminators,B=_+"."+g.schema.options.discriminatorKey,P=d?ff.get(B,d)||[]:[];C=Object.keys(O).reduce(function(v,j){let k=O[j].discriminatorMapping.value;return(n==null||P.indexOf(j)!==-1||P.indexOf(k)!==-1)&&v.push(O[j]),v},[])}if(m!==l.length&&g.schema){let O;if(l[m]==="$")return m+1===l.length?g:(O=a(l.slice(m+1),h,d?ff.get(_,d):null,p.concat(l.slice(0,m))),O&&(O.$parentSchemaDocArray=O.$parentSchemaDocArray||(g.schema.$isSingleNested?null:g)),O);if(C!=null&&C.length>0){O=[];for(let B of C){let P=a(l.slice(m),B,d?ff.get(_,d):null,p.concat(l.slice(0,m)));P!=null&&(P.$parentSchemaDocArray=P.$parentSchemaDocArray||(g.schema.$isSingleNested?null:g),P.$parentSchemaDocArray&&(O.$parentSchemaDocArray=P.$parentSchemaDocArray),O.push(P))}return O}else return O=a(l.slice(m),g.schema,d?ff.get(_,d):null,p.concat(l.slice(0,m))),O&&(O.$parentSchemaDocArray=O.$parentSchemaDocArray||(g.schema.$isSingleNested?null:g)),O}else if(m!==l.length&&g.$isMongooseArray&&g.casterConstructor.$isMongooseArray){let O=g;for(;O.$isMongooseArray&&!O.$isMongooseDocumentArray;)O=O.casterConstructor;let B=a(l.slice(m),O.schema,null,p.concat(l.slice(0,m)));if(B!=null)return B;if(O.schema.discriminators){let P=[];for(let v of Object.keys(O.schema.discriminators)){let j=O.schema.discriminators[v]||O.schema,k=a(l.slice(m),j,null,p.concat(l.slice(0,m)));k!=null&&P.push(k)}if(P.length>0)return P}}}else if(g.$isSchemaMap&&g.$__schemaType instanceof eW)return g.$__schemaType;let w=p.concat([_]).join(".");if(o!=null&&o.$__&&o.$populated(w)&&m<l.length){let C=n.$__.populated[w].options[k6e];if(C!=null)return a(l.slice(m),C.schema,d?ff.get(_,d):null,p.concat(l.slice(0,m)))}let S=F6e(o,_);if(S!=null){let C=Array.isArray(S)&&S.length>0?tW.get(S[0]):tW.get(S),O=C!=null?C.schema:null;if(O!=null){let B=a(l.slice(m),O,d?ff.get(_,d):null,p.concat(l.slice(0,m)));if(B!=null)return B.$parentSchemaDocArray=B.$parentSchemaDocArray||(O.$isSingleNested?null:O),B}}return g}}let c=i.split(".");for(let l=0;l<c.length;++l)c[l]==="$"&&(c[l]="0");return a(c,r,n,[])}});var cW=y((Tqe,aW)=>{"use strict";f();var hf=Hn(),q6e=Y_(),L6e=$t(),ns=Gt(),j6e=Xi(),U6e=Cn(),iW=nW(),V6e=t8(),Wd=Rg(),Fc=_i(),tE=zC(),dn=Ce(),u8=ye().modelSymbol,s8=ye().populateModelSymbol,a8=Sc().schemaMixedSymbol,z6e=GO();aW.exports=function(e,r,n){let i,s=r.length,o=[],u=n.model&&n.model.modelName||n.model,a,c,l,h={},d=e.schema;if(n._localModel!=null&&n._localModel.schema.nested[n.path])return[];let p=V6e(e.schema,n.path);if((p==null?null:p.virtual)!=null)return W6e(e,r,n,p);let g=iW(e,d,null,n.path);if(g=Array.isArray(g)?g:[g].filter(S=>S!=null),!(n.strictPopulate===!1||n.options?.strictPopulate===!1)&&g.length===0&&n._localModel!=null)return new z6e(n._fullPath||n.path);for(let S=0;S<s;S++){i=r[S];let C=null;if(i.$__!=null&&i.populated(n.path)&&(n.forceRepopulate!=null?n.forceRepopulate:i.constructor.base.options.forceRepopulate)===!1)continue;let O=i!=null&&i.$__!=null?i.$__schema:d;if(a=iW(e,O,i,n.path),a!=null&&a.$isMongooseDocumentArray&&a.options.ref==null&&a.options.refPath==null)continue;if(a&&a.$parentSchemaDocArray&&ns(n,"options.sort")!=null)return new hf("Cannot populate with `sort` on path "+n.path+" because it is a subproperty of a document array");l=null;let P=!1,v=null,j=null,k=null;if(a!=null&&a.instance==="Embedded"){if(a.options.ref){let Z={localField:n.path+"._id",foreignField:"_id",justOne:!0},be=w(i,a,u,e),rt=Fc.get(n.path,i),ce=Fc.get("_id",rt);c8(e,o,h,be.modelNames,n,Z,ce,i,j,rt)}continue}if(Array.isArray(a)){let Z=a;for(let be of Z){let rt,ce;try{ce=w(i,be,u,e),rt=ce.modelNames,P=P||ce.isRefPath,v=v||ce.refPath,C=ce.justOne}catch(qt){return qt}if(!(P&&!ce.isRefPath)&&rt){l=l||[];for(let qt of rt)l.indexOf(qt)===-1&&l.push(qt)}}}else{try{let Z=w(i,a,u,e);l=Z.modelNames,P=Z.isRefPath,v=v||Z.refPath,C=Z.justOne,j=ns(a,"options.populate",null),P&&(k=l,l=Array.from(new Set(l)))}catch(Z){return Z}if(!l)continue}let q={},R=n.path,F="_id";if("justOne"in n&&n.justOne!==void 0?C=n.justOne:a&&!a[a8]&&(n.path.endsWith("."+a.path)||n.path===a.path)&&(C=Array.isArray(a)?a.every(Z=>!Z.$isMongooseArray):!a.$isMongooseArray),!l)continue;q.isVirtual=!1,q.justOne=C,q.localField=R,q.foreignField=F;let z=oW(i,R,e,n,null,a),J=String(dn.getValue(F,i));n._docs[J]=Array.isArray(z)?z.slice():z;let De=ns(n,"match",null),W=typeof De=="function";if(W&&(De=De.call(i,i)),Array.isArray(De)){for(let Z of De)if(Z!=null&&Z.$where)throw new hf("Cannot use $where filter with populate() match")}else if(De!=null&&De.$where!=null)throw new hf("Cannot use $where filter with populate() match");q.match=De,q.hasMatchFunction=W,q.isRefPath=P,q.modelNamesInOrder=k,P&&(l=H6e(i,d,q,n,v,z)||l);try{c8(e,o,h,l,n,q,z,i,j)}catch(Z){return Z}}return o;function w(S,C,O,B){let P,v=!1,j=null,k=C;C&&C.instance==="Array"&&(C=C.caster),C&&C.$isSchemaMap&&(C=C.$__schemaType);let q=C&&C.options&&C.options.ref;if(c=C&&C.options&&C.options.refPath,C!=null&&C[a8]&&!q&&!c&&!O)return{modelNames:null};if(O)P=[O];else if(c!=null){if(typeof c=="function"){let R=n.path.slice(0,n.path.length-C.path.length-1),F=Fc.get(R,S,Wd),z=Array.isArray(F)?dn.array.flatten(F):F?[F]:[];P=new Set;for(let J of z)c=c.call(J,J,n.path),tE(c,S,n.path,d,n._queryProjection).forEach(De=>P.add(De));P=Array.from(P)}else P=tE(c,S,n.path,d,n._queryProjection);v=!0}else{let R,F,z,J,De=B,W=B.schema.options.discriminatorKey;if(!C&&W&&(J=dn.getValue(W,S))){let Z=j6e(B.discriminators,J)||B;if(Z!=null)De=Z;else try{De=l8(B.db,J)}catch(be){return be}z=De.schema._getSchema(n.path),z&&z.caster&&(z=z.caster)}else z=C;if(k&&k.path.endsWith(".$*")?j=!k.$isMongooseArray&&!k._arrayPath:z!=null&&(j=!z.$isMongooseArray&&!z._arrayPath),(R=ns(z,"options.ref"))!=null)if(z!=null&&typeof R=="function"&&n.path.endsWith("."+z.path)){P=new Set;let Z=n.path.slice(0,n.path.length-z.path.length-1),be=Fc.get(Z,S,Wd),rt=Array.isArray(be)?dn.array.flatten(be):be?[be]:[];for(let ce of rt)P.add(o8(R,ce));rt.length===0?P=[o8(R,S)]:P=Array.from(P)}else R=o8(R,S),P=[R];else if((z=ns(C,"options.refPath"))!=null)if(v=!0,typeof F=="function"){let Z=n.path.slice(0,n.path.length-z.path.length-1),be=Fc.get(Z,S,Wd),rt=Array.isArray(be)?dn.array.flatten(be):be?[be]:[];P=new Set;for(let ce of rt)F=F.call(ce,ce,n.path),tE(F,S,n.path,d,n._queryProjection).forEach(qt=>P.add(qt));P=Array.from(P)}else P=tE(F,S,n.path,d,n._queryProjection)}if(!P)if(n._localModel==null)P=[B.modelName];else return{modelNames:P,justOne:j,isRefPath:v,refPath:c};return Array.isArray(P)||(P=[P]),{modelNames:P,justOne:j,isRefPath:v,refPath:c}}};function W6e(t,e,r,n){let i=[],s={},o=n.virtual;for(let u of e){let a=null,c={},l,h=n.nestedSchemaPath?n.nestedSchemaPath+".":"";typeof r.localField=="string"?l=r.localField:typeof o.options.localField=="function"?l=h+o.options.localField.call(u,u):Array.isArray(o.options.localField)?l=o.options.localField.map(S=>h+S):l=h+o.options.localField,c.count=o.options.count,o.options.skip!=null&&!r.hasOwnProperty("skip")&&(r.skip=o.options.skip),o.options.limit!=null&&!r.hasOwnProperty("limit")&&(r.limit=o.options.limit),o.options.perDocumentLimit!=null&&!r.hasOwnProperty("perDocumentLimit")&&(r.perDocumentLimit=o.options.perDocumentLimit);let d=o.options.foreignField;if(!l||!d)return new hf(`Cannot populate virtual \`${r.path}\` on model \`${t.modelName}\`, because options \`localField\` and / or \`foreignField\` are missing`);typeof l=="function"&&(l=l.call(u,u)),typeof d=="function"&&(d=d.call(u,u)),c.isRefPath=!1;let p=null;"justOne"in r&&r.justOne!==void 0&&(p=r.justOne),a=o._getModelNamesForPopulate(u),o.options.refPath?(p=!!o.options.justOne,c.isRefPath=!0):o.options.ref&&(p=!!o.options.justOne),c.isVirtual=!0,c.virtual=o,c.justOne=p;let m=ns(c,"virtual.options.match",null)||ns(c,"virtual.options.options.match",null),g=ns(r,"match",null)||m,_=typeof g=="function";if(_&&(g=g.call(u,u,c.virtual)),Array.isArray(l)&&Array.isArray(d)&&l.length===d.length){g=Object.assign({},g);for(let S=1;S<l.length;++S)g[d[S]]=uW(Fc.get(l[S],u,Wd),t.schema),_=!0;l=l[0],d=d[0]}if(c.localField=l,c.foreignField=d,c.match=g,c.hasMatchFunction=_,Array.isArray(g)){for(let S of g)if(S!=null&&S.$where)throw new hf("Cannot use $where filter with populate() match")}else if(g!=null&&g.$where!=null)throw new hf("Cannot use $where filter with populate() match");let w=oW(u,l,t,r,o);try{c8(t,i,s,a,r,c,w,u)}catch(S){return S}}return i}function c8(t,e,r,n,i,s,o,u,a,c){let l=i.connection!=null?i.connection:t.db;if(c=c===void 0?o:c,Array.isArray(c)&&(c=dn.cloneArrays(c)),n==null)return;let h=dn.array.flatten(n),d=h.length;for(;d--;){let p=h[d];if(p==null)continue;let m;if(i.model&&i.model[u8])m=i.model;else if(p[u8])m=p,p=m.modelName;else try{m=l8(l,p)}catch(S){if(o!==void 0)throw S;m=null}let g=o,_=s.modelNamesInOrder?s.modelNamesInOrder:n;s.isRefPath&&Array.isArray(o)&&o.length===_.length&&(g=sW(o,_,p));let w=i.perDocumentLimit==null?ns(i,"options.perDocumentLimit",null):i.perDocumentLimit;if(!r[p]||w!=null){let S={model:m};s.isVirtual&&ns(s.virtual,"options.options")?S.options=L6e(s.virtual.options.options):a!=null&&(S.options=Object.assign({},a)),dn.merge(S,i),i[s8]=m,S[s8]=m,r[p]={model:m,options:S,match:s.hasMatchFunction?[s.match]:s.match,docs:[u],ids:[g],allIds:[o],unpopulatedValues:[c],localField:new Set([s.localField]),foreignField:new Set([s.foreignField]),justOne:s.justOne,isVirtual:s.isVirtual,virtual:s.virtual,count:s.count,[s8]:m},e.push(r[p])}else r[p].localField.add(s.localField),r[p].foreignField.add(s.foreignField),r[p].docs.push(u),r[p].ids.push(g),r[p].allIds.push(o),r[p].unpopulatedValues.push(c),s.hasMatchFunction&&r[p].match.push(s.match)}}function l8(t,e){return t.models[e]==null&&t._parent!=null?l8(t._parent,e):t.model(e)}function sW(t,e,r){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(e)?t.flatMap((n,i)=>sW(n,e[i],r)):[]:e===r?Array.isArray(t)?dn.array.flatten(t):[t]:[]}function o8(t,e){return typeof t=="function"&&!t[u8]?t.call(e,e):t}function oW(t,e,r,n,i,s){let o=r.schema._getPathType(e),u=o==="real"?r.schema.path(e):o.schema,a=u&&u.getters?u.getters:[];e=u!=null&&u.instance==="Embedded"?e+"._id":e;let c=ns(n,"options",{}),l="getters"in c?c.getters:ns(i,"options.getters",!1);if(a.length!==0&&l){let h=t.$__!=null?t:r.hydrate(t),d=dn.getValue(e,t);if(Array.isArray(d)){let p=dn.getValue(e.split(".").slice(0,-1),h);return d.map((m,g)=>u.applyGetters(m,p[g]))}else return u.applyGetters(d,h)}else return uW(Fc.get(e,t,Wd),s)}function uW(t,e){if(t!=null&&t.$__!=null)return t._doc._id;if(t!=null&&t._id!=null&&(e==null||!e.$isSchemaMap))return t._id;if(Array.isArray(t)){let r=t.__array!=null?t.__array:t;for(let n=0;n<r.length;++n)r[n]!=null&&r[n].$__!=null&&(r[n]=r[n]._doc._id);return dn.isMongooseArray(t)&&t.$schema()?t.$schema()._castForPopulate(t,t.$parent()):[].concat(t)}if(U6e(t)==="Object"&&(e==null||e[a8]==null)){let r=[];for(let n of Object.keys(t))r.push(t[n]);return r}return t instanceof Map?Array.from(t.values()):t}function H6e(t,e,r,n,i,s){if(!r.isRefPath||i==null)return;let o=i.split("."),u="",a;for(let c=0;c<o.length;++c){let l=o[c];u=u+(u.length===0?"":".")+l;let h=e.path(u);if(h!=null&&h.$isMongooseArray&&h.caster.discriminators!=null&&Object.keys(h.caster.discriminators).length!==0){let d=dn.getValue(u,t),p=n.path.substring(u.length+1),m=h.caster.schema.options.discriminatorKey;a=[];for(let g of d){let _=dn.getValue(m,g),w=h.caster.discriminators[_],S=w&&w.schema;if(S==null)continue;let C=S.path(p);if(C==null||C.options.refPath==null){let B=dn.getValue(r.localField.substring(u.length+1),g);s.forEach((P,v)=>{P===B&&(s[v]=q6e(P))});continue}let O=dn.getValue(o.slice(c+1).join("."),g);a.push(O)}}}return a}});var fW=y((Mqe,lW)=>{"use strict";f();var G6e=Gt();lW.exports=function(e){if(Array.isArray(e)){let n=Object.keys(e[0]);return n.length===1&&n[0]==="_id"&&e[0]._id!=="hashed"}if(typeof e!="object")return!1;let r=G6e(e,"key",{});return Object.keys(r).length===1&&r.hasOwnProperty("_id")}});var pW=y((Bqe,dW)=>{"use strict";f();var rE=Gt(),hW=Ce();dW.exports=function(e,r,n){if(n.textIndexVersion!=null){delete n.key._fts,delete n.key._ftsx;let u={...n.weights,...n.key};if(Object.keys(u).length!==Object.keys(e).length)return!1;for(let a of Object.keys(u)){if(!(a in e))return!1;let c=u[a];if(c!==rE(r,"weights."+a)&&!(c===1&&rE(r,"weights."+a)==null))return!1}return r.default_language!==n.default_language?n.default_language==="english"&&r.default_language==null:!0}let i=["unique","partialFilterExpression","sparse","expireAfterSeconds","collation"];for(let u of i)if(!(!(u in r)&&!(u in n))){if(u==="collation"){if(r[u]==null||n[u]==null)return r[u]==null&&n[u]==null;let a=Object.keys(r.collation),c=r.collation,l=n.collation;for(let h of a)if(rE(c,h)!==rE(l,h))return!1}else if(!hW.deepEqual(r[u],n[u]))return!1}let s=Object.keys(e),o=Object.keys(n.key);if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u]||!hW.deepEqual(e[s[u]],n.key[o[u]]))return!1;return!0}});var yW=y((Pqe,mW)=>{"use strict";f();mW.exports=function(e,r){if(r.timeseries==null)return!1;let{timeField:n,metaField:i}=r.timeseries;return typeof n!="string"||typeof i!="string"?!1:Object.keys(e.key).length===2&&e.key[n]===1&&e.key[i]===1}});var AW=y((Rqe,EW)=>{"use strict";f();var K6e=q_();function Y6e(t,e){return _W({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:"schema"})}function Q6e(t,e){return _W({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:"db"})}EW.exports={getRelatedSchemaIndexes:Y6e,getRelatedDBIndexes:Q6e};function _W({baseModelName:t,discriminatorMapping:e,indexes:r,indexesType:n}){let i=e&&e.key,s=e&&e.value;return i?t?r.filter(u=>{let a=gW(u,n);return a&&a[i]===s}):r.filter(u=>{let a=gW(u,n);return!a||!a[i]||K6e(a[i])&&!("$eq"in a[i])}):r}function gW(t,e){if(e==="schema"){let r=t[1];return r&&r.partialFilterExpression}return t.partialFilterExpression}});var SW=y((Fqe,wW)=>{"use strict";f();wW.exports=J6e;function J6e(t,e,r){let n=0,i=0,s=null;if(e<=0)throw new Error("Limit must be positive");if(t.length===0)return r(null,[]);for(let c=0;c<t.length&&c<e;++c)o();function o(){t[i+n](a(i+n)),++n}let u=[];function a(c){return(l,h)=>{if(--n,++i,s==null){if(l!=null)return s=l,r(s);if(u[c]=h,i===t.length)return r(null,u);i+n<t.length&&o()}}}}});var OW=y((kqe,bW)=>{"use strict";f();bW.exports=function t(e,r,n){if(r!=null)for(let i=0;i<r.length;++i)Array.isArray(r[i])?t(e,r[i],n+"."+i):e.push(n+"."+i)}});var vW=y((Lqe,MW)=>{"use strict";f();var CW=Gt(),TW=_i(),DW=k5();MW.exports=function(e,r,n){let i=DW(CW(r,"select",null),!0)||DW(CW(r,"options.select",null),!0);if(i!=null){for(let s of e)if(i.hasOwnProperty("-"+s))for(let o of n)o.$__!=null?TW.unset(s,o._doc):TW.unset(s,o)}}});var IW=y((Uqe,BW)=>{"use strict";f();var X6e=Fe(),nE=class extends X6e{constructor(e,r,n){let i=n?.matchedCount??0,s=n?.insertedCount??0,o=r.map(a=>a._id).join(", ");o.length>100&&(o=o.slice(0,100)+"...");let u=r.length-i-s;super(`${e}.bulkSave() was not able to update ${u} of the given documents due to incorrect version or optimistic concurrency, document ids: ${o}`),this.modelName=e,this.documents=r,this.bulkWriteResult=n,this.numDocumentsNotUpdated=u}};Object.defineProperty(nE.prototype,"name",{value:"MongooseBulkSaveIncompleteError"});BW.exports=nE});var X5=y((QW,JW)=>{"use strict";f();var Z6e=Y5(),eAe=$O(),yo=Yn(),tAe=z2(),f8=require("events").EventEmitter,m8=P1(),{MongoBulkWriteError:rAe}=Xo(),oE=Q9(),ve=Hn(),nAe=cg(),iAe=zO(),iE=U_(),sAe=az(),h8=z1(),d8=Ac(),qW=UO(),PW=VO(),oAe=fg(),uAe=lz(),aAe=J5(),cAe=kg(),LW=dz(),lAe=yz(),fAe=S5(),jW=Az(),hAe=Sz(),UW=Oz(),dAe=vz(),VW=b5(),pAe=Pz(),mAe=Yz(),yAe=f5(),_u=$t(),gAe=Zz(),zW=c5(),NW=Z9(),WW=mg(),_Ae=a_(),p8=w9(),Gd=Gt(),EAe=Cn(),sE=Xi(),AAe=cW(),Kd=Ti(),y8=xs().internalToObjectOptions,g8=fW(),HW=pW(),wAe=yW(),{getRelatedDBIndexes:SAe,getRelatedSchemaIndexes:bAe}=AW(),_8=HC(),OAe=gg(),CAe=Vd(),TAe=SW(),DAe=H5(),GW=OW(),MAe=vW(),vAe=n5(),RW=tl(),xW=require("util"),Dt=Ce(),BAe=aC(),IAe=IW(),Yd=Symbol("mongoose#Model#collection"),Qd=Symbol("mongoose#Model#db"),KW=ye().modelSymbol,Hd=Symbol("mongoose#Model#subclassed"),{VERSION_INC:uE,VERSION_WHERE:FW,VERSION_ALL:PAe}=yo,NAe=Object.assign({},y8,{bson:!0});function X(t,e,r){if(e instanceof h8)throw new TypeError("2nd argument to `Model` constructor must be a POJO or string, **not** a schema. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");if(typeof t=="string")throw new TypeError("First argument to `Model` constructor must be an object, **not** a string. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");yo.call(this,t,e,r)}Object.setPrototypeOf(X.prototype,yo.prototype);X.prototype.$isMongooseModelPrototype=!0;X.prototype.db;X.prototype.collection;X.prototype.$__collection;X.prototype.modelName;X.prototype.$where;X.prototype.baseModelName;X.events;X._middleware;function YW(t,e){if(t.$where!=null)for(let r of Object.keys(t.$where))e[r]=t.$where[r]}X.prototype.$__handleSave=function(t,e){let r={};VW(this.$__schema,t),typeof t.writeConcern<"u"?(r.writeConcern={},"w"in t.writeConcern&&(r.writeConcern.w=t.writeConcern.w),"j"in t.writeConcern&&(r.writeConcern.j=t.writeConcern.j),"wtimeout"in t.writeConcern&&(r.writeConcern.wtimeout=t.writeConcern.wtimeout)):("w"in t&&(r.w=t.w),"j"in t&&(r.j=t.j),"wtimeout"in t&&(r.wtimeout=t.wtimeout)),"checkKeys"in t&&(r.checkKeys=t.checkKeys);let n=this.$session(),i=this[Qd].base.transactionAsyncLocalStorage?.getStore();if(n!=null?r.session=n:!t.hasOwnProperty("session")&&i?.session!=null&&(r.session=i.session),this.$isNew){let u=this.toObject(NAe);if((u||{})._id===void 0){Kd(function(){e(new ve("document must have an _id before saving"))});return}this.$__version(!0,u),this[Yd].insertOne(u,r).then(a=>e(null,a),a=>{df(this,!0),e(a,null)}),this.$__reset(),df(this,!1),this.$__.inserting=!0;return}this.$__.inserting=!1;let s=this.$__delta();if(t.pathsToSave){for(let u in s[1].$set)if(!t.pathsToSave.includes(u)){if(t.pathsToSave.some(a=>u.slice(0,a.length)===a&&u.charAt(a.length)==="."))continue;delete s[1].$set[u]}}if(s){if(s instanceof ve){e(s);return}let u=this.$__where(s[0]);if(u instanceof ve){e(u);return}YW(this,u);let a=s[1];if(this.$__schema.options.minimize){for(let c of Object.values(a))if(c!=null)for(let l of Object.keys(c))c[l]==null||typeof c[l]!="object"||Dt.isPOJO(c[l])&&(BAe(c[l]),Object.keys(c[l]).length===0&&(delete c[l],a.$unset=a.$unset||{},a.$unset[l]=1))}this[Yd].updateOne(u,a,r).then(c=>{c.$where=u,e(null,c)},c=>{this.$__undoReset(),e(c)})}else{o.call(this);return}this.$__.modifiedPaths=this.modifiedPaths(),this.$__reset(),df(this,!1);function o(){let u=Object.assign({},t,r),a=this.$__where(),c=this.$__schema.options.optimisticConcurrency;if(c&&!Array.isArray(c)){let l=this.$__schema.options.versionKey,h=this.$__getValue(l);h!=null&&(a[l]=h)}fAe(this.$__schema,u),this.constructor.collection.findOne(a,u).then(l=>{e(null,{$where:a,matchedCount:l?1:0})}).catch(e)}};X.prototype.$__save=function(t,e){this.$__handleSave(t,(r,n)=>{if(r)return r=this.$__schema._transformDuplicateKeyError(r),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:r},u=>{e(u,this)});let i=0;if((t!=null?t.writeConcern!=null?t.writeConcern.w:t.w:0)!==0){if(n!=null&&(Array.isArray(n)?i=n.length:n.matchedCount!=null?i=n.matchedCount:i=n),this.$__.version&&!this.$__.inserting){let u=uE===(uE&this.$__.version);this.$__.version=void 0;let a=this.$__schema.options.versionKey,c=this.$__getValue(a)||0;if(i<=0){this.$__undoReset();let l=this.$__.$versionError||new qW(this,c,this.$__.modifiedPaths);return e(l)}u&&this.$__setValue(a,c+1)}if(n!=null&&i<=0)return this.$__undoReset(),r=new tAe(n.$where,this.constructor.modelName,i,n),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:r},a=>{e(a,this)})}this.$__.saving=void 0,this.$__.savedState={},this.$emit("save",this,i),this.constructor.emit("save",this,i),e(null,this)})};function RAe(t,e){let r=t.$__schema.options.versionKey;if(!r)return null;let n=t.$__getValue(r)||0;return new qW(t,n,e)}X.prototype.save=async function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new ve("Model.prototype.save() no longer accepts a callback");let r;if(this.$op="save",this.$__.saving?r=new PW(this):this.$__.saving=new PW(this),e=new sAe(e),e.hasOwnProperty("session")&&this.$session(e.session),this.$__.timestamps!=null&&(e.timestamps=this.$__.timestamps),this.$__.$versionError=RAe(this,this.modifiedPaths()),r)throw this.$__handleReject(r),r;return this.$__.saveOptions=e,await new Promise((n,i)=>{this.$__save(e,s=>{if(this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null,s!=null)return this.$__handleReject(s),i(s);n()})}),this};X.prototype.$save=X.prototype.save;X.prototype.$__version=function(t,e){let r=this.$__schema.options.versionKey;if(t===!0){r&&(vAe(e,r,0),this.$__setValue(r,0));return}if(r!==!1&&this.$__isSelected(r)){if(FW===(FW&this.$__.version)){let n=this.$__getValue(r);n!=null&&(t[r]=n)}uE===(uE&this.$__.version)&&(Gd(e.$set,r,null)!=null?++e.$set[r]:(e.$inc=e.$inc||{},e.$inc[r]=1))}};X.prototype.increment=function(){return this.$__.version=PAe,this};X.prototype.$__where=function(e){return e||(e={}),e._id||(e._id=this._doc._id),this._doc._id===void 0?new ve("No _id found on document!"):e};X.prototype.deleteOne=function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new ve("Model.prototype.deleteOne() no longer accepts a callback");e||(e={}),e.hasOwnProperty("session")&&this.$session(e.session);let r=this,n=this.$__where();if(n instanceof Error)throw n;let i=r.constructor.deleteOne(n,e);return this.$session()!=null&&("session"in i.options||(i.options.session=this.$session())),i.pre(function(o){r.constructor._middleware.execPre("deleteOne",r,[r],o)}),i.pre(function(o){p8(r.$getAllSubdocs(),(u,a)=>{u.constructor._middleware.execPre("deleteOne",u,[u],a)},o)}),i.pre(function(o){return r.$__.isDeleted?o(m8.skipWrappedFunction()):o()}),i.post(function(o){p8(r.$getAllSubdocs(),(u,a)=>{u.constructor._middleware.execPost("deleteOne",u,[u],{},a)},o)}),i.post(function(o){r.constructor._middleware.execPost("deleteOne",r,[r],{},o)}),i};X.prototype.$model=function(e){return arguments.length===0?this.constructor:this[Qd].model(e)};X.prototype.model=X.prototype.$model;X.exists=function(e,r){if(xe(this,"exists"),typeof arguments[2]=="function")throw new ve("Model.exists() no longer accepts a callback");return this.findOne(e).select({_id:1}).lean().setOptions(r)};X.discriminator=function(t,e,r){let n;if(typeof t=="function"&&(n=t,t=Dt.getFunctionName(n),!(n.prototype instanceof X)))throw new ve("The provided class "+t+" must extend Model");r=r||{};let i=Dt.isPOJO(r)?r.value:r,s=typeof r.clone=="boolean"?r.clone:!0,o=typeof r.mergePlugins=="boolean"?r.mergePlugins:!0,u=typeof r.overwriteModels=="boolean"?r.overwriteModels:!1;if(xe(this,"discriminator"),Dt.isObject(e)&&!e.instanceOfSchema&&(e=new h8(e)),e instanceof h8&&s&&(e=e.clone()),e=_Ae(this,t,e,i,o,r.mergeHooks,u),this.db.models[t]&&!e.options.overwriteModels&&!u)throw new iAe(t);e.$isRootDiscriminator=!0,e.$globalPluginsApplied=!0,n=this.db.model(n||t,e,this.$__collection.name),this.discriminators[t]=n;let a=this.discriminators[t];if(Object.setPrototypeOf(a.prototype,this.prototype),Object.defineProperty(a,"baseModelName",{value:this.modelName,configurable:!0,writable:!1}),LW(a,e),UW(a,e),this[Hd]!=null)for(let c of this[Hd])c.discriminators=c.discriminators||{},c.discriminators[t]=n.__subclass(n.db,e,c.collection.name);return a};function xe(t,e){if(t==null||t===global)throw new ve("`Model."+e+"()` cannot run without a model as `this`. Make sure you are calling `MyModel."+e+"()` where `MyModel` is a Mongoose model.");if(t[KW]==null)throw new ve("`Model."+e+"()` cannot run without a model as `this`. Make sure you are not calling `new Model."+e+"()`")}for(let t in f8.prototype)X[t]=f8.prototype[t];X.init=function(){if(xe(this,"init"),typeof arguments[0]=="function")throw new ve("Model.init() no longer accepts a callback");if(this.schema.emit("init",this),this.$init!=null)return this.$init;let e=this.db,r=async()=>{if(Dt.getOption("autoIndex",this.schema.options,e.config,e.base.options))return await this.ensureIndexes({_automatic:!0})},n=async()=>{if(!Dt.getOption("autoSearchIndex",this.schema.options,e.config,e.base.options))return;let a=[];for(let c of this.schema._searchIndexes)a.push(await this.createSearchIndex(c));return a},i=async()=>{if((e.readyState===RW.connecting||e.readyState===RW.disconnected)&&e._shouldBufferCommands()&&await new Promise(a=>{e._queue.push({fn:a})}),!!Dt.getOption("autoCreate",this.schema.options,e.config,e.base.options))return await this.createCollection()};this.$init=i().then(()=>r()).then(()=>n());let s=this.$init.catch,o=this;return this.$init.catch=function(){return o.$caught=!0,s.apply(o.$init,arguments)},this.$init};X.createCollection=async function(e){if(xe(this,"createCollection"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ve("Model.createCollection() no longer accepts a callback");let r=await new Promise((a,c)=>{this.hooks.execPre("createCollection",this,[e],l=>{if(l!=null)return l instanceof m8.skipWrappedFunction?a(!0):c(l);a()})}),n=this&&this.schema&&this.schema.options&&this.schema.options.collectionOptions;n!=null&&(e=Object.assign({},n,e));let i=this&&this.schema&&this.schema.options&&this.schema.options.collation;i!=null&&(e=Object.assign({collation:i},e));let s=this&&this.schema&&this.schema.options&&this.schema.options.capped;s!=null&&(typeof s=="number"?e=Object.assign({capped:!0,size:s},e):typeof s=="object"&&(e=Object.assign({capped:!0},s,e)));let o=this&&this.schema&&this.schema.options&&this.schema.options.timeseries;o!=null&&(e=Object.assign({timeseries:o},e),e.expireAfterSeconds!=null||(e.expires!=null?Dt.expires(e):this.schema.options.expireAfterSeconds!=null?e.expireAfterSeconds=this.schema.options.expireAfterSeconds:this.schema.options.expires!=null&&(e.expires=this.schema.options.expires,Dt.expires(e))));let u=this&&this.schema&&this.schema.options&&this.schema.options.clusteredIndex;u!=null&&(e=Object.assign({clusteredIndex:{...u,unique:!0}},e));try{r||await this.db.createCollection(this.$__collection.collectionName,e)}catch(a){a!=null&&(a.name!=="MongoServerError"||a.code!==48)&&await new Promise((c,l)=>{let h={error:a};this.hooks.execPost("createCollection",this,[null],h,d=>{if(d!=null)return l(d);c()})})}return await new Promise((a,c)=>{this.hooks.execPost("createCollection",this,[this.$__collection],l=>{if(l!=null)return c(l);a()})}),this.$__collection};X.syncIndexes=async function(e){if(xe(this,"syncIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ve("Model.syncIndexes() no longer accepts a callback");let r=this;try{await r.createCollection()}catch(s){if(s!=null&&(s.name!=="MongoServerError"||s.code!==48))throw s}let n=await r.diffIndexes(),i=await r.cleanIndexes({...e,toDrop:n.toDrop});return await r.createIndexes({...e,toCreate:n.toCreate}),i};X.createSearchIndex=async function(e){return xe(this,"createSearchIndex"),await this.$__collection.createSearchIndex(e)};X.updateSearchIndex=async function(e,r){return xe(this,"updateSearchIndex"),await this.$__collection.updateSearchIndex(e,r)};X.dropSearchIndex=async function(e){return xe(this,"dropSearchIndex"),await this.$__collection.dropSearchIndex(e)};X.listSearchIndexes=async function(e){return xe(this,"listSearchIndexes"),await(await this.$__collection.listSearchIndexes(e)).toArray()};X.diffIndexes=async function(){if(typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ve("Model.syncIndexes() no longer accepts a callback");let e=this,r=await e.listIndexes().catch(u=>{if(u.codeName!="NamespaceNotFound")throw u});r===void 0&&(r=[]),r=SAe(e,r);let n=e.schema,i=bAe(e,n.indexes()),s=FAe(n,i,r),o=xAe(n,i,r,s);return{toDrop:s,toCreate:o}};function xAe(t,e,r,n){let i=[];for(let[s,o]of e){let u=!1,a=_8(t,_u(o));for(let c of r)if(!g8(c)&&HW(s,a,c)&&!n.includes(c.name)){u=!0;break}u||i.push(s)}return i}function FAe(t,e,r){let n=[];for(let i of r){let s=!1;if(!g8(i)&&!wAe(i,t.options)){for(let[o,u]of e){let a=_8(t,_u(u));if(jW(o,a,t.options),HW(o,a,i)){s=!0;break}}s||n.push(i.name)}}return n}X.cleanIndexes=async function(e){if(xe(this,"cleanIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ve("Model.cleanIndexes() no longer accepts a callback");let r=this;if(Array.isArray(e&&e.toDrop))return await $W(e.toDrop,r,e);let n=await r.diffIndexes();return await $W(n.toDrop,r,e)};async function $W(t,e,r){if(t.length===0)return[];let n=e.$__collection;return r&&r.hideIndexes?await Promise.all(t.map(i=>e.db.db.command({collMod:n.collectionName,index:{name:i,hidden:!0}}))):await Promise.all(t.map(i=>n.dropIndex(i))),t}X.listIndexes=async function(){if(xe(this,"listIndexes"),typeof arguments[0]=="function")throw new ve("Model.listIndexes() no longer accepts a callback");return this.$__collection.buffer&&await new Promise(e=>{this.$__collection.addQueue(e)}),this.$__collection.listIndexes().toArray()};X.ensureIndexes=async function(e){if(xe(this,"ensureIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ve("Model.ensureIndexes() no longer accepts a callback");await new Promise((r,n)=>{$Ae(this,e,i=>{if(i!=null)return n(i);r()})})};X.createIndexes=async function(e){if(xe(this,"createIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new ve("Model.createIndexes() no longer accepts a callback");return this.ensureIndexes(e)};function $Ae(t,e,r){let n=t.schema.indexes(),i;e=e||{};let s=function(h){h&&!t.$caught&&t.emit("error",h),t.emit("index",h||i),r&&r(h||i)};for(let h of n)g8(h)&&Dt.warn('mongoose: Cannot specify a custom index on `_id` for model name "'+t.modelName+'", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!n.length){Kd(function(){s()});return}let o=function(h,d,p,m){t.emit("index-single-done",h,d,p,m)},u=function(h,d){t.emit("index-single-start",h,d)},a=t.schema._baseSchema,c=a?a.indexes():[];Kd(function(){e._automatic&&!t.collection.collection?t.collection.addQueue(l,[]):l()});function l(){if(e._automatic&&(t.schema.options.autoIndex===!1||t.schema.options.autoIndex==null&&t.db.config.autoIndex===!1))return s();let h=n.shift();if(!h)return s();if(e._automatic&&h[1]._autoIndex===!1||c.find(g=>Dt.deepEqual(g,h)))return l();let d=_u(h[0]),p=_u(h[1]);if(delete p._autoIndex,_8(t.schema,p),VW(t.schema,p),jW(d,p,t.schema.options),u(d,e),"background"in e&&(p.background=e.background),"toCreate"in e&&e.toCreate.length===0)return s();let m=null;try{m=t.collection.createIndex(d,p)}catch(g){i||(i=g),t.$caught||t.emit("error",g),o(g,d,p),l();return}m.then(g=>{o(null,d,p,g),l()},g=>{i||(i=g),t.$caught||t.emit("error",g),o(g,d,p),l()})}}X.schema;X.db;X.collection;X.$__collection;X.base;X.discriminators;X.translateAliases=function(e,r){xe(this,"translateAliases");let n=(i,s)=>{let o,u=[],a=i.split("."),c=this.schema;for(let h in a){let d=a[h];if(c&&c.aliases[d]){if(o=c.aliases[d],r&&o in e)throw new ve(`Provided object has both field "${d}" and its alias "${o}"`);u.push(o)}else o=d,u.push(d);c&&c.paths[o]?c=c.paths[o].schema:c=null}let l=u.join(".");return e instanceof Map?e.set(l,s):e[l]=s,l!==i&&(e instanceof Map?e.delete(i):delete e[i]),e};if(typeof e=="object"){if(e instanceof Map)for(let i of new Map(e))e=n(i[0],i[1]);else for(let i of Object.keys(e))if(e=n(i,e[i]),i[0]==="$")if(Array.isArray(e[i]))for(let s in e[i])e[i][s]=this.translateAliases(e[i][s]);else this.translateAliases(e[i]);return e}else return e};X.deleteOne=function(e,r){if(xe(this,"deleteOne"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ve("Model.prototype.deleteOne() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return n.setOptions(r),n.deleteOne(e)};X.deleteMany=function(e,r){if(xe(this,"deleteMany"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ve("Model.deleteMany() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return n.setOptions(r),n.deleteMany(e)};X.find=function(e,r,n){if(xe(this,"find"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new ve("Model.find() no longer accepts a callback");let i=new this.Query({},{},this,this.$__collection);return i.select(r),i.setOptions(n),i.find(e)};X.findById=function(e,r,n){if(xe(this,"findById"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ve("Model.findById() no longer accepts a callback");return typeof e>"u"&&(e=null),this.findOne({_id:e},r,n)};X.findOne=function(e,r,n){if(xe(this,"findOne"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ve("Model.findOne() no longer accepts a callback");let i=new this.Query({},{},this,this.$__collection);return i.select(r),i.setOptions(n),i.findOne(e)};X.estimatedDocumentCount=function(e){return xe(this,"estimatedDocumentCount"),new this.Query({},{},this,this.$__collection).estimatedDocumentCount(e)};X.countDocuments=function(e,r){if(xe(this,"countDocuments"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ve("Model.countDocuments() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return r!=null&&n.setOptions(r),n.countDocuments(e)};X.distinct=function(e,r,n){if(xe(this,"distinct"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ve("Model.distinct() no longer accepts a callback");let i=new this.Query({},{},this,this.$__collection);return n!=null&&i.setOptions(n),i.distinct(e,r)};X.where=function(e,r){xe(this,"where");let n=new this.Query({},{},this,this.$__collection).find({});return n.where.apply(n,arguments)};X.$where=function(){xe(this,"$where");let e=new this.Query({},{},this,this.$__collection).find({});return e.$where.apply(e,arguments)};X.findOneAndUpdate=function(t,e,r){if(xe(this,"findOneAndUpdate"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new ve("Model.findOneAndUpdate() no longer accepts a callback");arguments.length===1&&(e=t,t=null,r=null);let n;r&&(n=r.fields||r.projection),e=_u(e,{depopulate:!0,_isNested:!0}),zW(e,r,this.schema.options.versionKey);let i=new this.Query({},{},this,this.$__collection);return i.select(n),i.findOneAndUpdate(t,e,r)};X.findByIdAndUpdate=function(t,e,r){if(xe(this,"findByIdAndUpdate"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new ve("Model.findByIdAndUpdate() no longer accepts a callback");return t instanceof yo&&(t=t._doc._id),this.findOneAndUpdate.call(this,{_id:t},e,r)};X.findOneAndDelete=function(t,e){if(xe(this,"findOneAndDelete"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ve("Model.findOneAndDelete() no longer accepts a callback");let r;e&&(r=e.select,e.select=void 0);let n=new this.Query({},{},this,this.$__collection);return n.select(r),n.findOneAndDelete(t,e)};X.findByIdAndDelete=function(t,e){if(xe(this,"findByIdAndDelete"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new ve("Model.findByIdAndDelete() no longer accepts a callback");return this.findOneAndDelete({_id:t},e)};X.findOneAndReplace=function(t,e,r){if(xe(this,"findOneAndReplace"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new ve("Model.findOneAndReplace() no longer accepts a callback");let n;r&&(n=r.select,r.select=void 0);let i=new this.Query({},{},this,this.$__collection);return i.select(n),i.findOneAndReplace(t,e,r)};X.create=async function(e,r){if(typeof r=="function"||typeof arguments[2]=="function")throw new ve("Model.create() no longer accepts a callback");xe(this,"create");let n,i=this.schema.options.discriminatorKey;if(Array.isArray(e))n=e,r=r!=null&&typeof r=="object"?r:{};else{let u=arguments[arguments.length-1];if(r={},typeof u=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new ve("Model.create() no longer accepts a callback");n=[...arguments],n.length>1&&!u&&n.pop(),n.length===2&&n[0]!=null&&n[1]!=null&&n[0].session==null&&u&&EAe(u.session)==="ClientSession"&&!this.schema.path("session")&&Dt.warn("WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()")}if(n.length===0)return Array.isArray(e)?[]:null;let s=[],o=typeof r.aggregateErrors=="boolean"?!r.aggregateErrors:!0;if(delete r.aggregateErrors,r.ordered){for(let u=0;u<n.length;u++)try{let a=n[u],c=this.discriminators&&a[i]!=null?this.discriminators[a[i]]||sE(this.discriminators,a[i]):this;if(c==null)throw new ve(`Discriminator "${a[i]}" not found for model "${this.modelName}"`);let l=a;l instanceof c||(l=new c(l)),await l.$save(r),s.push(l)}catch(a){if(!o)s.push(a);else throw a}return s}else if(!o)s=await Promise.allSettled(n.map(async u=>{let a=this.discriminators&&u[i]!=null?this.discriminators[u[i]]||sE(this.discriminators,u[i]):this;if(a==null)throw new ve(`Discriminator "${u[i]}" not found for model "${this.modelName}"`);let c=u;return c instanceof a||(c=new a(c)),await c.$save(r),c})),s=s.map(u=>u.status==="fulfilled"?u.value:u.reason);else{let u=null;if(s=await Promise.all(n.map(async a=>{let c=this.discriminators&&a[i]!=null?this.discriminators[a[i]]||sE(this.discriminators,a[i]):this;if(c==null)throw new ve(`Discriminator "${a[i]}" not found for model "${this.modelName}"`);try{let l=a;return l instanceof c||(l=new c(l)),await l.$save(r),l}catch(l){u||(u=l)}})),u)throw u}return!Array.isArray(e)&&n.length===1?s[0]:s};X.watch=function(t,e){xe(this,"watch");let r=n=>{if(t=t||[],DAe(t,this.schema,"fullDocument"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;let i=this.$__collection.watch(t,e);n(null,i)});else{let i=this.$__collection.watch(t,e);n(null,i)}};return e=e||{},e.model=this,new eAe(r,t,e)};X.startSession=function(){return xe(this,"startSession"),this.db.startSession.apply(this.db,arguments)};X.insertMany=async function(e,r){if(xe(this,"insertMany"),typeof r=="function"||typeof arguments[2]=="function")throw new ve("Model.insertMany() no longer accepts a callback");return new Promise((n,i)=>{this.$__insertMany(e,r,(s,o)=>{if(s!=null)return i(s);n(o)})})};X.$__insertMany=function(t,e,r){let n=this;typeof e=="function"&&(r=e,e=null),r=r||Dt.noop,e=e||{};let i=e.limit||1e3,s=!!e.rawResult,o=typeof e.ordered=="boolean"?e.ordered:!0,u=typeof e.throwOnValidationError=="boolean"?e.throwOnValidationError:!1,a=!!e.lean,c=this.db.base.transactionAsyncLocalStorage?.getStore();(!e||!e.hasOwnProperty("session"))&&c?.session!=null&&(e={...e,session:c.session}),Array.isArray(t)||(t=[t]);let l=[],h=new Map,d=o?null:new Array(t.length),p=t.map((m,g)=>_=>{if(a)return Kd(()=>_(null,m));let w=!1;if(!(m instanceof n)){if(m!=null&&typeof m!="object")return _(new nAe(m,"arr."+g,"insertMany"));try{m=new n(m),w=!0}catch(S){return _(S)}}if(e.session!=null&&m.$session(e.session),a)return Kd(()=>_(null,m));m.$validate(w?{_skipParallelValidateCheck:!0}:null).then(()=>{_(null,m)},S=>{if(o===!1)return l.push(S),h.set(S,g),d[g]=S,_(null,null);_(S)})});TAe(p,i,function(m,g){if(m){r(m,null);return}let _=new Map,w=new Map;for(let O=0;O<g.length;++O)_.set(g[O],O);let S=g.filter(function(O){return O!=null});for(let O=0;O<S.length;++O)w.set(O,_.get(S[O]));if(l.length>0&&l.sort((O,B)=>h.get(O)-h.get(B)),S.length===0){if(u)return r(new oE(l,d,null,"insertMany"));if(s)return r(null,{acknowledged:!0,insertedCount:0,insertedIds:{},mongoose:{validationErrors:l}});r(null,[]);return}let C=a?S:S.map(function(O){return O.$__schema.options.versionKey&&(O[O.$__schema.options.versionKey]=0),(!e||e.timestamps!==!1)&&O.initializeTimestamps&&(!O.$__||O.$__.timestamps!==!1)&&O.initializeTimestamps(),O.$__hasOnlyPrimitiveValues()?O.$__toObjectShallow():O.toObject(y8)});n.$__collection.insertMany(C,e).then(O=>{if(!a)for(let B of S)B.$__reset(),df(B,!1);if(o===!1&&u&&l.length>0){for(let B=0;B<d.length;++B)d[B]===void 0&&(d[B]=g[B]);return r(new oE(l,d,O,"insertMany"))}if(s){if(o===!1){for(let B=0;B<d.length;++B)d[B]===void 0&&(d[B]=g[B]);O.mongoose={validationErrors:l,results:d}}return r(null,O)}if(e.populate!=null)return n.populate(S,e.populate).then(B=>{r(null,B)},B=>{throw B!=null&&(B.insertedDocs=S),B});r(null,S)},O=>{O.writeErrors==null&&(O.result&&O.result.result&&O.result.result.writeErrors)!=null&&(O.writeErrors=O.result.result.writeErrors);let B=O&&O.writeErrors,P=new Set((O&&O.writeErrors||[]).map(j=>j.index));if(O.writeErrors!=null)for(let j=0;j<O.writeErrors.length;++j){let k=w.get(O.writeErrors[j].index);O.writeErrors[j]={...O.writeErrors[j],index:k},o||(d[k]=O.writeErrors[j])}if(!o){for(let j=0;j<d.length;++j)d[j]===void 0&&(d[j]=g[j]);O.results=d}let v=-1;O.insertedDocs=S.filter((j,k)=>{let q=!B||P.has(k);if(o){if(v>-1)return k<v;q&&(v=k)}return!q}).map(function(k){return a||(k.$__reset(),df(k,!1)),k}),s&&o===!1&&(O.mongoose={validationErrors:l,results:d}),r(O,null)})})};function df(t,e){t.$isNew=e,t.$emit("isNew",e),t.constructor.emit("isNew",e);let r=t.$getAllSubdocs({useCache:!0});for(let n of r)n.$isNew=e,n.$emit("isNew",e)}X.bulkWrite=async function(e,r){if(xe(this,"bulkWrite"),typeof r=="function"||typeof arguments[2]=="function")throw new ve("Model.bulkWrite() no longer accepts a callback");r=r||{};let n=await new Promise((a,c)=>{this.hooks.execPre("bulkWrite",this,[e,r],l=>{if(l!=null)return l instanceof m8.skipWrappedFunction?a(l):c(l);a()})});if(n)return n.args[0];let i=r.ordered==null?!0:r.ordered;if(e.length===0)return NW();let s=e.map(a=>yAe(this,a,r)),o=this.db.base.transactionAsyncLocalStorage?.getStore();(!r||!r.hasOwnProperty("session"))&&o?.session!=null&&(r={...r,session:o.session});let u=null;if(i){await new Promise((a,c)=>{p8(s,(l,h)=>l(h),l=>{if(l)return c(l);a()})});try{u=await this.$__collection.bulkWrite(e,r)}catch(a){await new Promise((c,l)=>{let h={error:a};this.hooks.execPost("bulkWrite",this,[null],h,d=>{if(d!=null)return l(d);c()})})}}else{let a=s.length,c=[],l=[],h=[];await new Promise(m=>{for(let g=0;g<s.length;++g)s[g](_=>{_==null?c.push(g):(l.push({index:g,error:_}),h[g]=_),--a<=0&&m()})}),l=l.sort((m,g)=>m.index-g.index).map(m=>m.error);let d=c;if(c=c.sort().map(m=>e[m]),c.length===0){if(r.throwOnValidationError&&l.length)throw new oE(l,h,u,"bulkWrite");return NW()}let p;[u,p]=await this.$__collection.bulkWrite(c,r).then(m=>[m,null]).catch(m=>[null,m]),p&&(l.length>0&&(p.mongoose=p.mongoose||{},p.mongoose.validationErrors=l),await new Promise((m,g)=>{let _={error:p};this.hooks.execPost("bulkWrite",this,[null],_,w=>{if(w!=null)return g(w);m()})}));for(let m=0;m<d.length;++m)h[d[m]]=null;if(l.length>0){if(r.throwOnValidationError)throw new oE(l,h,u,"bulkWrite");u.mongoose=u.mongoose||{},u.mongoose.validationErrors=l,u.mongoose.results=h}}return await new Promise((a,c)=>{this.hooks.execPost("bulkWrite",this,[u],l=>{if(l!=null)return c(l);a()})}),u};X.bulkSave=async function(e,r){if(r=r||{},r.timestamps!=null)for(let c of e)c.$__.saveOptions=c.$__.saveOptions||{},c.$__.saveOptions.timestamps=r.timestamps;else for(let c of e)c.$__.timestamps!=null&&(c.$__.saveOptions=c.$__.saveOptions||{},c.$__.saveOptions.timestamps=c.$__.timestamps);await Promise.all(e.map(kAe));let n=this.buildBulkWriteOperations(e,{skipValidation:!0,timestamps:r.timestamps}),{bulkWriteResult:i,bulkWriteError:s}=await this.bulkWrite(n,r).then(c=>({bulkWriteResult:c,bulkWriteError:null}),c=>({bulkWriteResult:null,bulkWriteError:c}));if(s!=null&&!(s instanceof rAe))throw s;let o=i?.matchedCount??0,u=i?.insertedCount??0;if(n.length>0&&o+u<n.length&&!s)throw new IAe(this.modelName,e,i);let a=[];for(let c=0;c<e.length;c++){let l=e[c];(s&&s.writeErrors.find(d=>(d.err.op._id||d.err.op.q._id).toString()===l._doc._id.toString()))==null&&a.push(l)}if(await Promise.all(a.map(c=>qAe(c))),s&&s.writeErrors&&s.writeErrors.length)throw s;return i};function kAe(t){return new Promise((e,r)=>{t.schema.s.hooks.execPre("save",t,n=>{if(n){r(n);return}e()})})}function qAe(t){return new Promise((e,r)=>{t.$isNew&&df(t,!1),t.$__reset(),t.schema.s.hooks.execPost("save",t,[t],{},n=>{if(n){r(n);return}e()})})}X.applyDefaults=function t(e){if(e==null)return e;if(e.$__!=null){oAe(e,e.$__.fields,e.$__.exclude);for(let r of e.$getAllSubdocs())t(r,r.$__.fields,r.$__.exclude);return e}return uAe(e,this.schema),e};X.applyVirtuals=function(e,r){return e==null||e.$__!=null||pAe(this.schema,e,r),e};X.applyTimestamps=function(e,r){return e==null||e.$__!=null||dAe(this.schema,e,r),e};X.castObject=function(e,r){r=r||{};let n={},i=this.schema,s=i.options.discriminatorKey;i.discriminators!=null&&e!=null&&e[s]!=null&&(i=WW(i,e[s])||i);let o=Object.keys(i.paths);for(let a of o){let c=i.path(a);if(!c||!c.$isMongooseArray)continue;let l=Gd(e,a);GW(o,l,a)}let u=null;for(let a of o){let c=i.path(a);if(c==null)continue;let l=Gd(e,a,void 0);if(l==null)continue;let h=a.indexOf(".")===-1?[a]:a.split("."),d=n;for(let p=0;p<h.length-1;++p)d[h[p]]==null&&(d[h[p]]=isNaN(h[p+1])?{}:[]),d=d[h[p]];if(!c.$isMongooseDocumentArray){if(c.$isSingleNested||c.$isMongooseDocumentArrayElement){try{l=X.castObject.call(c.caster,l)}catch(p){r.ignoreCastErrors||(u=u||new d8,u.addError(a,p));continue}d[h[h.length-1]]=l;continue}try{l=c.cast(l),d[h[h.length-1]]=l}catch(p){r.ignoreCastErrors||(u=u||new d8,u.addError(a,p));continue}}}if(u!=null)throw u;return n};X.buildBulkWriteOperations=function(e,r){if(!Array.isArray(e))throw new Error(`bulkSave expects an array of documents to be passed, received \`${e}\` instead`);s();let n=this.schema.options.discriminatorKey;return e.reduce((o,u,a)=>{if(!r.skipValidation){if(!(u instanceof yo))throw new Error(`documents.${a} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);let d=u.validateSync();if(d)throw d}if(u.isNew){let d={insertOne:{document:u}};return Dt.injectTimestampsOption(d.insertOne,r.timestamps),o.push(d),o}let l=u.$__delta();if(l!=null&&!Dt.isEmptyObject(l[0])){let d=u.$__where(l[0]),p=l[1];YW(u,d);let m=this.schema.options.shardKey;if(m){let _=Object.keys(m),w=_.length;for(let S=0;S<w;++S)d[_[S]]=u[_[S]]}u[n]!=null&&!(n in d)&&(d[n]=u[n]),u.$__version(d,l);let g={updateOne:{filter:d,update:p}};return Dt.injectTimestampsOption(g.updateOne,r.timestamps),o.push(g),o}return o},[]);function s(){r=r||{},r.skipValidation==null&&(r.skipValidation=!1)}};X.hydrate=function(t,e,r){xe(this,"hydrate"),e!=null&&(t!=null&&t.$__!=null&&(t=t.toObject(y8)),t=lAe(t,e));let n=nd().createModel(this,t,e);return n.$init(t,r),n};X.updateMany=function(e,r,n){return xe(this,"updateMany"),E8(this,"updateMany",e,r,n)};X.updateOne=function(e,r,n){return xe(this,"updateOne"),E8(this,"updateOne",e,r,n)};X.replaceOne=function(e,r,n){xe(this,"replaceOne");let i=this&&this.schema&&this.schema.options&&this.schema.options.versionKey||null;return i&&!r[i]&&(r[i]=0),E8(this,"replaceOne",e,r,n)};function E8(t,e,r,n,i){let s=new t.Query({},{},t,t.collection);r instanceof yo?r=r.toObject():r=_u(r),i=typeof i=="function"?i:_u(i);let o=t&&t.schema&&t.schema.options&&t.schema.options.versionKey||null;return zW(n,i,o),s[e](r,n,i)}X.aggregate=function(e,r){if(xe(this,"aggregate"),typeof r=="function"||typeof arguments[2]=="function")throw new ve("Model.aggregate() no longer accepts a callback");let n=new Z6e(e||[]);return n.model(this),r!=null&&n.option(r),n};X.validate=async function(e,r,n){if((arguments.length<3||arguments.length===3&&typeof arguments[2]=="function")&&(n=e),typeof n=="function"||typeof arguments[3]=="function")throw new ve("Model.validate() no longer accepts a callback");let i=this.schema,s=i.options.discriminatorKey;i.discriminators!=null&&e!=null&&e[s]!=null&&(i=WW(i,e[s])||i);let o=Object.keys(i.paths);if(r!=null){let c=typeof r=="string"?new Set(r.split(" ")):Array.isArray(r)?new Set(r):new Set(o);o=o.filter(l=>{if(r.pathsToSkip){if(Array.isArray(r.pathsToSkip)){if(r.pathsToSkip.find(p=>p==l))return!1}else if(typeof r.pathsToSkip=="string"&&r.pathsToSkip.includes(l))return!1}let h=l.split("."),d=h[0];for(let p of h){if(c.has(d))return!0;d+="."+p}return c.has(l)})}for(let c of o){let l=i.path(c);if(!l||!l.$isMongooseArray||l.$isMongooseDocumentArray)continue;let h=Gd(e,c);GW(o,h,c)}let u=null;o=new Set(o);try{e=this.castObject(e)}catch(c){u=c;for(let l of Object.keys(u.errors||{}))o.delete(l)}let a=o.size;return new Promise((c,l)=>{for(let d of o){let p=i.path(d);if(p==null){h();continue}let m=d.indexOf(".")===-1?[d]:d.split("."),g=e;for(let w=0;w<m.length-1;++w)g=g[m[w]];let _=Gd(e,d,void 0);p.doValidate(_,w=>{w&&(u=u||new d8,u.addError(d,w)),h()},n,{path:d})}function h(){--a<=0&&(u?l(u):c(e))}})};X.populate=async function(e,r){if(xe(this,"populate"),typeof r=="function"||typeof arguments[2]=="function")throw new ve("Model.populate() no longer accepts a callback");if(r=Dt.populate(r),r.length===0)return e;let n=[];for(let i of r)n.push(UAe(this,e,i));return await Promise.all(n),e};var LAe=/\s?-_id\s?/,jAe=/\s?-_id\s?/g;async function UAe(t,e,r){if(r.strictPopulate==null&&(r._localModel!=null&&r._localModel.schema._userProvidedOptions.strictPopulate!=null?r.strictPopulate=r._localModel.schema._userProvidedOptions.strictPopulate:(r._localModel!=null&&t.base.options.strictPopulate!=null||t.base.options.strictPopulate!=null)&&(r.strictPopulate=t.base.options.strictPopulate)),Array.isArray(e)||(e=[e]),e.length===0||e.every(Dt.isNullOrUndefined))return;let n=AAe(t,e,r);if(n instanceof ve)throw n;let i=n.length,s=[];function o(l){return l!==void 0}let u=!1,a=[];for(let l=0;l<i;++l){let h=n[l],d=h.options.select,p=Dt.array.flatten(h.ids,o);p=Dt.array.unique(p);let m={};if(m.sort=h&&h.options&&h.options.options&&h.options.options.sort||void 0,m.excludeId=LAe.test(d)||d&&d._id===0,h.options&&h.options.options&&h.options.options.lean&&h.options.options.lean.transform&&(h.options.options._leanTransform=h.options.options.lean.transform,h.options.options.lean=!0),p.length===0||p.every(Dt.isNullOrUndefined)){kW(t,[],h,m);continue}u=!0,typeof r.foreignField=="string"&&(h.foreignField.clear(),h.foreignField.add(r.foreignField));let g=gAe(p,h.match,h.foreignField,h.model,h.options.skipInvalidIds);m.excludeId&&(typeof d=="string"?d=d.replace(jAe," "):Array.isArray(d)?d=d.filter(_=>_!=="-_id"):(d={...d},delete d._id)),h.options.options&&h.options.options.limit!=null?m.originalLimit=h.options.options.limit:h.options.limit!=null&&(m.originalLimit=h.options.limit),a.push([h,g,d,m])}if(!u){if(n.length!==0)return;if(r.populate!=null){let l=Dt.populate(r.populate).map(h=>Object.assign({},h,{path:r.path+"."+h.path}));return t.populate(e,l)}return}let c=[];for(let l of a)c.push(VAe.apply(null,l).then(h=>{s=s.concat(h)}));await Promise.all(c);for(let l of a){let h=l[0],d=l[3];for(let p of s)h.options._childDocs.push(p);kW(t,s,h,d)}for(let l of a)MAe(l[0].foreignField,l[0].options,s);for(let l of a){let h=l[0];if(h.options&&h.options.options&&h.options.options._leanTransform)for(let d of s)h.options.options._leanTransform(d)}}function VAe(t,e,r){let n=_u(t.options.populate),i=Object.assign({skip:t.options.skip,limit:t.options.limit,perDocumentLimit:t.options.perDocumentLimit},t.options.options);t.count&&delete i.skip,i.perDocumentLimit!=null?(i.limit=i.perDocumentLimit,delete i.perDocumentLimit):i.limit!=null&&(i.limit=i.limit*t.ids.length);let s=t.model.find(e,r,i);for(let o of t.foreignField)o!=="_id"&&s.selectedInclusively()&&!OAe(s._fields,o)&&s.select(o);if(t.count)for(let o of t.foreignField)s.select(o);if(n){t.model.baseModelName!=null&&(Array.isArray(n)?n.forEach(u=>{u.strictPopulate=!1}):typeof n=="string"?n={path:n,strictPopulate:!1}:n.strictPopulate=!1);let o=t.options._fullPath||t.options.path;if(Array.isArray(n))for(let u of n)u._fullPath=o+"."+u.path;else typeof n=="object"&&(n._fullPath=o+"."+n.path);s.populate(n)}return s.exec().then(o=>{for(let u of o)CAe.set(u,t.model);return o})}function kW(t,e,r,n){let i=r.options,s=r.isVirtual,o=r.justOne,u,a=i&&i.options&&i.options.lean||!1,c=e.length,l={},h={},d,p,m=_u(r.allIds);for(let g=0;g<c;g++)if(p=e[g],p!=null)for(let _ of r.foreignField){if(u=Dt.getValue(_,p),Array.isArray(u)){u=Dt.array.unique(Dt.array.flatten(u));for(let w of u)w instanceof yo&&(w=w._doc._id),d=String(w),h[d]?Array.isArray(h[d])?(h[d].push(p),l[d].push(g)):(h[d]=[h[d],p],l[d]=[l[d],g]):s&&!o?(h[d]=[p],l[d]=[g]):(h[d]=p,l[d]=g)}else u instanceof yo&&(u=u._doc._id),d=String(u),h[d]?Array.isArray(h[d])?(h[d].push(p),l[d].push(g)):(s||h[d].constructor!==p.constructor||(h[d]instanceof yo?String(h[d]._doc._id):String(h[d]._id))!==(p instanceof yo?String(p._doc._id):String(p._id)))&&(h[d]=[h[d],p],l[d]=[l[d],g]):(h[d]=p,l[d]=g);a||(p.$__.wasPopulated=p.$__.wasPopulated||{value:u})}mAe({originalModel:t,rawIds:r.isVirtual?m:r.allIds,allIds:m,unpopulatedValues:r.unpopulatedValues,foreignField:r.foreignField,rawDocs:h,rawOrder:l,docs:r.docs,path:i.path,options:n,justOne:r.justOne,isVirtual:r.isVirtual,allOptions:r,populatedModel:r.model,lean:a,virtual:r.virtual,count:r.count,match:r.match})}X.compile=function(e,r,n,i,s){if(r.options.versionKey!==!1&&!r.paths[r.options.versionKey]){let h={};h[r.options.versionKey]=Number,r.add(h)}let u;typeof e=="function"&&e.prototype instanceof X?(u=e,e=u.name,r.loadClass(u,!1),u.prototype.$isMongooseModelPrototype=!0):u=function h(d,p,m){if(h.hooks.execPreSync("createModel",d),!(this instanceof h))return new h(d,p,m);let g=h.schema.options.discriminatorKey;if(h.discriminators==null||d==null||d[g]==null){X.call(this,d,p,m);return}let _=h.discriminators[d[g]]||sE(h.discriminators,d[g]);if(_!=null)return new _(d,p,m);X.call(this,d,p,m)},u.hooks=r.s.hooks.clone(),u.base=s,u.modelName=e,u.prototype instanceof X||(Object.setPrototypeOf(u,X),Object.setPrototypeOf(u.prototype,X.prototype)),u.model=function(d){return this.db.model(d)},u.db=i,u.prototype.db=i,u.prototype[Qd]=i,u.discriminators=u.prototype.discriminators=void 0,u[KW]=!0,u.events=new f8,r._preCompile();let c={schemaUserProvidedOptions:r._userProvidedOptions||{},capped:r.options.capped,Promise:u.base.Promise,modelName:e};r.options.autoCreate!==void 0&&(c.autoCreate=r.options.autoCreate);let l=i.collection(n,c);return u.prototype.collection=l,u.prototype.$collection=l,u.prototype[Yd]=l,u.prototype.$__setSchema(r),LW(u,r),UW(u,r),cAe(u,r),hAe(u,r.s.hooks,r.statics),u.schema=u.prototype.$__schema,u.collection=l,u.$__collection=l,u.Query=function(){iE.apply(this,arguments)},Object.setPrototypeOf(u.Query.prototype,iE.prototype),u.Query.base=iE.base,u.Query.prototype.constructor=iE,u._applyQueryMiddleware(),zAe(u,r.query),u};X.$__updateConnection=function(e){this.db=e,this.prototype.db=e,this.prototype[Qd]=e;let r=e.collection(this.collection.collectionName,this.collection.opts);this.prototype.collection=r,this.prototype.$collection=r,this.prototype[Yd]=r,this.collection=r,this.$__collection=r};function zAe(t,e){for(let r in e)t.Query.prototype[r]=e[r]}X.__subclass=function(e,r,n){let i=this,s=function l(h,d,p){if(!(this instanceof l))return new l(h,d,p);i.call(this,h,d,p)};if(Object.setPrototypeOf(s,i),Object.setPrototypeOf(s.prototype,i.prototype),s.db=e,s.prototype.db=e,s.prototype[Qd]=e,i[Hd]=i[Hd]||[],i[Hd].push(s),i.discriminators!=null){s.discriminators={};for(let l of Object.keys(i.discriminators))s.discriminators[l]=i.discriminators[l].__subclass(i.db,i.discriminators[l].schema,n)}let o=r&&typeof r!="string"?r:i.prototype.$__schema,u=o.options||{},a=o._userProvidedOptions||{};n||(n=i.prototype.$__schema.get("collection")||Dt.toCollectionName(i.modelName,this.base.pluralize()));let c={schemaUserProvidedOptions:a,capped:o&&u.capped};return s.prototype.collection=e.collection(n,c),s.prototype.$collection=s.prototype.collection,s.prototype[Yd]=s.prototype.collection,s.collection=s.prototype.collection,s.$__collection=s.collection,s.init().catch(()=>{}),s};X.recompileSchema=function(){if(this.prototype.$__setSchema(this.schema),this.schema._applyDiscriminators!=null)for(let e of this.schema._applyDiscriminators.keys())this.discriminator(e,this.schema._applyDiscriminators.get(e));delete this.schema._defaultToObjectOptionsMap,aAe(this.schema,new WeakSet,!0)};X.inspect=function(){return`Model { ${this.modelName} }`};X.namespace=function(){return this.db.name+"."+this.collection.collectionName};xW.inspect.custom&&(X[xW.inspect.custom]=X.inspect);X._applyQueryMiddleware=function(){let e=this.Query,r=this.schema.s.hooks.filter(n=>{let i=WAe(n);return n.name==="validate"?!!i.query:n.name==="deleteOne"||n.name==="updateOne"?!!i.query||Object.keys(i).length===0:n.query!=null||n.document!=null?!!n.query:!0});e.prototype._queryMiddleware=r};function WAe(t){let e={};return t.hasOwnProperty("query")&&(e.query=t.query),t.hasOwnProperty("document")&&(e.document=t.document),e}JW.exports=QW=X});var ZW=y((Jd,XW)=>{"use strict";f();XW.exports=KAe;Jd.pluralization=[[/human$/gi,"humans"],[/(m)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|vir)us$/gi,"$1i"],[/(alias|status)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/^goose$/i,"geese"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]];var HAe=Jd.pluralization;Jd.uncountables=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];var GAe=Jd.uncountables;function KAe(t){let e;return t=t.toLowerCase(),!~GAe.indexOf(t)&&(e=HAe.filter(function(r){return t.match(r[0])}),e[0])?t.replace(e[0][0],e[0][1]):t}});var iH=y((Hqe,nH)=>{"use strict";f();var rH=Fe(),eH=require("util"),tH=LO(),ya=class t extends rH{constructor(){super(""),this.errors={}}toString(){return tH(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(e,r){if(r instanceof t){let{errors:n}=r;for(let i of Object.keys(n))this.addError(i,n[i]);return}this.errors[e]=r,this.message=tH(this)}};eH.inspect.custom&&(ya.prototype[eH.inspect.custom]=ya.prototype.inspect);Object.defineProperty(ya.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(ya.prototype,"name",{value:"SetOptionError"});var A8=class extends rH{constructor(e){super(`"${e}" is not a valid option to set`)}};ya.SetOptionInnerError=A8;nH.exports=ya});var oH=y(()=>{"use strict";f();var sH=Ce();typeof jest<"u"&&!process.env.SUPPRESS_JEST_WARNINGS&&(typeof window<"u"&&sH.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning."),setTimeout.clock!=null&&typeof setTimeout.clock.Date=="function"&&sH.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning."))});var hH=y((lH,fH)=>{"use strict";f();var uH=Yn(),aH=require("events").EventEmitter,cH=Hn(),YAe=z1(),QAe=tu(),JAe=cH.ValidationError,XAe=kg(),ZAe=sa();function is(t,e,r,n,i){if(!(this instanceof is))return new is(t,e,r,n,i);if(ZAe(e)&&!e.instanceOfSchema&&(e=new YAe(e)),e=this.schema||e,!this.schema&&e.options._id&&(t=t||{},t._id===void 0&&(t._id=new QAe)),!e)throw new cH.MissingSchemaError;this.$__setSchema(e),uH.call(this,t,r,n,i),XAe(this,e,{decorateDoc:!0});for(let s in e.methods)this[s]=e.methods[s];for(let s in e.statics)this[s]=e.statics[s]}is.prototype=Object.create(uH.prototype);is.prototype.constructor=is;is.events=new aH;is.$emitter=new aH;["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"].forEach(function(t){is[t]=function(){return is.$emitter[t].apply(is.$emitter,arguments)}});is.ValidationError=JAe;fH.exports=lH=is});var pH=y((Xqe,w8)=>{"use strict";f();var ewe=Yn(),twe=hH(),dH=!1;w8.exports=function(){return dH?twe:ewe};w8.exports.setBrowser=function(t){dH=t}});var OH=y((SH,bH)=>{"use strict";f();var rwe=Yn(),nwe=require("events").EventEmitter,yH=P1(),Eu=z1(),iwe=ar(),Xd=yd(),swe=xg(),cE=tl(),mH=AU(),owe=G1(),uwe=U_(),gH=X5(),awe=J9(),cwe=C9(),_H=C_(),lwe=ZW(),S8=Ce(),fwe=p5(),hwe=vc(),dwe=Y5(),pwe=B1().trusted,mwe=q5(),ywe=Lr(),pf=Fe(),aE=iH(),gwe=J5(),EH=Symbol.for("mongoose:default"),AH=Symbol("mongoose:defaultConnection");oH();var _we=/^[0-9A-Fa-f]{24}$/,{AsyncLocalStorage:wH}=require("node:async_hooks");function ae(t){if(this.connections=[],this.nextConnectionId=0,this.models={},this.events=new nwe,this.__driver=_H.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0,autoSearchIndex:!1},t),(S8.getOption("createInitialConnection",this.options)??!0)&&this.__driver!=null&&b8(this),this.options.pluralization&&(this._pluralize=lwe),!t||!t[EH]){let r=this;this.Schema=function(){return this.base=r,Eu.apply(this,arguments)},this.Schema.prototype=Object.create(Eu.prototype),Object.assign(this.Schema,Eu),this.Schema.base=this,this.Schema.Types=Object.assign({},Eu.Types)}else for(let r of["Schema","model"])this[r]=ae.prototype[r];this.Schema.prototype.base=this,t?.transactionAsyncLocalStorage&&(this.transactionAsyncLocalStorage=new wH),Object.defineProperty(this,"plugins",{configurable:!1,enumerable:!0,writable:!1,value:Object.values(cwe).map(r=>[r,{deduplicate:!0}])})}ae.prototype.cast=hwe;ae.prototype.STATES=cE;ae.prototype.ConnectionStates=cE;ae.prototype.driver=_H;ae.prototype.setDriver=function(e){let r=this instanceof ae?this:vn;if(r.__driver===e)return r;if(r.connections&&r.connections.find(o=>o.readyState!==cE.disconnected)){let o="Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver";throw new pf(o)}if(r.__driver=e,Array.isArray(e.plugins))for(let o of e.plugins)typeof o=="function"&&r.plugin(o);let i=e.Connection,s=r.connections[0];if(r.connections=[new i(r)],r.connections[0].models=r.models,s==null)return r;for(let o of Object.values(r.models))o.db===s&&o.$__updateConnection(r.connections[0]);return r};ae.prototype.set=function(e,r){let n=this instanceof ae?this:vn;if(arguments.length===1&&typeof e!="object"){if(mH.indexOf(e)===-1){let o=new aE;throw o.addError(e,new aE.SetOptionInnerError(e)),o}return n.options[e]}let i={};arguments.length===2&&(i={[e]:r}),arguments.length===1&&typeof e=="object"&&(i=e);let s;for(let[o,u]of Object.entries(i)){if(mH.indexOf(o)===-1){s||(s=new aE),s.addError(o,new aE.SetOptionInnerError(o));continue}n.options[o]=u,o==="objectIdGetter"?u?Object.defineProperty(n.Types.ObjectId.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}}):delete n.Types.ObjectId.prototype._id:o==="transactionAsyncLocalStorage"?u&&!n.transactionAsyncLocalStorage?n.transactionAsyncLocalStorage=new wH:!u&&n.transactionAsyncLocalStorage&&delete n.transactionAsyncLocalStorage:o==="createInitialConnection"&&(u&&!n.connection?b8(n):u===!1&&n.connection&&n.connection[AH]&&n.connection.readyState===cE.disconnected&&Object.keys(n.connection.models).length===0&&n.connections.shift())}if(s)throw s;return n};ae.prototype.get=ae.prototype.set;ae.prototype.createConnection=function(e,r){let n=this instanceof ae?this:vn,i=n.__driver.Connection,s=new i(n);return n.connections.push(s),n.nextConnectionId++,n.events.emit("createConnection",s),arguments.length>0&&s.openUri(e,{...r,_fireAndForget:!0}),s};ae.prototype.connect=async function(e,r){if(typeof r=="function"||arguments.length>=3&&typeof arguments[2]=="function")throw new pf("Mongoose.prototype.connect() no longer accepts a callback");let n=this instanceof ae?this:vn;return n.connection==null&&b8(n),n.connection.openUri(e,r).then(()=>n)};ae.prototype.disconnect=async function(){if(arguments.length>=1&&typeof arguments[0]=="function")throw new pf("Mongoose.prototype.disconnect() no longer accepts a callback");let e=this instanceof ae?this:vn;e.connections.length<=0||await Promise.all(e.connections.map(n=>n.close()))};ae.prototype.startSession=function(){let e=this instanceof ae?this:vn;return e.connection.startSession.apply(e.connection,arguments)};ae.prototype.pluralize=function(e){let r=this instanceof ae?this:vn;return arguments.length>0&&(r._pluralize=e),r._pluralize};ae.prototype.model=function(e,r,n,i){let s=this instanceof ae?this:vn;if(typeof r=="string"&&(n=r,r=!1),arguments.length===1){let c=s.models[e];if(!c)throw new s.Error.MissingSchemaError(e);return c}if(S8.isObject(r)&&!(r instanceof Eu)&&(r=new Eu(r)),r&&!(r instanceof Eu))throw new s.Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");i=i||{};let o=r;r&&(s.get("cloneSchemas")&&(r=r.clone()),s._applyPlugins(r));let u=s.options.hasOwnProperty("overwriteModels")?s.options.overwriteModels:i.overwriteModels;if(s.models.hasOwnProperty(e)&&i.cache!==!1&&u!==!0){if(o&&o.instanceOfSchema&&o!==s.models[e].schema)throw new s.Error.OverwriteModelError(e);if(n&&n!==s.models[e].collection.name){let c=s.models[e];return r=c.prototype.schema,c.__subclass(s.connection,r,n)}return s.models[e]}if(r==null)throw new s.Error.MissingSchemaError(e);let a=s._model(e,r,n,i);return s.connection.models[e]=a,s.models[e]=a,a};ae.prototype._model=function(e,r,n,i){let s=this instanceof ae?this:vn,o;if(typeof e=="function"&&(o=e,e=o.name,!(o.prototype instanceof gH)))throw new s.Error("The provided class "+e+" must extend Model");r&&(s.get("cloneSchemas")&&(r=r.clone()),s._applyPlugins(r)),(r==null||!("pluralization"in r.options))&&(r.options.pluralization=s.options.pluralization),n||(n=r.get("collection")||S8.toCollectionName(e,s.pluralize())),gwe(r);let u=i.connection||s.connection;if(o=s.Model.compile(o||e,r,n,u,s),o.init().catch(function(){}),u.emit("model",o),r._applyDiscriminators!=null)for(let a of r._applyDiscriminators.keys()){let{schema:c,options:l}=r._applyDiscriminators.get(a);o.discriminator(a,c,l)}return o};ae.prototype.deleteModel=function(e){let r=this instanceof ae?this:vn;return r.connection.deleteModel(e),delete r.models[e],r};ae.prototype.modelNames=function(){let e=this instanceof ae?this:vn;return Object.keys(e.models)};ae.prototype._applyPlugins=function(e,r){let n=this instanceof ae?this:vn;r=r||{},r.applyPluginsToDiscriminators=n.options&&n.options.applyPluginsToDiscriminators||!1,r.applyPluginsToChildSchemas=typeof(n.options&&n.options.applyPluginsToChildSchemas)=="boolean"?n.options.applyPluginsToChildSchemas:!0,awe(e,n.plugins,r,"$globalPluginsApplied")};ae.prototype.plugin=function(e,r){let n=this instanceof ae?this:vn;return n.plugins.push([e,r]),n};ae.prototype.__defineGetter__("connection",function(){return this.connections[0]});ae.prototype.__defineSetter__("connection",function(t){t instanceof this.__driver.Connection&&(this.connections[0]=t,this.models=t.models)});ae.prototype.connections;ae.prototype.nextConnectionId;ae.prototype.Aggregate=dwe;Object.defineProperty(ae.prototype,"Collection",{get:function(){return this.__driver.Collection},set:function(t){this.__driver.Collection=t}});Object.defineProperty(ae.prototype,"Connection",{get:function(){return this.__driver.Connection},set:function(t){t!==this.__driver.Connection&&(this.__driver.Connection=t)}});ae.prototype.version=fwe.version;ae.prototype.Mongoose=ae;ae.prototype.Schema=Eu;ae.prototype.SchemaType=iwe;ae.prototype.SchemaTypes=Eu.Types;ae.prototype.VirtualType=swe;ae.prototype.Types=owe;ae.prototype.Query=uwe;ae.prototype.Model=gH;ae.prototype.Document=rwe;ae.prototype.DocumentProvider=pH();ae.prototype.ObjectId=Xd.ObjectId;ae.prototype.isValidObjectId=function(e){return(this instanceof ae?this:vn).Types.ObjectId.isValid(e)};ae.prototype.isObjectIdOrHexString=function(e){return ywe(e,"ObjectId")||typeof e=="string"&&_we.test(e)};ae.prototype.syncIndexes=function(e){return(this instanceof ae?this:vn).connection.syncIndexes(e)};ae.prototype.Decimal128=Xd.Decimal128;ae.prototype.Mixed=Xd.Mixed;ae.prototype.Date=Xd.Date;ae.prototype.Number=Xd.Number;ae.prototype.Error=pf;ae.prototype.MongooseError=pf;ae.prototype.now=function(){return new Date};ae.prototype.CastError=pf.CastError;ae.prototype.SchemaTypeOptions=gi();ae.prototype.mquery=$5();ae.prototype.sanitizeFilter=mwe;ae.prototype.trusted=pwe;ae.prototype.skipMiddlewareFunction=yH.skipWrappedFunction;ae.prototype.overwriteMiddlewareResult=yH.overwriteResult;ae.prototype.omitUndefined=t9();function b8(t){if(t.connection)return;let e=t.createConnection();e[AH]=!0,e.models=t.models}var vn=bH.exports=SH=new ae({[EH]:!0})});var DH=y((tLe,TH)=>{"use strict";f();var CH=_U();C_().set(CH);var O8=OH();O8.setDriver(CH);O8.Mongoose.prototype.mongo=Xo();TH.exports=O8});var C8=y((nLe,Ae)=>{"use strict";f();var we=DH();Ae.exports=we;Ae.exports.default=we;Ae.exports.mongoose=we;Ae.exports.cast=we.cast;Ae.exports.STATES=we.STATES;Ae.exports.setDriver=we.setDriver;Ae.exports.set=we.set;Ae.exports.get=we.get;Ae.exports.createConnection=we.createConnection;Ae.exports.connect=we.connect;Ae.exports.disconnect=we.disconnect;Ae.exports.startSession=we.startSession;Ae.exports.pluralize=we.pluralize;Ae.exports.model=we.model;Ae.exports.deleteModel=we.deleteModel;Ae.exports.modelNames=we.modelNames;Ae.exports.plugin=we.plugin;Ae.exports.connections=we.connections;Ae.exports.version=we.version;Ae.exports.Aggregate=we.Aggregate;Ae.exports.Mongoose=we.Mongoose;Ae.exports.Schema=we.Schema;Ae.exports.SchemaType=we.SchemaType;Ae.exports.SchemaTypes=we.SchemaTypes;Ae.exports.VirtualType=we.VirtualType;Ae.exports.Types=we.Types;Ae.exports.Query=we.Query;Ae.exports.Model=we.Model;Ae.exports.Document=we.Document;Ae.exports.ObjectId=we.ObjectId;Ae.exports.isValidObjectId=we.isValidObjectId;Ae.exports.isObjectIdOrHexString=we.isObjectIdOrHexString;Ae.exports.syncIndexes=we.syncIndexes;Ae.exports.Decimal128=we.Decimal128;Ae.exports.Mixed=we.Mixed;Ae.exports.Date=we.Date;Ae.exports.Number=we.Number;Ae.exports.Error=we.Error;Ae.exports.MongooseError=we.MongooseError;Ae.exports.now=we.now;Ae.exports.CastError=we.CastError;Ae.exports.SchemaTypeOptions=we.SchemaTypeOptions;Ae.exports.mongo=we.mongo;Ae.exports.mquery=we.mquery;Ae.exports.sanitizeFilter=we.sanitizeFilter;Ae.exports.trusted=we.trusted;Ae.exports.skipMiddlewareFunction=we.skipMiddlewareFunction;Ae.exports.overwriteMiddlewareResult=we.overwriteMiddlewareResult});var MH=y((sLe,Ewe)=>{Ewe.exports={name:"dotenv",version:"16.4.7",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard",pretest:"npm run lint && npm run dts-check",test:"tap run --allow-empty-coverage --disable-coverage --timeout=60000","test:coverage":"tap run --show-full-coverage --timeout=60000 --coverage-report=lcov",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://dotenvx.com",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^18.11.3",decache:"^4.6.2",sinon:"^14.0.1",standard:"^17.0.0","standard-version":"^9.5.0",tap:"^19.2.0",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var PH=y((oLe,Au)=>{f();var T8=require("fs"),D8=require("path"),Awe=require("os"),wwe=require("crypto"),Swe=MH(),M8=Swe.version,bwe=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function Owe(t){let e={},r=t.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=bwe.exec(r))!=null;){let i=n[1],s=n[2]||"";s=s.trim();let o=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),o==='"'&&(s=s.replace(/\\n/g,`
`),s=s.replace(/\\r/g,"\r")),e[i]=s}return e}function Cwe(t){let e=IH(t),r=yr.configDotenv({path:e});if(!r.parsed){let o=new Error(`MISSING_DATA: Cannot parse ${e} for an unknown reason`);throw o.code="MISSING_DATA",o}let n=BH(t).split(","),i=n.length,s;for(let o=0;o<i;o++)try{let u=n[o].trim(),a=Mwe(r,u);s=yr.decrypt(a.ciphertext,a.key);break}catch(u){if(o+1>=i)throw u}return yr.parse(s)}function Twe(t){console.log(`[dotenv@${M8}][INFO] ${t}`)}function Dwe(t){console.log(`[dotenv@${M8}][WARN] ${t}`)}function lE(t){console.log(`[dotenv@${M8}][DEBUG] ${t}`)}function BH(t){return t&&t.DOTENV_KEY&&t.DOTENV_KEY.length>0?t.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function Mwe(t,e){let r;try{r=new URL(e)}catch(u){if(u.code==="ERR_INVALID_URL"){let a=new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenvx.com/vault/.env.vault?environment=development");throw a.code="INVALID_DOTENV_KEY",a}throw u}let n=r.password;if(!n){let u=new Error("INVALID_DOTENV_KEY: Missing key part");throw u.code="INVALID_DOTENV_KEY",u}let i=r.searchParams.get("environment");if(!i){let u=new Error("INVALID_DOTENV_KEY: Missing environment part");throw u.code="INVALID_DOTENV_KEY",u}let s=`DOTENV_VAULT_${i.toUpperCase()}`,o=t.parsed[s];if(!o){let u=new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${s} in your .env.vault file.`);throw u.code="NOT_FOUND_DOTENV_ENVIRONMENT",u}return{ciphertext:o,key:n}}function IH(t){let e=null;if(t&&t.path&&t.path.length>0)if(Array.isArray(t.path))for(let r of t.path)T8.existsSync(r)&&(e=r.endsWith(".vault")?r:`${r}.vault`);else e=t.path.endsWith(".vault")?t.path:`${t.path}.vault`;else e=D8.resolve(process.cwd(),".env.vault");return T8.existsSync(e)?e:null}function vH(t){return t[0]==="~"?D8.join(Awe.homedir(),t.slice(1)):t}function vwe(t){Twe("Loading env from encrypted .env.vault");let e=yr._parseVault(t),r=process.env;return t&&t.processEnv!=null&&(r=t.processEnv),yr.populate(r,e,t),{parsed:e}}function Bwe(t){let e=D8.resolve(process.cwd(),".env"),r="utf8",n=!!(t&&t.debug);t&&t.encoding?r=t.encoding:n&&lE("No encoding is specified. UTF-8 is used by default");let i=[e];if(t&&t.path)if(!Array.isArray(t.path))i=[vH(t.path)];else{i=[];for(let a of t.path)i.push(vH(a))}let s,o={};for(let a of i)try{let c=yr.parse(T8.readFileSync(a,{encoding:r}));yr.populate(o,c,t)}catch(c){n&&lE(`Failed to load ${a} ${c.message}`),s=c}let u=process.env;return t&&t.processEnv!=null&&(u=t.processEnv),yr.populate(u,o,t),s?{parsed:o,error:s}:{parsed:o}}function Iwe(t){if(BH(t).length===0)return yr.configDotenv(t);let e=IH(t);return e?yr._configVault(t):(Dwe(`You set DOTENV_KEY but you are missing a .env.vault file at ${e}. Did you forget to build it?`),yr.configDotenv(t))}function Pwe(t,e){let r=Buffer.from(e.slice(-64),"hex"),n=Buffer.from(t,"base64"),i=n.subarray(0,12),s=n.subarray(-16);n=n.subarray(12,-16);try{let o=wwe.createDecipheriv("aes-256-gcm",r,i);return o.setAuthTag(s),`${o.update(n)}${o.final()}`}catch(o){let u=o instanceof RangeError,a=o.message==="Invalid key length",c=o.message==="Unsupported state or unable to authenticate data";if(u||a){let l=new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)");throw l.code="INVALID_DOTENV_KEY",l}else if(c){let l=new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY");throw l.code="DECRYPTION_FAILED",l}else throw o}}function Nwe(t,e,r={}){let n=!!(r&&r.debug),i=!!(r&&r.override);if(typeof e!="object"){let s=new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");throw s.code="OBJECT_REQUIRED",s}for(let s of Object.keys(e))Object.prototype.hasOwnProperty.call(t,s)?(i===!0&&(t[s]=e[s]),n&&lE(i===!0?`"${s}" is already defined and WAS overwritten`:`"${s}" is already defined and was NOT overwritten`)):t[s]=e[s]}var yr={configDotenv:Bwe,_configVault:vwe,_parseVault:Cwe,config:Iwe,decrypt:Pwe,parse:Owe,populate:Nwe};Au.exports.configDotenv=yr.configDotenv;Au.exports._configVault=yr._configVault;Au.exports._parseVault=yr._parseVault;Au.exports.config=yr.config;Au.exports.decrypt=yr.decrypt;Au.exports.parse=yr.parse;Au.exports.populate=yr.populate;Au.exports=yr});var RH=y((aLe,NH)=>{f();var Rwe=require("fs"),xwe=require("path"),Fwe=PH(),$we=[".env",".env.local",".env.test",".env.production"];NH.exports=t=>{for(let e of $we){let r=xwe.resolve(t,e);if(Rwe.existsSync(r)){Fwe.config({path:r}),console.log(`Loaded ${r}`);break}}}});var FH=y((lLe,xH)=>{f();var kwe=xd()("app:info"),qwe=xd()("app:error"),Lwe=xd();xH.exports={runtimeDebugger:kwe,runtimeErrorDebugger:qwe,appDebugger:Lwe}});var ni=y((hLe,$H)=>{"use strict";f();var v8=class t extends Error{constructor(e){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${e.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,t)}};$H.exports=t=>{if(t.length>2)throw new v8(t);function e(n={}){this.options=n}e.prototype.transform=t;function r(n){return new e(n)}return r.Format=e,r}});var jH=y((pLe,LH)=>{f();var qH={};LH.exports=qH;var kH={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(kH).forEach(function(t){var e=kH[t],r=qH[t]=[];r.open="\x1B["+e[0]+"m",r.close="\x1B["+e[1]+"m"})});var VH=y((yLe,UH)=>{"use strict";f();UH.exports=function(t,e){e=e||process.argv||[];var r=e.indexOf("--"),n=/^-{1,2}/.test(t)?"":"--",i=e.indexOf(n+t);return i!==-1&&(r===-1?!0:i<r)}});var WH=y((_Le,zH)=>{"use strict";f();var jwe=require("os"),Us=VH(),Bn=process.env,mf=void 0;Us("no-color")||Us("no-colors")||Us("color=false")?mf=!1:(Us("color")||Us("colors")||Us("color=true")||Us("color=always"))&&(mf=!0);"FORCE_COLOR"in Bn&&(mf=Bn.FORCE_COLOR.length===0||parseInt(Bn.FORCE_COLOR,10)!==0);function Uwe(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function Vwe(t){if(mf===!1)return 0;if(Us("color=16m")||Us("color=full")||Us("color=truecolor"))return 3;if(Us("color=256"))return 2;if(t&&!t.isTTY&&mf!==!0)return 0;var e=mf?1:0;if(process.platform==="win32"){var r=jwe.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Bn)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(i){return i in Bn})||Bn.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in Bn)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Bn.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in Bn){var n=parseInt((Bn.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Bn.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Bn.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(Bn.TERM)||"COLORTERM"in Bn?1:(Bn.TERM==="dumb",e)}function B8(t){var e=Vwe(t);return Uwe(e)}zH.exports={supportsColor:B8,stdout:B8(process.stdout),stderr:B8(process.stderr)}});var GH=y((ALe,HH)=>{f();HH.exports=function(e,r){var n="";e=e||"Run the trap, drop the bass",e=e.split("");var i={a:["@","\u0104","\u023A","\u0245","\u0394","\u039B","\u0414"],b:["\xDF","\u0181","\u0243","\u026E","\u03B2","\u0E3F"],c:["\xA9","\u023B","\u03FE"],d:["\xD0","\u018A","\u0500","\u0501","\u0502","\u0503"],e:["\xCB","\u0115","\u018E","\u0258","\u03A3","\u03BE","\u04BC","\u0A6C"],f:["\u04FA"],g:["\u0262"],h:["\u0126","\u0195","\u04A2","\u04BA","\u04C7","\u050A"],i:["\u0F0F"],j:["\u0134"],k:["\u0138","\u04A0","\u04C3","\u051E"],l:["\u0139"],m:["\u028D","\u04CD","\u04CE","\u0520","\u0521","\u0D69"],n:["\xD1","\u014B","\u019D","\u0376","\u03A0","\u048A"],o:["\xD8","\xF5","\xF8","\u01FE","\u0298","\u047A","\u05DD","\u06DD","\u0E4F"],p:["\u01F7","\u048E"],q:["\u09CD"],r:["\xAE","\u01A6","\u0210","\u024C","\u0280","\u042F"],s:["\xA7","\u03DE","\u03DF","\u03E8"],t:["\u0141","\u0166","\u0373"],u:["\u01B1","\u054D"],v:["\u05D8"],w:["\u0428","\u0460","\u047C","\u0D70"],x:["\u04B2","\u04FE","\u04FC","\u04FD"],y:["\xA5","\u04B0","\u04CB"],z:["\u01B5","\u0240"]};return e.forEach(function(s){s=s.toLowerCase();var o=i[s]||[" "],u=Math.floor(Math.random()*o.length);typeof i[s]<"u"?n+=i[s][u]:n+=s}),n}});var YH=y((SLe,KH)=>{f();KH.exports=function(e,r){e=e||"   he is here   ";var n={up:["\u030D","\u030E","\u0304","\u0305","\u033F","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030A","\u0342","\u0313","\u0308","\u034A","\u034B","\u034C","\u0303","\u0302","\u030C","\u0350","\u0300","\u0301","\u030B","\u030F","\u0312","\u0313","\u0314","\u033D","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036A","\u036B","\u036C","\u036D","\u036E","\u036F","\u033E","\u035B","\u0346","\u031A"],down:["\u0316","\u0317","\u0318","\u0319","\u031C","\u031D","\u031E","\u031F","\u0320","\u0324","\u0325","\u0326","\u0329","\u032A","\u032B","\u032C","\u032D","\u032E","\u032F","\u0330","\u0331","\u0332","\u0333","\u0339","\u033A","\u033B","\u033C","\u0345","\u0347","\u0348","\u0349","\u034D","\u034E","\u0353","\u0354","\u0355","\u0356","\u0359","\u035A","\u0323"],mid:["\u0315","\u031B","\u0300","\u0301","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u035C","\u035D","\u035E","\u035F","\u0360","\u0362","\u0338","\u0337","\u0361"," \u0489"]},i=[].concat(n.up,n.down,n.mid);function s(a){var c=Math.floor(Math.random()*a);return c}function o(a){var c=!1;return i.filter(function(l){c=l===a}),c}function u(a,c){var l="",h,d;c=c||{},c.up=typeof c.up<"u"?c.up:!0,c.mid=typeof c.mid<"u"?c.mid:!0,c.down=typeof c.down<"u"?c.down:!0,c.size=typeof c.size<"u"?c.size:"maxi",a=a.split("");for(d in a)if(!o(d)){switch(l=l+a[d],h={up:0,down:0,mid:0},c.size){case"mini":h.up=s(8),h.mid=s(2),h.down=s(8);break;case"maxi":h.up=s(16)+3,h.mid=s(4)+1,h.down=s(64)+3;break;default:h.up=s(8)+1,h.mid=s(6)/2,h.down=s(8)+1;break}var p=["up","mid","down"];for(var m in p)for(var g=p[m],_=0;_<=h[g];_++)c[g]&&(l=l+n[g][s(n[g].length)])}return l}return u(e,r)}});var JH=y((OLe,QH)=>{f();QH.exports=function(t){return function(e,r,n){if(e===" ")return e;switch(r%3){case 0:return t.red(e);case 1:return t.white(e);case 2:return t.blue(e)}}}});var ZH=y((TLe,XH)=>{f();XH.exports=function(t){return function(e,r,n){return r%2===0?e:t.inverse(e)}}});var tG=y((MLe,eG)=>{f();eG.exports=function(t){var e=["red","yellow","green","blue","magenta"];return function(r,n,i){return r===" "?r:t[e[n++%e.length]](r)}}});var nG=y((BLe,rG)=>{f();rG.exports=function(t){var e=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:t[e[Math.round(Math.random()*(e.length-2))]](r)}}});var cG=y((NLe,aG)=>{f();var Ve={};aG.exports=Ve;Ve.themes={};var zwe=require("util"),$c=Ve.styles=jH(),sG=Object.defineProperties,Wwe=new RegExp(/[\r\n]+/g);Ve.supportsColor=WH().supportsColor;typeof Ve.enabled>"u"&&(Ve.enabled=Ve.supportsColor()!==!1);Ve.enable=function(){Ve.enabled=!0};Ve.disable=function(){Ve.enabled=!1};Ve.stripColors=Ve.strip=function(t){return(""+t).replace(/\x1B\[\d+m/g,"")};var PLe=Ve.stylize=function(e,r){if(!Ve.enabled)return e+"";var n=$c[r];return!n&&r in Ve?Ve[r](e):n.open+e+n.close},Hwe=/[|\\{}()[\]^$+*?.]/g,Gwe=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(Hwe,"\\$&")};function oG(t){var e=function r(){return Ywe.apply(r,arguments)};return e._styles=t,e.__proto__=Kwe,e}var uG=function(){var t={};return $c.grey=$c.gray,Object.keys($c).forEach(function(e){$c[e].closeRe=new RegExp(Gwe($c[e].close),"g"),t[e]={get:function(){return oG(this._styles.concat(e))}}}),t}(),Kwe=sG(function(){},uG);function Ywe(){var t=Array.prototype.slice.call(arguments),e=t.map(function(o){return o!=null&&o.constructor===String?o:zwe.inspect(o)}).join(" ");if(!Ve.enabled||!e)return e;for(var r=e.indexOf(`
`)!=-1,n=this._styles,i=n.length;i--;){var s=$c[n[i]];e=s.open+e.replace(s.closeRe,s.open)+s.close,r&&(e=e.replace(Wwe,function(o){return s.close+o+s.open}))}return e}Ve.setTheme=function(t){if(typeof t=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var e in t)(function(r){Ve[r]=function(n){if(typeof t[r]=="object"){var i=n;for(var s in t[r])i=Ve[t[r][s]](i);return i}return Ve[t[r]](n)}})(e)};function Qwe(){var t={};return Object.keys(uG).forEach(function(e){t[e]={get:function(){return oG([e])}}}),t}var Jwe=function(e,r){var n=r.split("");return n=n.map(e),n.join("")};Ve.trap=GH();Ve.zalgo=YH();Ve.maps={};Ve.maps.america=JH()(Ve);Ve.maps.zebra=ZH()(Ve);Ve.maps.rainbow=tG()(Ve);Ve.maps.random=nG()(Ve);for(iG in Ve.maps)(function(t){Ve[t]=function(e){return Jwe(Ve.maps[t],e)}})(iG);var iG;sG(Ve,Qwe())});var I8=y((xLe,lG)=>{f();var Xwe=cG();lG.exports=Xwe});var fG=y(P8=>{"use strict";f();P8.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};P8.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}});var hG=y(N8=>{"use strict";f();N8.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};N8.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}});var dG=y(R8=>{"use strict";f();R8.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};R8.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}});var pG=y(fE=>{"use strict";f();Object.defineProperty(fE,"cli",{value:fG()});Object.defineProperty(fE,"npm",{value:hG()});Object.defineProperty(fE,"syslog",{value:dG()})});var fr=y(Zd=>{"use strict";f();Object.defineProperty(Zd,"LEVEL",{value:Symbol.for("level")});Object.defineProperty(Zd,"MESSAGE",{value:Symbol.for("message")});Object.defineProperty(Zd,"SPLAT",{value:Symbol.for("splat")});Object.defineProperty(Zd,"configs",{value:pG()})});var pE=y((GLe,dE)=>{"use strict";f();var $8=I8(),{LEVEL:x8,MESSAGE:F8}=fr();$8.enabled=!0;var mG=/\s+/,hE=class t{constructor(e={}){e.colors&&this.addColors(e.colors),this.options=e}static addColors(e){let r=Object.keys(e).reduce((n,i)=>(n[i]=mG.test(e[i])?e[i].split(mG):e[i],n),{});return t.allColors=Object.assign({},t.allColors||{},r),t.allColors}addColors(e){return t.addColors(e)}colorize(e,r,n){if(typeof n>"u"&&(n=r),!Array.isArray(t.allColors[e]))return $8[t.allColors[e]](n);for(let i=0,s=t.allColors[e].length;i<s;i++)n=$8[t.allColors[e][i]](n);return n}transform(e,r){return r.all&&typeof e[F8]=="string"&&(e[F8]=this.colorize(e[x8],e.level,e[F8])),(r.level||r.all||!r.message)&&(e.level=this.colorize(e[x8],e.level)),(r.all||r.message)&&(e.message=this.colorize(e[x8],e.level,e.message)),e}};dE.exports=t=>new hE(t);dE.exports.Colorizer=dE.exports.Format=hE});var gG=y((YLe,yG)=>{"use strict";f();var{Colorizer:Zwe}=pE();yG.exports=t=>(Zwe.addColors(t.colors||t),t)});var EG=y((JLe,_G)=>{"use strict";f();var eSe=ni();_G.exports=eSe(t=>(t.message=`	${t.message}`,t))});var SG=y((ZLe,wG)=>{"use strict";f();var tSe=ni(),{LEVEL:AG,MESSAGE:k8}=fr();wG.exports=tSe((t,{stack:e,cause:r})=>{if(t instanceof Error){let i=Object.assign({},t,{level:t.level,[AG]:t[AG]||t.level,message:t.message,[k8]:t[k8]||t.message});return e&&(i.stack=t.stack),r&&(i.cause=t.cause),i}if(!(t.message instanceof Error))return t;let n=t.message;return Object.assign(t,n),t.message=n.message,t[k8]=n.message,e&&(t.stack=n.stack),r&&(t.cause=n.cause),t})});var L8=y((tje,yE)=>{"use strict";f();var{configs:rSe,LEVEL:bG,MESSAGE:q8}=fr(),mE=class t{constructor(e={levels:rSe.npm.levels}){this.paddings=t.paddingForLevels(e.levels,e.filler),this.options=e}static getLongestLevel(e){let r=Object.keys(e).map(n=>n.length);return Math.max(...r)}static paddingForLevel(e,r,n){let i=n+1-e.length,s=Math.floor(i/r.length);return`${r}${r.repeat(s)}`.slice(0,i)}static paddingForLevels(e,r=" "){let n=t.getLongestLevel(e);return Object.keys(e).reduce((i,s)=>(i[s]=t.paddingForLevel(s,r,n),i),{})}transform(e,r){return e.message=`${this.paddings[e[bG]]}${e.message}`,e[q8]&&(e[q8]=`${this.paddings[e[bG]]}${e[q8]}`),e}};yE.exports=t=>new mE(t);yE.exports.Padder=yE.exports.Format=mE});var OG=y((nje,j8)=>{"use strict";f();var{Colorizer:nSe}=pE(),{Padder:iSe}=L8(),{configs:sSe,MESSAGE:oSe}=fr(),gE=class{constructor(e={}){e.levels||(e.levels=sSe.cli.levels),this.colorizer=new nSe(e),this.padder=new iSe(e),this.options=e}transform(e,r){return this.colorizer.transform(this.padder.transform(e,r),r),e[oSe]=`${e.level}:${e.message}`,e}};j8.exports=t=>new gE(t);j8.exports.Format=gE});var TG=y((sje,U8)=>{"use strict";f();var uSe=ni();function CG(t){if(t.every(aSe))return e=>{let r=e;for(let n=0;n<t.length;n++)if(r=t[n].transform(r,t[n].options),!r)return!1;return r}}function aSe(t){if(typeof t.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}U8.exports=(...t)=>{let e=uSe(CG(t)),r=e();return r.Format=e.Format,r};U8.exports.cascade=CG});var tp=y((H8,vG)=>{"use strict";f();var{hasOwnProperty:ep}=Object.prototype,qc=W8();qc.configure=W8;qc.stringify=qc;qc.default=qc;H8.stringify=qc;H8.configure=W8;vG.exports=qc;var cSe=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function ga(t){return t.length<5e3&&!cSe.test(t)?`"${t}"`:JSON.stringify(t)}function V8(t,e){if(t.length>200||e)return t.sort(e);for(let r=1;r<t.length;r++){let n=t[r],i=r;for(;i!==0&&t[i-1]>n;)t[i]=t[i-1],i--;t[i]=n}return t}var lSe=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function z8(t){return lSe.call(t)!==void 0&&t.length!==0}function DG(t,e,r){t.length<r&&(r=t.length);let n=e===","?"":" ",i=`"0":${n}${t[0]}`;for(let s=1;s<r;s++)i+=`${e}"${s}":${n}${t[s]}`;return i}function fSe(t){if(ep.call(t,"circularValue")){let e=t.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function hSe(t){let e;if(ep.call(t,"deterministic")&&(e=t.deterministic,typeof e!="boolean"&&typeof e!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return e===void 0?!0:e}function dSe(t,e){let r;if(ep.call(t,e)&&(r=t[e],typeof r!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return r===void 0?!0:r}function MG(t,e){let r;if(ep.call(t,e)){if(r=t[e],typeof r!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return r===void 0?1/0:r}function kc(t){return t===1?"1 item":`${t} items`}function pSe(t){let e=new Set;for(let r of t)(typeof r=="string"||typeof r=="number")&&e.add(String(r));return e}function mSe(t){if(ep.call(t,"strict")){let e=t.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function W8(t){t={...t};let e=mSe(t);e&&(t.bigint===void 0&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let r=fSe(t),n=dSe(t,"bigint"),i=hSe(t),s=typeof i=="function"?i:void 0,o=MG(t,"maximumDepth"),u=MG(t,"maximumBreadth");function a(p,m,g,_,w,S){let C=m[p];switch(typeof C=="object"&&C!==null&&typeof C.toJSON=="function"&&(C=C.toJSON(p)),C=_.call(m,p,C),typeof C){case"string":return ga(C);case"object":{if(C===null)return"null";if(g.indexOf(C)!==-1)return r;let O="",B=",",P=S;if(Array.isArray(C)){if(C.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(C),w!==""&&(S+=w,O+=`
${S}`,B=`,
${S}`);let F=Math.min(C.length,u),z=0;for(;z<F-1;z++){let De=a(String(z),C,g,_,w,S);O+=De!==void 0?De:"null",O+=B}let J=a(String(z),C,g,_,w,S);if(O+=J!==void 0?J:"null",C.length-1>u){let De=C.length-u-1;O+=`${B}"... ${kc(De)} not stringified"`}return w!==""&&(O+=`
${P}`),g.pop(),`[${O}]`}let v=Object.keys(C),j=v.length;if(j===0)return"{}";if(o<g.length+1)return'"[Object]"';let k="",q="";w!==""&&(S+=w,B=`,
${S}`,k=" ");let R=Math.min(j,u);i&&!z8(C)&&(v=V8(v,s)),g.push(C);for(let F=0;F<R;F++){let z=v[F],J=a(z,C,g,_,w,S);J!==void 0&&(O+=`${q}${ga(z)}:${k}${J}`,q=B)}if(j>u){let F=j-u;O+=`${q}"...":${k}"${kc(F)} not stringified"`,q=B}return w!==""&&q.length>1&&(O=`
${S}${O}
${P}`),g.pop(),`{${O}}`}case"number":return isFinite(C)?String(C):e?e(C):"null";case"boolean":return C===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(C);default:return e?e(C):void 0}}function c(p,m,g,_,w,S){switch(typeof m=="object"&&m!==null&&typeof m.toJSON=="function"&&(m=m.toJSON(p)),typeof m){case"string":return ga(m);case"object":{if(m===null)return"null";if(g.indexOf(m)!==-1)return r;let C=S,O="",B=",";if(Array.isArray(m)){if(m.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(m),w!==""&&(S+=w,O+=`
${S}`,B=`,
${S}`);let j=Math.min(m.length,u),k=0;for(;k<j-1;k++){let R=c(String(k),m[k],g,_,w,S);O+=R!==void 0?R:"null",O+=B}let q=c(String(k),m[k],g,_,w,S);if(O+=q!==void 0?q:"null",m.length-1>u){let R=m.length-u-1;O+=`${B}"... ${kc(R)} not stringified"`}return w!==""&&(O+=`
${C}`),g.pop(),`[${O}]`}g.push(m);let P="";w!==""&&(S+=w,B=`,
${S}`,P=" ");let v="";for(let j of _){let k=c(j,m[j],g,_,w,S);k!==void 0&&(O+=`${v}${ga(j)}:${P}${k}`,v=B)}return w!==""&&v.length>1&&(O=`
${S}${O}
${C}`),g.pop(),`{${O}}`}case"number":return isFinite(m)?String(m):e?e(m):"null";case"boolean":return m===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(m);default:return e?e(m):void 0}}function l(p,m,g,_,w){switch(typeof m){case"string":return ga(m);case"object":{if(m===null)return"null";if(typeof m.toJSON=="function"){if(m=m.toJSON(p),typeof m!="object")return l(p,m,g,_,w);if(m===null)return"null"}if(g.indexOf(m)!==-1)return r;let S=w;if(Array.isArray(m)){if(m.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(m),w+=_;let k=`
${w}`,q=`,
${w}`,R=Math.min(m.length,u),F=0;for(;F<R-1;F++){let J=l(String(F),m[F],g,_,w);k+=J!==void 0?J:"null",k+=q}let z=l(String(F),m[F],g,_,w);if(k+=z!==void 0?z:"null",m.length-1>u){let J=m.length-u-1;k+=`${q}"... ${kc(J)} not stringified"`}return k+=`
${S}`,g.pop(),`[${k}]`}let C=Object.keys(m),O=C.length;if(O===0)return"{}";if(o<g.length+1)return'"[Object]"';w+=_;let B=`,
${w}`,P="",v="",j=Math.min(O,u);z8(m)&&(P+=DG(m,B,u),C=C.slice(m.length),j-=m.length,v=B),i&&(C=V8(C,s)),g.push(m);for(let k=0;k<j;k++){let q=C[k],R=l(q,m[q],g,_,w);R!==void 0&&(P+=`${v}${ga(q)}: ${R}`,v=B)}if(O>u){let k=O-u;P+=`${v}"...": "${kc(k)} not stringified"`,v=B}return v!==""&&(P=`
${w}${P}
${S}`),g.pop(),`{${P}}`}case"number":return isFinite(m)?String(m):e?e(m):"null";case"boolean":return m===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(m);default:return e?e(m):void 0}}function h(p,m,g){switch(typeof m){case"string":return ga(m);case"object":{if(m===null)return"null";if(typeof m.toJSON=="function"){if(m=m.toJSON(p),typeof m!="object")return h(p,m,g);if(m===null)return"null"}if(g.indexOf(m)!==-1)return r;let _="",w=m.length!==void 0;if(w&&Array.isArray(m)){if(m.length===0)return"[]";if(o<g.length+1)return'"[Array]"';g.push(m);let P=Math.min(m.length,u),v=0;for(;v<P-1;v++){let k=h(String(v),m[v],g);_+=k!==void 0?k:"null",_+=","}let j=h(String(v),m[v],g);if(_+=j!==void 0?j:"null",m.length-1>u){let k=m.length-u-1;_+=`,"... ${kc(k)} not stringified"`}return g.pop(),`[${_}]`}let S=Object.keys(m),C=S.length;if(C===0)return"{}";if(o<g.length+1)return'"[Object]"';let O="",B=Math.min(C,u);w&&z8(m)&&(_+=DG(m,",",u),S=S.slice(m.length),B-=m.length,O=","),i&&(S=V8(S,s)),g.push(m);for(let P=0;P<B;P++){let v=S[P],j=h(v,m[v],g);j!==void 0&&(_+=`${O}${ga(v)}:${j}`,O=",")}if(C>u){let P=C-u;_+=`${O}"...":"${kc(P)} not stringified"`}return g.pop(),`{${_}}`}case"number":return isFinite(m)?String(m):e?e(m):"null";case"boolean":return m===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(m);default:return e?e(m):void 0}}function d(p,m,g){if(arguments.length>1){let _="";if(typeof g=="number"?_=" ".repeat(Math.min(g,10)):typeof g=="string"&&(_=g.slice(0,10)),m!=null){if(typeof m=="function")return a("",{"":p},[],m,_,"");if(Array.isArray(m))return c("",p,[],pSe(m),_,"")}if(_.length!==0)return l("",p,[],_,"")}return h("",p,[])}return d}});var G8=y((aje,BG)=>{"use strict";f();var ySe=ni(),{MESSAGE:gSe}=fr(),_Se=tp();function ESe(t,e){return typeof e=="bigint"?e.toString():e}BG.exports=ySe((t,e)=>{let r=_Se.configure(e);return t[gSe]=r(t,e.replacer||ESe,e.space),t})});var PG=y((lje,IG)=>{"use strict";f();var ASe=ni();IG.exports=ASe((t,e)=>e.message?(t.message=`[${e.label}] ${t.message}`,t):(t.label=e.label,t))});var RG=y((hje,NG)=>{"use strict";f();var wSe=ni(),{MESSAGE:SSe}=fr(),bSe=tp();NG.exports=wSe(t=>{let e={};return t.message&&(e["@message"]=t.message,delete t.message),t.timestamp&&(e["@timestamp"]=t.timestamp,delete t.timestamp),e["@fields"]=t,t[SSe]=bSe(e),t})});var FG=y((pje,xG)=>{"use strict";f();var OSe=ni();function CSe(t,e,r){let n=e.reduce((s,o)=>(s[o]=t[o],delete t[o],s),{}),i=Object.keys(t).reduce((s,o)=>(s[o]=t[o],delete t[o],s),{});return Object.assign(t,n,{[r]:i}),t}function TSe(t,e,r){return t[r]=e.reduce((n,i)=>(n[i]=t[i],delete t[i],n),{}),t}xG.exports=OSe((t,e={})=>{let r="metadata";e.key&&(r=e.key);let n=[];return!e.fillExcept&&!e.fillWith&&(n.push("level"),n.push("message")),e.fillExcept&&(n=e.fillExcept),n.length>0?CSe(t,n,r):e.fillWith?TSe(t,e.fillWith,r):t})});var kG=y((rp,$G)=>{"use strict";f();var DSe=ni(),MSe=ng();$G.exports=DSe(t=>{let e=+new Date;return rp.diff=e-(rp.prevTime||e),rp.prevTime=e,t.ms=`+${MSe(rp.diff)}`,t})});var jG=y((gje,LG)=>{"use strict";f();var vSe=require("util").inspect,BSe=ni(),{LEVEL:ISe,MESSAGE:qG,SPLAT:PSe}=fr();LG.exports=BSe((t,e={})=>{let r=Object.assign({},t);return delete r[ISe],delete r[qG],delete r[PSe],t[qG]=vSe(r,!1,e.depth||null,e.colorize),t})});var UG=y((Eje,EE)=>{"use strict";f();var{MESSAGE:NSe}=fr(),_E=class{constructor(e){this.template=e}transform(e){return e[NSe]=this.template(e),e}};EE.exports=t=>new _E(t);EE.exports.Printf=EE.exports.Format=_E});var WG=y((wje,zG)=>{"use strict";f();var RSe=ni(),{MESSAGE:VG}=fr(),xSe=tp();zG.exports=RSe(t=>{let e=xSe(Object.assign({},t,{level:void 0,message:void 0,splat:void 0})),r=t.padding&&t.padding[t.level]||"";return e!=="{}"?t[VG]=`${t.level}:${r} ${t.message} ${e}`:t[VG]=`${t.level}:${r} ${t.message}`,t})});var KG=y((bje,GG)=>{"use strict";f();var FSe=require("util"),{SPLAT:HG}=fr(),$Se=/%[scdjifoO%]/g,kSe=/%%/g,K8=class{constructor(e){this.options=e}_splat(e,r){let n=e.message,i=e[HG]||e.splat||[],s=n.match(kSe),o=s&&s.length||0,a=r.length-o-i.length,c=a<0?i.splice(a,-1*a):[],l=c.length;if(l)for(let h=0;h<l;h++)Object.assign(e,c[h]);return e.message=FSe.format(n,...i),e}transform(e){let r=e.message,n=e[HG]||e.splat;if(!n||!n.length)return e;let i=r&&r.match&&r.match($Se);if(!i&&(n||n.length)){let s=n.length>1?n.splice(0):n,o=s.length;if(o)for(let u=0;u<o;u++)Object.assign(e,s[u]);return e}return i?this._splat(e,i):e}};GG.exports=t=>new K8(t)});var QG=y((AE,YG)=>{f();(function(t,e){typeof AE=="object"&&typeof YG<"u"?e(AE):typeof define=="function"&&define.amd?define(["exports"],e):e(t.fecha={})})(AE,function(t){"use strict";var e=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r="\\d\\d?",n="\\d\\d",i="\\d{3}",s="\\d{4}",o="[^\\s]+",u=/\[([^]*?)\]/gm;function a(W,Z){for(var be=[],rt=0,ce=W.length;rt<ce;rt++)be.push(W[rt].substr(0,Z));return be}var c=function(W){return function(Z,be){var rt=be[W].map(function(qt){return qt.toLowerCase()}),ce=rt.indexOf(Z.toLowerCase());return ce>-1?ce:null}};function l(W){for(var Z=[],be=1;be<arguments.length;be++)Z[be-1]=arguments[be];for(var rt=0,ce=Z;rt<ce.length;rt++){var qt=ce[rt];for(var us in qt)W[us]=qt[us]}return W}var h=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=["January","February","March","April","May","June","July","August","September","October","November","December"],p=a(d,3),m=a(h,3),g={dayNamesShort:m,dayNames:h,monthNamesShort:p,monthNames:d,amPm:["am","pm"],DoFn:function(W){return W+["th","st","nd","rd"][W%10>3?0:(W-W%10!==10?1:0)*W%10]}},_=l({},g),w=function(W){return _=l(_,W)},S=function(W){return W.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},C=function(W,Z){for(Z===void 0&&(Z=2),W=String(W);W.length<Z;)W="0"+W;return W},O={D:function(W){return String(W.getDate())},DD:function(W){return C(W.getDate())},Do:function(W,Z){return Z.DoFn(W.getDate())},d:function(W){return String(W.getDay())},dd:function(W){return C(W.getDay())},ddd:function(W,Z){return Z.dayNamesShort[W.getDay()]},dddd:function(W,Z){return Z.dayNames[W.getDay()]},M:function(W){return String(W.getMonth()+1)},MM:function(W){return C(W.getMonth()+1)},MMM:function(W,Z){return Z.monthNamesShort[W.getMonth()]},MMMM:function(W,Z){return Z.monthNames[W.getMonth()]},YY:function(W){return C(String(W.getFullYear()),4).substr(2)},YYYY:function(W){return C(W.getFullYear(),4)},h:function(W){return String(W.getHours()%12||12)},hh:function(W){return C(W.getHours()%12||12)},H:function(W){return String(W.getHours())},HH:function(W){return C(W.getHours())},m:function(W){return String(W.getMinutes())},mm:function(W){return C(W.getMinutes())},s:function(W){return String(W.getSeconds())},ss:function(W){return C(W.getSeconds())},S:function(W){return String(Math.round(W.getMilliseconds()/100))},SS:function(W){return C(Math.round(W.getMilliseconds()/10),2)},SSS:function(W){return C(W.getMilliseconds(),3)},a:function(W,Z){return W.getHours()<12?Z.amPm[0]:Z.amPm[1]},A:function(W,Z){return W.getHours()<12?Z.amPm[0].toUpperCase():Z.amPm[1].toUpperCase()},ZZ:function(W){var Z=W.getTimezoneOffset();return(Z>0?"-":"+")+C(Math.floor(Math.abs(Z)/60)*100+Math.abs(Z)%60,4)},Z:function(W){var Z=W.getTimezoneOffset();return(Z>0?"-":"+")+C(Math.floor(Math.abs(Z)/60),2)+":"+C(Math.abs(Z)%60,2)}},B=function(W){return+W-1},P=[null,r],v=[null,o],j=["isPm",o,function(W,Z){var be=W.toLowerCase();return be===Z.amPm[0]?0:be===Z.amPm[1]?1:null}],k=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(W){var Z=(W+"").match(/([+-]|\d\d)/gi);if(Z){var be=+Z[1]*60+parseInt(Z[2],10);return Z[0]==="+"?be:-be}return 0}],q={D:["day",r],DD:["day",n],Do:["day",r+o,function(W){return parseInt(W,10)}],M:["month",r,B],MM:["month",n,B],YY:["year",n,function(W){var Z=new Date,be=+(""+Z.getFullYear()).substr(0,2);return+(""+(+W>68?be-1:be)+W)}],h:["hour",r,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",r],HH:["hour",n],m:["minute",r],mm:["minute",n],s:["second",r],ss:["second",n],YYYY:["year",s],S:["millisecond","\\d",function(W){return+W*100}],SS:["millisecond",n,function(W){return+W*10}],SSS:["millisecond",i],d:P,dd:P,ddd:v,dddd:v,MMM:["month",o,c("monthNamesShort")],MMMM:["month",o,c("monthNames")],a:j,A:j,ZZ:k,Z:k},R={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},F=function(W){return l(R,W)},z=function(W,Z,be){if(Z===void 0&&(Z=R.default),be===void 0&&(be={}),typeof W=="number"&&(W=new Date(W)),Object.prototype.toString.call(W)!=="[object Date]"||isNaN(W.getTime()))throw new Error("Invalid Date pass to format");Z=R[Z]||Z;var rt=[];Z=Z.replace(u,function(qt,us){return rt.push(us),"@@@"});var ce=l(l({},_),be);return Z=Z.replace(e,function(qt){return O[qt](W,ce)}),Z.replace(/@@@/g,function(){return rt.shift()})};function J(W,Z,be){if(be===void 0&&(be={}),typeof Z!="string")throw new Error("Invalid format in fecha parse");if(Z=R[Z]||Z,W.length>1e3)return null;var rt=new Date,ce={year:rt.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},qt=[],us=[],Ws=Z.replace(u,function(Hs,cs){return us.push(S(cs)),"@@@"}),bu={},Jc={};Ws=S(Ws).replace(e,function(Hs){var cs=q[Hs],Cu=cs[0],el=cs[1],va=cs[3];if(bu[Cu])throw new Error("Invalid format. "+Cu+" specified twice in format");return bu[Cu]=!0,va&&(Jc[va]=!0),qt.push(cs),"("+el+")"}),Object.keys(Jc).forEach(function(Hs){if(!bu[Hs])throw new Error("Invalid format. "+Hs+" is required in specified format")}),Ws=Ws.replace(/@@@/g,function(){return us.shift()});var Ou=W.match(new RegExp(Ws,"i"));if(!Ou)return null;for(var as=l(l({},_),be),Hr=1;Hr<Ou.length;Hr++){var Ta=qt[Hr-1],Xc=Ta[0],Da=Ta[2],Ma=Da?Da(Ou[Hr],as):+Ou[Hr];if(Ma==null)return null;ce[Xc]=Ma}ce.isPm===1&&ce.hour!=null&&+ce.hour!=12?ce.hour=+ce.hour+12:ce.isPm===0&&+ce.hour==12&&(ce.hour=0);var So;if(ce.timezoneOffset==null){So=new Date(ce.year,ce.month,ce.day,ce.hour,ce.minute,ce.second,ce.millisecond);for(var bo=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],Hr=0,Zc=bo.length;Hr<Zc;Hr++)if(bu[bo[Hr][0]]&&ce[bo[Hr][0]]!==So[bo[Hr][1]]())return null}else if(So=new Date(Date.UTC(ce.year,ce.month,ce.day,ce.hour,ce.minute-ce.timezoneOffset,ce.second,ce.millisecond)),ce.month>11||ce.month<0||ce.day>31||ce.day<1||ce.hour>23||ce.hour<0||ce.minute>59||ce.minute<0||ce.second>59||ce.second<0)return null;return So}var De={format:z,parse:J,defaultI18n:g,setGlobalDateI18n:w,setGlobalDateMasks:F};t.assign=l,t.default=De,t.format=z,t.parse=J,t.defaultI18n=g,t.setGlobalDateI18n=w,t.setGlobalDateMasks=F,Object.defineProperty(t,"__esModule",{value:!0})})});var XG=y((Tje,JG)=>{"use strict";f();var qSe=QG(),LSe=ni();JG.exports=LSe((t,e={})=>(e.format&&(t.timestamp=typeof e.format=="function"?e.format():qSe.format(new Date,e.format)),t.timestamp||(t.timestamp=new Date().toISOString()),e.alias&&(t[e.alias]=t.timestamp),t))});var eK=y((Mje,ZG)=>{"use strict";f();var Y8=I8(),jSe=ni(),{MESSAGE:Q8}=fr();ZG.exports=jSe((t,e)=>(e.level!==!1&&(t.level=Y8.strip(t.level)),e.message!==!1&&(t.message=Y8.strip(String(t.message))),e.raw!==!1&&t[Q8]&&(t[Q8]=Y8.strip(String(t[Q8]))),t))});var X8=y(J8=>{"use strict";f();var USe=J8.format=ni();J8.levels=gG();function zr(t,e){Object.defineProperty(USe,t,{get(){return e()},configurable:!0})}zr("align",function(){return EG()});zr("errors",function(){return SG()});zr("cli",function(){return OG()});zr("combine",function(){return TG()});zr("colorize",function(){return pE()});zr("json",function(){return G8()});zr("label",function(){return PG()});zr("logstash",function(){return RG()});zr("metadata",function(){return FG()});zr("ms",function(){return kG()});zr("padLevels",function(){return L8()});zr("prettyPrint",function(){return jG()});zr("printf",function(){return UG()});zr("simple",function(){return WG()});zr("splat",function(){return KG()});zr("timestamp",function(){return XG()});zr("uncolorize",function(){return eK()})});var Z8=y(wE=>{"use strict";f();var{format:tK}=require("util");wE.warn={deprecated(t){return()=>{throw new Error(tK("{ %s } was removed in winston@3.0.0.",t))}},useFormat(t){return()=>{throw new Error([tK("{ %s } was removed in winston@3.0.0.",t),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions(t,e,r){r.forEach(n=>{t[n]=wE.warn[e](n)})},forProperties(t,e,r){r.forEach(n=>{let i=wE.warn[e](n);Object.defineProperty(t,n,{get:i,set:i})})}}});var rK=y((Rje,VSe)=>{VSe.exports={name:"winston",description:"A logger for just about everything.",version:"3.17.0",author:"Charlie Robbins <charlie.robbins@gmail.com>",maintainers:["David Hyde <dabh@alumni.stanford.edu>"],repository:{type:"git",url:"https://github.com/winstonjs/winston.git"},keywords:["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],dependencies:{"@dabh/diagnostics":"^2.0.2","@colors/colors":"^1.6.0",async:"^3.2.3","is-stream":"^2.0.0",logform:"^2.7.0","one-time":"^1.0.0","readable-stream":"^3.4.0","safe-stable-stringify":"^2.3.1","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.9.0"},devDependencies:{"@babel/cli":"^7.23.9","@babel/core":"^7.24.0","@babel/preset-env":"^7.24.0","@dabh/eslint-config-populist":"^4.4.0","@types/node":"^20.11.24","abstract-winston-transport":"^0.5.1",assume:"^2.2.0","cross-spawn-async":"^2.2.5",eslint:"^8.57.0",hock:"^1.4.1",mocha:"^10.3.0",nyc:"^17.1.0",rimraf:"5.0.1",split2:"^4.1.0","std-mocks":"^2.0.0",through2:"^4.0.2","winston-compat":"^0.1.5"},main:"./lib/winston.js",browser:"./dist/winston",types:"./index.d.ts",scripts:{lint:"eslint lib/*.js lib/winston/*.js lib/winston/**/*.js --resolve-plugins-relative-to ./node_modules/@dabh/eslint-config-populist",test:"rimraf test/fixtures/logs/* && mocha","test:coverage":"nyc npm run test:unit","test:unit":"mocha test/unit","test:integration":"mocha test/integration",build:"rimraf dist && babel lib -d dist",prepublishOnly:"npm run build"},engines:{node:">= 12.0.0"},license:"MIT"}});var iK=y((xje,nK)=>{f();nK.exports=require("util").deprecate});var e7=y(($je,sK)=>{f();sK.exports=require("stream")});var r7=y((qje,uK)=>{"use strict";f();function zSe(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(t7,this,t)):process.nextTick(t7,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(SE,r):(r._writableState.errorEmitted=!0,process.nextTick(oK,r,s)):process.nextTick(oK,r,s):e?(process.nextTick(SE,r),e(s)):process.nextTick(SE,r)}),this)}function oK(t,e){t7(t,e),SE(t)}function SE(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function WSe(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function t7(t,e){t.emit("error",e)}function HSe(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}uK.exports={destroy:zSe,undestroy:WSe,errorOrDestroy:HSe}});var _a=y((jje,lK)=>{"use strict";f();var cK={};function ss(t,e,r){r||(r=Error);function n(s,o,u){return typeof e=="string"?e:e(s,o,u)}class i extends r{constructor(o,u,a){super(n(o,u,a))}}i.prototype.name=r.name,i.prototype.code=t,cK[t]=i}function aK(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function GSe(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function KSe(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function YSe(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}ss("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);ss("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&GSe(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(KSe(t," argument"))i=`The ${t} ${n} ${aK(e,"type")}`;else{let s=YSe(t,".")?"property":"argument";i=`The "${t}" ${s} ${n} ${aK(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);ss("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");ss("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});ss("ERR_STREAM_PREMATURE_CLOSE","Premature close");ss("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});ss("ERR_MULTIPLE_CALLBACK","Callback called multiple times");ss("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");ss("ERR_STREAM_WRITE_AFTER_END","write after end");ss("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ss("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);ss("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");lK.exports.codes=cK});var n7=y((Vje,fK)=>{"use strict";f();var QSe=_a().codes.ERR_INVALID_OPT_VALUE;function JSe(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function XSe(t,e,r,n){var i=JSe(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new QSe(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}fK.exports={getHighWaterMark:XSe}});var hK=y((Wje,i7)=>{f();typeof Object.create=="function"?i7.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:i7.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var yf=y((Gje,o7)=>{f();try{if(s7=require("util"),typeof s7.inherits!="function")throw"";o7.exports=s7.inherits}catch{o7.exports=hK()}var s7});var _K=y((Yje,gK)=>{"use strict";f();function dK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pK(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?dK(Object(r),!0).forEach(function(n){ZSe(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function ZSe(t,e,r){return e=yK(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function e4e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yK(n.key),n)}}function t4e(t,e,r){return e&&mK(t.prototype,e),r&&mK(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function yK(t){var e=r4e(t,"string");return typeof e=="symbol"?e:String(e)}function r4e(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var n4e=require("buffer"),bE=n4e.Buffer,i4e=require("util"),u7=i4e.inspect,s4e=u7&&u7.custom||"inspect";function o4e(t,e,r){bE.prototype.copy.call(t,e,r)}gK.exports=function(){function t(){e4e(this,t),this.head=null,this.tail=null,this.length=0}return t4e(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return bE.alloc(0);for(var n=bE.allocUnsafe(r>>>0),i=this.head,s=0;i;)o4e(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,u=r>o.length?o.length:r;if(u===o.length?s+=o:s+=o.slice(0,r),r-=u,r===0){u===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(u));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=bE.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,u=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,u),r-=u,r===0){u===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(u));break}++s}return this.length-=s,n}},{key:s4e,value:function(r,n){return u7(this,pK(pK({},n),{},{depth:0,customInspect:!1}))}}]),t}()});var wK=y((a7,AK)=>{f();var OE=require("buffer"),go=OE.Buffer;function EK(t,e){for(var r in t)e[r]=t[r]}go.from&&go.alloc&&go.allocUnsafe&&go.allocUnsafeSlow?AK.exports=OE:(EK(OE,a7),a7.Buffer=Lc);function Lc(t,e,r){return go(t,e,r)}Lc.prototype=Object.create(go.prototype);EK(go,Lc);Lc.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return go(t,e,r)};Lc.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=go(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Lc.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return go(t)};Lc.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return OE.SlowBuffer(t)}});var f7=y(bK=>{"use strict";f();var l7=wK().Buffer,SK=l7.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function u4e(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function a4e(t){var e=u4e(t);if(typeof e!="string"&&(l7.isEncoding===SK||!SK(t)))throw new Error("Unknown encoding: "+t);return e||t}bK.StringDecoder=np;function np(t){this.encoding=a4e(t);var e;switch(this.encoding){case"utf16le":this.text=p4e,this.end=m4e,e=4;break;case"utf8":this.fillLast=f4e,e=4;break;case"base64":this.text=y4e,this.end=g4e,e=3;break;default:this.write=_4e,this.end=E4e;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=l7.allocUnsafe(e)}np.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};np.prototype.end=d4e;np.prototype.text=h4e;np.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function c7(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function c4e(t,e,r){var n=e.length-1;if(n<r)return 0;var i=c7(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=c7(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=c7(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function l4e(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function f4e(t){var e=this.lastTotal-this.lastNeed,r=l4e(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function h4e(t,e){var r=c4e(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function d4e(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function p4e(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function m4e(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function y4e(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function g4e(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function _4e(t){return t.toString(this.encoding)}function E4e(t){return t&&t.length?this.write(t):""}});var CE=y((eUe,TK)=>{"use strict";f();var OK=_a().codes.ERR_STREAM_PREMATURE_CLOSE;function A4e(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function w4e(){}function S4e(t){return t.setHeader&&typeof t.abort=="function"}function CK(t,e,r){if(typeof e=="function")return CK(t,null,e);e||(e={}),r=A4e(r||w4e);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||u()},o=t._writableState&&t._writableState.finished,u=function(){i=!1,o=!0,n||r.call(t)},a=t._readableState&&t._readableState.endEmitted,c=function(){n=!1,a=!0,i||r.call(t)},l=function(m){r.call(t,m)},h=function(){var m;if(n&&!a)return(!t._readableState||!t._readableState.ended)&&(m=new OK),r.call(t,m);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(m=new OK),r.call(t,m)},d=function(){t.req.on("finish",u)};return S4e(t)?(t.on("complete",u),t.on("abort",h),t.req?d():t.on("request",d)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",c),t.on("finish",u),e.error!==!1&&t.on("error",l),t.on("close",h),function(){t.removeListener("complete",u),t.removeListener("abort",h),t.removeListener("request",d),t.req&&t.req.removeListener("finish",u),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",u),t.removeListener("end",c),t.removeListener("error",l),t.removeListener("close",h)}}TK.exports=CK});var MK=y((rUe,DK)=>{"use strict";f();var TE;function Ea(t,e,r){return e=b4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function b4e(t){var e=O4e(t,"string");return typeof e=="symbol"?e:String(e)}function O4e(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var C4e=CE(),Aa=Symbol("lastResolve"),jc=Symbol("lastReject"),ip=Symbol("error"),DE=Symbol("ended"),Uc=Symbol("lastPromise"),h7=Symbol("handlePromise"),Vc=Symbol("stream");function wa(t,e){return{value:t,done:e}}function T4e(t){var e=t[Aa];if(e!==null){var r=t[Vc].read();r!==null&&(t[Uc]=null,t[Aa]=null,t[jc]=null,e(wa(r,!1)))}}function D4e(t){process.nextTick(T4e,t)}function M4e(t,e){return function(r,n){t.then(function(){if(e[DE]){r(wa(void 0,!0));return}e[h7](r,n)},n)}}var v4e=Object.getPrototypeOf(function(){}),B4e=Object.setPrototypeOf((TE={get stream(){return this[Vc]},next:function(){var e=this,r=this[ip];if(r!==null)return Promise.reject(r);if(this[DE])return Promise.resolve(wa(void 0,!0));if(this[Vc].destroyed)return new Promise(function(o,u){process.nextTick(function(){e[ip]?u(e[ip]):o(wa(void 0,!0))})});var n=this[Uc],i;if(n)i=new Promise(M4e(n,this));else{var s=this[Vc].read();if(s!==null)return Promise.resolve(wa(s,!1));i=new Promise(this[h7])}return this[Uc]=i,i}},Ea(TE,Symbol.asyncIterator,function(){return this}),Ea(TE,"return",function(){var e=this;return new Promise(function(r,n){e[Vc].destroy(null,function(i){if(i){n(i);return}r(wa(void 0,!0))})})}),TE),v4e),I4e=function(e){var r,n=Object.create(B4e,(r={},Ea(r,Vc,{value:e,writable:!0}),Ea(r,Aa,{value:null,writable:!0}),Ea(r,jc,{value:null,writable:!0}),Ea(r,ip,{value:null,writable:!0}),Ea(r,DE,{value:e._readableState.endEmitted,writable:!0}),Ea(r,h7,{value:function(s,o){var u=n[Vc].read();u?(n[Uc]=null,n[Aa]=null,n[jc]=null,s(wa(u,!1))):(n[Aa]=s,n[jc]=o)},writable:!0}),r));return n[Uc]=null,C4e(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[jc];s!==null&&(n[Uc]=null,n[Aa]=null,n[jc]=null,s(i)),n[ip]=i;return}var o=n[Aa];o!==null&&(n[Uc]=null,n[Aa]=null,n[jc]=null,o(wa(void 0,!0))),n[DE]=!0}),e.on("readable",D4e.bind(null,n)),n};DK.exports=I4e});var PK=y((iUe,IK)=>{"use strict";f();function vK(t,e,r,n,i,s,o){try{var u=t[s](o),a=u.value}catch(c){r(c);return}u.done?e(a):Promise.resolve(a).then(n,i)}function P4e(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(a){vK(s,n,i,o,u,"next",a)}function u(a){vK(s,n,i,o,u,"throw",a)}o(void 0)})}}function BK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function N4e(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?BK(Object(r),!0).forEach(function(n){R4e(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):BK(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function R4e(t,e,r){return e=x4e(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function x4e(t){var e=F4e(t,"string");return typeof e=="symbol"?e:String(e)}function F4e(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $4e=_a().codes.ERR_INVALID_ARG_TYPE;function k4e(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new $4e("iterable",["Iterable"],e);var i=new t(N4e({objectMode:!0},r)),s=!1;i._read=function(){s||(s=!0,o())};function o(){return u.apply(this,arguments)}function u(){return u=P4e(function*(){try{var a=yield n.next(),c=a.value,l=a.done;l?i.push(null):i.push(yield c)?o():s=!1}catch(h){i.destroy(h)}}),u.apply(this,arguments)}return i}IK.exports=k4e});var S7=y((uUe,UK)=>{"use strict";f();UK.exports=tt;var gf;tt.ReadableState=FK;var oUe=require("events").EventEmitter,xK=function(e,r){return e.listeners(r).length},op=e7(),ME=require("buffer").Buffer,q4e=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function L4e(t){return ME.from(t)}function j4e(t){return ME.isBuffer(t)||t instanceof q4e}var d7=require("util"),je;d7&&d7.debuglog?je=d7.debuglog("stream"):je=function(){};var U4e=_K(),A7=r7(),V4e=n7(),z4e=V4e.getHighWaterMark,vE=_a().codes,W4e=vE.ERR_INVALID_ARG_TYPE,H4e=vE.ERR_STREAM_PUSH_AFTER_EOF,G4e=vE.ERR_METHOD_NOT_IMPLEMENTED,K4e=vE.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,_f,p7,m7;yf()(tt,op);var sp=A7.errorOrDestroy,y7=["error","close","destroy","pause","resume"];function Y4e(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function FK(t,e,r){gf=gf||zc(),t=t||{},typeof r!="boolean"&&(r=e instanceof gf),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=z4e(this,t,"readableHighWaterMark",r),this.buffer=new U4e,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(_f||(_f=f7().StringDecoder),this.decoder=new _f(t.encoding),this.encoding=t.encoding)}function tt(t){if(gf=gf||zc(),!(this instanceof tt))return new tt(t);var e=this instanceof gf;this._readableState=new FK(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),op.call(this)}Object.defineProperty(tt.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});tt.prototype.destroy=A7.destroy;tt.prototype._undestroy=A7.undestroy;tt.prototype._destroy=function(t,e){e(t)};tt.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=ME.from(t,e),e=""),n=!0),$K(this,t,e,!1,n)};tt.prototype.unshift=function(t){return $K(this,t,null,!0,!1)};function $K(t,e,r,n,i){je("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,X4e(t,s);else{var o;if(i||(o=Q4e(s,e)),o)sp(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==ME.prototype&&(e=L4e(e)),n)s.endEmitted?sp(t,new K4e):g7(t,s,e,!0);else if(s.ended)sp(t,new H4e);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?g7(t,s,e,!1):E7(t,s)):g7(t,s,e,!1)}else n||(s.reading=!1,E7(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function g7(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&BE(t)),E7(t,e)}function Q4e(t,e){var r;return!j4e(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new W4e("chunk",["string","Buffer","Uint8Array"],e)),r}tt.prototype.isPaused=function(){return this._readableState.flowing===!1};tt.prototype.setEncoding=function(t){_f||(_f=f7().StringDecoder);var e=new _f(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var NK=1073741824;function J4e(t){return t>=NK?t=NK:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function RK(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=J4e(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}tt.prototype.read=function(t){je("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return je("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?_7(this):BE(this),null;if(t=RK(t,e),t===0&&e.ended)return e.length===0&&_7(this),null;var n=e.needReadable;je("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,je("length less than watermark",n)),e.ended||e.reading?(n=!1,je("reading or ended",n)):n&&(je("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=RK(r,e)));var i;return t>0?i=LK(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&_7(this)),i!==null&&this.emit("data",i),i};function X4e(t,e){if(je("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?BE(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,kK(t)))}}function BE(t){var e=t._readableState;je("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(je("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(kK,t))}function kK(t){var e=t._readableState;je("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,w7(t)}function E7(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(Z4e,t,e))}function Z4e(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(je("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}tt.prototype._read=function(t){sp(this,new G4e("_read()"))};tt.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,je("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?u:g;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(_,w){je("onunpipe"),_===r&&w&&w.hasUnpiped===!1&&(w.hasUnpiped=!0,l())}function u(){je("onend"),t.end()}var a=ebe(r);t.on("drain",a);var c=!1;function l(){je("cleanup"),t.removeListener("close",p),t.removeListener("finish",m),t.removeListener("drain",a),t.removeListener("error",d),t.removeListener("unpipe",o),r.removeListener("end",u),r.removeListener("end",g),r.removeListener("data",h),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&a()}r.on("data",h);function h(_){je("ondata");var w=t.write(_);je("dest.write",w),w===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&jK(n.pipes,t)!==-1)&&!c&&(je("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function d(_){je("onerror",_),g(),t.removeListener("error",d),xK(t,"error")===0&&sp(t,_)}Y4e(t,"error",d);function p(){t.removeListener("finish",m),g()}t.once("close",p);function m(){je("onfinish"),t.removeListener("close",p),g()}t.once("finish",m);function g(){je("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(je("pipe resume"),r.resume()),t};function ebe(t){return function(){var r=t._readableState;je("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&xK(t,"data")&&(r.flowing=!0,w7(t))}}tt.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=jK(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};tt.prototype.on=function(t,e){var r=op.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,je("on readable",n.length,n.reading),n.length?BE(this):n.reading||process.nextTick(tbe,this)),r};tt.prototype.addListener=tt.prototype.on;tt.prototype.removeListener=function(t,e){var r=op.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(qK,this),r};tt.prototype.removeAllListeners=function(t){var e=op.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(qK,this),e};function qK(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function tbe(t){je("readable nexttick read 0"),t.read(0)}tt.prototype.resume=function(){var t=this._readableState;return t.flowing||(je("resume"),t.flowing=!t.readableListening,rbe(this,t)),t.paused=!1,this};function rbe(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(nbe,t,e))}function nbe(t,e){je("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),w7(t),e.flowing&&!e.reading&&t.read(0)}tt.prototype.pause=function(){return je("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(je("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function w7(t){var e=t._readableState;for(je("flow",e.flowing);e.flowing&&t.read()!==null;);}tt.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(je("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(je("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var u=e.push(o);u||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(u){return function(){return t[u].apply(t,arguments)}}(i));for(var s=0;s<y7.length;s++)t.on(y7[s],this.emit.bind(this,y7[s]));return this._read=function(o){je("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(tt.prototype[Symbol.asyncIterator]=function(){return p7===void 0&&(p7=MK()),p7(this)});Object.defineProperty(tt.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(tt.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(tt.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});tt._fromList=LK;Object.defineProperty(tt.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function LK(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function _7(t){var e=t._readableState;je("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(ibe,e,t))}function ibe(t,e){if(je("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(tt.from=function(t,e){return m7===void 0&&(m7=PK()),m7(tt,t,e)});function jK(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var zc=y((cUe,zK)=>{"use strict";f();var sbe=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};zK.exports=_o;var VK=S7(),O7=NE();yf()(_o,VK);for(b7=sbe(O7.prototype),IE=0;IE<b7.length;IE++)PE=b7[IE],_o.prototype[PE]||(_o.prototype[PE]=O7.prototype[PE]);var b7,PE,IE;function _o(t){if(!(this instanceof _o))return new _o(t);VK.call(this,t),O7.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",obe)))}Object.defineProperty(_o.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(_o.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(_o.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function obe(){this._writableState.ended||process.nextTick(ube,this)}function ube(t){t.end()}Object.defineProperty(_o.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var NE=y((fUe,QK)=>{"use strict";f();QK.exports=Yt;function HK(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Rbe(e,t)}}var Ef;Yt.WritableState=ap;var abe={deprecate:iK()},GK=e7(),xE=require("buffer").Buffer,cbe=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function lbe(t){return xE.from(t)}function fbe(t){return xE.isBuffer(t)||t instanceof cbe}var T7=r7(),hbe=n7(),dbe=hbe.getHighWaterMark,Sa=_a().codes,pbe=Sa.ERR_INVALID_ARG_TYPE,mbe=Sa.ERR_METHOD_NOT_IMPLEMENTED,ybe=Sa.ERR_MULTIPLE_CALLBACK,gbe=Sa.ERR_STREAM_CANNOT_PIPE,_be=Sa.ERR_STREAM_DESTROYED,Ebe=Sa.ERR_STREAM_NULL_VALUES,Abe=Sa.ERR_STREAM_WRITE_AFTER_END,wbe=Sa.ERR_UNKNOWN_ENCODING,Af=T7.errorOrDestroy;yf()(Yt,GK);function Sbe(){}function ap(t,e,r){Ef=Ef||zc(),t=t||{},typeof r!="boolean"&&(r=e instanceof Ef),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=dbe(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){vbe(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new HK(this)}ap.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(ap.prototype,"buffer",{get:abe.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var RE;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(RE=Function.prototype[Symbol.hasInstance],Object.defineProperty(Yt,Symbol.hasInstance,{value:function(e){return RE.call(this,e)?!0:this!==Yt?!1:e&&e._writableState instanceof ap}})):RE=function(e){return e instanceof this};function Yt(t){Ef=Ef||zc();var e=this instanceof Ef;if(!e&&!RE.call(Yt,this))return new Yt(t);this._writableState=new ap(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),GK.call(this)}Yt.prototype.pipe=function(){Af(this,new gbe)};function bbe(t,e){var r=new Abe;Af(t,r),process.nextTick(e,r)}function Obe(t,e,r,n){var i;return r===null?i=new Ebe:typeof r!="string"&&!e.objectMode&&(i=new pbe("chunk",["string","Buffer"],r)),i?(Af(t,i),process.nextTick(n,i),!1):!0}Yt.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&fbe(t);return s&&!xE.isBuffer(t)&&(t=lbe(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=Sbe),n.ending?bbe(this,r):(s||Obe(this,n,t,r))&&(n.pendingcb++,i=Tbe(this,n,s,t,e,r)),i};Yt.prototype.cork=function(){this._writableState.corked++};Yt.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&KK(this,t))};Yt.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new wbe(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(Yt.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function Cbe(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=xE.from(e,r)),e}Object.defineProperty(Yt.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Tbe(t,e,r,n,i,s){if(!r){var o=Cbe(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var u=e.objectMode?1:n.length;e.length+=u;var a=e.length<e.highWaterMark;if(a||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else C7(t,e,!1,u,n,i,s);return a}function C7(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new _be("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Dbe(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(up,t,e),t._writableState.errorEmitted=!0,Af(t,n)):(i(n),t._writableState.errorEmitted=!0,Af(t,n),up(t,e))}function Mbe(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function vbe(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new ybe;if(Mbe(r),e)Dbe(t,r,n,e,i);else{var s=YK(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&KK(t,r),n?process.nextTick(WK,t,r,s,i):WK(t,r,s,i)}}function WK(t,e,r,n){r||Bbe(t,e),e.pendingcb--,n(),up(t,e)}function Bbe(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function KK(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,u=!0;r;)i[o]=r,r.isBuf||(u=!1),r=r.next,o+=1;i.allBuffers=u,C7(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new HK(e),e.bufferedRequestCount=0}else{for(;r;){var a=r.chunk,c=r.encoding,l=r.callback,h=e.objectMode?1:a.length;if(C7(t,e,!1,h,a,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}Yt.prototype._write=function(t,e,r){r(new mbe("_write()"))};Yt.prototype._writev=null;Yt.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Nbe(this,n,r),this};Object.defineProperty(Yt.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function YK(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Ibe(t,e){t._final(function(r){e.pendingcb--,r&&Af(t,r),e.prefinished=!0,t.emit("prefinish"),up(t,e)})}function Pbe(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Ibe,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function up(t,e){var r=YK(e);if(r&&(Pbe(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Nbe(t,e,r){e.ending=!0,up(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Rbe(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(Yt.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});Yt.prototype.destroy=T7.destroy;Yt.prototype._undestroy=T7.undestroy;Yt.prototype._destroy=function(t,e){e(t)}});var D7=y((dUe,ZK)=>{"use strict";f();var xbe=require("util"),JK=NE(),{LEVEL:XK}=fr(),cp=ZK.exports=function(e={}){JK.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.handleRejections=e.handleRejections,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",r=>{this.levels=r.levels,this.parent=r}),this.once("unpipe",r=>{r===this.parent&&(this.parent=null,this.close&&this.close())})};xbe.inherits(cp,JK);cp.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);let i=this.level||this.parent&&this.parent.level;if(!i||this.levels[i]>=this.levels[e[XK]]){if(e&&!this.format)return this.log(e,n);let s,o;try{o=this.format.transform(Object.assign({},e),this.format.options)}catch(u){s=u}if(s||!o){if(n(),s)throw s;return}return this.log(o,n)}return this._writableState.sync=!1,n(null)};cp.prototype._writev=function(e,r){if(this.logv){let n=e.filter(this._accept,this);return n.length?this.logv(n,r):r(null)}for(let n=0;n<e.length;n++){if(!this._accept(e[n]))continue;if(e[n].chunk&&!this.format){this.log(e[n].chunk,e[n].callback);continue}let i,s;try{s=this.format.transform(Object.assign({},e[n].chunk),this.format.options)}catch(o){i=o}if(i||!s){if(e[n].callback(),i)throw r(null),i}else this.log(s,e[n].callback)}return r(null)};cp.prototype._accept=function(e){let r=e.chunk;if(this.silent)return!1;let n=this.level||this.parent&&this.parent.level;return!!((r.exception===!0||!n||this.levels[n]>=this.levels[r[XK]])&&(this.handleExceptions||r.exception!==!0))};cp.prototype._nop=function(){}});var v7=y((mUe,tY)=>{"use strict";f();var Fbe=require("util"),{LEVEL:M7}=fr(),eY=D7(),lp=tY.exports=function(e={}){if(eY.call(this,e),!e.transport||typeof e.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=e.transport,this.level=this.level||e.transport.level,this.handleExceptions=this.handleExceptions||e.transport.handleExceptions,this._deprecated();function r(n){this.emit("error",n,this.transport)}this.transport.__winstonError||(this.transport.__winstonError=r.bind(this),this.transport.on("error",this.transport.__winstonError))};Fbe.inherits(lp,eY);lp.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);(!this.level||this.levels[this.level]>=this.levels[e[M7]])&&this.transport.log(e[M7],e.message,e,this._nop),n(null)};lp.prototype._writev=function(e,r){for(let n=0;n<e.length;n++)this._accept(e[n])&&(this.transport.log(e[n].chunk[M7],e[n].chunk.message,e[n].chunk,this._nop),e[n].callback());return r(null)};lp.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))};lp.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}});var Wc=y((gUe,B7)=>{"use strict";f();B7.exports=D7();B7.exports.LegacyTransportStream=v7()});var iY=y((AUe,nY)=>{"use strict";f();var $be=require("os"),{LEVEL:rY,MESSAGE:wf}=fr(),kbe=Wc();nY.exports=class extends kbe{constructor(e={}){super(e),this.name=e.name||"console",this.stderrLevels=this._stringArrayToSet(e.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(e.consoleWarnLevels),this.eol=typeof e.eol=="string"?e.eol:$be.EOL,this.forceConsole=e.forceConsole||!1,this._consoleLog=console.log.bind(console),this._consoleWarn=console.warn.bind(console),this._consoleError=console.error.bind(console),this.setMaxListeners(30)}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.stderrLevels[e[rY]]){console._stderr&&!this.forceConsole?console._stderr.write(`${e[wf]}${this.eol}`):this._consoleError(e[wf]),r&&r();return}else if(this.consoleWarnLevels[e[rY]]){console._stderr&&!this.forceConsole?console._stderr.write(`${e[wf]}${this.eol}`):this._consoleWarn(e[wf]),r&&r();return}console._stdout&&!this.forceConsole?console._stdout.write(`${e[wf]}${this.eol}`):this._consoleLog(e[wf]),r&&r()}_stringArrayToSet(e,r){if(!e)return{};if(r=r||"Cannot make set from type other than Array of string elements",!Array.isArray(e))throw new Error(r);return e.reduce((n,i)=>{if(typeof i!="string")throw new Error(r);return n[i]=!0,n},{})}}});var $E=y((FE,sY)=>{"use strict";f();Object.defineProperty(FE,"__esModule",{value:!0});FE.default=qbe;function qbe(t){return t&&typeof t.length=="number"&&t.length>=0&&t.length%1===0}sY.exports=FE.default});var uY=y((kE,oY)=>{"use strict";f();Object.defineProperty(kE,"__esModule",{value:!0});kE.default=function(t){return function(...e){var r=e.pop();return t.call(this,e,r)}};oY.exports=kE.default});var lY=y(ba=>{"use strict";f();Object.defineProperty(ba,"__esModule",{value:!0});ba.fallback=aY;ba.wrap=cY;var Lbe=ba.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,jbe=ba.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,Ube=ba.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function aY(t){setTimeout(t,0)}function cY(t){return(e,...r)=>t(()=>e(...r))}var fp;Lbe?fp=queueMicrotask:jbe?fp=setImmediate:Ube?fp=process.nextTick:fp=aY;ba.default=cY(fp)});var mY=y((qE,pY)=>{"use strict";f();Object.defineProperty(qE,"__esModule",{value:!0});qE.default=Kbe;var Vbe=uY(),zbe=dY(Vbe),Wbe=lY(),Hbe=dY(Wbe),Gbe=Hc();function dY(t){return t&&t.__esModule?t:{default:t}}function Kbe(t){return(0,Gbe.isAsync)(t)?function(...e){let r=e.pop(),n=t.apply(this,e);return fY(n,r)}:(0,zbe.default)(function(e,r){var n;try{n=t.apply(this,e)}catch(i){return r(i)}if(n&&typeof n.then=="function")return fY(n,r);r(null,n)})}function fY(t,e){return t.then(r=>{hY(e,null,r)},r=>{hY(e,r&&(r instanceof Error||r.message)?r:new Error(r))})}function hY(t,e,r){try{t(e,r)}catch(n){(0,Hbe.default)(i=>{throw i},n)}}pY.exports=qE.default});var Hc=y(wu=>{"use strict";f();Object.defineProperty(wu,"__esModule",{value:!0});wu.isAsyncIterable=wu.isAsyncGenerator=wu.isAsync=void 0;var Ybe=mY(),Qbe=Jbe(Ybe);function Jbe(t){return t&&t.__esModule?t:{default:t}}function yY(t){return t[Symbol.toStringTag]==="AsyncFunction"}function Xbe(t){return t[Symbol.toStringTag]==="AsyncGenerator"}function Zbe(t){return typeof t[Symbol.asyncIterator]=="function"}function eOe(t){if(typeof t!="function")throw new Error("expected a function");return yY(t)?(0,Qbe.default)(t):t}wu.default=eOe;wu.isAsync=yY;wu.isAsyncGenerator=Xbe;wu.isAsyncIterable=Zbe});var Sf=y((LE,gY)=>{"use strict";f();Object.defineProperty(LE,"__esModule",{value:!0});LE.default=tOe;function tOe(t,e){if(e||(e=t.length),!e)throw new Error("arity is undefined");function r(...n){return typeof n[e-1]=="function"?t.apply(this,n):new Promise((i,s)=>{n[e-1]=(o,...u)=>{if(o)return s(o);i(u.length>1?u:u[0])},t.apply(this,n)})}return r}gY.exports=LE.default});var EY=y((jE,_Y)=>{"use strict";f();Object.defineProperty(jE,"__esModule",{value:!0});var rOe=$E(),nOe=I7(rOe),iOe=Hc(),sOe=I7(iOe),oOe=Sf(),uOe=I7(oOe);function I7(t){return t&&t.__esModule?t:{default:t}}jE.default=(0,uOe.default)((t,e,r)=>{var n=(0,nOe.default)(e)?[]:{};t(e,(i,s,o)=>{(0,sOe.default)(i)((u,...a)=>{a.length<2&&([a]=a),n[s]=a,o(u)})},i=>r(i,n))},3);_Y.exports=jE.default});var P7=y((UE,AY)=>{"use strict";f();Object.defineProperty(UE,"__esModule",{value:!0});UE.default=aOe;function aOe(t){function e(...r){if(t!==null){var n=t;t=null,n.apply(this,r)}}return Object.assign(e,t),e}AY.exports=UE.default});var SY=y((VE,wY)=>{"use strict";f();Object.defineProperty(VE,"__esModule",{value:!0});VE.default=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()};wY.exports=VE.default});var CY=y((zE,OY)=>{"use strict";f();Object.defineProperty(zE,"__esModule",{value:!0});zE.default=yOe;var cOe=$E(),lOe=bY(cOe),fOe=SY(),hOe=bY(fOe);function bY(t){return t&&t.__esModule?t:{default:t}}function dOe(t){var e=-1,r=t.length;return function(){return++e<r?{value:t[e],key:e}:null}}function pOe(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function mOe(t){var e=t?Object.keys(t):[],r=-1,n=e.length;return function i(){var s=e[++r];return s==="__proto__"?i():r<n?{value:t[s],key:s}:null}}function yOe(t){if((0,lOe.default)(t))return dOe(t);var e=(0,hOe.default)(t);return e?pOe(e):mOe(t)}OY.exports=zE.default});var N7=y((WE,TY)=>{"use strict";f();Object.defineProperty(WE,"__esModule",{value:!0});WE.default=gOe;function gOe(t){return function(...e){if(t===null)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}TY.exports=WE.default});var GE=y((HE,DY)=>{"use strict";f();Object.defineProperty(HE,"__esModule",{value:!0});var _Oe={};HE.default=_Oe;DY.exports=HE.default});var vY=y((KE,MY)=>{"use strict";f();Object.defineProperty(KE,"__esModule",{value:!0});KE.default=SOe;var EOe=GE(),AOe=wOe(EOe);function wOe(t){return t&&t.__esModule?t:{default:t}}function SOe(t,e,r,n){let i=!1,s=!1,o=!1,u=0,a=0;function c(){u>=e||o||i||(o=!0,t.next().then(({value:d,done:p})=>{if(!(s||i)){if(o=!1,p){i=!0,u<=0&&n(null);return}u++,r(d,a,l),a++,c()}}).catch(h))}function l(d,p){if(u-=1,!s){if(d)return h(d);if(d===!1){i=!0,s=!0;return}if(p===AOe.default||i&&u<=0)return i=!0,n(null);c()}}function h(d){s||(o=!1,i=!0,n(d))}c()}MY.exports=KE.default});var NY=y((YE,PY)=>{"use strict";f();Object.defineProperty(YE,"__esModule",{value:!0});var bOe=P7(),OOe=hp(bOe),COe=CY(),TOe=hp(COe),DOe=N7(),MOe=hp(DOe),BY=Hc(),vOe=vY(),IY=hp(vOe),BOe=GE(),IOe=hp(BOe);function hp(t){return t&&t.__esModule?t:{default:t}}YE.default=t=>(e,r,n)=>{if(n=(0,OOe.default)(n),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return n(null);if((0,BY.isAsyncGenerator)(e))return(0,IY.default)(e,t,r,n);if((0,BY.isAsyncIterable)(e))return(0,IY.default)(e[Symbol.asyncIterator](),t,r,n);var i=(0,TOe.default)(e),s=!1,o=!1,u=0,a=!1;function c(h,d){if(!o)if(u-=1,h)s=!0,n(h);else if(h===!1)s=!0,o=!0;else{if(d===IOe.default||s&&u<=0)return s=!0,n(null);a||l()}}function l(){for(a=!0;u<t&&!s;){var h=i();if(h===null){s=!0,u<=0&&n(null);return}u+=1,r(h.value,h.key,(0,MOe.default)(c))}a=!1}l()};PY.exports=YE.default});var x7=y((QE,RY)=>{"use strict";f();Object.defineProperty(QE,"__esModule",{value:!0});var POe=NY(),NOe=R7(POe),ROe=Hc(),xOe=R7(ROe),FOe=Sf(),$Oe=R7(FOe);function R7(t){return t&&t.__esModule?t:{default:t}}function kOe(t,e,r,n){return(0,NOe.default)(e)(t,(0,xOe.default)(r),n)}QE.default=(0,$Oe.default)(kOe,4);RY.exports=QE.default});var $Y=y((JE,FY)=>{"use strict";f();Object.defineProperty(JE,"__esModule",{value:!0});var qOe=x7(),LOe=xY(qOe),jOe=Sf(),UOe=xY(jOe);function xY(t){return t&&t.__esModule?t:{default:t}}function VOe(t,e,r){return(0,LOe.default)(t,1,e,r)}JE.default=(0,UOe.default)(VOe,3);FY.exports=JE.default});var LY=y((XE,qY)=>{"use strict";f();Object.defineProperty(XE,"__esModule",{value:!0});XE.default=KOe;var zOe=EY(),WOe=kY(zOe),HOe=$Y(),GOe=kY(HOe);function kY(t){return t&&t.__esModule?t:{default:t}}function KOe(t,e){return(0,WOe.default)(GOe.default,t,e)}qY.exports=XE.default});var F7=y((jUe,UY)=>{"use strict";f();UY.exports=Su;var ZE=_a().codes,YOe=ZE.ERR_METHOD_NOT_IMPLEMENTED,QOe=ZE.ERR_MULTIPLE_CALLBACK,JOe=ZE.ERR_TRANSFORM_ALREADY_TRANSFORMING,XOe=ZE.ERR_TRANSFORM_WITH_LENGTH_0,e3=zc();yf()(Su,e3);function ZOe(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new QOe);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function Su(t){if(!(this instanceof Su))return new Su(t);e3.call(this,t),this._transformState={afterTransform:ZOe.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",eCe)}function eCe(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){jY(t,e,r)}):jY(this,null,null)}Su.prototype.push=function(t,e){return this._transformState.needTransform=!1,e3.prototype.push.call(this,t,e)};Su.prototype._transform=function(t,e,r){r(new YOe("_transform()"))};Su.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Su.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};Su.prototype._destroy=function(t,e){e3.prototype._destroy.call(this,t,function(r){e(r)})};function jY(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new XOe;if(t._transformState.transforming)throw new JOe;return t.push(null)}});var WY=y((VUe,zY)=>{"use strict";f();zY.exports=dp;var VY=F7();yf()(dp,VY);function dp(t){if(!(this instanceof dp))return new dp(t);VY.call(this,t)}dp.prototype._transform=function(t,e,r){r(null,t)}});var QY=y((WUe,YY)=>{"use strict";f();var $7;function tCe(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var KY=_a().codes,rCe=KY.ERR_MISSING_ARGS,nCe=KY.ERR_STREAM_DESTROYED;function HY(t){if(t)throw t}function iCe(t){return t.setHeader&&typeof t.abort=="function"}function sCe(t,e,r,n){n=tCe(n);var i=!1;t.on("close",function(){i=!0}),$7===void 0&&($7=CE()),$7(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,iCe(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new nCe("pipe"))}}}function GY(t){t()}function oCe(t,e){return t.pipe(e)}function uCe(t){return!t.length||typeof t[t.length-1]!="function"?HY:t.pop()}function aCe(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=uCe(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new rCe("streams");var i,s=e.map(function(o,u){var a=u<e.length-1,c=u>0;return sCe(o,a,c,function(l){i||(i=l),l&&s.forEach(GY),!a&&(s.forEach(GY),n(i))})});return e.reduce(oCe)}YY.exports=aCe});var Gc=y((os,mp)=>{f();var pp=require("stream");process.env.READABLE_STREAM==="disable"&&pp?(mp.exports=pp.Readable,Object.assign(mp.exports,pp),mp.exports.Stream=pp):(os=mp.exports=S7(),os.Stream=pp||os,os.Readable=os,os.Writable=NE(),os.Duplex=zc(),os.Transform=F7(),os.PassThrough=WY(),os.finished=CE(),os.pipeline=QY())});var z7=y((KUe,XY)=>{f();var bf=[],yp=[],k7=function(){};function L7(t){return~bf.indexOf(t)?!1:(bf.push(t),!0)}function j7(t){k7=t}function cCe(t){for(var e=[],r=0;r<bf.length;r++){if(bf[r].async){e.push(bf[r]);continue}if(bf[r](t))return!0}return e.length?new Promise(function(i){Promise.all(e.map(function(o){return o(t)})).then(function(o){i(o.some(Boolean))})}):!1}function U7(t){return~yp.indexOf(t)?!1:(yp.push(t),!0)}function q7(){k7.apply(k7,arguments)}function JY(t){for(var e=0;e<yp.length;e++)t=yp[e].apply(yp[e],arguments);return t}function V7(t,e){var r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&(t[n]=e[n]);return t}function lCe(t){return t.enabled=!1,t.modify=U7,t.set=j7,t.use=L7,V7(function(){return!1},t)}function fCe(t){function e(){var r=Array.prototype.slice.call(arguments,0);return q7.call(q7,t,JY(r,t)),!0}return t.enabled=!0,t.modify=U7,t.set=j7,t.use=L7,V7(e,t)}XY.exports=function(e){return e.introduce=V7,e.enabled=cCe,e.process=JY,e.modify=U7,e.write=q7,e.nope=lCe,e.yep=fCe,e.set=j7,e.use=L7,e}});var eQ=y((QUe,ZY)=>{f();var hCe=z7(),dCe=hCe(function t(e,r){return r=r||{},r.namespace=e,r.prod=!0,r.dev=!1,r.force||t.force?t.yep(r):t.nope(r)});ZY.exports=dCe});var rQ=y((XUe,tQ)=>{"use strict";f();tQ.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var iQ=y((eVe,nQ)=>{f();nQ.exports=function(e){return!e||typeof e=="string"?!1:e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&e.constructor.name!=="String")}});var uQ=y((rVe,oQ)=>{"use strict";f();var pCe=iQ(),mCe=Array.prototype.concat,yCe=Array.prototype.slice,sQ=oQ.exports=function(e){for(var r=[],n=0,i=e.length;n<i;n++){var s=e[n];pCe(s)?r=mCe.call(r,yCe.call(s)):r.push(s)}return r};sQ.wrap=function(t){return function(){return t(sQ(arguments))}}});var fQ=y((iVe,lQ)=>{f();var gp=rQ(),_p=uQ(),aQ=Object.hasOwnProperty,cQ=Object.create(null);for(t3 in gp)aQ.call(gp,t3)&&(cQ[gp[t3]]=t3);var t3,Si=lQ.exports={to:{},get:{}};Si.get=function(t){var e=t.substring(0,3).toLowerCase(),r,n;switch(e){case"hsl":r=Si.get.hsl(t),n="hsl";break;case"hwb":r=Si.get.hwb(t),n="hwb";break;default:r=Si.get.rgb(t),n="rgb";break}return r?{model:n,value:r}:null};Si.get.rgb=function(t){if(!t)return null;var e=/^#([a-f0-9]{3,4})$/i,r=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,n=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,s=/^(\w+)$/,o=[0,0,0,1],u,a,c;if(u=t.match(r)){for(c=u[2],u=u[1],a=0;a<3;a++){var l=a*2;o[a]=parseInt(u.slice(l,l+2),16)}c&&(o[3]=parseInt(c,16)/255)}else if(u=t.match(e)){for(u=u[1],c=u[3],a=0;a<3;a++)o[a]=parseInt(u[a]+u[a],16);c&&(o[3]=parseInt(c+c,16)/255)}else if(u=t.match(n)){for(a=0;a<3;a++)o[a]=parseInt(u[a+1],0);u[4]&&(u[5]?o[3]=parseFloat(u[4])*.01:o[3]=parseFloat(u[4]))}else if(u=t.match(i)){for(a=0;a<3;a++)o[a]=Math.round(parseFloat(u[a+1])*2.55);u[4]&&(u[5]?o[3]=parseFloat(u[4])*.01:o[3]=parseFloat(u[4]))}else return(u=t.match(s))?u[1]==="transparent"?[0,0,0,0]:aQ.call(gp,u[1])?(o=gp[u[1]],o[3]=1,o):null:null;for(a=0;a<3;a++)o[a]=Oa(o[a],0,255);return o[3]=Oa(o[3],0,1),o};Si.get.hsl=function(t){if(!t)return null;var e=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,s=Oa(parseFloat(r[2]),0,100),o=Oa(parseFloat(r[3]),0,100),u=Oa(isNaN(n)?1:n,0,1);return[i,s,o,u]}return null};Si.get.hwb=function(t){if(!t)return null;var e=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,r=t.match(e);if(r){var n=parseFloat(r[4]),i=(parseFloat(r[1])%360+360)%360,s=Oa(parseFloat(r[2]),0,100),o=Oa(parseFloat(r[3]),0,100),u=Oa(isNaN(n)?1:n,0,1);return[i,s,o,u]}return null};Si.to.hex=function(){var t=_p(arguments);return"#"+r3(t[0])+r3(t[1])+r3(t[2])+(t[3]<1?r3(Math.round(t[3]*255)):"")};Si.to.rgb=function(){var t=_p(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"};Si.to.rgb.percent=function(){var t=_p(arguments),e=Math.round(t[0]/255*100),r=Math.round(t[1]/255*100),n=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+e+"%, "+r+"%, "+n+"%)":"rgba("+e+"%, "+r+"%, "+n+"%, "+t[3]+")"};Si.to.hsl=function(){var t=_p(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"};Si.to.hwb=function(){var t=_p(arguments),e="";return t.length>=4&&t[3]!==1&&(e=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+e+")"};Si.to.keyword=function(t){return cQ[t.slice(0,3)]};function Oa(t,e,r){return Math.min(Math.max(e,t),r)}function r3(t){var e=Math.round(t).toString(16).toUpperCase();return e.length<2?"0"+e:e}});var dQ=y((oVe,hQ)=>{"use strict";f();hQ.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var W7=y((aVe,gQ)=>{f();var Kc=dQ(),yQ={};for(n3 in Kc)Kc.hasOwnProperty(n3)&&(yQ[Kc[n3]]=n3);var n3,de=gQ.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(In in de)if(de.hasOwnProperty(In)){if(!("channels"in de[In]))throw new Error("missing channels property: "+In);if(!("labels"in de[In]))throw new Error("missing channel labels property: "+In);if(de[In].labels.length!==de[In].channels)throw new Error("channel and label counts mismatch: "+In);pQ=de[In].channels,mQ=de[In].labels,delete de[In].channels,delete de[In].labels,Object.defineProperty(de[In],"channels",{value:pQ}),Object.defineProperty(de[In],"labels",{value:mQ})}var pQ,mQ,In;de.rgb.hsl=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.min(e,r,n),s=Math.max(e,r,n),o=s-i,u,a,c;return s===i?u=0:e===s?u=(r-n)/o:r===s?u=2+(n-e)/o:n===s&&(u=4+(e-r)/o),u=Math.min(u*60,360),u<0&&(u+=360),c=(i+s)/2,s===i?a=0:c<=.5?a=o/(s+i):a=o/(2-s-i),[u,a*100,c*100]};de.rgb.hsv=function(t){var e,r,n,i,s,o=t[0]/255,u=t[1]/255,a=t[2]/255,c=Math.max(o,u,a),l=c-Math.min(o,u,a),h=function(d){return(c-d)/6/l+1/2};return l===0?i=s=0:(s=l/c,e=h(o),r=h(u),n=h(a),o===c?i=n-r:u===c?i=1/3+e-n:a===c&&(i=2/3+r-e),i<0?i+=1:i>1&&(i-=1)),[i*360,s*100,c*100]};de.rgb.hwb=function(t){var e=t[0],r=t[1],n=t[2],i=de.rgb.hsl(t)[0],s=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[i,s*100,n*100]};de.rgb.cmyk=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i,s,o,u;return u=Math.min(1-e,1-r,1-n),i=(1-e-u)/(1-u)||0,s=(1-r-u)/(1-u)||0,o=(1-n-u)/(1-u)||0,[i*100,s*100,o*100,u*100]};function gCe(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2)}de.rgb.keyword=function(t){var e=yQ[t];if(e)return e;var r=1/0,n;for(var i in Kc)if(Kc.hasOwnProperty(i)){var s=Kc[i],o=gCe(t,s);o<r&&(r=o,n=i)}return n};de.keyword.rgb=function(t){return Kc[t]};de.rgb.xyz=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255;e=e>.04045?Math.pow((e+.055)/1.055,2.4):e/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92;var i=e*.4124+r*.3576+n*.1805,s=e*.2126+r*.7152+n*.0722,o=e*.0193+r*.1192+n*.9505;return[i*100,s*100,o*100]};de.rgb.lab=function(t){var e=de.rgb.xyz(t),r=e[0],n=e[1],i=e[2],s,o,u;return r/=95.047,n/=100,i/=108.883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,s=116*n-16,o=500*(r-n),u=200*(n-i),[s,o,u]};de.hsl.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100,i,s,o,u,a;if(r===0)return a=n*255,[a,a,a];n<.5?s=n*(1+r):s=n+r-n*r,i=2*n-s,u=[0,0,0];for(var c=0;c<3;c++)o=e+1/3*-(c-1),o<0&&o++,o>1&&o--,6*o<1?a=i+(s-i)*6*o:2*o<1?a=s:3*o<2?a=i+(s-i)*(2/3-o)*6:a=i,u[c]=a*255;return u};de.hsl.hsv=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,i=r,s=Math.max(n,.01),o,u;return n*=2,r*=n<=1?n:2-n,i*=s<=1?s:2-s,u=(n+r)/2,o=n===0?2*i/(s+i):2*r/(n+r),[e,o*100,u*100]};de.hsv.rgb=function(t){var e=t[0]/60,r=t[1]/100,n=t[2]/100,i=Math.floor(e)%6,s=e-Math.floor(e),o=255*n*(1-r),u=255*n*(1-r*s),a=255*n*(1-r*(1-s));switch(n*=255,i){case 0:return[n,a,o];case 1:return[u,n,o];case 2:return[o,n,a];case 3:return[o,u,n];case 4:return[a,o,n];case 5:return[n,o,u]}};de.hsv.hsl=function(t){var e=t[0],r=t[1]/100,n=t[2]/100,i=Math.max(n,.01),s,o,u;return u=(2-r)*n,s=(2-r)*i,o=r*i,o/=s<=1?s:2-s,o=o||0,u/=2,[e,o*100,u*100]};de.hwb.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100,i=r+n,s,o,u,a;i>1&&(r/=i,n/=i),s=Math.floor(6*e),o=1-n,u=6*e-s,s&1&&(u=1-u),a=r+u*(o-r);var c,l,h;switch(s){default:case 6:case 0:c=o,l=a,h=r;break;case 1:c=a,l=o,h=r;break;case 2:c=r,l=o,h=a;break;case 3:c=r,l=a,h=o;break;case 4:c=a,l=r,h=o;break;case 5:c=o,l=r,h=a;break}return[c*255,l*255,h*255]};de.cmyk.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,i=t[3]/100,s,o,u;return s=1-Math.min(1,e*(1-i)+i),o=1-Math.min(1,r*(1-i)+i),u=1-Math.min(1,n*(1-i)+i),[s*255,o*255,u*255]};de.xyz.rgb=function(t){var e=t[0]/100,r=t[1]/100,n=t[2]/100,i,s,o;return i=e*3.2406+r*-1.5372+n*-.4986,s=e*-.9689+r*1.8758+n*.0415,o=e*.0557+r*-.204+n*1.057,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*12.92,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o*12.92,i=Math.min(Math.max(0,i),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[i*255,s*255,o*255]};de.xyz.lab=function(t){var e=t[0],r=t[1],n=t[2],i,s,o;return e/=95.047,r/=100,n/=108.883,e=e>.008856?Math.pow(e,1/3):7.787*e+16/116,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,n=n>.008856?Math.pow(n,1/3):7.787*n+16/116,i=116*r-16,s=500*(e-r),o=200*(r-n),[i,s,o]};de.lab.xyz=function(t){var e=t[0],r=t[1],n=t[2],i,s,o;s=(e+16)/116,i=r/500+s,o=s-n/200;var u=Math.pow(s,3),a=Math.pow(i,3),c=Math.pow(o,3);return s=u>.008856?u:(s-16/116)/7.787,i=a>.008856?a:(i-16/116)/7.787,o=c>.008856?c:(o-16/116)/7.787,i*=95.047,s*=100,o*=108.883,[i,s,o]};de.lab.lch=function(t){var e=t[0],r=t[1],n=t[2],i,s,o;return i=Math.atan2(n,r),s=i*360/2/Math.PI,s<0&&(s+=360),o=Math.sqrt(r*r+n*n),[e,o,s]};de.lch.lab=function(t){var e=t[0],r=t[1],n=t[2],i,s,o;return o=n/360*2*Math.PI,i=r*Math.cos(o),s=r*Math.sin(o),[e,i,s]};de.rgb.ansi16=function(t){var e=t[0],r=t[1],n=t[2],i=1 in arguments?arguments[1]:de.rgb.hsv(t)[2];if(i=Math.round(i/50),i===0)return 30;var s=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(e/255));return i===2&&(s+=60),s};de.hsv.ansi16=function(t){return de.rgb.ansi16(de.hsv.rgb(t),t[2])};de.rgb.ansi256=function(t){var e=t[0],r=t[1],n=t[2];if(e===r&&r===n)return e<8?16:e>248?231:Math.round((e-8)/247*24)+232;var i=16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5);return i};de.ansi16.rgb=function(t){var e=t%10;if(e===0||e===7)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];var r=(~~(t>50)+1)*.5,n=(e&1)*r*255,i=(e>>1&1)*r*255,s=(e>>2&1)*r*255;return[n,i,s]};de.ansi256.rgb=function(t){if(t>=232){var e=(t-232)*10+8;return[e,e,e]}t-=16;var r,n=Math.floor(t/36)/5*255,i=Math.floor((r=t%36)/6)/5*255,s=r%6/5*255;return[n,i,s]};de.rgb.hex=function(t){var e=((Math.round(t[0])&255)<<16)+((Math.round(t[1])&255)<<8)+(Math.round(t[2])&255),r=e.toString(16).toUpperCase();return"000000".substring(r.length)+r};de.hex.rgb=function(t){var e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];var r=e[0];e[0].length===3&&(r=r.split("").map(function(u){return u+u}).join(""));var n=parseInt(r,16),i=n>>16&255,s=n>>8&255,o=n&255;return[i,s,o]};de.rgb.hcg=function(t){var e=t[0]/255,r=t[1]/255,n=t[2]/255,i=Math.max(Math.max(e,r),n),s=Math.min(Math.min(e,r),n),o=i-s,u,a;return o<1?u=s/(1-o):u=0,o<=0?a=0:i===e?a=(r-n)/o%6:i===r?a=2+(n-e)/o:a=4+(e-r)/o+4,a/=6,a%=1,[a*360,o*100,u*100]};de.hsl.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1,i=0;return r<.5?n=2*e*r:n=2*e*(1-r),n<1&&(i=(r-.5*n)/(1-n)),[t[0],n*100,i*100]};de.hsv.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=e*r,i=0;return n<1&&(i=(r-n)/(1-n)),[t[0],n*100,i*100]};de.hcg.rgb=function(t){var e=t[0]/360,r=t[1]/100,n=t[2]/100;if(r===0)return[n*255,n*255,n*255];var i=[0,0,0],s=e%1*6,o=s%1,u=1-o,a=0;switch(Math.floor(s)){case 0:i[0]=1,i[1]=o,i[2]=0;break;case 1:i[0]=u,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=o;break;case 3:i[0]=0,i[1]=u,i[2]=1;break;case 4:i[0]=o,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=u}return a=(1-r)*n,[(r*i[0]+a)*255,(r*i[1]+a)*255,(r*i[2]+a)*255]};de.hcg.hsv=function(t){var e=t[1]/100,r=t[2]/100,n=e+r*(1-e),i=0;return n>0&&(i=e/n),[t[0],i*100,n*100]};de.hcg.hsl=function(t){var e=t[1]/100,r=t[2]/100,n=r*(1-e)+.5*e,i=0;return n>0&&n<.5?i=e/(2*n):n>=.5&&n<1&&(i=e/(2*(1-n))),[t[0],i*100,n*100]};de.hcg.hwb=function(t){var e=t[1]/100,r=t[2]/100,n=e+r*(1-e);return[t[0],(n-e)*100,(1-n)*100]};de.hwb.hcg=function(t){var e=t[1]/100,r=t[2]/100,n=1-r,i=n-e,s=0;return i<1&&(s=(n-i)/(1-i)),[t[0],i*100,s*100]};de.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]};de.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]};de.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]};de.gray.hsl=de.gray.hsv=function(t){return[0,0,t[0]]};de.gray.hwb=function(t){return[0,100,t[0]]};de.gray.cmyk=function(t){return[0,0,0,t[0]]};de.gray.lab=function(t){return[t[0],0,0]};de.gray.hex=function(t){var e=Math.round(t[0]/100*255)&255,r=(e<<16)+(e<<8)+e,n=r.toString(16).toUpperCase();return"000000".substring(n.length)+n};de.rgb.gray=function(t){var e=(t[0]+t[1]+t[2])/3;return[e/255*100]}});var EQ=y((lVe,_Q)=>{f();var i3=W7();function _Ce(){for(var t={},e=Object.keys(i3),r=e.length,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}function ECe(t){var e=_Ce(),r=[t];for(e[t].distance=0;r.length;)for(var n=r.pop(),i=Object.keys(i3[n]),s=i.length,o=0;o<s;o++){var u=i[o],a=e[u];a.distance===-1&&(a.distance=e[n].distance+1,a.parent=n,r.unshift(u))}return e}function ACe(t,e){return function(r){return e(t(r))}}function wCe(t,e){for(var r=[e[t].parent,t],n=i3[e[t].parent][t],i=e[t].parent;e[i].parent;)r.unshift(e[i].parent),n=ACe(i3[e[i].parent][i],n),i=e[i].parent;return n.conversion=r,n}_Q.exports=function(t){for(var e=ECe(t),r={},n=Object.keys(e),i=n.length,s=0;s<i;s++){var o=n[s],u=e[o];u.parent!==null&&(r[o]=wCe(o,e))}return r}});var wQ=y((hVe,AQ)=>{f();var H7=W7(),SCe=EQ(),Of={},bCe=Object.keys(H7);function OCe(t){var e=function(r){return r==null?r:(arguments.length>1&&(r=Array.prototype.slice.call(arguments)),t(r))};return"conversion"in t&&(e.conversion=t.conversion),e}function CCe(t){var e=function(r){if(r==null)return r;arguments.length>1&&(r=Array.prototype.slice.call(arguments));var n=t(r);if(typeof n=="object")for(var i=n.length,s=0;s<i;s++)n[s]=Math.round(n[s]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}bCe.forEach(function(t){Of[t]={},Object.defineProperty(Of[t],"channels",{value:H7[t].channels}),Object.defineProperty(Of[t],"labels",{value:H7[t].labels});var e=SCe(t),r=Object.keys(e);r.forEach(function(n){var i=e[n];Of[t][n]=CCe(i),Of[t][n].raw=OCe(i)})});AQ.exports=Of});var OQ=y((pVe,bQ)=>{"use strict";f();var Ep=fQ(),bi=wQ(),Y7=[].slice,SQ=["keyword","gray","hex"],G7={};Object.keys(bi).forEach(function(t){G7[Y7.call(bi[t].labels).sort().join("")]=t});var s3={};function Wr(t,e){if(!(this instanceof Wr))return new Wr(t,e);if(e&&e in SQ&&(e=null),e&&!(e in bi))throw new Error("Unknown model: "+e);var r,n;if(t==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(t instanceof Wr)this.model=t.model,this.color=t.color.slice(),this.valpha=t.valpha;else if(typeof t=="string"){var i=Ep.get(t);if(i===null)throw new Error("Unable to parse color from string: "+t);this.model=i.model,n=bi[this.model].channels,this.color=i.value.slice(0,n),this.valpha=typeof i.value[n]=="number"?i.value[n]:1}else if(t.length){this.model=e||"rgb",n=bi[this.model].channels;var s=Y7.call(t,0,n);this.color=K7(s,n),this.valpha=typeof t[n]=="number"?t[n]:1}else if(typeof t=="number")t&=16777215,this.model="rgb",this.color=[t>>16&255,t>>8&255,t&255],this.valpha=1;else{this.valpha=1;var o=Object.keys(t);"alpha"in t&&(o.splice(o.indexOf("alpha"),1),this.valpha=typeof t.alpha=="number"?t.alpha:0);var u=o.sort().join("");if(!(u in G7))throw new Error("Unable to parse color from object: "+JSON.stringify(t));this.model=G7[u];var a=bi[this.model].labels,c=[];for(r=0;r<a.length;r++)c.push(t[a[r]]);this.color=K7(c)}if(s3[this.model])for(n=bi[this.model].channels,r=0;r<n;r++){var l=s3[this.model][r];l&&(this.color[r]=l(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}Wr.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(t){var e=this.model in Ep.to?this:this.rgb();e=e.round(typeof t=="number"?t:1);var r=e.valpha===1?e.color:e.color.concat(this.valpha);return Ep.to[e.model](r)},percentString:function(t){var e=this.rgb().round(typeof t=="number"?t:1),r=e.valpha===1?e.color:e.color.concat(this.valpha);return Ep.to.rgb.percent(r)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var t={},e=bi[this.model].channels,r=bi[this.model].labels,n=0;n<e;n++)t[r[n]]=this.color[n];return this.valpha!==1&&(t.alpha=this.valpha),t},unitArray:function(){var t=this.rgb().color;return t[0]/=255,t[1]/=255,t[2]/=255,this.valpha!==1&&t.push(this.valpha),t},unitObject:function(){var t=this.rgb().object();return t.r/=255,t.g/=255,t.b/=255,this.valpha!==1&&(t.alpha=this.valpha),t},round:function(t){return t=Math.max(t||0,0),new Wr(this.color.map(DCe(t)).concat(this.valpha),this.model)},alpha:function(t){return arguments.length?new Wr(this.color.concat(Math.max(0,Math.min(1,t))),this.model):this.valpha},red:Qt("rgb",0,gr(255)),green:Qt("rgb",1,gr(255)),blue:Qt("rgb",2,gr(255)),hue:Qt(["hsl","hsv","hsl","hwb","hcg"],0,function(t){return(t%360+360)%360}),saturationl:Qt("hsl",1,gr(100)),lightness:Qt("hsl",2,gr(100)),saturationv:Qt("hsv",1,gr(100)),value:Qt("hsv",2,gr(100)),chroma:Qt("hcg",1,gr(100)),gray:Qt("hcg",2,gr(100)),white:Qt("hwb",1,gr(100)),wblack:Qt("hwb",2,gr(100)),cyan:Qt("cmyk",0,gr(100)),magenta:Qt("cmyk",1,gr(100)),yellow:Qt("cmyk",2,gr(100)),black:Qt("cmyk",3,gr(100)),x:Qt("xyz",0,gr(100)),y:Qt("xyz",1,gr(100)),z:Qt("xyz",2,gr(100)),l:Qt("lab",0,gr(100)),a:Qt("lab",1),b:Qt("lab",2),keyword:function(t){return arguments.length?new Wr(t):bi[this.model].keyword(this.color)},hex:function(t){return arguments.length?new Wr(t):Ep.to.hex(this.rgb().round().color)},rgbNumber:function(){var t=this.rgb().color;return(t[0]&255)<<16|(t[1]&255)<<8|t[2]&255},luminosity:function(){for(var t=this.rgb().color,e=[],r=0;r<t.length;r++){var n=t[r]/255;e[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return .2126*e[0]+.7152*e[1]+.0722*e[2]},contrast:function(t){var e=this.luminosity(),r=t.luminosity();return e>r?(e+.05)/(r+.05):(r+.05)/(e+.05)},level:function(t){var e=this.contrast(t);return e>=7.1?"AAA":e>=4.5?"AA":""},isDark:function(){var t=this.rgb().color,e=(t[0]*299+t[1]*587+t[2]*114)/1e3;return e<128},isLight:function(){return!this.isDark()},negate:function(){for(var t=this.rgb(),e=0;e<3;e++)t.color[e]=255-t.color[e];return t},lighten:function(t){var e=this.hsl();return e.color[2]+=e.color[2]*t,e},darken:function(t){var e=this.hsl();return e.color[2]-=e.color[2]*t,e},saturate:function(t){var e=this.hsl();return e.color[1]+=e.color[1]*t,e},desaturate:function(t){var e=this.hsl();return e.color[1]-=e.color[1]*t,e},whiten:function(t){var e=this.hwb();return e.color[1]+=e.color[1]*t,e},blacken:function(t){var e=this.hwb();return e.color[2]+=e.color[2]*t,e},grayscale:function(){var t=this.rgb().color,e=t[0]*.3+t[1]*.59+t[2]*.11;return Wr.rgb(e,e,e)},fade:function(t){return this.alpha(this.valpha-this.valpha*t)},opaquer:function(t){return this.alpha(this.valpha+this.valpha*t)},rotate:function(t){var e=this.hsl(),r=e.color[0];return r=(r+t)%360,r=r<0?360+r:r,e.color[0]=r,e},mix:function(t,e){if(!t||!t.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof t);var r=t.rgb(),n=this.rgb(),i=e===void 0?.5:e,s=2*i-1,o=r.alpha()-n.alpha(),u=((s*o===-1?s:(s+o)/(1+s*o))+1)/2,a=1-u;return Wr.rgb(u*r.red()+a*n.red(),u*r.green()+a*n.green(),u*r.blue()+a*n.blue(),r.alpha()*i+n.alpha()*(1-i))}};Object.keys(bi).forEach(function(t){if(SQ.indexOf(t)===-1){var e=bi[t].channels;Wr.prototype[t]=function(){if(this.model===t)return new Wr(this);if(arguments.length)return new Wr(arguments,t);var r=typeof arguments[e]=="number"?e:this.valpha;return new Wr(MCe(bi[this.model][t].raw(this.color)).concat(r),t)},Wr[t]=function(r){return typeof r=="number"&&(r=K7(Y7.call(arguments),e)),new Wr(r,t)}}});function TCe(t,e){return Number(t.toFixed(e))}function DCe(t){return function(e){return TCe(e,t)}}function Qt(t,e,r){return t=Array.isArray(t)?t:[t],t.forEach(function(n){(s3[n]||(s3[n]=[]))[e]=r}),t=t[0],function(n){var i;return arguments.length?(r&&(n=r(n)),i=this[t](),i.color[e]=n,i):(i=this[t]().color[e],r&&(i=r(i)),i)}}function gr(t){return function(e){return Math.max(0,Math.min(t,e))}}function MCe(t){return Array.isArray(t)?t:[t]}function K7(t,e){for(var r=0;r<e;r++)typeof t[r]!="number"&&(t[r]=0);return t}bQ.exports=Wr});var TQ=y((yVe,CQ)=>{"use strict";f();CQ.exports=function(e){for(var r=0,n=0;r<e.length;n=e.charCodeAt(r++)+((n<<5)-n));var i=Math.floor(Math.abs(Math.sin(n)*1e4%1*16777216)).toString(16);return"#"+Array(6-i.length+1).join("0")+i}});var BQ=y((_Ve,vQ)=>{"use strict";f();var DQ=OQ(),MQ=TQ();vQ.exports=function(e,r){var n=e.split(r||":"),i=MQ(n[0]);if(!n.length)return i;for(var s=0,o=n.length-1;s<o;s++)i=DQ(i).mix(DQ(MQ(n[s+1]))).saturate(1).hex();return i}});var PQ=y((AVe,IQ)=>{"use strict";f();function Vs(t,e){if(e)return new Vs(t).style(e);if(!(this instanceof Vs))return new Vs(t);this.text=t}Vs.prototype.prefix="\x1B[";Vs.prototype.suffix="m";Vs.prototype.hex=function(e){e=e[0]==="#"?e.substring(1):e,e.length===3&&(e=e.split(""),e[5]=e[2],e[4]=e[2],e[3]=e[1],e[2]=e[1],e[1]=e[0],e=e.join(""));var r=e.substring(0,2),n=e.substring(2,4),i=e.substring(4,6);return[parseInt(r,16),parseInt(n,16),parseInt(i,16)]};Vs.prototype.rgb=function(e,r,n){var i=e/255*5,s=r/255*5,o=n/255*5;return this.ansi(i,s,o)};Vs.prototype.ansi=function(e,r,n){var i=Math.round(e),s=Math.round(r),o=Math.round(n);return 16+i*36+s*6+o};Vs.prototype.reset=function(){return this.prefix+"39;49"+this.suffix};Vs.prototype.style=function(e){return this.prefix+"38;5;"+this.rgb.apply(this,this.hex(e))+this.suffix+this.text+this.reset()};IQ.exports=Vs});var RQ=y((SVe,NQ)=>{f();var vCe=BQ(),BCe=PQ();NQ.exports=function(e,r){var n=r.namespace,i=r.colors!==!1?BCe(n+":",vCe(n)):n+":";return e[0]=i+" "+e[0],e}});var FQ=y((OVe,xQ)=>{"use strict";f();xQ.exports=function(e,r){if(!r)return!1;for(var n=r.split(/[\s,]+/),i=0;i<n.length;i++){if(r=n[i].replace("*",".*?"),r.charAt(0)==="-"){if(new RegExp("^"+r.substr(1)+"$").test(e))return!1;continue}if(new RegExp("^"+r+"$").test(e))return!0}return!1}});var kQ=y((TVe,$Q)=>{f();var ICe=FQ();$Q.exports=function(e){return function(n){try{return ICe(n,e())}catch{}return!1}}});var LQ=y((MVe,qQ)=>{f();var PCe=kQ();qQ.exports=PCe(function(){return process.env.DEBUG||process.env.DIAGNOSTICS})});var UQ=y((BVe,jQ)=>{f();jQ.exports=function(t,e){try{Function.prototype.apply.call(console.log,console,e)}catch{}}});var zQ=y((PVe,VQ)=>{f();var NCe=z7(),RCe=require("tty").isatty(1),o3=NCe(function t(e,r){return r=r||{},r.colors="colors"in r?r.colors:RCe,r.namespace=e,r.prod=!1,r.dev=!0,!t.enabled(e)&&!(r.force||t.force)?t.nope(r):t.yep(r)});o3.modify(RQ());o3.use(LQ());o3.set(UQ());VQ.exports=o3});var Ap=y((RVe,Q7)=>{f();process.env.NODE_ENV==="production"?Q7.exports=eQ():Q7.exports=zQ()});var HQ=y((FVe,WQ)=>{"use strict";f();var J7=require("fs"),{StringDecoder:xCe}=require("string_decoder"),{Stream:FCe}=Gc();function $Ce(){}WQ.exports=(t,e)=>{let r=Buffer.alloc(65536),n=new xCe("utf8"),i=new FCe,s="",o=0,u=0;return t.start===-1&&delete t.start,i.readable=!0,i.destroy=()=>{i.destroyed=!0,i.emit("end"),i.emit("close")},J7.open(t.file,"a+","0644",(a,c)=>{if(a){e?e(a):i.emit("error",a),i.destroy();return}(function l(){if(i.destroyed){J7.close(c,$Ce);return}return J7.read(c,r,0,r.length,o,(h,d)=>{if(h){e?e(h):i.emit("error",h),i.destroy();return}if(!d)return s&&((t.start==null||u>t.start)&&(e?e(null,s):i.emit("line",s)),u++,s=""),setTimeout(l,1e3);let p=n.write(r.slice(0,d));e||i.emit("data",p),p=(s+p).split(/\n+/);let m=p.length-1,g=0;for(;g<m;g++)(t.start==null||u>t.start)&&(e?e(null,p[g]):i.emit("line",p[g])),u++;return s=p[m],o+=d,l()})})()}),e?i.destroy:i}});var QQ=y((qVe,YQ)=>{"use strict";f();var ii=require("fs"),Ir=require("path"),GQ=LY(),kCe=require("zlib"),{MESSAGE:qCe}=fr(),{Stream:LCe,PassThrough:KQ}=Gc(),jCe=Wc(),zs=Ap()("winston:file"),UCe=require("os"),VCe=HQ();YQ.exports=class extends jCe{constructor(e={}){super(e),this.name=e.name||"file";function r(n,...i){i.slice(1).forEach(s=>{if(e[s])throw new Error(`Cannot set ${s} and ${n} together`)})}if(this._stream=new KQ,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),e.filename||e.dirname)r("filename or dirname","stream"),this._basename=this.filename=e.filename?Ir.basename(e.filename):"winston.log",this.dirname=e.dirname||Ir.dirname(e.filename),this.options=e.options||{flags:"a"};else if(e.stream)console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),r("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(e.stream)),this.dirname=Ir.dirname(this._dest.path);else throw new Error("Cannot log to file without filename or stream.");this.maxsize=e.maxsize||null,this.rotationFormat=e.rotationFormat||!1,this.zippedArchive=e.zippedArchive||!1,this.maxFiles=e.maxFiles||null,this.eol=typeof e.eol=="string"?e.eol:UCe.EOL,this.tailable=e.tailable||!1,this.lazy=e.lazy||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this._fileExist=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.lazy||this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",()=>{this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())}):(this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())))}log(e,r=()=>{}){if(this.silent)return r(),!0;if(this._drain){this._stream.once("drain",()=>{this._drain=!1,this.log(e,r)});return}if(this._rotate){this._stream.once("rotate",()=>{this._rotate=!1,this.log(e,r)});return}if(this.lazy){if(!this._fileExist){this._opening||this.open(),this.once("open",()=>{this._fileExist=!0,this.log(e,r)});return}if(this._needsNewFile(this._pendingSize)){this._dest.once("close",()=>{this._opening||this.open(),this.once("open",()=>{this.log(e,r)})});return}}let n=`${e[qCe]}${this.eol}`,i=Buffer.byteLength(n);function s(){if(this._size+=i,this._pendingSize-=i,zs("logged %s %s",this._size,n),this.emit("logged",e),!this._rotate&&!this._opening&&this._needsNewFile()){if(this.lazy){this._endStream(()=>{this.emit("fileclosed")});return}this._rotate=!0,this._endStream(()=>this._rotateFile())}}this._pendingSize+=i,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);let o=this._stream.write(n,s.bind(this));return o?r():(this._drain=!0,this._stream.once("drain",()=>{this._drain=!1,r()})),zs("written",o,this._drain),this.finishIfEnding(),o}query(e,r){typeof e=="function"&&(r=e,e={}),e=h(e);let n=Ir.join(this.dirname,this.filename),i="",s=[],o=0,u=ii.createReadStream(n,{encoding:"utf8"});u.on("error",d=>{if(u.readable&&u.destroy(),!!r)return d.code!=="ENOENT"?r(d):r(null,s)}),u.on("data",d=>{d=(i+d).split(/\n+/);let p=d.length-1,m=0;for(;m<p;m++)(!e.start||o>=e.start)&&a(d[m]),o++;i=d[p]}),u.on("close",()=>{i&&a(i,!0),e.order==="desc"&&(s=s.reverse()),r&&r(null,s)});function a(d,p){try{let m=JSON.parse(d);l(m)&&c(m)}catch(m){p||u.emit("error",m)}}function c(d){if(e.rows&&s.length>=e.rows&&e.order!=="desc"){u.readable&&u.destroy();return}e.fields&&(d=e.fields.reduce((p,m)=>(p[m]=d[m],p),{})),e.order==="desc"&&s.length>=e.rows&&s.shift(),s.push(d)}function l(d){if(!d||typeof d!="object")return;let p=new Date(d.timestamp);if(!(e.from&&p<e.from||e.until&&p>e.until||e.level&&e.level!==d.level))return!0}function h(d){return d=d||{},d.rows=d.rows||d.limit||10,d.start=d.start||0,d.until=d.until||new Date,typeof d.until!="object"&&(d.until=new Date(d.until)),d.from=d.from||d.until-24*60*60*1e3,typeof d.from!="object"&&(d.from=new Date(d.from)),d.order=d.order||"desc",d}}stream(e={}){let r=Ir.join(this.dirname,this.filename),n=new LCe,i={file:r,start:e.start};return n.destroy=VCe(i,(s,o)=>{if(s)return n.emit("error",s);try{n.emit("data",o),o=JSON.parse(o),n.emit("log",o)}catch(u){n.emit("error",u)}}),n}open(){this.filename&&(this._opening||(this._opening=!0,this.stat((e,r)=>{if(e)return this.emit("error",e);zs("stat done: %s { size: %s }",this.filename,r),this._size=r,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",()=>{this._stream.emit("rotate")||(this._rotate=!1)})})))}stat(e){let r=this._getFile(),n=Ir.join(this.dirname,r);ii.stat(n,(i,s)=>{if(i&&i.code==="ENOENT")return zs("ENOENT\xA0ok",n),this.filename=r,e(null,0);if(i)return zs(`err ${i.code} ${n}`),e(i);if(!s||this._needsNewFile(s.size))return this._incFile(()=>this.stat(e));this.filename=r,e(null,s.size)})}close(e){this._stream&&this._stream.end(()=>{e&&e(),this.emit("flush"),this.emit("closed")})}_needsNewFile(e){return e=e||this._size,this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){return e.on("error",this._onError),e}_cleanupStream(e){return e.removeListener("error",this._onError),e.destroy(),e}_rotateFile(){this._incFile(()=>this.open())}_endStream(e=()=>{}){this._dest?(this._stream.unpipe(this._dest),this._dest.end(()=>{this._cleanupStream(this._dest),e()})):e()}_createStream(e){let r=Ir.join(this.dirname,this.filename);zs("create stream start",r,this.options);let n=ii.createWriteStream(r,this.options).on("error",i=>zs(i)).on("close",()=>zs("close",n.path,n.bytesWritten)).on("open",()=>{zs("file open ok",r),this.emit("open",r),e.pipe(n),this.rotatedWhileOpening&&(this._stream=new KQ,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(n),e.end())});return zs("create stream ok",r),n}_incFile(e){zs("_incFile",this.filename);let r=Ir.extname(this._basename),n=Ir.basename(this._basename,r),i=[];this.zippedArchive&&i.push(function(s){let o=this._created>0&&!this.tailable?this._created:"";this._compressFile(Ir.join(this.dirname,`${n}${o}${r}`),Ir.join(this.dirname,`${n}${o}${r}.gz`),s)}.bind(this)),i.push(function(s){this.tailable?this._checkMaxFilesTailable(r,n,s):(this._created+=1,this._checkMaxFilesIncrementing(r,n,s))}.bind(this)),GQ(i,e)}_getFile(){let e=Ir.extname(this._basename),r=Ir.basename(this._basename,e),n=this.rotationFormat?this.rotationFormat():this._created;return!this.tailable&&this._created?`${r}${n}${e}`:`${r}${e}`}_checkMaxFilesIncrementing(e,r,n){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(n);let i=this._created-this.maxFiles,s=i!==0?i:"",o=this.zippedArchive?".gz":"",u=`${r}${s}${e}${o}`,a=Ir.join(this.dirname,u);ii.unlink(a,n)}_checkMaxFilesTailable(e,r,n){let i=[];if(!this.maxFiles)return;let s=this.zippedArchive?".gz":"";for(let o=this.maxFiles-1;o>1;o--)i.push(function(u,a){let c=`${r}${u-1}${e}${s}`,l=Ir.join(this.dirname,c);ii.exists(l,h=>{if(!h)return a(null);c=`${r}${u}${e}${s}`,ii.rename(l,Ir.join(this.dirname,c),a)})}.bind(this,o));GQ(i,()=>{ii.rename(Ir.join(this.dirname,`${r}${e}${s}`),Ir.join(this.dirname,`${r}1${e}${s}`),n)})}_compressFile(e,r,n){ii.access(e,ii.F_OK,i=>{if(i)return n();var s=kCe.createGzip(),o=ii.createReadStream(e),u=ii.createWriteStream(r);u.on("finish",()=>{ii.unlink(e,n)}),o.pipe(s).pipe(u)})}_createLogDirIfNotExist(e){ii.existsSync(e)||ii.mkdirSync(e,{recursive:!0})}}});var XQ=y((UVe,JQ)=>{"use strict";f();var zCe=require("http"),WCe=require("https"),{Stream:HCe}=Gc(),GCe=Wc(),{configure:KCe}=tp();JQ.exports=class extends GCe{constructor(e={}){super(e),this.options=e,this.name=e.name||"http",this.ssl=!!e.ssl,this.host=e.host||"localhost",this.port=e.port,this.auth=e.auth,this.path=e.path||"",this.maximumDepth=e.maximumDepth,this.agent=e.agent,this.headers=e.headers||{},this.headers["content-type"]="application/json",this.batch=e.batch||!1,this.batchInterval=e.batchInterval||5e3,this.batchCount=e.batchCount||10,this.batchOptions=[],this.batchTimeoutID=-1,this.batchCallback={},this.port||(this.port=this.ssl?443:80)}log(e,r){this._request(e,null,null,(n,i)=>{i&&i.statusCode!==200&&(n=new Error(`Invalid HTTP Status Code: ${i.statusCode}`)),n?this.emit("warn",n):this.emit("logged",e)}),r&&setImmediate(r)}query(e,r){typeof e=="function"&&(r=e,e={}),e={method:"query",params:this.normalizeQuery(e)};let n=e.params.auth||null;delete e.params.auth;let i=e.params.path||null;delete e.params.path,this._request(e,n,i,(s,o,u)=>{if(o&&o.statusCode!==200&&(s=new Error(`Invalid HTTP Status Code: ${o.statusCode}`)),s)return r(s);if(typeof u=="string")try{u=JSON.parse(u)}catch(a){return r(a)}r(null,u)})}stream(e={}){let r=new HCe;e={method:"stream",params:e};let n=e.params.path||null;delete e.params.path;let i=e.params.auth||null;delete e.params.auth;let s="",o=this._request(e,i,n);return r.destroy=()=>o.destroy(),o.on("data",u=>{u=(s+u).split(/\n+/);let a=u.length-1,c=0;for(;c<a;c++)try{r.emit("log",JSON.parse(u[c]))}catch(l){r.emit("error",l)}s=u[a]}),o.on("error",u=>r.emit("error",u)),r}_request(e,r,n,i){e=e||{},r=r||this.auth,n=n||this.path||"",this.batch?this._doBatch(e,i,r,n):this._doRequest(e,i,r,n)}_doBatch(e,r,n,i){if(this.batchOptions.push(e),this.batchOptions.length===1){let s=this;this.batchCallback=r,this.batchTimeoutID=setTimeout(function(){s.batchTimeoutID=-1,s._doBatchRequest(s.batchCallback,n,i)},this.batchInterval)}this.batchOptions.length===this.batchCount&&this._doBatchRequest(this.batchCallback,n,i)}_doBatchRequest(e,r,n){this.batchTimeoutID>0&&(clearTimeout(this.batchTimeoutID),this.batchTimeoutID=-1);let i=this.batchOptions.slice();this.batchOptions=[],this._doRequest(i,e,r,n)}_doRequest(e,r,n,i){let s=Object.assign({},this.headers);n&&n.bearer&&(s.Authorization=`Bearer ${n.bearer}`);let o=(this.ssl?WCe:zCe).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${i.replace(/^\//,"")}`,headers:s,auth:n&&n.username&&n.password?`${n.username}:${n.password}`:"",agent:this.agent});o.on("error",r),o.on("response",a=>a.on("end",()=>r(null,a)).resume());let u=KCe({...this.maximumDepth&&{maximumDepth:this.maximumDepth}});o.end(Buffer.from(u(e,this.options.replacer),"utf8"))}}});var X7=y((zVe,ZQ)=>{"use strict";f();var Eo=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";Eo.writable=t=>Eo(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";Eo.readable=t=>Eo(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";Eo.duplex=t=>Eo.writable(t)&&Eo.readable(t);Eo.transform=t=>Eo.duplex(t)&&typeof t._transform=="function";ZQ.exports=Eo});var tJ=y((GVe,eJ)=>{"use strict";f();var YCe=X7(),{MESSAGE:QCe}=fr(),JCe=require("os"),XCe=Wc();eJ.exports=class extends XCe{constructor(e={}){if(super(e),!e.stream||!YCe(e.stream))throw new Error("options.stream is required.");this._stream=e.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=e.stream._writableState.objectMode,this.eol=typeof e.eol=="string"?e.eol:JCe.EOL}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.isObjectMode){this._stream.write(e),r&&r();return}this._stream.write(`${e[QCe]}${this.eol}`),r&&r()}}});var rJ=y(wp=>{"use strict";f();Object.defineProperty(wp,"Console",{configurable:!0,enumerable:!0,get(){return iY()}});Object.defineProperty(wp,"File",{configurable:!0,enumerable:!0,get(){return QQ()}});Object.defineProperty(wp,"Http",{configurable:!0,enumerable:!0,get(){return XQ()}});Object.defineProperty(wp,"Stream",{configurable:!0,enumerable:!0,get(){return tJ()}})});var a3=y(Sp=>{"use strict";f();var u3=X8(),{configs:Z7}=fr();Sp.cli=u3.levels(Z7.cli);Sp.npm=u3.levels(Z7.npm);Sp.syslog=u3.levels(Z7.syslog);Sp.addColors=u3.levels});var iJ=y((c3,nJ)=>{"use strict";f();Object.defineProperty(c3,"__esModule",{value:!0});var ZCe=$E(),e9e=Yc(ZCe),t9e=GE(),r9e=Yc(t9e),n9e=x7(),i9e=Yc(n9e),s9e=P7(),o9e=Yc(s9e),u9e=N7(),a9e=Yc(u9e),c9e=Hc(),l9e=Yc(c9e),f9e=Sf(),h9e=Yc(f9e);function Yc(t){return t&&t.__esModule?t:{default:t}}function d9e(t,e,r){r=(0,o9e.default)(r);var n=0,i=0,{length:s}=t,o=!1;s===0&&r(null);function u(a,c){a===!1&&(o=!0),o!==!0&&(a?r(a):(++i===s||c===r9e.default)&&r(null))}for(;n<s;n++)e(t[n],n,(0,a9e.default)(u))}function p9e(t,e,r){return(0,i9e.default)(t,1/0,e,r)}function m9e(t,e,r){var n=(0,e9e.default)(t)?d9e:p9e;return n(t,(0,l9e.default)(e),r)}c3.default=(0,h9e.default)(m9e,3);nJ.exports=c3.default});var oJ=y((l3,sJ)=>{"use strict";f();Object.defineProperty(l3,"__esModule",{value:!0});l3.default=y9e;function y9e(t){return(e,r,n)=>t(e,n)}sJ.exports=l3.default});var d3=y((h3,uJ)=>{"use strict";f();Object.defineProperty(h3,"__esModule",{value:!0});var g9e=iJ(),_9e=f3(g9e),E9e=oJ(),A9e=f3(E9e),w9e=Hc(),S9e=f3(w9e),b9e=Sf(),O9e=f3(b9e);function f3(t){return t&&t.__esModule?t:{default:t}}function C9e(t,e,r){return(0,_9e.default)(t,(0,A9e.default)((0,S9e.default)(e)),r)}h3.default=(0,O9e.default)(C9e,3);uJ.exports=h3.default});var cJ=y((rze,aJ)=>{"use strict";f();var T9e=Object.prototype.toString;aJ.exports=function(e){if(typeof e.displayName=="string"&&e.constructor.name)return e.displayName;if(typeof e.name=="string"&&e.name)return e.name;if(typeof e=="object"&&e.constructor&&typeof e.constructor.name=="string")return e.constructor.name;var r=e.toString(),n=T9e.call(e).slice(8,-1);return n==="Function"?r=r.substring(r.indexOf("(")+1,r.indexOf(")")):r=n,r||"anonymous"}});var eT=y((ize,lJ)=>{"use strict";f();var D9e=cJ();lJ.exports=function(e){var r=0,n;function i(){return r||(r=1,n=e.apply(this,arguments),e=null),n}return i.displayName=D9e(e),i}});var tT=y(Op=>{f();Op.get=function(t){var e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},n=Error.prepareStackTrace;Error.prepareStackTrace=function(s,o){return o},Error.captureStackTrace(r,t||Op.get);var i=r.stack;return Error.prepareStackTrace=n,Error.stackTraceLimit=e,i};Op.parse=function(t){if(!t.stack)return[];var e=this,r=t.stack.split(`
`).slice(1);return r.map(function(n){if(n.match(/^\s*[-]{4,}$/))return e._createParsedCallSite({fileName:n,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var i=n.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(i){var s=null,o=null,u=null,a=null,c=null,l=i[5]==="native";if(i[1]){u=i[1];var h=u.lastIndexOf(".");if(u[h-1]=="."&&h--,h>0){s=u.substr(0,h),o=u.substr(h+1);var d=s.indexOf(".Module");d>0&&(u=u.substr(d+1),s=s.substr(0,d))}a=null}o&&(a=s,c=o),o==="<anonymous>"&&(c=null,u=null);var p={fileName:i[2]||null,lineNumber:parseInt(i[3],10)||null,functionName:u,typeName:a,methodName:c,columnNumber:parseInt(i[4],10)||null,native:l};return e._createParsedCallSite(p)}}).filter(function(n){return!!n})};function bp(t){for(var e in t)this[e]=t[e]}var M9e=["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"],v9e=["topLevel","eval","native","constructor"];M9e.forEach(function(t){bp.prototype[t]=null,bp.prototype["get"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});v9e.forEach(function(t){bp.prototype[t]=!1,bp.prototype["is"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});Op._createParsedCallSite=function(t){return new bp(t)}});var hJ=y((cze,fJ)=>{"use strict";f();var{Writable:B9e}=Gc();fJ.exports=class extends B9e{constructor(e){if(super({objectMode:!0}),!e)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=e}_write(e,r,n){return e.exception?this.transport.log(e,n):(n(),!0)}}});var nT=y((hze,mJ)=>{"use strict";f();var dJ=require("os"),I9e=d3(),rT=Ap()("winston:exception"),P9e=eT(),pJ=tT(),N9e=hJ();mJ.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle exceptions");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`uncaughtException: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:dJ.loadavg(),uptime:dJ.uptime()}}getTrace(e){return(e?pJ.parse(e):pJ.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=!0;let r=new N9e(e);this.handlers.set(e,r),this.logger.pipe(r)}}_uncaughtException(e){let r=this.getAllInfo(e),n=this._getExceptionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),i=!1);function o(){rT("doExit",i),rT("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);I9e(n,(u,a)=>{let c=P9e(a),l=u.transport||u;function h(d){return()=>{rT(d),c()}}l._ending=!0,l.once("finish",h("finished")),l.once("error",h("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getExceptionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleExceptions)}}});var gJ=y((mze,yJ)=>{"use strict";f();var{Writable:R9e}=Gc();yJ.exports=class extends R9e{constructor(e){if(super({objectMode:!0}),!e)throw new Error("RejectionStream requires a TransportStream instance.");this.handleRejections=!0,this.transport=e}_write(e,r,n){return e.rejection?this.transport.log(e,n):(n(),!0)}}});var sT=y((_ze,AJ)=>{"use strict";f();var _J=require("os"),x9e=d3(),iT=Ap()("winston:rejection"),F9e=eT(),EJ=tT(),$9e=gJ();AJ.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle rejections");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`unhandledRejection: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,rejection:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:_J.loadavg(),uptime:_J.uptime()}}getTrace(e){return(e?EJ.parse(e):EJ.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleRejections=!0;let r=new $9e(e);this.handlers.set(e,r),this.logger.pipe(r)}}_unhandledRejection(e){let r=this.getAllInfo(e),n=this._getRejectionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),i=!1);function o(){iT("doExit",i),iT("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);x9e(n,(u,a)=>{let c=F9e(a),l=u.transport||u;function h(d){return()=>{iT(d),c()}}l._ending=!0,l.once("finish",h("finished")),l.once("error",h("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getRejectionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleRejections)}}});var SJ=y((Aze,wJ)=>{"use strict";f();var oT=class{constructor(e){let r=p3();if(typeof e!="object"||Array.isArray(e)||!(e instanceof r))throw new Error("Logger is required for profiling");this.logger=e,this.start=Date.now()}done(...e){typeof e[e.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),e.pop());let r=typeof e[e.length-1]=="object"?e.pop():{};return r.level=r.level||"info",r.durationMs=Date.now()-this.start,this.logger.write(r)}};wJ.exports=oT});var p3=y((Sze,TJ)=>{"use strict";f();var{Stream:k9e,Transform:q9e}=Gc(),bJ=d3(),{LEVEL:Ao,SPLAT:OJ}=fr(),CJ=X7(),L9e=nT(),j9e=sT(),U9e=v7(),V9e=SJ(),{warn:z9e}=Z8(),W9e=a3(),H9e=/%[scdjifoO%]/g,m3=class extends q9e{constructor(e){super({objectMode:!0}),this.configure(e)}child(e){let r=this;return Object.create(r,{write:{value:function(n){let i=Object.assign({},e,n);n instanceof Error&&(i.stack=n.stack,i.message=n.message),r.write(i)}}})}configure({silent:e,format:r,defaultMeta:n,levels:i,level:s="info",exitOnError:o=!0,transports:u,colors:a,emitErrs:c,formatters:l,padLevels:h,rewriters:d,stripColors:p,exceptionHandlers:m,rejectionHandlers:g}={}){if(this.transports.length&&this.clear(),this.silent=e,this.format=r||this.format||G8()(),this.defaultMeta=n||null,this.levels=i||this.levels||W9e.npm.levels,this.level=s,this.exceptions&&this.exceptions.unhandle(),this.rejections&&this.rejections.unhandle(),this.exceptions=new L9e(this),this.rejections=new j9e(this),this.profilers={},this.exitOnError=o,u&&(u=Array.isArray(u)?u:[u],u.forEach(_=>this.add(_))),a||c||l||h||d||p)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));m&&this.exceptions.handle(m),g&&this.rejections.handle(g)}isLevelEnabled(e){let r=uT(this.levels,e);if(r===null)return!1;let n=uT(this.levels,this.level);return n===null?!1:!this.transports||this.transports.length===0?n>=r:this.transports.findIndex(s=>{let o=uT(this.levels,s.level);return o===null&&(o=n),o>=r})!==-1}log(e,r,...n){if(arguments.length===1)return e[Ao]=e.level,this._addDefaultMeta(e),this.write(e),this;if(arguments.length===2)return r&&typeof r=="object"?(r[Ao]=r.level=e,this._addDefaultMeta(r),this.write(r),this):(r={[Ao]:e,level:e,message:r},this._addDefaultMeta(r),this.write(r),this);let[i]=n;if(typeof i=="object"&&i!==null&&!(r&&r.match&&r.match(H9e))){let o=Object.assign({},this.defaultMeta,i,{[Ao]:e,[OJ]:n,level:e,message:r});return i.message&&(o.message=`${o.message} ${i.message}`),i.stack&&(o.stack=i.stack),i.cause&&(o.cause=i.cause),this.write(o),this}return this.write(Object.assign({},this.defaultMeta,{[Ao]:e,[OJ]:n,level:e,message:r})),this}_transform(e,r,n){if(this.silent)return n();e[Ao]||(e[Ao]=e.level),!this.levels[e[Ao]]&&this.levels[e[Ao]]!==0&&console.error("[winston] Unknown logger level: %s",e[Ao]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports, which can increase memory usage: %j",e);try{this.push(this.format.transform(e,this.format.options))}finally{this._writableState.sync=!1,n()}}_final(e){let r=this.transports.slice();bJ(r,(n,i)=>{if(!n||n.finished)return setImmediate(i);n.once("finish",i),n.end()},e)}add(e){let r=!CJ(e)||e.log.length>2?new U9e({transport:e}):e;if(!r._writableState||!r._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",r),this._onEvent("warn",r),this.pipe(r),e.handleExceptions&&this.exceptions.handle(),e.handleRejections&&this.rejections.handle(),this}remove(e){if(!e)return this;let r=e;return(!CJ(e)||e.log.length>2)&&(r=this.transports.filter(n=>n.transport===e)[0]),r&&this.unpipe(r),this}clear(){return this.unpipe(),this}close(){return this.exceptions.unhandle(),this.rejections.unhandle(),this.clear(),this.emit("close"),this}setLevels(){z9e.deprecated("setLevels")}query(e,r){typeof e=="function"&&(r=e,e={}),e=e||{};let n={},i=Object.assign({},e.query||{});function s(u,a){e.query&&typeof u.formatQuery=="function"&&(e.query=u.formatQuery(i)),u.query(e,(c,l)=>{if(c)return a(c);typeof u.formatResults=="function"&&(l=u.formatResults(l,e.format)),a(null,l)})}function o(u,a){s(u,(c,l)=>{a&&(l=c||l,l&&(n[u.name]=l),a()),a=null})}bJ(this.transports.filter(u=>!!u.query),o,()=>r(null,n))}stream(e={}){let r=new k9e,n=[];return r._streams=n,r.destroy=()=>{let i=n.length;for(;i--;)n[i].destroy()},this.transports.filter(i=>!!i.stream).forEach(i=>{let s=i.stream(e);s&&(n.push(s),s.on("log",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("log",o)}),s.on("error",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("error",o)}))}),r}startTimer(){return new V9e(this)}profile(e,...r){let n=Date.now();if(this.profilers[e]){let i=this.profilers[e];delete this.profilers[e],typeof r[r.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),r.pop());let s=typeof r[r.length-1]=="object"?r.pop():{};return s.level=s.level||"info",s.durationMs=n-i,s.message=s.message||e,this.write(s)}return this.profilers[e]=n,this}handleExceptions(...e){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),this.exceptions.handle(...e)}unhandleExceptions(...e){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}_onEvent(e,r){function n(i){e==="error"&&!this.transports.includes(r)&&this.add(r),this.emit(e,i,r)}r["__winston"+e]||(r["__winston"+e]=n.bind(this),r.on(e,r["__winston"+e]))}_addDefaultMeta(e){this.defaultMeta&&Object.assign(e,this.defaultMeta)}};function uT(t,e){let r=t[e];return!r&&r!==0?null:r}Object.defineProperty(m3.prototype,"transports",{configurable:!1,enumerable:!0,get(){let{pipes:t}=this._readableState;return Array.isArray(t)?t:[t].filter(Boolean)}});TJ.exports=m3});var aT=y((Oze,DJ)=>{"use strict";f();var{LEVEL:G9e}=fr(),K9e=a3(),Y9e=p3(),Q9e=Ap()("winston:create-logger");function J9e(t){return"is"+t.charAt(0).toUpperCase()+t.slice(1)+"Enabled"}DJ.exports=function(t={}){t.levels=t.levels||K9e.npm.levels;class e extends Y9e{constructor(i){super(i)}}let r=new e(t);return Object.keys(t.levels).forEach(function(n){if(Q9e('Define prototype method for "%s"',n),n==="log"){console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.');return}e.prototype[n]=function(...i){let s=this||r;if(i.length===1){let[o]=i,u=o&&o.message&&o||{message:o};return u.level=u[G9e]=n,s._addDefaultMeta(u),s.write(u),this||r}return i.length===0?(s.log(n,""),s):s.log(n,...i)},e.prototype[J9e(n)]=function(){return(this||r).isLevelEnabled(n)}}),r}});var vJ=y((Dze,MJ)=>{"use strict";f();var X9e=aT();MJ.exports=class{constructor(e={}){this.loggers=new Map,this.options=e}add(e,r){if(!this.loggers.has(e)){r=Object.assign({},r||this.options);let n=r.transports||this.options.transports;n?r.transports=Array.isArray(n)?n.slice():[n]:r.transports=[];let i=X9e(r);i.on("close",()=>this._delete(e)),this.loggers.set(e,i)}return this.loggers.get(e)}get(e,r){return this.add(e,r)}has(e){return!!this.loggers.has(e)}close(e){if(e)return this._removeLogger(e);this.loggers.forEach((r,n)=>this._removeLogger(n))}_removeLogger(e){if(!this.loggers.has(e))return;this.loggers.get(e).close(),this._delete(e)}_delete(e){this.loggers.delete(e)}}});var cT=y(_t=>{"use strict";f();var BJ=X8(),{warn:Cp}=Z8();_t.version=rK().version;_t.transports=rJ();_t.config=a3();_t.addColors=BJ.levels;_t.format=BJ.format;_t.createLogger=aT();_t.Logger=p3();_t.ExceptionHandler=nT();_t.RejectionHandler=sT();_t.Container=vJ();_t.Transport=Wc();_t.loggers=new _t.Container;var wo=_t.createLogger();Object.keys(_t.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(t=>_t[t]=(...e)=>wo[t](...e));Object.defineProperty(_t,"level",{get(){return wo.level},set(t){wo.level=t}});Object.defineProperty(_t,"exceptions",{get(){return wo.exceptions}});Object.defineProperty(_t,"rejections",{get(){return wo.rejections}});["exitOnError"].forEach(t=>{Object.defineProperty(_t,t,{get(){return wo[t]},set(e){wo[t]=e}})});Object.defineProperty(_t,"default",{get(){return{exceptionHandlers:wo.exceptionHandlers,rejectionHandlers:wo.rejectionHandlers,transports:wo.transports}}});Cp.deprecated(_t,"setLevels");Cp.forFunctions(_t,"useFormat",["cli"]);Cp.forProperties(_t,"useFormat",["padLevels","stripColors"]);Cp.forFunctions(_t,"deprecated",["addRewriter","addFilter","clone","extend"]);Cp.forProperties(_t,"deprecated",["emitErrs","levelLength"])});var NJ=y(PJ=>{"use strict";f();var Z9e=Xo().ObjectId;PJ.prepareMetaData=t=>IJ(t);function IJ(t,e){if(!(t!==null&&typeof t=="object"||typeof t=="function")||t instanceof Z9e||t instanceof Buffer)return t;let r=Array.isArray(t)?[]:{};if(t instanceof Date)return new Date(t.getTime());t instanceof Error&&(r={message:t.message,name:t.name,stack:t.stack}),e=e||[],e.push(t);for(let n in t){if(!Object.prototype.hasOwnProperty.call(t,n))continue;let i=t[n],s=n;(s.includes(".")||s.includes("$"))&&(s=s.replace(/\./g,"[dot]").replace(/\$/g,"[$]")),i!==null&&typeof i=="object"||typeof i=="function"?e.indexOf(i)===-1?r[s]=IJ(i,e):r[s]="[Circular]":r[s]=i}return e.pop(),r}});var kJ=y($J=>{"use strict";f();var RJ=require("util"),e5e=require("os"),t5e=Xo(),r5e=cT(),xJ=Wc(),FJ=require("stream").Stream,n5e=NJ(),Qc=$J.MongoDB=function(t){if(xJ.call(this,t),t=t||{},!t.db)throw new Error("You should provide db to log to.");this.name=t.name||"mongodb",this.db=t.db,this.dbName=t.dbName||void 0,this.options=t.options,this.options||(this.options={maxPoolSize:2}),this.collection=t.collection||"log",this.level=t.level||"info",this.silent=t.silent,this.storeHost=t.storeHost,this.label=t.label,this.capped=t.capped,this.cappedSize=t.cappedSize||1e7,this.cappedMax=t.cappedMax,this.decolorize=t.decolorize,this.leaveConnectionOpen=t.leaveConnectionOpen,this.expireAfterSeconds=!this.capped&&t.expireAfterSeconds,this.metaKey=t.metaKey||"metadata",this.storeHost&&(this.hostname=e5e.hostname()),this._opQueue=[];let e=this;function r(o){return i(o).then(u=>{e.logDb=u,n()},u=>{e.mongoClient&&!e.leaveConnectionOpen&&e.mongoClient.close(),console.error("winston-mongodb, initialization error: ",u)})}function n(){e._opQueue.forEach(o=>e[o.method].apply(e,o.args)),delete e._opQueue}function i(o){let u=Object.assign({},e.capped?{capped:!0,size:e.cappedSize,max:e.cappedMax}:{});return o.createCollection(e.collection,u).then(a=>{let c="timestamp_1",l={name:c,background:!0};return e.expireAfterSeconds&&(l.expireAfterSeconds=e.expireAfterSeconds),a.indexInformation({full:!0}).then(h=>{if(h=h.filter(d=>d.name===c),h.length===0)return a.createIndex({timestamp:-1},l);if(h[0].expireAfterSeconds!==void 0&&h[0].expireAfterSeconds!==e.expireAfterSeconds)return a.dropIndex(c).then(()=>a.createIndex({timestamp:-1},l))})}).catch(a=>{if(a.code!==48)throw a;return o.collection(e.collection)}).then(()=>o)}function s(o){return t5e.MongoClient.connect(o.db,o.options).then(u=>{o.mongoClient=u,r(u.db(e.dbName))},u=>{if(console.error("winston-mongodb: error initialising logger",u),t.tryReconnect)return console.log("winston-mongodb: will try reconnecting in 10 seconds"),new Promise(a=>setTimeout(a,1e4)).then(()=>s(o))})}typeof this.db=="string"?s(this):typeof this.db.then=="function"?this.db.then(o=>{this.mongoClient=o,r(o.db(e.dbName))},o=>console.error("winston-mongodb: error initialising logger from promise",o)):typeof this.db.db=="function"?(this.mongoClient=this.db,r(this.db.db(e.dbName))):(console.warn("winston-mongodb: preconnected object support is deprecated and will be removed in v5"),r(this.db))};RJ.inherits(Qc,xJ);r5e.transports.MongoDB=Qc;Qc.prototype.close=function(){this.logDb=null,!(!this.mongoClient||this.leaveConnectionOpen)&&this.mongoClient.close().then(()=>{this.mongoClient=null}).catch(t=>{console.error("Winston MongoDB transport encountered on error during closing.",t)})};Qc.prototype.log=function(t,e){return this.logDb?(e||(e=()=>{}),process.nextTick(()=>{this.silent&&e(null,!0);let r=new RegExp(/\u001b\[[0-9]{1,2}m/g),n={timestamp:new Date,level:this.decolorize?t.level.replace(r,""):t.level},i=RJ.format(t.message,...t.splat||[]);n.message=this.decolorize?i.replace(r,""):i;let{level:s,message:o,...u}=t,a=n5e.prepareMetaData(u);Object.keys(a).length>0&&(n[this.metaKey]=a),this.storeHost&&(n.hostname=this.hostname),this.label&&(n.label=this.label),this.logDb.collection(this.collection).insertOne(n).then(()=>{this.emit("logged"),e(null,!0)}).catch(c=>{this.emit("error",c),e(c)})}),!0):(this._opQueue.push({method:"log",args:arguments}),!0)};Qc.prototype.query=function(t,e){if(!this.logDb){this._opQueue.push({method:"query",args:arguments});return}typeof t=="function"&&(e=t,t={});let r=this.normalizeQuery(t),n={timestamp:{$gte:r.from,$lte:r.until}},i={skip:r.start,limit:r.rows,sort:{timestamp:r.order==="desc"?-1:1}};r.fields&&(i.fields=r.fields),this.logDb.collection(this.collection).find(n,i).toArray().then(s=>{r.includeIds||s.forEach(o=>delete o._id),e(null,s)}).catch(e)};Qc.prototype.stream=function(t,e){t=t||{},e=e||new FJ;let r=t.start;if(!this.logDb)return this._opQueue.push({method:"stream",args:[t,e]}),e;e.destroy=function(){this.destroyed=!0},r===-1&&(r=null);let n=this.logDb.collection(this.collection);return r!==null?(n.find({},{skip:r}).toArray().then(i=>{i.forEach(s=>{t.includeIds||delete s._id,e.emit("log",s)}),delete t.start,this.stream(t,e)}).catch(i=>e.emit("error",i)),e):(e.destroyed||n.isCapped().then(i=>{if(!i)return this.streamPoll(t,e);let s=n.find({},{tailable:!0});e.destroy=function(){this.destroyed=!0,s.destroy()},s.on("data",o=>{t.includeIds||delete o._id,e.emit("log",o)}),s.on("error",o=>e.emit("error",o))}).catch(i=>e.emit("error",i)),e)};Qc.prototype.streamPoll=function(t,e){t=t||{},e=e||new FJ;let r=this,n=t.start,i;return this.logDb?(n===-1&&(n=null),n===null&&(i=new Date(new Date-1e3)),e.destroy=function(){this.destroyed=!0},function s(){let o=i?{timestamp:{$gte:i}}:{};r.logDb.collection(r.collection).find(o).toArray().then(a=>{if(!e.destroyed){if(!a.length)return u();n===null?a.forEach(c=>{t.includeIds||delete c._id,e.emit("log",c)}):a.forEach(c=>{t.includeIds||delete c._id,n?n-=1:e.emit("log",c)}),i=new Date(a.pop().timestamp),u()}}).catch(a=>{e.destroyed||(u(),e.emit("error",a))});function u(){setTimeout(s,2e3)}}(),e):(this._opQueue.push({method:"streamPoll",args:[t,e]}),e)}});var jJ=y((xze,LJ)=>{f();var Tp=cT();kJ();var i5e=(t,e={})=>new Tp.transports.MongoDB({db:t,...e}),s5e=t=>new Tp.transports.File({filename:t}),qJ=()=>new Tp.transports.Console,o5e=(t=[])=>{let e=t.length?t:[qJ()];Tp.configure({level:"info",transports:e})};LJ.exports={withMongoDbTransport:i5e,withConsoleTransport:qJ,withFileTransport:s5e,configure:o5e,logger:Tp}});var VJ=y(($ze,UJ)=>{f();var u5e=RH(),{appDebugger:a5e}=FH(),c5e=jJ();UJ.exports={loadEnv:u5e,appDebugger:a5e,logger:c5e}});var WJ=y((qze,zJ)=>{f();zJ.exports={APP_DEBUG_PREFIX:"auth-db"}});var lT=y((jze,KJ)=>{f();var{appDebugger:HJ}=VJ(),{APP_DEBUG_PREFIX:GJ}=WJ();KJ.exports={info:HJ(`${GJ}:info`),error:HJ(`${GJ}:error`)}});var JJ=y((Vze,QJ)=>{f();var l5e=C8(),fT=lT(),hT,f5e=(t,e)=>{try{let r=l5e.createConnection(t,e);return r.on("close",()=>fT.info("MongoDb: Connection CLOSED")),r.on("connected",()=>fT.info("MongoDB: CONNECTED")),r}catch{fT.error("Could not connect to MongoDB"),process.env.ENV!=="development"&&process.exit(1)}},YJ=()=>{let t={serverSelectionTimeoutMS:process.env.MONGO_TIMEOUTMS||3e4,connectTimeoutMS:process.env.MONGO_TIMEOUTMS||3e4};return hT=f5e(process.env.MONGO_URI,t),hT},h5e=()=>hT||YJ();QJ.exports={connect:YJ,getClient:h5e}});var ZJ=y((Wze,XJ)=>{f();XJ.exports=t=>{}});var tX=y((Gze,eX)=>{f();var d5e=lT(),p5e=["DEBUG","MONGO_URI","MONGO_TIMEOUTMS"],m5e=()=>p5e.find(e=>{if(!process.env[e])return d5e.error(`Missing required env var: ${e}`),!0});eX.exports=()=>{let t=!0;if(m5e())throw t=!1,new Error("RuntimeError: missing required Env");t||process.exit(1)}});var nX=y((Yze,rX)=>{f();var y5e=ZJ(),g5e=tX();rX.exports={config:y5e,sanity:g5e}});var sX=y((Xze,iX)=>{f();var Jze=require("path"),{connect:_5e}=JJ(),E5e=(t,e)=>{nX().sanity();let r=[];return e.map(n=>{let i=t.model(n.name,n.schema);r.push(i)}),r};iX.exports={connect:_5e,attach:E5e}});var aX=y((eWe,uX)=>{f();var{Schema:A5e}=C8(),oX=new A5e({fullname:{type:String,required:!0,minLength:3,maxLength:30},email:{type:String,required:!0,minLength:5,maxLength:255,unique:!0},password:{type:String,required:!0,minLength:8,maxLength:1024},roles:{type:[String],required:!0,validate:{validator:t=>Array.isArray(t)&&t.length>0,message:"Roles must contain at least one role."},enum:["admin","user"]}});oX.methods.getAccessTokenPayload=function(){return{email:this.email,roles:this.roles}};uX.exports=oX});var lX=y((rWe,cX)=>{f();var w5e=aX();cX.exports={userDbSchema:w5e}});var dX=y((iWe,hX)=>{f();var fX;hX.exports={getDbClient:()=>fX,setDbClient:t=>fX=t}});var yX=y((oWe,mX)=>{f();var pX;mX.exports={getModels:()=>pX,setModels:t=>pX=t}});var dT=y((aWe,gX)=>{f();var{connect:S5e,attach:b5e}=sX(),{userDbSchema:O5e}=lX(),{setDbClient:C5e}=dX(),{setModels:T5e}=yX();gX.exports=()=>{try{let t={},e=S5e();b5e(e,[{name:"User",schema:O5e}]).map(n=>{t={...t,[n.modelName]:n}}),C5e(e),T5e(t)}catch(t){throw new Error(t)}}});var Ca={};aZ(Ca,{default:()=>D5e});module.exports=cZ(Ca);f();f();(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="7d6edbdd-2e1d-4ebb-a1a5-5a0a8d74eaf0",t._sentryDebugIdIdentifier="sentry-dbid-7d6edbdd-2e1d-4ebb-a1a5-5a0a8d74eaf0")}catch{}})();var _X=_T(dT());Ia(Ca,_T(dT()),module.exports);var D5e=_X.default;
