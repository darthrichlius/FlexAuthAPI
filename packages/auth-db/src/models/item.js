var xU=Object.create;var Xf=Object.defineProperty;var kU=Object.getOwnPropertyDescriptor;var qU=Object.getOwnPropertyNames;var LU=Object.getPrototypeOf,jU=Object.prototype.hasOwnProperty;var UU=(t,e)=>()=>(t&&(e=t(t=0)),e);var g=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),VU=(t,e)=>{for(var r in e)Xf(t,r,{get:e[r],enumerable:!0})},Jf=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of qU(e))!jU.call(t,s)&&s!==r&&Xf(t,s,{get:()=>e[s],enumerable:!(n=kU(e,s))||n.enumerable});return t},Iu=(t,e,r)=>(Jf(t,e,"default"),r&&Jf(r,e,"default")),q9=(t,e,r)=>(r=t!=null?xU(LU(t)):{},Jf(e||!t||!t.__esModule?Xf(r,"default",{value:t,enumerable:!0}):r,t)),zU=t=>Jf(Xf({},"__esModule",{value:!0}),t);var WU,d=UU(()=>{WU=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};WU.SENTRY_RELEASE={id:"e59dffade4495c8bb285a87ac6e4b0c656450a7e"}});var xa=g((W9,H9)=>{"use strict";d();var gi=H9.exports=W9=Object.create(null),L9="disconnected",j9="connected",U9="connecting",V9="disconnecting",z9="uninitialized";gi[0]=L9;gi[1]=j9;gi[2]=U9;gi[3]=V9;gi[99]=z9;gi[L9]=0;gi[j9]=1;gi[U9]=2;gi[V9]=3;gi[z9]=99});var os=g((o0e,G9)=>{"use strict";d();var HU=typeof process<"u"&&typeof process.nextTick=="function"?process.nextTick.bind(process):t=>setTimeout(t,0);G9.exports=function(e){return HU(e)}});var Q9=g((a0e,Y9)=>{"use strict";d();var GU=require("events").EventEmitter,KU=xa(),K9=os();function et(t,e,r){r===void 0&&(r={}),this.opts=r,this.name=t,this.collectionName=t,this.conn=e,this.queue=[],this.buffer=!0,this.emitter=new GU,KU.connected===this.conn.readyState&&this.onOpen()}et.prototype.name;et.prototype.collectionName;et.prototype.conn;et.prototype.onOpen=function(){this.buffer=!1,K9(()=>this.doQueue())};et.prototype.onClose=function(){};et.prototype.addQueue=function(t,e){return this.queue.push([t,e]),this};et.prototype.removeQueue=function(t,e){let r=this.queue.findIndex(n=>n[0]===t&&n[1]===e);return r===-1?!1:(this.queue.splice(r,1),!0)};et.prototype.doQueue=function(){for(let e of this.queue)typeof e[0]=="function"?e[0].apply(this,e[1]):this[e[0]].apply(this,e[1]);this.queue=[];let t=this;return K9(function(){t.emitter.emit("queue")}),this};et.prototype.ensureIndex=function(){throw new Error("Collection#ensureIndex unimplemented by driver")};et.prototype.createIndex=function(){throw new Error("Collection#createIndex unimplemented by driver")};et.prototype.findAndModify=function(){throw new Error("Collection#findAndModify unimplemented by driver")};et.prototype.findOneAndUpdate=function(){throw new Error("Collection#findOneAndUpdate unimplemented by driver")};et.prototype.findOneAndDelete=function(){throw new Error("Collection#findOneAndDelete unimplemented by driver")};et.prototype.findOneAndReplace=function(){throw new Error("Collection#findOneAndReplace unimplemented by driver")};et.prototype.findOne=function(){throw new Error("Collection#findOne unimplemented by driver")};et.prototype.find=function(){throw new Error("Collection#find unimplemented by driver")};et.prototype.insert=function(){throw new Error("Collection#insert unimplemented by driver")};et.prototype.insertOne=function(){throw new Error("Collection#insertOne unimplemented by driver")};et.prototype.insertMany=function(){throw new Error("Collection#insertMany unimplemented by driver")};et.prototype.save=function(){throw new Error("Collection#save unimplemented by driver")};et.prototype.updateOne=function(){throw new Error("Collection#updateOne unimplemented by driver")};et.prototype.updateMany=function(){throw new Error("Collection#updateMany unimplemented by driver")};et.prototype.deleteOne=function(){throw new Error("Collection#deleteOne unimplemented by driver")};et.prototype.deleteMany=function(){throw new Error("Collection#deleteMany unimplemented by driver")};et.prototype.getIndexes=function(){throw new Error("Collection#getIndexes unimplemented by driver")};et.prototype.watch=function(){throw new Error("Collection#watch unimplemented by driver")};et.prototype._shouldBufferCommands=function(){let e=this.opts;return e.bufferCommands!=null?e.bufferCommands:e&&e.schemaUserProvidedOptions!=null&&e.schemaUserProvidedOptions.bufferCommands!=null?e.schemaUserProvidedOptions.bufferCommands:this.conn._shouldBufferCommands()};et.prototype._getBufferTimeoutMS=function(){let e=this.conn,r=this.opts;return r.bufferTimeoutMS!=null?r.bufferTimeoutMS:r&&r.schemaUserProvidedOptions!=null&&r.schemaUserProvidedOptions.bufferTimeoutMS!=null?r.schemaUserProvidedOptions.bufferTimeoutMS:e.config.bufferTimeoutMS!=null?e.config.bufferTimeoutMS:e.base!=null&&e.base.get("bufferTimeoutMS")!=null?e.base.get("bufferTimeoutMS"):1e4};Y9.exports=et});var Ie=g((l0e,J9)=>{"use strict";d();var Zf=class extends Error{};Object.defineProperty(Zf.prototype,"name",{value:"MongooseError"});J9.exports=Zf});var cs=g(Je=>{"use strict";d();var YU=(()=>{let t=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array.prototype),Symbol.toStringTag).get;return e=>t.call(e)})();function La(t){return YU(t)==="Uint8Array"}function tE(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&(t[Symbol.toStringTag]==="ArrayBuffer"||t[Symbol.toStringTag]==="SharedArrayBuffer")}function ja(t){return t instanceof RegExp||Object.prototype.toString.call(t)==="[object RegExp]"}function rE(t){return typeof t=="object"&&t!=null&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Map"}function Ua(t){return t instanceof Date||Object.prototype.toString.call(t)==="[object Date]"}function Un(t,e){return JSON.stringify(t,(r,n)=>typeof n=="bigint"?{$numberLong:`${n}`}:rE(n)?Object.fromEntries(n):n)}function QU(t){if(t!=null&&typeof t=="object"&&"stylize"in t&&typeof t.stylize=="function")return t.stylize}var Nu=6,Wa=Symbol.for("@@mdb.bson.version"),r1=2147483647,n1=-2147483648,p8=Math.pow(2,63)-1,m8=-Math.pow(2,63),y8=Math.pow(2,53),g8=-Math.pow(2,53),nE=1,E8=2,sE=3,_8=4,iE=5,JU=6,A8=7,S8=8,O8=9,oE=10,rd=11,XU=12,uE=13,w8=14,C8=15,e1=16,b8=17,aE=18,T8=19,D8=255,M8=127,ZU=0,cE=4,B8=Object.freeze({double:1,string:2,object:3,array:4,binData:5,undefined:6,objectId:7,bool:8,date:9,null:10,regex:11,dbPointer:12,javascript:13,symbol:14,javascriptWithScope:15,int:16,timestamp:17,long:18,decimal:19,minKey:-1,maxKey:127}),L=class extends Error{get bsonError(){return!0}get name(){return"BSONError"}constructor(e,r){super(e,r)}static isBSONError(e){return e!=null&&typeof e=="object"&&"bsonError"in e&&e.bsonError===!0&&"name"in e&&"message"in e&&"stack"in e}},Wi=class extends L{get name(){return"BSONVersionError"}constructor(){super(`Unsupported BSON version, bson types must be from bson ${Nu}.x.x`)}},Ha=class extends L{get name(){return"BSONRuntimeError"}constructor(e){super(e)}},as=class extends L{get name(){return"BSONOffsetError"}constructor(e,r,n){super(`${e}. offset: ${r}`,n),this.offset=r}},X9,Z9;function I8(t,e,r,n){if(n){X9??=new TextDecoder("utf8",{fatal:!0});try{return X9.decode(t.subarray(e,r))}catch(s){throw new L("Invalid UTF-8 string in BSON document",{cause:s})}}return Z9??=new TextDecoder("utf8",{fatal:!1}),Z9.decode(t.subarray(e,r))}function P8(t,e,r){if(t.length===0)return"";let n=r-e;if(n===0)return"";if(n>20)return null;if(n===1&&t[e]<128)return String.fromCharCode(t[e]);if(n===2&&t[e]<128&&t[e+1]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1]);if(n===3&&t[e]<128&&t[e+1]<128&&t[e+2]<128)return String.fromCharCode(t[e])+String.fromCharCode(t[e+1])+String.fromCharCode(t[e+2]);let s=[];for(let i=e;i<r;i++){let o=t[i];if(o>127)return null;s.push(o)}return String.fromCharCode(...s)}function eV(t,e,r){if(e.length===0)return 0;if(e.length>25||t.length-r<e.length)return null;for(let n=0,s=r;n<e.length;n++,s++){let i=e.charCodeAt(n);if(i>127)return null;t[s]=i}return e.length}function tV(t){return Vi.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}var rV=(()=>{try{return require("crypto").randomBytes}catch{return tV}})(),Vi={toLocalBufferType(t){if(Buffer.isBuffer(t))return t;if(ArrayBuffer.isView(t))return Buffer.from(t.buffer,t.byteOffset,t.byteLength);let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return Buffer.from(t);throw new L("Cannot create Buffer from the passed potentialBuffer.")},allocate(t){return Buffer.alloc(t)},allocateUnsafe(t){return Buffer.allocUnsafe(t)},equals(t,e){return Vi.toLocalBufferType(t).equals(e)},fromNumberArray(t){return Buffer.from(t)},fromBase64(t){return Buffer.from(t,"base64")},toBase64(t){return Vi.toLocalBufferType(t).toString("base64")},fromISO88591(t){return Buffer.from(t,"binary")},toISO88591(t){return Vi.toLocalBufferType(t).toString("binary")},fromHex(t){return Buffer.from(t,"hex")},toHex(t){return Vi.toLocalBufferType(t).toString("hex")},toUTF8(t,e,r,n){let s=r-e<=20?P8(t,e,r):null;if(s!=null)return s;let i=Vi.toLocalBufferType(t).toString("utf8",e,r);if(n){for(let o=0;o<i.length;o++)if(i.charCodeAt(o)===65533){I8(t,e,r,!0);break}}return i},utf8ByteLength(t){return Buffer.byteLength(t,"utf8")},encodeUTF8Into(t,e,r){let n=eV(t,e,r);return n??Vi.toLocalBufferType(t).write(e,r,void 0,"utf8")},randomBytes:rV,swap32(t){return Vi.toLocalBufferType(t).swap32()}};function nV(){let{navigator:t}=globalThis;return typeof t=="object"&&t.product==="ReactNative"}function sV(t){if(t<0)throw new RangeError(`The argument 'byteLength' is invalid. Received ${t}`);return t1.fromNumberArray(Array.from({length:t},()=>Math.floor(Math.random()*256)))}var iV=(()=>{let{crypto:t}=globalThis;if(t!=null&&typeof t.getRandomValues=="function")return e=>t.getRandomValues(t1.allocate(e));if(nV()){let{console:e}=globalThis;e?.warn?.("BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.")}return sV})(),e8=/(\d|[a-f])/i,t1={toLocalBufferType(t){let e=t?.[Symbol.toStringTag]??Object.prototype.toString.call(t);if(e==="Uint8Array")return t;if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));if(e==="ArrayBuffer"||e==="SharedArrayBuffer"||e==="[object ArrayBuffer]"||e==="[object SharedArrayBuffer]")return new Uint8Array(t);throw new L("Cannot make a Uint8Array from passed potentialBuffer.")},allocate(t){if(typeof t!="number")throw new TypeError(`The "size" argument must be of type number. Received ${String(t)}`);return new Uint8Array(t)},allocateUnsafe(t){return t1.allocate(t)},equals(t,e){if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0},fromNumberArray(t){return Uint8Array.from(t)},fromBase64(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))},toBase64(t){return btoa(t1.toISO88591(t))},fromISO88591(t){return Uint8Array.from(t,e=>e.charCodeAt(0)&255)},toISO88591(t){return Array.from(Uint16Array.from(t),e=>String.fromCharCode(e)).join("")},fromHex(t){let e=t.length%2===0?t:t.slice(0,t.length-1),r=[];for(let n=0;n<e.length;n+=2){let s=e[n],i=e[n+1];if(!e8.test(s)||!e8.test(i))break;let o=Number.parseInt(`${s}${i}`,16);r.push(o)}return Uint8Array.from(r)},toHex(t){return Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")},toUTF8(t,e,r,n){let s=r-e<=20?P8(t,e,r):null;return s??I8(t,e,r,n)},utf8ByteLength(t){return new TextEncoder().encode(t).byteLength},encodeUTF8Into(t,e,r){let n=new TextEncoder().encode(e);return t.set(n,r),n.byteLength},randomBytes:iV,swap32(t){if(t.length%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t.length;e+=4){let r=t[e],n=t[e+1],s=t[e+2],i=t[e+3];t[e]=i,t[e+1]=s,t[e+2]=n,t[e+3]=r}return t}},oV=typeof Buffer=="function"&&Buffer.prototype?._isBuffer!==!0,q=oV?Vi:t1,Nr=class{get[Wa](){return Nu}[Symbol.for("nodejs.util.inspect.custom")](e,r,n){return this.inspect(e,r,n)}},Va=new Float64Array(1),Ve=new Uint8Array(Va.buffer,0,8);Va[0]=-1;var Ig=Ve[7]===0,me={isBigEndian:Ig,getNonnegativeInt32LE(t,e){if(t[e+3]>127)throw new RangeError(`Size cannot be negative at offset: ${e}`);return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getInt32LE(t,e){return t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24},getUint32LE(t,e){return t[e]+t[e+1]*256+t[e+2]*65536+t[e+3]*16777216},getUint32BE(t,e){return t[e+3]+t[e+2]*256+t[e+1]*65536+t[e]*16777216},getBigInt64LE(t,e){let r=me.getUint32LE(t,e),n=me.getUint32LE(t,e+4);return(BigInt(n)<<BigInt(32))+BigInt(r)},getFloat64LE:Ig?(t,e)=>(Ve[7]=t[e],Ve[6]=t[e+1],Ve[5]=t[e+2],Ve[4]=t[e+3],Ve[3]=t[e+4],Ve[2]=t[e+5],Ve[1]=t[e+6],Ve[0]=t[e+7],Va[0]):(t,e)=>(Ve[0]=t[e],Ve[1]=t[e+1],Ve[2]=t[e+2],Ve[3]=t[e+3],Ve[4]=t[e+4],Ve[5]=t[e+5],Ve[6]=t[e+6],Ve[7]=t[e+7],Va[0]),setInt32BE(t,e,r){return t[e+3]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e]=r,4},setInt32LE(t,e,r){return t[e]=r,r>>>=8,t[e+1]=r,r>>>=8,t[e+2]=r,r>>>=8,t[e+3]=r,4},setBigInt64LE(t,e,r){let n=BigInt(4294967295),s=Number(r&n);t[e]=s,s>>=8,t[e+1]=s,s>>=8,t[e+2]=s,s>>=8,t[e+3]=s;let i=Number(r>>BigInt(32)&n);return t[e+4]=i,i>>=8,t[e+5]=i,i>>=8,t[e+6]=i,i>>=8,t[e+7]=i,8},setFloat64LE:Ig?(t,e,r)=>(Va[0]=r,t[e]=Ve[7],t[e+1]=Ve[6],t[e+2]=Ve[5],t[e+3]=Ve[4],t[e+4]=Ve[3],t[e+5]=Ve[2],t[e+6]=Ve[1],t[e+7]=Ve[0],8):(t,e,r)=>(Va[0]=r,t[e]=Ve[0],t[e+1]=Ve[1],t[e+2]=Ve[2],t[e+3]=Ve[3],t[e+4]=Ve[4],t[e+5]=Ve[5],t[e+6]=Ve[6],t[e+7]=Ve[7],8)},Le=class t extends Nr{get _bsontype(){return"Binary"}constructor(e,r){if(super(),e!=null&&typeof e=="string"&&!ArrayBuffer.isView(e)&&!tE(e)&&!Array.isArray(e))throw new L("Binary can only be constructed from Uint8Array or number[]");this.sub_type=r??t.BSON_BINARY_SUBTYPE_DEFAULT,e==null?(this.buffer=q.allocate(t.BUFFER_SIZE),this.position=0):(this.buffer=Array.isArray(e)?q.fromNumberArray(e):q.toLocalBufferType(e),this.position=this.buffer.byteLength)}put(e){if(typeof e=="string"&&e.length!==1)throw new L("only accepts single character String");if(typeof e!="number"&&e.length!==1)throw new L("only accepts single character Uint8Array or Array");let r;if(typeof e=="string"?r=e.charCodeAt(0):typeof e=="number"?r=e:r=e[0],r<0||r>255)throw new L("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.byteLength>this.position)this.buffer[this.position++]=r;else{let n=q.allocate(t.BUFFER_SIZE+this.buffer.length);n.set(this.buffer,0),this.buffer=n,this.buffer[this.position++]=r}}write(e,r){if(r=typeof r=="number"?r:this.position,this.buffer.byteLength<r+e.length){let n=q.allocate(this.buffer.byteLength+e.length);n.set(this.buffer,0),this.buffer=n}if(ArrayBuffer.isView(e))this.buffer.set(q.toLocalBufferType(e),r),this.position=r+e.byteLength>this.position?r+e.length:this.position;else if(typeof e=="string")throw new L("input cannot be string")}read(e,r){r=r&&r>0?r:this.position;let n=e+r;return this.buffer.subarray(e,n>this.position?this.position:n)}value(){return this.buffer.length===this.position?this.buffer:this.buffer.subarray(0,this.position)}length(){return this.position}toJSON(){return q.toBase64(this.buffer.subarray(0,this.position))}toString(e){return e==="hex"?q.toHex(this.buffer.subarray(0,this.position)):e==="base64"?q.toBase64(this.buffer.subarray(0,this.position)):e==="utf8"||e==="utf-8"?q.toUTF8(this.buffer,0,this.position,!1):q.toUTF8(this.buffer,0,this.position,!1)}toExtendedJSON(e){e=e||{},this.sub_type===t.SUBTYPE_VECTOR&&N8(this);let r=q.toBase64(this.buffer),n=Number(this.sub_type).toString(16);return e.legacy?{$binary:r,$type:n.length===1?"0"+n:n}:{$binary:{base64:r,subType:n.length===1?"0"+n:n}}}toUUID(){if(this.sub_type===t.SUBTYPE_UUID)return new qo(this.buffer.subarray(0,this.position));throw new L(`Binary sub_type "${this.sub_type}" is not supported for converting to UUID. Only "${t.SUBTYPE_UUID}" is currently supported.`)}static createFromHexString(e,r){return new t(q.fromHex(e),r)}static createFromBase64(e,r){return new t(q.fromBase64(e),r)}static fromExtendedJSON(e,r){r=r||{};let n,s;if("$binary"in e?r.legacy&&typeof e.$binary=="string"&&"$type"in e?(s=e.$type?parseInt(e.$type,16):0,n=q.fromBase64(e.$binary)):typeof e.$binary!="string"&&(s=e.$binary.subType?parseInt(e.$binary.subType,16):0,n=q.fromBase64(e.$binary.base64)):"$uuid"in e&&(s=4,n=qo.bytesFromString(e.$uuid)),!n)throw new L(`Unexpected Binary Extended JSON format ${JSON.stringify(e)}`);return s===cE?new qo(n):new t(n,s)}inspect(e,r,n){n??=Un;let s=q.toBase64(this.buffer.subarray(0,this.position)),i=n(s,r),o=n(this.sub_type,r);return`Binary.createFromBase64(${i}, ${o})`}toInt8Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new L("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Int8)throw new L("Binary datatype field is not Int8");return new Int8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toFloat32Array(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new L("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.Float32)throw new L("Binary datatype field is not Float32");let e=new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position));return me.isBigEndian&&q.swap32(e),new Float32Array(e.buffer)}toPackedBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new L("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new L("Binary datatype field is not packed bit");return new Uint8Array(this.buffer.buffer.slice(this.buffer.byteOffset+2,this.buffer.byteOffset+this.position))}toBits(){if(this.sub_type!==t.SUBTYPE_VECTOR)throw new L("Binary sub_type is not Vector");if(this.buffer[0]!==t.VECTOR_TYPE.PackedBit)throw new L("Binary datatype field is not packed bit");let r=(this.length()-2)*8-this.buffer[1],n=new Int8Array(r);for(let s=0;s<n.length;s++){let i=s/8|0,o=this.buffer[i+2],u=7-s%8,a=o>>u&1;n[s]=a}return n}static fromInt8Array(e){let r=q.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Int8,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return r.set(n,2),new this(r,this.SUBTYPE_VECTOR)}static fromFloat32Array(e){let r=q.allocate(e.byteLength+2);r[0]=t.VECTOR_TYPE.Float32,r[1]=0;let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);return r.set(n,2),me.isBigEndian&&q.swap32(new Uint8Array(r.buffer,2)),new this(r,this.SUBTYPE_VECTOR)}static fromPackedBits(e,r=0){let n=q.allocate(e.byteLength+2);return n[0]=t.VECTOR_TYPE.PackedBit,n[1]=r,n.set(e,2),new this(n,this.SUBTYPE_VECTOR)}static fromBits(e){let r=e.length+7>>>3,n=new Uint8Array(r+2);n[0]=t.VECTOR_TYPE.PackedBit;let s=e.length%8;n[1]=s===0?0:8-s;for(let i=0;i<e.length;i++){let o=i>>>3,u=e[i];if(u!==0&&u!==1)throw new L(`Invalid bit value at ${i}: must be 0 or 1, found ${e[i]}`);if(u===0)continue;let a=7-i%8;n[o+2]|=u<<a}return new this(n,t.SUBTYPE_VECTOR)}};Le.BSON_BINARY_SUBTYPE_DEFAULT=0;Le.BUFFER_SIZE=256;Le.SUBTYPE_DEFAULT=0;Le.SUBTYPE_FUNCTION=1;Le.SUBTYPE_BYTE_ARRAY=2;Le.SUBTYPE_UUID_OLD=3;Le.SUBTYPE_UUID=4;Le.SUBTYPE_MD5=5;Le.SUBTYPE_ENCRYPTED=6;Le.SUBTYPE_COLUMN=7;Le.SUBTYPE_SENSITIVE=8;Le.SUBTYPE_VECTOR=9;Le.SUBTYPE_USER_DEFINED=128;Le.VECTOR_TYPE=Object.freeze({Int8:3,Float32:39,PackedBit:16});function N8(t){if(t.sub_type!==Le.SUBTYPE_VECTOR)return;let e=t.position,r=t.buffer[0],n=t.buffer[1];if((r===Le.VECTOR_TYPE.Float32||r===Le.VECTOR_TYPE.Int8)&&n!==0)throw new L("Invalid Vector: padding must be zero for int8 and float32 vectors");if(r===Le.VECTOR_TYPE.PackedBit&&n!==0&&e===2)throw new L("Invalid Vector: padding must be zero for packed bit vectors that are empty");if(r===Le.VECTOR_TYPE.PackedBit&&n>7)throw new L(`Invalid Vector: padding must be a value between 0 and 7. found: ${n}`)}var Pg=16,uV=/^[0-9A-F]{32}$/i,aV=/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i,qo=class t extends Le{constructor(e){let r;if(e==null)r=t.generate();else if(e instanceof t)r=q.toLocalBufferType(new Uint8Array(e.buffer));else if(ArrayBuffer.isView(e)&&e.byteLength===Pg)r=q.toLocalBufferType(e);else if(typeof e=="string")r=t.bytesFromString(e);else throw new L("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");super(r,cE)}get id(){return this.buffer}set id(e){this.buffer=e}toHexString(e=!0){return e?[q.toHex(this.buffer.subarray(0,4)),q.toHex(this.buffer.subarray(4,6)),q.toHex(this.buffer.subarray(6,8)),q.toHex(this.buffer.subarray(8,10)),q.toHex(this.buffer.subarray(10,16))].join("-"):q.toHex(this.buffer)}toString(e){return e==="hex"?q.toHex(this.id):e==="base64"?q.toBase64(this.id):this.toHexString()}toJSON(){return this.toHexString()}equals(e){if(!e)return!1;if(e instanceof t)return q.equals(e.id,this.id);try{return q.equals(new t(e).id,this.id)}catch{return!1}}toBinary(){return new Le(this.id,Le.SUBTYPE_UUID)}static generate(){let e=q.randomBytes(Pg);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,e}static isValid(e){return e?typeof e=="string"?t.isValidUUIDString(e):La(e)?e.byteLength===Pg:e._bsontype==="Binary"&&e.sub_type===this.SUBTYPE_UUID&&e.buffer.byteLength===16:!1}static createFromHexString(e){let r=t.bytesFromString(e);return new t(r)}static createFromBase64(e){return new t(q.fromBase64(e))}static bytesFromString(e){if(!t.isValidUUIDString(e))throw new L("UUID string representation must be 32 hex digits or canonical hyphenated representation");return q.fromHex(e.replace(/-/g,""))}static isValidUUIDString(e){return uV.test(e)||aV.test(e)}inspect(e,r,n){return n??=Un,`new UUID(${n(this.toHexString(),r)})`}},Hi=class t extends Nr{get _bsontype(){return"Code"}constructor(e,r){super(),this.code=e.toString(),this.scope=r??null}toJSON(){return this.scope!=null?{code:this.code,scope:this.scope}:{code:this.code}}toExtendedJSON(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}}static fromExtendedJSON(e){return new t(e.$code,e.$scope)}inspect(e,r,n){n??=Un;let s=n(this.code,r),i=s.includes(`
`);this.scope!=null&&(s+=`,${i?`
`:" "}${n(this.scope,r)}`);let o=i&&this.scope===null;return`new Code(${i?`
`:""}${s}${o?`
`:""})`}};function F8(t){return t!=null&&typeof t=="object"&&"$id"in t&&t.$id!=null&&"$ref"in t&&typeof t.$ref=="string"&&(!("$db"in t)||"$db"in t&&typeof t.$db=="string")}var Ei=class t extends Nr{get _bsontype(){return"DBRef"}constructor(e,r,n,s){super();let i=e.split(".");i.length===2&&(n=i.shift(),e=i.shift()),this.collection=e,this.oid=r,this.db=n,this.fields=s||{}}get namespace(){return this.collection}set namespace(e){this.collection=e}toJSON(){let e=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return this.db!=null&&(e.$db=this.db),e}toExtendedJSON(e){e=e||{};let r={$ref:this.collection,$id:this.oid};return e.legacy||(this.db&&(r.$db=this.db),r=Object.assign(r,this.fields)),r}static fromExtendedJSON(e){let r=Object.assign({},e);return delete r.$ref,delete r.$id,delete r.$db,new t(e.$ref,e.$id,e.$db,r)}inspect(e,r,n){n??=Un;let s=[n(this.namespace,r),n(this.oid,r),...this.db?[n(this.db,r)]:[],...Object.keys(this.fields).length>0?[n(this.fields,r)]:[]];return s[1]=n===Un?`new ObjectId(${s[1]})`:s[1],`new DBRef(${s.join(", ")})`}};function R8(t){if(t==="")return t;let e=0,r=t[e]==="-",n=t[e]==="+";(n||r)&&(e+=1);let s=!1;for(;e<t.length&&t[e]==="0";++e)s=!0;return s?`${r?"-":""}${t.length===e?"0":t.slice(e)}`:n?t.slice(1):t}function cV(t,e){e=e??10;let r="0123456789abcdefghijklmnopqrstuvwxyz".slice(0,e);return new RegExp(`[^-+${r}]`,"i").test(t)?!1:t}var us;try{us=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}var t8=65536,lV=1<<24,za=t8*t8,v8=za*za,r8=v8/2,n8={},s8={},hV=20,fV=/^(\+?0|(\+|-)?[1-9][0-9]*)$/,ne=class t extends Nr{get _bsontype(){return"Long"}get __isLong__(){return!0}constructor(e=0,r,n){super();let s=typeof r=="boolean"?r:!!n,i=typeof r=="number"?r:0,o=typeof e=="string"?t.fromString(e,s):typeof e=="bigint"?t.fromBigInt(e,s):{low:e|0,high:i|0,unsigned:s};this.low=o.low,this.high=o.high,this.unsigned=o.unsigned}static fromBits(e,r,n){return new t(e,r,n)}static fromInt(e,r){let n,s,i;return r?(e>>>=0,(i=0<=e&&e<256)&&(s=s8[e],s)?s:(n=t.fromBits(e,(e|0)<0?-1:0,!0),i&&(s8[e]=n),n)):(e|=0,(i=-128<=e&&e<128)&&(s=n8[e],s)?s:(n=t.fromBits(e,e<0?-1:0,!1),i&&(n8[e]=n),n))}static fromNumber(e,r){if(isNaN(e))return r?t.UZERO:t.ZERO;if(r){if(e<0)return t.UZERO;if(e>=v8)return t.MAX_UNSIGNED_VALUE}else{if(e<=-r8)return t.MIN_VALUE;if(e+1>=r8)return t.MAX_VALUE}return e<0?t.fromNumber(-e,r).neg():t.fromBits(e%za|0,e/za|0,r)}static fromBigInt(e,r){let n=BigInt(4294967295),s=BigInt(32);return new t(Number(e&n),Number(e>>s&n),r)}static _fromString(e,r,n){if(e.length===0)throw new L("empty string");if(n<2||36<n)throw new L("radix");let s;if((s=e.indexOf("-"))>0)throw new L("interior hyphen");if(s===0)return t._fromString(e.substring(1),r,n).neg();let i=t.fromNumber(Math.pow(n,8)),o=t.ZERO;for(let u=0;u<e.length;u+=8){let a=Math.min(8,e.length-u),c=parseInt(e.substring(u,u+a),n);if(a<8){let l=t.fromNumber(Math.pow(n,a));o=o.mul(l).add(t.fromNumber(c))}else o=o.mul(i),o=o.add(t.fromNumber(c))}return o.unsigned=r,o}static fromStringStrict(e,r,n){let s=!1;if(typeof r=="number"?(n=r,r=!1):s=!!r,n??=10,e.trim()!==e)throw new L(`Input: '${e}' contains leading and/or trailing whitespace`);if(!cV(e,n))throw new L(`Input: '${e}' contains invalid characters for radix: ${n}`);let i=R8(e),o=t._fromString(i,s,n);if(o.toString(n).toLowerCase()!==i.toLowerCase())throw new L(`Input: ${e} is not representable as ${o.unsigned?"an unsigned":"a signed"} 64-bit Long ${n!=null?`with radix: ${n}`:""}`);return o}static fromString(e,r,n){let s=!1;return typeof r=="number"?(n=r,r=!1):s=!!r,n??=10,e==="NaN"&&n<24||(e==="Infinity"||e==="+Infinity"||e==="-Infinity")&&n<35?t.ZERO:t._fromString(e,s,n)}static fromBytes(e,r,n){return n?t.fromBytesLE(e,r):t.fromBytesBE(e,r)}static fromBytesLE(e,r){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,r)}static fromBytesBE(e,r){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],r)}static isLong(e){return e!=null&&typeof e=="object"&&"__isLong__"in e&&e.__isLong__===!0}static fromValue(e,r){return typeof e=="number"?t.fromNumber(e,r):typeof e=="string"?t.fromString(e,r):t.fromBits(e.low,e.high,typeof r=="boolean"?r:e.unsigned)}add(e){t.isLong(e)||(e=t.fromValue(e));let r=this.high>>>16,n=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,u=e.high&65535,a=e.low>>>16,c=e.low&65535,l=0,h=0,f=0,p=0;return p+=i+c,f+=p>>>16,p&=65535,f+=s+a,h+=f>>>16,f&=65535,h+=n+u,l+=h>>>16,h&=65535,l+=r+o,l&=65535,t.fromBits(f<<16|p,l<<16|h,this.unsigned)}and(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)}compare(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;let r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1}comp(e){return this.compare(e)}divide(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw new L("division by zero");if(us){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;let i=(this.unsigned?us.div_u:us.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(i,us.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;let r,n,s;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;s=t.UZERO}else{if(this.eq(t.MIN_VALUE))return e.eq(t.ONE)||e.eq(t.NEG_ONE)?t.MIN_VALUE:e.eq(t.MIN_VALUE)?t.ONE:(r=this.shr(1).div(e).shl(1),r.eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(n=this.sub(e.mul(r)),s=r.add(n.div(e)),s));if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();s=t.ZERO}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));let i=Math.ceil(Math.log(r)/Math.LN2),o=i<=48?1:Math.pow(2,i-48),u=t.fromNumber(r),a=u.mul(e);for(;a.isNegative()||a.gt(n);)r-=o,u=t.fromNumber(r,this.unsigned),a=u.mul(e);u.isZero()&&(u=t.ONE),s=s.add(u),n=n.sub(a)}return s}div(e){return this.divide(e)}equals(e){return t.isLong(e)||(e=t.fromValue(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low}eq(e){return this.equals(e)}getHighBits(){return this.high}getHighBitsUnsigned(){return this.high>>>0}getLowBits(){return this.low}getLowBitsUnsigned(){return this.low>>>0}getNumBitsAbs(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();let e=this.high!==0?this.high:this.low,r;for(r=31;r>0&&!(e&1<<r);r--);return this.high!==0?r+33:r+1}greaterThan(e){return this.comp(e)>0}gt(e){return this.greaterThan(e)}greaterThanOrEqual(e){return this.comp(e)>=0}gte(e){return this.greaterThanOrEqual(e)}ge(e){return this.greaterThanOrEqual(e)}isEven(){return(this.low&1)===0}isNegative(){return!this.unsigned&&this.high<0}isOdd(){return(this.low&1)===1}isPositive(){return this.unsigned||this.high>=0}isZero(){return this.high===0&&this.low===0}lessThan(e){return this.comp(e)<0}lt(e){return this.lessThan(e)}lessThanOrEqual(e){return this.comp(e)<=0}lte(e){return this.lessThanOrEqual(e)}modulo(e){if(t.isLong(e)||(e=t.fromValue(e)),us){let r=(this.unsigned?us.rem_u:us.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(r,us.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))}mod(e){return this.modulo(e)}rem(e){return this.modulo(e)}multiply(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),us){let m=us.mul(this.low,this.high,e.low,e.high);return t.fromBits(m,us.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);let r=this.high>>>16,n=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,u=e.high&65535,a=e.low>>>16,c=e.low&65535,l=0,h=0,f=0,p=0;return p+=i*c,f+=p>>>16,p&=65535,f+=s*c,h+=f>>>16,f&=65535,f+=i*a,h+=f>>>16,f&=65535,h+=n*c,l+=h>>>16,h&=65535,h+=s*a,l+=h>>>16,h&=65535,h+=i*u,l+=h>>>16,h&=65535,l+=r*c+n*a+s*u+i*o,l&=65535,t.fromBits(f<<16|p,l<<16|h,this.unsigned)}mul(e){return this.multiply(e)}negate(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)}neg(){return this.negate()}not(){return t.fromBits(~this.low,~this.high,this.unsigned)}notEquals(e){return!this.equals(e)}neq(e){return this.notEquals(e)}ne(e){return this.notEquals(e)}or(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)}shiftLeft(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)}shl(e){return this.shiftLeft(e)}shiftRight(e){return t.isLong(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)}shr(e){return this.shiftRight(e)}shiftRightUnsigned(e){if(t.isLong(e)&&(e=e.toInt()),e&=63,e===0)return this;{let r=this.high;if(e<32){let n=this.low;return t.fromBits(n>>>e|r<<32-e,r>>>e,this.unsigned)}else return e===32?t.fromBits(r,0,this.unsigned):t.fromBits(r>>>e-32,0,this.unsigned)}}shr_u(e){return this.shiftRightUnsigned(e)}shru(e){return this.shiftRightUnsigned(e)}subtract(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())}sub(e){return this.subtract(e)}toInt(){return this.unsigned?this.low>>>0:this.low}toNumber(){return this.unsigned?(this.high>>>0)*za+(this.low>>>0):this.high*za+(this.low>>>0)}toBigInt(){return BigInt(this.toString())}toBytes(e){return e?this.toBytesLE():this.toBytesBE()}toBytesLE(){let e=this.high,r=this.low;return[r&255,r>>>8&255,r>>>16&255,r>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]}toBytesBE(){let e=this.high,r=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,r>>>24,r>>>16&255,r>>>8&255,r&255]}toSigned(){return this.unsigned?t.fromBits(this.low,this.high,!1):this}toString(e){if(e=e||10,e<2||36<e)throw new L("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(t.MIN_VALUE)){let i=t.fromNumber(e),o=this.div(i),u=o.mul(i).sub(this);return o.toString(e)+u.toInt().toString(e)}else return"-"+this.neg().toString(e);let r=t.fromNumber(Math.pow(e,6),this.unsigned),n=this,s="";for(;;){let i=n.div(r),u=(n.sub(i.mul(r)).toInt()>>>0).toString(e);if(n=i,n.isZero())return u+s;for(;u.length<6;)u="0"+u;s=""+u+s}}toUnsigned(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)}xor(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)}eqz(){return this.isZero()}le(e){return this.lessThanOrEqual(e)}toExtendedJSON(e){return e&&e.relaxed?this.toNumber():{$numberLong:this.toString()}}static fromExtendedJSON(e,r){let{useBigInt64:n=!1,relaxed:s=!0}={...r};if(e.$numberLong.length>hV)throw new L("$numberLong string is too long");if(!fV.test(e.$numberLong))throw new L(`$numberLong string "${e.$numberLong}" is in an invalid format`);if(n){let o=BigInt(e.$numberLong);return BigInt.asIntN(64,o)}let i=t.fromString(e.$numberLong);return s?i.toNumber():i}inspect(e,r,n){n??=Un;let s=n(this.toString(),r),i=this.unsigned?`, ${n(this.unsigned,r)}`:"";return`new Long(${s}${i})`}};ne.TWO_PWR_24=ne.fromInt(lV);ne.MAX_UNSIGNED_VALUE=ne.fromBits(-1,-1,!0);ne.ZERO=ne.fromInt(0);ne.UZERO=ne.fromInt(0,!0);ne.ONE=ne.fromInt(1);ne.UONE=ne.fromInt(1,!0);ne.NEG_ONE=ne.fromInt(-1);ne.MAX_VALUE=ne.fromBits(-1,2147483647,!1);ne.MIN_VALUE=ne.fromBits(0,-2147483648,!1);var dV=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,pV=/^(\+|-)?(Infinity|inf)$/i,mV=/^(\+|-)?NaN$/i,ka=6111,Xl=-6176,i8=6176,o8=34,Ng=q.fromNumberArray([124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),u8=q.fromNumberArray([248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),a8=q.fromNumberArray([120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse()),yV=/^([-+])?(\d+)?$/,gV=31,c8=16383,EV=30,_V=31;function l8(t){return!isNaN(parseInt(t,10))}function AV(t){let e=ne.fromNumber(1e9),r=ne.fromNumber(0);if(!t.parts[0]&&!t.parts[1]&&!t.parts[2]&&!t.parts[3])return{quotient:t,rem:r};for(let n=0;n<=3;n++)r=r.shiftLeft(32),r=r.add(new ne(t.parts[n],0)),t.parts[n]=r.div(e).low,r=r.modulo(e);return{quotient:t,rem:r}}function SV(t,e){if(!t&&!e)return{high:ne.fromNumber(0),low:ne.fromNumber(0)};let r=t.shiftRightUnsigned(32),n=new ne(t.getLowBits(),0),s=e.shiftRightUnsigned(32),i=new ne(e.getLowBits(),0),o=r.multiply(s),u=r.multiply(i),a=n.multiply(s),c=n.multiply(i);return o=o.add(u.shiftRightUnsigned(32)),u=new ne(u.getLowBits(),0).add(a).add(c.shiftRightUnsigned(32)),o=o.add(u.shiftRightUnsigned(32)),c=u.shiftLeft(32).add(new ne(c.getLowBits(),0)),{high:o,low:c}}function OV(t,e){let r=t.high>>>0,n=e.high>>>0;if(r<n)return!0;if(r===n){let s=t.low>>>0,i=e.low>>>0;if(s<i)return!0}return!1}function Us(t,e){throw new L(`"${t}" is not a valid Decimal128 string - ${e}`)}var Fu=class t extends Nr{get _bsontype(){return"Decimal128"}constructor(e){if(super(),typeof e=="string")this.bytes=t.fromString(e).bytes;else if(e instanceof Uint8Array||La(e)){if(e.byteLength!==16)throw new L("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}else throw new L("Decimal128 must take a Buffer or string")}static fromString(e){return t._fromString(e,{allowRounding:!1})}static fromStringWithRounding(e){return t._fromString(e,{allowRounding:!0})}static _fromString(e,r){let n=!1,s=!1,i=!1,o=!1,u=0,a=0,c=0,l=0,h=0,f=[0],p=0,m=0,y=0,A=0,S=new ne(0,0),O=new ne(0,0),D=0,b=0;if(e.length>=7e3)throw new L(""+e+" not a valid Decimal128 string");let N=e.match(dV),R=e.match(pV),F=e.match(mV);if(!N&&!R&&!F||e.length===0)throw new L(""+e+" not a valid Decimal128 string");if(N){let v=N[2],x=N[4],W=N[5],te=N[6];x&&te===void 0&&Us(e,"missing exponent power"),x&&v===void 0&&Us(e,"missing exponent base"),x===void 0&&(W||te)&&Us(e,"missing e before exponent")}if((e[b]==="+"||e[b]==="-")&&(s=!0,n=e[b++]==="-"),!l8(e[b])&&e[b]!=="."){if(e[b]==="i"||e[b]==="I")return new t(n?u8:a8);if(e[b]==="N")return new t(Ng)}for(;l8(e[b])||e[b]===".";){if(e[b]==="."){i&&Us(e,"contains multiple periods"),i=!0,b=b+1;continue}p<o8&&(e[b]!=="0"||o)&&(o||(h=a),o=!0,f[m++]=parseInt(e[b],10),p=p+1),o&&(c=c+1),i&&(l=l+1),a=a+1,b=b+1}if(i&&!a)throw new L(""+e+" not a valid Decimal128 string");if(e[b]==="e"||e[b]==="E"){let v=e.substr(++b).match(yV);if(!v||!v[2])return new t(Ng);A=parseInt(v[0],10),b=b+v[0].length}if(e[b])return new t(Ng);if(!p)f[0]=0,c=1,p=1,u=0;else if(y=p-1,u=c,u!==1)for(;e[h+u-1+Number(s)+Number(i)]==="0";)u=u-1;for(A<=l&&l>A+16384?A=Xl:A=A-l;A>ka;){if(y=y+1,y>=o8){if(u===0){A=ka;break}Us(e,"overflow")}A=A-1}if(r.allowRounding){for(;A<Xl||p<c;){if(y===0&&u<p){A=Xl,u=0;break}if(p<c?c=c-1:y=y-1,A<ka)A=A+1;else{if(f.join("").match(/^0+$/)){A=ka;break}Us(e,"overflow")}}if(y+1<u){let v=a;i&&(h=h+1,v=v+1),s&&(h=h+1,v=v+1);let x=parseInt(e[h+y+1],10),W=0;if(x>=5&&(W=1,x===5)){W=f[y]%2===1?1:0;for(let te=h+y+2;te<v;te++)if(parseInt(e[te],10)){W=1;break}}if(W){let te=y;for(;te>=0&&++f[te]>9;te--)if(f[te]=0,te===0)if(A<ka)A=A+1,f[te]=1;else return new t(n?u8:a8)}}}else{for(;A<Xl||p<c;){if(y===0){if(u===0){A=Xl;break}Us(e,"exponent underflow")}p<c?(e[c-1+Number(s)+Number(i)]!=="0"&&u!==0&&Us(e,"inexact rounding"),c=c-1):(f[y]!==0&&Us(e,"inexact rounding"),y=y-1),A<ka?A=A+1:Us(e,"overflow")}y+1<u&&(i&&(h=h+1),s&&(h=h+1),parseInt(e[h+y+1],10)!==0&&Us(e,"inexact rounding"))}if(S=ne.fromNumber(0),O=ne.fromNumber(0),u===0)S=ne.fromNumber(0),O=ne.fromNumber(0);else if(y<17){let v=0;for(O=ne.fromNumber(f[v++]),S=new ne(0,0);v<=y;v++)O=O.multiply(ne.fromNumber(10)),O=O.add(ne.fromNumber(f[v]))}else{let v=0;for(S=ne.fromNumber(f[v++]);v<=y-17;v++)S=S.multiply(ne.fromNumber(10)),S=S.add(ne.fromNumber(f[v]));for(O=ne.fromNumber(f[v++]);v<=y;v++)O=O.multiply(ne.fromNumber(10)),O=O.add(ne.fromNumber(f[v]))}let G=SV(S,ne.fromString("100000000000000000"));G.low=G.low.add(O),OV(G.low,O)&&(G.high=G.high.add(ne.fromNumber(1))),D=A+i8;let z={low:ne.fromNumber(0),high:ne.fromNumber(0)};G.high.shiftRightUnsigned(49).and(ne.fromNumber(1)).equals(ne.fromNumber(1))?(z.high=z.high.or(ne.fromNumber(3).shiftLeft(61)),z.high=z.high.or(ne.fromNumber(D).and(ne.fromNumber(16383).shiftLeft(47))),z.high=z.high.or(G.high.and(ne.fromNumber(0x7fffffffffff)))):(z.high=z.high.or(ne.fromNumber(D&16383).shiftLeft(49)),z.high=z.high.or(G.high.and(ne.fromNumber(562949953421311)))),z.low=G.low,n&&(z.high=z.high.or(ne.fromString("9223372036854775808")));let j=q.allocateUnsafe(16);return b=0,j[b++]=z.low.low&255,j[b++]=z.low.low>>8&255,j[b++]=z.low.low>>16&255,j[b++]=z.low.low>>24&255,j[b++]=z.low.high&255,j[b++]=z.low.high>>8&255,j[b++]=z.low.high>>16&255,j[b++]=z.low.high>>24&255,j[b++]=z.high.low&255,j[b++]=z.high.low>>8&255,j[b++]=z.high.low>>16&255,j[b++]=z.high.low>>24&255,j[b++]=z.high.high&255,j[b++]=z.high.high>>8&255,j[b++]=z.high.high>>16&255,j[b++]=z.high.high>>24&255,new t(j)}toString(){let e,r=0,n=new Array(36);for(let b=0;b<n.length;b++)n[b]=0;let s=0,i=!1,o,u={parts:[0,0,0,0]},a,c,l=[];s=0;let h=this.bytes,f=h[s++]|h[s++]<<8|h[s++]<<16|h[s++]<<24,p=h[s++]|h[s++]<<8|h[s++]<<16|h[s++]<<24,m=h[s++]|h[s++]<<8|h[s++]<<16|h[s++]<<24,y=h[s++]|h[s++]<<8|h[s++]<<16|h[s++]<<24;s=0,{low:new ne(f,p),high:new ne(m,y)}.high.lessThan(ne.ZERO)&&l.push("-");let S=y>>26&gV;if(S>>3===3){if(S===EV)return l.join("")+"Infinity";if(S===_V)return"NaN";e=y>>15&c8,o=8+(y>>14&1)}else o=y>>14&7,e=y>>17&c8;let O=e-i8;if(u.parts[0]=(y&16383)+((o&15)<<14),u.parts[1]=m,u.parts[2]=p,u.parts[3]=f,u.parts[0]===0&&u.parts[1]===0&&u.parts[2]===0&&u.parts[3]===0)i=!0;else for(c=3;c>=0;c--){let b=0,N=AV(u);if(u=N.quotient,b=N.rem.low,!!b)for(a=8;a>=0;a--)n[c*9+a]=b%10,b=Math.floor(b/10)}if(i)r=1,n[s]=0;else for(r=36;!n[s];)r=r-1,s=s+1;let D=r-1+O;if(D>=34||D<=-7||O>0){if(r>34)return l.push("0"),O>0?l.push(`E+${O}`):O<0&&l.push(`E${O}`),l.join("");l.push(`${n[s++]}`),r=r-1,r&&l.push(".");for(let b=0;b<r;b++)l.push(`${n[s++]}`);l.push("E"),D>0?l.push(`+${D}`):l.push(`${D}`)}else if(O>=0)for(let b=0;b<r;b++)l.push(`${n[s++]}`);else{let b=r+O;if(b>0)for(let N=0;N<b;N++)l.push(`${n[s++]}`);else l.push("0");for(l.push(".");b++<0;)l.push("0");for(let N=0;N<r-Math.max(b-1,0);N++)l.push(`${n[s++]}`)}return l.join("")}toJSON(){return{$numberDecimal:this.toString()}}toExtendedJSON(){return{$numberDecimal:this.toString()}}static fromExtendedJSON(e){return t.fromString(e.$numberDecimal)}inspect(e,r,n){return n??=Un,`new Decimal128(${n(this.toString(),r)})`}},Lo=class t extends Nr{get _bsontype(){return"Double"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e}static fromString(e){let r=Number(e);if(e==="NaN")return new t(NaN);if(e==="Infinity")return new t(1/0);if(e==="-Infinity")return new t(-1/0);if(!Number.isFinite(r))throw new L(`Input: ${e} is not representable as a Double`);if(e.trim()!==e)throw new L(`Input: '${e}' contains whitespace`);if(e==="")throw new L("Input is an empty string");if(/[^-0-9.+eE]/.test(e))throw new L(`Input: '${e}' is not in decimal or exponential notation`);return new t(r)}valueOf(){return this.value}toJSON(){return this.value}toString(e){return this.value.toString(e)}toExtendedJSON(e){return e&&(e.legacy||e.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-0.0"}:{$numberDouble:Number.isInteger(this.value)?this.value.toFixed(1):this.value.toString()}}static fromExtendedJSON(e,r){let n=parseFloat(e.$numberDouble);return r&&r.relaxed?n:new t(n)}inspect(e,r,n){return n??=Un,`new Double(${n(this.value,r)})`}},jo=class t extends Nr{get _bsontype(){return"Int32"}constructor(e){super(),e instanceof Number&&(e=e.valueOf()),this.value=+e|0}static fromString(e){let r=R8(e),n=Number(e);if(r1<n)throw new L(`Input: '${e}' is larger than the maximum value for Int32`);if(n1>n)throw new L(`Input: '${e}' is smaller than the minimum value for Int32`);if(Number.isSafeInteger(n)){if(n.toString()!==r)throw new L(`Input: '${e}' is not a valid Int32 string`)}else throw new L(`Input: '${e}' is not a safe integer`);return new t(n)}valueOf(){return this.value}toString(e){return this.value.toString(e)}toJSON(){return this.value}toExtendedJSON(e){return e&&(e.relaxed||e.legacy)?this.value:{$numberInt:this.value.toString()}}static fromExtendedJSON(e,r){return r&&r.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)}inspect(e,r,n){return n??=Un,`new Int32(${n(this.value,r)})`}},Ru=class t extends Nr{get _bsontype(){return"MaxKey"}toExtendedJSON(){return{$maxKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MaxKey()"}},vu=class t extends Nr{get _bsontype(){return"MinKey"}toExtendedJSON(){return{$minKey:1}}static fromExtendedJSON(){return new t}inspect(){return"new MinKey()"}},Pu=null,Zl=new WeakMap,Gi=class t extends Nr{get _bsontype(){return"ObjectId"}constructor(e){super();let r;if(typeof e=="object"&&e&&"id"in e){if(typeof e.id!="string"&&!ArrayBuffer.isView(e.id))throw new L("Argument passed in must have an id that is of type string or Buffer");"toHexString"in e&&typeof e.toHexString=="function"?r=q.fromHex(e.toHexString()):r=e.id}else r=e;if(r==null||typeof r=="number")this.buffer=t.generate(typeof r=="number"?r:void 0);else if(ArrayBuffer.isView(r)&&r.byteLength===12)this.buffer=q.toLocalBufferType(r);else if(typeof r=="string")if(t.validateHexString(r))this.buffer=q.fromHex(r),t.cacheHexString&&Zl.set(this,r);else throw new L("input must be a 24 character hex string, 12 byte Uint8Array, or an integer");else throw new L("Argument passed in does not match the accepted types")}get id(){return this.buffer}set id(e){this.buffer=e,t.cacheHexString&&Zl.set(this,q.toHex(e))}static validateHexString(e){if(e?.length!==24)return!1;for(let r=0;r<24;r++){let n=e.charCodeAt(r);if(!(n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70))return!1}return!0}toHexString(){if(t.cacheHexString){let r=Zl.get(this);if(r)return r}let e=q.toHex(this.id);return t.cacheHexString&&Zl.set(this,e),e}static getInc(){return t.index=(t.index+1)%16777215}static generate(e){typeof e!="number"&&(e=Math.floor(Date.now()/1e3));let r=t.getInc(),n=q.allocateUnsafe(12);return me.setInt32BE(n,0,e),Pu===null&&(Pu=q.randomBytes(5)),n[4]=Pu[0],n[5]=Pu[1],n[6]=Pu[2],n[7]=Pu[3],n[8]=Pu[4],n[11]=r&255,n[10]=r>>8&255,n[9]=r>>16&255,n}toString(e){return e==="base64"?q.toBase64(this.id):e==="hex"?this.toHexString():this.toHexString()}toJSON(){return this.toHexString()}static is(e){return e!=null&&typeof e=="object"&&"_bsontype"in e&&e._bsontype==="ObjectId"}equals(e){if(e==null)return!1;if(t.is(e))return this.buffer[11]===e.buffer[11]&&q.equals(this.buffer,e.buffer);if(typeof e=="string")return e.toLowerCase()===this.toHexString();if(typeof e=="object"&&typeof e.toHexString=="function"){let r=e.toHexString(),n=this.toHexString();return typeof r=="string"&&r.toLowerCase()===n}return!1}getTimestamp(){let e=new Date,r=me.getUint32BE(this.buffer,0);return e.setTime(Math.floor(r)*1e3),e}static createPk(){return new t}serializeInto(e,r){return e[r]=this.buffer[0],e[r+1]=this.buffer[1],e[r+2]=this.buffer[2],e[r+3]=this.buffer[3],e[r+4]=this.buffer[4],e[r+5]=this.buffer[5],e[r+6]=this.buffer[6],e[r+7]=this.buffer[7],e[r+8]=this.buffer[8],e[r+9]=this.buffer[9],e[r+10]=this.buffer[10],e[r+11]=this.buffer[11],12}static createFromTime(e){let r=q.allocate(12);for(let n=11;n>=4;n--)r[n]=0;return me.setInt32BE(r,0,e),new t(r)}static createFromHexString(e){if(e?.length!==24)throw new L("hex string must be 24 characters");return new t(q.fromHex(e))}static createFromBase64(e){if(e?.length!==16)throw new L("base64 string must be 16 characters");return new t(q.fromBase64(e))}static isValid(e){if(e==null)return!1;if(typeof e=="string")return t.validateHexString(e);try{return new t(e),!0}catch{return!1}}toExtendedJSON(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}}static fromExtendedJSON(e){return new t(e.$oid)}isCached(){return t.cacheHexString&&Zl.has(this)}inspect(e,r,n){return n??=Un,`new ObjectId(${n(this.toHexString(),r)})`}};Gi.index=Math.floor(Math.random()*16777215);function ed(t,e,r){let n=5;if(Array.isArray(t))for(let s=0;s<t.length;s++)n+=h8(s.toString(),t[s],e,!0,r);else{typeof t?.toBSON=="function"&&(t=t.toBSON());for(let s of Object.keys(t))n+=h8(s,t[s],e,!1,r)}return n}function h8(t,e,r=!1,n=!1,s=!1){switch(typeof e?.toBSON=="function"&&(e=e.toBSON()),typeof e){case"string":return 1+q.utf8ByteLength(t)+1+4+q.utf8ByteLength(e)+1;case"number":return Math.floor(e)===e&&e>=g8&&e<=y8&&e>=n1&&e<=r1?(t!=null?q.utf8ByteLength(t)+1:0)+5:(t!=null?q.utf8ByteLength(t)+1:0)+9;case"undefined":return n||!s?(t!=null?q.utf8ByteLength(t)+1:0)+1:0;case"boolean":return(t!=null?q.utf8ByteLength(t)+1:0)+2;case"object":if(e!=null&&typeof e._bsontype=="string"&&e[Wa]!==Nu)throw new Wi;if(e==null||e._bsontype==="MinKey"||e._bsontype==="MaxKey")return(t!=null?q.utf8ByteLength(t)+1:0)+1;if(e._bsontype==="ObjectId")return(t!=null?q.utf8ByteLength(t)+1:0)+13;if(e instanceof Date||Ua(e))return(t!=null?q.utf8ByteLength(t)+1:0)+9;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer||tE(e))return(t!=null?q.utf8ByteLength(t)+1:0)+6+e.byteLength;if(e._bsontype==="Long"||e._bsontype==="Double"||e._bsontype==="Timestamp")return(t!=null?q.utf8ByteLength(t)+1:0)+9;if(e._bsontype==="Decimal128")return(t!=null?q.utf8ByteLength(t)+1:0)+17;if(e._bsontype==="Code")return e.scope!=null&&Object.keys(e.scope).length>0?(t!=null?q.utf8ByteLength(t)+1:0)+1+4+4+q.utf8ByteLength(e.code.toString())+1+ed(e.scope,r,s):(t!=null?q.utf8ByteLength(t)+1:0)+1+4+q.utf8ByteLength(e.code.toString())+1;if(e._bsontype==="Binary"){let i=e;return i.sub_type===Le.SUBTYPE_BYTE_ARRAY?(t!=null?q.utf8ByteLength(t)+1:0)+(i.position+1+4+1+4):(t!=null?q.utf8ByteLength(t)+1:0)+(i.position+1+4+1)}else{if(e._bsontype==="Symbol")return(t!=null?q.utf8ByteLength(t)+1:0)+q.utf8ByteLength(e.value)+4+1+1;if(e._bsontype==="DBRef"){let i=Object.assign({$ref:e.collection,$id:e.oid},e.fields);return e.db!=null&&(i.$db=e.db),(t!=null?q.utf8ByteLength(t)+1:0)+1+ed(i,r,s)}else return e instanceof RegExp||ja(e)?(t!=null?q.utf8ByteLength(t)+1:0)+1+q.utf8ByteLength(e.source)+1+(e.global?1:0)+(e.ignoreCase?1:0)+(e.multiline?1:0)+1:e._bsontype==="BSONRegExp"?(t!=null?q.utf8ByteLength(t)+1:0)+1+q.utf8ByteLength(e.pattern)+1+q.utf8ByteLength(e.options)+1:(t!=null?q.utf8ByteLength(t)+1:0)+ed(e,r,s)+1}case"function":if(r)return(t!=null?q.utf8ByteLength(t)+1:0)+1+4+q.utf8ByteLength(e.toString())+1}return 0}function wV(t){return t.split("").sort().join("")}var Ki=class t extends Nr{get _bsontype(){return"BSONRegExp"}constructor(e,r){if(super(),this.pattern=e,this.options=wV(r??""),this.pattern.indexOf("\0")!==-1)throw new L(`BSON Regex patterns cannot contain null bytes, found: ${JSON.stringify(this.pattern)}`);if(this.options.indexOf("\0")!==-1)throw new L(`BSON Regex options cannot contain null bytes, found: ${JSON.stringify(this.options)}`);for(let n=0;n<this.options.length;n++)if(!(this.options[n]==="i"||this.options[n]==="m"||this.options[n]==="x"||this.options[n]==="l"||this.options[n]==="s"||this.options[n]==="u"))throw new L(`The regular expression option [${this.options[n]}] is not supported`)}static parseOptions(e){return e?e.split("").sort().join(""):""}toExtendedJSON(e){return e=e||{},e.legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}}static fromExtendedJSON(e){if("$regex"in e)if(typeof e.$regex!="string"){if(e.$regex._bsontype==="BSONRegExp")return e}else return new t(e.$regex,t.parseOptions(e.$options));if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new L(`Unexpected BSONRegExp EJSON object form: ${JSON.stringify(e)}`)}inspect(e,r,n){let s=QU(r)??(u=>u);n??=Un;let i=s(n(this.pattern),"regexp"),o=s(n(this.options),"regexp");return`new BSONRegExp(${i}, ${o})`}},$u=class t extends Nr{get _bsontype(){return"BSONSymbol"}constructor(e){super(),this.value=e}valueOf(){return this.value}toString(){return this.value}toJSON(){return this.value}toExtendedJSON(){return{$symbol:this.value}}static fromExtendedJSON(e){return new t(e.$symbol)}inspect(e,r,n){return n??=Un,`new BSONSymbol(${n(this.value,r)})`}},CV=ne,Uo=class t extends CV{get _bsontype(){return"Timestamp"}get i(){return this.low>>>0}get t(){return this.high>>>0}constructor(e){if(e==null)super(0,0,!0);else if(typeof e=="bigint")super(e,!0);else if(ne.isLong(e))super(e.low,e.high,!0);else if(typeof e=="object"&&"t"in e&&"i"in e){if(typeof e.t!="number"&&(typeof e.t!="object"||e.t._bsontype!=="Int32"))throw new L("Timestamp constructed from { t, i } must provide t as a number");if(typeof e.i!="number"&&(typeof e.i!="object"||e.i._bsontype!=="Int32"))throw new L("Timestamp constructed from { t, i } must provide i as a number");let r=Number(e.t),n=Number(e.i);if(r<0||Number.isNaN(r))throw new L("Timestamp constructed from { t, i } must provide a positive t");if(n<0||Number.isNaN(n))throw new L("Timestamp constructed from { t, i } must provide a positive i");if(r>4294967295)throw new L("Timestamp constructed from { t, i } must provide t equal or less than uint32 max");if(n>4294967295)throw new L("Timestamp constructed from { t, i } must provide i equal or less than uint32 max");super(n,r,!0)}else throw new L("A Timestamp can only be constructed with: bigint, Long, or { t: number; i: number }")}toJSON(){return{$timestamp:this.toString()}}static fromInt(e){return new t(ne.fromInt(e,!0))}static fromNumber(e){return new t(ne.fromNumber(e,!0))}static fromBits(e,r){return new t({i:e,t:r})}static fromString(e,r){return new t(ne.fromString(e,!0,r))}toExtendedJSON(){return{$timestamp:{t:this.t,i:this.i}}}static fromExtendedJSON(e){let r=ne.isLong(e.$timestamp.i)?e.$timestamp.i.getLowBitsUnsigned():e.$timestamp.i,n=ne.isLong(e.$timestamp.t)?e.$timestamp.t.getLowBitsUnsigned():e.$timestamp.t;return new t({t:n,i:r})}inspect(e,r,n){n??=Un;let s=n(this.t,r),i=n(this.i,r);return`new Timestamp({ t: ${s}, i: ${i} })`}};Uo.MAX_VALUE=ne.MAX_UNSIGNED_VALUE;var bV=ne.fromNumber(y8),TV=ne.fromNumber(g8);function $8(t,e,r){e=e??{};let n=e&&e.index?e.index:0,s=me.getInt32LE(t,n);if(s<5)throw new L(`bson size must be >= 5, is ${s}`);if(e.allowObjectSmallerThanBufferSize&&t.length<s)throw new L(`buffer length ${t.length} must be >= bson size ${s}`);if(!e.allowObjectSmallerThanBufferSize&&t.length!==s)throw new L(`buffer length ${t.length} must === bson size ${s}`);if(s+n>t.byteLength)throw new L(`(bson size ${s} + options.index ${n} must be <= buffer length ${t.byteLength})`);if(t[n+s-1]!==0)throw new L("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return td(t,n,e,r)}var DV=/^\$ref$|^\$id$|^\$db$/;function td(t,e,r,n=!1){let s=r.fieldsAsRaw==null?null:r.fieldsAsRaw,i=r.raw==null?!1:r.raw,o=typeof r.bsonRegExp=="boolean"?r.bsonRegExp:!1,u=r.promoteBuffers??!1,a=r.promoteLongs??!0,c=r.promoteValues??!0,l=r.useBigInt64??!1;if(l&&!c)throw new L("Must either request bigint or Long for int64 deserialization");if(l&&!a)throw new L("Must either request bigint or Long for int64 deserialization");let h=r.validation==null?{utf8:!0}:r.validation,f=!0,p,m,y=h.utf8;if(typeof y=="boolean")p=y;else{f=!1;let R=Object.keys(y).map(function(F){return y[F]});if(R.length===0)throw new L("UTF-8 validation setting cannot be empty");if(typeof R[0]!="boolean")throw new L("Invalid UTF-8 validation option, must specify boolean values");if(p=R[0],!R.every(F=>F===p))throw new L("Invalid UTF-8 validation option - keys must be all true or all false")}if(!f){m=new Set;for(let R of Object.keys(y))m.add(R)}let A=e;if(t.length<5)throw new L("corrupt bson message < 5 bytes long");let S=me.getInt32LE(t,e);if(e+=4,S<5||S>t.length)throw new L("corrupt bson message");let O=n?[]:{},D=0,b=!1,N=n?!1:null;for(;!b;){let R=t[e++];if(R===0)break;let F=e;for(;t[F]!==0&&F<t.length;)F++;if(F>=t.byteLength)throw new L("Bad BSON Document: illegal CString");let G=n?D++:q.toUTF8(t,e,F,!1),z=!0;f||m?.has(G)?z=p:z=!p,N!==!1&&G[0]==="$"&&(N=DV.test(G));let j;if(e=F+1,R===E8){let v=me.getInt32LE(t,e);if(e+=4,v<=0||v>t.length-e||t[e+v-1]!==0)throw new L("bad string length in bson");j=q.toUTF8(t,e,e+v-1,z),e=e+v}else if(R===A8){let v=q.allocateUnsafe(12);for(let x=0;x<12;x++)v[x]=t[e+x];j=new Gi(v),e=e+12}else if(R===e1&&c===!1)j=new jo(me.getInt32LE(t,e)),e+=4;else if(R===e1)j=me.getInt32LE(t,e),e+=4;else if(R===nE)j=me.getFloat64LE(t,e),e+=8,c===!1&&(j=new Lo(j));else if(R===O8){let v=me.getInt32LE(t,e),x=me.getInt32LE(t,e+4);e+=8,j=new Date(new ne(v,x).toNumber())}else if(R===S8){if(t[e]!==0&&t[e]!==1)throw new L("illegal boolean type value");j=t[e++]===1}else if(R===sE){let v=e,x=me.getInt32LE(t,e);if(x<=0||x>t.length-e)throw new L("bad embedded document length in bson");if(i)j=t.subarray(e,e+x);else{let W=r;f||(W={...r,validation:{utf8:z}}),j=td(t,v,W,!1)}e=e+x}else if(R===_8){let v=e,x=me.getInt32LE(t,e),W=r,te=e+x;if(s&&s[G]&&(W={...r,raw:!0}),f||(W={...W,validation:{utf8:z}}),j=td(t,v,W,!0),e=e+x,t[e-1]!==0)throw new L("invalid array terminator byte");if(e!==te)throw new L("corrupted array bson")}else if(R===JU)j=void 0;else if(R===oE)j=null;else if(R===aE)if(l)j=me.getBigInt64LE(t,e),e+=8;else{let v=me.getInt32LE(t,e),x=me.getInt32LE(t,e+4);e+=8;let W=new ne(v,x);a&&c===!0?j=W.lessThanOrEqual(bV)&&W.greaterThanOrEqual(TV)?W.toNumber():W:j=W}else if(R===T8){let v=q.allocateUnsafe(16);for(let x=0;x<16;x++)v[x]=t[e+x];e=e+16,j=new Fu(v)}else if(R===iE){let v=me.getInt32LE(t,e);e+=4;let x=v,W=t[e++];if(v<0)throw new L("Negative binary type element size found");if(v>t.byteLength)throw new L("Binary type size larger than document size");if(W===Le.SUBTYPE_BYTE_ARRAY){if(v=me.getInt32LE(t,e),e+=4,v<0)throw new L("Negative binary type element size found for subtype 0x02");if(v>x-4)throw new L("Binary type with subtype 0x02 contains too long binary size");if(v<x-4)throw new L("Binary type with subtype 0x02 contains too short binary size")}u&&c?j=q.toLocalBufferType(t.subarray(e,e+v)):(j=new Le(t.subarray(e,e+v),W),W===cE&&qo.isValid(j)&&(j=j.toUUID())),e=e+v}else if(R===rd&&o===!1){for(F=e;t[F]!==0&&F<t.length;)F++;if(F>=t.length)throw new L("Bad BSON Document: illegal CString");let v=q.toUTF8(t,e,F,!1);for(e=F+1,F=e;t[F]!==0&&F<t.length;)F++;if(F>=t.length)throw new L("Bad BSON Document: illegal CString");let x=q.toUTF8(t,e,F,!1);e=F+1;let W=new Array(x.length);for(F=0;F<x.length;F++)switch(x[F]){case"m":W[F]="m";break;case"s":W[F]="g";break;case"i":W[F]="i";break}j=new RegExp(v,W.join(""))}else if(R===rd&&o===!0){for(F=e;t[F]!==0&&F<t.length;)F++;if(F>=t.length)throw new L("Bad BSON Document: illegal CString");let v=q.toUTF8(t,e,F,!1);for(e=F+1,F=e;t[F]!==0&&F<t.length;)F++;if(F>=t.length)throw new L("Bad BSON Document: illegal CString");let x=q.toUTF8(t,e,F,!1);e=F+1,j=new Ki(v,x)}else if(R===w8){let v=me.getInt32LE(t,e);if(e+=4,v<=0||v>t.length-e||t[e+v-1]!==0)throw new L("bad string length in bson");let x=q.toUTF8(t,e,e+v-1,z);j=c?x:new $u(x),e=e+v}else if(R===b8)j=new Uo({i:me.getUint32LE(t,e),t:me.getUint32LE(t,e+4)}),e+=8;else if(R===D8)j=new vu;else if(R===M8)j=new Ru;else if(R===uE){let v=me.getInt32LE(t,e);if(e+=4,v<=0||v>t.length-e||t[e+v-1]!==0)throw new L("bad string length in bson");let x=q.toUTF8(t,e,e+v-1,z);j=new Hi(x),e=e+v}else if(R===C8){let v=me.getInt32LE(t,e);if(e+=4,v<13)throw new L("code_w_scope total size shorter minimum expected length");let x=me.getInt32LE(t,e);if(e+=4,x<=0||x>t.length-e||t[e+x-1]!==0)throw new L("bad string length in bson");let W=q.toUTF8(t,e,e+x-1,z);e=e+x;let te=e,qe=me.getInt32LE(t,e),ir=td(t,te,r,!1);if(e=e+qe,v<8+qe+x)throw new L("code_w_scope total size is too short, truncating scope");if(v>8+qe+x)throw new L("code_w_scope total size is too long, clips outer document");j=new Hi(W,ir)}else if(R===XU){let v=me.getInt32LE(t,e);if(e+=4,v<=0||v>t.length-e||t[e+v-1]!==0)throw new L("bad string length in bson");let x=q.toUTF8(t,e,e+v-1,z);e=e+v;let W=q.allocateUnsafe(12);for(let qe=0;qe<12;qe++)W[qe]=t[e+qe];let te=new Gi(W);e=e+12,j=new Ei(x,te)}else throw new L(`Detected unknown BSON type ${R.toString(16)} for fieldname "${G}"`);G==="__proto__"?Object.defineProperty(O,G,{value:j,writable:!0,enumerable:!0,configurable:!0}):O[G]=j}if(S!==e-A)throw n?new L("corrupt array bson"):new L("corrupt object bson");if(!N)return O;if(F8(O)){let R=Object.assign({},O);return delete R.$ref,delete R.$id,delete R.$db,new Ei(O.$ref,O.$id,O.$db,R)}return O}var nd=/\x00/,f8=new Set(["$db","$ref","$id","$clusterTime"]);function Fg(t,e,r,n){t[n++]=E8;let s=q.encodeUTF8Into(t,e,n);n=n+s+1,t[n-1]=0;let i=q.encodeUTF8Into(t,r,n+4);return me.setInt32LE(t,n,i+1),n=n+4+i,t[n++]=0,n}function Rg(t,e,r,n){let i=!Object.is(r,-0)&&Number.isSafeInteger(r)&&r<=r1&&r>=n1?e1:nE;t[n++]=i;let o=q.encodeUTF8Into(t,e,n);return n=n+o,t[n++]=0,i===e1?n+=me.setInt32LE(t,n,r):n+=me.setFloat64LE(t,n,r),n}function vg(t,e,r,n){t[n++]=aE;let s=q.encodeUTF8Into(t,e,n);return n+=s,t[n++]=0,n+=me.setBigInt64LE(t,n,r),n}function qa(t,e,r,n){t[n++]=oE;let s=q.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,n}function $g(t,e,r,n){t[n++]=S8;let s=q.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,t[n++]=r?1:0,n}function xg(t,e,r,n){t[n++]=O8;let s=q.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=ne.fromNumber(r.getTime()),o=i.getLowBits(),u=i.getHighBits();return n+=me.setInt32LE(t,n,o),n+=me.setInt32LE(t,n,u),n}function kg(t,e,r,n){t[n++]=rd;let s=q.encodeUTF8Into(t,e,n);if(n=n+s,t[n++]=0,r.source&&r.source.match(nd)!=null)throw new L("value "+r.source+" must not contain null bytes");return n=n+q.encodeUTF8Into(t,r.source,n),t[n++]=0,r.ignoreCase&&(t[n++]=105),r.global&&(t[n++]=115),r.multiline&&(t[n++]=109),t[n++]=0,n}function qg(t,e,r,n){t[n++]=rd;let s=q.encodeUTF8Into(t,e,n);if(n=n+s,t[n++]=0,r.pattern.match(nd)!=null)throw new L("pattern "+r.pattern+" must not contain null bytes");n=n+q.encodeUTF8Into(t,r.pattern,n),t[n++]=0;let i=r.options.split("").sort().join("");return n=n+q.encodeUTF8Into(t,i,n),t[n++]=0,n}function Lg(t,e,r,n){r===null?t[n++]=oE:r._bsontype==="MinKey"?t[n++]=D8:t[n++]=M8;let s=q.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,n}function jg(t,e,r,n){t[n++]=A8;let s=q.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,n+=r.serializeInto(t,n),n}function Ug(t,e,r,n){t[n++]=iE;let s=q.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=r.length;if(n+=me.setInt32LE(t,n,i),t[n++]=ZU,i<=16)for(let o=0;o<i;o++)t[n+o]=r[o];else t.set(r,n);return n=n+i,n}function Vg(t,e,r,n,s,i,o,u,a){if(a.has(r))throw new L("Cannot convert circular structure to BSON");a.add(r),t[n++]=Array.isArray(r)?_8:sE;let c=q.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=s1(t,r,s,n,i+1,o,u,a);return a.delete(r),l}function zg(t,e,r,n){t[n++]=T8;let s=q.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;for(let i=0;i<16;i++)t[n+i]=r.bytes[i];return n+16}function Wg(t,e,r,n){t[n++]=r._bsontype==="Long"?aE:b8;let s=q.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=r.getLowBits(),o=r.getHighBits();return n+=me.setInt32LE(t,n,i),n+=me.setInt32LE(t,n,o),n}function Hg(t,e,r,n){r=r.valueOf(),t[n++]=e1;let s=q.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,n+=me.setInt32LE(t,n,r),n}function Gg(t,e,r,n){t[n++]=nE;let s=q.encodeUTF8Into(t,e,n);return n=n+s,t[n++]=0,n+=me.setFloat64LE(t,n,r.value),n}function Kg(t,e,r,n){t[n++]=uE;let s=q.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=r.toString(),o=q.encodeUTF8Into(t,i,n+4)+1;return me.setInt32LE(t,n,o),n=n+4+o-1,t[n++]=0,n}function Yg(t,e,r,n,s=!1,i=0,o=!1,u=!0,a){if(r.scope&&typeof r.scope=="object"){t[n++]=C8;let c=q.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=n,h=r.code;n=n+4;let f=q.encodeUTF8Into(t,h,n+4)+1;me.setInt32LE(t,n,f),t[n+4+f-1]=0,n=n+f+4;let p=s1(t,r.scope,s,n,i+1,o,u,a);n=p-1;let m=p-l;l+=me.setInt32LE(t,l,m),t[n++]=0}else{t[n++]=uE;let c=q.encodeUTF8Into(t,e,n);n=n+c,t[n++]=0;let l=r.code.toString(),h=q.encodeUTF8Into(t,l,n+4)+1;me.setInt32LE(t,n,h),n=n+4+h-1,t[n++]=0}return n}function Qg(t,e,r,n){t[n++]=iE;let s=q.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=r.buffer,o=r.position;if(r.sub_type===Le.SUBTYPE_BYTE_ARRAY&&(o=o+4),n+=me.setInt32LE(t,n,o),t[n++]=r.sub_type,r.sub_type===Le.SUBTYPE_BYTE_ARRAY&&(o=o-4,n+=me.setInt32LE(t,n,o)),r.sub_type===Le.SUBTYPE_VECTOR&&N8(r),o<=16)for(let u=0;u<o;u++)t[n+u]=i[u];else t.set(i,n);return n=n+r.position,n}function Jg(t,e,r,n){t[n++]=w8;let s=q.encodeUTF8Into(t,e,n);n=n+s,t[n++]=0;let i=q.encodeUTF8Into(t,r.value,n+4)+1;return me.setInt32LE(t,n,i),n=n+4+i-1,t[n++]=0,n}function Xg(t,e,r,n,s,i,o){t[n++]=sE;let u=q.encodeUTF8Into(t,e,n);n=n+u,t[n++]=0;let a=n,c={$ref:r.collection||r.namespace,$id:r.oid};r.db!=null&&(c.$db=r.db),c=Object.assign(c,r.fields);let l=s1(t,c,!1,n,s+1,i,!0,o),h=l-a;return a+=me.setInt32LE(t,n,h),l}function s1(t,e,r,n,s,i,o,u){if(u==null){if(e==null)return t[0]=5,t[1]=0,t[2]=0,t[3]=0,t[4]=0,5;if(Array.isArray(e))throw new L("serialize does not support an array as the root input");if(typeof e!="object")throw new L("serialize does not support non-object as the root input");if("_bsontype"in e&&typeof e._bsontype=="string")throw new L("BSON types cannot be serialized as a document");if(Ua(e)||ja(e)||La(e)||tE(e))throw new L("date, regexp, typedarray, and arraybuffer cannot be BSON documents");u=new Set}u.add(e);let a=n+4;if(Array.isArray(e))for(let l=0;l<e.length;l++){let h=`${l}`,f=e[l];typeof f?.toBSON=="function"&&(f=f.toBSON());let p=typeof f;if(f===void 0)a=qa(t,h,f,a);else if(f===null)a=qa(t,h,f,a);else if(p==="string")a=Fg(t,h,f,a);else if(p==="number")a=Rg(t,h,f,a);else if(p==="bigint")a=vg(t,h,f,a);else if(p==="boolean")a=$g(t,h,f,a);else if(p==="object"&&f._bsontype==null)f instanceof Date||Ua(f)?a=xg(t,h,f,a):f instanceof Uint8Array||La(f)?a=Ug(t,h,f,a):f instanceof RegExp||ja(f)?a=kg(t,h,f,a):a=Vg(t,h,f,a,r,s,i,o,u);else if(p==="object"){if(f[Wa]!==Nu)throw new Wi;if(f._bsontype==="ObjectId")a=jg(t,h,f,a);else if(f._bsontype==="Decimal128")a=zg(t,h,f,a);else if(f._bsontype==="Long"||f._bsontype==="Timestamp")a=Wg(t,h,f,a);else if(f._bsontype==="Double")a=Gg(t,h,f,a);else if(f._bsontype==="Code")a=Yg(t,h,f,a,r,s,i,o,u);else if(f._bsontype==="Binary")a=Qg(t,h,f,a);else if(f._bsontype==="BSONSymbol")a=Jg(t,h,f,a);else if(f._bsontype==="DBRef")a=Xg(t,h,f,a,s,i,u);else if(f._bsontype==="BSONRegExp")a=qg(t,h,f,a);else if(f._bsontype==="Int32")a=Hg(t,h,f,a);else if(f._bsontype==="MinKey"||f._bsontype==="MaxKey")a=Lg(t,h,f,a);else if(typeof f._bsontype<"u")throw new L(`Unrecognized or invalid _bsontype: ${String(f._bsontype)}`)}else p==="function"&&i&&(a=Kg(t,h,f,a))}else if(e instanceof Map||rE(e)){let l=e.entries(),h=!1;for(;!h;){let f=l.next();if(h=!!f.done,h)continue;let p=f.value[0],m=f.value[1];typeof m?.toBSON=="function"&&(m=m.toBSON());let y=typeof m;if(typeof p=="string"&&!f8.has(p)){if(p.match(nd)!=null)throw new L("key "+p+" must not contain null bytes");if(r){if(p[0]==="$")throw new L("key "+p+" must not start with '$'");if(p.includes("."))throw new L("key "+p+" must not contain '.'")}}if(m===void 0)o===!1&&(a=qa(t,p,m,a));else if(m===null)a=qa(t,p,m,a);else if(y==="string")a=Fg(t,p,m,a);else if(y==="number")a=Rg(t,p,m,a);else if(y==="bigint")a=vg(t,p,m,a);else if(y==="boolean")a=$g(t,p,m,a);else if(y==="object"&&m._bsontype==null)m instanceof Date||Ua(m)?a=xg(t,p,m,a):m instanceof Uint8Array||La(m)?a=Ug(t,p,m,a):m instanceof RegExp||ja(m)?a=kg(t,p,m,a):a=Vg(t,p,m,a,r,s,i,o,u);else if(y==="object"){if(m[Wa]!==Nu)throw new Wi;if(m._bsontype==="ObjectId")a=jg(t,p,m,a);else if(m._bsontype==="Decimal128")a=zg(t,p,m,a);else if(m._bsontype==="Long"||m._bsontype==="Timestamp")a=Wg(t,p,m,a);else if(m._bsontype==="Double")a=Gg(t,p,m,a);else if(m._bsontype==="Code")a=Yg(t,p,m,a,r,s,i,o,u);else if(m._bsontype==="Binary")a=Qg(t,p,m,a);else if(m._bsontype==="BSONSymbol")a=Jg(t,p,m,a);else if(m._bsontype==="DBRef")a=Xg(t,p,m,a,s,i,u);else if(m._bsontype==="BSONRegExp")a=qg(t,p,m,a);else if(m._bsontype==="Int32")a=Hg(t,p,m,a);else if(m._bsontype==="MinKey"||m._bsontype==="MaxKey")a=Lg(t,p,m,a);else if(typeof m._bsontype<"u")throw new L(`Unrecognized or invalid _bsontype: ${String(m._bsontype)}`)}else y==="function"&&i&&(a=Kg(t,p,m,a))}}else{if(typeof e?.toBSON=="function"&&(e=e.toBSON(),e!=null&&typeof e!="object"))throw new L("toBSON function did not return an object");for(let l of Object.keys(e)){let h=e[l];typeof h?.toBSON=="function"&&(h=h.toBSON());let f=typeof h;if(typeof l=="string"&&!f8.has(l)){if(l.match(nd)!=null)throw new L("key "+l+" must not contain null bytes");if(r){if(l[0]==="$")throw new L("key "+l+" must not start with '$'");if(l.includes("."))throw new L("key "+l+" must not contain '.'")}}if(h===void 0)o===!1&&(a=qa(t,l,h,a));else if(h===null)a=qa(t,l,h,a);else if(f==="string")a=Fg(t,l,h,a);else if(f==="number")a=Rg(t,l,h,a);else if(f==="bigint")a=vg(t,l,h,a);else if(f==="boolean")a=$g(t,l,h,a);else if(f==="object"&&h._bsontype==null)h instanceof Date||Ua(h)?a=xg(t,l,h,a):h instanceof Uint8Array||La(h)?a=Ug(t,l,h,a):h instanceof RegExp||ja(h)?a=kg(t,l,h,a):a=Vg(t,l,h,a,r,s,i,o,u);else if(f==="object"){if(h[Wa]!==Nu)throw new Wi;if(h._bsontype==="ObjectId")a=jg(t,l,h,a);else if(h._bsontype==="Decimal128")a=zg(t,l,h,a);else if(h._bsontype==="Long"||h._bsontype==="Timestamp")a=Wg(t,l,h,a);else if(h._bsontype==="Double")a=Gg(t,l,h,a);else if(h._bsontype==="Code")a=Yg(t,l,h,a,r,s,i,o,u);else if(h._bsontype==="Binary")a=Qg(t,l,h,a);else if(h._bsontype==="BSONSymbol")a=Jg(t,l,h,a);else if(h._bsontype==="DBRef")a=Xg(t,l,h,a,s,i,u);else if(h._bsontype==="BSONRegExp")a=qg(t,l,h,a);else if(h._bsontype==="Int32")a=Hg(t,l,h,a);else if(h._bsontype==="MinKey"||h._bsontype==="MaxKey")a=Lg(t,l,h,a);else if(typeof h._bsontype<"u")throw new L(`Unrecognized or invalid _bsontype: ${String(h._bsontype)}`)}else f==="function"&&i&&(a=Kg(t,l,h,a))}}u.delete(e),t[a++]=0;let c=a-n;return n+=me.setInt32LE(t,n,c),a}function MV(t){return t!=null&&typeof t=="object"&&"_bsontype"in t&&typeof t._bsontype=="string"}var BV={$oid:Gi,$binary:Le,$uuid:Le,$symbol:$u,$numberInt:jo,$numberDecimal:Fu,$numberDouble:Lo,$numberLong:ne,$minKey:vu,$maxKey:Ru,$regex:Ki,$regularExpression:Ki,$timestamp:Uo};function x8(t,e={}){if(typeof t=="number"){let n=t<=r1&&t>=n1,s=t<=p8&&t>=m8;if(e.relaxed||e.legacy)return t;if(Number.isInteger(t)&&!Object.is(t,-0)){if(n)return new jo(t);if(s)return e.useBigInt64?BigInt(t):ne.fromNumber(t)}return new Lo(t)}if(t==null||typeof t!="object")return t;if(t.$undefined)return null;let r=Object.keys(t).filter(n=>n.startsWith("$")&&t[n]!=null);for(let n=0;n<r.length;n++){let s=BV[r[n]];if(s)return s.fromExtendedJSON(t,e)}if(t.$date!=null){let n=t.$date,s=new Date;if(e.legacy)if(typeof n=="number")s.setTime(n);else if(typeof n=="string")s.setTime(Date.parse(n));else if(typeof n=="bigint")s.setTime(Number(n));else throw new Ha(`Unrecognized type for EJSON date: ${typeof n}`);else if(typeof n=="string")s.setTime(Date.parse(n));else if(ne.isLong(n))s.setTime(n.toNumber());else if(typeof n=="number"&&e.relaxed)s.setTime(n);else if(typeof n=="bigint")s.setTime(Number(n));else throw new Ha(`Unrecognized type for EJSON date: ${typeof n}`);return s}if(t.$code!=null){let n=Object.assign({},t);return t.$scope&&(n.$scope=x8(t.$scope)),Hi.fromExtendedJSON(t)}if(F8(t)||t.$dbPointer){let n=t.$ref?t:t.$dbPointer;if(n instanceof Ei)return n;let s=Object.keys(n).filter(o=>o.startsWith("$")),i=!0;if(s.forEach(o=>{["$ref","$id","$db"].indexOf(o)===-1&&(i=!1)}),i)return Ei.fromExtendedJSON(n)}return t}function IV(t,e){return t.map((r,n)=>{e.seenObjects.push({propertyName:`index ${n}`,obj:null});try{return zi(r,e)}finally{e.seenObjects.pop()}})}function d8(t){let e=t.toISOString();return t.getUTCMilliseconds()!==0?e:e.slice(0,-5)+"Z"}function zi(t,e){if(t instanceof Map||rE(t)){let r=Object.create(null);for(let[n,s]of t){if(typeof n!="string")throw new L("Can only serialize maps with string keys");r[n]=s}return zi(r,e)}if((typeof t=="object"||typeof t=="function")&&t!==null){let r=e.seenObjects.findIndex(n=>n.obj===t);if(r!==-1){let n=e.seenObjects.map(l=>l.propertyName),s=n.slice(0,r).map(l=>`${l} -> `).join(""),i=n[r],o=" -> "+n.slice(r+1,n.length-1).map(l=>`${l} -> `).join(""),u=n[n.length-1],a=" ".repeat(s.length+i.length/2),c="-".repeat(o.length+(i.length+u.length)/2-1);throw new L(`Converting circular structure to EJSON:
    ${s}${i}${o}${u}
    ${a}\\${c}/`)}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return IV(t,e);if(t===void 0)return null;if(t instanceof Date||Ua(t)){let r=t.getTime(),n=r>-1&&r<2534023188e5;return e.legacy?e.relaxed&&n?{$date:t.getTime()}:{$date:d8(t)}:e.relaxed&&n?{$date:d8(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(typeof t=="number"&&(!e.relaxed||!isFinite(t))){if(Number.isInteger(t)&&!Object.is(t,-0)){if(t>=n1&&t<=r1)return{$numberInt:t.toString()};if(t>=m8&&t<=p8)return{$numberLong:t.toString()}}return{$numberDouble:Object.is(t,-0)?"-0.0":t.toString()}}if(typeof t=="bigint")return e.relaxed?Number(BigInt.asIntN(64,t)):{$numberLong:BigInt.asIntN(64,t).toString()};if(t instanceof RegExp||ja(t)){let r=t.flags;if(r===void 0){let s=t.toString().match(/[gimuy]*$/);s&&(r=s[0])}return new Ki(t.source,r).toExtendedJSON(e)}return t!=null&&typeof t=="object"?NV(t,e):t}var PV={Binary:t=>new Le(t.value(),t.sub_type),Code:t=>new Hi(t.code,t.scope),DBRef:t=>new Ei(t.collection||t.namespace,t.oid,t.db,t.fields),Decimal128:t=>new Fu(t.bytes),Double:t=>new Lo(t.value),Int32:t=>new jo(t.value),Long:t=>ne.fromBits(t.low!=null?t.low:t.low_,t.low!=null?t.high:t.high_,t.low!=null?t.unsigned:t.unsigned_),MaxKey:()=>new Ru,MinKey:()=>new vu,ObjectId:t=>new Gi(t),BSONRegExp:t=>new Ki(t.pattern,t.options),BSONSymbol:t=>new $u(t.value),Timestamp:t=>Uo.fromBits(t.low,t.high)};function NV(t,e){if(t==null||typeof t!="object")throw new L("not an object instance");let r=t._bsontype;if(typeof r>"u"){let n={};for(let s of Object.keys(t)){e.seenObjects.push({propertyName:s,obj:null});try{let i=zi(t[s],e);s==="__proto__"?Object.defineProperty(n,s,{value:i,writable:!0,enumerable:!0,configurable:!0}):n[s]=i}finally{e.seenObjects.pop()}}return n}else{if(t!=null&&typeof t=="object"&&typeof t._bsontype=="string"&&t[Wa]!==Nu)throw new Wi;if(MV(t)){let n=t;if(typeof n.toExtendedJSON!="function"){let s=PV[t._bsontype];if(!s)throw new L("Unrecognized or invalid _bsontype: "+t._bsontype);n=s(n)}return r==="Code"&&n.scope?n=new Hi(n.code,zi(n.scope,e)):r==="DBRef"&&n.oid&&(n=new Ei(zi(n.collection,e),zi(n.oid,e),zi(n.db,e),zi(n.fields,e))),n.toExtendedJSON(e)}else throw new L("_bsontype must be a string, but was: "+typeof r)}}function k8(t,e){let r={useBigInt64:e?.useBigInt64??!1,relaxed:e?.relaxed??!0,legacy:e?.legacy??!1};return JSON.parse(t,(n,s)=>{if(n.indexOf("\0")!==-1)throw new L(`BSON Document field names cannot contain null bytes, found: ${JSON.stringify(n)}`);return x8(s,r)})}function q8(t,e,r,n){r!=null&&typeof r=="object"&&(n=r,r=0),e!=null&&typeof e=="object"&&!Array.isArray(e)&&(n=e,e=void 0,r=0);let s=Object.assign({relaxed:!0,legacy:!1},n,{seenObjects:[{propertyName:"(root)",obj:null}]}),i=zi(t,s);return JSON.stringify(i,e,r)}function FV(t,e){return e=e||{},JSON.parse(q8(t,e))}function RV(t,e){return e=e||{},k8(JSON.stringify(t),e)}var xu=Object.create(null);xu.parse=k8;xu.stringify=q8;xu.serialize=FV;xu.deserialize=RV;Object.freeze(xu);function Zg(t,e){try{return me.getNonnegativeInt32LE(t,e)}catch(r){throw new as("BSON size cannot be negative",e,{cause:r})}}function eE(t,e){let r=e;for(;t[r]!==0;r++);if(r===t.length-1)throw new as("Null terminator not found",e);return r}function vV(t,e=0){if(e??=0,t.length<5)throw new as(`Input must be at least 5 bytes, got ${t.length} bytes`,e);let r=Zg(t,e);if(r>t.length-e)throw new as(`Parsed documentSize (${r} bytes) does not match input length (${t.length} bytes)`,e);if(t[e+r-1]!==0)throw new as("BSON documents must end in 0x00",e+r);let n=[],s=e+4;for(;s<=r+e;){let i=t[s];if(s+=1,i===0){if(s-e!==r)throw new as("Invalid 0x00 type byte",s);break}let o=s,u=eE(t,s)-o;s+=u+1;let a;if(i===1||i===18||i===9||i===17)a=8;else if(i===16)a=4;else if(i===7)a=12;else if(i===19)a=16;else if(i===8)a=1;else if(i===10||i===6||i===127||i===255)a=0;else if(i===11)a=eE(t,eE(t,s)+1)+1-s;else if(i===3||i===4||i===15)a=Zg(t,s);else if(i===2||i===5||i===12||i===13||i===14)a=Zg(t,s)+4,i===5&&(a+=1),i===12&&(a+=12);else throw new as(`Invalid 0x${i.toString(16).padStart(2,"0")} type byte`,s);if(a>r)throw new as("value reports length larger than document",s);n.push([i,o,u,s,a]),s+=a}return n}var Ga=Object.create(null);Ga.parseToElements=vV;Ga.ByteUtils=q;Ga.NumberUtils=me;Object.freeze(Ga);var L8=1024*1024*17,ko=q.allocate(L8);function j8(t){ko.length<t&&(ko=q.allocate(t))}function U8(t,e={}){let r=typeof e.checkKeys=="boolean"?e.checkKeys:!1,n=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,s=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0,i=typeof e.minInternalBufferSize=="number"?e.minInternalBufferSize:L8;ko.length<i&&(ko=q.allocate(i));let o=s1(ko,t,r,0,0,n,s,null),u=q.allocateUnsafe(o);return u.set(ko.subarray(0,o),0),u}function V8(t,e,r={}){let n=typeof r.checkKeys=="boolean"?r.checkKeys:!1,s=typeof r.serializeFunctions=="boolean"?r.serializeFunctions:!1,i=typeof r.ignoreUndefined=="boolean"?r.ignoreUndefined:!0,o=typeof r.index=="number"?r.index:0,u=s1(ko,t,n,0,0,s,i,null);return e.set(ko.subarray(0,u),o),o+u-1}function z8(t,e={}){return $8(q.toLocalBufferType(t),e)}function W8(t,e={}){e=e||{};let r=typeof e.serializeFunctions=="boolean"?e.serializeFunctions:!1,n=typeof e.ignoreUndefined=="boolean"?e.ignoreUndefined:!0;return ed(t,r,n)}function H8(t,e,r,n,s,i){let o=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},i),u=q.toLocalBufferType(t),a=e;for(let c=0;c<r;c++){let l=me.getInt32LE(u,a);o.index=a,n[s+c]=$8(u,o),a=a+l}return a}var $V=Object.freeze({__proto__:null,BSONError:L,BSONOffsetError:as,BSONRegExp:Ki,BSONRuntimeError:Ha,BSONSymbol:$u,BSONType:B8,BSONValue:Nr,BSONVersionError:Wi,Binary:Le,Code:Hi,DBRef:Ei,Decimal128:Fu,Double:Lo,EJSON:xu,Int32:jo,Long:ne,MaxKey:Ru,MinKey:vu,ObjectId:Gi,Timestamp:Uo,UUID:qo,calculateObjectSize:W8,deserialize:z8,deserializeStream:H8,onDemand:Ga,serialize:U8,serializeWithBufferAndIndex:V8,setInternalBufferSize:j8});Je.BSON=$V;Je.BSONError=L;Je.BSONOffsetError=as;Je.BSONRegExp=Ki;Je.BSONRuntimeError=Ha;Je.BSONSymbol=$u;Je.BSONType=B8;Je.BSONValue=Nr;Je.BSONVersionError=Wi;Je.Binary=Le;Je.Code=Hi;Je.DBRef=Ei;Je.Decimal128=Fu;Je.Double=Lo;Je.EJSON=xu;Je.Int32=jo;Je.Long=ne;Je.MaxKey=Ru;Je.MinKey=vu;Je.ObjectId=Gi;Je.Timestamp=Uo;Je.UUID=qo;Je.calculateObjectSize=W8;Je.deserialize=z8;Je.deserializeStream=H8;Je.onDemand=Ga;Je.serialize=U8;Je.serializeWithBufferAndIndex=V8;Je.setInternalBufferSize=j8});var Ue=g(de=>{"use strict";d();Object.defineProperty(de,"__esModule",{value:!0});de.toUTF8=de.getBigInt64LE=de.getFloat64LE=de.getInt32LE=de.UUID=de.Timestamp=de.serialize=de.ObjectId=de.MinKey=de.MaxKey=de.Long=de.Int32=de.EJSON=de.Double=de.deserialize=de.Decimal128=de.DBRef=de.Code=de.calculateObjectSize=de.BSONType=de.BSONSymbol=de.BSONRegExp=de.BSONError=de.BSON=de.Binary=void 0;de.parseToElementsToArray=xV;de.pluckBSONSerializeOptions=kV;de.resolveBSONOptions=qV;de.parseUtf8ValidationOption=LV;var i1=cs(),Lt=cs();Object.defineProperty(de,"Binary",{enumerable:!0,get:function(){return Lt.Binary}});Object.defineProperty(de,"BSON",{enumerable:!0,get:function(){return Lt.BSON}});Object.defineProperty(de,"BSONError",{enumerable:!0,get:function(){return Lt.BSONError}});Object.defineProperty(de,"BSONRegExp",{enumerable:!0,get:function(){return Lt.BSONRegExp}});Object.defineProperty(de,"BSONSymbol",{enumerable:!0,get:function(){return Lt.BSONSymbol}});Object.defineProperty(de,"BSONType",{enumerable:!0,get:function(){return Lt.BSONType}});Object.defineProperty(de,"calculateObjectSize",{enumerable:!0,get:function(){return Lt.calculateObjectSize}});Object.defineProperty(de,"Code",{enumerable:!0,get:function(){return Lt.Code}});Object.defineProperty(de,"DBRef",{enumerable:!0,get:function(){return Lt.DBRef}});Object.defineProperty(de,"Decimal128",{enumerable:!0,get:function(){return Lt.Decimal128}});Object.defineProperty(de,"deserialize",{enumerable:!0,get:function(){return Lt.deserialize}});Object.defineProperty(de,"Double",{enumerable:!0,get:function(){return Lt.Double}});Object.defineProperty(de,"EJSON",{enumerable:!0,get:function(){return Lt.EJSON}});Object.defineProperty(de,"Int32",{enumerable:!0,get:function(){return Lt.Int32}});Object.defineProperty(de,"Long",{enumerable:!0,get:function(){return Lt.Long}});Object.defineProperty(de,"MaxKey",{enumerable:!0,get:function(){return Lt.MaxKey}});Object.defineProperty(de,"MinKey",{enumerable:!0,get:function(){return Lt.MinKey}});Object.defineProperty(de,"ObjectId",{enumerable:!0,get:function(){return Lt.ObjectId}});Object.defineProperty(de,"serialize",{enumerable:!0,get:function(){return Lt.serialize}});Object.defineProperty(de,"Timestamp",{enumerable:!0,get:function(){return Lt.Timestamp}});Object.defineProperty(de,"UUID",{enumerable:!0,get:function(){return Lt.UUID}});function xV(t,e){let r=i1.BSON.onDemand.parseToElements(t,e);return Array.isArray(r)?r:[...r]}de.getInt32LE=i1.BSON.onDemand.NumberUtils.getInt32LE;de.getFloat64LE=i1.BSON.onDemand.NumberUtils.getFloat64LE;de.getBigInt64LE=i1.BSON.onDemand.NumberUtils.getBigInt64LE;de.toUTF8=i1.BSON.onDemand.ByteUtils.toUTF8;function kV(t){let{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:s,promoteLongs:i,serializeFunctions:o,ignoreUndefined:u,bsonRegExp:a,raw:c,enableUtf8Validation:l}=t;return{fieldsAsRaw:e,useBigInt64:r,promoteValues:n,promoteBuffers:s,promoteLongs:i,serializeFunctions:o,ignoreUndefined:u,bsonRegExp:a,raw:c,enableUtf8Validation:l}}function qV(t,e){let r=e?.bsonOptions;return{raw:t?.raw??r?.raw??!1,useBigInt64:t?.useBigInt64??r?.useBigInt64??!1,promoteLongs:t?.promoteLongs??r?.promoteLongs??!0,promoteValues:t?.promoteValues??r?.promoteValues??!0,promoteBuffers:t?.promoteBuffers??r?.promoteBuffers??!1,ignoreUndefined:t?.ignoreUndefined??r?.ignoreUndefined??!1,bsonRegExp:t?.bsonRegExp??r?.bsonRegExp??!1,serializeFunctions:t?.serializeFunctions??r?.serializeFunctions??!1,fieldsAsRaw:t?.fieldsAsRaw??r?.fieldsAsRaw??{},enableUtf8Validation:t?.enableUtf8Validation??r?.enableUtf8Validation??!0}}function LV(t){return t?.enableUtf8Validation===!1?{utf8:!1}:{utf8:{writeErrors:!1}}}});var Z=g($=>{"use strict";d();Object.defineProperty($,"__esModule",{value:!0});$.MongoWriteConcernError=$.MongoServerSelectionError=$.MongoSystemError=$.MongoMissingDependencyError=$.MongoMissingCredentialsError=$.MongoCompatibilityError=$.MongoInvalidArgumentError=$.MongoParseError=$.MongoNetworkTimeoutError=$.MongoNetworkError=$.MongoTopologyClosedError=$.MongoCursorExhaustedError=$.MongoServerClosedError=$.MongoCursorInUseError=$.MongoOperationTimeoutError=$.MongoUnexpectedServerResponseError=$.MongoGridFSChunkError=$.MongoGridFSStreamError=$.MongoTailableCursorError=$.MongoChangeStreamError=$.MongoClientBulkWriteExecutionError=$.MongoClientBulkWriteCursorError=$.MongoClientBulkWriteError=$.MongoGCPError=$.MongoAzureError=$.MongoOIDCError=$.MongoAWSError=$.MongoKerberosError=$.MongoExpiredSessionError=$.MongoTransactionError=$.MongoNotConnectedError=$.MongoDecompressionError=$.MongoBatchReExecutionError=$.MongoStalePrimaryError=$.MongoRuntimeError=$.MongoAPIError=$.MongoDriverError=$.MongoServerError=$.MongoError=$.MongoErrorLabel=$.GET_MORE_RESUMABLE_CODES=$.MONGODB_ERROR_CODES=$.NODE_IS_RECOVERING_ERROR_MESSAGE=$.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=$.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=void 0;$.isNetworkErrorBeforeHandshake=UV;$.needsRetryableWriteLabel=VV;$.isRetryableWriteError=Y8;$.isRetryableReadError=zV;$.isNodeShuttingDownError=YV;$.isSDAMUnrecoverableError=QV;$.isNetworkTimeoutError=JV;$.isResumableError=XV;var o1=Symbol("errorLabels");$.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE=new RegExp("not master","i");$.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE=new RegExp("not master or secondary","i");$.NODE_IS_RECOVERING_ERROR_MESSAGE=new RegExp("node is recovering","i");$.MONGODB_ERROR_CODES=Object.freeze({HostUnreachable:6,HostNotFound:7,AuthenticationFailed:18,NetworkTimeout:89,ShutdownInProgress:91,PrimarySteppedDown:189,ExceededTimeLimit:262,SocketException:9001,NotWritablePrimary:10107,InterruptedAtShutdown:11600,InterruptedDueToReplStateChange:11602,NotPrimaryNoSecondaryOk:13435,NotPrimaryOrSecondary:13436,StaleShardVersion:63,StaleEpoch:150,StaleConfig:13388,RetryChangeStream:234,FailedToSatisfyReadPreference:133,CursorNotFound:43,LegacyNotPrimary:10058,WriteConcernFailed:64,NamespaceNotFound:26,IllegalOperation:20,MaxTimeMSExpired:50,UnknownReplWriteConcern:79,UnsatisfiableWriteConcern:100,Reauthenticate:391,ReadConcernMajorityNotAvailableYet:134});$.GET_MORE_RESUMABLE_CODES=new Set([$.MONGODB_ERROR_CODES.HostUnreachable,$.MONGODB_ERROR_CODES.HostNotFound,$.MONGODB_ERROR_CODES.NetworkTimeout,$.MONGODB_ERROR_CODES.ShutdownInProgress,$.MONGODB_ERROR_CODES.PrimarySteppedDown,$.MONGODB_ERROR_CODES.ExceededTimeLimit,$.MONGODB_ERROR_CODES.SocketException,$.MONGODB_ERROR_CODES.NotWritablePrimary,$.MONGODB_ERROR_CODES.InterruptedAtShutdown,$.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,$.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,$.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,$.MONGODB_ERROR_CODES.StaleShardVersion,$.MONGODB_ERROR_CODES.StaleEpoch,$.MONGODB_ERROR_CODES.StaleConfig,$.MONGODB_ERROR_CODES.RetryChangeStream,$.MONGODB_ERROR_CODES.FailedToSatisfyReadPreference,$.MONGODB_ERROR_CODES.CursorNotFound]);$.MongoErrorLabel=Object.freeze({RetryableWriteError:"RetryableWriteError",TransientTransactionError:"TransientTransactionError",UnknownTransactionCommitResult:"UnknownTransactionCommitResult",ResumableChangeStreamError:"ResumableChangeStreamError",HandshakeError:"HandshakeError",ResetPool:"ResetPool",PoolRequstedRetry:"PoolRequstedRetry",InterruptInUseConnections:"InterruptInUseConnections",NoWritesPerformed:"NoWritesPerformed"});function jV(t){return t!=null&&typeof t=="object"&&"errors"in t&&Array.isArray(t.errors)}var Vs=class extends Error{constructor(e,r){super(e,r),this[o1]=new Set}static buildErrorMessage(e){return typeof e=="string"?e:jV(e)&&e.message.length===0?e.errors.length===0?"AggregateError has an empty errors array. Please check the `cause` property for more information.":e.errors.map(({message:r})=>r).join(", "):e!=null&&typeof e=="object"&&"message"in e&&typeof e.message=="string"?e.message:"empty error message"}get name(){return"MongoError"}get errmsg(){return this.message}hasErrorLabel(e){return this[o1].has(e)}addErrorLabel(e){this[o1].add(e)}get errorLabels(){return Array.from(this[o1])}};$.MongoError=Vs;var u1=class extends Vs{constructor(e){super(e.message||e.errmsg||e.$err||"n/a"),e.errorLabels&&(this[o1]=new Set(e.errorLabels)),this.errorResponse=e;for(let r in e)r!=="errorLabels"&&r!=="errmsg"&&r!=="message"&&r!=="errorResponse"&&(this[r]=e[r])}get name(){return"MongoServerError"}};$.MongoServerError=u1;var ku=class extends Vs{constructor(e,r){super(e,r)}get name(){return"MongoDriverError"}};$.MongoDriverError=ku;var Fr=class extends ku{constructor(e,r){super(e,r)}get name(){return"MongoAPIError"}};$.MongoAPIError=Fr;var mn=class extends ku{constructor(e,r){super(e,r)}get name(){return"MongoRuntimeError"}};$.MongoRuntimeError=mn;var hE=class extends mn{constructor(e,r,n,s){super(`primary marked stale due to electionId/setVersion mismatch: server setVersion: ${e.setVersion}, server electionId: ${e.electionId}, topology setVersion: ${r}, topology electionId: ${n}`,s)}get name(){return"MongoStalePrimaryError"}};$.MongoStalePrimaryError=hE;var fE=class extends Fr{constructor(e="This batch has already been executed, create new batch to execute"){super(e)}get name(){return"MongoBatchReExecutionError"}};$.MongoBatchReExecutionError=fE;var dE=class extends mn{constructor(e){super(e)}get name(){return"MongoDecompressionError"}};$.MongoDecompressionError=dE;var pE=class extends Fr{constructor(e){super(e)}get name(){return"MongoNotConnectedError"}};$.MongoNotConnectedError=pE;var mE=class extends Fr{constructor(e){super(e)}get name(){return"MongoTransactionError"}};$.MongoTransactionError=mE;var yE=class extends Fr{constructor(e="Cannot use a session that has ended"){super(e)}get name(){return"MongoExpiredSessionError"}};$.MongoExpiredSessionError=yE;var gE=class extends mn{constructor(e){super(e)}get name(){return"MongoKerberosError"}};$.MongoKerberosError=gE;var EE=class extends mn{constructor(e,r){super(e,r)}get name(){return"MongoAWSError"}};$.MongoAWSError=EE;var a1=class extends mn{constructor(e){super(e)}get name(){return"MongoOIDCError"}};$.MongoOIDCError=a1;var _E=class extends a1{constructor(e){super(e)}get name(){return"MongoAzureError"}};$.MongoAzureError=_E;var AE=class extends a1{constructor(e){super(e)}get name(){return"MongoGCPError"}};$.MongoGCPError=AE;var SE=class extends u1{constructor(e){super(e),this.writeConcernErrors=[],this.writeErrors=new Map}get name(){return"MongoClientBulkWriteError"}};$.MongoClientBulkWriteError=SE;var OE=class extends mn{constructor(e){super(e)}get name(){return"MongoClientBulkWriteCursorError"}};$.MongoClientBulkWriteCursorError=OE;var wE=class extends mn{constructor(e){super(e)}get name(){return"MongoClientBulkWriteExecutionError"}};$.MongoClientBulkWriteExecutionError=wE;var CE=class extends mn{constructor(e){super(e)}get name(){return"MongoChangeStreamError"}};$.MongoChangeStreamError=CE;var bE=class extends Fr{constructor(e="Tailable cursor does not support this operation"){super(e)}get name(){return"MongoTailableCursorError"}};$.MongoTailableCursorError=bE;var TE=class extends mn{constructor(e){super(e)}get name(){return"MongoGridFSStreamError"}};$.MongoGridFSStreamError=TE;var DE=class extends mn{constructor(e){super(e)}get name(){return"MongoGridFSChunkError"}};$.MongoGridFSChunkError=DE;var ME=class extends mn{constructor(e,r){super(e,r)}get name(){return"MongoUnexpectedServerResponseError"}};$.MongoUnexpectedServerResponseError=ME;var BE=class extends ku{get name(){return"MongoOperationTimeoutError"}};$.MongoOperationTimeoutError=BE;var IE=class extends Fr{constructor(e="Cursor is already initialized"){super(e)}get name(){return"MongoCursorInUseError"}};$.MongoCursorInUseError=IE;var PE=class extends Fr{constructor(e="Server is closed"){super(e)}get name(){return"MongoServerClosedError"}};$.MongoServerClosedError=PE;var NE=class extends Fr{constructor(e){super(e||"Cursor is exhausted")}get name(){return"MongoCursorExhaustedError"}};$.MongoCursorExhaustedError=NE;var FE=class extends Fr{constructor(e="Topology is closed"){super(e)}get name(){return"MongoTopologyClosedError"}};$.MongoTopologyClosedError=FE;var G8=Symbol("beforeHandshake");function UV(t){return t[G8]===!0}var Vo=class extends Vs{constructor(e,r){super(e,{cause:r?.cause}),r&&typeof r.beforeHandshake=="boolean"&&(this[G8]=r.beforeHandshake)}get name(){return"MongoNetworkError"}};$.MongoNetworkError=Vo;var RE=class extends Vo{constructor(e,r){super(e,r)}get name(){return"MongoNetworkTimeoutError"}};$.MongoNetworkTimeoutError=RE;var sd=class extends ku{constructor(e){super(e)}get name(){return"MongoParseError"}};$.MongoParseError=sd;var vE=class extends Fr{constructor(e,r){super(e,r)}get name(){return"MongoInvalidArgumentError"}};$.MongoInvalidArgumentError=vE;var $E=class extends Fr{constructor(e){super(e)}get name(){return"MongoCompatibilityError"}};$.MongoCompatibilityError=$E;var xE=class extends Fr{constructor(e){super(e)}get name(){return"MongoMissingCredentialsError"}};$.MongoMissingCredentialsError=xE;var kE=class extends Fr{constructor(e,r){super(e,r),this.dependencyName=r.dependencyName}get name(){return"MongoMissingDependencyError"}};$.MongoMissingDependencyError=kE;var id=class extends Vs{constructor(e,r){r&&r.error?super(Vs.buildErrorMessage(r.error.message||r.error),{cause:r.error}):super(e),r&&(this.reason=r),this.code=r.error?.code}get name(){return"MongoSystemError"}};$.MongoSystemError=id;var qE=class extends id{constructor(e,r){super(e,r)}get name(){return"MongoServerSelectionError"}};$.MongoServerSelectionError=qE;var od=class extends u1{constructor(e){super({...e.writeConcernError,...e}),this.errInfo=e.writeConcernError.errInfo,this.result=e}get name(){return"MongoWriteConcernError"}};$.MongoWriteConcernError=od;var K8=new Set([$.MONGODB_ERROR_CODES.HostUnreachable,$.MONGODB_ERROR_CODES.HostNotFound,$.MONGODB_ERROR_CODES.NetworkTimeout,$.MONGODB_ERROR_CODES.ShutdownInProgress,$.MONGODB_ERROR_CODES.PrimarySteppedDown,$.MONGODB_ERROR_CODES.SocketException,$.MONGODB_ERROR_CODES.NotWritablePrimary,$.MONGODB_ERROR_CODES.InterruptedAtShutdown,$.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,$.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,$.MONGODB_ERROR_CODES.NotPrimaryOrSecondary,$.MONGODB_ERROR_CODES.ExceededTimeLimit,$.MONGODB_ERROR_CODES.ReadConcernMajorityNotAvailableYet]),lE=K8;function VV(t,e,r){if(t instanceof Vo)return!0;if(t instanceof Vs&&(e>=9||Y8(t))&&!t.hasErrorLabel($.MongoErrorLabel.HandshakeError))return!1;if(t instanceof od){if(r==="Mongos"&&e<9)return lE.has(t.result.code??0);let i=t.result.writeConcernError.code??Number(t.code);return lE.has(Number.isNaN(i)?0:i)}return t instanceof Vs?lE.has(Number(t.code)):!!($.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||$.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}function Y8(t){return t.hasErrorLabel($.MongoErrorLabel.RetryableWriteError)||t.hasErrorLabel($.MongoErrorLabel.PoolRequstedRetry)}function zV(t){return!!((typeof t.code=="number"?K8.has(t.code):!1)||t instanceof Vo||$.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)||$.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message))}var WV=new Set([$.MONGODB_ERROR_CODES.ShutdownInProgress,$.MONGODB_ERROR_CODES.PrimarySteppedDown,$.MONGODB_ERROR_CODES.InterruptedAtShutdown,$.MONGODB_ERROR_CODES.InterruptedDueToReplStateChange,$.MONGODB_ERROR_CODES.NotPrimaryOrSecondary]),HV=new Set([$.MONGODB_ERROR_CODES.NotWritablePrimary,$.MONGODB_ERROR_CODES.NotPrimaryNoSecondaryOk,$.MONGODB_ERROR_CODES.LegacyNotPrimary]),GV=new Set([$.MONGODB_ERROR_CODES.InterruptedAtShutdown,$.MONGODB_ERROR_CODES.ShutdownInProgress]);function Q8(t){return typeof t.code=="number"?WV.has(t.code):$.LEGACY_NOT_PRIMARY_OR_SECONDARY_ERROR_MESSAGE.test(t.message)||$.NODE_IS_RECOVERING_ERROR_MESSAGE.test(t.message)}function KV(t){return typeof t.code=="number"?HV.has(t.code):Q8(t)?!1:$.LEGACY_NOT_WRITABLE_PRIMARY_ERROR_MESSAGE.test(t.message)}function YV(t){return!!(typeof t.code=="number"&&GV.has(t.code))}function QV(t){return t instanceof sd||t==null?!0:Q8(t)||KV(t)}function JV(t){return!!(t instanceof Vo&&t.message.match(/timed out/))}function XV(t,e){return t==null||!(t instanceof Vs)?!1:t instanceof Vo?!0:e!=null&&e>=9?t.code===$.MONGODB_ERROR_CODES.CursorNotFound?!0:t.hasErrorLabel($.MongoErrorLabel.ResumableChangeStreamError):typeof t.code=="number"?$.GET_MORE_RESUMABLE_CODES.has(t.code):!1}});var lr=g(Rr=>{"use strict";d();Object.defineProperty(Rr,"__esModule",{value:!0});Rr.ReadPreference=Rr.ReadPreferenceMode=void 0;var qu=Z();Rr.ReadPreferenceMode=Object.freeze({primary:"primary",primaryPreferred:"primaryPreferred",secondary:"secondary",secondaryPreferred:"secondaryPreferred",nearest:"nearest"});var cr=class t{constructor(e,r,n){if(!t.isValid(e))throw new qu.MongoInvalidArgumentError(`Invalid read preference mode ${JSON.stringify(e)}`);if(n==null&&typeof r=="object"&&!Array.isArray(r))n=r,r=void 0;else if(r&&!Array.isArray(r))throw new qu.MongoInvalidArgumentError("ReadPreference tags must be an array");if(this.mode=e,this.tags=r,this.hedge=n?.hedge,this.maxStalenessSeconds=void 0,this.minWireVersion=void 0,n=n??{},n.maxStalenessSeconds!=null){if(n.maxStalenessSeconds<=0)throw new qu.MongoInvalidArgumentError("maxStalenessSeconds must be a positive integer");this.maxStalenessSeconds=n.maxStalenessSeconds,this.minWireVersion=5}if(this.mode===t.PRIMARY){if(this.tags&&Array.isArray(this.tags)&&this.tags.length>0)throw new qu.MongoInvalidArgumentError("Primary read preference cannot be combined with tags");if(this.maxStalenessSeconds)throw new qu.MongoInvalidArgumentError("Primary read preference cannot be combined with maxStalenessSeconds");if(this.hedge)throw new qu.MongoInvalidArgumentError("Primary read preference cannot be combined with hedge")}}get preference(){return this.mode}static fromString(e){return new t(e)}static fromOptions(e){if(!e)return;let r=e.readPreference??e.session?.transaction.options.readPreference,n=e.readPreferenceTags;if(r!=null){if(typeof r=="string")return new t(r,n,{maxStalenessSeconds:e.maxStalenessSeconds,hedge:e.hedge});if(!(r instanceof t)&&typeof r=="object"){let s=r.mode||r.preference;if(s&&typeof s=="string")return new t(s,r.tags??n,{maxStalenessSeconds:r.maxStalenessSeconds,hedge:e.hedge})}return n&&(r.tags=n),r}}static translate(e){if(e.readPreference==null)return e;let r=e.readPreference;if(typeof r=="string")e.readPreference=new t(r);else if(r&&!(r instanceof t)&&typeof r=="object"){let n=r.mode||r.preference;n&&typeof n=="string"&&(e.readPreference=new t(n,r.tags,{maxStalenessSeconds:r.maxStalenessSeconds}))}else if(!(r instanceof t))throw new qu.MongoInvalidArgumentError(`Invalid read preference: ${r}`);return e}static isValid(e){return new Set([t.PRIMARY,t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST,null]).has(e)}isValid(e){return t.isValid(typeof e=="string"?e:this.mode)}secondaryOk(){return new Set([t.PRIMARY_PREFERRED,t.SECONDARY,t.SECONDARY_PREFERRED,t.NEAREST]).has(this.mode)}equals(e){return e.mode===this.mode}toJSON(){let e={mode:this.mode};return Array.isArray(this.tags)&&(e.tags=this.tags),this.maxStalenessSeconds&&(e.maxStalenessSeconds=this.maxStalenessSeconds),this.hedge&&(e.hedge=this.hedge),e}};Rr.ReadPreference=cr;cr.PRIMARY=Rr.ReadPreferenceMode.primary;cr.PRIMARY_PREFERRED=Rr.ReadPreferenceMode.primaryPreferred;cr.SECONDARY=Rr.ReadPreferenceMode.secondary;cr.SECONDARY_PREFERRED=Rr.ReadPreferenceMode.secondaryPreferred;cr.NEAREST=Rr.ReadPreferenceMode.nearest;cr.primary=new cr(Rr.ReadPreferenceMode.primary);cr.primaryPreferred=new cr(Rr.ReadPreferenceMode.primaryPreferred);cr.secondary=new cr(Rr.ReadPreferenceMode.secondary);cr.secondaryPreferred=new cr(Rr.ReadPreferenceMode.secondaryPreferred);cr.nearest=new cr(Rr.ReadPreferenceMode.nearest)});var Vn=g(en=>{"use strict";d();Object.defineProperty(en,"__esModule",{value:!0});en.ServerType=en.TopologyType=en.STATE_CONNECTED=en.STATE_CONNECTING=en.STATE_CLOSED=en.STATE_CLOSING=void 0;en._advanceClusterTime=ZV;en.STATE_CLOSING="closing";en.STATE_CLOSED="closed";en.STATE_CONNECTING="connecting";en.STATE_CONNECTED="connected";en.TopologyType=Object.freeze({Single:"Single",ReplicaSetNoPrimary:"ReplicaSetNoPrimary",ReplicaSetWithPrimary:"ReplicaSetWithPrimary",Sharded:"Sharded",Unknown:"Unknown",LoadBalanced:"LoadBalanced"});en.ServerType=Object.freeze({Standalone:"Standalone",Mongos:"Mongos",PossiblePrimary:"PossiblePrimary",RSPrimary:"RSPrimary",RSSecondary:"RSSecondary",RSArbiter:"RSArbiter",RSOther:"RSOther",RSGhost:"RSGhost",Unknown:"Unknown",LoadBalancer:"LoadBalancer"});function ZV(t,e){(t.clusterTime==null||e.clusterTime.greaterThan(t.clusterTime.clusterTime))&&(t.clusterTime=e)}});var l1=g(Yi=>{"use strict";d();Object.defineProperty(Yi,"__esModule",{value:!0});Yi.MIN_SECONDARY_WRITE_WIRE_VERSION=void 0;Yi.writableServerSelector=tz;Yi.sameServerSelector=rz;Yi.secondaryWritableServerSelector=nz;Yi.readPreferenceServerSelector=LE;var cd=Z(),c1=lr(),zn=Vn(),ez=1e4,J8=90;Yi.MIN_SECONDARY_WRITE_WIRE_VERSION=13;function tz(){return function(e,r){return ud(e,r.filter(n=>n.isWritable))}}function rz(t){return function(r,n){return t?n.filter(s=>s.address===t.address&&s.type!==zn.ServerType.Unknown):[]}}function nz(t,e){return!e||!t||t&&t<Yi.MIN_SECONDARY_WRITE_WIRE_VERSION?LE(c1.ReadPreference.primary):LE(e)}function sz(t,e,r){if(t.maxStalenessSeconds==null||t.maxStalenessSeconds<0)return r;let n=t.maxStalenessSeconds,s=(e.heartbeatFrequencyMS+ez)/1e3;if(n<s)throw new cd.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${s} seconds`);if(n<J8)throw new cd.MongoInvalidArgumentError(`Option "maxStalenessSeconds" must be at least ${J8} seconds`);if(e.type===zn.TopologyType.ReplicaSetWithPrimary){let i=Array.from(e.servers.values()).filter(ad)[0];return r.reduce((o,u)=>{let c=(u.lastUpdateTime-u.lastWriteDate-(i.lastUpdateTime-i.lastWriteDate)+e.heartbeatFrequencyMS)/1e3,l=t.maxStalenessSeconds??0;return c<=l&&o.push(u),o},[])}if(e.type===zn.TopologyType.ReplicaSetNoPrimary){if(r.length===0)return r;let i=r.reduce((o,u)=>u.lastWriteDate>o.lastWriteDate?u:o);return r.reduce((o,u)=>{let c=(i.lastWriteDate-u.lastWriteDate+e.heartbeatFrequencyMS)/1e3,l=t.maxStalenessSeconds??0;return c<=l&&o.push(u),o},[])}return r}function iz(t,e){let r=Object.keys(t),n=Object.keys(e);for(let s=0;s<r.length;++s){let i=r[s];if(n.indexOf(i)===-1||e[i]!==t[i])return!1}return!0}function oz(t,e){if(t.tags==null||Array.isArray(t.tags)&&t.tags.length===0)return e;for(let r=0;r<t.tags.length;++r){let n=t.tags[r],s=e.reduce((i,o)=>(iz(n,o.tags)&&i.push(o),i),[]);if(s.length)return s}return[]}function ud(t,e){let r=e.reduce((s,i)=>Math.min(i.roundTripTime,s),1/0),n=r+t.localThresholdMS;return e.reduce((s,i)=>(i.roundTripTime<=n&&i.roundTripTime>=r&&s.push(i),s),[])}function ad(t){return t.type===zn.ServerType.RSPrimary}function uz(t){return t.type===zn.ServerType.RSSecondary}function az(t){return t.type===zn.ServerType.RSSecondary||t.type===zn.ServerType.RSPrimary}function X8(t){return t.type!==zn.ServerType.Unknown}function cz(t){return t.type===zn.ServerType.LoadBalancer}function LE(t){if(!t.isValid())throw new cd.MongoInvalidArgumentError("Invalid read preference specified");return function(r,n,s=[]){let i=r.commonWireVersion;if(i&&t.minWireVersion&&t.minWireVersion>i)throw new cd.MongoCompatibilityError(`Minimum wire version '${t.minWireVersion}' required, but found '${i}'`);if(r.type===zn.TopologyType.LoadBalanced)return n.filter(cz);if(r.type===zn.TopologyType.Unknown)return[];if(r.type===zn.TopologyType.Single)return ud(r,n.filter(X8));if(r.type===zn.TopologyType.Sharded){let c=n.filter(h=>!s.includes(h)),l=c.length>0?c:s;return ud(r,l.filter(X8))}let o=t.mode;if(o===c1.ReadPreference.PRIMARY)return n.filter(ad);if(o===c1.ReadPreference.PRIMARY_PREFERRED){let c=n.filter(ad);if(c.length)return c}let u=o===c1.ReadPreference.NEAREST?az:uz,a=ud(r,oz(t,sz(t,r,n.filter(u))));return o===c1.ReadPreference.SECONDARY_PREFERRED&&a.length===0?n.filter(ad):a}}});var Lu=g(nt=>{"use strict";d();Object.defineProperty(nt,"__esModule",{value:!0});nt.OP_MSG=nt.OP_COMPRESSED=nt.OP_DELETE=nt.OP_QUERY=nt.OP_INSERT=nt.OP_UPDATE=nt.OP_REPLY=nt.MIN_SUPPORTED_QE_SERVER_VERSION=nt.MIN_SUPPORTED_QE_WIRE_VERSION=nt.MAX_SUPPORTED_WIRE_VERSION=nt.MIN_SUPPORTED_WIRE_VERSION=nt.MAX_SUPPORTED_SERVER_VERSION=nt.MIN_SUPPORTED_SERVER_VERSION=void 0;nt.MIN_SUPPORTED_SERVER_VERSION="4.0";nt.MAX_SUPPORTED_SERVER_VERSION="8.0";nt.MIN_SUPPORTED_WIRE_VERSION=7;nt.MAX_SUPPORTED_WIRE_VERSION=25;nt.MIN_SUPPORTED_QE_WIRE_VERSION=21;nt.MIN_SUPPORTED_QE_SERVER_VERSION="7.0";nt.OP_REPLY=1;nt.OP_UPDATE=2001;nt.OP_INSERT=2002;nt.OP_QUERY=2004;nt.OP_DELETE=2006;nt.OP_COMPRESSED=2012;nt.OP_MSG=2013});var jt=g(P=>{"use strict";d();Object.defineProperty(P,"__esModule",{value:!0});P.END=P.CHANGE=P.INIT=P.MORE=P.RESPONSE=P.SERVER_HEARTBEAT_FAILED=P.SERVER_HEARTBEAT_SUCCEEDED=P.SERVER_HEARTBEAT_STARTED=P.COMMAND_FAILED=P.COMMAND_SUCCEEDED=P.COMMAND_STARTED=P.CLUSTER_TIME_RECEIVED=P.CONNECTION_CHECKED_IN=P.CONNECTION_CHECKED_OUT=P.CONNECTION_CHECK_OUT_FAILED=P.CONNECTION_CHECK_OUT_STARTED=P.CONNECTION_CLOSED=P.CONNECTION_READY=P.CONNECTION_CREATED=P.CONNECTION_POOL_READY=P.CONNECTION_POOL_CLEARED=P.CONNECTION_POOL_CLOSED=P.CONNECTION_POOL_CREATED=P.WAITING_FOR_SUITABLE_SERVER=P.SERVER_SELECTION_SUCCEEDED=P.SERVER_SELECTION_FAILED=P.SERVER_SELECTION_STARTED=P.TOPOLOGY_DESCRIPTION_CHANGED=P.TOPOLOGY_CLOSED=P.TOPOLOGY_OPENING=P.SERVER_DESCRIPTION_CHANGED=P.SERVER_CLOSED=P.SERVER_OPENING=P.DESCRIPTION_RECEIVED=P.UNPINNED=P.PINNED=P.MESSAGE=P.ENDED=P.CLOSED=P.CONNECT=P.OPEN=P.CLOSE=P.TIMEOUT=P.ERROR=P.SYSTEM_JS_COLLECTION=P.SYSTEM_COMMAND_COLLECTION=P.SYSTEM_USER_COLLECTION=P.SYSTEM_PROFILE_COLLECTION=P.SYSTEM_INDEX_COLLECTION=P.SYSTEM_NAMESPACE_COLLECTION=void 0;P.kDecoratedKeys=P.kDecorateResult=P.LEGACY_HELLO_COMMAND_CAMEL_CASE=P.LEGACY_HELLO_COMMAND=P.MONGO_CLIENT_EVENTS=P.LOCAL_SERVER_EVENTS=P.SERVER_RELAY_EVENTS=P.APM_EVENTS=P.TOPOLOGY_EVENTS=P.CMAP_EVENTS=P.HEARTBEAT_EVENTS=P.RESUME_TOKEN_CHANGED=void 0;P.SYSTEM_NAMESPACE_COLLECTION="system.namespaces";P.SYSTEM_INDEX_COLLECTION="system.indexes";P.SYSTEM_PROFILE_COLLECTION="system.profile";P.SYSTEM_USER_COLLECTION="system.users";P.SYSTEM_COMMAND_COLLECTION="$cmd";P.SYSTEM_JS_COLLECTION="system.js";P.ERROR="error";P.TIMEOUT="timeout";P.CLOSE="close";P.OPEN="open";P.CONNECT="connect";P.CLOSED="closed";P.ENDED="ended";P.MESSAGE="message";P.PINNED="pinned";P.UNPINNED="unpinned";P.DESCRIPTION_RECEIVED="descriptionReceived";P.SERVER_OPENING="serverOpening";P.SERVER_CLOSED="serverClosed";P.SERVER_DESCRIPTION_CHANGED="serverDescriptionChanged";P.TOPOLOGY_OPENING="topologyOpening";P.TOPOLOGY_CLOSED="topologyClosed";P.TOPOLOGY_DESCRIPTION_CHANGED="topologyDescriptionChanged";P.SERVER_SELECTION_STARTED="serverSelectionStarted";P.SERVER_SELECTION_FAILED="serverSelectionFailed";P.SERVER_SELECTION_SUCCEEDED="serverSelectionSucceeded";P.WAITING_FOR_SUITABLE_SERVER="waitingForSuitableServer";P.CONNECTION_POOL_CREATED="connectionPoolCreated";P.CONNECTION_POOL_CLOSED="connectionPoolClosed";P.CONNECTION_POOL_CLEARED="connectionPoolCleared";P.CONNECTION_POOL_READY="connectionPoolReady";P.CONNECTION_CREATED="connectionCreated";P.CONNECTION_READY="connectionReady";P.CONNECTION_CLOSED="connectionClosed";P.CONNECTION_CHECK_OUT_STARTED="connectionCheckOutStarted";P.CONNECTION_CHECK_OUT_FAILED="connectionCheckOutFailed";P.CONNECTION_CHECKED_OUT="connectionCheckedOut";P.CONNECTION_CHECKED_IN="connectionCheckedIn";P.CLUSTER_TIME_RECEIVED="clusterTimeReceived";P.COMMAND_STARTED="commandStarted";P.COMMAND_SUCCEEDED="commandSucceeded";P.COMMAND_FAILED="commandFailed";P.SERVER_HEARTBEAT_STARTED="serverHeartbeatStarted";P.SERVER_HEARTBEAT_SUCCEEDED="serverHeartbeatSucceeded";P.SERVER_HEARTBEAT_FAILED="serverHeartbeatFailed";P.RESPONSE="response";P.MORE="more";P.INIT="init";P.CHANGE="change";P.END="end";P.RESUME_TOKEN_CHANGED="resumeTokenChanged";P.HEARTBEAT_EVENTS=Object.freeze([P.SERVER_HEARTBEAT_STARTED,P.SERVER_HEARTBEAT_SUCCEEDED,P.SERVER_HEARTBEAT_FAILED]);P.CMAP_EVENTS=Object.freeze([P.CONNECTION_POOL_CREATED,P.CONNECTION_POOL_READY,P.CONNECTION_POOL_CLEARED,P.CONNECTION_POOL_CLOSED,P.CONNECTION_CREATED,P.CONNECTION_READY,P.CONNECTION_CLOSED,P.CONNECTION_CHECK_OUT_STARTED,P.CONNECTION_CHECK_OUT_FAILED,P.CONNECTION_CHECKED_OUT,P.CONNECTION_CHECKED_IN]);P.TOPOLOGY_EVENTS=Object.freeze([P.SERVER_OPENING,P.SERVER_CLOSED,P.SERVER_DESCRIPTION_CHANGED,P.TOPOLOGY_OPENING,P.TOPOLOGY_CLOSED,P.TOPOLOGY_DESCRIPTION_CHANGED,P.ERROR,P.TIMEOUT,P.CLOSE]);P.APM_EVENTS=Object.freeze([P.COMMAND_STARTED,P.COMMAND_SUCCEEDED,P.COMMAND_FAILED]);P.SERVER_RELAY_EVENTS=Object.freeze([P.SERVER_HEARTBEAT_STARTED,P.SERVER_HEARTBEAT_SUCCEEDED,P.SERVER_HEARTBEAT_FAILED,P.COMMAND_STARTED,P.COMMAND_SUCCEEDED,P.COMMAND_FAILED,...P.CMAP_EVENTS]);P.LOCAL_SERVER_EVENTS=Object.freeze([P.CONNECT,P.DESCRIPTION_RECEIVED,P.CLOSED,P.ENDED]);P.MONGO_CLIENT_EVENTS=Object.freeze([...P.CMAP_EVENTS,...P.APM_EVENTS,...P.TOPOLOGY_EVENTS,...P.HEARTBEAT_EVENTS]);P.LEGACY_HELLO_COMMAND="ismaster";P.LEGACY_HELLO_COMMAND_CAMEL_CASE="isMaster";P.kDecorateResult=Symbol.for("@@mdb.decorateDecryptionResult");P.kDecoratedKeys=Symbol.for("@@mdb.decryptedKeys")});var ls=g(zs=>{"use strict";d();Object.defineProperty(zs,"__esModule",{value:!0});zs.ReadConcern=zs.ReadConcernLevel=void 0;zs.ReadConcernLevel=Object.freeze({local:"local",majority:"majority",linearizable:"linearizable",available:"available",snapshot:"snapshot"});var jE=class t{constructor(e){this.level=zs.ReadConcernLevel[e]??e}static fromOptions(e){if(e!=null){if(e.readConcern){let{readConcern:r}=e;if(r instanceof t)return r;if(typeof r=="string")return new t(r);if("level"in r&&r.level)return new t(r.level)}if(e.level)return new t(e.level)}}static get MAJORITY(){return zs.ReadConcernLevel.majority}static get AVAILABLE(){return zs.ReadConcernLevel.available}static get LINEARIZABLE(){return zs.ReadConcernLevel.linearizable}static get SNAPSHOT(){return zs.ReadConcernLevel.snapshot}toJSON(){return{level:this.level}}};zs.ReadConcern=jE});var Z8=g(ld=>{"use strict";d();Object.defineProperty(ld,"__esModule",{value:!0});ld.OnDemandDocument=void 0;var Pe=Ue(),UE=class t{constructor(e,r=0,n=!1,s){this.bson=e,this.offset=r,this.isArray=n,this.cache=Object.create(null),this.indexFound=Object.create(null),this.elements=s??(0,Pe.parseToElementsToArray)(this.bson,r)}isElementName(e,r){let n=r[2],s=r[1];if(e.length!==n)return!1;let i=s+n;for(let o=s,u=0;u<e.length&&o<i;u++,o++)if(this.bson[o]!==e.charCodeAt(u))return!1;return!0}getElement(e){let r=this.cache[e];if(r===!1)return null;if(r!=null)return r;if(typeof e=="number")if(this.isArray)if(e<this.elements.length){let s={element:this.elements[e],value:void 0};return this.cache[e]=s,this.indexFound[e]=!0,s}else return null;else return null;for(let n=0;n<this.elements.length;n++){let s=this.elements[n];if(!(n in this.indexFound)&&this.isElementName(e,s)){let i={element:s,value:void 0};return this.cache[e]=i,this.indexFound[n]=!0,i}}return this.cache[e]=!1,null}toJSValue(e,r){let n=e[0],s=e[3],i=e[4];if(r!==n)return null;switch(r){case Pe.BSONType.null:case Pe.BSONType.undefined:return null;case Pe.BSONType.double:return(0,Pe.getFloat64LE)(this.bson,s);case Pe.BSONType.int:return(0,Pe.getInt32LE)(this.bson,s);case Pe.BSONType.long:return(0,Pe.getBigInt64LE)(this.bson,s);case Pe.BSONType.bool:return!!this.bson[s];case Pe.BSONType.objectId:return new Pe.ObjectId(this.bson.subarray(s,s+12));case Pe.BSONType.timestamp:return new Pe.Timestamp((0,Pe.getBigInt64LE)(this.bson,s));case Pe.BSONType.string:return(0,Pe.toUTF8)(this.bson,s+4,s+i-1,!1);case Pe.BSONType.binData:{let o=(0,Pe.getInt32LE)(this.bson,s),u=this.bson[s+4];if(u===2){let a=(0,Pe.getInt32LE)(this.bson,s+1+4);if(a<0)throw new Pe.BSONError("Negative binary type element size found for subtype 0x02");if(a>o-4)throw new Pe.BSONError("Binary type with subtype 0x02 contains too long binary size");if(a<o-4)throw new Pe.BSONError("Binary type with subtype 0x02 contains too short binary size");return new Pe.Binary(this.bson.subarray(s+1+4+4,s+1+4+4+a),2)}return new Pe.Binary(this.bson.subarray(s+1+4,s+1+4+o),u)}case Pe.BSONType.date:return new Date(Number((0,Pe.getBigInt64LE)(this.bson,s)));case Pe.BSONType.object:return new t(this.bson,s);case Pe.BSONType.array:return new t(this.bson,s,!0);default:throw new Pe.BSONError(`Unsupported BSON type: ${r}`)}}size(){return this.elements.length}has(e){let r=this.cache[e];return r===!1?!1:r!=null?!0:this.getElement(e)!=null}get(e,r,n){let s=this.getElement(e);if(s==null){if(n===!0)throw new Pe.BSONError(`BSON element "${e}" is missing`);return null}if(s.value==null){let i=this.toJSValue(s.element,r);if(i==null){if(n===!0)throw new Pe.BSONError(`BSON element "${e}" is missing`);return null}s.value=i}return s.value}getNumber(e,r){let n=this.get(e,Pe.BSONType.bool),s=n==null?null:n?1:0,i=this.get(e,Pe.BSONType.long),o=i==null?null:Number(i),u=s??o??this.get(e,Pe.BSONType.int)??this.get(e,Pe.BSONType.double);if(r===!0&&u==null)throw new Pe.BSONError(`BSON element "${e}" is missing`);return u}toObject(e){return(0,Pe.deserialize)(this.bson,{...e,index:this.offset,allowObjectSmallerThanBufferSize:!0})}toBytes(){let e=(0,Pe.getInt32LE)(this.bson,this.offset);return this.bson.subarray(this.offset,this.offset+e)}};ld.OnDemandDocument=UE});var Hs=g(Ws=>{"use strict";d();Object.defineProperty(Ws,"__esModule",{value:!0});Ws.ClientBulkWriteCursorResponse=Ws.ExplainedCursorResponse=Ws.CursorResponse=Ws.MongoDBResponse=void 0;Ws.isErrorResponse=tb;var $e=Ue(),ju=Z(),eb=ae(),lz=Z8();function tb(t,e){for(let r=0;r<e.length;r++){let n=e[r];if(n[2]===2){let s=n[1];if(t[s]===111&&t[s+1]===107){let i=n[3],o=n[4];for(let u=i;u<i+o;u++)if(t[u]!==0)return!1;return!0}}}return!0}var Ka=class t extends lz.OnDemandDocument{get(e,r,n){try{return super.get(e,r,n)}catch(s){throw new ju.MongoUnexpectedServerResponseError(s.message,{cause:s})}}static is(e){return e instanceof t}static make(e){let r=(0,$e.parseToElementsToArray)(e,0);return tb(e,r)?new t(e,0,!1,r):new this(e,0,!1,r)}get isMaxTimeExpiredError(){if(this.ok===0&&this.code===ju.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;if(this.ok===0)return!1;if(this.get("writeConcernError",$e.BSONType.object)?.getNumber("code")===ju.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0;let n=this.get("writeErrors",$e.BSONType.array);if(n?.size()){for(let s=0;s<n.size();s++)if(n.get(s,$e.BSONType.object)?.getNumber("code")===ju.MONGODB_ERROR_CODES.MaxTimeMSExpired)return!0}return!1}get recoveryToken(){return this.get("recoveryToken",$e.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}get atClusterTime(){return this.get("cursor",$e.BSONType.object)?.get("atClusterTime",$e.BSONType.timestamp)??this.get("atClusterTime",$e.BSONType.timestamp)}get operationTime(){return this.get("operationTime",$e.BSONType.timestamp)}get ok(){return this.getNumber("ok")?1:0}get $err(){return this.get("$err",$e.BSONType.string)}get errmsg(){return this.get("errmsg",$e.BSONType.string)}get code(){return this.getNumber("code")}get $clusterTime(){if(!("clusterTime"in this)){let e=this.get("$clusterTime",$e.BSONType.object);if(e==null)return this.clusterTime=null,null;let r=e.get("clusterTime",$e.BSONType.timestamp,!0),n=e.get("signature",$e.BSONType.object)?.toObject();this.clusterTime={clusterTime:r,signature:n}}return this.clusterTime??null}toObject(e){let r={...(0,$e.pluckBSONSerializeOptions)(e??{}),validation:(0,$e.parseUtf8ValidationOption)(e)};return super.toObject(r)}};Ws.MongoDBResponse=Ka;Ka.empty=new Ka(new Uint8Array([13,0,0,0,16,111,107,0,1,0,0,0,0]));var Ya=class t extends Ka{constructor(){super(...arguments),this._batch=null,this.iterated=0,this._encryptedBatch=null}static is(e){return e instanceof t||e===t.emptyGetMore}get cursor(){return this.get("cursor",$e.BSONType.object,!0)}get id(){try{return $e.Long.fromBigInt(this.cursor.get("id",$e.BSONType.long,!0))}catch(e){throw new ju.MongoUnexpectedServerResponseError(e.message,{cause:e})}}get ns(){let e=this.cursor.get("ns",$e.BSONType.string);return e!=null?(0,eb.ns)(e):null}get length(){return Math.max(this.batchSize-this.iterated,0)}get encryptedBatch(){if(this.encryptedResponse==null)return null;if(this._encryptedBatch!=null)return this._encryptedBatch;let e=this.encryptedResponse?.get("cursor",$e.BSONType.object);if(e?.has("firstBatch"))this._encryptedBatch=e.get("firstBatch",$e.BSONType.array,!0);else if(e?.has("nextBatch"))this._encryptedBatch=e.get("nextBatch",$e.BSONType.array,!0);else throw new ju.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._encryptedBatch}get batch(){if(this._batch!=null)return this._batch;let e=this.cursor;if(e.has("firstBatch"))this._batch=e.get("firstBatch",$e.BSONType.array,!0);else if(e.has("nextBatch"))this._batch=e.get("nextBatch",$e.BSONType.array,!0);else throw new ju.MongoUnexpectedServerResponseError("Cursor document did not contain a batch");return this._batch}get batchSize(){return this.batch?.size()}get postBatchResumeToken(){return this.cursor.get("postBatchResumeToken",$e.BSONType.object)?.toObject({promoteValues:!1,promoteLongs:!1,promoteBuffers:!1,validation:{utf8:!0}})??null}shift(e){if(this.iterated>=this.batchSize)return null;let r=this.batch.get(this.iterated,$e.BSONType.object,!0)??null,n=this.encryptedBatch?.get(this.iterated,$e.BSONType.object,!0)??null;if(this.iterated+=1,e?.raw)return r.toBytes();{let s=r.toObject(e);return n&&(0,eb.decorateDecryptionResult)(s,n.toObject(e),!0),s}}clear(){this.iterated=this.batchSize}};Ws.CursorResponse=Ya;Ya.emptyGetMore={id:new $e.Long(0),length:0,shift:()=>null};var VE=class extends Ya{constructor(){super(...arguments),this.isExplain=!0,this._length=1}get id(){return $e.Long.fromBigInt(0n)}get batchSize(){return 0}get ns(){return null}get length(){return this._length}shift(e){return this._length===0?null:(this._length-=1,this.toObject(e))}};Ws.ExplainedCursorResponse=VE;var zE=class extends Ya{get insertedCount(){return this.get("nInserted",$e.BSONType.int,!0)}get upsertedCount(){return this.get("nUpserted",$e.BSONType.int,!0)}get matchedCount(){return this.get("nMatched",$e.BSONType.int,!0)}get modifiedCount(){return this.get("nModified",$e.BSONType.int,!0)}get deletedCount(){return this.get("nDeleted",$e.BSONType.int,!0)}get writeConcernError(){return this.get("writeConcernError",$e.BSONType.object,!1)}};Ws.ClientBulkWriteCursorResponse=zE});var vr=g(Uu=>{"use strict";d();Object.defineProperty(Uu,"__esModule",{value:!0});Uu.WriteConcern=Uu.WRITE_CONCERN_KEYS=void 0;Uu.throwIfWriteConcernError=fz;var rb=Hs(),hz=Z();Uu.WRITE_CONCERN_KEYS=["w","wtimeout","j","journal","fsync"];var WE=class t{constructor(e,r,n,s){e!=null&&(Number.isNaN(Number(e))?this.w=e:this.w=Number(e)),r!=null&&(this.wtimeoutMS=this.wtimeout=r),n!=null&&(this.journal=this.j=n),s!=null&&(this.journal=this.j=!!s)}static apply(e,r){let n={};return r.w!=null&&(n.w=r.w),r.wtimeoutMS!=null&&(n.wtimeout=r.wtimeoutMS),r.journal!=null&&(n.j=r.j),e.writeConcern=n,e}static fromOptions(e,r){if(e==null)return;r=r??{};let n;typeof e=="string"||typeof e=="number"?n={w:e}:e instanceof t?n=e:n=e.writeConcern;let s=r instanceof t?r:r.writeConcern,{w:i=void 0,wtimeout:o=void 0,j:u=void 0,fsync:a=void 0,journal:c=void 0,wtimeoutMS:l=void 0}={...s,...n};if(i!=null||o!=null||l!=null||u!=null||c!=null||a!=null)return new t(i,o??l,u??c,a)}};Uu.WriteConcern=WE;function fz(t){if(typeof t=="object"&&t!=null){let e=rb.MongoDBResponse.is(t)&&t.has("writeConcernError")?t.toObject():!rb.MongoDBResponse.is(t)&&"writeConcernError"in t?t:null;if(e!=null)throw new hz.MongoWriteConcernError(e)}}});var ae=g(re=>{"use strict";d();Object.defineProperty(re,"__esModule",{value:!0});re.randomBytes=re.COSMOS_DB_MSG=re.DOCUMENT_DB_MSG=re.COSMOS_DB_CHECK=re.DOCUMENT_DB_CHECK=re.MONGODB_WARNING_CODE=re.DEFAULT_PK_FACTORY=re.HostAddress=re.BufferPool=re.List=re.MongoDBCollectionNamespace=re.MongoDBNamespace=re.ByteUtils=void 0;re.isUint8Array=Sz;re.hostMatchesWildcards=Oz;re.normalizeHintField=wz;re.isObject=GE;re.mergeOptions=bz;re.filterOptions=Tz;re.applyRetryableWrites=Dz;re.isPromiseLike=Mz;re.decorateWithCollation=Bz;re.decorateWithReadConcern=Iz;re.getTopology=ub;re.ns=Pz;re.makeCounter=Nz;re.uuidV4=Fz;re.maxWireVersion=Rz;re.arrayStrictEqual=vz;re.errorStrictEqual=$z;re.makeStateMachine=xz;re.now=ab;re.calculateDurationInMs=kz;re.hasAtomicOperators=cb;re.resolveTimeoutOptions=qz;re.resolveOptions=Lz;re.isSuperset=lb;re.isHello=jz;re.setDifference=Uz;re.isRecord=hb;re.deepCopy=KE;re.emitWarning=fb;re.emitWarningOnce=zz;re.enumToString=Wz;re.supportsRetryableWrites=Hz;re.shuffle=Gz;re.commandSupportsReadConcern=Kz;re.compareObjectId=Yz;re.parseInteger=db;re.parseUnsignedInteger=Qz;re.checkParentDomainMatch=Jz;re.get=Xz;re.request=Zz;re.isHostMatch=eW;re.promiseWithResolvers=pb;re.squashError=tW;re.once=rW;re.maybeAddIdToDocuments=nW;re.fileIsAccessible=sW;re.csotMin=iW;re.noop=oW;re.decorateDecryptionResult=mb;var ib=require("crypto"),dz=require("fs"),ob=require("http"),HE=require("timers"),pz=require("url"),mz=require("url"),yz=require("util"),JE=Ue(),gz=Lu(),hd=jt(),tn=Z(),Ez=ls(),_z=lr(),Az=Vn(),nb=vr();re.ByteUtils={toLocalBufferType(t){return Buffer.isBuffer(t)?t:Buffer.from(t.buffer,t.byteOffset,t.byteLength)},equals(t,e){return re.ByteUtils.toLocalBufferType(t).equals(e)},compare(t,e){return re.ByteUtils.toLocalBufferType(t).compare(e)},toBase64(t){return re.ByteUtils.toLocalBufferType(t).toString("base64")}};function Sz(t){return t!=null&&typeof t=="object"&&Symbol.toStringTag in t&&t[Symbol.toStringTag]==="Uint8Array"}function Oz(t,e){for(let r of e)if(t===r||r.startsWith("*.")&&t?.endsWith(r.substring(2,r.length))||r.startsWith("*/")&&t?.endsWith(r.substring(2,r.length)))return!0;return!1}function wz(t){let e;if(typeof t=="string")e=t;else if(Array.isArray(t))e={},t.forEach(r=>{e[r]=1});else if(t!=null&&typeof t=="object"){e={};for(let r in t)e[r]=t[r]}return e}var Cz=t=>Object.prototype.toString.call(t);function GE(t){return Cz(t)==="[object Object]"}function bz(t,e){return{...t,...e}}function Tz(t,e){let r={};for(let n in t)e.includes(n)&&(r[n]=t[n]);return r}function Dz(t,e){return e&&e.s.options?.retryWrites&&(t.retryWrites=!0),t}function Mz(t){return t!=null&&typeof t=="object"&&"then"in t&&typeof t.then=="function"}function Bz(t,e,r){let n=ub(e).capabilities;if(r.collation&&typeof r.collation=="object")if(n&&n.commandsTakeCollation)t.collation=r.collation;else throw new tn.MongoCompatibilityError("Current topology does not support collation")}function Iz(t,e,r){if(r&&r.session&&r.session.inTransaction())return;let n=Object.assign({},t.readConcern||{});e.s.readConcern&&Object.assign(n,e.s.readConcern),Object.keys(n).length>0&&Object.assign(t,{readConcern:n})}function ub(t){if("topology"in t&&t.topology)return t.topology;if("client"in t&&t.client.topology)return t.client.topology;throw new tn.MongoNotConnectedError("MongoClient must be connected to perform this operation")}function Pz(t){return h1.fromString(t)}var h1=class t{constructor(e,r){this.db=e,this.collection=r,this.collection=r===""?void 0:r}toString(){return this.collection?`${this.db}.${this.collection}`:this.db}withCollection(e){return new fd(this.db,e)}static fromString(e){if(typeof e!="string"||e==="")throw new tn.MongoRuntimeError(`Cannot parse namespace from "${e}"`);let[r,...n]=e.split("."),s=n.join(".");return new t(r,s===""?void 0:s)}};re.MongoDBNamespace=h1;var fd=class extends h1{constructor(e,r){super(e,r),this.collection=r}static fromString(e){return super.fromString(e)}};re.MongoDBCollectionNamespace=fd;function*Nz(t=0){let e=t;for(;;){let r=e;e+=1,yield r}}function Fz(){let t=ib.randomBytes(16);return t[6]=t[6]&15|64,t[8]=t[8]&63|128,t}function Rz(t){if(t){if(t.loadBalanced||t.serverApi?.version)return gz.MAX_SUPPORTED_WIRE_VERSION;if(t.hello)return t.hello.maxWireVersion;if("lastHello"in t&&typeof t.lastHello=="function"){let e=t.lastHello();if(e)return e.maxWireVersion}if(t.description&&"maxWireVersion"in t.description&&t.description.maxWireVersion!=null)return t.description.maxWireVersion}return 0}function vz(t,e){return!Array.isArray(t)||!Array.isArray(e)?!1:t.length===e.length&&t.every((r,n)=>r===e[n])}function $z(t,e){return t===e?!0:!t||!e?t===e:!(t==null&&e!=null||t!=null&&e==null||t.constructor.name!==e.constructor.name||t.message!==e.message)}function xz(t){return function(r,n){let s=t[r.s.state];if(s&&s.indexOf(n)<0)throw new tn.MongoRuntimeError(`illegal state transition from [${r.s.state}] => [${n}], allowed: [${s}]`);r.emit("stateChanged",r.s.state,n),r.s.state=n}}function ab(){let t=process.hrtime();return Math.floor(t[0]*1e3+t[1]/1e6)}function kz(t){if(typeof t!="number")return-1;let e=ab()-t;return e<0?0:e}function cb(t){if(Array.isArray(t)){for(let r of t)if(cb(r))return!0;return!1}let e=Object.keys(t);return e.length>0&&e[0][0]==="$"}function qz(t,e){let{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:s,timeoutMS:i}=t.s.options;return{socketTimeoutMS:r,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:s,timeoutMS:i,...e}}function Lz(t,e){let r=Object.assign({},e,(0,JE.resolveBSONOptions)(e,t)),n=e?.timeoutMS??t?.timeoutMS,s=e?.session;if(!s?.inTransaction()){let u=Ez.ReadConcern.fromOptions(e)??t?.readConcern;u&&(r.readConcern=u);let a=nb.WriteConcern.fromOptions(e)??t?.writeConcern;a&&(n!=null&&(a=nb.WriteConcern.fromOptions({...a,wtimeout:void 0,wtimeoutMS:void 0})),r.writeConcern=a)}r.timeoutMS=n;let i=_z.ReadPreference.fromOptions(e)??t?.readPreference;if(i&&(r.readPreference=i),s?.explicit&&s?.timeoutContext!=null&&e?.timeoutMS!=null)throw new tn.MongoInvalidArgumentError("An operation cannot be given a timeoutMS setting when inside a withTransaction call that has a timeoutMS setting");return r}function lb(t,e){t=Array.isArray(t)?new Set(t):t,e=Array.isArray(e)?new Set(e):e;for(let r of e)if(!t.has(r))return!1;return!0}function jz(t){return!!(t[hd.LEGACY_HELLO_COMMAND]||t.hello)}function Uz(t,e){let r=new Set(t);for(let n of e)r.delete(n);return r}var Vz=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);function hb(t,e=void 0){if(!GE(t))return!1;let r=t.constructor;if(r&&r.prototype&&(!GE(r.prototype)||!Vz(r.prototype,"isPrototypeOf")))return!1;if(e){let n=Object.keys(t);return lb(n,e)}return!0}function KE(t){if(t==null)return t;if(Array.isArray(t))return t.map(r=>KE(r));if(hb(t)){let r={};for(let n in t)r[n]=KE(t[n]);return r}let e=t.constructor;if(e)switch(e.name.toLowerCase()){case"date":return new e(Number(t));case"map":return new Map(t);case"set":return new Set(t);case"buffer":return Buffer.from(t)}return t}var dd=class{get length(){return this.count}get[Symbol.toStringTag](){return"List"}constructor(){this.count=0,this.head={next:null,prev:null,value:null},this.head.next=this.head,this.head.prev=this.head}toArray(){return Array.from(this)}toString(){return`head <=> ${this.toArray().join(" <=> ")} <=> head`}*[Symbol.iterator](){for(let e of this.nodes())yield e.value}*nodes(){let e=this.head.next;for(;e!==this.head;){let{next:r}=e;yield e,e=r}}push(e){this.count+=1;let r={next:this.head,prev:this.head.prev,value:e};this.head.prev.next=r,this.head.prev=r}pushMany(e){for(let r of e)this.push(r)}unshift(e){this.count+=1;let r={next:this.head.next,prev:this.head,value:e};this.head.next.prev=r,this.head.next=r}remove(e){if(e===this.head||this.length===0)return null;this.count-=1;let r=e.prev,n=e.next;return r.next=n,n.prev=r,e.value}shift(){return this.remove(this.head.next)}pop(){return this.remove(this.head.prev)}prune(e){for(let r of this.nodes())e(r.value)&&this.remove(r)}clear(){this.count=0,this.head.next=this.head,this.head.prev=this.head}first(){return this.head.next.value}last(){return this.head.prev.value}};re.List=dd;var YE=class{constructor(){this.buffers=new dd,this.totalByteLength=0}get length(){return this.totalByteLength}append(e){this.buffers.push(e),this.totalByteLength+=e.length}getInt32(){if(this.totalByteLength<4)return null;let e=this.buffers.first();if(e!=null&&e.byteLength>=4)return e.readInt32LE(0);let r=this.read(4),n=r.readInt32LE(0);return this.totalByteLength+=4,this.buffers.unshift(r),n}read(e){if(typeof e!="number"||e<0)throw new tn.MongoInvalidArgumentError('Argument "size" must be a non-negative number');if(e>this.totalByteLength)return Buffer.alloc(0);let r=Buffer.allocUnsafe(e);for(let n=0;n<e;){let s=this.buffers.shift();if(s==null)break;let i=e-n,o=Math.min(i,s.byteLength),u=s.subarray(0,o);r.set(u,n),n+=o,this.totalByteLength-=o,o<s.byteLength&&this.buffers.unshift(s.subarray(o))}return r}};re.BufferPool=YE;var QE=class t{constructor(e){this.host=void 0,this.port=void 0,this.socketPath=void 0,this.isIPv6=!1;let r=e.split(" ").join("%20");if(r.endsWith(".sock")){this.socketPath=decodeURIComponent(r);return}let n=`iLoveJS://${r}`,s;try{s=new mz.URL(n)}catch(a){let c=new tn.MongoRuntimeError(`Unable to parse ${r} with URL`);throw c.cause=a,c}let i=s.hostname,o=s.port,u=decodeURIComponent(i).toLowerCase();if(u.startsWith("[")&&u.endsWith("]")&&(this.isIPv6=!0,u=u.substring(1,i.length-1)),this.host=u.toLowerCase(),typeof o=="number"?this.port=o:typeof o=="string"&&o!==""?this.port=Number.parseInt(o,10):this.port=27017,this.port===0)throw new tn.MongoParseError("Invalid port (zero) with hostname");Object.freeze(this)}[Symbol.for("nodejs.util.inspect.custom")](){return this.inspect()}inspect(){return`new HostAddress('${this.toString()}')`}toString(){return typeof this.host=="string"?this.isIPv6?`[${this.host}]:${this.port}`:`${this.host}:${this.port}`:`${this.socketPath}`}static fromString(e){return new t(e)}static fromHostPort(e,r){return e.includes(":")&&(e=`[${e}]`),t.fromString(`${e}:${r}`)}static fromSrvRecord({name:e,port:r}){return t.fromHostPort(e,r)}toHostPort(){if(this.socketPath)return{host:this.socketPath,port:0};let e=this.host??"",r=this.port??0;return{host:e,port:r}}};re.HostAddress=QE;re.DEFAULT_PK_FACTORY={createPk(){return new JE.ObjectId}};re.MONGODB_WARNING_CODE="MONGODB DRIVER";function fb(t){return process.emitWarning(t,{code:re.MONGODB_WARNING_CODE})}var sb=new Set;function zz(t){if(!sb.has(t))return sb.add(t),fb(t)}function Wz(t){return Object.values(t).join(", ")}function Hz(t){return t?!!(t.loadBalanced||t.description.logicalSessionTimeoutMinutes!=null&&t.description.type!==Az.ServerType.Standalone):!1}function Gz(t,e=0){let r=Array.from(t);if(e>r.length)throw new tn.MongoRuntimeError("Limit must be less than the number of items");let n=r.length,s=e%r.length===0?1:r.length-e;for(;n>s;){let i=Math.floor(Math.random()*n);n-=1;let o=r[n];r[n]=r[i],r[i]=o}return e%r.length===0?r:r.slice(s)}function Kz(t){return!!(t.aggregate||t.count||t.distinct||t.find||t.geoNear)}function Yz(t,e){return t==null&&e==null?0:t==null?-1:e==null?1:re.ByteUtils.compare(t.id,e.id)}function db(t){if(typeof t=="number")return Math.trunc(t);let e=Number.parseInt(String(t),10);return Number.isNaN(e)?null:e}function Qz(t){let e=db(t);return e!=null&&e>=0?e:null}function Jz(t,e){let r=t.endsWith(".")?t.slice(0,t.length-1):t,n=e.endsWith(".")?e.slice(0,e.length-1):e,s=/^.*?\./,i=n.split(".").length<3,o=`.${r.replace(s,"")}`,u=i?n:`.${n.replace(s,"")}`;if(u.startsWith(".")||(u="."+u),i&&r.split(".").length<=n.split(".").length)throw new tn.MongoAPIError("Server record does not have at least one more domain level than parent URI");if(!o.endsWith(u))throw new tn.MongoAPIError("Server record does not share hostname with parent URI")}function Xz(t,e={}){return new Promise((r,n)=>{let s,i=ob.get(t,e,o=>{o.setEncoding("utf8");let u="";o.on("data",a=>u+=a),o.on("end",()=>{(0,HE.clearTimeout)(s),r({status:o.statusCode,body:u})})}).on("error",o=>{(0,HE.clearTimeout)(s),n(o)}).end();s=(0,HE.setTimeout)(()=>{i.destroy(new tn.MongoNetworkTimeoutError("request timed out after 10 seconds"))},1e4)})}async function Zz(t,e={}){return await new Promise((r,n)=>{let s={method:"GET",timeout:1e4,json:!0,...pz.parse(t),...e},i=ob.request(s,o=>{o.setEncoding("utf8");let u="";o.on("data",a=>{u+=a}),o.once("end",()=>{if(e.json===!1){r(u);return}try{let a=JSON.parse(u);r(a)}catch{n(new tn.MongoRuntimeError(`Invalid JSON response: "${u}"`))}})});i.once("timeout",()=>i.destroy(new tn.MongoNetworkTimeoutError(`Network request to ${t} timed out after ${e.timeout} ms`))),i.once("error",o=>n(o)),i.end()})}re.DOCUMENT_DB_CHECK=/(\.docdb\.amazonaws\.com$)|(\.docdb-elastic\.amazonaws\.com$)/;re.COSMOS_DB_CHECK=/\.cosmos\.azure\.com$/;re.DOCUMENT_DB_MSG="You appear to be connected to a DocumentDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/documentdb";re.COSMOS_DB_MSG="You appear to be connected to a CosmosDB cluster. For more information regarding feature compatibility and support please visit https://www.mongodb.com/supportability/cosmosdb";function eW(t,e){return!!(e&&t.test(e.toLowerCase()))}function pb(){let t,e;return{promise:new Promise(function(s,i){t=s,e=i}),resolve:t,reject:e}}function tW(t){}re.randomBytes=(0,yz.promisify)(ib.randomBytes);async function rW(t,e){let{promise:r,resolve:n,reject:s}=pb(),i=u=>n(u),o=u=>s(u);t.once(e,i).once("error",o);try{let u=await r;return t.off("error",o),u}catch(u){throw t.off(e,i),u}}function nW(t,e,r){if((typeof r.forceServerObjectId=="boolean"?r.forceServerObjectId:t.s.db.options?.forceServerObjectId)===!0)return e;let s=i=>(i._id==null&&(i._id=t.s.pkFactory.createPk()),i);return Array.isArray(e)?e.map(s):s(e)}async function sW(t,e){try{return await dz.promises.access(t,e),!0}catch{return!1}}function iW(t,e){return t===0?e:e===0?t:Math.min(t,e)}function oW(){}function mb(t,e,r=!0){if(r&&(Buffer.isBuffer(e)&&(e=(0,JE.deserialize)(e)),Buffer.isBuffer(t)))throw new tn.MongoRuntimeError("Expected result of decryption to be deserialized BSON object");if(!(!t||typeof t!="object"))for(let n of Object.keys(t)){let s=e[n];if(s&&s._bsontype==="Binary"&&s.sub_type===6){t[hd.kDecoratedKeys]||Object.defineProperty(t,hd.kDecoratedKeys,{value:[],configurable:!0,enumerable:!1,writable:!1}),t[hd.kDecoratedKeys].push(n);continue}mb(t[n],s,!1)}}});var $r=g(fs=>{"use strict";d();Object.defineProperty(fs,"__esModule",{value:!0});fs.LegacyTimeoutContext=fs.CSOTTimeoutContext=fs.TimeoutContext=fs.Timeout=fs.TimeoutError=void 0;var yb=require("timers"),Vu=Z(),gb=ae(),f1=class extends Error{get name(){return"TimeoutError"}constructor(e,r){super(e,r),this.duration=r.duration}static is(e){return e!=null&&typeof e=="object"&&"name"in e&&e.name==="TimeoutError"}};fs.TimeoutError=f1;var hs=class t extends Promise{get remainingTime(){return this.timedOut?0:this.duration===0?1/0:this.start+this.duration-Math.trunc(performance.now())}get timeElapsed(){return Math.trunc(performance.now())-this.start}constructor(e=()=>null,r){let n=r?.duration??0,s=!!r?.unref,i=r?.rejection;if(n<0)throw new Vu.MongoInvalidArgumentError("Cannot create a Timeout with a negative duration");let o;super((u,a)=>{o=a,e(gb.noop,a)}),this.ended=null,this.timedOut=!1,this.cleared=!1,this.duration=n,this.start=Math.trunc(performance.now()),i==null&&this.duration>0?(this.id=(0,yb.setTimeout)(()=>{this.ended=Math.trunc(performance.now()),this.timedOut=!0,o(new f1(`Expired after ${n}ms`,{duration:n}))},this.duration),typeof this.id.unref=="function"&&s&&this.id.unref()):i!=null&&(this.ended=Math.trunc(performance.now()),this.timedOut=!0,o(i))}clear(){(0,yb.clearTimeout)(this.id),this.id=void 0,this.timedOut=!1,this.cleared=!0}throwIfExpired(){if(this.timedOut)throw new f1("Timed out",{duration:this.duration})}static expires(e,r){return new t(void 0,{duration:e,unref:r})}static reject(e){return new t(void 0,{duration:0,unref:!0,rejection:e})}};fs.Timeout=hs;function uW(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"waitQueueTimeoutMS"in t&&typeof t.waitQueueTimeoutMS=="number"}function aW(t){return t!=null&&typeof t=="object"&&"serverSelectionTimeoutMS"in t&&typeof t.serverSelectionTimeoutMS=="number"&&"timeoutMS"in t&&typeof t.timeoutMS=="number"}var d1=class{static create(e){if(e.session?.timeoutContext!=null)return e.session?.timeoutContext;if(aW(e))return new pd(e);if(uW(e))return new md(e);throw new Vu.MongoRuntimeError("Unrecognized options")}};fs.TimeoutContext=d1;var pd=class t extends d1{constructor(e){super(),this.minRoundTripTime=0,this.start=Math.trunc(performance.now()),this.timeoutMS=e.timeoutMS,this.serverSelectionTimeoutMS=e.serverSelectionTimeoutMS,this.socketTimeoutMS=e.socketTimeoutMS,this.clearServerSelectionTimeout=!1}get maxTimeMS(){return this.remainingTimeMS-this.minRoundTripTime}get remainingTimeMS(){let e=Math.trunc(performance.now())-this.start;return this.timeoutMS<=0?1/0:this.timeoutMS-e}csotEnabled(){return!0}get serverSelectionTimeout(){if(typeof this._serverSelectionTimeout!="object"||this._serverSelectionTimeout?.cleared){let{remainingTimeMS:e,serverSelectionTimeoutMS:r}=this;if(e<=0)return hs.reject(new Vu.MongoOperationTimeoutError(`Timed out in server selection after ${this.timeoutMS}ms`));r!==0&&(0,gb.csotMin)(e,r)===r?this._serverSelectionTimeout=hs.expires(r):e>0&&Number.isFinite(e)?this._serverSelectionTimeout=hs.expires(e):this._serverSelectionTimeout=null}return this._serverSelectionTimeout}get connectionCheckoutTimeout(){if(typeof this._connectionCheckoutTimeout!="object"||this._connectionCheckoutTimeout?.cleared)if(typeof this._serverSelectionTimeout=="object")this._connectionCheckoutTimeout=this._serverSelectionTimeout;else throw new Vu.MongoRuntimeError("Unreachable. If you are seeing this error, please file a ticket on the NODE driver project on Jira");return this._connectionCheckoutTimeout}get timeoutForSocketWrite(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?hs.expires(e):hs.reject(new Vu.MongoOperationTimeoutError("Timed out before socket write")):null}get timeoutForSocketRead(){let{remainingTimeMS:e}=this;return Number.isFinite(e)?e>0?hs.expires(e):hs.reject(new Vu.MongoOperationTimeoutError("Timed out before socket read")):null}refresh(){this.start=Math.trunc(performance.now()),this.minRoundTripTime=0,this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}clear(){this._serverSelectionTimeout?.clear(),this._connectionCheckoutTimeout?.clear()}getRemainingTimeMSOrThrow(e){let{remainingTimeMS:r}=this;if(r<=0)throw new Vu.MongoOperationTimeoutError(e??`Expired after ${this.timeoutMS}ms`);return r}clone(){let e=new t({timeoutMS:this.timeoutMS,serverSelectionTimeoutMS:this.serverSelectionTimeoutMS});return e.start=this.start,e}refreshed(){return new t(this)}addMaxTimeMSToCommand(e,r){if(r.omitMaxTimeMS)return;let n=this.remainingTimeMS-this.minRoundTripTime;n>0&&Number.isFinite(n)&&(e.maxTimeMS=n)}getSocketTimeoutMS(){return 0}};fs.CSOTTimeoutContext=pd;var md=class t extends d1{constructor(e){super(),this.options=e,this.clearServerSelectionTimeout=!0}csotEnabled(){return!1}get serverSelectionTimeout(){return this.options.serverSelectionTimeoutMS!=null&&this.options.serverSelectionTimeoutMS>0?hs.expires(this.options.serverSelectionTimeoutMS):null}get connectionCheckoutTimeout(){return this.options.waitQueueTimeoutMS!=null&&this.options.waitQueueTimeoutMS>0?hs.expires(this.options.waitQueueTimeoutMS):null}get timeoutForSocketWrite(){return null}get timeoutForSocketRead(){return null}refresh(){}clear(){}get maxTimeMS(){return null}refreshed(){return new t(this.options)}addMaxTimeMSToCommand(e,r){}getSocketTimeoutMS(){return this.options.socketTimeoutMS}};fs.LegacyTimeoutContext=md});var Ke=g(ds=>{"use strict";d();Object.defineProperty(ds,"__esModule",{value:!0});ds.AbstractOperation=ds.Aspect=void 0;ds.defineAspects=lW;var cW=Ue(),XE=lr();ds.Aspect={READ_OPERATION:Symbol("READ_OPERATION"),WRITE_OPERATION:Symbol("WRITE_OPERATION"),RETRYABLE:Symbol("RETRYABLE"),EXPLAINABLE:Symbol("EXPLAINABLE"),SKIP_COLLATION:Symbol("SKIP_COLLATION"),CURSOR_CREATING:Symbol("CURSOR_CREATING"),MUST_SELECT_SAME_SERVER:Symbol("MUST_SELECT_SAME_SERVER"),COMMAND_BATCHING:Symbol("COMMAND_BATCHING")};var ZE=Symbol("session"),e_=class{constructor(e={}){this.readPreference=this.hasAspect(ds.Aspect.WRITE_OPERATION)?XE.ReadPreference.primary:XE.ReadPreference.fromOptions(e)??XE.ReadPreference.primary,this.bsonOptions=(0,cW.resolveBSONOptions)(e),this[ZE]=e.session!=null?e.session:void 0,this.options=e,this.bypassPinningCheck=!!e.bypassPinningCheck,this.trySecondaryWrite=!1}hasAspect(e){let r=this.constructor;return r.aspects==null?!1:r.aspects.has(e)}get session(){return this[ZE]}clearSession(){this[ZE]=void 0}resetBatch(){return!0}get canRetryRead(){return this.hasAspect(ds.Aspect.RETRYABLE)&&this.hasAspect(ds.Aspect.READ_OPERATION)}get canRetryWrite(){return this.hasAspect(ds.Aspect.RETRYABLE)&&this.hasAspect(ds.Aspect.WRITE_OPERATION)}};ds.AbstractOperation=e_;function lW(t,e){return!Array.isArray(e)&&!(e instanceof Set)&&(e=[e]),e=new Set(e),Object.defineProperty(t,"aspects",{value:e,writable:!1}),e}});var kr=g(t_=>{"use strict";d();Object.defineProperty(t_,"__esModule",{value:!0});t_.executeOperation=dW;var xr=Z(),Eb=lr(),_b=l1(),hW=$r(),Ab=ae(),Qi=Ke(),fW=xr.MONGODB_ERROR_CODES.IllegalOperation,Sb="This MongoDB deployment does not support retryable writes. Please add retryWrites=false to your connection string.";async function dW(t,e,r){if(!(e instanceof Qi.AbstractOperation))throw new xr.MongoRuntimeError("This method requires a valid operation instance");let n=await pW(t),s=e.session,i;if(s==null)i=Symbol(),s=t.startSession({owner:i,explicit:!1});else{if(s.hasEnded)throw new xr.MongoExpiredSessionError("Use of expired sessions is not permitted");if(s.snapshotEnabled&&!n.capabilities.supportsSnapshotReads)throw new xr.MongoCompatibilityError("Snapshot reads require MongoDB 5.0 or later");if(s.client!==t)throw new xr.MongoInvalidArgumentError("ClientSession must be from the same MongoClient")}let o=e.readPreference??Eb.ReadPreference.primary,u=!!s?.inTransaction(),a=e.hasAspect(Qi.Aspect.READ_OPERATION);if(u&&!o.equals(Eb.ReadPreference.primary)&&(a||e.commandName==="runCommand"))throw new xr.MongoTransactionError(`Read preference in a transaction must be primary, not: ${o.mode}`);s?.isPinned&&s.transaction.isCommitted&&!e.bypassPinningCheck&&s.unpin(),r??=hW.TimeoutContext.create({session:s,serverSelectionTimeoutMS:t.s.options.serverSelectionTimeoutMS,waitQueueTimeoutMS:t.s.options.waitQueueTimeoutMS,timeoutMS:e.options.timeoutMS});try{return await mW(e,{topology:n,timeoutContext:r,session:s,readPreference:o})}finally{s?.owner!=null&&s.owner===i&&await s.endSession()}}async function pW(t){if(t.topology==null){if(t.s.hasBeenClosed)throw new xr.MongoNotConnectedError("Client must be connected before running operations");t.s.options[Symbol.for("@@mdb.skipPingOnConnect")]=!0;try{if(await t.connect(),t.topology==null)throw new xr.MongoRuntimeError("client.connect did not create a topology but also did not throw");return t.topology}finally{delete t.s.options[Symbol.for("@@mdb.skipPingOnConnect")]}}return t.topology}async function mW(t,{topology:e,timeoutContext:r,session:n,readPreference:s}){let i;t.hasAspect(Qi.Aspect.MUST_SELECT_SAME_SERVER)?i=(0,_b.sameServerSelector)(t.server?.description):t.trySecondaryWrite?i=(0,_b.secondaryWritableServerSelector)(e.commonWireVersion,s):i=s;let o=await e.selectServer(i,{session:n,operationName:t.commandName,timeoutContext:r}),u=t.hasAspect(Qi.Aspect.READ_OPERATION),a=t.hasAspect(Qi.Aspect.WRITE_OPERATION),c=n?.inTransaction()??!1,l=e.s.options.retryReads&&!c&&t.canRetryRead,h=e.s.options.retryWrites&&!c&&(0,Ab.supportsRetryableWrites)(o)&&t.canRetryWrite,f=t.hasAspect(Qi.Aspect.RETRYABLE)&&n!=null&&(u&&l||a&&h);a&&h&&n!=null&&(t.options.willRetryWrite=!0,n.incrementTransactionNumber());let p=f?r.csotEnabled()?1/0:2:1,m,y;for(let A=0;A<p;A++){if(m){if(a&&m.code===fW)throw new xr.MongoServerError({message:Sb,errmsg:Sb,originalError:m});if(t.hasAspect(Qi.Aspect.COMMAND_BATCHING)&&!t.canRetryWrite||a&&!(0,xr.isRetryableWriteError)(m)||u&&!(0,xr.isRetryableReadError)(m))throw m;if(m instanceof xr.MongoNetworkError&&t.hasAspect(Qi.Aspect.CURSOR_CREATING)&&n!=null&&n.isPinned&&!n.inTransaction()&&n.unpin({force:!0,forceClear:!0}),o=await e.selectServer(i,{session:n,operationName:t.commandName,previousServer:y}),a&&!(0,Ab.supportsRetryableWrites)(o))throw new xr.MongoUnexpectedServerResponseError("Selected server does not support retryable writes")}try{return A>0&&t.hasAspect(Qi.Aspect.COMMAND_BATCHING)&&t.resetBatch(),await t.execute(o,n,r)}catch(S){if(!(S instanceof xr.MongoError))throw S;if(m!=null&&S.hasErrorLabel(xr.MongoErrorLabel.NoWritesPerformed))throw m;y=o.description,m=S,r.clear()}}throw m??new xr.MongoRuntimeError("Tried to propagate retryability error, but no error was found.")}});var Wu=g(Ne=>{"use strict";d();Object.defineProperty(Ne,"__esModule",{value:!0});Ne.MongoLogger=Ne.MongoLoggableComponent=Ne.SEVERITY_LEVEL_MAP=Ne.DEFAULT_MAX_DOCUMENT_LENGTH=Ne.SeverityLevel=void 0;Ne.parseSeverityFromString=i_;Ne.createStdioLogger=zu;Ne.stringifyWithMaxLen=Wo;Ne.defaultLogTransform=wb;var Ob=require("util"),yW=Ue(),lt=jt(),Ja=ae();Ne.SeverityLevel=Object.freeze({EMERGENCY:"emergency",ALERT:"alert",CRITICAL:"critical",ERROR:"error",WARNING:"warn",NOTICE:"notice",INFORMATIONAL:"info",DEBUG:"debug",TRACE:"trace",OFF:"off"});Ne.DEFAULT_MAX_DOCUMENT_LENGTH=1e3;var s_=class extends Map{constructor(e){let r=[];for(let[n,s]of e)r.push([s,n]);r.push(...e),super(r)}getNumericSeverityLevel(e){return this.get(e)}getSeverityLevelName(e){return this.get(e)}};Ne.SEVERITY_LEVEL_MAP=new s_([[Ne.SeverityLevel.OFF,-1/0],[Ne.SeverityLevel.EMERGENCY,0],[Ne.SeverityLevel.ALERT,1],[Ne.SeverityLevel.CRITICAL,2],[Ne.SeverityLevel.ERROR,3],[Ne.SeverityLevel.WARNING,4],[Ne.SeverityLevel.NOTICE,5],[Ne.SeverityLevel.INFORMATIONAL,6],[Ne.SeverityLevel.DEBUG,7],[Ne.SeverityLevel.TRACE,8]]);Ne.MongoLoggableComponent=Object.freeze({COMMAND:"command",TOPOLOGY:"topology",SERVER_SELECTION:"serverSelection",CONNECTION:"connection",CLIENT:"client"});function i_(t){let e=Object.values(Ne.SeverityLevel),r=t?.toLowerCase();return r!=null&&e.includes(r)?r:null}function zu(t){return{write:(0,Ob.promisify)((e,r)=>{let n=(0,Ob.inspect)(e,{compact:!0,breakLength:1/0});t.write(`${n}
`,"utf-8",r)})}}function gW({MONGODB_LOG_PATH:t},{mongodbLogPath:e}){return typeof e=="string"&&/^stderr$/i.test(e)?{mongodbLogPath:zu(process.stderr),mongodbLogPathIsStdErr:!0}:typeof e=="string"&&/^stdout$/i.test(e)?{mongodbLogPath:zu(process.stdout),mongodbLogPathIsStdErr:!1}:typeof e=="object"&&typeof e?.write=="function"?{mongodbLogPath:e,mongodbLogPathIsStdErr:!1}:t&&/^stderr$/i.test(t)?{mongodbLogPath:zu(process.stderr),mongodbLogPathIsStdErr:!0}:t&&/^stdout$/i.test(t)?{mongodbLogPath:zu(process.stdout),mongodbLogPathIsStdErr:!1}:{mongodbLogPath:zu(process.stderr),mongodbLogPathIsStdErr:!0}}function Qa(t,e,r){return i_(t)??i_(e)??r}function EW(t,e){let r=Ne.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(t),n=Ne.SEVERITY_LEVEL_MAP.getNumericSeverityLevel(e);return r<n?-1:r>n?1:0}function Wo(t,e,r={}){let n="";if(typeof t=="string")n=t;else if(typeof t=="function")n=t.name;else try{n=yW.EJSON.stringify(t,r)}catch(s){n=`Extended JSON serialization failed with: ${s.message}`}return e!==0&&n.length>e&&n.charCodeAt(e-1)!==n.codePointAt(e-1)&&(e--,e===0)?"":e!==0&&n.length>e?`${n.slice(0,e)}...`:n}function _W(t){let e=t;return e.toLog!==void 0&&typeof e.toLog=="function"}function yd(t,e,r=Ne.DEFAULT_MAX_DOCUMENT_LENGTH){let{selector:n,operation:s,topologyDescription:i,message:o}=e;return t.selector=Wo(n,r),t.operation=s,t.topologyDescription=Wo(i,r),t.message=o,t}function r_(t,e){t.commandName=e.commandName,t.requestId=e.requestId,t.driverConnectionId=e.connectionId;let{host:r,port:n}=Ja.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,e?.serviceId&&(t.serviceId=e.serviceId.toHexString()),t.databaseName=e.databaseName,t.serverConnectionId=e.serverConnectionId,t}function Wn(t,e){let{host:r,port:n}=Ja.HostAddress.fromString(e.address).toHostPort();return t.serverHost=r,t.serverPort=n,t}function zo(t,e){return t.topologyId=e.topologyId,t}function n_(t,e){let{awaited:r,connectionId:n}=e;t.awaited=r,t.driverConnectionId=e.connectionId;let{host:s,port:i}=Ja.HostAddress.fromString(n).toHostPort();return t.serverHost=s,t.serverPort=i,t}function wb(t,e=Ne.DEFAULT_MAX_DOCUMENT_LENGTH){let r=Object.create(null);switch(t.name){case lt.SERVER_SELECTION_STARTED:return r=yd(r,t,e),r;case lt.SERVER_SELECTION_FAILED:return r=yd(r,t,e),r.failure=t.failure?.message,r;case lt.SERVER_SELECTION_SUCCEEDED:return r=yd(r,t,e),r.serverHost=t.serverHost,r.serverPort=t.serverPort,r;case lt.WAITING_FOR_SUITABLE_SERVER:return r=yd(r,t,e),r.remainingTimeMS=t.remainingTimeMS,r;case lt.COMMAND_STARTED:return r=r_(r,t),r.message="Command started",r.command=Wo(t.command,e,{relaxed:!0}),r.databaseName=t.databaseName,r;case lt.COMMAND_SUCCEEDED:return r=r_(r,t),r.message="Command succeeded",r.durationMS=t.duration,r.reply=Wo(t.reply,e,{relaxed:!0}),r;case lt.COMMAND_FAILED:return r=r_(r,t),r.message="Command failed",r.durationMS=t.duration,r.failure=t.failure?.message??"(redacted)",r;case lt.CONNECTION_POOL_CREATED:if(r=Wn(r,t),r.message="Connection pool created",t.options){let{maxIdleTimeMS:n,minPoolSize:s,maxPoolSize:i,maxConnecting:o,waitQueueTimeoutMS:u}=t.options;r={...r,maxIdleTimeMS:n,minPoolSize:s,maxPoolSize:i,maxConnecting:o,waitQueueTimeoutMS:u}}return r;case lt.CONNECTION_POOL_READY:return r=Wn(r,t),r.message="Connection pool ready",r;case lt.CONNECTION_POOL_CLEARED:return r=Wn(r,t),r.message="Connection pool cleared",t.serviceId?._bsontype==="ObjectId"&&(r.serviceId=t.serviceId?.toHexString()),r;case lt.CONNECTION_POOL_CLOSED:return r=Wn(r,t),r.message="Connection pool closed",r;case lt.CONNECTION_CREATED:return r=Wn(r,t),r.message="Connection created",r.driverConnectionId=t.connectionId,r;case lt.CONNECTION_READY:return r=Wn(r,t),r.message="Connection ready",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case lt.CONNECTION_CLOSED:switch(r=Wn(r,t),r.message="Connection closed",r.driverConnectionId=t.connectionId,t.reason){case"stale":r.reason="Connection became stale because the pool was cleared";break;case"idle":r.reason="Connection has been available but unused for longer than the configured max idle time";break;case"error":r.reason="An error occurred while using the connection",t.error&&(r.error=t.error);break;case"poolClosed":r.reason="Connection pool was closed";break;default:r.reason=`Unknown close reason: ${t.reason}`}return r;case lt.CONNECTION_CHECK_OUT_STARTED:return r=Wn(r,t),r.message="Connection checkout started",r;case lt.CONNECTION_CHECK_OUT_FAILED:switch(r=Wn(r,t),r.message="Connection checkout failed",t.reason){case"poolClosed":r.reason="Connection pool was closed";break;case"timeout":r.reason="Wait queue timeout elapsed without a connection becoming available";break;case"connectionError":r.reason="An error occurred while trying to establish a new connection",t.error&&(r.error=t.error);break;default:r.reason=`Unknown close reason: ${t.reason}`}return r.durationMS=t.durationMS,r;case lt.CONNECTION_CHECKED_OUT:return r=Wn(r,t),r.message="Connection checked out",r.driverConnectionId=t.connectionId,r.durationMS=t.durationMS,r;case lt.CONNECTION_CHECKED_IN:return r=Wn(r,t),r.message="Connection checked in",r.driverConnectionId=t.connectionId,r;case lt.SERVER_OPENING:return r=zo(r,t),r=Wn(r,t),r.message="Starting server monitoring",r;case lt.SERVER_CLOSED:return r=zo(r,t),r=Wn(r,t),r.message="Stopped server monitoring",r;case lt.SERVER_HEARTBEAT_STARTED:return r=zo(r,t),r=n_(r,t),r.message="Server heartbeat started",r;case lt.SERVER_HEARTBEAT_SUCCEEDED:return r=zo(r,t),r=n_(r,t),r.message="Server heartbeat succeeded",r.durationMS=t.duration,r.serverConnectionId=t.serverConnectionId,r.reply=Wo(t.reply,e,{relaxed:!0}),r;case lt.SERVER_HEARTBEAT_FAILED:return r=zo(r,t),r=n_(r,t),r.message="Server heartbeat failed",r.durationMS=t.duration,r.failure=t.failure?.message,r;case lt.TOPOLOGY_OPENING:return r=zo(r,t),r.message="Starting topology monitoring",r;case lt.TOPOLOGY_CLOSED:return r=zo(r,t),r.message="Stopped topology monitoring",r;case lt.TOPOLOGY_DESCRIPTION_CHANGED:return r=zo(r,t),r.message="Topology description changed",r.previousDescription=r.reply=Wo(t.previousDescription,e),r.newDescription=r.reply=Wo(t.newDescription,e),r;default:for(let[n,s]of Object.entries(t))s!=null&&(r[n]=s)}return r}var o_=class{constructor(e){this.pendingLog=null,this.error=this.log.bind(this,"error"),this.warn=this.log.bind(this,"warn"),this.info=this.log.bind(this,"info"),this.debug=this.log.bind(this,"debug"),this.trace=this.log.bind(this,"trace"),this.componentSeverities=e.componentSeverities,this.maxDocumentLength=e.maxDocumentLength,this.logDestination=e.logDestination,this.logDestinationIsStdErr=e.logDestinationIsStdErr,this.severities=this.createLoggingSeverities()}createLoggingSeverities(){let e=Object();for(let r of Object.values(Ne.MongoLoggableComponent)){e[r]={};for(let n of Object.values(Ne.SeverityLevel))e[r][n]=EW(n,this.componentSeverities[r])<=0}return e}turnOffSeverities(){for(let e of Object.values(Ne.MongoLoggableComponent)){this.componentSeverities[e]=Ne.SeverityLevel.OFF;for(let r of Object.values(Ne.SeverityLevel))this.severities[e][r]=!1}}logWriteFailureHandler(e){if(this.logDestinationIsStdErr){this.turnOffSeverities(),this.clearPendingLog();return}this.logDestination=zu(process.stderr),this.logDestinationIsStdErr=!0,this.clearPendingLog(),this.error(Ne.MongoLoggableComponent.CLIENT,{toLog:function(){return{message:"User input for mongodbLogPath is now invalid. Logging is halted.",error:e.message}}}),this.turnOffSeverities(),this.clearPendingLog()}clearPendingLog(){this.pendingLog=null}willLog(e,r){return r===Ne.SeverityLevel.OFF?!1:this.severities[e][r]}log(e,r,n){if(!this.willLog(r,e))return;let s={t:new Date,c:r,s:e};if(typeof n=="string"?s.message=n:typeof n=="object"&&(_W(n)?s={...s,...n.toLog()}:s={...s,...wb(n,this.maxDocumentLength)}),(0,Ja.isPromiseLike)(this.pendingLog)){this.pendingLog=this.pendingLog.then(()=>this.logDestination.write(s)).then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this));return}try{let i=this.logDestination.write(s);(0,Ja.isPromiseLike)(i)&&(this.pendingLog=i.then(this.clearPendingLog.bind(this),this.logWriteFailureHandler.bind(this)))}catch(i){this.logWriteFailureHandler(i)}}static resolveOptions(e,r){let n=gW(e,r),s={...e,...r,mongodbLogPath:n.mongodbLogPath,mongodbLogPathIsStdErr:n.mongodbLogPathIsStdErr},i=Qa(s.mongodbLogComponentSeverities?.default,s.MONGODB_LOG_ALL,Ne.SeverityLevel.OFF);return{componentSeverities:{command:Qa(s.mongodbLogComponentSeverities?.command,s.MONGODB_LOG_COMMAND,i),topology:Qa(s.mongodbLogComponentSeverities?.topology,s.MONGODB_LOG_TOPOLOGY,i),serverSelection:Qa(s.mongodbLogComponentSeverities?.serverSelection,s.MONGODB_LOG_SERVER_SELECTION,i),connection:Qa(s.mongodbLogComponentSeverities?.connection,s.MONGODB_LOG_CONNECTION,i),client:Qa(s.mongodbLogComponentSeverities?.client,s.MONGODB_LOG_CLIENT,i),default:i},maxDocumentLength:s.mongodbLogMaxDocumentLength??(0,Ja.parseUnsignedInteger)(s.MONGODB_LOG_MAX_DOCUMENT_LENGTH)??1e3,logDestination:s.mongodbLogPath,logDestinationIsStdErr:s.mongodbLogPathIsStdErr}}};Ne.MongoLogger=o_});var Hn=g(Xa=>{"use strict";d();Object.defineProperty(Xa,"__esModule",{value:!0});Xa.CancellationToken=Xa.TypedEventEmitter=void 0;var AW=require("events"),SW=Wu(),gd=class extends AW.EventEmitter{emitAndLog(e,...r){this.emit(e,...r),this.component&&this.mongoLogger?.debug(this.component,r[0])}emitAndLogHeartbeat(e,r,n,...s){if(this.emit(e,...s),this.component){let i={topologyId:r,serverConnectionId:n??null,...s[0]};this.mongoLogger?.debug(this.component,i)}}emitAndLogCommand(e,r,n,s,...i){if(e&&this.emit(r,...i),s){let o={databaseName:n,...i[0]};this.mongoLogger?.debug(SW.MongoLoggableComponent.COMMAND,o)}}};Xa.TypedEventEmitter=gd;var u_=class extends gd{};Xa.CancellationToken=u_});var c_=g(Ad=>{"use strict";d();Object.defineProperty(Ad,"__esModule",{value:!0});Ad.GetMoreOperation=void 0;var OW=Hs(),a_=Z(),wW=ae(),Ed=Ke(),_d=class extends Ed.AbstractOperation{constructor(e,r,n,s){super(s),this.options=s,this.ns=e,this.cursorId=r,this.server=n}get commandName(){return"getMore"}async execute(e,r,n){if(e!==this.server)throw new a_.MongoRuntimeError("Getmore must run on the same server operation began on");if(this.cursorId==null||this.cursorId.isZero())throw new a_.MongoRuntimeError("Unable to iterate cursor with no id");let s=this.ns.collection;if(s==null)throw new a_.MongoRuntimeError("A collection name must be determined before getMore");let i={getMore:this.cursorId,collection:s};typeof this.options.batchSize=="number"&&(i.batchSize=Math.abs(this.options.batchSize)),typeof this.options.maxAwaitTimeMS=="number"&&(i.maxTimeMS=this.options.maxAwaitTimeMS),this.options.comment!==void 0&&(0,wW.maxWireVersion)(e)>=9&&(i.comment=this.options.comment);let o={returnFieldSelector:null,documentsReturnedIn:"nextBatch",timeoutContext:n,...this.options};return await e.command(this.ns,i,o,OW.CursorResponse)}};Ad.GetMoreOperation=_d;(0,Ed.defineAspects)(_d,[Ed.Aspect.READ_OPERATION,Ed.Aspect.MUST_SELECT_SAME_SERVER])});var bb=g(Od=>{"use strict";d();Object.defineProperty(Od,"__esModule",{value:!0});Od.KillCursorsOperation=void 0;var Cb=Z(),CW=ae(),l_=Ke(),Sd=class extends l_.AbstractOperation{constructor(e,r,n,s){super(s),this.ns=r,this.cursorId=e,this.server=n}get commandName(){return"killCursors"}async execute(e,r,n){if(e!==this.server)throw new Cb.MongoRuntimeError("Killcursor must run on the same server operation began on");let s=this.ns.collection;if(s==null)throw new Cb.MongoRuntimeError("A collection name must be determined before killCursors");let i={killCursors:s,cursors:[this.cursorId]};try{await e.command(this.ns,i,{session:r,timeoutContext:n})}catch(o){(0,CW.squashError)(o)}}};Od.KillCursorsOperation=Sd;(0,l_.defineAspects)(Sd,[l_.Aspect.MUST_SELECT_SAME_SERVER])});var f_=g(Ji=>{"use strict";d();Object.defineProperty(Ji,"__esModule",{value:!0});Ji.DeleteManyOperation=Ji.DeleteOneOperation=Ji.DeleteOperation=void 0;Ji.makeDeleteStatement=h_;var p1=Z(),bW=Pt(),ps=Ke(),Za=class extends bW.CommandOperation{constructor(e,r,n){super(void 0,n),this.options=n,this.ns=e,this.statements=r}get commandName(){return"delete"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.limit!=null?e.limit>0:!0)}async execute(e,r,n){let s=this.options??{},i=typeof s.ordered=="boolean"?s.ordered:!0,o={delete:this.ns.collection,deletes:this.statements,ordered:i};if(s.let&&(o.let=s.let),s.comment!==void 0&&(o.comment=s.comment),this.writeConcern&&this.writeConcern.w===0&&this.statements.find(c=>c.hint))throw new p1.MongoCompatibilityError("hint is not supported with unacknowledged writes");return await super.executeCommand(e,r,o,n)}};Ji.DeleteOperation=Za;var wd=class extends Za{constructor(e,r,n){super(e.s.namespace,[h_(r,{...n,limit:1})],n)}async execute(e,r,n){let s=await super.execute(e,r,n);if(this.explain)return s;if(s.code)throw new p1.MongoServerError(s);if(s.writeErrors)throw new p1.MongoServerError(s.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:s.n}}};Ji.DeleteOneOperation=wd;var Cd=class extends Za{constructor(e,r,n){super(e.s.namespace,[h_(r,n)],n)}async execute(e,r,n){let s=await super.execute(e,r,n);if(this.explain)return s;if(s.code)throw new p1.MongoServerError(s);if(s.writeErrors)throw new p1.MongoServerError(s.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,deletedCount:s.n}}};Ji.DeleteManyOperation=Cd;function h_(t,e){let r={q:t,limit:typeof e.limit=="number"?e.limit:0};return e.collation&&(r.collation=e.collation),e.hint&&(r.hint=e.hint),r}(0,ps.defineAspects)(Za,[ps.Aspect.RETRYABLE,ps.Aspect.WRITE_OPERATION]);(0,ps.defineAspects)(wd,[ps.Aspect.RETRYABLE,ps.Aspect.WRITE_OPERATION,ps.Aspect.EXPLAINABLE,ps.Aspect.SKIP_COLLATION]);(0,ps.defineAspects)(Cd,[ps.Aspect.WRITE_OPERATION,ps.Aspect.EXPLAINABLE,ps.Aspect.SKIP_COLLATION])});var p_=g(Td=>{"use strict";d();Object.defineProperty(Td,"__esModule",{value:!0});Td.BulkWriteOperation=void 0;var d_=Ke(),bd=class extends d_.AbstractOperation{constructor(e,r,n){super(n),this.options=n,this.collection=e,this.operations=r}get commandName(){return"bulkWrite"}async execute(e,r,n){let s=this.collection,i=this.operations,o={...this.options,...this.bsonOptions,readPreference:this.readPreference,timeoutContext:n},u=o.ordered===!1?s.initializeUnorderedBulkOp(o):s.initializeOrderedBulkOp(o);for(let a=0;a<i.length;a++)u.raw(i[a]);return await u.execute({...o,session:r})}};Td.BulkWriteOperation=bd;(0,d_.defineAspects)(bd,[d_.Aspect.WRITE_OPERATION])});var m_=g(Ho=>{"use strict";d();Object.defineProperty(Ho,"__esModule",{value:!0});Ho.InsertManyOperation=Ho.InsertOneOperation=Ho.InsertOperation=void 0;var Dd=Z(),TW=ae(),DW=vr(),MW=p_(),BW=Pt(),Xi=Ke(),m1=class extends BW.CommandOperation{constructor(e,r,n){super(void 0,n),this.options={...n,checkKeys:n.checkKeys??!1},this.ns=e,this.documents=r}get commandName(){return"insert"}async execute(e,r,n){let s=this.options??{},i=typeof s.ordered=="boolean"?s.ordered:!0,o={insert:this.ns.collection,documents:this.documents,ordered:i};return typeof s.bypassDocumentValidation=="boolean"&&(o.bypassDocumentValidation=s.bypassDocumentValidation),s.comment!==void 0&&(o.comment=s.comment),await super.executeCommand(e,r,o,n)}};Ho.InsertOperation=m1;var Md=class extends m1{constructor(e,r,n){super(e.s.namespace,(0,TW.maybeAddIdToDocuments)(e,[r],n),n)}async execute(e,r,n){let s=await super.execute(e,r,n);if(s.code)throw new Dd.MongoServerError(s);if(s.writeErrors)throw new Dd.MongoServerError(s.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,insertedId:this.documents[0]._id}}};Ho.InsertOneOperation=Md;var Bd=class extends Xi.AbstractOperation{constructor(e,r,n){if(super(n),!Array.isArray(r))throw new Dd.MongoInvalidArgumentError('Argument "docs" must be an array of documents');this.options=n,this.collection=e,this.docs=r}get commandName(){return"insert"}async execute(e,r,n){let s=this.collection,i={...this.options,...this.bsonOptions,readPreference:this.readPreference},o=DW.WriteConcern.fromOptions(i),u=new MW.BulkWriteOperation(s,this.docs.map(a=>({insertOne:{document:a}})),i);try{let a=await u.execute(e,r,n);return{acknowledged:o?.w!==0,insertedCount:a.insertedCount,insertedIds:a.insertedIds}}catch(a){throw a&&a.message==="Operation must be an object with an operation key"?new Dd.MongoInvalidArgumentError("Collection.insertMany() cannot be called with an array that has null/undefined values"):a}}};Ho.InsertManyOperation=Bd;(0,Xi.defineAspects)(m1,[Xi.Aspect.RETRYABLE,Xi.Aspect.WRITE_OPERATION]);(0,Xi.defineAspects)(Md,[Xi.Aspect.RETRYABLE,Xi.Aspect.WRITE_OPERATION]);(0,Xi.defineAspects)(Bd,[Xi.Aspect.WRITE_OPERATION])});var g_=g(Gs=>{"use strict";d();Object.defineProperty(Gs,"__esModule",{value:!0});Gs.ReplaceOneOperation=Gs.UpdateManyOperation=Gs.UpdateOneOperation=Gs.UpdateOperation=void 0;Gs.makeUpdateStatement=Fd;var ms=Z(),y_=ae(),IW=Pt(),Ar=Ke(),Hu=class extends IW.CommandOperation{constructor(e,r,n){super(void 0,n),this.options=n,this.ns=e,this.statements=r}get commandName(){return"update"}get canRetryWrite(){return super.canRetryWrite===!1?!1:this.statements.every(e=>e.multi==null||e.multi===!1)}async execute(e,r,n){let s=this.options??{},i=typeof s.ordered=="boolean"?s.ordered:!0,o={update:this.ns.collection,updates:this.statements,ordered:i};if(typeof s.bypassDocumentValidation=="boolean"&&(o.bypassDocumentValidation=s.bypassDocumentValidation),s.let&&(o.let=s.let),s.comment!==void 0&&(o.comment=s.comment),this.writeConcern&&this.writeConcern.w===0&&this.statements.find(c=>c.hint))throw new ms.MongoCompatibilityError("hint is not supported with unacknowledged writes");return await super.executeCommand(e,r,o,n)}};Gs.UpdateOperation=Hu;var Id=class extends Hu{constructor(e,r,n,s){if(super(e.s.namespace,[Fd(r,n,{...s,multi:!1})],s),!(0,y_.hasAtomicOperators)(n))throw new ms.MongoInvalidArgumentError("Update document requires atomic operators")}async execute(e,r,n){let s=await super.execute(e,r,n);if(this.explain!=null)return s;if(s.code)throw new ms.MongoServerError(s);if(s.writeErrors)throw new ms.MongoServerError(s.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:s.nModified??s.n,upsertedId:Array.isArray(s.upserted)&&s.upserted.length>0?s.upserted[0]._id:null,upsertedCount:Array.isArray(s.upserted)&&s.upserted.length?s.upserted.length:0,matchedCount:Array.isArray(s.upserted)&&s.upserted.length>0?0:s.n}}};Gs.UpdateOneOperation=Id;var Pd=class extends Hu{constructor(e,r,n,s){if(super(e.s.namespace,[Fd(r,n,{...s,multi:!0})],s),!(0,y_.hasAtomicOperators)(n))throw new ms.MongoInvalidArgumentError("Update document requires atomic operators")}async execute(e,r,n){let s=await super.execute(e,r,n);if(this.explain!=null)return s;if(s.code)throw new ms.MongoServerError(s);if(s.writeErrors)throw new ms.MongoServerError(s.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:s.nModified??s.n,upsertedId:Array.isArray(s.upserted)&&s.upserted.length>0?s.upserted[0]._id:null,upsertedCount:Array.isArray(s.upserted)&&s.upserted.length?s.upserted.length:0,matchedCount:Array.isArray(s.upserted)&&s.upserted.length>0?0:s.n}}};Gs.UpdateManyOperation=Pd;var Nd=class extends Hu{constructor(e,r,n,s){if(super(e.s.namespace,[Fd(r,n,{...s,multi:!1})],s),(0,y_.hasAtomicOperators)(n))throw new ms.MongoInvalidArgumentError("Replacement document must not contain atomic operators")}async execute(e,r,n){let s=await super.execute(e,r,n);if(this.explain!=null)return s;if(s.code)throw new ms.MongoServerError(s);if(s.writeErrors)throw new ms.MongoServerError(s.writeErrors[0]);return{acknowledged:this.writeConcern?.w!==0,modifiedCount:s.nModified??s.n,upsertedId:Array.isArray(s.upserted)&&s.upserted.length>0?s.upserted[0]._id:null,upsertedCount:Array.isArray(s.upserted)&&s.upserted.length?s.upserted.length:0,matchedCount:Array.isArray(s.upserted)&&s.upserted.length>0?0:s.n}}};Gs.ReplaceOneOperation=Nd;function Fd(t,e,r){if(t==null||typeof t!="object")throw new ms.MongoInvalidArgumentError("Selector must be a valid JavaScript object");if(e==null||typeof e!="object")throw new ms.MongoInvalidArgumentError("Document must be a valid JavaScript object");let n={q:t,u:e};return typeof r.upsert=="boolean"&&(n.upsert=r.upsert),r.multi&&(n.multi=r.multi),r.hint&&(n.hint=r.hint),r.arrayFilters&&(n.arrayFilters=r.arrayFilters),r.collation&&(n.collation=r.collation),n}(0,Ar.defineAspects)(Hu,[Ar.Aspect.RETRYABLE,Ar.Aspect.WRITE_OPERATION,Ar.Aspect.SKIP_COLLATION]);(0,Ar.defineAspects)(Id,[Ar.Aspect.RETRYABLE,Ar.Aspect.WRITE_OPERATION,Ar.Aspect.EXPLAINABLE,Ar.Aspect.SKIP_COLLATION]);(0,Ar.defineAspects)(Pd,[Ar.Aspect.WRITE_OPERATION,Ar.Aspect.EXPLAINABLE,Ar.Aspect.SKIP_COLLATION]);(0,Ar.defineAspects)(Nd,[Ar.Aspect.RETRYABLE,Ar.Aspect.WRITE_OPERATION,Ar.Aspect.SKIP_COLLATION])});var A1=g(xe=>{"use strict";d();Object.defineProperty(xe,"__esModule",{value:!0});xe.BulkOperationBase=xe.BulkWriteShimOperation=xe.FindOperators=xe.MongoBulkWriteError=xe.WriteError=xe.WriteConcernError=xe.BulkWriteResult=xe.Batch=xe.BatchType=void 0;xe.mergeBatchResults=__;var Db=Ue(),tr=Z(),E1=f_(),Mb=kr(),PW=m_(),NW=Ke(),Gu=g_(),_i=ae(),Tb=vr(),y1=Symbol("serverError");xe.BatchType=Object.freeze({INSERT:1,UPDATE:2,DELETE:3});var E_=class{constructor(e,r){this.originalZeroIndex=r,this.currentIndex=0,this.originalIndexes=[],this.batchType=e,this.operations=[],this.size=0,this.sizeBytes=0}};xe.Batch=E_;var Go=class t{static generateIdMap(e){let r={};for(let n of e)r[n.index]=n._id;return r}constructor(e,r){this.result=e,this.insertedCount=this.result.nInserted??0,this.matchedCount=this.result.nMatched??0,this.modifiedCount=this.result.nModified??0,this.deletedCount=this.result.nRemoved??0,this.upsertedCount=this.result.upserted.length??0,this.upsertedIds=t.generateIdMap(this.result.upserted),this.insertedIds=t.generateIdMap(this.getSuccessfullyInsertedIds(e,r)),Object.defineProperty(this,"result",{value:this.result,enumerable:!1})}get ok(){return this.result.ok}getSuccessfullyInsertedIds(e,r){return e.writeErrors.length===0?e.insertedIds:r?e.insertedIds.slice(0,e.writeErrors[0].index):e.insertedIds.filter(({index:n})=>!e.writeErrors.some(s=>n===s.index))}getUpsertedIdAt(e){return this.result.upserted[e]}getRawResponse(){return this.result}hasWriteErrors(){return this.result.writeErrors.length>0}getWriteErrorCount(){return this.result.writeErrors.length}getWriteErrorAt(e){return e<this.result.writeErrors.length?this.result.writeErrors[e]:void 0}getWriteErrors(){return this.result.writeErrors}getWriteConcernError(){if(this.result.writeConcernErrors.length!==0){if(this.result.writeConcernErrors.length===1)return this.result.writeConcernErrors[0];{let e="";for(let r=0;r<this.result.writeConcernErrors.length;r++){let n=this.result.writeConcernErrors[r];e=e+n.errmsg,r===0&&(e=e+" and ")}return new ec({errmsg:e,code:tr.MONGODB_ERROR_CODES.WriteConcernFailed})}}}toString(){return`BulkWriteResult(${Db.EJSON.stringify(this.result)})`}isOk(){return this.result.ok===1}};xe.BulkWriteResult=Go;var ec=class{constructor(e){this[y1]=e}get code(){return this[y1].code}get errmsg(){return this[y1].errmsg}get errInfo(){return this[y1].errInfo}toJSON(){return this[y1]}toString(){return`WriteConcernError(${this.errmsg})`}};xe.WriteConcernError=ec;var _1=class{constructor(e){this.err=e}get code(){return this.err.code}get index(){return this.err.index}get errmsg(){return this.err.errmsg}get errInfo(){return this.err.errInfo}getOperation(){return this.err.op}toJSON(){return{code:this.err.code,index:this.err.index,errmsg:this.err.errmsg,op:this.err.op}}toString(){return`WriteError(${JSON.stringify(this.toJSON())})`}};xe.WriteError=_1;function __(t,e,r,n){if(r?n=r:n&&n.result&&(n=n.result),n==null)return;if(n.ok===0&&e.ok===1){e.ok=0;let i={index:0,code:n.code||0,errmsg:n.message,errInfo:n.errInfo,op:t.operations[0]};e.writeErrors.push(new _1(i));return}else if(n.ok===0&&e.ok===0)return;Bb(t)&&n.n&&(e.nInserted=e.nInserted+n.n),O_(t)&&n.n&&(e.nRemoved=e.nRemoved+n.n);let s=0;if(Array.isArray(n.upserted)){s=n.upserted.length;for(let i=0;i<n.upserted.length;i++)e.upserted.push({index:n.upserted[i].index+t.originalZeroIndex,_id:n.upserted[i]._id})}else n.upserted&&(s=1,e.upserted.push({index:t.originalZeroIndex,_id:n.upserted}));if(S_(t)&&n.n){let i=n.nModified;e.nUpserted=e.nUpserted+s,e.nMatched=e.nMatched+(n.n-s),typeof i=="number"?e.nModified=e.nModified+i:e.nModified=0}if(Array.isArray(n.writeErrors))for(let i=0;i<n.writeErrors.length;i++){let o={index:t.originalIndexes[n.writeErrors[i].index],code:n.writeErrors[i].code,errmsg:n.writeErrors[i].errmsg,errInfo:n.writeErrors[i].errInfo,op:t.operations[n.writeErrors[i].index]};e.writeErrors.push(new _1(o))}n.writeConcernError&&e.writeConcernErrors.push(new ec(n.writeConcernError))}async function FW(t,e){if(t.s.batches.length===0)return new Go(t.s.bulkResult,t.isOrdered);for(let n of t.s.batches){let s=(0,_i.resolveOptions)(t,{...e,ordered:t.isOrdered});s.bypassDocumentValidation!==!0&&delete s.bypassDocumentValidation,t.s.bypassDocumentValidation===!0&&(s.bypassDocumentValidation=!0),t.s.checkKeys===!1&&(s.checkKeys=!1),s.retryWrites&&(S_(n)&&(s.retryWrites=s.retryWrites&&!n.operations.some(c=>c.multi)),O_(n)&&(s.retryWrites=s.retryWrites&&!n.operations.some(c=>c.limit===0)));let i=Bb(n)?new PW.InsertOperation(t.s.namespace,n.operations,s):S_(n)?new Gu.UpdateOperation(t.s.namespace,n.operations,s):O_(n)?new E1.DeleteOperation(t.s.namespace,n.operations,s):null;if(i==null)throw new tr.MongoRuntimeError(`Unknown batchType: ${n.batchType}`);let o=null,u;try{u=await(0,Mb.executeOperation)(t.s.collection.client,i,s.timeoutContext)}catch(c){o=c}if(o!=null)if(o instanceof tr.MongoWriteConcernError){__(n,t.s.bulkResult,o,u);let c=new Go(t.s.bulkResult,t.isOrdered);throw new Ku({message:o.result.writeConcernError.errmsg,code:o.result.writeConcernError.code},c)}else throw new Ku(o,new Go(t.s.bulkResult,t.isOrdered));__(n,t.s.bulkResult,o,u);let a=new Go(t.s.bulkResult,t.isOrdered);t.handleWriteError(a)}t.s.batches.length=0;let r=new Go(t.s.bulkResult,t.isOrdered);return t.handleWriteError(r),r}var Ku=class extends tr.MongoServerError{constructor(e,r){super(e),this.writeErrors=[],e instanceof ec?this.err=e:e instanceof Error||(this.message=e.message,this.code=e.code,this.writeErrors=e.writeErrors??[]),this.result=r,Object.assign(this,e)}get name(){return"MongoBulkWriteError"}get insertedCount(){return this.result.insertedCount}get matchedCount(){return this.result.matchedCount}get modifiedCount(){return this.result.modifiedCount}get deletedCount(){return this.result.deletedCount}get upsertedCount(){return this.result.upsertedCount}get insertedIds(){return this.result.insertedIds}get upsertedIds(){return this.result.upsertedIds}};xe.MongoBulkWriteError=Ku;var Rd=class{constructor(e){this.bulkOperation=e}update(e){let r=g1(this.bulkOperation);return this.bulkOperation.addToOperationsList(xe.BatchType.UPDATE,(0,Gu.makeUpdateStatement)(r.selector,e,{...r,multi:!0}))}updateOne(e){if(!(0,_i.hasAtomicOperators)(e))throw new tr.MongoInvalidArgumentError("Update document requires atomic operators");let r=g1(this.bulkOperation);return this.bulkOperation.addToOperationsList(xe.BatchType.UPDATE,(0,Gu.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}replaceOne(e){if((0,_i.hasAtomicOperators)(e))throw new tr.MongoInvalidArgumentError("Replacement document must not use atomic operators");let r=g1(this.bulkOperation);return this.bulkOperation.addToOperationsList(xe.BatchType.UPDATE,(0,Gu.makeUpdateStatement)(r.selector,e,{...r,multi:!1}))}deleteOne(){let e=g1(this.bulkOperation);return this.bulkOperation.addToOperationsList(xe.BatchType.DELETE,(0,E1.makeDeleteStatement)(e.selector,{...e,limit:1}))}delete(){let e=g1(this.bulkOperation);return this.bulkOperation.addToOperationsList(xe.BatchType.DELETE,(0,E1.makeDeleteStatement)(e.selector,{...e,limit:0}))}upsert(){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.upsert=!0,this}collation(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.collation=e,this}arrayFilters(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.arrayFilters=e,this}hint(e){return this.bulkOperation.s.currentOp||(this.bulkOperation.s.currentOp={}),this.bulkOperation.s.currentOp.hint=e,this}};xe.FindOperators=Rd;var vd=class extends NW.AbstractOperation{constructor(e,r){super(r),this.bulkOperation=e}get commandName(){return"bulkWrite"}async execute(e,r,n){return this.options.session==null&&(this.options.session=r),await FW(this.bulkOperation,{...this.options,timeoutContext:n})}};xe.BulkWriteShimOperation=vd;var A_=class{constructor(e,r,n){this.collection=e,this.isOrdered=n;let s=(0,_i.getTopology)(e);r=r??{};let i=e.s.namespace,o=!1,u=void 0,a=s.lastHello(),c=!!(s.s.options&&s.s.options.autoEncrypter),l=a&&a.maxBsonObjectSize?a.maxBsonObjectSize:1024*1024*16,h=c?1024*1024*2:l,f=a&&a.maxWriteBatchSize?a.maxWriteBatchSize:1e3,p=(f-1).toString(10).length+2,m=Object.assign({},r);m=(0,_i.applyRetryableWrites)(m,e.s.db);let y={ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]};this.s={bulkResult:y,currentBatch:void 0,currentIndex:0,currentBatchSize:0,currentBatchSizeBytes:0,currentInsertBatch:void 0,currentUpdateBatch:void 0,currentRemoveBatch:void 0,batches:[],writeConcern:Tb.WriteConcern.fromOptions(r),maxBsonObjectSize:l,maxBatchSizeBytes:h,maxWriteBatchSize:f,maxKeySize:p,namespace:i,topology:s,options:m,bsonOptions:(0,Db.resolveBSONOptions)(r),currentOp:u,executed:o,collection:e,err:void 0,checkKeys:typeof r.checkKeys=="boolean"?r.checkKeys:!1},r.bypassDocumentValidation===!0&&(this.s.bypassDocumentValidation=!0)}insert(e){return(0,_i.maybeAddIdToDocuments)(this.collection,e,{forceServerObjectId:this.shouldForceServerObjectId()}),this.addToOperationsList(xe.BatchType.INSERT,e)}find(e){if(!e)throw new tr.MongoInvalidArgumentError("Bulk find operation must specify a selector");return this.s.currentOp={selector:e},new Rd(this)}raw(e){if(e==null||typeof e!="object")throw new tr.MongoInvalidArgumentError("Operation must be an object with an operation key");if("insertOne"in e){let r=this.shouldForceServerObjectId(),n=e.insertOne&&e.insertOne.document==null?e.insertOne:e.insertOne.document;return(0,_i.maybeAddIdToDocuments)(this.collection,n,{forceServerObjectId:r}),this.addToOperationsList(xe.BatchType.INSERT,n)}if("replaceOne"in e||"updateOne"in e||"updateMany"in e){if("replaceOne"in e){if("q"in e.replaceOne)throw new tr.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,Gu.makeUpdateStatement)(e.replaceOne.filter,e.replaceOne.replacement,{...e.replaceOne,multi:!1});if((0,_i.hasAtomicOperators)(r.u))throw new tr.MongoInvalidArgumentError("Replacement document must not use atomic operators");return this.addToOperationsList(xe.BatchType.UPDATE,r)}if("updateOne"in e){if("q"in e.updateOne)throw new tr.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,Gu.makeUpdateStatement)(e.updateOne.filter,e.updateOne.update,{...e.updateOne,multi:!1});if(!(0,_i.hasAtomicOperators)(r.u))throw new tr.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(xe.BatchType.UPDATE,r)}if("updateMany"in e){if("q"in e.updateMany)throw new tr.MongoInvalidArgumentError("Raw operations are not allowed");let r=(0,Gu.makeUpdateStatement)(e.updateMany.filter,e.updateMany.update,{...e.updateMany,multi:!0});if(!(0,_i.hasAtomicOperators)(r.u))throw new tr.MongoInvalidArgumentError("Update document requires atomic operators");return this.addToOperationsList(xe.BatchType.UPDATE,r)}}if("deleteOne"in e){if("q"in e.deleteOne)throw new tr.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(xe.BatchType.DELETE,(0,E1.makeDeleteStatement)(e.deleteOne.filter,{...e.deleteOne,limit:1}))}if("deleteMany"in e){if("q"in e.deleteMany)throw new tr.MongoInvalidArgumentError("Raw operations are not allowed");return this.addToOperationsList(xe.BatchType.DELETE,(0,E1.makeDeleteStatement)(e.deleteMany.filter,{...e.deleteMany,limit:0}))}throw new tr.MongoInvalidArgumentError("bulkWrite only supports insertOne, updateOne, updateMany, deleteOne, deleteMany")}get length(){return this.s.currentIndex}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get batches(){let e=[...this.s.batches];return this.isOrdered?this.s.currentBatch&&e.push(this.s.currentBatch):(this.s.currentInsertBatch&&e.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&e.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&e.push(this.s.currentRemoveBatch)),e}async execute(e={}){if(this.s.executed)throw new tr.MongoBatchReExecutionError;let r=Tb.WriteConcern.fromOptions(e);if(r&&(this.s.writeConcern=r),this.isOrdered?this.s.currentBatch&&this.s.batches.push(this.s.currentBatch):(this.s.currentInsertBatch&&this.s.batches.push(this.s.currentInsertBatch),this.s.currentUpdateBatch&&this.s.batches.push(this.s.currentUpdateBatch),this.s.currentRemoveBatch&&this.s.batches.push(this.s.currentRemoveBatch)),this.s.batches.length===0)throw new tr.MongoInvalidArgumentError("Invalid BulkOperation, Batch cannot be empty");this.s.executed=!0;let n={...this.s.options,...e},s=new vd(this,n);return await(0,Mb.executeOperation)(this.s.collection.client,s,n.timeoutContext)}handleWriteError(e){if(this.s.bulkResult.writeErrors.length>0){let n=this.s.bulkResult.writeErrors[0].errmsg?this.s.bulkResult.writeErrors[0].errmsg:"write operation failed";throw new Ku({message:n,code:this.s.bulkResult.writeErrors[0].code,writeErrors:this.s.bulkResult.writeErrors},e)}let r=e.getWriteConcernError();if(r)throw new Ku(r,e)}shouldForceServerObjectId(){return this.s.options.forceServerObjectId===!0||this.s.collection.s.db.options?.forceServerObjectId===!0}};xe.BulkOperationBase=A_;function Bb(t){return t.batchType===xe.BatchType.INSERT}function S_(t){return t.batchType===xe.BatchType.UPDATE}function O_(t){return t.batchType===xe.BatchType.DELETE}function g1(t){let{currentOp:e}=t.s;return t.s.currentOp=void 0,e||(e={}),e}});var C_=g(xd=>{"use strict";d();Object.defineProperty(xd,"__esModule",{value:!0});xd.OrderedBulkOperation=void 0;var RW=Ue(),Ib=Z(),$d=A1(),w_=class extends $d.BulkOperationBase{constructor(e,r){super(e,r,!0)}addToOperationsList(e,r){let n=RW.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new Ib.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch==null&&(this.s.currentBatch=new $d.Batch(e,this.s.currentIndex));let s=this.s.maxKeySize;if((this.s.currentBatchSize+1>=this.s.maxWriteBatchSize||this.s.currentBatchSize>0&&this.s.currentBatchSizeBytes+s+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new $d.Batch(e,this.s.currentIndex),this.s.currentBatchSize=0,this.s.currentBatchSizeBytes=0),e===$d.BatchType.INSERT&&this.s.bulkResult.insertedIds.push({index:this.s.currentIndex,_id:r._id}),Array.isArray(r))throw new Ib.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentBatch.operations.push(r),this.s.currentBatchSize+=1,this.s.currentBatchSizeBytes+=s+n,this.s.currentIndex+=1,this}};xd.OrderedBulkOperation=w_});var T_=g(kd=>{"use strict";d();Object.defineProperty(kd,"__esModule",{value:!0});kd.UnorderedBulkOperation=void 0;var vW=Ue(),Pb=Z(),Zi=A1(),b_=class extends Zi.BulkOperationBase{constructor(e,r){super(e,r,!1)}handleWriteError(e){if(!this.s.batches.length)return super.handleWriteError(e)}addToOperationsList(e,r){let n=vW.calculateObjectSize(r,{checkKeys:!1,ignoreUndefined:!1});if(n>=this.s.maxBsonObjectSize)throw new Pb.MongoInvalidArgumentError(`Document is larger than the maximum size ${this.s.maxBsonObjectSize}`);this.s.currentBatch=void 0,e===Zi.BatchType.INSERT?this.s.currentBatch=this.s.currentInsertBatch:e===Zi.BatchType.UPDATE?this.s.currentBatch=this.s.currentUpdateBatch:e===Zi.BatchType.DELETE&&(this.s.currentBatch=this.s.currentRemoveBatch);let s=this.s.maxKeySize;if(this.s.currentBatch==null&&(this.s.currentBatch=new Zi.Batch(e,this.s.currentIndex)),(this.s.currentBatch.size+1>=this.s.maxWriteBatchSize||this.s.currentBatch.size>0&&this.s.currentBatch.sizeBytes+s+n>=this.s.maxBatchSizeBytes||this.s.currentBatch.batchType!==e)&&(this.s.batches.push(this.s.currentBatch),this.s.currentBatch=new Zi.Batch(e,this.s.currentIndex)),Array.isArray(r))throw new Pb.MongoInvalidArgumentError("Operation passed in cannot be an Array");return this.s.currentBatch.operations.push(r),this.s.currentBatch.originalIndexes.push(this.s.currentIndex),this.s.currentIndex=this.s.currentIndex+1,e===Zi.BatchType.INSERT?(this.s.currentInsertBatch=this.s.currentBatch,this.s.bulkResult.insertedIds.push({index:this.s.bulkResult.insertedIds.length,_id:r._id})):e===Zi.BatchType.UPDATE?this.s.currentUpdateBatch=this.s.currentBatch:e===Zi.BatchType.DELETE&&(this.s.currentRemoveBatch=this.s.currentBatch),this.s.currentBatch.size+=1,this.s.currentBatch.sizeBytes+=s+n,this}};kd.UnorderedBulkOperation=b_});var D_=g(Yu=>{"use strict";d();Object.defineProperty(Yu,"__esModule",{value:!0});Yu.AggregateOperation=Yu.DB_AGGREGATE_COLLECTION=void 0;var Nb=Hs(),Fb=Z(),$W=ae(),xW=vr(),kW=Pt(),S1=Ke();Yu.DB_AGGREGATE_COLLECTION=1;var qW=8,qd=class extends kW.CommandOperation{constructor(e,r,n){if(super(void 0,{...n,dbName:e.db}),this.options={...n},this.target=e.collection||Yu.DB_AGGREGATE_COLLECTION,this.pipeline=r,this.hasWriteStage=!1,typeof n?.out=="string")this.pipeline=this.pipeline.concat({$out:n.out}),this.hasWriteStage=!0;else if(r.length>0){let s=r[r.length-1];(s.$out||s.$merge)&&(this.hasWriteStage=!0)}if(this.hasWriteStage?this.trySecondaryWrite=!0:delete this.options.writeConcern,this.explain&&this.writeConcern)throw new Fb.MongoInvalidArgumentError('Option "explain" cannot be used on an aggregate call with writeConcern');if(n?.cursor!=null&&typeof n.cursor!="object")throw new Fb.MongoInvalidArgumentError("Cursor options must be an object")}get commandName(){return"aggregate"}get canRetryRead(){return!this.hasWriteStage}addToPipeline(e){this.pipeline.push(e)}async execute(e,r,n){let s=this.options,i=(0,$W.maxWireVersion)(e),o={aggregate:this.target,pipeline:this.pipeline};return this.hasWriteStage&&i<qW&&(this.readConcern=void 0),this.hasWriteStage&&this.writeConcern&&xW.WriteConcern.apply(o,this.writeConcern),s.bypassDocumentValidation===!0&&(o.bypassDocumentValidation=s.bypassDocumentValidation),typeof s.allowDiskUse=="boolean"&&(o.allowDiskUse=s.allowDiskUse),s.hint&&(o.hint=s.hint),s.let&&(o.let=s.let),s.comment!==void 0&&(o.comment=s.comment),o.cursor=s.cursor||{},s.batchSize&&!this.hasWriteStage&&(o.cursor.batchSize=s.batchSize),await super.executeCommand(e,r,o,n,this.explain?Nb.ExplainedCursorResponse:Nb.CursorResponse)}};Yu.AggregateOperation=qd;(0,S1.defineAspects)(qd,[S1.Aspect.READ_OPERATION,S1.Aspect.RETRYABLE,S1.Aspect.EXPLAINABLE,S1.Aspect.CURSOR_CREATING])});var O1=g(Ld=>{"use strict";d();Object.defineProperty(Ld,"__esModule",{value:!0});Ld.AggregationCursor=void 0;var M_=Z(),B_=Qu(),Rb=D_(),vb=kr(),LW=ae(),$b=qr(),I_=class t extends B_.ExplainableCursor{constructor(e,r,n=[],s={}){super(e,r,s),this.pipeline=n,this.aggregateOptions=s;let i=this.pipeline[this.pipeline.length-1];if(this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===$b.CursorTimeoutMode.ITERATION&&(i?.$merge!=null||i?.$out!=null))throw new M_.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode")}clone(){let e=(0,LW.mergeOptions)({},this.aggregateOptions);return delete e.session,new t(this.client,this.namespace,this.pipeline,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.aggregateOptions,...this.cursorOptions,session:e};if(r.explain)try{(0,B_.validateExplainTimeoutOptions)(r,B_.Explain.fromOptions(r))}catch{throw new M_.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in aggregateOptions")}let n=new Rb.AggregateOperation(this.namespace,this.pipeline,r),s=await(0,vb.executeOperation)(this.client,n,this.timeoutContext);return{server:n.server,session:e,response:s}}async explain(e,r){let{explain:n,timeout:s}=this.resolveExplainTimeoutOptions(e,r);return(await(0,vb.executeOperation)(this.client,new Rb.AggregateOperation(this.namespace,this.pipeline,{...this.aggregateOptions,...this.cursorOptions,...s,explain:n??!0}))).shift(this.deserializationOptions)}addStage(e){if(this.throwIfInitialized(),this.cursorOptions.timeoutMS!=null&&this.cursorOptions.timeoutMode===$b.CursorTimeoutMode.ITERATION&&(e.$out!=null||e.$merge!=null))throw new M_.MongoAPIError("Cannot use $out or $merge stage with ITERATION timeoutMode");return this.pipeline.push(e),this}group(e){return this.addStage({$group:e})}limit(e){return this.addStage({$limit:e})}match(e){return this.addStage({$match:e})}out(e){return this.addStage({$out:e})}project(e){return this.addStage({$project:e})}lookup(e){return this.addStage({$lookup:e})}redact(e){return this.addStage({$redact:e})}skip(e){return this.addStage({$skip:e})}sort(e){return this.addStage({$sort:e})}unwind(e){return this.addStage({$unwind:e})}geoNear(e){return this.addStage({$geoNear:e})}};Ld.AggregationCursor=I_});var N_=g(Ud=>{"use strict";d();Object.defineProperty(Ud,"__esModule",{value:!0});Ud.CountOperation=void 0;var jW=Pt(),P_=Ke(),jd=class extends jW.CommandOperation{constructor(e,r,n){super({s:{namespace:e}},n),this.options=n,this.collectionName=e.collection,this.query=r}get commandName(){return"count"}async execute(e,r,n){let s=this.options,i={count:this.collectionName,query:this.query};typeof s.limit=="number"&&(i.limit=s.limit),typeof s.skip=="number"&&(i.skip=s.skip),s.hint!=null&&(i.hint=s.hint),typeof s.maxTimeMS=="number"&&(i.maxTimeMS=s.maxTimeMS);let o=await super.executeCommand(e,r,i,n);return o?o.n:0}};Ud.CountOperation=jd;(0,P_.defineAspects)(jd,[P_.Aspect.READ_OPERATION,P_.Aspect.RETRYABLE])});var Vd=g(F_=>{"use strict";d();Object.defineProperty(F_,"__esModule",{value:!0});F_.formatSort=JW;var xb=Z();function tc(t=1){let e=`${t}`.toLowerCase();if(UW(t))return t;switch(e){case"ascending":case"asc":case"1":return 1;case"descending":case"desc":case"-1":return-1;default:throw new xb.MongoInvalidArgumentError(`Invalid sort direction: ${JSON.stringify(t)}`)}}function UW(t){return typeof t=="object"&&t!=null&&"$meta"in t&&typeof t.$meta=="string"}function VW(t){if(Array.isArray(t)&&t.length===2)try{return tc(t[1]),!0}catch{return!1}return!1}function zW(t){return Array.isArray(t)&&Array.isArray(t[0])}function WW(t){return t instanceof Map&&t.size>0}function HW(t){return new Map([[`${t[0]}`,tc([t[1]])]])}function GW(t){let e=t.map(([r,n])=>[`${r}`,tc(n)]);return new Map(e)}function KW(t){let e=t.map(r=>[`${r}`,1]);return new Map(e)}function YW(t){let e=Object.entries(t).map(([r,n])=>[`${r}`,tc(n)]);return new Map(e)}function QW(t){let e=Array.from(t).map(([r,n])=>[`${r}`,tc(n)]);return new Map(e)}function JW(t,e){if(t!=null){if(typeof t=="string")return new Map([[t,tc(e)]]);if(typeof t!="object")throw new xb.MongoInvalidArgumentError(`Invalid sort format: ${JSON.stringify(t)} Sort must be a valid object`);if(!Array.isArray(t))return WW(t)?QW(t):Object.keys(t).length?YW(t):void 0;if(t.length)return zW(t)?GW(t):VW(t)?HW(t):KW(t)}}});var Lb=g(Wd=>{"use strict";d();Object.defineProperty(Wd,"__esModule",{value:!0});Wd.FindOperation=void 0;var kb=Hs(),XW=Z(),qb=Qu(),ZW=ls(),eH=Vd(),tH=ae(),rH=Pt(),w1=Ke(),zd=class extends rH.CommandOperation{constructor(e,r={},n={}){if(super(void 0,n),this.options={...n},delete this.options.writeConcern,this.ns=e,typeof r!="object"||Array.isArray(r))throw new XW.MongoInvalidArgumentError("Query filter must be a plain object or ObjectId");this.filter=r!=null&&r._bsontype==="ObjectId"?{_id:r}:r}get commandName(){return"find"}async execute(e,r,n){this.server=e;let s=this.options,i=nH(this.ns,this.filter,s);return this.explain&&((0,qb.validateExplainTimeoutOptions)(this.options,this.explain),i=(0,qb.decorateWithExplain)(i,this.explain)),await e.command(this.ns,i,{...this.options,...this.bsonOptions,documentsReturnedIn:"firstBatch",session:r,timeoutContext:n},this.explain?kb.ExplainedCursorResponse:kb.CursorResponse)}};Wd.FindOperation=zd;function nH(t,e,r){let n={find:t.collection,filter:e};if(r.sort&&(n.sort=(0,eH.formatSort)(r.sort)),r.projection){let i=r.projection;i&&Array.isArray(i)&&(i=i.length?i.reduce((o,u)=>(o[u]=1,o),{}):{_id:1}),n.projection=i}r.hint&&(n.hint=(0,tH.normalizeHintField)(r.hint)),typeof r.skip=="number"&&(n.skip=r.skip),typeof r.limit=="number"&&(r.limit<0?(n.limit=-r.limit,n.singleBatch=!0):n.limit=r.limit),typeof r.batchSize=="number"&&(r.batchSize<0?(r.limit&&r.limit!==0&&Math.abs(r.batchSize)<Math.abs(r.limit)&&(n.limit=-r.batchSize),n.singleBatch=!0):n.batchSize=r.batchSize),typeof r.singleBatch=="boolean"&&(n.singleBatch=r.singleBatch),r.comment!==void 0&&(n.comment=r.comment),typeof r.maxTimeMS=="number"&&(n.maxTimeMS=r.maxTimeMS);let s=ZW.ReadConcern.fromOptions(r);return s&&(n.readConcern=s.toJSON()),r.max&&(n.max=r.max),r.min&&(n.min=r.min),typeof r.returnKey=="boolean"&&(n.returnKey=r.returnKey),typeof r.showRecordId=="boolean"&&(n.showRecordId=r.showRecordId),typeof r.tailable=="boolean"&&(n.tailable=r.tailable),typeof r.oplogReplay=="boolean"&&(n.oplogReplay=r.oplogReplay),typeof r.timeout=="boolean"?n.noCursorTimeout=!r.timeout:typeof r.noCursorTimeout=="boolean"&&(n.noCursorTimeout=r.noCursorTimeout),typeof r.awaitData=="boolean"&&(n.awaitData=r.awaitData),typeof r.allowPartialResults=="boolean"&&(n.allowPartialResults=r.allowPartialResults),r.collation&&(n.collation=r.collation),typeof r.allowDiskUse=="boolean"&&(n.allowDiskUse=r.allowDiskUse),r.let&&(n.let=r.let),n}(0,w1.defineAspects)(zd,[w1.Aspect.READ_OPERATION,w1.Aspect.RETRYABLE,w1.Aspect.EXPLAINABLE,w1.Aspect.CURSOR_CREATING])});var q_=g(rc=>{"use strict";d();Object.defineProperty(rc,"__esModule",{value:!0});rc.FindCursor=rc.FLAGS=void 0;var sH=Hs(),ys=Z(),R_=Qu(),iH=N_(),v_=kr(),jb=Lb(),$_=Vd(),x_=ae();rc.FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];var k_=class t extends R_.ExplainableCursor{constructor(e,r,n={},s={}){super(e,r,s),this.numReturned=0,this.cursorFilter=n,this.findOptions=s,s.sort!=null&&(this.findOptions.sort=(0,$_.formatSort)(s.sort))}clone(){let e=(0,x_.mergeOptions)({},this.findOptions);return delete e.session,new t(this.client,this.namespace,this.cursorFilter,{...e})}map(e){return super.map(e)}async _initialize(e){let r={...this.findOptions,...this.cursorOptions,session:e};if(r.explain)try{(0,R_.validateExplainTimeoutOptions)(r,R_.Explain.fromOptions(r))}catch{throw new ys.MongoAPIError("timeoutMS cannot be used with explain when explain is specified in findOptions")}let n=new jb.FindOperation(this.namespace,this.cursorFilter,r),s=await(0,v_.executeOperation)(this.client,n,this.timeoutContext);return this.numReturned=s.batchSize,{server:n.server,session:e,response:s}}async getMore(e){let r=this.numReturned;if(r){let s=this.findOptions.limit;if(e=s&&s>0&&r+e>s?s-r:e,e<=0){try{await this.close()}catch(i){(0,x_.squashError)(i)}return sH.CursorResponse.emptyGetMore}}let n=await super.getMore(e);return this.numReturned=this.numReturned+n.batchSize,n}async count(e){if((0,x_.emitWarningOnce)("cursor.count is deprecated and will be removed in the next major version, please use `collection.estimatedDocumentCount` or `collection.countDocuments` instead "),typeof e=="boolean")throw new ys.MongoInvalidArgumentError("Invalid first parameter to count");return await(0,v_.executeOperation)(this.client,new iH.CountOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...e}))}async explain(e,r){let{explain:n,timeout:s}=this.resolveExplainTimeoutOptions(e,r);return(await(0,v_.executeOperation)(this.client,new jb.FindOperation(this.namespace,this.cursorFilter,{...this.findOptions,...this.cursorOptions,...s,explain:n??!0}))).shift(this.deserializationOptions)}filter(e){return this.throwIfInitialized(),this.cursorFilter=e,this}hint(e){return this.throwIfInitialized(),this.findOptions.hint=e,this}min(e){return this.throwIfInitialized(),this.findOptions.min=e,this}max(e){return this.throwIfInitialized(),this.findOptions.max=e,this}returnKey(e){return this.throwIfInitialized(),this.findOptions.returnKey=e,this}showRecordId(e){return this.throwIfInitialized(),this.findOptions.showRecordId=e,this}addQueryModifier(e,r){if(this.throwIfInitialized(),e[0]!=="$")throw new ys.MongoInvalidArgumentError(`${e} is not a valid query modifier`);switch(e.substr(1)){case"comment":this.findOptions.comment=r;break;case"explain":this.findOptions.explain=r;break;case"hint":this.findOptions.hint=r;break;case"max":this.findOptions.max=r;break;case"maxTimeMS":this.findOptions.maxTimeMS=r;break;case"min":this.findOptions.min=r;break;case"orderby":this.findOptions.sort=(0,$_.formatSort)(r);break;case"query":this.cursorFilter=r;break;case"returnKey":this.findOptions.returnKey=r;break;case"showDiskLoc":this.findOptions.showRecordId=r;break;default:throw new ys.MongoInvalidArgumentError(`Invalid query modifier: ${e}`)}return this}comment(e){return this.throwIfInitialized(),this.findOptions.comment=e,this}maxAwaitTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new ys.MongoInvalidArgumentError("Argument for maxAwaitTimeMS must be a number");return this.findOptions.maxAwaitTimeMS=e,this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new ys.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.findOptions.maxTimeMS=e,this}project(e){return this.throwIfInitialized(),this.findOptions.projection=e,this}sort(e,r){if(this.throwIfInitialized(),this.findOptions.tailable)throw new ys.MongoTailableCursorError("Tailable cursor does not support sorting");return this.findOptions.sort=(0,$_.formatSort)(e,r),this}allowDiskUse(e=!0){if(this.throwIfInitialized(),!this.findOptions.sort)throw new ys.MongoInvalidArgumentError('Option "allowDiskUse" requires a sort specification');return e?(this.findOptions.allowDiskUse=!0,this):(this.findOptions.allowDiskUse=!1,this)}collation(e){return this.throwIfInitialized(),this.findOptions.collation=e,this}limit(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new ys.MongoTailableCursorError("Tailable cursor does not support limit");if(typeof e!="number")throw new ys.MongoInvalidArgumentError('Operation "limit" requires an integer');return this.findOptions.limit=e,this}skip(e){if(this.throwIfInitialized(),this.findOptions.tailable)throw new ys.MongoTailableCursorError("Tailable cursor does not support skip");if(typeof e!="number")throw new ys.MongoInvalidArgumentError('Operation "skip" requires an integer');return this.findOptions.skip=e,this}};rc.FindCursor=k_});var C1=g(Yo=>{"use strict";d();Object.defineProperty(Yo,"__esModule",{value:!0});Yo.ListIndexesOperation=Yo.DropIndexOperation=Yo.CreateIndexesOperation=void 0;var oH=Hs(),uH=Z(),L_=ae(),j_=Pt(),Ko=Ke(),aH=new Set(["background","unique","name","partialFilterExpression","sparse","hidden","expireAfterSeconds","storageEngine","collation","version","weights","default_language","language_override","textIndexVersion","2dsphereIndexVersion","bits","min","max","bucketSize","wildcardProjection"]);function cH(t){return typeof t=="number"||t==="2d"||t==="2dsphere"||t==="text"||t==="geoHaystack"}function lH(t){return Array.isArray(t)&&t.length===2&&cH(t[1])}function hH(t){let e=new Map,r=!Array.isArray(t)||lH(t)?[t]:t;for(let n of r)if(typeof n=="string")e.set(n,1);else if(Array.isArray(n))e.set(n[0],n[1]??1);else if(n instanceof Map)for(let[s,i]of n)e.set(s,i);else if((0,L_.isObject)(n))for(let[s,i]of Object.entries(n))e.set(s,i);return e}function fH(t){let e=Object.entries(t).filter(([r])=>aH.has(r));return Object.fromEntries(e.map(([r,n])=>r==="version"?["v",n]:[r,n]))}var Hd=class t extends j_.CommandOperation{constructor(e,r,n,s){super(e,s),this.options=s??{},this.collectionName=r,this.indexes=n.map(i=>{let o=i.key instanceof Map?i.key:new Map(Object.entries(i.key)),u=i.name??Array.from(o).flat().join("_");return{...fH(i),name:u,key:o}})}static fromIndexDescriptionArray(e,r,n,s){return new t(e,r,n,s)}static fromIndexSpecification(e,r,n,s={}){let i=hH(n),o={...s,key:i};return new t(e,r,[o],s)}get commandName(){return"createIndexes"}async execute(e,r,n){let s=this.options,i=this.indexes,o=(0,L_.maxWireVersion)(e),u={createIndexes:this.collectionName,indexes:i};if(s.commitQuorum!=null){if(o<9)throw new uH.MongoCompatibilityError("Option `commitQuorum` for `createIndexes` not supported on servers < 4.4");u.commitQuorum=s.commitQuorum}return this.options.collation=void 0,await super.executeCommand(e,r,u,n),i.map(c=>c.name||"")}};Yo.CreateIndexesOperation=Hd;var Gd=class extends j_.CommandOperation{constructor(e,r,n){super(e,n),this.options=n??{},this.collection=e,this.indexName=r}get commandName(){return"dropIndexes"}async execute(e,r,n){let s={dropIndexes:this.collection.collectionName,index:this.indexName};return await super.executeCommand(e,r,s,n)}};Yo.DropIndexOperation=Gd;var Kd=class extends j_.CommandOperation{constructor(e,r){super(e,r),this.options={...r},delete this.options.writeConcern,this.collectionNamespace=e.s.namespace}get commandName(){return"listIndexes"}async execute(e,r,n){let s=(0,L_.maxWireVersion)(e),i=this.options.batchSize?{batchSize:this.options.batchSize}:{},o={listIndexes:this.collectionNamespace.collection,cursor:i};return s>=9&&this.options.comment!==void 0&&(o.comment=this.options.comment),await super.executeCommand(e,r,o,n,oH.CursorResponse)}};Yo.ListIndexesOperation=Kd;(0,Ko.defineAspects)(Kd,[Ko.Aspect.READ_OPERATION,Ko.Aspect.RETRYABLE,Ko.Aspect.CURSOR_CREATING]);(0,Ko.defineAspects)(Hd,[Ko.Aspect.WRITE_OPERATION]);(0,Ko.defineAspects)(Gd,[Ko.Aspect.WRITE_OPERATION])});var V_=g(Yd=>{"use strict";d();Object.defineProperty(Yd,"__esModule",{value:!0});Yd.ListIndexesCursor=void 0;var dH=kr(),pH=C1(),mH=qr(),U_=class t extends mH.AbstractCursor{constructor(e,r){super(e.client,e.s.namespace,r),this.parent=e,this.options=r}clone(){return new t(this.parent,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new pH.ListIndexesOperation(this.parent,{...this.cursorOptions,...this.options,session:e}),n=await(0,dH.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};Yd.ListIndexesCursor=U_});var Ub=g(Qd=>{"use strict";d();Object.defineProperty(Qd,"__esModule",{value:!0});Qd.ListSearchIndexesCursor=void 0;var yH=O1(),z_=class extends yH.AggregationCursor{constructor({fullNamespace:e,client:r},n,s={}){let i=n==null?[{$listSearchIndexes:{}}]:[{$listSearchIndexes:{name:n}}];super(r,e,i,s)}};Qd.ListSearchIndexesCursor=z_});var zb=g(Zd=>{"use strict";d();Object.defineProperty(Zd,"__esModule",{value:!0});Zd.DistinctOperation=void 0;var Vb=ae(),gH=Pt(),Jd=Ke(),Xd=class extends gH.CommandOperation{constructor(e,r,n,s){super(e,s),this.options=s??{},this.collection=e,this.key=r,this.query=n}get commandName(){return"distinct"}async execute(e,r,n){let s=this.collection,i=this.key,o=this.query,u=this.options,a={distinct:s.collectionName,key:i,query:o};typeof u.maxTimeMS=="number"&&(a.maxTimeMS=u.maxTimeMS),typeof u.comment<"u"&&(a.comment=u.comment),(0,Vb.decorateWithReadConcern)(a,s,u),(0,Vb.decorateWithCollation)(a,s,u);let c=await super.executeCommand(e,r,a,n);return this.explain?c:c.values}};Zd.DistinctOperation=Xd;(0,Jd.defineAspects)(Xd,[Jd.Aspect.READ_OPERATION,Jd.Aspect.RETRYABLE,Jd.Aspect.EXPLAINABLE])});var W_=g(nc=>{"use strict";d();Object.defineProperty(nc,"__esModule",{value:!0});nc.DropDatabaseOperation=nc.DropCollectionOperation=void 0;var Wb=Z(),Hb=Pt(),ep=Ke(),tp=class t extends Hb.CommandOperation{constructor(e,r,n={}){super(e,n),this.db=e,this.options=n,this.name=r}get commandName(){return"drop"}async execute(e,r,n){let s=this.db,i=this.options,o=this.name,u=s.client.s.options.autoEncryption?.encryptedFieldsMap,a=i.encryptedFields??u?.[`${s.databaseName}.${o}`];if(!a&&u&&(a=(await s.listCollections({name:o},{nameOnly:!1}).toArray())?.[0]?.options?.encryptedFields),a){let c=a.escCollection||`enxcol_.${o}.esc`,l=a.ecocCollection||`enxcol_.${o}.ecoc`;for(let h of[c,l]){let f=new t(s,h);try{await f.executeWithoutEncryptedFieldsCheck(e,r,n)}catch(p){if(!(p instanceof Wb.MongoServerError)||p.code!==Wb.MONGODB_ERROR_CODES.NamespaceNotFound)throw p}}}return await this.executeWithoutEncryptedFieldsCheck(e,r,n)}async executeWithoutEncryptedFieldsCheck(e,r,n){return await super.executeCommand(e,r,{drop:this.name},n),!0}};nc.DropCollectionOperation=tp;var rp=class extends Hb.CommandOperation{constructor(e,r){super(e,r),this.options=r}get commandName(){return"dropDatabase"}async execute(e,r,n){return await super.executeCommand(e,r,{dropDatabase:1},n),!0}};nc.DropDatabaseOperation=rp;(0,ep.defineAspects)(tp,[ep.Aspect.WRITE_OPERATION]);(0,ep.defineAspects)(rp,[ep.Aspect.WRITE_OPERATION])});var Gb=g(ip=>{"use strict";d();Object.defineProperty(ip,"__esModule",{value:!0});ip.EstimatedDocumentCountOperation=void 0;var EH=Pt(),np=Ke(),sp=class extends EH.CommandOperation{constructor(e,r={}){super(e,r),this.options=r,this.collectionName=e.collectionName}get commandName(){return"count"}async execute(e,r,n){let s={count:this.collectionName};return typeof this.options.maxTimeMS=="number"&&(s.maxTimeMS=this.options.maxTimeMS),this.options.comment!==void 0&&(s.comment=this.options.comment),(await super.executeCommand(e,r,s,n))?.n||0}};ip.EstimatedDocumentCountOperation=sp;(0,np.defineAspects)(sp,[np.Aspect.READ_OPERATION,np.Aspect.RETRYABLE,np.Aspect.CURSOR_CREATING])});var Y_=g(Gn=>{"use strict";d();Object.defineProperty(Gn,"__esModule",{value:!0});Gn.FindOneAndUpdateOperation=Gn.FindOneAndReplaceOperation=Gn.FindOneAndDeleteOperation=Gn.FindAndModifyOperation=Gn.ReturnDocument=void 0;var Qo=Z(),_H=lr(),AH=Vd(),up=ae(),SH=Pt(),op=Ke();Gn.ReturnDocument=Object.freeze({BEFORE:"before",AFTER:"after"});function Kb(t,e){return t.new=e.returnDocument===Gn.ReturnDocument.AFTER,t.upsert=e.upsert===!0,e.bypassDocumentValidation===!0&&(t.bypassDocumentValidation=e.bypassDocumentValidation),t}var Ju=class extends SH.CommandOperation{constructor(e,r,n){super(e,n),this.options=n??{},this.cmdBase={remove:!1,new:!1,upsert:!1},n.includeResultMetadata??=!1;let s=(0,AH.formatSort)(n.sort);s&&(this.cmdBase.sort=s),n.projection&&(this.cmdBase.fields=n.projection),n.maxTimeMS&&(this.cmdBase.maxTimeMS=n.maxTimeMS),n.writeConcern&&(this.cmdBase.writeConcern=n.writeConcern),n.let&&(this.cmdBase.let=n.let),n.comment!==void 0&&(this.cmdBase.comment=n.comment),this.readPreference=_H.ReadPreference.primary,this.collection=e,this.query=r}get commandName(){return"findAndModify"}async execute(e,r,n){let s=this.collection,i=this.query,o={...this.options,...this.bsonOptions},u={findAndModify:s.collectionName,query:i,...this.cmdBase};if((0,up.decorateWithCollation)(u,s,o),o.hint){if(this.writeConcern?.w===0||(0,up.maxWireVersion)(e)<8)throw new Qo.MongoCompatibilityError("The current topology does not support a hint on findAndModify commands");u.hint=o.hint}let a=await super.executeCommand(e,r,u,n);return o.includeResultMetadata?a:a.value??null}};Gn.FindAndModifyOperation=Ju;var H_=class extends Ju{constructor(e,r,n){if(r==null||typeof r!="object")throw new Qo.MongoInvalidArgumentError('Argument "filter" must be an object');super(e,r,n),this.cmdBase.remove=!0}};Gn.FindOneAndDeleteOperation=H_;var G_=class extends Ju{constructor(e,r,n,s){if(r==null||typeof r!="object")throw new Qo.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new Qo.MongoInvalidArgumentError('Argument "replacement" must be an object');if((0,up.hasAtomicOperators)(n))throw new Qo.MongoInvalidArgumentError("Replacement document must not contain atomic operators");super(e,r,s),this.cmdBase.update=n,Kb(this.cmdBase,s)}};Gn.FindOneAndReplaceOperation=G_;var K_=class extends Ju{constructor(e,r,n,s){if(r==null||typeof r!="object")throw new Qo.MongoInvalidArgumentError('Argument "filter" must be an object');if(n==null||typeof n!="object")throw new Qo.MongoInvalidArgumentError('Argument "update" must be an object');if(!(0,up.hasAtomicOperators)(n))throw new Qo.MongoInvalidArgumentError("Update document requires atomic operators");super(e,r,s),this.cmdBase.update=n,Kb(this.cmdBase,s),s.arrayFilters&&(this.cmdBase.arrayFilters=s.arrayFilters)}};Gn.FindOneAndUpdateOperation=K_;(0,op.defineAspects)(Ju,[op.Aspect.WRITE_OPERATION,op.Aspect.RETRYABLE,op.Aspect.EXPLAINABLE])});var Yb=g(ap=>{"use strict";d();Object.defineProperty(ap,"__esModule",{value:!0});ap.IsCappedOperation=void 0;var OH=Z(),wH=Ke(),Q_=class extends wH.AbstractOperation{constructor(e,r){super(r),this.options=r,this.collection=e}get commandName(){return"listCollections"}async execute(e,r){let n=this.collection,[s]=await n.s.db.listCollections({name:n.collectionName},{...this.options,nameOnly:!1,readPreference:this.readPreference,session:r}).toArray();if(s==null||s.options==null)throw new OH.MongoAPIError(`collection ${n.namespace} not found`);return!!s.options?.capped}};ap.IsCappedOperation=Q_});var Qb=g(cp=>{"use strict";d();Object.defineProperty(cp,"__esModule",{value:!0});cp.OptionsOperation=void 0;var CH=Z(),bH=Ke(),J_=class extends bH.AbstractOperation{constructor(e,r){super(r),this.options=r,this.collection=e}get commandName(){return"listCollections"}async execute(e,r){let n=this.collection,[s]=await n.s.db.listCollections({name:n.collectionName},{...this.options,nameOnly:!1,readPreference:this.readPreference,session:r}).toArray();if(s==null||s.options==null)throw new CH.MongoAPIError(`collection ${n.namespace} not found`);return s.options}};cp.OptionsOperation=J_});var X_=g(hp=>{"use strict";d();Object.defineProperty(hp,"__esModule",{value:!0});hp.RenameOperation=void 0;var TH=Xu(),DH=ae(),MH=Pt(),Jb=Ke(),lp=class extends MH.CommandOperation{constructor(e,r,n){super(e,n),this.collection=e,this.newName=r,this.options=n,this.ns=new DH.MongoDBNamespace("admin","$cmd")}get commandName(){return"renameCollection"}async execute(e,r,n){let s=this.collection.namespace,i=this.collection.s.namespace.withCollection(this.newName).toString(),o=typeof this.options.dropTarget=="boolean"?this.options.dropTarget:!1,u={renameCollection:s,to:i,dropTarget:o};return await super.executeCommand(e,r,u,n),new TH.Collection(this.collection.s.db,this.newName,this.collection.s.options)}};hp.RenameOperation=lp;(0,Jb.defineAspects)(lp,[Jb.Aspect.WRITE_OPERATION])});var Xb=g(fp=>{"use strict";d();Object.defineProperty(fp,"__esModule",{value:!0});fp.CreateSearchIndexesOperation=void 0;var BH=Ke(),Z_=class extends BH.AbstractOperation{constructor(e,r){super(),this.collection=e,this.descriptions=r}get commandName(){return"createSearchIndexes"}async execute(e,r,n){let s=this.collection.fullNamespace,i={createSearchIndexes:s.collection,indexes:this.descriptions};return((await e.command(s,i,{session:r,timeoutContext:n}))?.indexesCreated??[]).map(({name:a})=>a)}};fp.CreateSearchIndexesOperation=Z_});var e7=g(dp=>{"use strict";d();Object.defineProperty(dp,"__esModule",{value:!0});dp.DropSearchIndexOperation=void 0;var Zb=Z(),IH=Ke(),e3=class extends IH.AbstractOperation{constructor(e,r){super(),this.collection=e,this.name=r}get commandName(){return"dropSearchIndex"}async execute(e,r,n){let s=this.collection.fullNamespace,i={dropSearchIndex:s.collection};typeof this.name=="string"&&(i.name=this.name);try{await e.command(s,i,{session:r,timeoutContext:n})}catch(o){if(!(o instanceof Zb.MongoServerError&&o.code===Zb.MONGODB_ERROR_CODES.NamespaceNotFound))throw o}}};dp.DropSearchIndexOperation=e3});var t7=g(pp=>{"use strict";d();Object.defineProperty(pp,"__esModule",{value:!0});pp.UpdateSearchIndexOperation=void 0;var PH=Ke(),t3=class extends PH.AbstractOperation{constructor(e,r,n){super(),this.collection=e,this.name=r,this.definition=n}get commandName(){return"updateSearchIndex"}async execute(e,r,n){let s=this.collection.fullNamespace,i={updateSearchIndex:s.collection,name:this.name,definition:this.definition};await e.command(s,i,{session:r,timeoutContext:n})}};pp.UpdateSearchIndexOperation=t3});var Xu=g(yp=>{"use strict";d();Object.defineProperty(yp,"__esModule",{value:!0});yp.Collection=void 0;var NH=Ue(),FH=C_(),RH=T_(),vH=Zu(),$H=O1(),xH=q_(),kH=V_(),qH=Ub(),r3=Z(),LH=p_(),jH=N_(),r7=f_(),UH=zb(),VH=W_(),zH=Gb(),At=kr(),n3=Y_(),mp=C1(),n7=m_(),WH=Yb(),HH=Qb(),GH=X_(),KH=Xb(),YH=e7(),QH=t7(),s3=g_(),JH=ls(),i3=lr(),Xe=ae(),XH=vr(),o3=class{constructor(e,r,n){this.s={db:e,options:n,namespace:new Xe.MongoDBCollectionNamespace(e.databaseName,r),pkFactory:e.options?.pkFactory??Xe.DEFAULT_PK_FACTORY,readPreference:i3.ReadPreference.fromOptions(n),bsonOptions:(0,NH.resolveBSONOptions)(n,e),readConcern:JH.ReadConcern.fromOptions(n),writeConcern:XH.WriteConcern.fromOptions(n)},this.client=e.client}get dbName(){return this.s.namespace.db}get collectionName(){return this.s.namespace.collection}get namespace(){return this.fullNamespace.toString()}get fullNamespace(){return this.s.namespace}get readConcern(){return this.s.readConcern==null?this.s.db.readConcern:this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.s.db.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern==null?this.s.db.writeConcern:this.s.writeConcern}get hint(){return this.s.collectionHint}set hint(e){this.s.collectionHint=(0,Xe.normalizeHintField)(e)}get timeoutMS(){return this.s.options.timeoutMS}async insertOne(e,r){return await(0,At.executeOperation)(this.client,new n7.InsertOneOperation(this,e,(0,Xe.resolveOptions)(this,r)))}async insertMany(e,r){return await(0,At.executeOperation)(this.client,new n7.InsertManyOperation(this,e,(0,Xe.resolveOptions)(this,r??{ordered:!0})))}async bulkWrite(e,r){if(!Array.isArray(e))throw new r3.MongoInvalidArgumentError('Argument "operations" must be an array of documents');return await(0,At.executeOperation)(this.client,new LH.BulkWriteOperation(this,e,(0,Xe.resolveOptions)(this,r??{ordered:!0})))}async updateOne(e,r,n){return await(0,At.executeOperation)(this.client,new s3.UpdateOneOperation(this,e,r,(0,Xe.resolveOptions)(this,n)))}async replaceOne(e,r,n){return await(0,At.executeOperation)(this.client,new s3.ReplaceOneOperation(this,e,r,(0,Xe.resolveOptions)(this,n)))}async updateMany(e,r,n){return await(0,At.executeOperation)(this.client,new s3.UpdateManyOperation(this,e,r,(0,Xe.resolveOptions)(this,n)))}async deleteOne(e={},r={}){return await(0,At.executeOperation)(this.client,new r7.DeleteOneOperation(this,e,(0,Xe.resolveOptions)(this,r)))}async deleteMany(e={},r={}){return await(0,At.executeOperation)(this.client,new r7.DeleteManyOperation(this,e,(0,Xe.resolveOptions)(this,r)))}async rename(e,r){return await(0,At.executeOperation)(this.client,new GH.RenameOperation(this,e,(0,Xe.resolveOptions)(void 0,{...r,readPreference:i3.ReadPreference.PRIMARY})))}async drop(e){return await(0,At.executeOperation)(this.client,new VH.DropCollectionOperation(this.s.db,this.collectionName,e))}async findOne(e={},r={}){let n=this.find(e,r).limit(-1).batchSize(1),s=await n.next();return await n.close(),s}find(e={},r={}){return new xH.FindCursor(this.client,this.s.namespace,e,(0,Xe.resolveOptions)(this,r))}async options(e){return await(0,At.executeOperation)(this.client,new HH.OptionsOperation(this,(0,Xe.resolveOptions)(this,e)))}async isCapped(e){return await(0,At.executeOperation)(this.client,new WH.IsCappedOperation(this,(0,Xe.resolveOptions)(this,e)))}async createIndex(e,r){return(await(0,At.executeOperation)(this.client,mp.CreateIndexesOperation.fromIndexSpecification(this,this.collectionName,e,(0,Xe.resolveOptions)(this,r))))[0]}async createIndexes(e,r){return await(0,At.executeOperation)(this.client,mp.CreateIndexesOperation.fromIndexDescriptionArray(this,this.collectionName,e,(0,Xe.resolveOptions)(this,{...r,maxTimeMS:void 0})))}async dropIndex(e,r){return await(0,At.executeOperation)(this.client,new mp.DropIndexOperation(this,e,{...(0,Xe.resolveOptions)(this,r),readPreference:i3.ReadPreference.primary}))}async dropIndexes(e){try{return await(0,At.executeOperation)(this.client,new mp.DropIndexOperation(this,"*",(0,Xe.resolveOptions)(this,e))),!0}catch(r){if(r instanceof r3.MongoOperationTimeoutError)throw r;return!1}}listIndexes(e){return new kH.ListIndexesCursor(this,(0,Xe.resolveOptions)(this,e))}async indexExists(e,r){let n=Array.isArray(e)?e:[e],s=new Set(await this.listIndexes(r).map(({name:i})=>i).toArray());return n.every(i=>s.has(i))}async indexInformation(e){return await this.indexes({...e,full:e?.full??!1})}async estimatedDocumentCount(e){return await(0,At.executeOperation)(this.client,new zH.EstimatedDocumentCountOperation(this,(0,Xe.resolveOptions)(this,e)))}async countDocuments(e={},r={}){let n=[];n.push({$match:e}),typeof r.skip=="number"&&n.push({$skip:r.skip}),typeof r.limit=="number"&&n.push({$limit:r.limit}),n.push({$group:{_id:1,n:{$sum:1}}});let s=this.aggregate(n,r),i=await s.next();return await s.close(),i?.n??0}async distinct(e,r={},n={}){return await(0,At.executeOperation)(this.client,new UH.DistinctOperation(this,e,r,(0,Xe.resolveOptions)(this,n)))}async indexes(e){let r=await this.listIndexes(e).toArray();return e?.full??!0?r:Object.fromEntries(r.map(({name:i,key:o})=>[i,Object.entries(o)]))}async findOneAndDelete(e,r){return await(0,At.executeOperation)(this.client,new n3.FindOneAndDeleteOperation(this,e,(0,Xe.resolveOptions)(this,r)))}async findOneAndReplace(e,r,n){return await(0,At.executeOperation)(this.client,new n3.FindOneAndReplaceOperation(this,e,r,(0,Xe.resolveOptions)(this,n)))}async findOneAndUpdate(e,r,n){return await(0,At.executeOperation)(this.client,new n3.FindOneAndUpdateOperation(this,e,r,(0,Xe.resolveOptions)(this,n)))}aggregate(e=[],r){if(!Array.isArray(e))throw new r3.MongoInvalidArgumentError('Argument "pipeline" must be an array of aggregation stages');return new $H.AggregationCursor(this.client,this.s.namespace,e,(0,Xe.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new vH.ChangeStream(this,e,(0,Xe.resolveOptions)(this,r))}initializeUnorderedBulkOp(e){return new RH.UnorderedBulkOperation(this,(0,Xe.resolveOptions)(this,e))}initializeOrderedBulkOp(e){return new FH.OrderedBulkOperation(this,(0,Xe.resolveOptions)(this,e))}async count(e={},r={}){return await(0,At.executeOperation)(this.client,new jH.CountOperation(this.fullNamespace,e,(0,Xe.resolveOptions)(this,r)))}listSearchIndexes(e,r){r=typeof e=="object"?e:r??{};let n=e==null||typeof e=="object"?null:e;return new qH.ListSearchIndexesCursor(this,n,r)}async createSearchIndex(e){let[r]=await this.createSearchIndexes([e]);return r}async createSearchIndexes(e){return await(0,At.executeOperation)(this.client,new KH.CreateSearchIndexesOperation(this,e))}async dropSearchIndex(e){return await(0,At.executeOperation)(this.client,new YH.DropSearchIndexOperation(this,e))}async updateSearchIndex(e,r){return await(0,At.executeOperation)(this.client,new QH.UpdateSearchIndexOperation(this,e,r))}};yp.Collection=o3});var l3=g(gp=>{"use strict";d();Object.defineProperty(gp,"__esModule",{value:!0});gp.ChangeStreamCursor=void 0;var u3=Zu(),s7=jt(),ZH=D_(),eG=kr(),a3=ae(),tG=qr(),c3=class t extends tG.AbstractCursor{constructor(e,r,n=[],s={}){super(e,r,{...s,tailable:!0,awaitData:!0}),this.pipeline=n,this.changeStreamCursorOptions=s,this._resumeToken=null,this.startAtOperationTime=s.startAtOperationTime??null,s.startAfter?this.resumeToken=s.startAfter:s.resumeAfter&&(this.resumeToken=s.resumeAfter)}set resumeToken(e){this._resumeToken=e,this.emit(u3.ChangeStream.RESUME_TOKEN_CHANGED,e)}get resumeToken(){return this._resumeToken}get resumeOptions(){let e={...this.changeStreamCursorOptions};for(let r of["resumeAfter","startAfter","startAtOperationTime"])delete e[r];return this.resumeToken!=null?this.changeStreamCursorOptions.startAfter&&!this.hasReceived?e.startAfter=this.resumeToken:e.resumeAfter=this.resumeToken:this.startAtOperationTime!=null&&(0,a3.maxWireVersion)(this.server)>=7&&(e.startAtOperationTime=this.startAtOperationTime),e}cacheResumeToken(e){this.bufferedCount()===0&&this.postBatchResumeToken?this.resumeToken=this.postBatchResumeToken:this.resumeToken=e,this.hasReceived=!0}_processBatch(e){let{postBatchResumeToken:r}=e;r&&(this.postBatchResumeToken=r,e.batchSize===0&&(this.resumeToken=r))}clone(){return new t(this.client,this.namespace,this.pipeline,{...this.cursorOptions})}async _initialize(e){let r=new ZH.AggregateOperation(this.namespace,this.pipeline,{...this.cursorOptions,...this.changeStreamCursorOptions,session:e}),n=await(0,eG.executeOperation)(e.client,r,this.timeoutContext),s=r.server;return this.maxWireVersion=(0,a3.maxWireVersion)(s),this.startAtOperationTime==null&&this.changeStreamCursorOptions.resumeAfter==null&&this.changeStreamCursorOptions.startAfter==null&&this.maxWireVersion>=7&&(this.startAtOperationTime=n.operationTime),this._processBatch(n),this.emit(s7.INIT,n),this.emit(s7.RESPONSE),{server:s,session:e,response:n}}async getMore(e){let r=await super.getMore(e);return this.maxWireVersion=(0,a3.maxWireVersion)(this.server),this._processBatch(r),this.emit(u3.ChangeStream.MORE,r),this.emit(u3.ChangeStream.RESPONSE),r}};gp.ChangeStreamCursor=c3});var i7=g(Ap=>{"use strict";d();Object.defineProperty(Ap,"__esModule",{value:!0});Ap.ListCollectionsOperation=void 0;var rG=Hs(),nG=ae(),sG=Pt(),Ep=Ke(),_p=class extends sG.CommandOperation{constructor(e,r,n){super(e,n),this.options={...n},delete this.options.writeConcern,this.db=e,this.filter=r,this.nameOnly=!!this.options.nameOnly,this.authorizedCollections=!!this.options.authorizedCollections,typeof this.options.batchSize=="number"&&(this.batchSize=this.options.batchSize)}get commandName(){return"listCollections"}async execute(e,r,n){return await super.executeCommand(e,r,this.generateCommand((0,nG.maxWireVersion)(e)),n,rG.CursorResponse)}generateCommand(e){let r={listCollections:1,filter:this.filter,cursor:this.batchSize?{batchSize:this.batchSize}:{},nameOnly:this.nameOnly,authorizedCollections:this.authorizedCollections};return e>=9&&this.options.comment!==void 0&&(r.comment=this.options.comment),r}};Ap.ListCollectionsOperation=_p;(0,Ep.defineAspects)(_p,[Ep.Aspect.READ_OPERATION,Ep.Aspect.RETRYABLE,Ep.Aspect.CURSOR_CREATING])});var f3=g(Sp=>{"use strict";d();Object.defineProperty(Sp,"__esModule",{value:!0});Sp.ListCollectionsCursor=void 0;var iG=kr(),oG=i7(),uG=qr(),h3=class t extends uG.AbstractCursor{constructor(e,r,n){super(e.client,e.s.namespace,n),this.parent=e,this.filter=r,this.options=n}clone(){return new t(this.parent,this.filter,{...this.options,...this.cursorOptions})}async _initialize(e){let r=new oG.ListCollectionsOperation(this.parent,this.filter,{...this.cursorOptions,...this.options,session:e}),n=await(0,iG.executeOperation)(this.parent.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}};Sp.ListCollectionsCursor=h3});var ic=g(sc=>{"use strict";d();Object.defineProperty(sc,"__esModule",{value:!0});sc.RunAdminCommandOperation=sc.RunCommandOperation=void 0;var aG=ae(),o7=Ke(),d3=class extends o7.AbstractOperation{constructor(e,r,n){super(n),this.command=r,this.options=n,this.ns=e.s.namespace.withCollection("$cmd")}get commandName(){return"runCommand"}async execute(e,r,n){return this.server=e,await e.command(this.ns,this.command,{...this.options,readPreference:this.readPreference,session:r,timeoutContext:n},this.options.responseType)}};sc.RunCommandOperation=d3;var p3=class extends o7.AbstractOperation{constructor(e,r){super(r),this.command=e,this.options=r,this.ns=new aG.MongoDBNamespace("admin","$cmd")}get commandName(){return"runCommand"}async execute(e,r,n){return this.server=e,await e.command(this.ns,this.command,{...this.options,readPreference:this.readPreference,session:r,timeoutContext:n})}};sc.RunAdminCommandOperation=p3});var a7=g(Op=>{"use strict";d();Object.defineProperty(Op,"__esModule",{value:!0});Op.RunCommandCursor=void 0;var cG=Hs(),b1=Z(),u7=kr(),lG=c_(),hG=ic(),fG=ae(),dG=qr(),m3=class extends dG.AbstractCursor{setComment(e){return this.getMoreOptions.comment=e,this}setMaxTimeMS(e){return this.getMoreOptions.maxAwaitTimeMS=e,this}setBatchSize(e){return this.getMoreOptions.batchSize=e,this}clone(){throw new b1.MongoAPIError("Clone not supported, create a new cursor with db.runCursorCommand")}withReadConcern(e){throw new b1.MongoAPIError("RunCommandCursor does not support readConcern it must be attached to the command being run")}addCursorFlag(e,r){throw new b1.MongoAPIError("RunCommandCursor does not support cursor flags, they must be attached to the command being run")}maxTimeMS(e){throw new b1.MongoAPIError("maxTimeMS must be configured on the command document directly, to configure getMore.maxTimeMS use cursor.setMaxTimeMS()")}batchSize(e){throw new b1.MongoAPIError("batchSize must be configured on the command document directly, to configure getMore.batchSize use cursor.setBatchSize()")}constructor(e,r,n={}){super(e.client,(0,fG.ns)(e.namespace),n),this.getMoreOptions={},this.db=e,this.command=Object.freeze({...r})}async _initialize(e){let r=new hG.RunCommandOperation(this.db,this.command,{...this.cursorOptions,session:e,readPreference:this.cursorOptions.readPreference,responseType:cG.CursorResponse}),n=await(0,u7.executeOperation)(this.client,r,this.timeoutContext);return{server:r.server,session:e,response:n}}async getMore(e){let r=new lG.GetMoreOperation(this.namespace,this.id,this.server,{...this.cursorOptions,session:this.session,...this.getMoreOptions});return await(0,u7.executeOperation)(this.client,r,this.timeoutContext)}};Op.RunCommandCursor=m3});var c7=g(wp=>{"use strict";d();Object.defineProperty(wp,"__esModule",{value:!0});wp.CollectionsOperation=void 0;var pG=Xu(),mG=Ke(),y3=class extends mG.AbstractOperation{constructor(e,r){super(r),this.options=r,this.db=e}get commandName(){return"listCollections"}async execute(e,r){let n=await this.db.listCollections({},{...this.options,nameOnly:!0,readPreference:this.readPreference,session:r}).toArray(),s=[];for(let{name:i}of n)i.includes("$")||s.push(new pG.Collection(this.db,i,this.db.s.options));return s}};wp.CollectionsOperation=y3});var f7=g(bp=>{"use strict";d();Object.defineProperty(bp,"__esModule",{value:!0});bp.CreateCollectionOperation=void 0;var l7=Lu(),yG=Xu(),gG=Z(),EG=Pt(),_G=C1(),h7=Ke(),AG=new Set(["w","wtimeout","timeoutMS","j","fsync","autoIndexId","pkFactory","raw","readPreference","session","readConcern","writeConcern","raw","fieldsAsRaw","useBigInt64","promoteLongs","promoteValues","promoteBuffers","bsonRegExp","serializeFunctions","ignoreUndefined","enableUtf8Validation"]),SG="Driver support of Queryable Encryption is incompatible with server. Upgrade server to use Queryable Encryption.",Cp=class t extends EG.CommandOperation{constructor(e,r,n={}){super(e,n),this.options=n,this.db=e,this.name=r}get commandName(){return"create"}async execute(e,r,n){let s=this.db,i=this.name,o=this.options,u=o.encryptedFields??s.client.s.options.autoEncryption?.encryptedFieldsMap?.[`${s.databaseName}.${i}`];if(u){if(!e.loadBalanced&&e.description.maxWireVersion<l7.MIN_SUPPORTED_QE_WIRE_VERSION)throw new gG.MongoCompatibilityError(`${SG} The minimum server version required is ${l7.MIN_SUPPORTED_QE_SERVER_VERSION}`);let c=u.escCollection??`enxcol_.${i}.esc`,l=u.ecocCollection??`enxcol_.${i}.ecoc`;for(let h of[c,l])await new t(s,h,{clusteredIndex:{key:{_id:1},unique:!0}}).executeWithoutEncryptedFieldsCheck(e,r,n);o.encryptedFields||(this.options={...this.options,encryptedFields:u})}let a=await this.executeWithoutEncryptedFieldsCheck(e,r,n);return u&&await _G.CreateIndexesOperation.fromIndexSpecification(s,i,{__safeContent__:1},{}).execute(e,r,n),a}async executeWithoutEncryptedFieldsCheck(e,r,n){let s=this.db,i=this.name,o=this.options,u={create:i};for(let a in o)o[a]!=null&&typeof o[a]!="function"&&!AG.has(a)&&(u[a]=o[a]);return await super.executeCommand(e,r,u,n),new yG.Collection(s,i,o)}};bp.CreateCollectionOperation=Cp;(0,h7.defineAspects)(Cp,[h7.Aspect.WRITE_OPERATION])});var p7=g(Tp=>{"use strict";d();Object.defineProperty(Tp,"__esModule",{value:!0});Tp.ProfilingLevelOperation=void 0;var d7=Z(),OG=Pt(),g3=class extends OG.CommandOperation{constructor(e,r){super(e,r),this.options=r}get commandName(){return"profile"}async execute(e,r,n){let s=await super.executeCommand(e,r,{profile:-1},n);if(s.ok===1){let i=s.was;if(i===0)return"off";if(i===1)return"slow_only";if(i===2)return"all";throw new d7.MongoUnexpectedServerResponseError(`Illegal profiling level value ${i}`)}else throw new d7.MongoUnexpectedServerResponseError("Error with profile command")}};Tp.ProfilingLevelOperation=g3});var E3=g(Mp=>{"use strict";d();Object.defineProperty(Mp,"__esModule",{value:!0});Mp.RemoveUserOperation=void 0;var wG=Pt(),m7=Ke(),Dp=class extends wG.CommandOperation{constructor(e,r,n){super(e,n),this.options=n,this.username=r}get commandName(){return"dropUser"}async execute(e,r,n){return await super.executeCommand(e,r,{dropUser:this.username},n),!0}};Mp.RemoveUserOperation=Dp;(0,m7.defineAspects)(Dp,[m7.Aspect.WRITE_OPERATION])});var A3=g(Ai=>{"use strict";d();Object.defineProperty(Ai,"__esModule",{value:!0});Ai.SetProfilingLevelOperation=Ai.ProfilingLevel=void 0;var CG=Z(),bG=ae(),TG=Pt(),DG=new Set(["off","slow_only","all"]);Ai.ProfilingLevel=Object.freeze({off:"off",slowOnly:"slow_only",all:"all"});var _3=class extends TG.CommandOperation{constructor(e,r,n){switch(super(e,n),this.options=n,r){case Ai.ProfilingLevel.off:this.profile=0;break;case Ai.ProfilingLevel.slowOnly:this.profile=1;break;case Ai.ProfilingLevel.all:this.profile=2;break;default:this.profile=0;break}this.level=r}get commandName(){return"profile"}async execute(e,r,n){let s=this.level;if(!DG.has(s))throw new CG.MongoInvalidArgumentError(`Profiling level must be one of "${(0,bG.enumToString)(Ai.ProfilingLevel)}"`);return await super.executeCommand(e,r,{profile:this.profile},n),s}};Ai.SetProfilingLevelOperation=_3});var g7=g(Ip=>{"use strict";d();Object.defineProperty(Ip,"__esModule",{value:!0});Ip.DbStatsOperation=void 0;var MG=Pt(),y7=Ke(),Bp=class extends MG.CommandOperation{constructor(e,r){super(e,r),this.options=r}get commandName(){return"dbStats"}async execute(e,r,n){let s={dbStats:!0};return this.options.scale!=null&&(s.scale=this.options.scale),await super.executeCommand(e,r,s,n)}};Ip.DbStatsOperation=Bp;(0,y7.defineAspects)(Bp,[y7.Aspect.READ_OPERATION])});var Np=g(Pp=>{"use strict";d();Object.defineProperty(Pp,"__esModule",{value:!0});Pp.Db=void 0;var BG=S3(),E7=Ue(),IG=Zu(),PG=Xu(),oc=jt(),NG=O1(),FG=f3(),RG=a7(),_7=Z(),vG=c7(),$G=f7(),A7=W_(),Ks=kr(),xG=C1(),kG=p7(),qG=E3(),LG=X_(),jG=ic(),UG=A3(),VG=g7(),zG=ls(),S7=lr(),hr=ae(),WG=vr(),HG=["writeConcern","readPreference","readPreferenceTags","native_parser","forceServerObjectId","pkFactory","serializeFunctions","raw","authSource","ignoreUndefined","readConcern","retryMiliSeconds","numberOfRetries","useBigInt64","promoteBuffers","promoteLongs","bsonRegExp","enableUtf8Validation","promoteValues","compression","retryWrites","timeoutMS"],eo=class{constructor(e,r,n){if(n=n??{},n=(0,hr.filterOptions)(n,HG),typeof r=="string"&&r.includes("."))throw new _7.MongoInvalidArgumentError("Database names cannot contain the character '.'");this.s={options:n,readPreference:S7.ReadPreference.fromOptions(n),bsonOptions:(0,E7.resolveBSONOptions)(n,e),pkFactory:n?.pkFactory??hr.DEFAULT_PK_FACTORY,readConcern:zG.ReadConcern.fromOptions(n),writeConcern:WG.WriteConcern.fromOptions(n),namespace:new hr.MongoDBNamespace(r)},this.client=e}get databaseName(){return this.s.namespace.db}get options(){return this.s.options}get secondaryOk(){return this.s.readPreference?.preference!=="primary"||!1}get readConcern(){return this.s.readConcern}get readPreference(){return this.s.readPreference==null?this.client.readPreference:this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get writeConcern(){return this.s.writeConcern}get namespace(){return this.s.namespace.toString()}get timeoutMS(){return this.s.options?.timeoutMS}async createCollection(e,r){return await(0,Ks.executeOperation)(this.client,new $G.CreateCollectionOperation(this,e,(0,hr.resolveOptions)(this,r)))}async command(e,r){return await(0,Ks.executeOperation)(this.client,new jG.RunCommandOperation(this,e,(0,hr.resolveOptions)(void 0,{...(0,E7.resolveBSONOptions)(r),timeoutMS:r?.timeoutMS??this.timeoutMS,session:r?.session,readPreference:r?.readPreference})))}aggregate(e=[],r){return new NG.AggregationCursor(this.client,this.s.namespace,e,(0,hr.resolveOptions)(this,r))}admin(){return new BG.Admin(this)}collection(e,r={}){if(typeof r=="function")throw new _7.MongoInvalidArgumentError("The callback form of this helper has been removed.");return new PG.Collection(this,e,(0,hr.resolveOptions)(this,r))}async stats(e){return await(0,Ks.executeOperation)(this.client,new VG.DbStatsOperation(this,(0,hr.resolveOptions)(this,e)))}listCollections(e={},r={}){return new FG.ListCollectionsCursor(this,e,(0,hr.resolveOptions)(this,r))}async renameCollection(e,r,n){return await(0,Ks.executeOperation)(this.client,new LG.RenameOperation(this.collection(e),r,(0,hr.resolveOptions)(void 0,{...n,new_collection:!0,readPreference:S7.ReadPreference.primary})))}async dropCollection(e,r){return await(0,Ks.executeOperation)(this.client,new A7.DropCollectionOperation(this,e,(0,hr.resolveOptions)(this,r)))}async dropDatabase(e){return await(0,Ks.executeOperation)(this.client,new A7.DropDatabaseOperation(this,(0,hr.resolveOptions)(this,e)))}async collections(e){return await(0,Ks.executeOperation)(this.client,new vG.CollectionsOperation(this,(0,hr.resolveOptions)(this,e)))}async createIndex(e,r,n){return(await(0,Ks.executeOperation)(this.client,xG.CreateIndexesOperation.fromIndexSpecification(this,e,r,n)))[0]}async removeUser(e,r){return await(0,Ks.executeOperation)(this.client,new qG.RemoveUserOperation(this,e,(0,hr.resolveOptions)(this,r)))}async setProfilingLevel(e,r){return await(0,Ks.executeOperation)(this.client,new UG.SetProfilingLevelOperation(this,e,(0,hr.resolveOptions)(this,r)))}async profilingLevel(e){return await(0,Ks.executeOperation)(this.client,new kG.ProfilingLevelOperation(this,(0,hr.resolveOptions)(this,e)))}async indexInformation(e,r){return await this.collection(e).indexInformation((0,hr.resolveOptions)(this,r))}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new IG.ChangeStream(this,e,(0,hr.resolveOptions)(this,r))}runCursorCommand(e,r){return new RG.RunCommandCursor(this,e,r)}};Pp.Db=eo;eo.SYSTEM_NAMESPACE_COLLECTION=oc.SYSTEM_NAMESPACE_COLLECTION;eo.SYSTEM_INDEX_COLLECTION=oc.SYSTEM_INDEX_COLLECTION;eo.SYSTEM_PROFILE_COLLECTION=oc.SYSTEM_PROFILE_COLLECTION;eo.SYSTEM_USER_COLLECTION=oc.SYSTEM_USER_COLLECTION;eo.SYSTEM_COMMAND_COLLECTION=oc.SYSTEM_COMMAND_COLLECTION;eo.SYSTEM_JS_COLLECTION=oc.SYSTEM_JS_COLLECTION});var Zu=g(Rp=>{"use strict";d();Object.defineProperty(Rp,"__esModule",{value:!0});Rp.ChangeStream=void 0;var GG=Xu(),Ys=jt(),KG=qr(),YG=l3(),QG=Np(),fr=Z(),JG=Jo(),XG=Hn(),ZG=cc(),eK=$r(),Si=ae(),uc=Symbol("cursorStream"),ac=Symbol("closed"),T1=Symbol("mode"),tK=["resumeAfter","startAfter","startAtOperationTime","fullDocument","fullDocumentBeforeChange","showExpandedEvents"],ea={COLLECTION:Symbol("Collection"),DATABASE:Symbol("Database"),CLUSTER:Symbol("Cluster")},rK=[Ys.RESUME_TOKEN_CHANGED,Ys.END,Ys.CLOSE],nK="A change stream document has been received that lacks a resume token (_id).",Fp="ChangeStream is closed",gs=class t extends XG.TypedEventEmitter{async asyncDispose(){await this.close()}constructor(e,r=[],n={}){super(),this.pipeline=r,this.options={...n};let s;if(delete this.options.writeConcern,e instanceof GG.Collection)this.type=ea.COLLECTION,s=e.s.db.client.options.serverSelectionTimeoutMS;else if(e instanceof QG.Db)this.type=ea.DATABASE,s=e.client.options.serverSelectionTimeoutMS;else if(e instanceof JG.MongoClient)this.type=ea.CLUSTER,s=e.options.serverSelectionTimeoutMS;else throw new fr.MongoChangeStreamError("Parent provided to ChangeStream constructor must be an instance of Collection, Db, or MongoClient");this.contextOwner=Symbol(),this.parent=e,this.namespace=e.s.namespace,!this.options.readPreference&&e.readPreference&&(this.options.readPreference=e.readPreference),this.cursor=this._createChangeStreamCursor(n),this[ac]=!1,this[T1]=!1,this.on("newListener",i=>{i==="change"&&this.cursor&&this.listenerCount("change")===0&&this._streamEvents(this.cursor)}),this.on("removeListener",i=>{i==="change"&&this.listenerCount("change")===0&&this.cursor&&this[uc]?.removeAllListeners("data")}),this.options.timeoutMS!=null&&(this.timeoutContext=new eK.CSOTTimeoutContext({timeoutMS:this.options.timeoutMS,serverSelectionTimeoutMS:s}))}get cursorStream(){return this[uc]}get resumeToken(){return this.cursor?.resumeToken}async hasNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{return await this.cursor.hasNext()}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof fr.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Si.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async next(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{let e=await this.cursor.next();return this._processChange(e??null)}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof fr.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Si.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async tryNext(){this._setIsIterator(),this.timeoutContext?.refresh();try{for(;;)try{return await this.cursor.tryNext()??null}catch(e){try{await this._processErrorIteratorMode(e,this.cursor.id!=null)}catch(r){if(r instanceof fr.MongoOperationTimeoutError&&this.cursor.id==null)throw r;try{await this.close()}catch(n){(0,Si.squashError)(n)}throw r}}}finally{this.timeoutContext?.clear()}}async*[Symbol.asyncIterator](){if(!this.closed)try{for(;;)yield await this.next()}finally{try{await this.close()}catch(e){(0,Si.squashError)(e)}}}get closed(){return this[ac]||this.cursor.closed}async close(){this.timeoutContext?.clear(),this.timeoutContext=void 0,this[ac]=!0;let e=this.cursor;try{await e.close()}finally{this._endStream()}}stream(e){if(this.closed)throw new fr.MongoChangeStreamError(Fp);return this.streamOptions=e,this.cursor.stream(e)}_setIsEmitter(){if(this[T1]==="iterator")throw new fr.MongoAPIError("ChangeStream cannot be used as an EventEmitter after being used as an iterator");this[T1]="emitter"}_setIsIterator(){if(this[T1]==="emitter")throw new fr.MongoAPIError("ChangeStream cannot be used as an iterator after being used as an EventEmitter");this[T1]="iterator"}_createChangeStreamCursor(e){let r=(0,Si.filterOptions)(e,tK);this.type===ea.CLUSTER&&(r.allChangesForCluster=!0);let n=[{$changeStream:r},...this.pipeline],s=this.type===ea.CLUSTER?this.parent:this.type===ea.DATABASE?this.parent.client:this.type===ea.COLLECTION?this.parent.client:null;if(s==null)throw new fr.MongoRuntimeError(`Changestream type should only be one of cluster, database, collection. Found ${this.type.toString()}`);let i=new YG.ChangeStreamCursor(s,this.namespace,n,{...e,timeoutContext:this.timeoutContext?new KG.CursorTimeoutContext(this.timeoutContext,this.contextOwner):void 0});for(let o of rK)i.on(o,u=>this.emit(o,u));return this.listenerCount(t.CHANGE)>0&&this._streamEvents(i),i}_closeEmitterModeWithError(e){this.emit(t.ERROR,e),this.close().then(void 0,Si.squashError)}_streamEvents(e){this._setIsEmitter();let r=this[uc]??e.stream();this[uc]=r,r.on("data",n=>{try{let s=this._processChange(n);this.emit(t.CHANGE,s)}catch(s){this.emit(t.ERROR,s)}this.timeoutContext?.refresh()}),r.on("error",n=>this._processErrorStreamMode(n,this.cursor.id!=null))}_endStream(){let e=this[uc];e&&(["data","close","end","error"].forEach(r=>e.removeAllListeners(r)),e.destroy()),this[uc]=void 0}_processChange(e){if(this[ac])throw new fr.MongoAPIError(Fp);if(e==null)throw new fr.MongoRuntimeError(Fp);if(e&&!e._id)throw new fr.MongoChangeStreamError(nK);return this.cursor.cacheResumeToken(e._id),this.options.startAtOperationTime=void 0,e}_processErrorStreamMode(e,r){this[ac]||(r&&((0,fr.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof fr.MongoOperationTimeoutError)?(this._endStream(),this.cursor.close().then(()=>this._resume(e),n=>((0,Si.squashError)(n),this._resume(e))).then(()=>{e instanceof fr.MongoOperationTimeoutError&&this.emit(t.ERROR,e)},()=>this._closeEmitterModeWithError(e))):this._closeEmitterModeWithError(e))}async _processErrorIteratorMode(e,r){if(this[ac])throw new fr.MongoAPIError(Fp);if(r&&((0,fr.isResumableError)(e,this.cursor.maxWireVersion)||e instanceof fr.MongoOperationTimeoutError)){try{await this.cursor.close()}catch(n){(0,Si.squashError)(n)}if(await this._resume(e),e instanceof fr.MongoOperationTimeoutError)throw e}else{try{await this.close()}catch(n){(0,Si.squashError)(n)}throw e}}async _resume(e){this.timeoutContext?.refresh();let r=(0,Si.getTopology)(this.parent);try{await r.selectServer(this.cursor.readPreference,{operationName:"reconnect topology in change stream",timeoutContext:this.timeoutContext}),this.cursor=this._createChangeStreamCursor(this.cursor.resumeOptions)}catch{throw await this.close(),e}}};Rp.ChangeStream=gs;gs.RESPONSE=Ys.RESPONSE;gs.MORE=Ys.MORE;gs.INIT=Ys.INIT;gs.CLOSE=Ys.CLOSE;gs.CHANGE=Ys.CHANGE;gs.END=Ys.END;gs.ERROR=Ys.ERROR;gs.RESUME_TOKEN_CHANGED=Ys.RESUME_TOKEN_CHANGED;(0,ZG.configureResourceManagement)(gs.prototype)});var b7=g(to=>{"use strict";d();Object.defineProperty(to,"__esModule",{value:!0});var O7=require("buffer"),ta={INVALID_ENCODING:"Invalid encoding provided. Please specify a valid encoding the internal Node.js Buffer supports.",INVALID_SMARTBUFFER_SIZE:"Invalid size provided. Size must be a valid integer greater than zero.",INVALID_SMARTBUFFER_BUFFER:"Invalid Buffer provided in SmartBufferOptions.",INVALID_SMARTBUFFER_OBJECT:"Invalid SmartBufferOptions object supplied to SmartBuffer constructor or factory methods.",INVALID_OFFSET:"An invalid offset value was provided.",INVALID_OFFSET_NON_NUMBER:"An invalid offset value was provided. A numeric value is required.",INVALID_LENGTH:"An invalid length value was provided.",INVALID_LENGTH_NON_NUMBER:"An invalid length value was provived. A numeric value is required.",INVALID_TARGET_OFFSET:"Target offset is beyond the bounds of the internal SmartBuffer data.",INVALID_TARGET_LENGTH:"Specified length value moves cursor beyong the bounds of the internal SmartBuffer data.",INVALID_READ_BEYOND_BOUNDS:"Attempted to read beyond the bounds of the managed data.",INVALID_WRITE_BEYOND_BOUNDS:"Attempted to write beyond the bounds of the managed data."};to.ERRORS=ta;function sK(t){if(!O7.Buffer.isEncoding(t))throw new Error(ta.INVALID_ENCODING)}to.checkEncoding=sK;function w7(t){return typeof t=="number"&&isFinite(t)&&aK(t)}to.isFiniteInteger=w7;function C7(t,e){if(typeof t=="number"){if(!w7(t)||t<0)throw new Error(e?ta.INVALID_OFFSET:ta.INVALID_LENGTH)}else throw new Error(e?ta.INVALID_OFFSET_NON_NUMBER:ta.INVALID_LENGTH_NON_NUMBER)}function iK(t){C7(t,!1)}to.checkLengthValue=iK;function oK(t){C7(t,!0)}to.checkOffsetValue=oK;function uK(t,e){if(t<0||t>e.length)throw new Error(ta.INVALID_TARGET_OFFSET)}to.checkTargetOffset=uK;function aK(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function cK(t){if(typeof BigInt>"u")throw new Error("Platform does not support JS BigInt type.");if(typeof O7.Buffer.prototype[t]>"u")throw new Error(`Platform does not support Buffer.prototype.${t}.`)}to.bigIntAndBufferInt64Check=cK});var D7=g(w3=>{"use strict";d();Object.defineProperty(w3,"__esModule",{value:!0});var be=b7(),T7=4096,lK="utf8",O3=class t{constructor(e){if(this.length=0,this._encoding=lK,this._writeOffset=0,this._readOffset=0,t.isSmartBufferOptions(e))if(e.encoding&&(be.checkEncoding(e.encoding),this._encoding=e.encoding),e.size)if(be.isFiniteInteger(e.size)&&e.size>0)this._buff=Buffer.allocUnsafe(e.size);else throw new Error(be.ERRORS.INVALID_SMARTBUFFER_SIZE);else if(e.buff)if(Buffer.isBuffer(e.buff))this._buff=e.buff,this.length=e.buff.length;else throw new Error(be.ERRORS.INVALID_SMARTBUFFER_BUFFER);else this._buff=Buffer.allocUnsafe(T7);else{if(typeof e<"u")throw new Error(be.ERRORS.INVALID_SMARTBUFFER_OBJECT);this._buff=Buffer.allocUnsafe(T7)}}static fromSize(e,r){return new this({size:e,encoding:r})}static fromBuffer(e,r){return new this({buff:e,encoding:r})}static fromOptions(e){return new this(e)}static isSmartBufferOptions(e){let r=e;return r&&(r.encoding!==void 0||r.size!==void 0||r.buff!==void 0)}readInt8(e){return this._readNumberValue(Buffer.prototype.readInt8,1,e)}readInt16BE(e){return this._readNumberValue(Buffer.prototype.readInt16BE,2,e)}readInt16LE(e){return this._readNumberValue(Buffer.prototype.readInt16LE,2,e)}readInt32BE(e){return this._readNumberValue(Buffer.prototype.readInt32BE,4,e)}readInt32LE(e){return this._readNumberValue(Buffer.prototype.readInt32LE,4,e)}readBigInt64BE(e){return be.bigIntAndBufferInt64Check("readBigInt64BE"),this._readNumberValue(Buffer.prototype.readBigInt64BE,8,e)}readBigInt64LE(e){return be.bigIntAndBufferInt64Check("readBigInt64LE"),this._readNumberValue(Buffer.prototype.readBigInt64LE,8,e)}writeInt8(e,r){return this._writeNumberValue(Buffer.prototype.writeInt8,1,e,r),this}insertInt8(e,r){return this._insertNumberValue(Buffer.prototype.writeInt8,1,e,r)}writeInt16BE(e,r){return this._writeNumberValue(Buffer.prototype.writeInt16BE,2,e,r)}insertInt16BE(e,r){return this._insertNumberValue(Buffer.prototype.writeInt16BE,2,e,r)}writeInt16LE(e,r){return this._writeNumberValue(Buffer.prototype.writeInt16LE,2,e,r)}insertInt16LE(e,r){return this._insertNumberValue(Buffer.prototype.writeInt16LE,2,e,r)}writeInt32BE(e,r){return this._writeNumberValue(Buffer.prototype.writeInt32BE,4,e,r)}insertInt32BE(e,r){return this._insertNumberValue(Buffer.prototype.writeInt32BE,4,e,r)}writeInt32LE(e,r){return this._writeNumberValue(Buffer.prototype.writeInt32LE,4,e,r)}insertInt32LE(e,r){return this._insertNumberValue(Buffer.prototype.writeInt32LE,4,e,r)}writeBigInt64BE(e,r){return be.bigIntAndBufferInt64Check("writeBigInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigInt64BE,8,e,r)}insertBigInt64BE(e,r){return be.bigIntAndBufferInt64Check("writeBigInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigInt64BE,8,e,r)}writeBigInt64LE(e,r){return be.bigIntAndBufferInt64Check("writeBigInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigInt64LE,8,e,r)}insertBigInt64LE(e,r){return be.bigIntAndBufferInt64Check("writeBigInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigInt64LE,8,e,r)}readUInt8(e){return this._readNumberValue(Buffer.prototype.readUInt8,1,e)}readUInt16BE(e){return this._readNumberValue(Buffer.prototype.readUInt16BE,2,e)}readUInt16LE(e){return this._readNumberValue(Buffer.prototype.readUInt16LE,2,e)}readUInt32BE(e){return this._readNumberValue(Buffer.prototype.readUInt32BE,4,e)}readUInt32LE(e){return this._readNumberValue(Buffer.prototype.readUInt32LE,4,e)}readBigUInt64BE(e){return be.bigIntAndBufferInt64Check("readBigUInt64BE"),this._readNumberValue(Buffer.prototype.readBigUInt64BE,8,e)}readBigUInt64LE(e){return be.bigIntAndBufferInt64Check("readBigUInt64LE"),this._readNumberValue(Buffer.prototype.readBigUInt64LE,8,e)}writeUInt8(e,r){return this._writeNumberValue(Buffer.prototype.writeUInt8,1,e,r)}insertUInt8(e,r){return this._insertNumberValue(Buffer.prototype.writeUInt8,1,e,r)}writeUInt16BE(e,r){return this._writeNumberValue(Buffer.prototype.writeUInt16BE,2,e,r)}insertUInt16BE(e,r){return this._insertNumberValue(Buffer.prototype.writeUInt16BE,2,e,r)}writeUInt16LE(e,r){return this._writeNumberValue(Buffer.prototype.writeUInt16LE,2,e,r)}insertUInt16LE(e,r){return this._insertNumberValue(Buffer.prototype.writeUInt16LE,2,e,r)}writeUInt32BE(e,r){return this._writeNumberValue(Buffer.prototype.writeUInt32BE,4,e,r)}insertUInt32BE(e,r){return this._insertNumberValue(Buffer.prototype.writeUInt32BE,4,e,r)}writeUInt32LE(e,r){return this._writeNumberValue(Buffer.prototype.writeUInt32LE,4,e,r)}insertUInt32LE(e,r){return this._insertNumberValue(Buffer.prototype.writeUInt32LE,4,e,r)}writeBigUInt64BE(e,r){return be.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64BE,8,e,r)}insertBigUInt64BE(e,r){return be.bigIntAndBufferInt64Check("writeBigUInt64BE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64BE,8,e,r)}writeBigUInt64LE(e,r){return be.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._writeNumberValue(Buffer.prototype.writeBigUInt64LE,8,e,r)}insertBigUInt64LE(e,r){return be.bigIntAndBufferInt64Check("writeBigUInt64LE"),this._insertNumberValue(Buffer.prototype.writeBigUInt64LE,8,e,r)}readFloatBE(e){return this._readNumberValue(Buffer.prototype.readFloatBE,4,e)}readFloatLE(e){return this._readNumberValue(Buffer.prototype.readFloatLE,4,e)}writeFloatBE(e,r){return this._writeNumberValue(Buffer.prototype.writeFloatBE,4,e,r)}insertFloatBE(e,r){return this._insertNumberValue(Buffer.prototype.writeFloatBE,4,e,r)}writeFloatLE(e,r){return this._writeNumberValue(Buffer.prototype.writeFloatLE,4,e,r)}insertFloatLE(e,r){return this._insertNumberValue(Buffer.prototype.writeFloatLE,4,e,r)}readDoubleBE(e){return this._readNumberValue(Buffer.prototype.readDoubleBE,8,e)}readDoubleLE(e){return this._readNumberValue(Buffer.prototype.readDoubleLE,8,e)}writeDoubleBE(e,r){return this._writeNumberValue(Buffer.prototype.writeDoubleBE,8,e,r)}insertDoubleBE(e,r){return this._insertNumberValue(Buffer.prototype.writeDoubleBE,8,e,r)}writeDoubleLE(e,r){return this._writeNumberValue(Buffer.prototype.writeDoubleLE,8,e,r)}insertDoubleLE(e,r){return this._insertNumberValue(Buffer.prototype.writeDoubleLE,8,e,r)}readString(e,r){let n;typeof e=="number"?(be.checkLengthValue(e),n=Math.min(e,this.length-this._readOffset)):(r=e,n=this.length-this._readOffset),typeof r<"u"&&be.checkEncoding(r);let s=this._buff.slice(this._readOffset,this._readOffset+n).toString(r||this._encoding);return this._readOffset+=n,s}insertString(e,r,n){return be.checkOffsetValue(r),this._handleString(e,!0,r,n)}writeString(e,r,n){return this._handleString(e,!1,r,n)}readStringNT(e){typeof e<"u"&&be.checkEncoding(e);let r=this.length;for(let s=this._readOffset;s<this.length;s++)if(this._buff[s]===0){r=s;break}let n=this._buff.slice(this._readOffset,r);return this._readOffset=r+1,n.toString(e||this._encoding)}insertStringNT(e,r,n){return be.checkOffsetValue(r),this.insertString(e,r,n),this.insertUInt8(0,r+e.length),this}writeStringNT(e,r,n){return this.writeString(e,r,n),this.writeUInt8(0,typeof r=="number"?r+e.length:this.writeOffset),this}readBuffer(e){typeof e<"u"&&be.checkLengthValue(e);let r=typeof e=="number"?e:this.length,n=Math.min(this.length,this._readOffset+r),s=this._buff.slice(this._readOffset,n);return this._readOffset=n,s}insertBuffer(e,r){return be.checkOffsetValue(r),this._handleBuffer(e,!0,r)}writeBuffer(e,r){return this._handleBuffer(e,!1,r)}readBufferNT(){let e=this.length;for(let n=this._readOffset;n<this.length;n++)if(this._buff[n]===0){e=n;break}let r=this._buff.slice(this._readOffset,e);return this._readOffset=e+1,r}insertBufferNT(e,r){return be.checkOffsetValue(r),this.insertBuffer(e,r),this.insertUInt8(0,r+e.length),this}writeBufferNT(e,r){return typeof r<"u"&&be.checkOffsetValue(r),this.writeBuffer(e,r),this.writeUInt8(0,typeof r=="number"?r+e.length:this._writeOffset),this}clear(){return this._writeOffset=0,this._readOffset=0,this.length=0,this}remaining(){return this.length-this._readOffset}get readOffset(){return this._readOffset}set readOffset(e){be.checkOffsetValue(e),be.checkTargetOffset(e,this),this._readOffset=e}get writeOffset(){return this._writeOffset}set writeOffset(e){be.checkOffsetValue(e),be.checkTargetOffset(e,this),this._writeOffset=e}get encoding(){return this._encoding}set encoding(e){be.checkEncoding(e),this._encoding=e}get internalBuffer(){return this._buff}toBuffer(){return this._buff.slice(0,this.length)}toString(e){let r=typeof e=="string"?e:this._encoding;return be.checkEncoding(r),this._buff.toString(r,0,this.length)}destroy(){return this.clear(),this}_handleString(e,r,n,s){let i=this._writeOffset,o=this._encoding;typeof n=="number"?i=n:typeof n=="string"&&(be.checkEncoding(n),o=n),typeof s=="string"&&(be.checkEncoding(s),o=s);let u=Buffer.byteLength(e,o);return r?this.ensureInsertable(u,i):this._ensureWriteable(u,i),this._buff.write(e,i,u,o),r?this._writeOffset+=u:typeof n=="number"?this._writeOffset=Math.max(this._writeOffset,i+u):this._writeOffset+=u,this}_handleBuffer(e,r,n){let s=typeof n=="number"?n:this._writeOffset;return r?this.ensureInsertable(e.length,s):this._ensureWriteable(e.length,s),e.copy(this._buff,s),r?this._writeOffset+=e.length:typeof n=="number"?this._writeOffset=Math.max(this._writeOffset,s+e.length):this._writeOffset+=e.length,this}ensureReadable(e,r){let n=this._readOffset;if(typeof r<"u"&&(be.checkOffsetValue(r),n=r),n<0||n+e>this.length)throw new Error(be.ERRORS.INVALID_READ_BEYOND_BOUNDS)}ensureInsertable(e,r){be.checkOffsetValue(r),this._ensureCapacity(this.length+e),r<this.length&&this._buff.copy(this._buff,r+e,r,this._buff.length),r+e>this.length?this.length=r+e:this.length+=e}_ensureWriteable(e,r){let n=typeof r=="number"?r:this._writeOffset;this._ensureCapacity(n+e),n+e>this.length&&(this.length=n+e)}_ensureCapacity(e){let r=this._buff.length;if(e>r){let n=this._buff,s=r*3/2+1;s<e&&(s=e),this._buff=Buffer.allocUnsafe(s),n.copy(this._buff,0,0,r)}}_readNumberValue(e,r,n){this.ensureReadable(r,n);let s=e.call(this._buff,typeof n=="number"?n:this._readOffset);return typeof n>"u"&&(this._readOffset+=r),s}_insertNumberValue(e,r,n,s){return be.checkOffsetValue(s),this.ensureInsertable(r,s),e.call(this._buff,n,s),this._writeOffset+=r,this}_writeNumberValue(e,r,n,s){if(typeof s=="number"){if(s<0)throw new Error(be.ERRORS.INVALID_WRITE_BEYOND_BOUNDS);be.checkOffsetValue(s)}let i=typeof s=="number"?s:this._writeOffset;return this._ensureWriteable(r,i),e.call(this._buff,n,i),typeof s=="number"?this._writeOffset=Math.max(this._writeOffset,i+r):this._writeOffset+=r,this}};w3.SmartBuffer=O3});var C3=g(ht=>{"use strict";d();Object.defineProperty(ht,"__esModule",{value:!0});ht.SOCKS5_NO_ACCEPTABLE_AUTH=ht.SOCKS5_CUSTOM_AUTH_END=ht.SOCKS5_CUSTOM_AUTH_START=ht.SOCKS_INCOMING_PACKET_SIZES=ht.SocksClientState=ht.Socks5Response=ht.Socks5HostType=ht.Socks5Auth=ht.Socks4Response=ht.SocksCommand=ht.ERRORS=ht.DEFAULT_TIMEOUT=void 0;var hK=3e4;ht.DEFAULT_TIMEOUT=hK;var fK={InvalidSocksCommand:"An invalid SOCKS command was provided. Valid options are connect, bind, and associate.",InvalidSocksCommandForOperation:"An invalid SOCKS command was provided. Only a subset of commands are supported for this operation.",InvalidSocksCommandChain:"An invalid SOCKS command was provided. Chaining currently only supports the connect command.",InvalidSocksClientOptionsDestination:"An invalid destination host was provided.",InvalidSocksClientOptionsExistingSocket:"An invalid existing socket was provided. This should be an instance of stream.Duplex.",InvalidSocksClientOptionsProxy:"Invalid SOCKS proxy details were provided.",InvalidSocksClientOptionsTimeout:"An invalid timeout value was provided. Please enter a value above 0 (in ms).",InvalidSocksClientOptionsProxiesLength:"At least two socks proxies must be provided for chaining.",InvalidSocksClientOptionsCustomAuthRange:"Custom auth must be a value between 0x80 and 0xFE.",InvalidSocksClientOptionsCustomAuthOptions:"When a custom_auth_method is provided, custom_auth_request_handler, custom_auth_response_size, and custom_auth_response_handler must also be provided and valid.",NegotiationError:"Negotiation error",SocketClosed:"Socket closed",ProxyConnectionTimedOut:"Proxy connection timed out",InternalError:"SocksClient internal error (this should not happen)",InvalidSocks4HandshakeResponse:"Received invalid Socks4 handshake response",Socks4ProxyRejectedConnection:"Socks4 Proxy rejected connection",InvalidSocks4IncomingConnectionResponse:"Socks4 invalid incoming connection response",Socks4ProxyRejectedIncomingBoundConnection:"Socks4 Proxy rejected incoming bound connection",InvalidSocks5InitialHandshakeResponse:"Received invalid Socks5 initial handshake response",InvalidSocks5IntiailHandshakeSocksVersion:"Received invalid Socks5 initial handshake (invalid socks version)",InvalidSocks5InitialHandshakeNoAcceptedAuthType:"Received invalid Socks5 initial handshake (no accepted authentication type)",InvalidSocks5InitialHandshakeUnknownAuthType:"Received invalid Socks5 initial handshake (unknown authentication type)",Socks5AuthenticationFailed:"Socks5 Authentication failed",InvalidSocks5FinalHandshake:"Received invalid Socks5 final handshake response",InvalidSocks5FinalHandshakeRejected:"Socks5 proxy rejected connection",InvalidSocks5IncomingConnectionResponse:"Received invalid Socks5 incoming connection response",Socks5ProxyRejectedIncomingBoundConnection:"Socks5 Proxy rejected incoming bound connection"};ht.ERRORS=fK;var dK={Socks5InitialHandshakeResponse:2,Socks5UserPassAuthenticationResponse:2,Socks5ResponseHeader:5,Socks5ResponseIPv4:10,Socks5ResponseIPv6:22,Socks5ResponseHostname:t=>t+7,Socks4Response:8};ht.SOCKS_INCOMING_PACKET_SIZES=dK;var M7;(function(t){t[t.connect=1]="connect",t[t.bind=2]="bind",t[t.associate=3]="associate"})(M7||(ht.SocksCommand=M7={}));var B7;(function(t){t[t.Granted=90]="Granted",t[t.Failed=91]="Failed",t[t.Rejected=92]="Rejected",t[t.RejectedIdent=93]="RejectedIdent"})(B7||(ht.Socks4Response=B7={}));var I7;(function(t){t[t.NoAuth=0]="NoAuth",t[t.GSSApi=1]="GSSApi",t[t.UserPass=2]="UserPass"})(I7||(ht.Socks5Auth=I7={}));var pK=128;ht.SOCKS5_CUSTOM_AUTH_START=pK;var mK=254;ht.SOCKS5_CUSTOM_AUTH_END=mK;var yK=255;ht.SOCKS5_NO_ACCEPTABLE_AUTH=yK;var P7;(function(t){t[t.Granted=0]="Granted",t[t.Failure=1]="Failure",t[t.NotAllowed=2]="NotAllowed",t[t.NetworkUnreachable=3]="NetworkUnreachable",t[t.HostUnreachable=4]="HostUnreachable",t[t.ConnectionRefused=5]="ConnectionRefused",t[t.TTLExpired=6]="TTLExpired",t[t.CommandNotSupported=7]="CommandNotSupported",t[t.AddressNotSupported=8]="AddressNotSupported"})(P7||(ht.Socks5Response=P7={}));var N7;(function(t){t[t.IPv4=1]="IPv4",t[t.Hostname=3]="Hostname",t[t.IPv6=4]="IPv6"})(N7||(ht.Socks5HostType=N7={}));var F7;(function(t){t[t.Created=0]="Created",t[t.Connecting=1]="Connecting",t[t.Connected=2]="Connected",t[t.SentInitialHandshake=3]="SentInitialHandshake",t[t.ReceivedInitialHandshakeResponse=4]="ReceivedInitialHandshakeResponse",t[t.SentAuthentication=5]="SentAuthentication",t[t.ReceivedAuthenticationResponse=6]="ReceivedAuthenticationResponse",t[t.SentFinalHandshake=7]="SentFinalHandshake",t[t.ReceivedFinalResponse=8]="ReceivedFinalResponse",t[t.BoundWaitingForConnection=9]="BoundWaitingForConnection",t[t.Established=10]="Established",t[t.Disconnected=11]="Disconnected",t[t.Error=99]="Error"})(F7||(ht.SocksClientState=F7={}))});var T3=g(lc=>{"use strict";d();Object.defineProperty(lc,"__esModule",{value:!0});lc.shuffleArray=lc.SocksClientError=void 0;var b3=class extends Error{constructor(e,r){super(e),this.options=r}};lc.SocksClientError=b3;function gK(t){for(let e=t.length-1;e>0;e--){let r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}}lc.shuffleArray=gK});var D3=g(hc=>{"use strict";d();Object.defineProperty(hc,"__esModule",{value:!0});hc.isCorrect=hc.isInSubnet=void 0;function EK(t){return this.subnetMask<t.subnetMask?!1:this.mask(t.subnetMask)===t.mask()}hc.isInSubnet=EK;function _K(t){return function(){return this.addressMinusSuffix!==this.correctForm()?!1:this.subnetMask===t&&!this.parsedSubnet?!0:this.parsedSubnet===String(this.subnetMask)}}hc.isCorrect=_K});var M3=g(Oi=>{"use strict";d();Object.defineProperty(Oi,"__esModule",{value:!0});Oi.RE_SUBNET_STRING=Oi.RE_ADDRESS=Oi.GROUPS=Oi.BITS=void 0;Oi.BITS=32;Oi.GROUPS=4;Oi.RE_ADDRESS=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g;Oi.RE_SUBNET_STRING=/\/\d{1,2}$/});var $p=g(vp=>{"use strict";d();Object.defineProperty(vp,"__esModule",{value:!0});vp.AddressError=void 0;var B3=class extends Error{constructor(e,r){super(e),this.name="AddressError",r!==null&&(this.parseMessage=r)}};vp.AddressError=B3});var I3=g((xp,R7)=>{d();(function(){var t,e=0xdeadbeefcafe,r=(e&16777215)==15715070;function n(E,_,w){E!=null&&(typeof E=="number"?this.fromNumber(E,_,w):_==null&&typeof E!="string"?this.fromString(E,256):this.fromString(E,_))}function s(){return new n(null)}function i(E,_,w,B,K,Y){for(;--Y>=0;){var ie=_*this[E++]+w[B]+K;K=Math.floor(ie/67108864),w[B++]=ie&67108863}return K}function o(E,_,w,B,K,Y){for(var ie=_&32767,ue=_>>15;--Y>=0;){var _t=this[E]&32767,ar=this[E++]>>15,is=ue*_t+ar*ie;_t=ie*_t+((is&32767)<<15)+w[B]+(K&1073741823),K=(_t>>>30)+(is>>>15)+ue*ar+(K>>>30),w[B++]=_t&1073741823}return K}function u(E,_,w,B,K,Y){for(var ie=_&16383,ue=_>>14;--Y>=0;){var _t=this[E]&16383,ar=this[E++]>>14,is=ue*_t+ar*ie;_t=ie*_t+((is&16383)<<14)+w[B]+K,K=(_t>>28)+(is>>14)+ue*ar,w[B++]=_t&268435455}return K}var a=typeof navigator<"u";a&&r&&navigator.appName=="Microsoft Internet Explorer"?(n.prototype.am=o,t=30):a&&r&&navigator.appName!="Netscape"?(n.prototype.am=i,t=26):(n.prototype.am=u,t=28),n.prototype.DB=t,n.prototype.DM=(1<<t)-1,n.prototype.DV=1<<t;var c=52;n.prototype.FV=Math.pow(2,c),n.prototype.F1=c-t,n.prototype.F2=2*t-c;var l="0123456789abcdefghijklmnopqrstuvwxyz",h=new Array,f,p;for(f=48,p=0;p<=9;++p)h[f++]=p;for(f=97,p=10;p<36;++p)h[f++]=p;for(f=65,p=10;p<36;++p)h[f++]=p;function m(E){return l.charAt(E)}function y(E,_){var w=h[E.charCodeAt(_)];return w??-1}function A(E){for(var _=this.t-1;_>=0;--_)E[_]=this[_];E.t=this.t,E.s=this.s}function S(E){this.t=1,this.s=E<0?-1:0,E>0?this[0]=E:E<-1?this[0]=E+this.DV:this.t=0}function O(E){var _=s();return _.fromInt(E),_}function D(E,_){var w;if(_==16)w=4;else if(_==8)w=3;else if(_==256)w=8;else if(_==2)w=1;else if(_==32)w=5;else if(_==4)w=2;else{this.fromRadix(E,_);return}this.t=0,this.s=0;for(var B=E.length,K=!1,Y=0;--B>=0;){var ie=w==8?E[B]&255:y(E,B);if(ie<0){E.charAt(B)=="-"&&(K=!0);continue}K=!1,Y==0?this[this.t++]=ie:Y+w>this.DB?(this[this.t-1]|=(ie&(1<<this.DB-Y)-1)<<Y,this[this.t++]=ie>>this.DB-Y):this[this.t-1]|=ie<<Y,Y+=w,Y>=this.DB&&(Y-=this.DB)}w==8&&E[0]&128&&(this.s=-1,Y>0&&(this[this.t-1]|=(1<<this.DB-Y)-1<<Y)),this.clamp(),K&&n.ZERO.subTo(this,this)}function b(){for(var E=this.s&this.DM;this.t>0&&this[this.t-1]==E;)--this.t}function N(E){if(this.s<0)return"-"+this.negate().toString(E);var _;if(E==16)_=4;else if(E==8)_=3;else if(E==2)_=1;else if(E==32)_=5;else if(E==4)_=2;else return this.toRadix(E);var w=(1<<_)-1,B,K=!1,Y="",ie=this.t,ue=this.DB-ie*this.DB%_;if(ie-- >0)for(ue<this.DB&&(B=this[ie]>>ue)>0&&(K=!0,Y=m(B));ie>=0;)ue<_?(B=(this[ie]&(1<<ue)-1)<<_-ue,B|=this[--ie]>>(ue+=this.DB-_)):(B=this[ie]>>(ue-=_)&w,ue<=0&&(ue+=this.DB,--ie)),B>0&&(K=!0),K&&(Y+=m(B));return K?Y:"0"}function R(){var E=s();return n.ZERO.subTo(this,E),E}function F(){return this.s<0?this.negate():this}function G(E){var _=this.s-E.s;if(_!=0)return _;var w=this.t;if(_=w-E.t,_!=0)return this.s<0?-_:_;for(;--w>=0;)if((_=this[w]-E[w])!=0)return _;return 0}function z(E){var _=1,w;return(w=E>>>16)!=0&&(E=w,_+=16),(w=E>>8)!=0&&(E=w,_+=8),(w=E>>4)!=0&&(E=w,_+=4),(w=E>>2)!=0&&(E=w,_+=2),(w=E>>1)!=0&&(E=w,_+=1),_}function j(){return this.t<=0?0:this.DB*(this.t-1)+z(this[this.t-1]^this.s&this.DM)}function v(E,_){var w;for(w=this.t-1;w>=0;--w)_[w+E]=this[w];for(w=E-1;w>=0;--w)_[w]=0;_.t=this.t+E,_.s=this.s}function x(E,_){for(var w=E;w<this.t;++w)_[w-E]=this[w];_.t=Math.max(this.t-E,0),_.s=this.s}function W(E,_){var w=E%this.DB,B=this.DB-w,K=(1<<B)-1,Y=Math.floor(E/this.DB),ie=this.s<<w&this.DM,ue;for(ue=this.t-1;ue>=0;--ue)_[ue+Y+1]=this[ue]>>B|ie,ie=(this[ue]&K)<<w;for(ue=Y-1;ue>=0;--ue)_[ue]=0;_[Y]=ie,_.t=this.t+Y+1,_.s=this.s,_.clamp()}function te(E,_){_.s=this.s;var w=Math.floor(E/this.DB);if(w>=this.t){_.t=0;return}var B=E%this.DB,K=this.DB-B,Y=(1<<B)-1;_[0]=this[w]>>B;for(var ie=w+1;ie<this.t;++ie)_[ie-w-1]|=(this[ie]&Y)<<K,_[ie-w]=this[ie]>>B;B>0&&(_[this.t-w-1]|=(this.s&Y)<<K),_.t=this.t-w,_.clamp()}function qe(E,_){for(var w=0,B=0,K=Math.min(E.t,this.t);w<K;)B+=this[w]-E[w],_[w++]=B&this.DM,B>>=this.DB;if(E.t<this.t){for(B-=E.s;w<this.t;)B+=this[w],_[w++]=B&this.DM,B>>=this.DB;B+=this.s}else{for(B+=this.s;w<E.t;)B-=E[w],_[w++]=B&this.DM,B>>=this.DB;B-=E.s}_.s=B<0?-1:0,B<-1?_[w++]=this.DV+B:B>0&&(_[w++]=B),_.t=w,_.clamp()}function ir(E,_){var w=this.abs(),B=E.abs(),K=w.t;for(_.t=K+B.t;--K>=0;)_[K]=0;for(K=0;K<B.t;++K)_[K+w.t]=w.am(0,B[K],_,K,0,w.t);_.s=0,_.clamp(),this.s!=E.s&&n.ZERO.subTo(_,_)}function Qe(E){for(var _=this.abs(),w=E.t=2*_.t;--w>=0;)E[w]=0;for(w=0;w<_.t-1;++w){var B=_.am(w,_[w],E,2*w,0,1);(E[w+_.t]+=_.am(w+1,2*_[w],E,2*w+1,B,_.t-w-1))>=_.DV&&(E[w+_.t]-=_.DV,E[w+_.t+1]=1)}E.t>0&&(E[E.t-1]+=_.am(w,_[w],E,2*w,0,1)),E.s=0,E.clamp()}function er(E,_,w){var B=E.abs();if(!(B.t<=0)){var K=this.abs();if(K.t<B.t){_?.fromInt(0),w!=null&&this.copyTo(w);return}w==null&&(w=s());var Y=s(),ie=this.s,ue=E.s,_t=this.DB-z(B[B.t-1]);_t>0?(B.lShiftTo(_t,Y),K.lShiftTo(_t,w)):(B.copyTo(Y),K.copyTo(w));var ar=Y.t,is=Y[ar-1];if(is!=0){var jn=is*(1<<this.F1)+(ar>1?Y[ar-2]>>this.F2:0),Ui=this.FV/jn,Yf=(1<<this.F1)/jn,Ls=1<<this.F2,js=w.t,Qf=js-ar,xo=_??s();for(Y.dlShiftTo(Qf,xo),w.compareTo(xo)>=0&&(w[w.t++]=1,w.subTo(xo,w)),n.ONE.dlShiftTo(ar,xo),xo.subTo(Y,Y);Y.t<ar;)Y[Y.t++]=0;for(;--Qf>=0;){var Bg=w[--js]==is?this.DM:Math.floor(w[js]*Ui+(w[js-1]+Ls)*Yf);if((w[js]+=Y.am(0,Bg,w,Qf,0,ar))<Bg)for(Y.dlShiftTo(Qf,xo),w.subTo(xo,w);w[js]<--Bg;)w.subTo(xo,w)}_!=null&&(w.drShiftTo(ar,_),ie!=ue&&n.ZERO.subTo(_,_)),w.t=ar,w.clamp(),_t>0&&w.rShiftTo(_t,w),ie<0&&n.ZERO.subTo(w,w)}}}function _r(E){var _=s();return this.abs().divRemTo(E,null,_),this.s<0&&_.compareTo(n.ZERO)>0&&E.subTo(_,_),_}function Ot(E){this.m=E}function ks(E){return E.s<0||E.compareTo(this.m)>=0?E.mod(this.m):E}function Ag(E){return E}function Cf(E){E.divRemTo(this.m,null,E)}function Sg(E,_,w){E.multiplyTo(_,w),this.reduce(w)}function Og(E,_){E.squareTo(_),this.reduce(_)}Ot.prototype.convert=ks,Ot.prototype.revert=Ag,Ot.prototype.reduce=Cf,Ot.prototype.mulTo=Sg,Ot.prototype.sqrTo=Og;function wg(){if(this.t<1)return 0;var E=this[0];if(!(E&1))return 0;var _=E&3;return _=_*(2-(E&15)*_)&15,_=_*(2-(E&255)*_)&255,_=_*(2-((E&65535)*_&65535))&65535,_=_*(2-E*_%this.DV)%this.DV,_>0?this.DV-_:-_}function Li(E){this.m=E,this.mp=E.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<E.DB-15)-1,this.mt2=2*E.t}function bf(E){var _=s();return E.abs().dlShiftTo(this.m.t,_),_.divRemTo(this.m,null,_),E.s<0&&_.compareTo(n.ZERO)>0&&this.m.subTo(_,_),_}function Tf(E){var _=s();return E.copyTo(_),this.reduce(_),_}function Df(E){for(;E.t<=this.mt2;)E[E.t++]=0;for(var _=0;_<this.m.t;++_){var w=E[_]&32767,B=w*this.mpl+((w*this.mph+(E[_]>>15)*this.mpl&this.um)<<15)&E.DM;for(w=_+this.m.t,E[w]+=this.m.am(0,B,E,_,0,this.m.t);E[w]>=E.DV;)E[w]-=E.DV,E[++w]++}E.clamp(),E.drShiftTo(this.m.t,E),E.compareTo(this.m)>=0&&E.subTo(this.m,E)}function Mf(E,_){E.squareTo(_),this.reduce(_)}function Bf(E,_,w){E.multiplyTo(_,w),this.reduce(w)}Li.prototype.convert=bf,Li.prototype.revert=Tf,Li.prototype.reduce=Df,Li.prototype.mulTo=Bf,Li.prototype.sqrTo=Mf;function If(){return(this.t>0?this[0]&1:this.s)==0}function Pf(E,_){if(E>4294967295||E<1)return n.ONE;var w=s(),B=s(),K=_.convert(this),Y=z(E)-1;for(K.copyTo(w);--Y>=0;)if(_.sqrTo(w,B),(E&1<<Y)>0)_.mulTo(B,K,w);else{var ie=w;w=B,B=ie}return _.revert(w)}function Nf(E,_){var w;return E<256||_.isEven()?w=new Ot(_):w=new Li(_),this.exp(E,w)}n.prototype.copyTo=A,n.prototype.fromInt=S,n.prototype.fromString=D,n.prototype.clamp=b,n.prototype.dlShiftTo=v,n.prototype.drShiftTo=x,n.prototype.lShiftTo=W,n.prototype.rShiftTo=te,n.prototype.subTo=qe,n.prototype.multiplyTo=ir,n.prototype.squareTo=Qe,n.prototype.divRemTo=er,n.prototype.invDigit=wg,n.prototype.isEven=If,n.prototype.exp=Pf,n.prototype.toString=N,n.prototype.negate=R,n.prototype.abs=F,n.prototype.compareTo=G,n.prototype.bitLength=j,n.prototype.mod=_r,n.prototype.modPowInt=Nf,n.ZERO=O(0),n.ONE=O(1);function Ff(){var E=s();return this.copyTo(E),E}function Rf(){if(this.s<0){if(this.t==1)return this[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this[0];if(this.t==0)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function vf(){return this.t==0?this.s:this[0]<<24>>24}function $f(){return this.t==0?this.s:this[0]<<16>>16}function xf(E){return Math.floor(Math.LN2*this.DB/Math.log(E))}function kf(){return this.s<0?-1:this.t<=0||this.t==1&&this[0]<=0?0:1}function qf(E){if(E==null&&(E=10),this.signum()==0||E<2||E>36)return"0";var _=this.chunkSize(E),w=Math.pow(E,_),B=O(w),K=s(),Y=s(),ie="";for(this.divRemTo(B,K,Y);K.signum()>0;)ie=(w+Y.intValue()).toString(E).substr(1)+ie,K.divRemTo(B,K,Y);return Y.intValue().toString(E)+ie}function Lf(E,_){this.fromInt(0),_==null&&(_=10);for(var w=this.chunkSize(_),B=Math.pow(_,w),K=!1,Y=0,ie=0,ue=0;ue<E.length;++ue){var _t=y(E,ue);if(_t<0){E.charAt(ue)=="-"&&this.signum()==0&&(K=!0);continue}ie=_*ie+_t,++Y>=w&&(this.dMultiply(B),this.dAddOffset(ie,0),Y=0,ie=0)}Y>0&&(this.dMultiply(Math.pow(_,Y)),this.dAddOffset(ie,0)),K&&n.ZERO.subTo(this,this)}function jf(E,_,w){if(typeof _=="number")if(E<2)this.fromInt(1);else for(this.fromNumber(E,w),this.testBit(E-1)||this.bitwiseTo(n.ONE.shiftLeft(E-1),Ql,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(_);)this.dAddOffset(2,0),this.bitLength()>E&&this.subTo(n.ONE.shiftLeft(E-1),this);else{var B=new Array,K=E&7;B.length=(E>>3)+1,_.nextBytes(B),K>0?B[0]&=(1<<K)-1:B[0]=0,this.fromString(B,256)}}function Uf(){var E=this.t,_=new Array;_[0]=this.s;var w=this.DB-E*this.DB%8,B,K=0;if(E-- >0)for(w<this.DB&&(B=this[E]>>w)!=(this.s&this.DM)>>w&&(_[K++]=B|this.s<<this.DB-w);E>=0;)w<8?(B=(this[E]&(1<<w)-1)<<8-w,B|=this[--E]>>(w+=this.DB-8)):(B=this[E]>>(w-=8)&255,w<=0&&(w+=this.DB,--E)),B&128&&(B|=-256),K==0&&(this.s&128)!=(B&128)&&++K,(K>0||B!=this.s)&&(_[K++]=B);return _}function Vf(E){return this.compareTo(E)==0}function zf(E){return this.compareTo(E)<0?this:E}function Wf(E){return this.compareTo(E)>0?this:E}function Hf(E,_,w){var B,K,Y=Math.min(E.t,this.t);for(B=0;B<Y;++B)w[B]=_(this[B],E[B]);if(E.t<this.t){for(K=E.s&this.DM,B=Y;B<this.t;++B)w[B]=_(this[B],K);w.t=this.t}else{for(K=this.s&this.DM,B=Y;B<E.t;++B)w[B]=_(K,E[B]);w.t=E.t}w.s=_(this.s,E.s),w.clamp()}function Cg(E,_){return E&_}function Gf(E){var _=s();return this.bitwiseTo(E,Cg,_),_}function Ql(E,_){return E|_}function T(E){var _=s();return this.bitwiseTo(E,Ql,_),_}function M(E,_){return E^_}function I(E){var _=s();return this.bitwiseTo(E,M,_),_}function k(E,_){return E&~_}function ee(E){var _=s();return this.bitwiseTo(E,k,_),_}function he(){for(var E=s(),_=0;_<this.t;++_)E[_]=this.DM&~this[_];return E.t=this.t,E.s=~this.s,E}function _e(E){var _=s();return E<0?this.rShiftTo(-E,_):this.lShiftTo(E,_),_}function Re(E){var _=s();return E<0?this.lShiftTo(-E,_):this.rShiftTo(E,_),_}function or(E){if(E==0)return-1;var _=0;return E&65535||(E>>=16,_+=16),E&255||(E>>=8,_+=8),E&15||(E>>=4,_+=4),E&3||(E>>=2,_+=2),E&1||++_,_}function Xr(){for(var E=0;E<this.t;++E)if(this[E]!=0)return E*this.DB+or(this[E]);return this.s<0?this.t*this.DB:-1}function ss(E){for(var _=0;E!=0;)E&=E-1,++_;return _}function ji(){for(var E=0,_=this.s&this.DM,w=0;w<this.t;++w)E+=ss(this[w]^_);return E}function bg(E){var _=Math.floor(E/this.DB);return _>=this.t?this.s!=0:(this[_]&1<<E%this.DB)!=0}function eU(E,_){var w=n.ONE.shiftLeft(E);return this.bitwiseTo(w,_,w),w}function tU(E){return this.changeBit(E,Ql)}function rU(E){return this.changeBit(E,k)}function nU(E){return this.changeBit(E,M)}function sU(E,_){for(var w=0,B=0,K=Math.min(E.t,this.t);w<K;)B+=this[w]+E[w],_[w++]=B&this.DM,B>>=this.DB;if(E.t<this.t){for(B+=E.s;w<this.t;)B+=this[w],_[w++]=B&this.DM,B>>=this.DB;B+=this.s}else{for(B+=this.s;w<E.t;)B+=E[w],_[w++]=B&this.DM,B>>=this.DB;B+=E.s}_.s=B<0?-1:0,B>0?_[w++]=B:B<-1&&(_[w++]=this.DV+B),_.t=w,_.clamp()}function iU(E){var _=s();return this.addTo(E,_),_}function oU(E){var _=s();return this.subTo(E,_),_}function uU(E){var _=s();return this.multiplyTo(E,_),_}function aU(){var E=s();return this.squareTo(E),E}function cU(E){var _=s();return this.divRemTo(E,_,null),_}function lU(E){var _=s();return this.divRemTo(E,null,_),_}function hU(E){var _=s(),w=s();return this.divRemTo(E,_,w),new Array(_,w)}function fU(E){this[this.t]=this.am(0,E-1,this,0,0,this.t),++this.t,this.clamp()}function dU(E,_){if(E!=0){for(;this.t<=_;)this[this.t++]=0;for(this[_]+=E;this[_]>=this.DV;)this[_]-=this.DV,++_>=this.t&&(this[this.t++]=0),++this[_]}}function Jl(){}function v9(E){return E}function pU(E,_,w){E.multiplyTo(_,w)}function mU(E,_){E.squareTo(_)}Jl.prototype.convert=v9,Jl.prototype.revert=v9,Jl.prototype.mulTo=pU,Jl.prototype.sqrTo=mU;function yU(E){return this.exp(E,new Jl)}function gU(E,_,w){var B=Math.min(this.t+E.t,_);for(w.s=0,w.t=B;B>0;)w[--B]=0;var K;for(K=w.t-this.t;B<K;++B)w[B+this.t]=this.am(0,E[B],w,B,0,this.t);for(K=Math.min(E.t,_);B<K;++B)this.am(0,E[B],w,B,0,_-B);w.clamp()}function EU(E,_,w){--_;var B=w.t=this.t+E.t-_;for(w.s=0;--B>=0;)w[B]=0;for(B=Math.max(_-this.t,0);B<E.t;++B)w[this.t+B-_]=this.am(_-B,E[B],w,0,0,this.t+B-_);w.clamp(),w.drShiftTo(1,w)}function Bu(E){this.r2=s(),this.q3=s(),n.ONE.dlShiftTo(2*E.t,this.r2),this.mu=this.r2.divide(E),this.m=E}function _U(E){if(E.s<0||E.t>2*this.m.t)return E.mod(this.m);if(E.compareTo(this.m)<0)return E;var _=s();return E.copyTo(_),this.reduce(_),_}function AU(E){return E}function SU(E){for(E.drShiftTo(this.m.t-1,this.r2),E.t>this.m.t+1&&(E.t=this.m.t+1,E.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);E.compareTo(this.r2)<0;)E.dAddOffset(1,this.m.t+1);for(E.subTo(this.r2,E);E.compareTo(this.m)>=0;)E.subTo(this.m,E)}function OU(E,_){E.squareTo(_),this.reduce(_)}function wU(E,_,w){E.multiplyTo(_,w),this.reduce(w)}Bu.prototype.convert=_U,Bu.prototype.revert=AU,Bu.prototype.reduce=SU,Bu.prototype.mulTo=wU,Bu.prototype.sqrTo=OU;function CU(E,_){var w=E.bitLength(),B,K=O(1),Y;if(w<=0)return K;w<18?B=1:w<48?B=3:w<144?B=4:w<768?B=5:B=6,w<8?Y=new Ot(_):_.isEven()?Y=new Bu(_):Y=new Li(_);var ie=new Array,ue=3,_t=B-1,ar=(1<<B)-1;if(ie[1]=Y.convert(this),B>1){var is=s();for(Y.sqrTo(ie[1],is);ue<=ar;)ie[ue]=s(),Y.mulTo(is,ie[ue-2],ie[ue]),ue+=2}var jn=E.t-1,Ui,Yf=!0,Ls=s(),js;for(w=z(E[jn])-1;jn>=0;){for(w>=_t?Ui=E[jn]>>w-_t&ar:(Ui=(E[jn]&(1<<w+1)-1)<<_t-w,jn>0&&(Ui|=E[jn-1]>>this.DB+w-_t)),ue=B;!(Ui&1);)Ui>>=1,--ue;if((w-=ue)<0&&(w+=this.DB,--jn),Yf)ie[Ui].copyTo(K),Yf=!1;else{for(;ue>1;)Y.sqrTo(K,Ls),Y.sqrTo(Ls,K),ue-=2;ue>0?Y.sqrTo(K,Ls):(js=K,K=Ls,Ls=js),Y.mulTo(Ls,ie[Ui],K)}for(;jn>=0&&!(E[jn]&1<<w);)Y.sqrTo(K,Ls),js=K,K=Ls,Ls=js,--w<0&&(w=this.DB-1,--jn)}return Y.revert(K)}function bU(E){var _=this.s<0?this.negate():this.clone(),w=E.s<0?E.negate():E.clone();if(_.compareTo(w)<0){var B=_;_=w,w=B}var K=_.getLowestSetBit(),Y=w.getLowestSetBit();if(Y<0)return _;for(K<Y&&(Y=K),Y>0&&(_.rShiftTo(Y,_),w.rShiftTo(Y,w));_.signum()>0;)(K=_.getLowestSetBit())>0&&_.rShiftTo(K,_),(K=w.getLowestSetBit())>0&&w.rShiftTo(K,w),_.compareTo(w)>=0?(_.subTo(w,_),_.rShiftTo(1,_)):(w.subTo(_,w),w.rShiftTo(1,w));return Y>0&&w.lShiftTo(Y,w),w}function TU(E){if(E<=0)return 0;var _=this.DV%E,w=this.s<0?E-1:0;if(this.t>0)if(_==0)w=this[0]%E;else for(var B=this.t-1;B>=0;--B)w=(_*w+this[B])%E;return w}function DU(E){var _=E.isEven();if(this.isEven()&&_||E.signum()==0)return n.ZERO;for(var w=E.clone(),B=this.clone(),K=O(1),Y=O(0),ie=O(0),ue=O(1);w.signum()!=0;){for(;w.isEven();)w.rShiftTo(1,w),_?((!K.isEven()||!Y.isEven())&&(K.addTo(this,K),Y.subTo(E,Y)),K.rShiftTo(1,K)):Y.isEven()||Y.subTo(E,Y),Y.rShiftTo(1,Y);for(;B.isEven();)B.rShiftTo(1,B),_?((!ie.isEven()||!ue.isEven())&&(ie.addTo(this,ie),ue.subTo(E,ue)),ie.rShiftTo(1,ie)):ue.isEven()||ue.subTo(E,ue),ue.rShiftTo(1,ue);w.compareTo(B)>=0?(w.subTo(B,w),_&&K.subTo(ie,K),Y.subTo(ue,Y)):(B.subTo(w,B),_&&ie.subTo(K,ie),ue.subTo(Y,ue))}if(B.compareTo(n.ONE)!=0)return n.ZERO;if(ue.compareTo(E)>=0)return ue.subtract(E);if(ue.signum()<0)ue.addTo(E,ue);else return ue;return ue.signum()<0?ue.add(E):ue}var Zr=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],MU=(1<<26)/Zr[Zr.length-1];function BU(E){var _,w=this.abs();if(w.t==1&&w[0]<=Zr[Zr.length-1]){for(_=0;_<Zr.length;++_)if(w[0]==Zr[_])return!0;return!1}if(w.isEven())return!1;for(_=1;_<Zr.length;){for(var B=Zr[_],K=_+1;K<Zr.length&&B<MU;)B*=Zr[K++];for(B=w.modInt(B);_<K;)if(B%Zr[_++]==0)return!1}return w.millerRabin(E)}function IU(E){var _=this.subtract(n.ONE),w=_.getLowestSetBit();if(w<=0)return!1;var B=_.shiftRight(w);E=E+1>>1,E>Zr.length&&(E=Zr.length);for(var K=s(),Y=0;Y<E;++Y){K.fromInt(Zr[Math.floor(Math.random()*Zr.length)]);var ie=K.modPow(B,this);if(ie.compareTo(n.ONE)!=0&&ie.compareTo(_)!=0){for(var ue=1;ue++<w&&ie.compareTo(_)!=0;)if(ie=ie.modPowInt(2,this),ie.compareTo(n.ONE)==0)return!1;if(ie.compareTo(_)!=0)return!1}}return!0}n.prototype.chunkSize=xf,n.prototype.toRadix=qf,n.prototype.fromRadix=Lf,n.prototype.fromNumber=jf,n.prototype.bitwiseTo=Hf,n.prototype.changeBit=eU,n.prototype.addTo=sU,n.prototype.dMultiply=fU,n.prototype.dAddOffset=dU,n.prototype.multiplyLowerTo=gU,n.prototype.multiplyUpperTo=EU,n.prototype.modInt=TU,n.prototype.millerRabin=IU,n.prototype.clone=Ff,n.prototype.intValue=Rf,n.prototype.byteValue=vf,n.prototype.shortValue=$f,n.prototype.signum=kf,n.prototype.toByteArray=Uf,n.prototype.equals=Vf,n.prototype.min=zf,n.prototype.max=Wf,n.prototype.and=Gf,n.prototype.or=T,n.prototype.xor=I,n.prototype.andNot=ee,n.prototype.not=he,n.prototype.shiftLeft=_e,n.prototype.shiftRight=Re,n.prototype.getLowestSetBit=Xr,n.prototype.bitCount=ji,n.prototype.testBit=bg,n.prototype.setBit=tU,n.prototype.clearBit=rU,n.prototype.flipBit=nU,n.prototype.add=iU,n.prototype.subtract=oU,n.prototype.multiply=uU,n.prototype.divide=cU,n.prototype.remainder=lU,n.prototype.divideAndRemainder=hU,n.prototype.modPow=CU,n.prototype.modInverse=DU,n.prototype.pow=yU,n.prototype.gcd=bU,n.prototype.isProbablePrime=BU,n.prototype.square=aU,n.prototype.Barrett=Bu;var Kf,Ln,ur;function PU(E){Ln[ur++]^=E&255,Ln[ur++]^=E>>8&255,Ln[ur++]^=E>>16&255,Ln[ur++]^=E>>24&255,ur>=Mg&&(ur-=Mg)}function $9(){PU(new Date().getTime())}if(Ln==null){Ln=new Array,ur=0;var qs;if(typeof window<"u"&&window.crypto){if(window.crypto.getRandomValues){var x9=new Uint8Array(32);for(window.crypto.getRandomValues(x9),qs=0;qs<32;++qs)Ln[ur++]=x9[qs]}else if(navigator.appName=="Netscape"&&navigator.appVersion<"5"){var k9=window.crypto.random(32);for(qs=0;qs<k9.length;++qs)Ln[ur++]=k9.charCodeAt(qs)&255}}for(;ur<Mg;)qs=Math.floor(65536*Math.random()),Ln[ur++]=qs>>>8,Ln[ur++]=qs&255;ur=0,$9()}function NU(){if(Kf==null){for($9(),Kf=$U(),Kf.init(Ln),ur=0;ur<Ln.length;++ur)Ln[ur]=0;ur=0}return Kf.next()}function FU(E){var _;for(_=0;_<E.length;++_)E[_]=NU()}function Tg(){}Tg.prototype.nextBytes=FU;function Dg(){this.i=0,this.j=0,this.S=new Array}function RU(E){var _,w,B;for(_=0;_<256;++_)this.S[_]=_;for(w=0,_=0;_<256;++_)w=w+this.S[_]+E[_%E.length]&255,B=this.S[_],this.S[_]=this.S[w],this.S[w]=B;this.i=0,this.j=0}function vU(){var E;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,E=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=E,this.S[E+this.S[this.i]&255]}Dg.prototype.init=RU,Dg.prototype.next=vU;function $U(){return new Dg}var Mg=256;typeof xp<"u"?xp=R7.exports={default:n,BigInteger:n,SecureRandom:Tg}:this.jsbn={BigInteger:n,SecureRandom:Tg}}).call(xp)});var D1=g(kp=>{d();(function(){"use strict";var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function e(o){return n(i(o),arguments)}function r(o,u){return e.apply(null,[o].concat(u||[]))}function n(o,u){var a=1,c=o.length,l,h="",f,p,m,y,A,S,O,D;for(f=0;f<c;f++)if(typeof o[f]=="string")h+=o[f];else if(typeof o[f]=="object"){if(m=o[f],m.keys)for(l=u[a],p=0;p<m.keys.length;p++){if(l==null)throw new Error(e('[sprintf] Cannot access property "%s" of undefined value "%s"',m.keys[p],m.keys[p-1]));l=l[m.keys[p]]}else m.param_no?l=u[m.param_no]:l=u[a++];if(t.not_type.test(m.type)&&t.not_primitive.test(m.type)&&l instanceof Function&&(l=l()),t.numeric_arg.test(m.type)&&typeof l!="number"&&isNaN(l))throw new TypeError(e("[sprintf] expecting number but found %T",l));switch(t.number.test(m.type)&&(O=l>=0),m.type){case"b":l=parseInt(l,10).toString(2);break;case"c":l=String.fromCharCode(parseInt(l,10));break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,m.width?parseInt(m.width):0);break;case"e":l=m.precision?parseFloat(l).toExponential(m.precision):parseFloat(l).toExponential();break;case"f":l=m.precision?parseFloat(l).toFixed(m.precision):parseFloat(l);break;case"g":l=m.precision?String(Number(l.toPrecision(m.precision))):parseFloat(l);break;case"o":l=(parseInt(l,10)>>>0).toString(8);break;case"s":l=String(l),l=m.precision?l.substring(0,m.precision):l;break;case"t":l=String(!!l),l=m.precision?l.substring(0,m.precision):l;break;case"T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),l=m.precision?l.substring(0,m.precision):l;break;case"u":l=parseInt(l,10)>>>0;break;case"v":l=l.valueOf(),l=m.precision?l.substring(0,m.precision):l;break;case"x":l=(parseInt(l,10)>>>0).toString(16);break;case"X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase();break}t.json.test(m.type)?h+=l:(t.number.test(m.type)&&(!O||m.sign)?(D=O?"+":"-",l=l.toString().replace(t.sign,"")):D="",A=m.pad_char?m.pad_char==="0"?"0":m.pad_char.charAt(1):" ",S=m.width-(D+l).length,y=m.width&&S>0?A.repeat(S):"",h+=m.align?D+l+y:A==="0"?D+y+l:y+D+l)}return h}var s=Object.create(null);function i(o){if(s[o])return s[o];for(var u=o,a,c=[],l=0;u;){if((a=t.text.exec(u))!==null)c.push(a[0]);else if((a=t.modulo.exec(u))!==null)c.push("%");else if((a=t.placeholder.exec(u))!==null){if(a[2]){l|=1;var h=[],f=a[2],p=[];if((p=t.key.exec(f))!==null)for(h.push(p[1]);(f=f.substring(p[0].length))!=="";)if((p=t.key_access.exec(f))!==null)h.push(p[1]);else if((p=t.index_access.exec(f))!==null)h.push(p[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");a[2]=h}else l|=2;if(l===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");c.push({placeholder:a[0],param_no:a[1],keys:a[2],sign:a[3],pad_char:a[4],align:a[5],width:a[6],precision:a[7],type:a[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");u=u.substring(a[0].length)}return s[o]=c}typeof kp<"u"&&(kp.sprintf=e,kp.vsprintf=r),typeof window<"u"&&(window.sprintf=e,window.vsprintf=r,typeof define=="function"&&define.amd&&define(function(){return{sprintf:e,vsprintf:r}}))})()});var N3=g(wi=>{"use strict";d();var AK=wi&&wi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),SK=wi&&wi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),x7=wi&&wi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&AK(e,t,r);return SK(e,t),e};Object.defineProperty(wi,"__esModule",{value:!0});wi.Address4=void 0;var v7=x7(D3()),Qs=x7(M3()),$7=$p(),M1=I3(),fc=D1(),P3=class t{constructor(e){this.groups=Qs.GROUPS,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=v7.isCorrect(Qs.BITS),this.isInSubnet=v7.isInSubnet,this.address=e;let r=Qs.RE_SUBNET_STRING.exec(e);if(r){if(this.parsedSubnet=r[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>Qs.BITS)throw new $7.AddressError("Invalid subnet mask.");e=e.replace(Qs.RE_SUBNET_STRING,"")}this.addressMinusSuffix=e,this.parsedAddress=this.parse(e)}static isValid(e){try{return new t(e),!0}catch{return!1}}parse(e){let r=e.split(".");if(!e.match(Qs.RE_ADDRESS))throw new $7.AddressError("Invalid IPv4 address.");return r}correctForm(){return this.parsedAddress.map(e=>parseInt(e,10)).join(".")}static fromHex(e){let r=e.replace(/:/g,"").padStart(8,"0"),n=[],s;for(s=0;s<8;s+=2){let i=r.slice(s,s+2);n.push(parseInt(i,16))}return new t(n.join("."))}static fromInteger(e){return t.fromHex(e.toString(16))}static fromArpa(e){let n=e.replace(/(\.in-addr\.arpa)?\.$/,"").split(".").reverse().join(".");return new t(n)}toHex(){return this.parsedAddress.map(e=>(0,fc.sprintf)("%02x",parseInt(e,10))).join(":")}toArray(){return this.parsedAddress.map(e=>parseInt(e,10))}toGroup6(){let e=[],r;for(r=0;r<Qs.GROUPS;r+=2){let n=(0,fc.sprintf)("%02x%02x",parseInt(this.parsedAddress[r],10),parseInt(this.parsedAddress[r+1],10));e.push((0,fc.sprintf)("%x",parseInt(n,16)))}return e.join(":")}bigInteger(){return new M1.BigInteger(this.parsedAddress.map(e=>(0,fc.sprintf)("%02x",parseInt(e,10))).join(""),16)}_startAddress(){return new M1.BigInteger(this.mask()+"0".repeat(Qs.BITS-this.subnetMask),2)}startAddress(){return t.fromBigInteger(this._startAddress())}startAddressExclusive(){let e=new M1.BigInteger("1");return t.fromBigInteger(this._startAddress().add(e))}_endAddress(){return new M1.BigInteger(this.mask()+"1".repeat(Qs.BITS-this.subnetMask),2)}endAddress(){return t.fromBigInteger(this._endAddress())}endAddressExclusive(){let e=new M1.BigInteger("1");return t.fromBigInteger(this._endAddress().subtract(e))}static fromBigInteger(e){return t.fromInteger(parseInt(e.toString(),10))}mask(e){return e===void 0&&(e=this.subnetMask),this.getBitsBase2(0,e)}getBitsBase2(e,r){return this.binaryZeroPad().slice(e,r)}reverseForm(e){e||(e={});let r=this.correctForm().split(".").reverse().join(".");return e.omitSuffix?r:(0,fc.sprintf)("%s.in-addr.arpa.",r)}isMulticast(){return this.isInSubnet(new t("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(Qs.BITS,"0")}groupForV6(){let e=this.parsedAddress;return this.address.replace(Qs.RE_ADDRESS,(0,fc.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',e.slice(0,2).join("."),e.slice(2,4).join(".")))}};wi.Address4=P3});var F3=g(Nt=>{"use strict";d();Object.defineProperty(Nt,"__esModule",{value:!0});Nt.RE_URL_WITH_PORT=Nt.RE_URL=Nt.RE_ZONE_STRING=Nt.RE_SUBNET_STRING=Nt.RE_BAD_ADDRESS=Nt.RE_BAD_CHARACTERS=Nt.TYPES=Nt.SCOPES=Nt.GROUPS=Nt.BITS=void 0;Nt.BITS=128;Nt.GROUPS=8;Nt.SCOPES={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"};Nt.TYPES={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"};Nt.RE_BAD_CHARACTERS=/([^0-9a-f:/%])/gi;Nt.RE_BAD_ADDRESS=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi;Nt.RE_SUBNET_STRING=/\/\d{1,3}(?=%|$)/;Nt.RE_ZONE_STRING=/%.*$/;Nt.RE_URL=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/);Nt.RE_URL_WITH_PORT=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/)});var R3=g(Ci=>{"use strict";d();Object.defineProperty(Ci,"__esModule",{value:!0});Ci.simpleGroup=Ci.spanLeadingZeroes=Ci.spanAll=Ci.spanAllZeroes=void 0;var k7=D1();function q7(t){return t.replace(/(0+)/g,'<span class="zero">$1</span>')}Ci.spanAllZeroes=q7;function OK(t,e=0){return t.split("").map((n,s)=>(0,k7.sprintf)('<span class="digit value-%s position-%d">%s</span>',n,s+e,q7(n))).join("")}Ci.spanAll=OK;function L7(t){return t.replace(/^(0+)/,'<span class="zero">$1</span>')}function wK(t){return t.split(":").map(r=>L7(r)).join(":")}Ci.spanLeadingZeroes=wK;function CK(t,e=0){return t.split(":").map((n,s)=>/group-v4/.test(n)?n:(0,k7.sprintf)('<span class="hover-group group-%d">%s</span>',s+e,L7(n)))}Ci.simpleGroup=CK});var j7=g(dr=>{"use strict";d();var bK=dr&&dr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),TK=dr&&dr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),DK=dr&&dr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&bK(e,t,r);return TK(e,t),e};Object.defineProperty(dr,"__esModule",{value:!0});dr.possibleElisions=dr.simpleRegularExpression=dr.ADDRESS_BOUNDARY=dr.padGroup=dr.groupPossibilities=void 0;var MK=DK(F3()),dc=D1();function Lp(t){return(0,dc.sprintf)("(%s)",t.join("|"))}dr.groupPossibilities=Lp;function qp(t){return t.length<4?(0,dc.sprintf)("0{0,%d}%s",4-t.length,t):t}dr.padGroup=qp;dr.ADDRESS_BOUNDARY="[^A-Fa-f0-9:]";function BK(t){let e=[];t.forEach((n,s)=>{parseInt(n,16)===0&&e.push(s)});let r=e.map(n=>t.map((s,i)=>{if(i===n){let o=i===0||i===MK.GROUPS-1?":":"";return Lp([qp(s),o])}return qp(s)}).join(":"));return r.push(t.map(qp).join(":")),Lp(r)}dr.simpleRegularExpression=BK;function IK(t,e,r){let n=e?"":":",s=r?"":":",i=[];!e&&!r&&i.push("::"),e&&r&&i.push(""),(r&&!e||!r&&e)&&i.push(":"),i.push((0,dc.sprintf)("%s(:0{1,4}){1,%d}",n,t-1)),i.push((0,dc.sprintf)("(0{1,4}:){1,%d}%s",t-1,s)),i.push((0,dc.sprintf)("(0{1,4}:){%d}0{1,4}",t-1));for(let o=1;o<t-1;o++)for(let u=1;u<t-o;u++)i.push((0,dc.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",u,t-u-o-1));return Lp(i)}dr.possibleElisions=IK});var W7=g(bi=>{"use strict";d();var PK=bi&&bi.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),NK=bi&&bi.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Up=bi&&bi.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&PK(e,t,r);return NK(e,t),e};Object.defineProperty(bi,"__esModule",{value:!0});bi.Address6=void 0;var U7=Up(D3()),v3=Up(M3()),ft=Up(F3()),$3=Up(R3()),ra=N3(),na=j7(),ro=$p(),rn=I3(),nn=D1();function jp(t){if(!t)throw new Error("Assertion failed.")}function FK(t){let e=/(\d+)(\d{3})/;for(;e.test(t);)t=t.replace(e,"$1,$2");return t}function RK(t){return t=t.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),t=t.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),t}function vK(t,e){let r=[],n=[],s;for(s=0;s<t.length;s++)s<e[0]?r.push(t[s]):s>e[1]&&n.push(t[s]);return r.concat(["compact"]).concat(n)}function V7(t){return(0,nn.sprintf)("%04x",parseInt(t,16))}function z7(t){return t&255}var x3=class t{constructor(e,r){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=U7.isInSubnet,this.isCorrect=U7.isCorrect(ft.BITS),r===void 0?this.groups=ft.GROUPS:this.groups=r,this.address=e;let n=ft.RE_SUBNET_STRING.exec(e);if(n){if(this.parsedSubnet=n[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>ft.BITS)throw new ro.AddressError("Invalid subnet mask.");e=e.replace(ft.RE_SUBNET_STRING,"")}else if(/\//.test(e))throw new ro.AddressError("Invalid subnet mask.");let s=ft.RE_ZONE_STRING.exec(e);s&&(this.zone=s[0],e=e.replace(ft.RE_ZONE_STRING,"")),this.addressMinusSuffix=e,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(e){try{return new t(e),!0}catch{return!1}}static fromBigInteger(e){let r=e.toString(16).padStart(32,"0"),n=[],s;for(s=0;s<ft.GROUPS;s++)n.push(r.slice(s*4,(s+1)*4));return new t(n.join(":"))}static fromURL(e){let r,n=null,s;if(e.indexOf("[")!==-1&&e.indexOf("]:")!==-1){if(s=ft.RE_URL_WITH_PORT.exec(e),s===null)return{error:"failed to parse address with port",address:null,port:null};r=s[1],n=s[2]}else if(e.indexOf("/")!==-1){if(e=e.replace(/^[a-z0-9]+:\/\//,""),s=ft.RE_URL.exec(e),s===null)return{error:"failed to parse address from URL",address:null,port:null};r=s[1]}else r=e;return n?(n=parseInt(n,10),(n<0||n>65536)&&(n=null)):n=null,{address:new t(r),port:n}}static fromAddress4(e){let r=new ra.Address4(e),n=ft.BITS-(v3.BITS-r.subnetMask);return new t(`::ffff:${r.correctForm()}/${n}`)}static fromArpa(e){let r=e.replace(/(\.ip6\.arpa)?\.$/,""),n=7;if(r.length!==63)throw new ro.AddressError("Invalid 'ip6.arpa' form.");let s=r.split(".").reverse();for(let i=n;i>0;i--){let o=i*4;s.splice(o,0,":")}return r=s.join(""),new t(r)}microsoftTranscription(){return(0,nn.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(e=this.subnetMask){return this.getBitsBase2(0,e)}possibleSubnets(e=128){let r=ft.BITS-this.subnetMask,n=Math.abs(e-ft.BITS),s=r-n;return s<0?"0":FK(new rn.BigInteger("2",10).pow(s).toString(10))}_startAddress(){return new rn.BigInteger(this.mask()+"0".repeat(ft.BITS-this.subnetMask),2)}startAddress(){return t.fromBigInteger(this._startAddress())}startAddressExclusive(){let e=new rn.BigInteger("1");return t.fromBigInteger(this._startAddress().add(e))}_endAddress(){return new rn.BigInteger(this.mask()+"1".repeat(ft.BITS-this.subnetMask),2)}endAddress(){return t.fromBigInteger(this._endAddress())}endAddressExclusive(){let e=new rn.BigInteger("1");return t.fromBigInteger(this._endAddress().subtract(e))}getScope(){let e=ft.SCOPES[this.getBits(12,16).intValue()];return this.getType()==="Global unicast"&&e!=="Link local"&&(e="Global"),e||"Unknown"}getType(){for(let e of Object.keys(ft.TYPES))if(this.isInSubnet(new t(e)))return ft.TYPES[e];return"Global unicast"}getBits(e,r){return new rn.BigInteger(this.getBitsBase2(e,r),2)}getBitsBase2(e,r){return this.binaryZeroPad().slice(e,r)}getBitsBase16(e,r){let n=r-e;if(n%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(e,r).toString(16).padStart(n/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,ft.BITS)}reverseForm(e){e||(e={});let r=Math.floor(this.subnetMask/4),n=this.canonicalForm().replace(/:/g,"").split("").slice(0,r).reverse().join(".");return r>0?e.omitSuffix?n:(0,nn.sprintf)("%s.ip6.arpa.",n):e.omitSuffix?"":"ip6.arpa."}correctForm(){let e,r=[],n=0,s=[];for(e=0;e<this.parsedAddress.length;e++){let u=parseInt(this.parsedAddress[e],16);u===0&&n++,u!==0&&n>0&&(n>1&&s.push([e-n,e-1]),n=0)}n>1&&s.push([this.parsedAddress.length-n,this.parsedAddress.length-1]);let i=s.map(u=>u[1]-u[0]+1);if(s.length>0){let u=i.indexOf(Math.max(...i));r=vK(this.parsedAddress,s[u])}else r=this.parsedAddress;for(e=0;e<r.length;e++)r[e]!=="compact"&&(r[e]=parseInt(r[e],16).toString(16));let o=r.join(":");return o=o.replace(/^compact$/,"::"),o=o.replace(/^compact|compact$/,":"),o=o.replace(/compact/,""),o}binaryZeroPad(){return this.bigInteger().toString(2).padStart(ft.BITS,"0")}parse4in6(e){let r=e.split(":"),s=r.slice(-1)[0].match(v3.RE_ADDRESS);if(s){this.parsedAddress4=s[0],this.address4=new ra.Address4(this.parsedAddress4);for(let i=0;i<this.address4.groups;i++)if(/^0[0-9]+/.test(this.address4.parsedAddress[i]))throw new ro.AddressError("IPv4 addresses can't have leading zeroes.",e.replace(v3.RE_ADDRESS,this.address4.parsedAddress.map(RK).join(".")));this.v4=!0,r[r.length-1]=this.address4.toGroup6(),e=r.join(":")}return e}parse(e){e=this.parse4in6(e);let r=e.match(ft.RE_BAD_CHARACTERS);if(r)throw new ro.AddressError((0,nn.sprintf)("Bad character%s detected in address: %s",r.length>1?"s":"",r.join("")),e.replace(ft.RE_BAD_CHARACTERS,'<span class="parse-error">$1</span>'));let n=e.match(ft.RE_BAD_ADDRESS);if(n)throw new ro.AddressError((0,nn.sprintf)("Address failed regex: %s",n.join("")),e.replace(ft.RE_BAD_ADDRESS,'<span class="parse-error">$1</span>'));let s=[],i=e.split("::");if(i.length===2){let o=i[0].split(":"),u=i[1].split(":");o.length===1&&o[0]===""&&(o=[]),u.length===1&&u[0]===""&&(u=[]);let a=this.groups-(o.length+u.length);if(!a)throw new ro.AddressError("Error parsing groups");this.elidedGroups=a,this.elisionBegin=o.length,this.elisionEnd=o.length+this.elidedGroups,s=s.concat(o);for(let c=0;c<a;c++)s.push("0");s=s.concat(u)}else if(i.length===1)s=e.split(":"),this.elidedGroups=0;else throw new ro.AddressError("Too many :: groups found");if(s=s.map(o=>(0,nn.sprintf)("%x",parseInt(o,16))),s.length!==this.groups)throw new ro.AddressError("Incorrect number of groups found");return s}canonicalForm(){return this.parsedAddress.map(V7).join(":")}decimal(){return this.parsedAddress.map(e=>(0,nn.sprintf)("%05d",parseInt(e,16))).join(":")}bigInteger(){return new rn.BigInteger(this.parsedAddress.map(V7).join(""),16)}to4(){let e=this.binaryZeroPad().split("");return ra.Address4.fromHex(new rn.BigInteger(e.slice(96,128).join(""),2).toString(16))}to4in6(){let e=this.to4(),n=new t(this.parsedAddress.slice(0,6).join(":"),6).correctForm(),s="";return/:$/.test(n)||(s=":"),n+s+e.address}inspectTeredo(){let e=this.getBitsBase16(0,32),r=this.getBits(80,96).xor(new rn.BigInteger("ffff",16)).toString(),n=ra.Address4.fromHex(this.getBitsBase16(32,64)),s=ra.Address4.fromHex(this.getBits(96,128).xor(new rn.BigInteger("ffffffff",16)).toString(16)),i=this.getBits(64,80),o=this.getBitsBase2(64,80),u=i.testBit(15),a=i.testBit(14),c=i.testBit(8),l=i.testBit(9),h=new rn.BigInteger(o.slice(2,6)+o.slice(8,16),2).toString(10);return{prefix:(0,nn.sprintf)("%s:%s",e.slice(0,4),e.slice(4,8)),server4:n.address,client4:s.address,flags:o,coneNat:u,microsoft:{reserved:a,universalLocal:l,groupIndividual:c,nonce:h},udpPort:r}}inspect6to4(){let e=this.getBitsBase16(0,16),r=ra.Address4.fromHex(this.getBitsBase16(16,48));return{prefix:(0,nn.sprintf)("%s",e.slice(0,4)),gateway:r.address}}to6to4(){if(!this.is4())return null;let e=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new t(e)}toByteArray(){let e=this.bigInteger().toByteArray();return e.length===17&&e[0]===0?e.slice(1):e}toUnsignedByteArray(){return this.toByteArray().map(z7)}static fromByteArray(e){return this.fromUnsignedByteArray(e.map(z7))}static fromUnsignedByteArray(e){let r=new rn.BigInteger("256",10),n=new rn.BigInteger("0",10),s=new rn.BigInteger("1",10);for(let i=e.length-1;i>=0;i--)n=n.add(s.multiply(new rn.BigInteger(e[i].toString(10),10))),s=s.multiply(r);return t.fromBigInteger(n)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return this.getBitsBase2(0,64)==="1111111010000000000000000000000000000000000000000000000000000000"}isMulticast(){return this.getType()==="Multicast"}is4(){return this.v4}isTeredo(){return this.isInSubnet(new t("2001::/32"))}is6to4(){return this.isInSubnet(new t("2002::/16"))}isLoopback(){return this.getType()==="Loopback"}href(e){return e===void 0?e="":e=(0,nn.sprintf)(":%s",e),(0,nn.sprintf)("http://[%s]%s/",this.correctForm(),e)}link(e){e||(e={}),e.className===void 0&&(e.className=""),e.prefix===void 0&&(e.prefix="/#address="),e.v4===void 0&&(e.v4=!1);let r=this.correctForm;return e.v4&&(r=this.to4in6),e.className?(0,nn.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',e.prefix,r.call(this),e.className):(0,nn.sprintf)('<a href="%1$s%2$s">%2$s</a>',e.prefix,r.call(this))}group(){if(this.elidedGroups===0)return $3.simpleGroup(this.address).join(":");jp(typeof this.elidedGroups=="number"),jp(typeof this.elisionBegin=="number");let e=[],[r,n]=this.address.split("::");r.length?e.push(...$3.simpleGroup(r)):e.push("");let s=["hover-group"];for(let i=this.elisionBegin;i<this.elisionBegin+this.elidedGroups;i++)s.push((0,nn.sprintf)("group-%d",i));return e.push((0,nn.sprintf)('<span class="%s"></span>',s.join(" "))),n.length?e.push(...$3.simpleGroup(n,this.elisionEnd)):e.push(""),this.is4()&&(jp(this.address4 instanceof ra.Address4),e.pop(),e.push(this.address4.groupForV6())),e.join(":")}regularExpressionString(e=!1){let r=[],n=new t(this.correctForm());if(n.elidedGroups===0)r.push((0,na.simpleRegularExpression)(n.parsedAddress));else if(n.elidedGroups===ft.GROUPS)r.push((0,na.possibleElisions)(ft.GROUPS));else{let s=n.address.split("::");s[0].length&&r.push((0,na.simpleRegularExpression)(s[0].split(":"))),jp(typeof n.elidedGroups=="number"),r.push((0,na.possibleElisions)(n.elidedGroups,s[0].length!==0,s[1].length!==0)),s[1].length&&r.push((0,na.simpleRegularExpression)(s[1].split(":"))),r=[r.join(":")]}return e||(r=["(?=^|",na.ADDRESS_BOUNDARY,"|[^\\w\\:])(",...r,")(?=[^\\w\\:]|",na.ADDRESS_BOUNDARY,"|$)"]),r.join("")}regularExpression(e=!1){return new RegExp(this.regularExpressionString(e),"i")}};bi.Address6=x3});var k3=g(Lr=>{"use strict";d();var $K=Lr&&Lr.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),xK=Lr&&Lr.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),kK=Lr&&Lr.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&$K(e,t,r);return xK(e,t),e};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.v6=Lr.AddressError=Lr.Address6=Lr.Address4=void 0;var qK=N3();Object.defineProperty(Lr,"Address4",{enumerable:!0,get:function(){return qK.Address4}});var LK=W7();Object.defineProperty(Lr,"Address6",{enumerable:!0,get:function(){return LK.Address6}});var jK=$p();Object.defineProperty(Lr,"AddressError",{enumerable:!0,get:function(){return jK.AddressError}});var UK=kK(R3());Lr.v6={helpers:UK}});var J7=g(Es=>{"use strict";d();Object.defineProperty(Es,"__esModule",{value:!0});Es.ipToBuffer=Es.int32ToIpv4=Es.ipv4ToInt32=Es.validateSocksClientChainOptions=Es.validateSocksClientOptions=void 0;var sn=T3(),pr=C3(),VK=require("stream"),q3=k3(),H7=require("net");function zK(t,e=["connect","bind","associate"]){if(!pr.SocksCommand[t.command])throw new sn.SocksClientError(pr.ERRORS.InvalidSocksCommand,t);if(e.indexOf(t.command)===-1)throw new sn.SocksClientError(pr.ERRORS.InvalidSocksCommandForOperation,t);if(!K7(t.destination))throw new sn.SocksClientError(pr.ERRORS.InvalidSocksClientOptionsDestination,t);if(!Y7(t.proxy))throw new sn.SocksClientError(pr.ERRORS.InvalidSocksClientOptionsProxy,t);if(G7(t.proxy,t),t.timeout&&!Q7(t.timeout))throw new sn.SocksClientError(pr.ERRORS.InvalidSocksClientOptionsTimeout,t);if(t.existing_socket&&!(t.existing_socket instanceof VK.Duplex))throw new sn.SocksClientError(pr.ERRORS.InvalidSocksClientOptionsExistingSocket,t)}Es.validateSocksClientOptions=zK;function WK(t){if(t.command!=="connect")throw new sn.SocksClientError(pr.ERRORS.InvalidSocksCommandChain,t);if(!K7(t.destination))throw new sn.SocksClientError(pr.ERRORS.InvalidSocksClientOptionsDestination,t);if(!(t.proxies&&Array.isArray(t.proxies)&&t.proxies.length>=2))throw new sn.SocksClientError(pr.ERRORS.InvalidSocksClientOptionsProxiesLength,t);if(t.proxies.forEach(e=>{if(!Y7(e))throw new sn.SocksClientError(pr.ERRORS.InvalidSocksClientOptionsProxy,t);G7(e,t)}),t.timeout&&!Q7(t.timeout))throw new sn.SocksClientError(pr.ERRORS.InvalidSocksClientOptionsTimeout,t)}Es.validateSocksClientChainOptions=WK;function G7(t,e){if(t.custom_auth_method!==void 0){if(t.custom_auth_method<pr.SOCKS5_CUSTOM_AUTH_START||t.custom_auth_method>pr.SOCKS5_CUSTOM_AUTH_END)throw new sn.SocksClientError(pr.ERRORS.InvalidSocksClientOptionsCustomAuthRange,e);if(t.custom_auth_request_handler===void 0||typeof t.custom_auth_request_handler!="function")throw new sn.SocksClientError(pr.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,e);if(t.custom_auth_response_size===void 0)throw new sn.SocksClientError(pr.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,e);if(t.custom_auth_response_handler===void 0||typeof t.custom_auth_response_handler!="function")throw new sn.SocksClientError(pr.ERRORS.InvalidSocksClientOptionsCustomAuthOptions,e)}}function K7(t){return t&&typeof t.host=="string"&&typeof t.port=="number"&&t.port>=0&&t.port<=65535}function Y7(t){return t&&(typeof t.host=="string"||typeof t.ipaddress=="string")&&typeof t.port=="number"&&t.port>=0&&t.port<=65535&&(t.type===4||t.type===5)}function Q7(t){return typeof t=="number"&&t>0}function HK(t){return new q3.Address4(t).toArray().reduce((r,n)=>(r<<8)+n,0)}Es.ipv4ToInt32=HK;function GK(t){let e=t>>>24&255,r=t>>>16&255,n=t>>>8&255,s=t&255;return[e,r,n,s].join(".")}Es.int32ToIpv4=GK;function KK(t){if(H7.isIPv4(t)){let e=new q3.Address4(t);return Buffer.from(e.toArray())}else if(H7.isIPv6(t)){let e=new q3.Address6(t);return Buffer.from(e.canonicalForm().split(":").map(r=>r.padStart(4,"0")).join(""),"hex")}else throw new Error("Invalid IP address format")}Es.ipToBuffer=KK});var X7=g(Vp=>{"use strict";d();Object.defineProperty(Vp,"__esModule",{value:!0});Vp.ReceiveBuffer=void 0;var L3=class{constructor(e=4096){this.buffer=Buffer.allocUnsafe(e),this.offset=0,this.originalSize=e}get length(){return this.offset}append(e){if(!Buffer.isBuffer(e))throw new Error("Attempted to append a non-buffer instance to ReceiveBuffer.");if(this.offset+e.length>=this.buffer.length){let r=this.buffer;this.buffer=Buffer.allocUnsafe(Math.max(this.buffer.length+this.originalSize,this.buffer.length+e.length)),r.copy(this.buffer)}return e.copy(this.buffer,this.offset),this.offset+=e.length}peek(e){if(e>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");return this.buffer.slice(0,e)}get(e){if(e>this.offset)throw new Error("Attempted to read beyond the bounds of the managed internal data.");let r=Buffer.allocUnsafe(e);return this.buffer.slice(0,e).copy(r),this.buffer.copyWithin(0,e,e+this.offset-e),this.offset-=e,r}};Vp.ReceiveBuffer=L3});var Z7=g(Xo=>{"use strict";d();var pc=Xo&&Xo.__awaiter||function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function u(l){try{c(n.next(l))}catch(h){o(h)}}function a(l){try{c(n.throw(l))}catch(h){o(h)}}function c(l){l.done?i(l.value):s(l.value).then(u,a)}c((n=n.apply(t,e||[])).next())})};Object.defineProperty(Xo,"__esModule",{value:!0});Xo.SocksClientError=Xo.SocksClient=void 0;var YK=require("events"),mc=require("net"),yn=D7(),J=C3(),Kn=J7(),QK=X7(),U3=T3();Object.defineProperty(Xo,"SocksClientError",{enumerable:!0,get:function(){return U3.SocksClientError}});var j3=k3(),V3=class t extends YK.EventEmitter{constructor(e){super(),this.options=Object.assign({},e),(0,Kn.validateSocksClientOptions)(e),this.setState(J.SocksClientState.Created)}static createConnection(e,r){return new Promise((n,s)=>{try{(0,Kn.validateSocksClientOptions)(e,["connect"])}catch(o){return typeof r=="function"?(r(o),n(o)):s(o)}let i=new t(e);i.connect(e.existing_socket),i.once("established",o=>{i.removeAllListeners(),typeof r=="function"&&r(null,o),n(o)}),i.once("error",o=>{i.removeAllListeners(),typeof r=="function"?(r(o),n(o)):s(o)})})}static createConnectionChain(e,r){return new Promise((n,s)=>pc(this,void 0,void 0,function*(){try{(0,Kn.validateSocksClientChainOptions)(e)}catch(i){return typeof r=="function"?(r(i),n(i)):s(i)}e.randomizeChain&&(0,U3.shuffleArray)(e.proxies);try{let i;for(let o=0;o<e.proxies.length;o++){let u=e.proxies[o],a=o===e.proxies.length-1?e.destination:{host:e.proxies[o+1].host||e.proxies[o+1].ipaddress,port:e.proxies[o+1].port},c=yield t.createConnection({command:"connect",proxy:u,destination:a,existing_socket:i});i=i||c.socket}typeof r=="function"?(r(null,{socket:i}),n({socket:i})):n({socket:i})}catch(i){typeof r=="function"?(r(i),n(i)):s(i)}}))}static createUDPFrame(e){let r=new yn.SmartBuffer;return r.writeUInt16BE(0),r.writeUInt8(e.frameNumber||0),mc.isIPv4(e.remoteHost.host)?(r.writeUInt8(J.Socks5HostType.IPv4),r.writeUInt32BE((0,Kn.ipv4ToInt32)(e.remoteHost.host))):mc.isIPv6(e.remoteHost.host)?(r.writeUInt8(J.Socks5HostType.IPv6),r.writeBuffer((0,Kn.ipToBuffer)(e.remoteHost.host))):(r.writeUInt8(J.Socks5HostType.Hostname),r.writeUInt8(Buffer.byteLength(e.remoteHost.host)),r.writeString(e.remoteHost.host)),r.writeUInt16BE(e.remoteHost.port),r.writeBuffer(e.data),r.toBuffer()}static parseUDPFrame(e){let r=yn.SmartBuffer.fromBuffer(e);r.readOffset=2;let n=r.readUInt8(),s=r.readUInt8(),i;s===J.Socks5HostType.IPv4?i=(0,Kn.int32ToIpv4)(r.readUInt32BE()):s===J.Socks5HostType.IPv6?i=j3.Address6.fromByteArray(Array.from(r.readBuffer(16))).canonicalForm():i=r.readString(r.readUInt8());let o=r.readUInt16BE();return{frameNumber:n,remoteHost:{host:i,port:o},data:r.readBuffer()}}setState(e){this.state!==J.SocksClientState.Error&&(this.state=e)}connect(e){this.onDataReceived=n=>this.onDataReceivedHandler(n),this.onClose=()=>this.onCloseHandler(),this.onError=n=>this.onErrorHandler(n),this.onConnect=()=>this.onConnectHandler();let r=setTimeout(()=>this.onEstablishedTimeout(),this.options.timeout||J.DEFAULT_TIMEOUT);r.unref&&typeof r.unref=="function"&&r.unref(),e?this.socket=e:this.socket=new mc.Socket,this.socket.once("close",this.onClose),this.socket.once("error",this.onError),this.socket.once("connect",this.onConnect),this.socket.on("data",this.onDataReceived),this.setState(J.SocksClientState.Connecting),this.receiveBuffer=new QK.ReceiveBuffer,e?this.socket.emit("connect"):(this.socket.connect(this.getSocketOptions()),this.options.set_tcp_nodelay!==void 0&&this.options.set_tcp_nodelay!==null&&this.socket.setNoDelay(!!this.options.set_tcp_nodelay)),this.prependOnceListener("established",n=>{setImmediate(()=>{if(this.receiveBuffer.length>0){let s=this.receiveBuffer.get(this.receiveBuffer.length);n.socket.emit("data",s)}n.socket.resume()})})}getSocketOptions(){return Object.assign(Object.assign({},this.options.socket_options),{host:this.options.proxy.host||this.options.proxy.ipaddress,port:this.options.proxy.port})}onEstablishedTimeout(){this.state!==J.SocksClientState.Established&&this.state!==J.SocksClientState.BoundWaitingForConnection&&this.closeSocket(J.ERRORS.ProxyConnectionTimedOut)}onConnectHandler(){this.setState(J.SocksClientState.Connected),this.options.proxy.type===4?this.sendSocks4InitialHandshake():this.sendSocks5InitialHandshake(),this.setState(J.SocksClientState.SentInitialHandshake)}onDataReceivedHandler(e){this.receiveBuffer.append(e),this.processData()}processData(){for(;this.state!==J.SocksClientState.Established&&this.state!==J.SocksClientState.Error&&this.receiveBuffer.length>=this.nextRequiredPacketBufferSize;)if(this.state===J.SocksClientState.SentInitialHandshake)this.options.proxy.type===4?this.handleSocks4FinalHandshakeResponse():this.handleInitialSocks5HandshakeResponse();else if(this.state===J.SocksClientState.SentAuthentication)this.handleInitialSocks5AuthenticationHandshakeResponse();else if(this.state===J.SocksClientState.SentFinalHandshake)this.handleSocks5FinalHandshakeResponse();else if(this.state===J.SocksClientState.BoundWaitingForConnection)this.options.proxy.type===4?this.handleSocks4IncomingConnectionResponse():this.handleSocks5IncomingConnectionResponse();else{this.closeSocket(J.ERRORS.InternalError);break}}onCloseHandler(){this.closeSocket(J.ERRORS.SocketClosed)}onErrorHandler(e){this.closeSocket(e.message)}removeInternalSocketHandlers(){this.socket.pause(),this.socket.removeListener("data",this.onDataReceived),this.socket.removeListener("close",this.onClose),this.socket.removeListener("error",this.onError),this.socket.removeListener("connect",this.onConnect)}closeSocket(e){this.state!==J.SocksClientState.Error&&(this.setState(J.SocksClientState.Error),this.socket.destroy(),this.removeInternalSocketHandlers(),this.emit("error",new U3.SocksClientError(e,this.options)))}sendSocks4InitialHandshake(){let e=this.options.proxy.userId||"",r=new yn.SmartBuffer;r.writeUInt8(4),r.writeUInt8(J.SocksCommand[this.options.command]),r.writeUInt16BE(this.options.destination.port),mc.isIPv4(this.options.destination.host)?(r.writeBuffer((0,Kn.ipToBuffer)(this.options.destination.host)),r.writeStringNT(e)):(r.writeUInt8(0),r.writeUInt8(0),r.writeUInt8(0),r.writeUInt8(1),r.writeStringNT(e),r.writeStringNT(this.options.destination.host)),this.nextRequiredPacketBufferSize=J.SOCKS_INCOMING_PACKET_SIZES.Socks4Response,this.socket.write(r.toBuffer())}handleSocks4FinalHandshakeResponse(){let e=this.receiveBuffer.get(8);if(e[1]!==J.Socks4Response.Granted)this.closeSocket(`${J.ERRORS.Socks4ProxyRejectedConnection} - (${J.Socks4Response[e[1]]})`);else if(J.SocksCommand[this.options.command]===J.SocksCommand.bind){let r=yn.SmartBuffer.fromBuffer(e);r.readOffset=2;let n={port:r.readUInt16BE(),host:(0,Kn.int32ToIpv4)(r.readUInt32BE())};n.host==="0.0.0.0"&&(n.host=this.options.proxy.ipaddress),this.setState(J.SocksClientState.BoundWaitingForConnection),this.emit("bound",{remoteHost:n,socket:this.socket})}else this.setState(J.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{socket:this.socket})}handleSocks4IncomingConnectionResponse(){let e=this.receiveBuffer.get(8);if(e[1]!==J.Socks4Response.Granted)this.closeSocket(`${J.ERRORS.Socks4ProxyRejectedIncomingBoundConnection} - (${J.Socks4Response[e[1]]})`);else{let r=yn.SmartBuffer.fromBuffer(e);r.readOffset=2;let n={port:r.readUInt16BE(),host:(0,Kn.int32ToIpv4)(r.readUInt32BE())};this.setState(J.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:n,socket:this.socket})}}sendSocks5InitialHandshake(){let e=new yn.SmartBuffer,r=[J.Socks5Auth.NoAuth];(this.options.proxy.userId||this.options.proxy.password)&&r.push(J.Socks5Auth.UserPass),this.options.proxy.custom_auth_method!==void 0&&r.push(this.options.proxy.custom_auth_method),e.writeUInt8(5),e.writeUInt8(r.length);for(let n of r)e.writeUInt8(n);this.nextRequiredPacketBufferSize=J.SOCKS_INCOMING_PACKET_SIZES.Socks5InitialHandshakeResponse,this.socket.write(e.toBuffer()),this.setState(J.SocksClientState.SentInitialHandshake)}handleInitialSocks5HandshakeResponse(){let e=this.receiveBuffer.get(2);e[0]!==5?this.closeSocket(J.ERRORS.InvalidSocks5IntiailHandshakeSocksVersion):e[1]===J.SOCKS5_NO_ACCEPTABLE_AUTH?this.closeSocket(J.ERRORS.InvalidSocks5InitialHandshakeNoAcceptedAuthType):e[1]===J.Socks5Auth.NoAuth?(this.socks5ChosenAuthType=J.Socks5Auth.NoAuth,this.sendSocks5CommandRequest()):e[1]===J.Socks5Auth.UserPass?(this.socks5ChosenAuthType=J.Socks5Auth.UserPass,this.sendSocks5UserPassAuthentication()):e[1]===this.options.proxy.custom_auth_method?(this.socks5ChosenAuthType=this.options.proxy.custom_auth_method,this.sendSocks5CustomAuthentication()):this.closeSocket(J.ERRORS.InvalidSocks5InitialHandshakeUnknownAuthType)}sendSocks5UserPassAuthentication(){let e=this.options.proxy.userId||"",r=this.options.proxy.password||"",n=new yn.SmartBuffer;n.writeUInt8(1),n.writeUInt8(Buffer.byteLength(e)),n.writeString(e),n.writeUInt8(Buffer.byteLength(r)),n.writeString(r),this.nextRequiredPacketBufferSize=J.SOCKS_INCOMING_PACKET_SIZES.Socks5UserPassAuthenticationResponse,this.socket.write(n.toBuffer()),this.setState(J.SocksClientState.SentAuthentication)}sendSocks5CustomAuthentication(){return pc(this,void 0,void 0,function*(){this.nextRequiredPacketBufferSize=this.options.proxy.custom_auth_response_size,this.socket.write(yield this.options.proxy.custom_auth_request_handler()),this.setState(J.SocksClientState.SentAuthentication)})}handleSocks5CustomAuthHandshakeResponse(e){return pc(this,void 0,void 0,function*(){return yield this.options.proxy.custom_auth_response_handler(e)})}handleSocks5AuthenticationNoAuthHandshakeResponse(e){return pc(this,void 0,void 0,function*(){return e[1]===0})}handleSocks5AuthenticationUserPassHandshakeResponse(e){return pc(this,void 0,void 0,function*(){return e[1]===0})}handleInitialSocks5AuthenticationHandshakeResponse(){return pc(this,void 0,void 0,function*(){this.setState(J.SocksClientState.ReceivedAuthenticationResponse);let e=!1;this.socks5ChosenAuthType===J.Socks5Auth.NoAuth?e=yield this.handleSocks5AuthenticationNoAuthHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===J.Socks5Auth.UserPass?e=yield this.handleSocks5AuthenticationUserPassHandshakeResponse(this.receiveBuffer.get(2)):this.socks5ChosenAuthType===this.options.proxy.custom_auth_method&&(e=yield this.handleSocks5CustomAuthHandshakeResponse(this.receiveBuffer.get(this.options.proxy.custom_auth_response_size))),e?this.sendSocks5CommandRequest():this.closeSocket(J.ERRORS.Socks5AuthenticationFailed)})}sendSocks5CommandRequest(){let e=new yn.SmartBuffer;e.writeUInt8(5),e.writeUInt8(J.SocksCommand[this.options.command]),e.writeUInt8(0),mc.isIPv4(this.options.destination.host)?(e.writeUInt8(J.Socks5HostType.IPv4),e.writeBuffer((0,Kn.ipToBuffer)(this.options.destination.host))):mc.isIPv6(this.options.destination.host)?(e.writeUInt8(J.Socks5HostType.IPv6),e.writeBuffer((0,Kn.ipToBuffer)(this.options.destination.host))):(e.writeUInt8(J.Socks5HostType.Hostname),e.writeUInt8(this.options.destination.host.length),e.writeString(this.options.destination.host)),e.writeUInt16BE(this.options.destination.port),this.nextRequiredPacketBufferSize=J.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.socket.write(e.toBuffer()),this.setState(J.SocksClientState.SentFinalHandshake)}handleSocks5FinalHandshakeResponse(){let e=this.receiveBuffer.peek(5);if(e[0]!==5||e[1]!==J.Socks5Response.Granted)this.closeSocket(`${J.ERRORS.InvalidSocks5FinalHandshakeRejected} - ${J.Socks5Response[e[1]]}`);else{let r=e[3],n,s;if(r===J.Socks5HostType.IPv4){let i=J.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<i){this.nextRequiredPacketBufferSize=i;return}s=yn.SmartBuffer.fromBuffer(this.receiveBuffer.get(i).slice(4)),n={host:(0,Kn.int32ToIpv4)(s.readUInt32BE()),port:s.readUInt16BE()},n.host==="0.0.0.0"&&(n.host=this.options.proxy.ipaddress)}else if(r===J.Socks5HostType.Hostname){let i=e[4],o=J.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(i);if(this.receiveBuffer.length<o){this.nextRequiredPacketBufferSize=o;return}s=yn.SmartBuffer.fromBuffer(this.receiveBuffer.get(o).slice(5)),n={host:s.readString(i),port:s.readUInt16BE()}}else if(r===J.Socks5HostType.IPv6){let i=J.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<i){this.nextRequiredPacketBufferSize=i;return}s=yn.SmartBuffer.fromBuffer(this.receiveBuffer.get(i).slice(4)),n={host:j3.Address6.fromByteArray(Array.from(s.readBuffer(16))).canonicalForm(),port:s.readUInt16BE()}}this.setState(J.SocksClientState.ReceivedFinalResponse),J.SocksCommand[this.options.command]===J.SocksCommand.connect?(this.setState(J.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:n,socket:this.socket})):J.SocksCommand[this.options.command]===J.SocksCommand.bind?(this.setState(J.SocksClientState.BoundWaitingForConnection),this.nextRequiredPacketBufferSize=J.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHeader,this.emit("bound",{remoteHost:n,socket:this.socket})):J.SocksCommand[this.options.command]===J.SocksCommand.associate&&(this.setState(J.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:n,socket:this.socket}))}}handleSocks5IncomingConnectionResponse(){let e=this.receiveBuffer.peek(5);if(e[0]!==5||e[1]!==J.Socks5Response.Granted)this.closeSocket(`${J.ERRORS.Socks5ProxyRejectedIncomingBoundConnection} - ${J.Socks5Response[e[1]]}`);else{let r=e[3],n,s;if(r===J.Socks5HostType.IPv4){let i=J.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv4;if(this.receiveBuffer.length<i){this.nextRequiredPacketBufferSize=i;return}s=yn.SmartBuffer.fromBuffer(this.receiveBuffer.get(i).slice(4)),n={host:(0,Kn.int32ToIpv4)(s.readUInt32BE()),port:s.readUInt16BE()},n.host==="0.0.0.0"&&(n.host=this.options.proxy.ipaddress)}else if(r===J.Socks5HostType.Hostname){let i=e[4],o=J.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseHostname(i);if(this.receiveBuffer.length<o){this.nextRequiredPacketBufferSize=o;return}s=yn.SmartBuffer.fromBuffer(this.receiveBuffer.get(o).slice(5)),n={host:s.readString(i),port:s.readUInt16BE()}}else if(r===J.Socks5HostType.IPv6){let i=J.SOCKS_INCOMING_PACKET_SIZES.Socks5ResponseIPv6;if(this.receiveBuffer.length<i){this.nextRequiredPacketBufferSize=i;return}s=yn.SmartBuffer.fromBuffer(this.receiveBuffer.get(i).slice(4)),n={host:j3.Address6.fromByteArray(Array.from(s.readBuffer(16))).canonicalForm(),port:s.readUInt16BE()}}this.setState(J.SocksClientState.Established),this.removeInternalSocketHandlers(),this.emit("established",{remoteHost:n,socket:this.socket})}}get socksClientOptions(){return Object.assign({},this.options)}};Xo.SocksClient=V3});var e5=g(sa=>{"use strict";d();var JK=sa&&sa.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),XK=sa&&sa.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&JK(e,t,r)};Object.defineProperty(sa,"__esModule",{value:!0});XK(Z7(),sa)});var Xs=g(Js=>{"use strict";d();Object.defineProperty(Js,"__esModule",{value:!0});Js.aws4=void 0;Js.getKerberos=ZK;Js.getZstdLibrary=eY;Js.getAwsCredentialProvider=tY;Js.getGcpMetadata=rY;Js.getSnappy=nY;Js.getSocks=sY;Js.getMongoDBClientEncryption=oY;var Zo=Z();function B1(t){let e=t?{kModuleError:t}:{};return new Proxy(e,{get:(r,n)=>{if(n==="kModuleError")return t;throw t},set:()=>{throw t}})}function ZK(){let t;try{t=require("kerberos")}catch(e){t=B1(new Zo.MongoMissingDependencyError("Optional module `kerberos` not found. Please install it to enable kerberos authentication",{cause:e,dependencyName:"kerberos"}))}return t}function eY(){let t;try{t=require("@mongodb-js/zstd")}catch(e){t=B1(new Zo.MongoMissingDependencyError("Optional module `@mongodb-js/zstd` not found. Please install it to enable zstd compression",{cause:e,dependencyName:"zstd"}))}return t}function tY(){try{return require("@aws-sdk/credential-providers")}catch(t){return B1(new Zo.MongoMissingDependencyError("Optional module `@aws-sdk/credential-providers` not found. Please install it to enable getting aws credentials via the official sdk.",{cause:t,dependencyName:"@aws-sdk/credential-providers"}))}}function rY(){try{return require("gcp-metadata")}catch(t){return B1(new Zo.MongoMissingDependencyError("Optional module `gcp-metadata` not found. Please install it to enable getting gcp credentials via the official sdk.",{cause:t,dependencyName:"gcp-metadata"}))}}function nY(){try{return require("snappy")}catch(t){return{kModuleError:new Zo.MongoMissingDependencyError("Optional module `snappy` not found. Please install it to enable snappy compression",{cause:t,dependencyName:"snappy"})}}}function sY(){try{return e5()}catch(t){return{kModuleError:new Zo.MongoMissingDependencyError("Optional module `socks` not found. Please install it to connections over a SOCKS5 proxy",{cause:t,dependencyName:"socks"})}}}Js.aws4=iY();function iY(){let t;try{t=require("aws4")}catch(e){t=B1(new Zo.MongoMissingDependencyError("Optional module `aws4` not found. Please install it to enable AWS authentication",{cause:e,dependencyName:"aws4"}))}return t}function oY(){let t=null;try{t=require("mongodb-client-encryption")}catch(e){return{kModuleError:new Zo.MongoMissingDependencyError("Optional module `mongodb-client-encryption` not found. Please install it to use auto encryption or ClientEncryption.",{cause:e,dependencyName:"mongodb-client-encryption"})}}return t}});var eu=g(yc=>{"use strict";d();Object.defineProperty(yc,"__esModule",{value:!0});yc.AuthProvider=yc.AuthContext=void 0;var uY=Z(),z3=class{constructor(e,r,n){this.reauthenticating=!1,this.connection=e,this.credentials=r,this.options=n}};yc.AuthContext=z3;var W3=class{async prepare(e,r){return e}async reauth(e){if(e.reauthenticating)throw new uY.MongoRuntimeError("Reauthentication already in progress.");try{e.reauthenticating=!0,await this.auth(e)}finally{e.reauthenticating=!1}}};yc.AuthProvider=W3});var zp=g(Zs=>{"use strict";d();Object.defineProperty(Zs,"__esModule",{value:!0});Zs.GSSAPI=Zs.GSSAPICanonicalizationValue=void 0;Zs.performGSSAPICanonicalizeHostName=n5;Zs.resolveCname=Y3;var G3=require("dns"),aY=Xs(),t5=Z(),cY=ae(),lY=eu();Zs.GSSAPICanonicalizationValue=Object.freeze({on:!0,off:!1,none:"none",forward:"forward",forwardAndReverse:"forwardAndReverse"});async function H3(t,e){return await t.command((0,cY.ns)("$external.$cmd"),e)}var I1,K3=class extends lY.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(n==null)throw new t5.MongoMissingCredentialsError("Credentials required for GSSAPI authentication");let{username:s}=n,i=await hY(e),o=await i.step(""),u=await H3(r,fY(o)),a=await r5(i,10,u.payload),c=await H3(r,dY(a,u.conversationId)),l=await pY(i,s,c.payload);await H3(r,{saslContinue:1,conversationId:c.conversationId,payload:l})}};Zs.GSSAPI=K3;async function hY(t){let{hostAddress:e}=t.options,{credentials:r}=t;if(!e||typeof e.host!="string"||!r)throw new t5.MongoInvalidArgumentError("Connection must have host and port and credentials defined.");if(mY(),"kModuleError"in I1)throw I1.kModuleError;let{initializeClient:n}=I1,{username:s,password:i}=r,o=r.mechanismProperties,u=o.SERVICE_NAME??"mongodb",a=await n5(e.host,o),c={};i!=null&&Object.assign(c,{user:s,password:i});let l=o.SERVICE_HOST??a,h=`${u}${process.platform==="win32"?"/":"@"}${l}`;return"SERVICE_REALM"in o&&(h=`${h}@${o.SERVICE_REALM}`),await n(h,c)}function fY(t){return{saslStart:1,mechanism:"GSSAPI",payload:t,autoAuthorize:1}}function dY(t,e){return{saslContinue:1,conversationId:e,payload:t}}async function r5(t,e,r){try{return await t.step(r)||""}catch(n){if(e===0)throw n;return await r5(t,e-1,r)}}async function pY(t,e,r){let n=await t.unwrap(r);return await t.wrap(n||"",{user:e})}async function n5(t,e){let r=e.CANONICALIZE_HOST_NAME;if(!r||r===Zs.GSSAPICanonicalizationValue.none)return t;if(r===Zs.GSSAPICanonicalizationValue.on||r===Zs.GSSAPICanonicalizationValue.forwardAndReverse){let{address:n}=await G3.promises.lookup(t);try{let s=await G3.promises.resolvePtr(n);return s.length>0?s[0]:t}catch{return await Y3(t)}}else return await Y3(t)}async function Y3(t){try{let e=await G3.promises.resolveCname(t);return e.length>0?e[0]:t}catch{return t}}function mY(){I1||(I1=(0,aY.getKerberos)())}});var Di=g(Ti=>{"use strict";d();Object.defineProperty(Ti,"__esModule",{value:!0});Ti.AUTH_MECHS_AUTH_SRC_EXTERNAL=Ti.AuthMechanism=void 0;Ti.AuthMechanism=Object.freeze({MONGODB_AWS:"MONGODB-AWS",MONGODB_CR:"MONGODB-CR",MONGODB_DEFAULT:"DEFAULT",MONGODB_GSSAPI:"GSSAPI",MONGODB_PLAIN:"PLAIN",MONGODB_SCRAM_SHA1:"SCRAM-SHA-1",MONGODB_SCRAM_SHA256:"SCRAM-SHA-256",MONGODB_X509:"MONGODB-X509",MONGODB_OIDC:"MONGODB-OIDC"});Ti.AUTH_MECHS_AUTH_SRC_EXTERNAL=new Set([Ti.AuthMechanism.MONGODB_GSSAPI,Ti.AuthMechanism.MONGODB_AWS,Ti.AuthMechanism.MONGODB_OIDC,Ti.AuthMechanism.MONGODB_X509])});var Wp=g(ia=>{"use strict";d();Object.defineProperty(ia,"__esModule",{value:!0});ia.MongoCredentials=ia.DEFAULT_ALLOWED_HOSTS=void 0;var _s=Z(),yY=zp(),on=Di();function gY(t){return t&&Array.isArray(t.saslSupportedMechs)?t.saslSupportedMechs.includes(on.AuthMechanism.MONGODB_SCRAM_SHA256)?on.AuthMechanism.MONGODB_SCRAM_SHA256:on.AuthMechanism.MONGODB_SCRAM_SHA1:on.AuthMechanism.MONGODB_SCRAM_SHA256}var s5=["test","azure","gcp","k8s"],i5="Auth mechanism property ALLOWED_HOSTS must be an array of strings.";ia.DEFAULT_ALLOWED_HOSTS=["*.mongodb.net","*.mongodb-qa.net","*.mongodb-dev.net","*.mongodbgov.net","localhost","127.0.0.1","::1"];var EY="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure or gcp.",Q3=class t{constructor(e){this.username=e.username??"",this.password=e.password,this.source=e.source,!this.source&&e.db&&(this.source=e.db),this.mechanism=e.mechanism||on.AuthMechanism.MONGODB_DEFAULT,this.mechanismProperties=e.mechanismProperties||{},this.mechanism.match(/MONGODB-AWS/i)&&(!this.username&&process.env.AWS_ACCESS_KEY_ID&&(this.username=process.env.AWS_ACCESS_KEY_ID),!this.password&&process.env.AWS_SECRET_ACCESS_KEY&&(this.password=process.env.AWS_SECRET_ACCESS_KEY),this.mechanismProperties.AWS_SESSION_TOKEN==null&&process.env.AWS_SESSION_TOKEN!=null&&(this.mechanismProperties={...this.mechanismProperties,AWS_SESSION_TOKEN:process.env.AWS_SESSION_TOKEN})),this.mechanism===on.AuthMechanism.MONGODB_OIDC&&!this.mechanismProperties.ALLOWED_HOSTS&&(this.mechanismProperties={...this.mechanismProperties,ALLOWED_HOSTS:ia.DEFAULT_ALLOWED_HOSTS}),Object.freeze(this.mechanismProperties),Object.freeze(this)}equals(e){return this.mechanism===e.mechanism&&this.username===e.username&&this.password===e.password&&this.source===e.source}resolveAuthMechanism(e){return this.mechanism.match(/DEFAULT/i)?new t({username:this.username,password:this.password,source:this.source,mechanism:gY(e),mechanismProperties:this.mechanismProperties}):this}validate(){if((this.mechanism===on.AuthMechanism.MONGODB_GSSAPI||this.mechanism===on.AuthMechanism.MONGODB_PLAIN||this.mechanism===on.AuthMechanism.MONGODB_SCRAM_SHA1||this.mechanism===on.AuthMechanism.MONGODB_SCRAM_SHA256)&&!this.username)throw new _s.MongoMissingCredentialsError(`Username required for mechanism '${this.mechanism}'`);if(this.mechanism===on.AuthMechanism.MONGODB_OIDC){if(this.username&&this.mechanismProperties.ENVIRONMENT&&this.mechanismProperties.ENVIRONMENT!=="azure")throw new _s.MongoInvalidArgumentError(`username and ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' may not be used together for mechanism '${this.mechanism}'.`);if(this.username&&this.password)throw new _s.MongoInvalidArgumentError(`No password is allowed in ENVIRONMENT '${this.mechanismProperties.ENVIRONMENT}' for '${this.mechanism}'.`);if((this.mechanismProperties.ENVIRONMENT==="azure"||this.mechanismProperties.ENVIRONMENT==="gcp")&&!this.mechanismProperties.TOKEN_RESOURCE)throw new _s.MongoInvalidArgumentError(EY);if(this.mechanismProperties.ENVIRONMENT&&!s5.includes(this.mechanismProperties.ENVIRONMENT))throw new _s.MongoInvalidArgumentError(`Currently only a ENVIRONMENT in ${s5.join(",")} is supported for mechanism '${this.mechanism}'.`);if(!this.mechanismProperties.ENVIRONMENT&&!this.mechanismProperties.OIDC_CALLBACK&&!this.mechanismProperties.OIDC_HUMAN_CALLBACK)throw new _s.MongoInvalidArgumentError(`Either a ENVIRONMENT, OIDC_CALLBACK, or OIDC_HUMAN_CALLBACK must be specified for mechanism '${this.mechanism}'.`);if(this.mechanismProperties.ALLOWED_HOSTS){let r=this.mechanismProperties.ALLOWED_HOSTS;if(!Array.isArray(r))throw new _s.MongoInvalidArgumentError(i5);for(let n of r)if(typeof n!="string")throw new _s.MongoInvalidArgumentError(i5)}}if(on.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(this.mechanism)&&this.source!=null&&this.source!=="$external")throw new _s.MongoAPIError(`Invalid source '${this.source}' for mechanism '${this.mechanism}' specified.`);if(this.mechanism===on.AuthMechanism.MONGODB_PLAIN&&this.source==null)throw new _s.MongoAPIError("PLAIN Authentication Mechanism needs an auth source");if(this.mechanism===on.AuthMechanism.MONGODB_X509&&this.password!=null){if(this.password===""){Reflect.set(this,"password",void 0);return}throw new _s.MongoAPIError("Password not allowed for mechanism MONGODB-X509")}let e=this.mechanismProperties.CANONICALIZE_HOST_NAME??!1;if(!Object.values(yY.GSSAPICanonicalizationValue).includes(e))throw new _s.MongoAPIError(`Invalid CANONICALIZE_HOST_NAME value: ${e}`)}static merge(e,r){return new t({username:r.username??e?.username??"",password:r.password??e?.password??"",mechanism:r.mechanism??e?.mechanism??on.AuthMechanism.MONGODB_DEFAULT,mechanismProperties:r.mechanismProperties??e?.mechanismProperties??{},source:r.source??r.db??e?.source??"admin"})}};ia.MongoCredentials=Q3});var Gp=g(tt=>{"use strict";d();function st(t,e,r){return r.globals&&(t=r.globals[t.name]),new t(`${r.context?r.context:"Value"} ${e}.`)}function _c(t,e){if(typeof t=="bigint")throw st(TypeError,"is a BigInt which cannot be converted to a number",e);return e.globals?e.globals.Number(t):Number(t)}function u5(t){return t>0&&t%1===.5&&!(t&1)||t<0&&t%1===-.5&&(t&1)===1?P1(Math.floor(t)):P1(Math.round(t))}function Hp(t){return P1(Math.trunc(t))}function o5(t){return t<0?-1:1}function _Y(t,e){let r=t%e;return o5(e)!==o5(r)?r+e:r}function P1(t){return t===0?0:t}function Ac(t,{unsigned:e}){let r,n;e?(r=0,n=2**t-1):(r=-(2**(t-1)),n=2**(t-1)-1);let s=2**t,i=2**(t-1);return(o,u={})=>{let a=_c(o,u);if(a=P1(a),u.enforceRange){if(!Number.isFinite(a))throw st(TypeError,"is not a finite number",u);if(a=Hp(a),a<r||a>n)throw st(TypeError,`is outside the accepted range of ${r} to ${n}, inclusive`,u);return a}return!Number.isNaN(a)&&u.clamp?(a=Math.min(Math.max(a,r),n),a=u5(a),a):!Number.isFinite(a)||a===0?0:(a=Hp(a),a>=r&&a<=n?a:(a=_Y(a,s),!e&&a>=i?a-s:a))}}function a5(t,{unsigned:e}){let r=Number.MAX_SAFE_INTEGER,n=e?0:Number.MIN_SAFE_INTEGER,s=e?BigInt.asUintN:BigInt.asIntN;return(i,o={})=>{let u=_c(i,o);if(u=P1(u),o.enforceRange){if(!Number.isFinite(u))throw st(TypeError,"is not a finite number",o);if(u=Hp(u),u<n||u>r)throw st(TypeError,`is outside the accepted range of ${n} to ${r}, inclusive`,o);return u}if(!Number.isNaN(u)&&o.clamp)return u=Math.min(Math.max(u,n),r),u=u5(u),u;if(!Number.isFinite(u)||u===0)return 0;let a=BigInt(Hp(u));return a=s(t,a),Number(a)}}tt.any=t=>t;tt.undefined=()=>{};tt.boolean=t=>!!t;tt.byte=Ac(8,{unsigned:!1});tt.octet=Ac(8,{unsigned:!0});tt.short=Ac(16,{unsigned:!1});tt["unsigned short"]=Ac(16,{unsigned:!0});tt.long=Ac(32,{unsigned:!1});tt["unsigned long"]=Ac(32,{unsigned:!0});tt["long long"]=a5(64,{unsigned:!1});tt["unsigned long long"]=a5(64,{unsigned:!0});tt.double=(t,e={})=>{let r=_c(t,e);if(!Number.isFinite(r))throw st(TypeError,"is not a finite floating-point value",e);return r};tt["unrestricted double"]=(t,e={})=>_c(t,e);tt.float=(t,e={})=>{let r=_c(t,e);if(!Number.isFinite(r))throw st(TypeError,"is not a finite floating-point value",e);if(Object.is(r,-0))return r;let n=Math.fround(r);if(!Number.isFinite(n))throw st(TypeError,"is outside the range of a single-precision floating-point value",e);return n};tt["unrestricted float"]=(t,e={})=>{let r=_c(t,e);return isNaN(r)||Object.is(r,-0)?r:Math.fround(r)};tt.DOMString=(t,e={})=>{if(e.treatNullAsEmptyString&&t===null)return"";if(typeof t=="symbol")throw st(TypeError,"is a symbol, which cannot be converted to a string",e);return(e.globals?e.globals.String:String)(t)};tt.ByteString=(t,e={})=>{let r=tt.DOMString(t,e),n;for(let s=0;(n=r.codePointAt(s))!==void 0;++s)if(n>255)throw st(TypeError,"is not a valid ByteString",e);return r};tt.USVString=(t,e={})=>{let r=tt.DOMString(t,e),n=r.length,s=[];for(let i=0;i<n;++i){let o=r.charCodeAt(i);if(o<55296||o>57343)s.push(String.fromCodePoint(o));else if(56320<=o&&o<=57343)s.push(String.fromCodePoint(65533));else if(i===n-1)s.push(String.fromCodePoint(65533));else{let u=r.charCodeAt(i+1);if(56320<=u&&u<=57343){let a=o&1023,c=u&1023;s.push(String.fromCodePoint(65536+1024*a+c)),++i}else s.push(String.fromCodePoint(65533))}}return s.join("")};tt.object=(t,e={})=>{if(t===null||typeof t!="object"&&typeof t!="function")throw st(TypeError,"is not an object",e);return t};var AY=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get,SY=typeof SharedArrayBuffer=="function"?Object.getOwnPropertyDescriptor(SharedArrayBuffer.prototype,"byteLength").get:null;function J3(t){try{return AY.call(t),!0}catch{return!1}}function gc(t){try{return SY.call(t),!0}catch{return!1}}function Ec(t){try{return new Uint8Array(t),!1}catch{return!0}}tt.ArrayBuffer=(t,e={})=>{if(!J3(t))throw e.allowShared&&!gc(t)?st(TypeError,"is not an ArrayBuffer or SharedArrayBuffer",e):st(TypeError,"is not an ArrayBuffer",e);if(Ec(t))throw st(TypeError,"is a detached ArrayBuffer",e);return t};var OY=Object.getOwnPropertyDescriptor(DataView.prototype,"byteLength").get;tt.DataView=(t,e={})=>{try{OY.call(t)}catch{throw st(TypeError,"is not a DataView",e)}if(!e.allowShared&&gc(t.buffer))throw st(TypeError,"is backed by a SharedArrayBuffer, which is not allowed",e);if(Ec(t.buffer))throw st(TypeError,"is backed by a detached ArrayBuffer",e);return t};var wY=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Uint8Array).prototype,Symbol.toStringTag).get;[Int8Array,Int16Array,Int32Array,Uint8Array,Uint16Array,Uint32Array,Uint8ClampedArray,Float32Array,Float64Array].forEach(t=>{let{name:e}=t,r=/^[AEIOU]/u.test(e)?"an":"a";tt[e]=(n,s={})=>{if(!ArrayBuffer.isView(n)||wY.call(n)!==e)throw st(TypeError,`is not ${r} ${e} object`,s);if(!s.allowShared&&gc(n.buffer))throw st(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",s);if(Ec(n.buffer))throw st(TypeError,"is a view on a detached ArrayBuffer",s);return n}});tt.ArrayBufferView=(t,e={})=>{if(!ArrayBuffer.isView(t))throw st(TypeError,"is not a view on an ArrayBuffer or SharedArrayBuffer",e);if(!e.allowShared&&gc(t.buffer))throw st(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(Ec(t.buffer))throw st(TypeError,"is a view on a detached ArrayBuffer",e);return t};tt.BufferSource=(t,e={})=>{if(ArrayBuffer.isView(t)){if(!e.allowShared&&gc(t.buffer))throw st(TypeError,"is a view on a SharedArrayBuffer, which is not allowed",e);if(Ec(t.buffer))throw st(TypeError,"is a view on a detached ArrayBuffer",e);return t}if(!e.allowShared&&!J3(t))throw st(TypeError,"is not an ArrayBuffer or a view on one",e);if(e.allowShared&&!gc(t)&&!J3(t))throw st(TypeError,"is not an ArrayBuffer, SharedArrayBuffer, or a view on one",e);if(Ec(t))throw st(TypeError,"is a detached ArrayBuffer",e);return t};tt.DOMTimeStamp=tt["unsigned long long"]});var Yp=g((m5,y5)=>{"use strict";d();function CY(t){return typeof t=="object"&&t!==null||typeof t=="function"}var c5=Function.prototype.call.bind(Object.prototype.hasOwnProperty);function bY(t,e){for(let r of Reflect.ownKeys(e)){let n=Reflect.getOwnPropertyDescriptor(e,r);if(n&&!Reflect.defineProperty(t,r,n))throw new TypeError(`Cannot redefine property: ${String(r)}`)}}function TY(t,e){let r=f5(t);return Object.defineProperties(Object.create(r["%Object.prototype%"]),Object.getOwnPropertyDescriptors(e))}var l5=Symbol("wrapper"),h5=Symbol("impl"),Sc=Symbol("SameObject caches"),Kp=Symbol.for("[webidl2js] constructor registry"),DY=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);function f5(t){if(c5(t,Kp))return t[Kp];let e=Object.create(null);e["%Object.prototype%"]=t.Object.prototype,e["%IteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(new t.Array()[Symbol.iterator]()));try{e["%AsyncIteratorPrototype%"]=Object.getPrototypeOf(Object.getPrototypeOf(t.eval("(async function* () {})").prototype))}catch{e["%AsyncIteratorPrototype%"]=DY}return t[Kp]=e,e}function MY(t,e,r){return t[Sc]||(t[Sc]=Object.create(null)),e in t[Sc]||(t[Sc][e]=r()),t[Sc][e]}function d5(t){return t?t[l5]:null}function p5(t){return t?t[h5]:null}function BY(t){let e=d5(t);return e||t}function IY(t){let e=p5(t);return e||t}var PY=Symbol("internal");function NY(t){if(typeof t!="string")return!1;let e=t>>>0;if(e===2**32-1)return!1;let r=`${e}`;return t===r}var FY=Object.getOwnPropertyDescriptor(ArrayBuffer.prototype,"byteLength").get;function RY(t){try{return FY.call(t),!0}catch{return!1}}function vY([t,e],r){let n;switch(r){case"key":n=t;break;case"value":n=e;break;case"key+value":n=[t,e];break}return{value:n,done:!1}}var $Y=Symbol("supports property index"),xY=Symbol("supported property indices"),kY=Symbol("supports property name"),qY=Symbol("supported property names"),LY=Symbol("indexed property get"),jY=Symbol("indexed property set new"),UY=Symbol("indexed property set existing"),VY=Symbol("named property get"),zY=Symbol("named property set new"),WY=Symbol("named property set existing"),HY=Symbol("named property delete"),GY=Symbol("async iterator get the next iteration result"),KY=Symbol("async iterator return steps"),YY=Symbol("async iterator initialization steps"),QY=Symbol("async iterator end of iteration");y5.exports=m5={isObject:CY,hasOwn:c5,define:bY,newObjectInRealm:TY,wrapperSymbol:l5,implSymbol:h5,getSameObject:MY,ctorRegistrySymbol:Kp,initCtorRegistry:f5,wrapperForImpl:d5,implForWrapper:p5,tryWrapperForImpl:BY,tryImplForWrapper:IY,iterInternalSymbol:PY,isArrayBuffer:RY,isArrayIndexPropName:NY,supportsPropertyIndex:$Y,supportedPropertyIndices:xY,supportsPropertyName:kY,supportedPropertyNames:qY,indexedGet:LY,indexedSetNew:jY,indexedSetExisting:UY,namedGet:VY,namedSetNew:zY,namedSetExisting:WY,namedDelete:HY,asyncIteratorNext:GY,asyncIteratorReturn:KY,asyncIteratorInit:YY,asyncIteratorEOI:QY,iteratorResult:vY}});var b5=g((A2e,C5)=>{"use strict";d();var E5="-",JY=/^xn--/,XY=/[^\0-\x7F]/,ZY=/[\x2E\u3002\uFF0E\uFF61]/g,eQ={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},X3=35,Mi=Math.floor,Z3=String.fromCharCode;function tu(t){throw new RangeError(eQ[t])}function tQ(t,e){let r=[],n=t.length;for(;n--;)r[n]=e(t[n]);return r}function _5(t,e){let r=t.split("@"),n="";r.length>1&&(n=r[0]+"@",t=r[1]),t=t.replace(ZY,".");let s=t.split("."),i=tQ(s,e).join(".");return n+i}function A5(t){let e=[],r=0,n=t.length;for(;r<n;){let s=t.charCodeAt(r++);if(s>=55296&&s<=56319&&r<n){let i=t.charCodeAt(r++);(i&64512)==56320?e.push(((s&1023)<<10)+(i&1023)+65536):(e.push(s),r--)}else e.push(s)}return e}var rQ=t=>String.fromCodePoint(...t),nQ=function(t){return t>=48&&t<58?26+(t-48):t>=65&&t<91?t-65:t>=97&&t<123?t-97:36},g5=function(t,e){return t+22+75*(t<26)-((e!=0)<<5)},S5=function(t,e,r){let n=0;for(t=r?Mi(t/700):t>>1,t+=Mi(t/e);t>X3*26>>1;n+=36)t=Mi(t/X3);return Mi(n+(X3+1)*t/(t+38))},O5=function(t){let e=[],r=t.length,n=0,s=128,i=72,o=t.lastIndexOf(E5);o<0&&(o=0);for(let u=0;u<o;++u)t.charCodeAt(u)>=128&&tu("not-basic"),e.push(t.charCodeAt(u));for(let u=o>0?o+1:0;u<r;){let a=n;for(let l=1,h=36;;h+=36){u>=r&&tu("invalid-input");let f=nQ(t.charCodeAt(u++));f>=36&&tu("invalid-input"),f>Mi((2147483647-n)/l)&&tu("overflow"),n+=f*l;let p=h<=i?1:h>=i+26?26:h-i;if(f<p)break;let m=36-p;l>Mi(2147483647/m)&&tu("overflow"),l*=m}let c=e.length+1;i=S5(n-a,c,a==0),Mi(n/c)>2147483647-s&&tu("overflow"),s+=Mi(n/c),n%=c,e.splice(n++,0,s)}return String.fromCodePoint(...e)},w5=function(t){let e=[];t=A5(t);let r=t.length,n=128,s=0,i=72;for(let a of t)a<128&&e.push(Z3(a));let o=e.length,u=o;for(o&&e.push(E5);u<r;){let a=2147483647;for(let l of t)l>=n&&l<a&&(a=l);let c=u+1;a-n>Mi((2147483647-s)/c)&&tu("overflow"),s+=(a-n)*c,n=a;for(let l of t)if(l<n&&++s>2147483647&&tu("overflow"),l===n){let h=s;for(let f=36;;f+=36){let p=f<=i?1:f>=i+26?26:f-i;if(h<p)break;let m=h-p,y=36-p;e.push(Z3(g5(p+m%y,0))),h=Mi(m/y)}e.push(Z3(g5(h,0))),i=S5(s,c,u===o),s=0,++u}++s,++n}return e.join("")},sQ=function(t){return _5(t,function(e){return JY.test(e)?O5(e.slice(4).toLowerCase()):e})},iQ=function(t){return _5(t,function(e){return XY.test(e)?"xn--"+w5(e):e})},oQ={version:"2.3.1",ucs2:{decode:A5,encode:rQ},decode:O5,encode:w5,toASCII:iQ,toUnicode:sQ};C5.exports=oQ});var D5=g((O2e,T5)=>{"use strict";d();var uQ=/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3C\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CF3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1715\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{11002}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11082}\u{110B0}-\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{11134}\u{11145}\u{11146}\u{11173}\u{11180}-\u{11182}\u{111B3}-\u{111C0}\u{111C9}-\u{111CC}\u{111CE}\u{111CF}\u{1122C}-\u{11237}\u{1123E}\u{11241}\u{112DF}-\u{112EA}\u{11300}-\u{11303}\u{1133B}\u{1133C}\u{1133E}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11357}\u{11362}\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11435}-\u{11446}\u{1145E}\u{114B0}-\u{114C3}\u{115AF}-\u{115B5}\u{115B8}-\u{115C0}\u{115DC}\u{115DD}\u{11630}-\u{11640}\u{116AB}-\u{116B7}\u{1171D}-\u{1172B}\u{1182C}-\u{1183A}\u{11930}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{1193E}\u{11940}\u{11942}\u{11943}\u{119D1}-\u{119D7}\u{119DA}-\u{119E0}\u{119E4}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A39}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A5B}\u{11A8A}-\u{11A99}\u{11C2F}-\u{11C36}\u{11C38}-\u{11C3F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D8A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D97}\u{11EF3}-\u{11EF6}\u{11F00}\u{11F01}\u{11F03}\u{11F34}-\u{11F3A}\u{11F3E}-\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F51}-\u{16F87}\u{16F8F}-\u{16F92}\u{16FE4}\u{16FF0}\u{16FF1}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D165}-\u{1D169}\u{1D16D}-\u{1D172}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]/u,aQ=/[\u094D\u09CD\u0A4D\u0ACD\u0B4D\u0BCD\u0C4D\u0CCD\u0D3B\u0D3C\u0D4D\u0DCA\u0E3A\u0EBA\u0F84\u1039\u103A\u1714\u1734\u17D2\u1A60\u1B44\u1BAA\u1BAB\u1BF2\u1BF3\u2D7F\uA806\uA8C4\uA953\uA9C0\uAAF6\uABED\u{10A3F}\u{11046}\u{1107F}\u{110B9}\u{11133}\u{11134}\u{111C0}\u{11235}\u{112EA}\u{1134D}\u{11442}\u{114C2}\u{115BF}\u{1163F}\u{116B6}\u{1172B}\u{11839}\u{119E0}\u{11A34}\u{11A47}\u{11A99}\u{11C3F}\u{11D44}\u{11D45}\u{11D97}]/u,cQ=/[\u0620\u0626\u0628\u062A-\u062E\u0633-\u063F\u0641-\u0647\u0649\u064A\u066E\u066F\u0678-\u0687\u069A-\u06BF\u06C1\u06C2\u06CC\u06CE\u06D0\u06D1\u06FA-\u06FC\u06FF\u0712-\u0714\u071A-\u071D\u071F-\u0727\u0729\u072B\u072D\u072E\u074E-\u0758\u075C-\u076A\u076D-\u0770\u0772\u0775-\u0777\u077A-\u077F\u07CA-\u07EA\u0841-\u0845\u0848\u084A-\u0853\u0855\u0860\u0862-\u0865\u0868\u08A0-\u08A9\u08AF\u08B0\u08B3\u08B4\u08B6-\u08B8\u08BA-\u08BD\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA872\u{10AC0}-\u{10AC4}\u{10ACD}\u{10AD3}-\u{10ADC}\u{10ADE}-\u{10AE0}\u{10AEB}-\u{10AEE}\u{10B80}\u{10B82}\u{10B86}-\u{10B88}\u{10B8A}\u{10B8B}\u{10B8D}\u{10B90}\u{10BAD}\u{10BAE}\u{10D00}-\u{10D21}\u{10D23}\u{10F30}-\u{10F32}\u{10F34}-\u{10F44}\u{10F51}-\u{10F53}\u{1E900}-\u{1E943}][\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10F46}-\u{10F50}\u{11001}\u{11038}-\u{11046}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{13430}-\u{13438}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E130}-\u{1E136}\u{1E2EC}-\u{1E2EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*\u200C[\xAD\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u061C\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u070F\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC6\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200B\u200E\u200F\u202A-\u202E\u2060-\u2064\u206A-\u206F\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFEFF\uFFF9-\uFFFB\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10F46}-\u{10F50}\u{11001}\u{11038}-\u{11046}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C3F}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{13430}-\u{13438}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E130}-\u{1E136}\u{1E2EC}-\u{1E2EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94B}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*[\u0620\u0622-\u063F\u0641-\u064A\u066E\u066F\u0671-\u0673\u0675-\u06D3\u06D5\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u077F\u07CA-\u07EA\u0840-\u0855\u0860\u0862-\u0865\u0867-\u086A\u08A0-\u08AC\u08AE-\u08B4\u08B6-\u08BD\u1807\u1820-\u1878\u1887-\u18A8\u18AA\uA840-\uA871\u{10AC0}-\u{10AC5}\u{10AC7}\u{10AC9}\u{10ACA}\u{10ACE}-\u{10AD6}\u{10AD8}-\u{10AE1}\u{10AE4}\u{10AEB}-\u{10AEF}\u{10B80}-\u{10B91}\u{10BA9}-\u{10BAE}\u{10D01}-\u{10D23}\u{10F30}-\u{10F44}\u{10F51}-\u{10F54}\u{1E900}-\u{1E943}]/u,lQ=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,hQ=/[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B50-\u1B6A\u1B74-\u1B7E\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C88\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u249C-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{11700}-\u{1171A}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6DA}\u{1D6DC}-\u{1D714}\u{1D716}-\u{1D74E}\u{1D750}-\u{1D788}\u{1D78A}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D800}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]/u,fQ=/[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}]/u,dQ=/^[\0-\x08\x0E-\x1B!-@\[-`\{-\x84\x86-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02B9\u02BA\u02C2-\u02CF\u02D2-\u02DF\u02E5-\u02ED\u02EF-\u036F\u0374\u0375\u037E\u0384\u0385\u0387\u03F6\u0483-\u0489\u058A\u058D-\u058F\u0591-\u05C7\u05D0-\u05EA\u05EF-\u05F4\u0600-\u070D\u070F-\u074A\u074D-\u07B1\u07C0-\u07FA\u07FD-\u082D\u0830-\u083E\u0840-\u085B\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u0898-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09F2\u09F3\u09FB\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AF1\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0BF3-\u0BFA\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C78-\u0C7E\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E3F\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39-\u0F3D\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1390-\u1399\u1400\u169B\u169C\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DB\u17DD\u17F0-\u17F9\u1800-\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1940\u1944\u1945\u19DE-\u19FF\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u200B-\u200D\u200F-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2070\u2074-\u207E\u2080-\u208E\u20A0-\u20C0\u20D0-\u20F0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u2150-\u215F\u2189-\u218B\u2190-\u2335\u237B-\u2394\u2396-\u2426\u2440-\u244A\u2460-\u249B\u24EA-\u26AB\u26AD-\u27FF\u2900-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2CEF-\u2CF1\u2CF9-\u2CFF\u2D7F\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u3004\u3008-\u3020\u302A-\u302D\u3030\u3036\u3037\u303D-\u303F\u3099-\u309C\u30A0\u30FB\u31C0-\u31E3\u321D\u321E\u3250-\u325F\u327C-\u327E\u32B1-\u32BF\u32CC-\u32CF\u3377-\u337A\u33DE\u33DF\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA60D-\uA60F\uA66F-\uA67F\uA69E\uA69F\uA6F0\uA6F1\uA700-\uA721\uA788\uA802\uA806\uA80B\uA825\uA826\uA828-\uA82C\uA838\uA839\uA874-\uA877\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uAB6A\uAB6B\uABE5\uABE8\uABED\uFB1D-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD8F\uFD92-\uFDC7\uFDCF\uFDF0-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFE70-\uFE74\uFE76-\uFEFC\uFEFF\uFF01-\uFF20\uFF3B-\uFF40\uFF5B-\uFF65\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10101}\u{10140}-\u{1018C}\u{10190}-\u{1019C}\u{101A0}\u{101FD}\u{102E0}-\u{102FB}\u{10376}-\u{1037A}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{1091F}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A38}-\u{10A3A}\u{10A3F}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE6}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B39}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D27}\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAB}-\u{10EAD}\u{10EB0}\u{10EB1}\u{10EFD}-\u{10F27}\u{10F30}-\u{10F59}\u{10F70}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{11001}\u{11038}-\u{11046}\u{11052}-\u{11065}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{11660}-\u{1166C}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{11FD5}-\u{11FF1}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE2}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1BCA0}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D173}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D1E9}\u{1D1EA}\u{1D200}-\u{1D245}\u{1D300}-\u{1D356}\u{1D6DB}\u{1D715}\u{1D74F}\u{1D789}\u{1D7C3}\u{1D7CE}-\u{1D7FF}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E2FF}\u{1E4EC}-\u{1E4EF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8D6}\u{1E900}-\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F10F}\u{1F12F}\u{1F16A}-\u{1F16F}\u{1F1AD}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}\u{1F8B1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA88}\u{1FA90}-\u{1FABD}\u{1FABF}-\u{1FAC5}\u{1FACE}-\u{1FADB}\u{1FAE0}-\u{1FAE8}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBCA}\u{1FBF0}-\u{1FBF9}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}]*$/u,pQ=/[0-9\xB2\xB3\xB9\u05BE\u05C0\u05C3\u05C6\u05D0-\u05EA\u05EF-\u05F4\u0600-\u0605\u0608\u060B\u060D\u061B-\u064A\u0660-\u0669\u066B-\u066F\u0671-\u06D5\u06DD\u06E5\u06E6\u06EE-\u070D\u070F\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07C0-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u083E\u0840-\u0858\u085E\u0860-\u086A\u0870-\u088E\u0890\u0891\u08A0-\u08C9\u08E2\u200F\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBC2\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFC\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\u{102E1}-\u{102FB}\u{10800}-\u{10805}\u{10808}\u{1080A}-\u{10835}\u{10837}\u{10838}\u{1083C}\u{1083F}-\u{10855}\u{10857}-\u{1089E}\u{108A7}-\u{108AF}\u{108E0}-\u{108F2}\u{108F4}\u{108F5}\u{108FB}-\u{1091B}\u{10920}-\u{10939}\u{1093F}\u{10980}-\u{109B7}\u{109BC}-\u{109CF}\u{109D2}-\u{10A00}\u{10A10}-\u{10A13}\u{10A15}-\u{10A17}\u{10A19}-\u{10A35}\u{10A40}-\u{10A48}\u{10A50}-\u{10A58}\u{10A60}-\u{10A9F}\u{10AC0}-\u{10AE4}\u{10AEB}-\u{10AF6}\u{10B00}-\u{10B35}\u{10B40}-\u{10B55}\u{10B58}-\u{10B72}\u{10B78}-\u{10B91}\u{10B99}-\u{10B9C}\u{10BA9}-\u{10BAF}\u{10C00}-\u{10C48}\u{10C80}-\u{10CB2}\u{10CC0}-\u{10CF2}\u{10CFA}-\u{10D23}\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}\u{10E80}-\u{10EA9}\u{10EAD}\u{10EB0}\u{10EB1}\u{10F00}-\u{10F27}\u{10F30}-\u{10F45}\u{10F51}-\u{10F59}\u{10F70}-\u{10F81}\u{10F86}-\u{10F89}\u{10FB0}-\u{10FCB}\u{10FE0}-\u{10FF6}\u{1D7CE}-\u{1D7FF}\u{1E800}-\u{1E8C4}\u{1E8C7}-\u{1E8CF}\u{1E900}-\u{1E943}\u{1E94B}\u{1E950}-\u{1E959}\u{1E95E}\u{1E95F}\u{1EC71}-\u{1ECB4}\u{1ED01}-\u{1ED3D}\u{1EE00}-\u{1EE03}\u{1EE05}-\u{1EE1F}\u{1EE21}\u{1EE22}\u{1EE24}\u{1EE27}\u{1EE29}-\u{1EE32}\u{1EE34}-\u{1EE37}\u{1EE39}\u{1EE3B}\u{1EE42}\u{1EE47}\u{1EE49}\u{1EE4B}\u{1EE4D}-\u{1EE4F}\u{1EE51}\u{1EE52}\u{1EE54}\u{1EE57}\u{1EE59}\u{1EE5B}\u{1EE5D}\u{1EE5F}\u{1EE61}\u{1EE62}\u{1EE64}\u{1EE67}-\u{1EE6A}\u{1EE6C}-\u{1EE72}\u{1EE74}-\u{1EE77}\u{1EE79}-\u{1EE7C}\u{1EE7E}\u{1EE80}-\u{1EE89}\u{1EE8B}-\u{1EE9B}\u{1EEA1}-\u{1EEA3}\u{1EEA5}-\u{1EEA9}\u{1EEAB}-\u{1EEBB}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u,mQ=/[0-9\xB2\xB3\xB9\u06F0-\u06F9\u2070\u2074-\u2079\u2080-\u2089\u2488-\u249B\uFF10-\uFF19\u{102E1}-\u{102FB}\u{1D7CE}-\u{1D7FF}\u{1F100}-\u{1F10A}\u{1FBF0}-\u{1FBF9}]/u,yQ=/[\u0600-\u0605\u0660-\u0669\u066B\u066C\u06DD\u0890\u0891\u08E2\u{10D30}-\u{10D39}\u{10E60}-\u{10E7E}]/u,gQ=/^[\0-\x08\x0E-\x1B!-\x84\x86-\u0377\u037A-\u037F\u0384-\u038A\u038C\u038E-\u03A1\u03A3-\u052F\u0531-\u0556\u0559-\u058A\u058D-\u058F\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0606\u0607\u0609\u060A\u060C\u060E-\u061A\u064B-\u065F\u066A\u0670\u06D6-\u06DC\u06DE-\u06E4\u06E7-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07F6-\u07F9\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09FE\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A76\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AF1\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B77\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BFA\u0C00-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3C-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C5D\u0C60-\u0C63\u0C66-\u0C6F\u0C77-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D00-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4F\u0D54-\u0D63\u0D66-\u0D7F\u0D81-\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E3A\u0E3F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECE\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F47\u0F49-\u0F6C\u0F71-\u0F97\u0F99-\u0FBC\u0FBE-\u0FCC\u0FCE-\u0FDA\u1000-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u137C\u1380-\u1399\u13A0-\u13F5\u13F8-\u13FD\u1400-\u167F\u1681-\u169C\u16A0-\u16F8\u1700-\u1715\u171F-\u1736\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17DD\u17E0-\u17E9\u17F0-\u17F9\u1800-\u1819\u1820-\u1878\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1940\u1944-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u19DE-\u1A1B\u1A1E-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1AB0-\u1ACE\u1B00-\u1B4C\u1B50-\u1B7E\u1B80-\u1BF3\u1BFC-\u1C37\u1C3B-\u1C49\u1C4D-\u1C88\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD0-\u1CFA\u1D00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FC4\u1FC6-\u1FD3\u1FD6-\u1FDB\u1FDD-\u1FEF\u1FF2-\u1FF4\u1FF6-\u1FFE\u200B-\u200E\u2010-\u2027\u202F-\u205E\u2060-\u2064\u206A-\u2071\u2074-\u208E\u2090-\u209C\u20A0-\u20C0\u20D0-\u20F0\u2100-\u218B\u2190-\u2426\u2440-\u244A\u2460-\u2B73\u2B76-\u2B95\u2B97-\u2CF3\u2CF9-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2E5D\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303F\u3041-\u3096\u3099-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31E3\u31F0-\u321E\u3220-\uA48C\uA490-\uA4C6\uA4D0-\uA62B\uA640-\uA6F7\uA700-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA82C\uA830-\uA839\uA840-\uA877\uA880-\uA8C5\uA8CE-\uA8D9\uA8E0-\uA953\uA95F-\uA97C\uA980-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA5C-\uAAC2\uAADB-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB6B\uAB70-\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1E\uFB29\uFD3E-\uFD4F\uFDCF\uFDFD-\uFE19\uFE20-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFEFF\uFF01-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFF9-\uFFFD\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}-\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1018E}\u{10190}-\u{1019C}\u{101A0}\u{101D0}-\u{101FD}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E0}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{1037A}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{1091F}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10B39}-\u{10B3F}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11000}-\u{1104D}\u{11052}-\u{11075}\u{1107F}-\u{110C2}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11100}-\u{11134}\u{11136}-\u{11147}\u{11150}-\u{11176}\u{11180}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{11241}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112EA}\u{112F0}-\u{112F9}\u{11300}-\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133B}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11400}-\u{1145B}\u{1145D}-\u{11461}\u{11480}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B5}\u{115B8}-\u{115DD}\u{11600}-\u{11644}\u{11650}-\u{11659}\u{11660}-\u{1166C}\u{11680}-\u{116B9}\u{116C0}-\u{116C9}\u{11700}-\u{1171A}\u{1171D}-\u{1172B}\u{11730}-\u{11746}\u{11800}-\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193B}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D7}\u{119DA}-\u{119E4}\u{11A00}-\u{11A47}\u{11A50}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C36}\u{11C38}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11C92}-\u{11CA7}\u{11CA9}-\u{11CB6}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D47}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D90}\u{11D91}\u{11D93}-\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF8}\u{11F00}-\u{11F10}\u{11F12}-\u{11F3A}\u{11F3E}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FF1}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{13455}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF0}-\u{16AF5}\u{16B00}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F4F}-\u{16F87}\u{16F8F}-\u{16F9F}\u{16FE0}-\u{16FE4}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}-\u{1BCA3}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D1EA}\u{1D200}-\u{1D245}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D300}-\u{1D356}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D7CB}\u{1D7CE}-\u{1DA8B}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E030}-\u{1E06D}\u{1E08F}\u{1E100}-\u{1E12C}\u{1E130}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AE}\u{1E2C0}-\u{1E2F9}\u{1E2FF}\u{1E4D0}-\u{1E4F9}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{1EEF0}\u{1EEF1}\u{1F000}-\u{1F02B}\u{1F030}-\u{1F093}\u{1F0A0}-\u{1F0AE}\u{1F0B1}-\u{1F0BF}\u{1F0C1}-\u{1F0CF}\u{1F0D1}-\u{1F0F5}\u{1F100}-\u{1F1AD}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1F260}-\u{1F265}\u{1F300}-\u{1F6D7}\u{1F6DC}-\u{1F6EC}\u{1F6F0}-\u{1F6FC}\u{1F700}-\u{1F776}\u{1F77B}-\u{1F7D9}\u{1F7E0}-\u{1F7EB}\u{1F7F0}\u{1F800}-\u{1F80B}\u{1F810}-\u{1F847}\u{1F850}-\u{1F859}\u{1F860}-\u{1F887}\u{1F890}-\u{1F8AD}\u{1F8B0}\u{1F8B1}\u{1F900}-\u{1FA53}\u{1FA60}-\u{1FA6D}\u{1FA70}-\u{1FA7C}\u{1FA80}-\u{1FA88}\u{1FA90}-\u{1FABD}\u{1FABF}-\u{1FAC5}\u{1FACE}-\u{1FADB}\u{1FAE0}-\u{1FAE8}\u{1FAF0}-\u{1FAF8}\u{1FB00}-\u{1FB92}\u{1FB94}-\u{1FBCA}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{E0001}\u{E0020}-\u{E007F}\u{E0100}-\u{E01EF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}]*$/u,EQ=/[0-9A-Za-z\xAA\xB2\xB3\xB5\xB9\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u02BB-\u02C1\u02D0\u02D1\u02E0-\u02E4\u02EE\u0370-\u0373\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0482\u048A-\u052F\u0531-\u0556\u0559-\u0589\u06F0-\u06F9\u0903-\u0939\u093B\u093D-\u0940\u0949-\u094C\u094E-\u0950\u0958-\u0961\u0964-\u0980\u0982\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD-\u09C0\u09C7\u09C8\u09CB\u09CC\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E1\u09E6-\u09F1\u09F4-\u09FA\u09FC\u09FD\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3E-\u0A40\u0A59-\u0A5C\u0A5E\u0A66-\u0A6F\u0A72-\u0A74\u0A76\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD-\u0AC0\u0AC9\u0ACB\u0ACC\u0AD0\u0AE0\u0AE1\u0AE6-\u0AF0\u0AF9\u0B02\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B3E\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0B57\u0B5C\u0B5D\u0B5F-\u0B61\u0B66-\u0B77\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0BD0\u0BD7\u0BE6-\u0BF2\u0C01-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C41-\u0C44\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C66-\u0C6F\u0C77\u0C7F\u0C80\u0C82-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD-\u0CC4\u0CC6-\u0CC8\u0CCA\u0CCB\u0CD5\u0CD6\u0CDD\u0CDE\u0CE0\u0CE1\u0CE6-\u0CEF\u0CF1-\u0CF3\u0D02-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D4E\u0D4F\u0D54-\u0D61\u0D66-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCF-\u0DD1\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2-\u0DF4\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E4F-\u0E5B\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00-\u0F17\u0F1A-\u0F34\u0F36\u0F38\u0F3E-\u0F47\u0F49-\u0F6C\u0F7F\u0F85\u0F88-\u0F8C\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE-\u0FDA\u1000-\u102C\u1031\u1038\u103B\u103C\u103F-\u1057\u105A-\u105D\u1061-\u1070\u1075-\u1081\u1083\u1084\u1087-\u108C\u108E-\u109C\u109E-\u10C5\u10C7\u10CD\u10D0-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1360-\u137C\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u167F\u1681-\u169A\u16A0-\u16F8\u1700-\u1711\u1715\u171F-\u1731\u1734-\u1736\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17B6\u17BE-\u17C5\u17C7\u17C8\u17D4-\u17DA\u17DC\u17E0-\u17E9\u1810-\u1819\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A16\u1A19\u1A1A\u1A1E-\u1A55\u1A57\u1A61\u1A63\u1A64\u1A6D-\u1A72\u1A80-\u1A89\u1A90-\u1A99\u1AA0-\u1AAD\u1B04-\u1B33\u1B35\u1B3B\u1B3D-\u1B41\u1B43-\u1B4C\u1B50-\u1B6A\u1B74-\u1B7E\u1B82-\u1BA1\u1BA6\u1BA7\u1BAA\u1BAE-\u1BE5\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1BFC-\u1C2B\u1C34\u1C35\u1C3B-\u1C49\u1C4D-\u1C88\u1C90-\u1CBA\u1CBD-\u1CC7\u1CD3\u1CE1\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5-\u1CF7\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200E\u2070\u2071\u2074-\u2079\u207F-\u2089\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u214F\u2160-\u2188\u2336-\u237A\u2395\u2488-\u24E9\u26AC\u2800-\u28FF\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D70\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u302E\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\u31BF\u31F0-\u321C\u3220-\u324F\u3260-\u327B\u327F-\u32B0\u32C0-\u32CB\u32D0-\u3376\u337B-\u33DD\u33E0-\u33FE\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA60C\uA610-\uA62B\uA640-\uA66E\uA680-\uA69D\uA6A0-\uA6EF\uA6F2-\uA6F7\uA722-\uA787\uA789-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA824\uA827\uA830-\uA837\uA840-\uA873\uA880-\uA8C3\uA8CE-\uA8D9\uA8F2-\uA8FE\uA900-\uA925\uA92E-\uA946\uA952\uA953\uA95F-\uA97C\uA983-\uA9B2\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9CD\uA9CF-\uA9D9\uA9DE-\uA9E4\uA9E6-\uA9FE\uAA00-\uAA28\uAA2F\uAA30\uAA33\uAA34\uAA40-\uAA42\uAA44-\uAA4B\uAA4D\uAA50-\uAA59\uAA5C-\uAA7B\uAA7D-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAAEB\uAAEE-\uAAF5\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB69\uAB70-\uABE4\uABE6\uABE7\uABE9-\uABEC\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uD800-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFF10-\uFF19\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC\u{10000}-\u{1000B}\u{1000D}-\u{10026}\u{10028}-\u{1003A}\u{1003C}\u{1003D}\u{1003F}-\u{1004D}\u{10050}-\u{1005D}\u{10080}-\u{100FA}\u{10100}\u{10102}\u{10107}-\u{10133}\u{10137}-\u{1013F}\u{1018D}\u{1018E}\u{101D0}-\u{101FC}\u{10280}-\u{1029C}\u{102A0}-\u{102D0}\u{102E1}-\u{102FB}\u{10300}-\u{10323}\u{1032D}-\u{1034A}\u{10350}-\u{10375}\u{10380}-\u{1039D}\u{1039F}-\u{103C3}\u{103C8}-\u{103D5}\u{10400}-\u{1049D}\u{104A0}-\u{104A9}\u{104B0}-\u{104D3}\u{104D8}-\u{104FB}\u{10500}-\u{10527}\u{10530}-\u{10563}\u{1056F}-\u{1057A}\u{1057C}-\u{1058A}\u{1058C}-\u{10592}\u{10594}\u{10595}\u{10597}-\u{105A1}\u{105A3}-\u{105B1}\u{105B3}-\u{105B9}\u{105BB}\u{105BC}\u{10600}-\u{10736}\u{10740}-\u{10755}\u{10760}-\u{10767}\u{10780}-\u{10785}\u{10787}-\u{107B0}\u{107B2}-\u{107BA}\u{11000}\u{11002}-\u{11037}\u{11047}-\u{1104D}\u{11066}-\u{1106F}\u{11071}\u{11072}\u{11075}\u{11082}-\u{110B2}\u{110B7}\u{110B8}\u{110BB}-\u{110C1}\u{110CD}\u{110D0}-\u{110E8}\u{110F0}-\u{110F9}\u{11103}-\u{11126}\u{1112C}\u{11136}-\u{11147}\u{11150}-\u{11172}\u{11174}-\u{11176}\u{11182}-\u{111B5}\u{111BF}-\u{111C8}\u{111CD}\u{111CE}\u{111D0}-\u{111DF}\u{111E1}-\u{111F4}\u{11200}-\u{11211}\u{11213}-\u{1122E}\u{11232}\u{11233}\u{11235}\u{11238}-\u{1123D}\u{1123F}\u{11240}\u{11280}-\u{11286}\u{11288}\u{1128A}-\u{1128D}\u{1128F}-\u{1129D}\u{1129F}-\u{112A9}\u{112B0}-\u{112DE}\u{112E0}-\u{112E2}\u{112F0}-\u{112F9}\u{11302}\u{11303}\u{11305}-\u{1130C}\u{1130F}\u{11310}\u{11313}-\u{11328}\u{1132A}-\u{11330}\u{11332}\u{11333}\u{11335}-\u{11339}\u{1133D}-\u{1133F}\u{11341}-\u{11344}\u{11347}\u{11348}\u{1134B}-\u{1134D}\u{11350}\u{11357}\u{1135D}-\u{11363}\u{11400}-\u{11437}\u{11440}\u{11441}\u{11445}\u{11447}-\u{1145B}\u{1145D}\u{1145F}-\u{11461}\u{11480}-\u{114B2}\u{114B9}\u{114BB}-\u{114BE}\u{114C1}\u{114C4}-\u{114C7}\u{114D0}-\u{114D9}\u{11580}-\u{115B1}\u{115B8}-\u{115BB}\u{115BE}\u{115C1}-\u{115DB}\u{11600}-\u{11632}\u{1163B}\u{1163C}\u{1163E}\u{11641}-\u{11644}\u{11650}-\u{11659}\u{11680}-\u{116AA}\u{116AC}\u{116AE}\u{116AF}\u{116B6}\u{116B8}\u{116B9}\u{116C0}-\u{116C9}\u{11700}-\u{1171A}\u{11720}\u{11721}\u{11726}\u{11730}-\u{11746}\u{11800}-\u{1182E}\u{11838}\u{1183B}\u{118A0}-\u{118F2}\u{118FF}-\u{11906}\u{11909}\u{1190C}-\u{11913}\u{11915}\u{11916}\u{11918}-\u{11935}\u{11937}\u{11938}\u{1193D}\u{1193F}-\u{11942}\u{11944}-\u{11946}\u{11950}-\u{11959}\u{119A0}-\u{119A7}\u{119AA}-\u{119D3}\u{119DC}-\u{119DF}\u{119E1}-\u{119E4}\u{11A00}\u{11A07}\u{11A08}\u{11A0B}-\u{11A32}\u{11A39}\u{11A3A}\u{11A3F}-\u{11A46}\u{11A50}\u{11A57}\u{11A58}\u{11A5C}-\u{11A89}\u{11A97}\u{11A9A}-\u{11AA2}\u{11AB0}-\u{11AF8}\u{11B00}-\u{11B09}\u{11C00}-\u{11C08}\u{11C0A}-\u{11C2F}\u{11C3E}-\u{11C45}\u{11C50}-\u{11C6C}\u{11C70}-\u{11C8F}\u{11CA9}\u{11CB1}\u{11CB4}\u{11D00}-\u{11D06}\u{11D08}\u{11D09}\u{11D0B}-\u{11D30}\u{11D46}\u{11D50}-\u{11D59}\u{11D60}-\u{11D65}\u{11D67}\u{11D68}\u{11D6A}-\u{11D8E}\u{11D93}\u{11D94}\u{11D96}\u{11D98}\u{11DA0}-\u{11DA9}\u{11EE0}-\u{11EF2}\u{11EF5}-\u{11EF8}\u{11F02}-\u{11F10}\u{11F12}-\u{11F35}\u{11F3E}\u{11F3F}\u{11F41}\u{11F43}-\u{11F59}\u{11FB0}\u{11FC0}-\u{11FD4}\u{11FFF}-\u{12399}\u{12400}-\u{1246E}\u{12470}-\u{12474}\u{12480}-\u{12543}\u{12F90}-\u{12FF2}\u{13000}-\u{1343F}\u{13441}-\u{13446}\u{14400}-\u{14646}\u{16800}-\u{16A38}\u{16A40}-\u{16A5E}\u{16A60}-\u{16A69}\u{16A6E}-\u{16ABE}\u{16AC0}-\u{16AC9}\u{16AD0}-\u{16AED}\u{16AF5}\u{16B00}-\u{16B2F}\u{16B37}-\u{16B45}\u{16B50}-\u{16B59}\u{16B5B}-\u{16B61}\u{16B63}-\u{16B77}\u{16B7D}-\u{16B8F}\u{16E40}-\u{16E9A}\u{16F00}-\u{16F4A}\u{16F50}-\u{16F87}\u{16F93}-\u{16F9F}\u{16FE0}\u{16FE1}\u{16FE3}\u{16FF0}\u{16FF1}\u{17000}-\u{187F7}\u{18800}-\u{18CD5}\u{18D00}-\u{18D08}\u{1AFF0}-\u{1AFF3}\u{1AFF5}-\u{1AFFB}\u{1AFFD}\u{1AFFE}\u{1B000}-\u{1B122}\u{1B132}\u{1B150}-\u{1B152}\u{1B155}\u{1B164}-\u{1B167}\u{1B170}-\u{1B2FB}\u{1BC00}-\u{1BC6A}\u{1BC70}-\u{1BC7C}\u{1BC80}-\u{1BC88}\u{1BC90}-\u{1BC99}\u{1BC9C}\u{1BC9F}\u{1CF50}-\u{1CFC3}\u{1D000}-\u{1D0F5}\u{1D100}-\u{1D126}\u{1D129}-\u{1D166}\u{1D16A}-\u{1D172}\u{1D183}\u{1D184}\u{1D18C}-\u{1D1A9}\u{1D1AE}-\u{1D1E8}\u{1D2C0}-\u{1D2D3}\u{1D2E0}-\u{1D2F3}\u{1D360}-\u{1D378}\u{1D400}-\u{1D454}\u{1D456}-\u{1D49C}\u{1D49E}\u{1D49F}\u{1D4A2}\u{1D4A5}\u{1D4A6}\u{1D4A9}-\u{1D4AC}\u{1D4AE}-\u{1D4B9}\u{1D4BB}\u{1D4BD}-\u{1D4C3}\u{1D4C5}-\u{1D505}\u{1D507}-\u{1D50A}\u{1D50D}-\u{1D514}\u{1D516}-\u{1D51C}\u{1D51E}-\u{1D539}\u{1D53B}-\u{1D53E}\u{1D540}-\u{1D544}\u{1D546}\u{1D54A}-\u{1D550}\u{1D552}-\u{1D6A5}\u{1D6A8}-\u{1D6DA}\u{1D6DC}-\u{1D714}\u{1D716}-\u{1D74E}\u{1D750}-\u{1D788}\u{1D78A}-\u{1D7C2}\u{1D7C4}-\u{1D7CB}\u{1D7CE}-\u{1D9FF}\u{1DA37}-\u{1DA3A}\u{1DA6D}-\u{1DA74}\u{1DA76}-\u{1DA83}\u{1DA85}-\u{1DA8B}\u{1DF00}-\u{1DF1E}\u{1DF25}-\u{1DF2A}\u{1E030}-\u{1E06D}\u{1E100}-\u{1E12C}\u{1E137}-\u{1E13D}\u{1E140}-\u{1E149}\u{1E14E}\u{1E14F}\u{1E290}-\u{1E2AD}\u{1E2C0}-\u{1E2EB}\u{1E2F0}-\u{1E2F9}\u{1E4D0}-\u{1E4EB}\u{1E4F0}-\u{1E4F9}\u{1E7E0}-\u{1E7E6}\u{1E7E8}-\u{1E7EB}\u{1E7ED}\u{1E7EE}\u{1E7F0}-\u{1E7FE}\u{1F100}-\u{1F10A}\u{1F110}-\u{1F12E}\u{1F130}-\u{1F169}\u{1F170}-\u{1F1AC}\u{1F1E6}-\u{1F202}\u{1F210}-\u{1F23B}\u{1F240}-\u{1F248}\u{1F250}\u{1F251}\u{1FBF0}-\u{1FBF9}\u{20000}-\u{2A6DF}\u{2A700}-\u{2B739}\u{2B740}-\u{2B81D}\u{2B820}-\u{2CEA1}\u{2CEB0}-\u{2EBE0}\u{2F800}-\u{2FA1D}\u{30000}-\u{3134A}\u{31350}-\u{323AF}\u{F0000}-\u{FFFFD}\u{100000}-\u{10FFFD}][\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09C1-\u09C4\u09CD\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3F\u0B41-\u0B44\u0B4D\u0B55\u0B56\u0B62\u0B63\u0B82\u0BC0\u0BCD\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CCC\u0CCD\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D41-\u0D44\u0D4D\u0D62\u0D63\u0D81\u0DCA\u0DD2-\u0DD4\u0DD6\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34\u1B36-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302D\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\u{101FD}\u{102E0}\u{10376}-\u{1037A}\u{10A01}-\u{10A03}\u{10A05}\u{10A06}\u{10A0C}-\u{10A0F}\u{10A38}-\u{10A3A}\u{10A3F}\u{10AE5}\u{10AE6}\u{10D24}-\u{10D27}\u{10EAB}\u{10EAC}\u{10EFD}-\u{10EFF}\u{10F46}-\u{10F50}\u{10F82}-\u{10F85}\u{11001}\u{11038}-\u{11046}\u{11070}\u{11073}\u{11074}\u{1107F}-\u{11081}\u{110B3}-\u{110B6}\u{110B9}\u{110BA}\u{110C2}\u{11100}-\u{11102}\u{11127}-\u{1112B}\u{1112D}-\u{11134}\u{11173}\u{11180}\u{11181}\u{111B6}-\u{111BE}\u{111C9}-\u{111CC}\u{111CF}\u{1122F}-\u{11231}\u{11234}\u{11236}\u{11237}\u{1123E}\u{11241}\u{112DF}\u{112E3}-\u{112EA}\u{11300}\u{11301}\u{1133B}\u{1133C}\u{11340}\u{11366}-\u{1136C}\u{11370}-\u{11374}\u{11438}-\u{1143F}\u{11442}-\u{11444}\u{11446}\u{1145E}\u{114B3}-\u{114B8}\u{114BA}\u{114BF}\u{114C0}\u{114C2}\u{114C3}\u{115B2}-\u{115B5}\u{115BC}\u{115BD}\u{115BF}\u{115C0}\u{115DC}\u{115DD}\u{11633}-\u{1163A}\u{1163D}\u{1163F}\u{11640}\u{116AB}\u{116AD}\u{116B0}-\u{116B5}\u{116B7}\u{1171D}-\u{1171F}\u{11722}-\u{11725}\u{11727}-\u{1172B}\u{1182F}-\u{11837}\u{11839}\u{1183A}\u{1193B}\u{1193C}\u{1193E}\u{11943}\u{119D4}-\u{119D7}\u{119DA}\u{119DB}\u{119E0}\u{11A01}-\u{11A06}\u{11A09}\u{11A0A}\u{11A33}-\u{11A38}\u{11A3B}-\u{11A3E}\u{11A47}\u{11A51}-\u{11A56}\u{11A59}-\u{11A5B}\u{11A8A}-\u{11A96}\u{11A98}\u{11A99}\u{11C30}-\u{11C36}\u{11C38}-\u{11C3D}\u{11C92}-\u{11CA7}\u{11CAA}-\u{11CB0}\u{11CB2}\u{11CB3}\u{11CB5}\u{11CB6}\u{11D31}-\u{11D36}\u{11D3A}\u{11D3C}\u{11D3D}\u{11D3F}-\u{11D45}\u{11D47}\u{11D90}\u{11D91}\u{11D95}\u{11D97}\u{11EF3}\u{11EF4}\u{11F00}\u{11F01}\u{11F36}-\u{11F3A}\u{11F40}\u{11F42}\u{13440}\u{13447}-\u{13455}\u{16AF0}-\u{16AF4}\u{16B30}-\u{16B36}\u{16F4F}\u{16F8F}-\u{16F92}\u{16FE4}\u{1BC9D}\u{1BC9E}\u{1CF00}-\u{1CF2D}\u{1CF30}-\u{1CF46}\u{1D167}-\u{1D169}\u{1D17B}-\u{1D182}\u{1D185}-\u{1D18B}\u{1D1AA}-\u{1D1AD}\u{1D242}-\u{1D244}\u{1DA00}-\u{1DA36}\u{1DA3B}-\u{1DA6C}\u{1DA75}\u{1DA84}\u{1DA9B}-\u{1DA9F}\u{1DAA1}-\u{1DAAF}\u{1E000}-\u{1E006}\u{1E008}-\u{1E018}\u{1E01B}-\u{1E021}\u{1E023}\u{1E024}\u{1E026}-\u{1E02A}\u{1E08F}\u{1E130}-\u{1E136}\u{1E2AE}\u{1E2EC}-\u{1E2EF}\u{1E4EC}-\u{1E4EF}\u{1E8D0}-\u{1E8D6}\u{1E944}-\u{1E94A}\u{E0100}-\u{E01EF}]*$/u;T5.exports={combiningMarks:uQ,combiningClassVirama:aQ,validZWNJ:cQ,bidiDomain:lQ,bidiS1LTR:hQ,bidiS1RTL:fQ,bidiS2:dQ,bidiS3:pQ,bidiS4EN:mQ,bidiS4AN:yQ,bidiS5:gQ,bidiS6:EQ}});var M5=g((C2e,_Q)=>{_Q.exports=[[[0,44],4],[[45,46],2],[47,4],[[48,57],2],[[58,64],4],[65,1,"a"],[66,1,"b"],[67,1,"c"],[68,1,"d"],[69,1,"e"],[70,1,"f"],[71,1,"g"],[72,1,"h"],[73,1,"i"],[74,1,"j"],[75,1,"k"],[76,1,"l"],[77,1,"m"],[78,1,"n"],[79,1,"o"],[80,1,"p"],[81,1,"q"],[82,1,"r"],[83,1,"s"],[84,1,"t"],[85,1,"u"],[86,1,"v"],[87,1,"w"],[88,1,"x"],[89,1,"y"],[90,1,"z"],[[91,96],4],[[97,122],2],[[123,127],4],[[128,159],3],[160,5," "],[[161,167],2],[168,5," \u0308"],[169,2],[170,1,"a"],[[171,172],2],[173,7],[174,2],[175,5," \u0304"],[[176,177],2],[178,1,"2"],[179,1,"3"],[180,5," \u0301"],[181,1,"\u03BC"],[182,2],[183,2],[184,5," \u0327"],[185,1,"1"],[186,1,"o"],[187,2],[188,1,"1\u20444"],[189,1,"1\u20442"],[190,1,"3\u20444"],[191,2],[192,1,"\xE0"],[193,1,"\xE1"],[194,1,"\xE2"],[195,1,"\xE3"],[196,1,"\xE4"],[197,1,"\xE5"],[198,1,"\xE6"],[199,1,"\xE7"],[200,1,"\xE8"],[201,1,"\xE9"],[202,1,"\xEA"],[203,1,"\xEB"],[204,1,"\xEC"],[205,1,"\xED"],[206,1,"\xEE"],[207,1,"\xEF"],[208,1,"\xF0"],[209,1,"\xF1"],[210,1,"\xF2"],[211,1,"\xF3"],[212,1,"\xF4"],[213,1,"\xF5"],[214,1,"\xF6"],[215,2],[216,1,"\xF8"],[217,1,"\xF9"],[218,1,"\xFA"],[219,1,"\xFB"],[220,1,"\xFC"],[221,1,"\xFD"],[222,1,"\xFE"],[223,6,"ss"],[[224,246],2],[247,2],[[248,255],2],[256,1,"\u0101"],[257,2],[258,1,"\u0103"],[259,2],[260,1,"\u0105"],[261,2],[262,1,"\u0107"],[263,2],[264,1,"\u0109"],[265,2],[266,1,"\u010B"],[267,2],[268,1,"\u010D"],[269,2],[270,1,"\u010F"],[271,2],[272,1,"\u0111"],[273,2],[274,1,"\u0113"],[275,2],[276,1,"\u0115"],[277,2],[278,1,"\u0117"],[279,2],[280,1,"\u0119"],[281,2],[282,1,"\u011B"],[283,2],[284,1,"\u011D"],[285,2],[286,1,"\u011F"],[287,2],[288,1,"\u0121"],[289,2],[290,1,"\u0123"],[291,2],[292,1,"\u0125"],[293,2],[294,1,"\u0127"],[295,2],[296,1,"\u0129"],[297,2],[298,1,"\u012B"],[299,2],[300,1,"\u012D"],[301,2],[302,1,"\u012F"],[303,2],[304,1,"i\u0307"],[305,2],[[306,307],1,"ij"],[308,1,"\u0135"],[309,2],[310,1,"\u0137"],[[311,312],2],[313,1,"\u013A"],[314,2],[315,1,"\u013C"],[316,2],[317,1,"\u013E"],[318,2],[[319,320],1,"l\xB7"],[321,1,"\u0142"],[322,2],[323,1,"\u0144"],[324,2],[325,1,"\u0146"],[326,2],[327,1,"\u0148"],[328,2],[329,1,"\u02BCn"],[330,1,"\u014B"],[331,2],[332,1,"\u014D"],[333,2],[334,1,"\u014F"],[335,2],[336,1,"\u0151"],[337,2],[338,1,"\u0153"],[339,2],[340,1,"\u0155"],[341,2],[342,1,"\u0157"],[343,2],[344,1,"\u0159"],[345,2],[346,1,"\u015B"],[347,2],[348,1,"\u015D"],[349,2],[350,1,"\u015F"],[351,2],[352,1,"\u0161"],[353,2],[354,1,"\u0163"],[355,2],[356,1,"\u0165"],[357,2],[358,1,"\u0167"],[359,2],[360,1,"\u0169"],[361,2],[362,1,"\u016B"],[363,2],[364,1,"\u016D"],[365,2],[366,1,"\u016F"],[367,2],[368,1,"\u0171"],[369,2],[370,1,"\u0173"],[371,2],[372,1,"\u0175"],[373,2],[374,1,"\u0177"],[375,2],[376,1,"\xFF"],[377,1,"\u017A"],[378,2],[379,1,"\u017C"],[380,2],[381,1,"\u017E"],[382,2],[383,1,"s"],[384,2],[385,1,"\u0253"],[386,1,"\u0183"],[387,2],[388,1,"\u0185"],[389,2],[390,1,"\u0254"],[391,1,"\u0188"],[392,2],[393,1,"\u0256"],[394,1,"\u0257"],[395,1,"\u018C"],[[396,397],2],[398,1,"\u01DD"],[399,1,"\u0259"],[400,1,"\u025B"],[401,1,"\u0192"],[402,2],[403,1,"\u0260"],[404,1,"\u0263"],[405,2],[406,1,"\u0269"],[407,1,"\u0268"],[408,1,"\u0199"],[[409,411],2],[412,1,"\u026F"],[413,1,"\u0272"],[414,2],[415,1,"\u0275"],[416,1,"\u01A1"],[417,2],[418,1,"\u01A3"],[419,2],[420,1,"\u01A5"],[421,2],[422,1,"\u0280"],[423,1,"\u01A8"],[424,2],[425,1,"\u0283"],[[426,427],2],[428,1,"\u01AD"],[429,2],[430,1,"\u0288"],[431,1,"\u01B0"],[432,2],[433,1,"\u028A"],[434,1,"\u028B"],[435,1,"\u01B4"],[436,2],[437,1,"\u01B6"],[438,2],[439,1,"\u0292"],[440,1,"\u01B9"],[[441,443],2],[444,1,"\u01BD"],[[445,451],2],[[452,454],1,"d\u017E"],[[455,457],1,"lj"],[[458,460],1,"nj"],[461,1,"\u01CE"],[462,2],[463,1,"\u01D0"],[464,2],[465,1,"\u01D2"],[466,2],[467,1,"\u01D4"],[468,2],[469,1,"\u01D6"],[470,2],[471,1,"\u01D8"],[472,2],[473,1,"\u01DA"],[474,2],[475,1,"\u01DC"],[[476,477],2],[478,1,"\u01DF"],[479,2],[480,1,"\u01E1"],[481,2],[482,1,"\u01E3"],[483,2],[484,1,"\u01E5"],[485,2],[486,1,"\u01E7"],[487,2],[488,1,"\u01E9"],[489,2],[490,1,"\u01EB"],[491,2],[492,1,"\u01ED"],[493,2],[494,1,"\u01EF"],[[495,496],2],[[497,499],1,"dz"],[500,1,"\u01F5"],[501,2],[502,1,"\u0195"],[503,1,"\u01BF"],[504,1,"\u01F9"],[505,2],[506,1,"\u01FB"],[507,2],[508,1,"\u01FD"],[509,2],[510,1,"\u01FF"],[511,2],[512,1,"\u0201"],[513,2],[514,1,"\u0203"],[515,2],[516,1,"\u0205"],[517,2],[518,1,"\u0207"],[519,2],[520,1,"\u0209"],[521,2],[522,1,"\u020B"],[523,2],[524,1,"\u020D"],[525,2],[526,1,"\u020F"],[527,2],[528,1,"\u0211"],[529,2],[530,1,"\u0213"],[531,2],[532,1,"\u0215"],[533,2],[534,1,"\u0217"],[535,2],[536,1,"\u0219"],[537,2],[538,1,"\u021B"],[539,2],[540,1,"\u021D"],[541,2],[542,1,"\u021F"],[543,2],[544,1,"\u019E"],[545,2],[546,1,"\u0223"],[547,2],[548,1,"\u0225"],[549,2],[550,1,"\u0227"],[551,2],[552,1,"\u0229"],[553,2],[554,1,"\u022B"],[555,2],[556,1,"\u022D"],[557,2],[558,1,"\u022F"],[559,2],[560,1,"\u0231"],[561,2],[562,1,"\u0233"],[563,2],[[564,566],2],[[567,569],2],[570,1,"\u2C65"],[571,1,"\u023C"],[572,2],[573,1,"\u019A"],[574,1,"\u2C66"],[[575,576],2],[577,1,"\u0242"],[578,2],[579,1,"\u0180"],[580,1,"\u0289"],[581,1,"\u028C"],[582,1,"\u0247"],[583,2],[584,1,"\u0249"],[585,2],[586,1,"\u024B"],[587,2],[588,1,"\u024D"],[589,2],[590,1,"\u024F"],[591,2],[[592,680],2],[[681,685],2],[[686,687],2],[688,1,"h"],[689,1,"\u0266"],[690,1,"j"],[691,1,"r"],[692,1,"\u0279"],[693,1,"\u027B"],[694,1,"\u0281"],[695,1,"w"],[696,1,"y"],[[697,705],2],[[706,709],2],[[710,721],2],[[722,727],2],[728,5," \u0306"],[729,5," \u0307"],[730,5," \u030A"],[731,5," \u0328"],[732,5," \u0303"],[733,5," \u030B"],[734,2],[735,2],[736,1,"\u0263"],[737,1,"l"],[738,1,"s"],[739,1,"x"],[740,1,"\u0295"],[[741,745],2],[[746,747],2],[748,2],[749,2],[750,2],[[751,767],2],[[768,831],2],[832,1,"\u0300"],[833,1,"\u0301"],[834,2],[835,1,"\u0313"],[836,1,"\u0308\u0301"],[837,1,"\u03B9"],[[838,846],2],[847,7],[[848,855],2],[[856,860],2],[[861,863],2],[[864,865],2],[866,2],[[867,879],2],[880,1,"\u0371"],[881,2],[882,1,"\u0373"],[883,2],[884,1,"\u02B9"],[885,2],[886,1,"\u0377"],[887,2],[[888,889],3],[890,5," \u03B9"],[[891,893],2],[894,5,";"],[895,1,"\u03F3"],[[896,899],3],[900,5," \u0301"],[901,5," \u0308\u0301"],[902,1,"\u03AC"],[903,1,"\xB7"],[904,1,"\u03AD"],[905,1,"\u03AE"],[906,1,"\u03AF"],[907,3],[908,1,"\u03CC"],[909,3],[910,1,"\u03CD"],[911,1,"\u03CE"],[912,2],[913,1,"\u03B1"],[914,1,"\u03B2"],[915,1,"\u03B3"],[916,1,"\u03B4"],[917,1,"\u03B5"],[918,1,"\u03B6"],[919,1,"\u03B7"],[920,1,"\u03B8"],[921,1,"\u03B9"],[922,1,"\u03BA"],[923,1,"\u03BB"],[924,1,"\u03BC"],[925,1,"\u03BD"],[926,1,"\u03BE"],[927,1,"\u03BF"],[928,1,"\u03C0"],[929,1,"\u03C1"],[930,3],[931,1,"\u03C3"],[932,1,"\u03C4"],[933,1,"\u03C5"],[934,1,"\u03C6"],[935,1,"\u03C7"],[936,1,"\u03C8"],[937,1,"\u03C9"],[938,1,"\u03CA"],[939,1,"\u03CB"],[[940,961],2],[962,6,"\u03C3"],[[963,974],2],[975,1,"\u03D7"],[976,1,"\u03B2"],[977,1,"\u03B8"],[978,1,"\u03C5"],[979,1,"\u03CD"],[980,1,"\u03CB"],[981,1,"\u03C6"],[982,1,"\u03C0"],[983,2],[984,1,"\u03D9"],[985,2],[986,1,"\u03DB"],[987,2],[988,1,"\u03DD"],[989,2],[990,1,"\u03DF"],[991,2],[992,1,"\u03E1"],[993,2],[994,1,"\u03E3"],[995,2],[996,1,"\u03E5"],[997,2],[998,1,"\u03E7"],[999,2],[1e3,1,"\u03E9"],[1001,2],[1002,1,"\u03EB"],[1003,2],[1004,1,"\u03ED"],[1005,2],[1006,1,"\u03EF"],[1007,2],[1008,1,"\u03BA"],[1009,1,"\u03C1"],[1010,1,"\u03C3"],[1011,2],[1012,1,"\u03B8"],[1013,1,"\u03B5"],[1014,2],[1015,1,"\u03F8"],[1016,2],[1017,1,"\u03C3"],[1018,1,"\u03FB"],[1019,2],[1020,2],[1021,1,"\u037B"],[1022,1,"\u037C"],[1023,1,"\u037D"],[1024,1,"\u0450"],[1025,1,"\u0451"],[1026,1,"\u0452"],[1027,1,"\u0453"],[1028,1,"\u0454"],[1029,1,"\u0455"],[1030,1,"\u0456"],[1031,1,"\u0457"],[1032,1,"\u0458"],[1033,1,"\u0459"],[1034,1,"\u045A"],[1035,1,"\u045B"],[1036,1,"\u045C"],[1037,1,"\u045D"],[1038,1,"\u045E"],[1039,1,"\u045F"],[1040,1,"\u0430"],[1041,1,"\u0431"],[1042,1,"\u0432"],[1043,1,"\u0433"],[1044,1,"\u0434"],[1045,1,"\u0435"],[1046,1,"\u0436"],[1047,1,"\u0437"],[1048,1,"\u0438"],[1049,1,"\u0439"],[1050,1,"\u043A"],[1051,1,"\u043B"],[1052,1,"\u043C"],[1053,1,"\u043D"],[1054,1,"\u043E"],[1055,1,"\u043F"],[1056,1,"\u0440"],[1057,1,"\u0441"],[1058,1,"\u0442"],[1059,1,"\u0443"],[1060,1,"\u0444"],[1061,1,"\u0445"],[1062,1,"\u0446"],[1063,1,"\u0447"],[1064,1,"\u0448"],[1065,1,"\u0449"],[1066,1,"\u044A"],[1067,1,"\u044B"],[1068,1,"\u044C"],[1069,1,"\u044D"],[1070,1,"\u044E"],[1071,1,"\u044F"],[[1072,1103],2],[1104,2],[[1105,1116],2],[1117,2],[[1118,1119],2],[1120,1,"\u0461"],[1121,2],[1122,1,"\u0463"],[1123,2],[1124,1,"\u0465"],[1125,2],[1126,1,"\u0467"],[1127,2],[1128,1,"\u0469"],[1129,2],[1130,1,"\u046B"],[1131,2],[1132,1,"\u046D"],[1133,2],[1134,1,"\u046F"],[1135,2],[1136,1,"\u0471"],[1137,2],[1138,1,"\u0473"],[1139,2],[1140,1,"\u0475"],[1141,2],[1142,1,"\u0477"],[1143,2],[1144,1,"\u0479"],[1145,2],[1146,1,"\u047B"],[1147,2],[1148,1,"\u047D"],[1149,2],[1150,1,"\u047F"],[1151,2],[1152,1,"\u0481"],[1153,2],[1154,2],[[1155,1158],2],[1159,2],[[1160,1161],2],[1162,1,"\u048B"],[1163,2],[1164,1,"\u048D"],[1165,2],[1166,1,"\u048F"],[1167,2],[1168,1,"\u0491"],[1169,2],[1170,1,"\u0493"],[1171,2],[1172,1,"\u0495"],[1173,2],[1174,1,"\u0497"],[1175,2],[1176,1,"\u0499"],[1177,2],[1178,1,"\u049B"],[1179,2],[1180,1,"\u049D"],[1181,2],[1182,1,"\u049F"],[1183,2],[1184,1,"\u04A1"],[1185,2],[1186,1,"\u04A3"],[1187,2],[1188,1,"\u04A5"],[1189,2],[1190,1,"\u04A7"],[1191,2],[1192,1,"\u04A9"],[1193,2],[1194,1,"\u04AB"],[1195,2],[1196,1,"\u04AD"],[1197,2],[1198,1,"\u04AF"],[1199,2],[1200,1,"\u04B1"],[1201,2],[1202,1,"\u04B3"],[1203,2],[1204,1,"\u04B5"],[1205,2],[1206,1,"\u04B7"],[1207,2],[1208,1,"\u04B9"],[1209,2],[1210,1,"\u04BB"],[1211,2],[1212,1,"\u04BD"],[1213,2],[1214,1,"\u04BF"],[1215,2],[1216,3],[1217,1,"\u04C2"],[1218,2],[1219,1,"\u04C4"],[1220,2],[1221,1,"\u04C6"],[1222,2],[1223,1,"\u04C8"],[1224,2],[1225,1,"\u04CA"],[1226,2],[1227,1,"\u04CC"],[1228,2],[1229,1,"\u04CE"],[1230,2],[1231,2],[1232,1,"\u04D1"],[1233,2],[1234,1,"\u04D3"],[1235,2],[1236,1,"\u04D5"],[1237,2],[1238,1,"\u04D7"],[1239,2],[1240,1,"\u04D9"],[1241,2],[1242,1,"\u04DB"],[1243,2],[1244,1,"\u04DD"],[1245,2],[1246,1,"\u04DF"],[1247,2],[1248,1,"\u04E1"],[1249,2],[1250,1,"\u04E3"],[1251,2],[1252,1,"\u04E5"],[1253,2],[1254,1,"\u04E7"],[1255,2],[1256,1,"\u04E9"],[1257,2],[1258,1,"\u04EB"],[1259,2],[1260,1,"\u04ED"],[1261,2],[1262,1,"\u04EF"],[1263,2],[1264,1,"\u04F1"],[1265,2],[1266,1,"\u04F3"],[1267,2],[1268,1,"\u04F5"],[1269,2],[1270,1,"\u04F7"],[1271,2],[1272,1,"\u04F9"],[1273,2],[1274,1,"\u04FB"],[1275,2],[1276,1,"\u04FD"],[1277,2],[1278,1,"\u04FF"],[1279,2],[1280,1,"\u0501"],[1281,2],[1282,1,"\u0503"],[1283,2],[1284,1,"\u0505"],[1285,2],[1286,1,"\u0507"],[1287,2],[1288,1,"\u0509"],[1289,2],[1290,1,"\u050B"],[1291,2],[1292,1,"\u050D"],[1293,2],[1294,1,"\u050F"],[1295,2],[1296,1,"\u0511"],[1297,2],[1298,1,"\u0513"],[1299,2],[1300,1,"\u0515"],[1301,2],[1302,1,"\u0517"],[1303,2],[1304,1,"\u0519"],[1305,2],[1306,1,"\u051B"],[1307,2],[1308,1,"\u051D"],[1309,2],[1310,1,"\u051F"],[1311,2],[1312,1,"\u0521"],[1313,2],[1314,1,"\u0523"],[1315,2],[1316,1,"\u0525"],[1317,2],[1318,1,"\u0527"],[1319,2],[1320,1,"\u0529"],[1321,2],[1322,1,"\u052B"],[1323,2],[1324,1,"\u052D"],[1325,2],[1326,1,"\u052F"],[1327,2],[1328,3],[1329,1,"\u0561"],[1330,1,"\u0562"],[1331,1,"\u0563"],[1332,1,"\u0564"],[1333,1,"\u0565"],[1334,1,"\u0566"],[1335,1,"\u0567"],[1336,1,"\u0568"],[1337,1,"\u0569"],[1338,1,"\u056A"],[1339,1,"\u056B"],[1340,1,"\u056C"],[1341,1,"\u056D"],[1342,1,"\u056E"],[1343,1,"\u056F"],[1344,1,"\u0570"],[1345,1,"\u0571"],[1346,1,"\u0572"],[1347,1,"\u0573"],[1348,1,"\u0574"],[1349,1,"\u0575"],[1350,1,"\u0576"],[1351,1,"\u0577"],[1352,1,"\u0578"],[1353,1,"\u0579"],[1354,1,"\u057A"],[1355,1,"\u057B"],[1356,1,"\u057C"],[1357,1,"\u057D"],[1358,1,"\u057E"],[1359,1,"\u057F"],[1360,1,"\u0580"],[1361,1,"\u0581"],[1362,1,"\u0582"],[1363,1,"\u0583"],[1364,1,"\u0584"],[1365,1,"\u0585"],[1366,1,"\u0586"],[[1367,1368],3],[1369,2],[[1370,1375],2],[1376,2],[[1377,1414],2],[1415,1,"\u0565\u0582"],[1416,2],[1417,2],[1418,2],[[1419,1420],3],[[1421,1422],2],[1423,2],[1424,3],[[1425,1441],2],[1442,2],[[1443,1455],2],[[1456,1465],2],[1466,2],[[1467,1469],2],[1470,2],[1471,2],[1472,2],[[1473,1474],2],[1475,2],[1476,2],[1477,2],[1478,2],[1479,2],[[1480,1487],3],[[1488,1514],2],[[1515,1518],3],[1519,2],[[1520,1524],2],[[1525,1535],3],[[1536,1539],3],[1540,3],[1541,3],[[1542,1546],2],[1547,2],[1548,2],[[1549,1551],2],[[1552,1557],2],[[1558,1562],2],[1563,2],[1564,3],[1565,2],[1566,2],[1567,2],[1568,2],[[1569,1594],2],[[1595,1599],2],[1600,2],[[1601,1618],2],[[1619,1621],2],[[1622,1624],2],[[1625,1630],2],[1631,2],[[1632,1641],2],[[1642,1645],2],[[1646,1647],2],[[1648,1652],2],[1653,1,"\u0627\u0674"],[1654,1,"\u0648\u0674"],[1655,1,"\u06C7\u0674"],[1656,1,"\u064A\u0674"],[[1657,1719],2],[[1720,1721],2],[[1722,1726],2],[1727,2],[[1728,1742],2],[1743,2],[[1744,1747],2],[1748,2],[[1749,1756],2],[1757,3],[1758,2],[[1759,1768],2],[1769,2],[[1770,1773],2],[[1774,1775],2],[[1776,1785],2],[[1786,1790],2],[1791,2],[[1792,1805],2],[1806,3],[1807,3],[[1808,1836],2],[[1837,1839],2],[[1840,1866],2],[[1867,1868],3],[[1869,1871],2],[[1872,1901],2],[[1902,1919],2],[[1920,1968],2],[1969,2],[[1970,1983],3],[[1984,2037],2],[[2038,2042],2],[[2043,2044],3],[2045,2],[[2046,2047],2],[[2048,2093],2],[[2094,2095],3],[[2096,2110],2],[2111,3],[[2112,2139],2],[[2140,2141],3],[2142,2],[2143,3],[[2144,2154],2],[[2155,2159],3],[[2160,2183],2],[2184,2],[[2185,2190],2],[2191,3],[[2192,2193],3],[[2194,2199],3],[[2200,2207],2],[2208,2],[2209,2],[[2210,2220],2],[[2221,2226],2],[[2227,2228],2],[2229,2],[[2230,2237],2],[[2238,2247],2],[[2248,2258],2],[2259,2],[[2260,2273],2],[2274,3],[2275,2],[[2276,2302],2],[2303,2],[2304,2],[[2305,2307],2],[2308,2],[[2309,2361],2],[[2362,2363],2],[[2364,2381],2],[2382,2],[2383,2],[[2384,2388],2],[2389,2],[[2390,2391],2],[2392,1,"\u0915\u093C"],[2393,1,"\u0916\u093C"],[2394,1,"\u0917\u093C"],[2395,1,"\u091C\u093C"],[2396,1,"\u0921\u093C"],[2397,1,"\u0922\u093C"],[2398,1,"\u092B\u093C"],[2399,1,"\u092F\u093C"],[[2400,2403],2],[[2404,2405],2],[[2406,2415],2],[2416,2],[[2417,2418],2],[[2419,2423],2],[2424,2],[[2425,2426],2],[[2427,2428],2],[2429,2],[[2430,2431],2],[2432,2],[[2433,2435],2],[2436,3],[[2437,2444],2],[[2445,2446],3],[[2447,2448],2],[[2449,2450],3],[[2451,2472],2],[2473,3],[[2474,2480],2],[2481,3],[2482,2],[[2483,2485],3],[[2486,2489],2],[[2490,2491],3],[2492,2],[2493,2],[[2494,2500],2],[[2501,2502],3],[[2503,2504],2],[[2505,2506],3],[[2507,2509],2],[2510,2],[[2511,2518],3],[2519,2],[[2520,2523],3],[2524,1,"\u09A1\u09BC"],[2525,1,"\u09A2\u09BC"],[2526,3],[2527,1,"\u09AF\u09BC"],[[2528,2531],2],[[2532,2533],3],[[2534,2545],2],[[2546,2554],2],[2555,2],[2556,2],[2557,2],[2558,2],[[2559,2560],3],[2561,2],[2562,2],[2563,2],[2564,3],[[2565,2570],2],[[2571,2574],3],[[2575,2576],2],[[2577,2578],3],[[2579,2600],2],[2601,3],[[2602,2608],2],[2609,3],[2610,2],[2611,1,"\u0A32\u0A3C"],[2612,3],[2613,2],[2614,1,"\u0A38\u0A3C"],[2615,3],[[2616,2617],2],[[2618,2619],3],[2620,2],[2621,3],[[2622,2626],2],[[2627,2630],3],[[2631,2632],2],[[2633,2634],3],[[2635,2637],2],[[2638,2640],3],[2641,2],[[2642,2648],3],[2649,1,"\u0A16\u0A3C"],[2650,1,"\u0A17\u0A3C"],[2651,1,"\u0A1C\u0A3C"],[2652,2],[2653,3],[2654,1,"\u0A2B\u0A3C"],[[2655,2661],3],[[2662,2676],2],[2677,2],[2678,2],[[2679,2688],3],[[2689,2691],2],[2692,3],[[2693,2699],2],[2700,2],[2701,2],[2702,3],[[2703,2705],2],[2706,3],[[2707,2728],2],[2729,3],[[2730,2736],2],[2737,3],[[2738,2739],2],[2740,3],[[2741,2745],2],[[2746,2747],3],[[2748,2757],2],[2758,3],[[2759,2761],2],[2762,3],[[2763,2765],2],[[2766,2767],3],[2768,2],[[2769,2783],3],[2784,2],[[2785,2787],2],[[2788,2789],3],[[2790,2799],2],[2800,2],[2801,2],[[2802,2808],3],[2809,2],[[2810,2815],2],[2816,3],[[2817,2819],2],[2820,3],[[2821,2828],2],[[2829,2830],3],[[2831,2832],2],[[2833,2834],3],[[2835,2856],2],[2857,3],[[2858,2864],2],[2865,3],[[2866,2867],2],[2868,3],[2869,2],[[2870,2873],2],[[2874,2875],3],[[2876,2883],2],[2884,2],[[2885,2886],3],[[2887,2888],2],[[2889,2890],3],[[2891,2893],2],[[2894,2900],3],[2901,2],[[2902,2903],2],[[2904,2907],3],[2908,1,"\u0B21\u0B3C"],[2909,1,"\u0B22\u0B3C"],[2910,3],[[2911,2913],2],[[2914,2915],2],[[2916,2917],3],[[2918,2927],2],[2928,2],[2929,2],[[2930,2935],2],[[2936,2945],3],[[2946,2947],2],[2948,3],[[2949,2954],2],[[2955,2957],3],[[2958,2960],2],[2961,3],[[2962,2965],2],[[2966,2968],3],[[2969,2970],2],[2971,3],[2972,2],[2973,3],[[2974,2975],2],[[2976,2978],3],[[2979,2980],2],[[2981,2983],3],[[2984,2986],2],[[2987,2989],3],[[2990,2997],2],[2998,2],[[2999,3001],2],[[3002,3005],3],[[3006,3010],2],[[3011,3013],3],[[3014,3016],2],[3017,3],[[3018,3021],2],[[3022,3023],3],[3024,2],[[3025,3030],3],[3031,2],[[3032,3045],3],[3046,2],[[3047,3055],2],[[3056,3058],2],[[3059,3066],2],[[3067,3071],3],[3072,2],[[3073,3075],2],[3076,2],[[3077,3084],2],[3085,3],[[3086,3088],2],[3089,3],[[3090,3112],2],[3113,3],[[3114,3123],2],[3124,2],[[3125,3129],2],[[3130,3131],3],[3132,2],[3133,2],[[3134,3140],2],[3141,3],[[3142,3144],2],[3145,3],[[3146,3149],2],[[3150,3156],3],[[3157,3158],2],[3159,3],[[3160,3161],2],[3162,2],[[3163,3164],3],[3165,2],[[3166,3167],3],[[3168,3169],2],[[3170,3171],2],[[3172,3173],3],[[3174,3183],2],[[3184,3190],3],[3191,2],[[3192,3199],2],[3200,2],[3201,2],[[3202,3203],2],[3204,2],[[3205,3212],2],[3213,3],[[3214,3216],2],[3217,3],[[3218,3240],2],[3241,3],[[3242,3251],2],[3252,3],[[3253,3257],2],[[3258,3259],3],[[3260,3261],2],[[3262,3268],2],[3269,3],[[3270,3272],2],[3273,3],[[3274,3277],2],[[3278,3284],3],[[3285,3286],2],[[3287,3292],3],[3293,2],[3294,2],[3295,3],[[3296,3297],2],[[3298,3299],2],[[3300,3301],3],[[3302,3311],2],[3312,3],[[3313,3314],2],[3315,2],[[3316,3327],3],[3328,2],[3329,2],[[3330,3331],2],[3332,2],[[3333,3340],2],[3341,3],[[3342,3344],2],[3345,3],[[3346,3368],2],[3369,2],[[3370,3385],2],[3386,2],[[3387,3388],2],[3389,2],[[3390,3395],2],[3396,2],[3397,3],[[3398,3400],2],[3401,3],[[3402,3405],2],[3406,2],[3407,2],[[3408,3411],3],[[3412,3414],2],[3415,2],[[3416,3422],2],[3423,2],[[3424,3425],2],[[3426,3427],2],[[3428,3429],3],[[3430,3439],2],[[3440,3445],2],[[3446,3448],2],[3449,2],[[3450,3455],2],[3456,3],[3457,2],[[3458,3459],2],[3460,3],[[3461,3478],2],[[3479,3481],3],[[3482,3505],2],[3506,3],[[3507,3515],2],[3516,3],[3517,2],[[3518,3519],3],[[3520,3526],2],[[3527,3529],3],[3530,2],[[3531,3534],3],[[3535,3540],2],[3541,3],[3542,2],[3543,3],[[3544,3551],2],[[3552,3557],3],[[3558,3567],2],[[3568,3569],3],[[3570,3571],2],[3572,2],[[3573,3584],3],[[3585,3634],2],[3635,1,"\u0E4D\u0E32"],[[3636,3642],2],[[3643,3646],3],[3647,2],[[3648,3662],2],[3663,2],[[3664,3673],2],[[3674,3675],2],[[3676,3712],3],[[3713,3714],2],[3715,3],[3716,2],[3717,3],[3718,2],[[3719,3720],2],[3721,2],[3722,2],[3723,3],[3724,2],[3725,2],[[3726,3731],2],[[3732,3735],2],[3736,2],[[3737,3743],2],[3744,2],[[3745,3747],2],[3748,3],[3749,2],[3750,3],[3751,2],[[3752,3753],2],[[3754,3755],2],[3756,2],[[3757,3762],2],[3763,1,"\u0ECD\u0EB2"],[[3764,3769],2],[3770,2],[[3771,3773],2],[[3774,3775],3],[[3776,3780],2],[3781,3],[3782,2],[3783,3],[[3784,3789],2],[3790,2],[3791,3],[[3792,3801],2],[[3802,3803],3],[3804,1,"\u0EAB\u0E99"],[3805,1,"\u0EAB\u0EA1"],[[3806,3807],2],[[3808,3839],3],[3840,2],[[3841,3850],2],[3851,2],[3852,1,"\u0F0B"],[[3853,3863],2],[[3864,3865],2],[[3866,3871],2],[[3872,3881],2],[[3882,3892],2],[3893,2],[3894,2],[3895,2],[3896,2],[3897,2],[[3898,3901],2],[[3902,3906],2],[3907,1,"\u0F42\u0FB7"],[[3908,3911],2],[3912,3],[[3913,3916],2],[3917,1,"\u0F4C\u0FB7"],[[3918,3921],2],[3922,1,"\u0F51\u0FB7"],[[3923,3926],2],[3927,1,"\u0F56\u0FB7"],[[3928,3931],2],[3932,1,"\u0F5B\u0FB7"],[[3933,3944],2],[3945,1,"\u0F40\u0FB5"],[3946,2],[[3947,3948],2],[[3949,3952],3],[[3953,3954],2],[3955,1,"\u0F71\u0F72"],[3956,2],[3957,1,"\u0F71\u0F74"],[3958,1,"\u0FB2\u0F80"],[3959,1,"\u0FB2\u0F71\u0F80"],[3960,1,"\u0FB3\u0F80"],[3961,1,"\u0FB3\u0F71\u0F80"],[[3962,3968],2],[3969,1,"\u0F71\u0F80"],[[3970,3972],2],[3973,2],[[3974,3979],2],[[3980,3983],2],[[3984,3986],2],[3987,1,"\u0F92\u0FB7"],[[3988,3989],2],[3990,2],[3991,2],[3992,3],[[3993,3996],2],[3997,1,"\u0F9C\u0FB7"],[[3998,4001],2],[4002,1,"\u0FA1\u0FB7"],[[4003,4006],2],[4007,1,"\u0FA6\u0FB7"],[[4008,4011],2],[4012,1,"\u0FAB\u0FB7"],[4013,2],[[4014,4016],2],[[4017,4023],2],[4024,2],[4025,1,"\u0F90\u0FB5"],[[4026,4028],2],[4029,3],[[4030,4037],2],[4038,2],[[4039,4044],2],[4045,3],[4046,2],[4047,2],[[4048,4049],2],[[4050,4052],2],[[4053,4056],2],[[4057,4058],2],[[4059,4095],3],[[4096,4129],2],[4130,2],[[4131,4135],2],[4136,2],[[4137,4138],2],[4139,2],[[4140,4146],2],[[4147,4149],2],[[4150,4153],2],[[4154,4159],2],[[4160,4169],2],[[4170,4175],2],[[4176,4185],2],[[4186,4249],2],[[4250,4253],2],[[4254,4255],2],[[4256,4293],3],[4294,3],[4295,1,"\u2D27"],[[4296,4300],3],[4301,1,"\u2D2D"],[[4302,4303],3],[[4304,4342],2],[[4343,4344],2],[[4345,4346],2],[4347,2],[4348,1,"\u10DC"],[[4349,4351],2],[[4352,4441],2],[[4442,4446],2],[[4447,4448],3],[[4449,4514],2],[[4515,4519],2],[[4520,4601],2],[[4602,4607],2],[[4608,4614],2],[4615,2],[[4616,4678],2],[4679,2],[4680,2],[4681,3],[[4682,4685],2],[[4686,4687],3],[[4688,4694],2],[4695,3],[4696,2],[4697,3],[[4698,4701],2],[[4702,4703],3],[[4704,4742],2],[4743,2],[4744,2],[4745,3],[[4746,4749],2],[[4750,4751],3],[[4752,4782],2],[4783,2],[4784,2],[4785,3],[[4786,4789],2],[[4790,4791],3],[[4792,4798],2],[4799,3],[4800,2],[4801,3],[[4802,4805],2],[[4806,4807],3],[[4808,4814],2],[4815,2],[[4816,4822],2],[4823,3],[[4824,4846],2],[4847,2],[[4848,4878],2],[4879,2],[4880,2],[4881,3],[[4882,4885],2],[[4886,4887],3],[[4888,4894],2],[4895,2],[[4896,4934],2],[4935,2],[[4936,4954],2],[[4955,4956],3],[[4957,4958],2],[4959,2],[4960,2],[[4961,4988],2],[[4989,4991],3],[[4992,5007],2],[[5008,5017],2],[[5018,5023],3],[[5024,5108],2],[5109,2],[[5110,5111],3],[5112,1,"\u13F0"],[5113,1,"\u13F1"],[5114,1,"\u13F2"],[5115,1,"\u13F3"],[5116,1,"\u13F4"],[5117,1,"\u13F5"],[[5118,5119],3],[5120,2],[[5121,5740],2],[[5741,5742],2],[[5743,5750],2],[[5751,5759],2],[5760,3],[[5761,5786],2],[[5787,5788],2],[[5789,5791],3],[[5792,5866],2],[[5867,5872],2],[[5873,5880],2],[[5881,5887],3],[[5888,5900],2],[5901,2],[[5902,5908],2],[5909,2],[[5910,5918],3],[5919,2],[[5920,5940],2],[[5941,5942],2],[[5943,5951],3],[[5952,5971],2],[[5972,5983],3],[[5984,5996],2],[5997,3],[[5998,6e3],2],[6001,3],[[6002,6003],2],[[6004,6015],3],[[6016,6067],2],[[6068,6069],3],[[6070,6099],2],[[6100,6102],2],[6103,2],[[6104,6107],2],[6108,2],[6109,2],[[6110,6111],3],[[6112,6121],2],[[6122,6127],3],[[6128,6137],2],[[6138,6143],3],[[6144,6149],2],[6150,3],[[6151,6154],2],[[6155,6157],7],[6158,3],[6159,7],[[6160,6169],2],[[6170,6175],3],[[6176,6263],2],[6264,2],[[6265,6271],3],[[6272,6313],2],[6314,2],[[6315,6319],3],[[6320,6389],2],[[6390,6399],3],[[6400,6428],2],[[6429,6430],2],[6431,3],[[6432,6443],2],[[6444,6447],3],[[6448,6459],2],[[6460,6463],3],[6464,2],[[6465,6467],3],[[6468,6469],2],[[6470,6509],2],[[6510,6511],3],[[6512,6516],2],[[6517,6527],3],[[6528,6569],2],[[6570,6571],2],[[6572,6575],3],[[6576,6601],2],[[6602,6607],3],[[6608,6617],2],[6618,2],[[6619,6621],3],[[6622,6623],2],[[6624,6655],2],[[6656,6683],2],[[6684,6685],3],[[6686,6687],2],[[6688,6750],2],[6751,3],[[6752,6780],2],[[6781,6782],3],[[6783,6793],2],[[6794,6799],3],[[6800,6809],2],[[6810,6815],3],[[6816,6822],2],[6823,2],[[6824,6829],2],[[6830,6831],3],[[6832,6845],2],[6846,2],[[6847,6848],2],[[6849,6862],2],[[6863,6911],3],[[6912,6987],2],[6988,2],[[6989,6991],3],[[6992,7001],2],[[7002,7018],2],[[7019,7027],2],[[7028,7036],2],[[7037,7038],2],[7039,3],[[7040,7082],2],[[7083,7085],2],[[7086,7097],2],[[7098,7103],2],[[7104,7155],2],[[7156,7163],3],[[7164,7167],2],[[7168,7223],2],[[7224,7226],3],[[7227,7231],2],[[7232,7241],2],[[7242,7244],3],[[7245,7293],2],[[7294,7295],2],[7296,1,"\u0432"],[7297,1,"\u0434"],[7298,1,"\u043E"],[7299,1,"\u0441"],[[7300,7301],1,"\u0442"],[7302,1,"\u044A"],[7303,1,"\u0463"],[7304,1,"\uA64B"],[[7305,7311],3],[7312,1,"\u10D0"],[7313,1,"\u10D1"],[7314,1,"\u10D2"],[7315,1,"\u10D3"],[7316,1,"\u10D4"],[7317,1,"\u10D5"],[7318,1,"\u10D6"],[7319,1,"\u10D7"],[7320,1,"\u10D8"],[7321,1,"\u10D9"],[7322,1,"\u10DA"],[7323,1,"\u10DB"],[7324,1,"\u10DC"],[7325,1,"\u10DD"],[7326,1,"\u10DE"],[7327,1,"\u10DF"],[7328,1,"\u10E0"],[7329,1,"\u10E1"],[7330,1,"\u10E2"],[7331,1,"\u10E3"],[7332,1,"\u10E4"],[7333,1,"\u10E5"],[7334,1,"\u10E6"],[7335,1,"\u10E7"],[7336,1,"\u10E8"],[7337,1,"\u10E9"],[7338,1,"\u10EA"],[7339,1,"\u10EB"],[7340,1,"\u10EC"],[7341,1,"\u10ED"],[7342,1,"\u10EE"],[7343,1,"\u10EF"],[7344,1,"\u10F0"],[7345,1,"\u10F1"],[7346,1,"\u10F2"],[7347,1,"\u10F3"],[7348,1,"\u10F4"],[7349,1,"\u10F5"],[7350,1,"\u10F6"],[7351,1,"\u10F7"],[7352,1,"\u10F8"],[7353,1,"\u10F9"],[7354,1,"\u10FA"],[[7355,7356],3],[7357,1,"\u10FD"],[7358,1,"\u10FE"],[7359,1,"\u10FF"],[[7360,7367],2],[[7368,7375],3],[[7376,7378],2],[7379,2],[[7380,7410],2],[[7411,7414],2],[7415,2],[[7416,7417],2],[7418,2],[[7419,7423],3],[[7424,7467],2],[7468,1,"a"],[7469,1,"\xE6"],[7470,1,"b"],[7471,2],[7472,1,"d"],[7473,1,"e"],[7474,1,"\u01DD"],[7475,1,"g"],[7476,1,"h"],[7477,1,"i"],[7478,1,"j"],[7479,1,"k"],[7480,1,"l"],[7481,1,"m"],[7482,1,"n"],[7483,2],[7484,1,"o"],[7485,1,"\u0223"],[7486,1,"p"],[7487,1,"r"],[7488,1,"t"],[7489,1,"u"],[7490,1,"w"],[7491,1,"a"],[7492,1,"\u0250"],[7493,1,"\u0251"],[7494,1,"\u1D02"],[7495,1,"b"],[7496,1,"d"],[7497,1,"e"],[7498,1,"\u0259"],[7499,1,"\u025B"],[7500,1,"\u025C"],[7501,1,"g"],[7502,2],[7503,1,"k"],[7504,1,"m"],[7505,1,"\u014B"],[7506,1,"o"],[7507,1,"\u0254"],[7508,1,"\u1D16"],[7509,1,"\u1D17"],[7510,1,"p"],[7511,1,"t"],[7512,1,"u"],[7513,1,"\u1D1D"],[7514,1,"\u026F"],[7515,1,"v"],[7516,1,"\u1D25"],[7517,1,"\u03B2"],[7518,1,"\u03B3"],[7519,1,"\u03B4"],[7520,1,"\u03C6"],[7521,1,"\u03C7"],[7522,1,"i"],[7523,1,"r"],[7524,1,"u"],[7525,1,"v"],[7526,1,"\u03B2"],[7527,1,"\u03B3"],[7528,1,"\u03C1"],[7529,1,"\u03C6"],[7530,1,"\u03C7"],[7531,2],[[7532,7543],2],[7544,1,"\u043D"],[[7545,7578],2],[7579,1,"\u0252"],[7580,1,"c"],[7581,1,"\u0255"],[7582,1,"\xF0"],[7583,1,"\u025C"],[7584,1,"f"],[7585,1,"\u025F"],[7586,1,"\u0261"],[7587,1,"\u0265"],[7588,1,"\u0268"],[7589,1,"\u0269"],[7590,1,"\u026A"],[7591,1,"\u1D7B"],[7592,1,"\u029D"],[7593,1,"\u026D"],[7594,1,"\u1D85"],[7595,1,"\u029F"],[7596,1,"\u0271"],[7597,1,"\u0270"],[7598,1,"\u0272"],[7599,1,"\u0273"],[7600,1,"\u0274"],[7601,1,"\u0275"],[7602,1,"\u0278"],[7603,1,"\u0282"],[7604,1,"\u0283"],[7605,1,"\u01AB"],[7606,1,"\u0289"],[7607,1,"\u028A"],[7608,1,"\u1D1C"],[7609,1,"\u028B"],[7610,1,"\u028C"],[7611,1,"z"],[7612,1,"\u0290"],[7613,1,"\u0291"],[7614,1,"\u0292"],[7615,1,"\u03B8"],[[7616,7619],2],[[7620,7626],2],[[7627,7654],2],[[7655,7669],2],[[7670,7673],2],[7674,2],[7675,2],[7676,2],[7677,2],[[7678,7679],2],[7680,1,"\u1E01"],[7681,2],[7682,1,"\u1E03"],[7683,2],[7684,1,"\u1E05"],[7685,2],[7686,1,"\u1E07"],[7687,2],[7688,1,"\u1E09"],[7689,2],[7690,1,"\u1E0B"],[7691,2],[7692,1,"\u1E0D"],[7693,2],[7694,1,"\u1E0F"],[7695,2],[7696,1,"\u1E11"],[7697,2],[7698,1,"\u1E13"],[7699,2],[7700,1,"\u1E15"],[7701,2],[7702,1,"\u1E17"],[7703,2],[7704,1,"\u1E19"],[7705,2],[7706,1,"\u1E1B"],[7707,2],[7708,1,"\u1E1D"],[7709,2],[7710,1,"\u1E1F"],[7711,2],[7712,1,"\u1E21"],[7713,2],[7714,1,"\u1E23"],[7715,2],[7716,1,"\u1E25"],[7717,2],[7718,1,"\u1E27"],[7719,2],[7720,1,"\u1E29"],[7721,2],[7722,1,"\u1E2B"],[7723,2],[7724,1,"\u1E2D"],[7725,2],[7726,1,"\u1E2F"],[7727,2],[7728,1,"\u1E31"],[7729,2],[7730,1,"\u1E33"],[7731,2],[7732,1,"\u1E35"],[7733,2],[7734,1,"\u1E37"],[7735,2],[7736,1,"\u1E39"],[7737,2],[7738,1,"\u1E3B"],[7739,2],[7740,1,"\u1E3D"],[7741,2],[7742,1,"\u1E3F"],[7743,2],[7744,1,"\u1E41"],[7745,2],[7746,1,"\u1E43"],[7747,2],[7748,1,"\u1E45"],[7749,2],[7750,1,"\u1E47"],[7751,2],[7752,1,"\u1E49"],[7753,2],[7754,1,"\u1E4B"],[7755,2],[7756,1,"\u1E4D"],[7757,2],[7758,1,"\u1E4F"],[7759,2],[7760,1,"\u1E51"],[7761,2],[7762,1,"\u1E53"],[7763,2],[7764,1,"\u1E55"],[7765,2],[7766,1,"\u1E57"],[7767,2],[7768,1,"\u1E59"],[7769,2],[7770,1,"\u1E5B"],[7771,2],[7772,1,"\u1E5D"],[7773,2],[7774,1,"\u1E5F"],[7775,2],[7776,1,"\u1E61"],[7777,2],[7778,1,"\u1E63"],[7779,2],[7780,1,"\u1E65"],[7781,2],[7782,1,"\u1E67"],[7783,2],[7784,1,"\u1E69"],[7785,2],[7786,1,"\u1E6B"],[7787,2],[7788,1,"\u1E6D"],[7789,2],[7790,1,"\u1E6F"],[7791,2],[7792,1,"\u1E71"],[7793,2],[7794,1,"\u1E73"],[7795,2],[7796,1,"\u1E75"],[7797,2],[7798,1,"\u1E77"],[7799,2],[7800,1,"\u1E79"],[7801,2],[7802,1,"\u1E7B"],[7803,2],[7804,1,"\u1E7D"],[7805,2],[7806,1,"\u1E7F"],[7807,2],[7808,1,"\u1E81"],[7809,2],[7810,1,"\u1E83"],[7811,2],[7812,1,"\u1E85"],[7813,2],[7814,1,"\u1E87"],[7815,2],[7816,1,"\u1E89"],[7817,2],[7818,1,"\u1E8B"],[7819,2],[7820,1,"\u1E8D"],[7821,2],[7822,1,"\u1E8F"],[7823,2],[7824,1,"\u1E91"],[7825,2],[7826,1,"\u1E93"],[7827,2],[7828,1,"\u1E95"],[[7829,7833],2],[7834,1,"a\u02BE"],[7835,1,"\u1E61"],[[7836,7837],2],[7838,1,"ss"],[7839,2],[7840,1,"\u1EA1"],[7841,2],[7842,1,"\u1EA3"],[7843,2],[7844,1,"\u1EA5"],[7845,2],[7846,1,"\u1EA7"],[7847,2],[7848,1,"\u1EA9"],[7849,2],[7850,1,"\u1EAB"],[7851,2],[7852,1,"\u1EAD"],[7853,2],[7854,1,"\u1EAF"],[7855,2],[7856,1,"\u1EB1"],[7857,2],[7858,1,"\u1EB3"],[7859,2],[7860,1,"\u1EB5"],[7861,2],[7862,1,"\u1EB7"],[7863,2],[7864,1,"\u1EB9"],[7865,2],[7866,1,"\u1EBB"],[7867,2],[7868,1,"\u1EBD"],[7869,2],[7870,1,"\u1EBF"],[7871,2],[7872,1,"\u1EC1"],[7873,2],[7874,1,"\u1EC3"],[7875,2],[7876,1,"\u1EC5"],[7877,2],[7878,1,"\u1EC7"],[7879,2],[7880,1,"\u1EC9"],[7881,2],[7882,1,"\u1ECB"],[7883,2],[7884,1,"\u1ECD"],[7885,2],[7886,1,"\u1ECF"],[7887,2],[7888,1,"\u1ED1"],[7889,2],[7890,1,"\u1ED3"],[7891,2],[7892,1,"\u1ED5"],[7893,2],[7894,1,"\u1ED7"],[7895,2],[7896,1,"\u1ED9"],[7897,2],[7898,1,"\u1EDB"],[7899,2],[7900,1,"\u1EDD"],[7901,2],[7902,1,"\u1EDF"],[7903,2],[7904,1,"\u1EE1"],[7905,2],[7906,1,"\u1EE3"],[7907,2],[7908,1,"\u1EE5"],[7909,2],[7910,1,"\u1EE7"],[7911,2],[7912,1,"\u1EE9"],[7913,2],[7914,1,"\u1EEB"],[7915,2],[7916,1,"\u1EED"],[7917,2],[7918,1,"\u1EEF"],[7919,2],[7920,1,"\u1EF1"],[7921,2],[7922,1,"\u1EF3"],[7923,2],[7924,1,"\u1EF5"],[7925,2],[7926,1,"\u1EF7"],[7927,2],[7928,1,"\u1EF9"],[7929,2],[7930,1,"\u1EFB"],[7931,2],[7932,1,"\u1EFD"],[7933,2],[7934,1,"\u1EFF"],[7935,2],[[7936,7943],2],[7944,1,"\u1F00"],[7945,1,"\u1F01"],[7946,1,"\u1F02"],[7947,1,"\u1F03"],[7948,1,"\u1F04"],[7949,1,"\u1F05"],[7950,1,"\u1F06"],[7951,1,"\u1F07"],[[7952,7957],2],[[7958,7959],3],[7960,1,"\u1F10"],[7961,1,"\u1F11"],[7962,1,"\u1F12"],[7963,1,"\u1F13"],[7964,1,"\u1F14"],[7965,1,"\u1F15"],[[7966,7967],3],[[7968,7975],2],[7976,1,"\u1F20"],[7977,1,"\u1F21"],[7978,1,"\u1F22"],[7979,1,"\u1F23"],[7980,1,"\u1F24"],[7981,1,"\u1F25"],[7982,1,"\u1F26"],[7983,1,"\u1F27"],[[7984,7991],2],[7992,1,"\u1F30"],[7993,1,"\u1F31"],[7994,1,"\u1F32"],[7995,1,"\u1F33"],[7996,1,"\u1F34"],[7997,1,"\u1F35"],[7998,1,"\u1F36"],[7999,1,"\u1F37"],[[8e3,8005],2],[[8006,8007],3],[8008,1,"\u1F40"],[8009,1,"\u1F41"],[8010,1,"\u1F42"],[8011,1,"\u1F43"],[8012,1,"\u1F44"],[8013,1,"\u1F45"],[[8014,8015],3],[[8016,8023],2],[8024,3],[8025,1,"\u1F51"],[8026,3],[8027,1,"\u1F53"],[8028,3],[8029,1,"\u1F55"],[8030,3],[8031,1,"\u1F57"],[[8032,8039],2],[8040,1,"\u1F60"],[8041,1,"\u1F61"],[8042,1,"\u1F62"],[8043,1,"\u1F63"],[8044,1,"\u1F64"],[8045,1,"\u1F65"],[8046,1,"\u1F66"],[8047,1,"\u1F67"],[8048,2],[8049,1,"\u03AC"],[8050,2],[8051,1,"\u03AD"],[8052,2],[8053,1,"\u03AE"],[8054,2],[8055,1,"\u03AF"],[8056,2],[8057,1,"\u03CC"],[8058,2],[8059,1,"\u03CD"],[8060,2],[8061,1,"\u03CE"],[[8062,8063],3],[8064,1,"\u1F00\u03B9"],[8065,1,"\u1F01\u03B9"],[8066,1,"\u1F02\u03B9"],[8067,1,"\u1F03\u03B9"],[8068,1,"\u1F04\u03B9"],[8069,1,"\u1F05\u03B9"],[8070,1,"\u1F06\u03B9"],[8071,1,"\u1F07\u03B9"],[8072,1,"\u1F00\u03B9"],[8073,1,"\u1F01\u03B9"],[8074,1,"\u1F02\u03B9"],[8075,1,"\u1F03\u03B9"],[8076,1,"\u1F04\u03B9"],[8077,1,"\u1F05\u03B9"],[8078,1,"\u1F06\u03B9"],[8079,1,"\u1F07\u03B9"],[8080,1,"\u1F20\u03B9"],[8081,1,"\u1F21\u03B9"],[8082,1,"\u1F22\u03B9"],[8083,1,"\u1F23\u03B9"],[8084,1,"\u1F24\u03B9"],[8085,1,"\u1F25\u03B9"],[8086,1,"\u1F26\u03B9"],[8087,1,"\u1F27\u03B9"],[8088,1,"\u1F20\u03B9"],[8089,1,"\u1F21\u03B9"],[8090,1,"\u1F22\u03B9"],[8091,1,"\u1F23\u03B9"],[8092,1,"\u1F24\u03B9"],[8093,1,"\u1F25\u03B9"],[8094,1,"\u1F26\u03B9"],[8095,1,"\u1F27\u03B9"],[8096,1,"\u1F60\u03B9"],[8097,1,"\u1F61\u03B9"],[8098,1,"\u1F62\u03B9"],[8099,1,"\u1F63\u03B9"],[8100,1,"\u1F64\u03B9"],[8101,1,"\u1F65\u03B9"],[8102,1,"\u1F66\u03B9"],[8103,1,"\u1F67\u03B9"],[8104,1,"\u1F60\u03B9"],[8105,1,"\u1F61\u03B9"],[8106,1,"\u1F62\u03B9"],[8107,1,"\u1F63\u03B9"],[8108,1,"\u1F64\u03B9"],[8109,1,"\u1F65\u03B9"],[8110,1,"\u1F66\u03B9"],[8111,1,"\u1F67\u03B9"],[[8112,8113],2],[8114,1,"\u1F70\u03B9"],[8115,1,"\u03B1\u03B9"],[8116,1,"\u03AC\u03B9"],[8117,3],[8118,2],[8119,1,"\u1FB6\u03B9"],[8120,1,"\u1FB0"],[8121,1,"\u1FB1"],[8122,1,"\u1F70"],[8123,1,"\u03AC"],[8124,1,"\u03B1\u03B9"],[8125,5," \u0313"],[8126,1,"\u03B9"],[8127,5," \u0313"],[8128,5," \u0342"],[8129,5," \u0308\u0342"],[8130,1,"\u1F74\u03B9"],[8131,1,"\u03B7\u03B9"],[8132,1,"\u03AE\u03B9"],[8133,3],[8134,2],[8135,1,"\u1FC6\u03B9"],[8136,1,"\u1F72"],[8137,1,"\u03AD"],[8138,1,"\u1F74"],[8139,1,"\u03AE"],[8140,1,"\u03B7\u03B9"],[8141,5," \u0313\u0300"],[8142,5," \u0313\u0301"],[8143,5," \u0313\u0342"],[[8144,8146],2],[8147,1,"\u0390"],[[8148,8149],3],[[8150,8151],2],[8152,1,"\u1FD0"],[8153,1,"\u1FD1"],[8154,1,"\u1F76"],[8155,1,"\u03AF"],[8156,3],[8157,5," \u0314\u0300"],[8158,5," \u0314\u0301"],[8159,5," \u0314\u0342"],[[8160,8162],2],[8163,1,"\u03B0"],[[8164,8167],2],[8168,1,"\u1FE0"],[8169,1,"\u1FE1"],[8170,1,"\u1F7A"],[8171,1,"\u03CD"],[8172,1,"\u1FE5"],[8173,5," \u0308\u0300"],[8174,5," \u0308\u0301"],[8175,5,"`"],[[8176,8177],3],[8178,1,"\u1F7C\u03B9"],[8179,1,"\u03C9\u03B9"],[8180,1,"\u03CE\u03B9"],[8181,3],[8182,2],[8183,1,"\u1FF6\u03B9"],[8184,1,"\u1F78"],[8185,1,"\u03CC"],[8186,1,"\u1F7C"],[8187,1,"\u03CE"],[8188,1,"\u03C9\u03B9"],[8189,5," \u0301"],[8190,5," \u0314"],[8191,3],[[8192,8202],5," "],[8203,7],[[8204,8205],6,""],[[8206,8207],3],[8208,2],[8209,1,"\u2010"],[[8210,8214],2],[8215,5," \u0333"],[[8216,8227],2],[[8228,8230],3],[8231,2],[[8232,8238],3],[8239,5," "],[[8240,8242],2],[8243,1,"\u2032\u2032"],[8244,1,"\u2032\u2032\u2032"],[8245,2],[8246,1,"\u2035\u2035"],[8247,1,"\u2035\u2035\u2035"],[[8248,8251],2],[8252,5,"!!"],[8253,2],[8254,5," \u0305"],[[8255,8262],2],[8263,5,"??"],[8264,5,"?!"],[8265,5,"!?"],[[8266,8269],2],[[8270,8274],2],[[8275,8276],2],[[8277,8278],2],[8279,1,"\u2032\u2032\u2032\u2032"],[[8280,8286],2],[8287,5," "],[8288,7],[[8289,8291],3],[8292,7],[8293,3],[[8294,8297],3],[[8298,8303],3],[8304,1,"0"],[8305,1,"i"],[[8306,8307],3],[8308,1,"4"],[8309,1,"5"],[8310,1,"6"],[8311,1,"7"],[8312,1,"8"],[8313,1,"9"],[8314,5,"+"],[8315,1,"\u2212"],[8316,5,"="],[8317,5,"("],[8318,5,")"],[8319,1,"n"],[8320,1,"0"],[8321,1,"1"],[8322,1,"2"],[8323,1,"3"],[8324,1,"4"],[8325,1,"5"],[8326,1,"6"],[8327,1,"7"],[8328,1,"8"],[8329,1,"9"],[8330,5,"+"],[8331,1,"\u2212"],[8332,5,"="],[8333,5,"("],[8334,5,")"],[8335,3],[8336,1,"a"],[8337,1,"e"],[8338,1,"o"],[8339,1,"x"],[8340,1,"\u0259"],[8341,1,"h"],[8342,1,"k"],[8343,1,"l"],[8344,1,"m"],[8345,1,"n"],[8346,1,"p"],[8347,1,"s"],[8348,1,"t"],[[8349,8351],3],[[8352,8359],2],[8360,1,"rs"],[[8361,8362],2],[8363,2],[8364,2],[[8365,8367],2],[[8368,8369],2],[[8370,8373],2],[[8374,8376],2],[8377,2],[8378,2],[[8379,8381],2],[8382,2],[8383,2],[8384,2],[[8385,8399],3],[[8400,8417],2],[[8418,8419],2],[[8420,8426],2],[8427,2],[[8428,8431],2],[8432,2],[[8433,8447],3],[8448,5,"a/c"],[8449,5,"a/s"],[8450,1,"c"],[8451,1,"\xB0c"],[8452,2],[8453,5,"c/o"],[8454,5,"c/u"],[8455,1,"\u025B"],[8456,2],[8457,1,"\xB0f"],[8458,1,"g"],[[8459,8462],1,"h"],[8463,1,"\u0127"],[[8464,8465],1,"i"],[[8466,8467],1,"l"],[8468,2],[8469,1,"n"],[8470,1,"no"],[[8471,8472],2],[8473,1,"p"],[8474,1,"q"],[[8475,8477],1,"r"],[[8478,8479],2],[8480,1,"sm"],[8481,1,"tel"],[8482,1,"tm"],[8483,2],[8484,1,"z"],[8485,2],[8486,1,"\u03C9"],[8487,2],[8488,1,"z"],[8489,2],[8490,1,"k"],[8491,1,"\xE5"],[8492,1,"b"],[8493,1,"c"],[8494,2],[[8495,8496],1,"e"],[8497,1,"f"],[8498,3],[8499,1,"m"],[8500,1,"o"],[8501,1,"\u05D0"],[8502,1,"\u05D1"],[8503,1,"\u05D2"],[8504,1,"\u05D3"],[8505,1,"i"],[8506,2],[8507,1,"fax"],[8508,1,"\u03C0"],[[8509,8510],1,"\u03B3"],[8511,1,"\u03C0"],[8512,1,"\u2211"],[[8513,8516],2],[[8517,8518],1,"d"],[8519,1,"e"],[8520,1,"i"],[8521,1,"j"],[[8522,8523],2],[8524,2],[8525,2],[8526,2],[8527,2],[8528,1,"1\u20447"],[8529,1,"1\u20449"],[8530,1,"1\u204410"],[8531,1,"1\u20443"],[8532,1,"2\u20443"],[8533,1,"1\u20445"],[8534,1,"2\u20445"],[8535,1,"3\u20445"],[8536,1,"4\u20445"],[8537,1,"1\u20446"],[8538,1,"5\u20446"],[8539,1,"1\u20448"],[8540,1,"3\u20448"],[8541,1,"5\u20448"],[8542,1,"7\u20448"],[8543,1,"1\u2044"],[8544,1,"i"],[8545,1,"ii"],[8546,1,"iii"],[8547,1,"iv"],[8548,1,"v"],[8549,1,"vi"],[8550,1,"vii"],[8551,1,"viii"],[8552,1,"ix"],[8553,1,"x"],[8554,1,"xi"],[8555,1,"xii"],[8556,1,"l"],[8557,1,"c"],[8558,1,"d"],[8559,1,"m"],[8560,1,"i"],[8561,1,"ii"],[8562,1,"iii"],[8563,1,"iv"],[8564,1,"v"],[8565,1,"vi"],[8566,1,"vii"],[8567,1,"viii"],[8568,1,"ix"],[8569,1,"x"],[8570,1,"xi"],[8571,1,"xii"],[8572,1,"l"],[8573,1,"c"],[8574,1,"d"],[8575,1,"m"],[[8576,8578],2],[8579,3],[8580,2],[[8581,8584],2],[8585,1,"0\u20443"],[[8586,8587],2],[[8588,8591],3],[[8592,8682],2],[[8683,8691],2],[[8692,8703],2],[[8704,8747],2],[8748,1,"\u222B\u222B"],[8749,1,"\u222B\u222B\u222B"],[8750,2],[8751,1,"\u222E\u222E"],[8752,1,"\u222E\u222E\u222E"],[[8753,8799],2],[8800,4],[[8801,8813],2],[[8814,8815],4],[[8816,8945],2],[[8946,8959],2],[8960,2],[8961,2],[[8962,9e3],2],[9001,1,"\u3008"],[9002,1,"\u3009"],[[9003,9082],2],[9083,2],[9084,2],[[9085,9114],2],[[9115,9166],2],[[9167,9168],2],[[9169,9179],2],[[9180,9191],2],[9192,2],[[9193,9203],2],[[9204,9210],2],[[9211,9214],2],[9215,2],[[9216,9252],2],[[9253,9254],2],[[9255,9279],3],[[9280,9290],2],[[9291,9311],3],[9312,1,"1"],[9313,1,"2"],[9314,1,"3"],[9315,1,"4"],[9316,1,"5"],[9317,1,"6"],[9318,1,"7"],[9319,1,"8"],[9320,1,"9"],[9321,1,"10"],[9322,1,"11"],[9323,1,"12"],[9324,1,"13"],[9325,1,"14"],[9326,1,"15"],[9327,1,"16"],[9328,1,"17"],[9329,1,"18"],[9330,1,"19"],[9331,1,"20"],[9332,5,"(1)"],[9333,5,"(2)"],[9334,5,"(3)"],[9335,5,"(4)"],[9336,5,"(5)"],[9337,5,"(6)"],[9338,5,"(7)"],[9339,5,"(8)"],[9340,5,"(9)"],[9341,5,"(10)"],[9342,5,"(11)"],[9343,5,"(12)"],[9344,5,"(13)"],[9345,5,"(14)"],[9346,5,"(15)"],[9347,5,"(16)"],[9348,5,"(17)"],[9349,5,"(18)"],[9350,5,"(19)"],[9351,5,"(20)"],[[9352,9371],3],[9372,5,"(a)"],[9373,5,"(b)"],[9374,5,"(c)"],[9375,5,"(d)"],[9376,5,"(e)"],[9377,5,"(f)"],[9378,5,"(g)"],[9379,5,"(h)"],[9380,5,"(i)"],[9381,5,"(j)"],[9382,5,"(k)"],[9383,5,"(l)"],[9384,5,"(m)"],[9385,5,"(n)"],[9386,5,"(o)"],[9387,5,"(p)"],[9388,5,"(q)"],[9389,5,"(r)"],[9390,5,"(s)"],[9391,5,"(t)"],[9392,5,"(u)"],[9393,5,"(v)"],[9394,5,"(w)"],[9395,5,"(x)"],[9396,5,"(y)"],[9397,5,"(z)"],[9398,1,"a"],[9399,1,"b"],[9400,1,"c"],[9401,1,"d"],[9402,1,"e"],[9403,1,"f"],[9404,1,"g"],[9405,1,"h"],[9406,1,"i"],[9407,1,"j"],[9408,1,"k"],[9409,1,"l"],[9410,1,"m"],[9411,1,"n"],[9412,1,"o"],[9413,1,"p"],[9414,1,"q"],[9415,1,"r"],[9416,1,"s"],[9417,1,"t"],[9418,1,"u"],[9419,1,"v"],[9420,1,"w"],[9421,1,"x"],[9422,1,"y"],[9423,1,"z"],[9424,1,"a"],[9425,1,"b"],[9426,1,"c"],[9427,1,"d"],[9428,1,"e"],[9429,1,"f"],[9430,1,"g"],[9431,1,"h"],[9432,1,"i"],[9433,1,"j"],[9434,1,"k"],[9435,1,"l"],[9436,1,"m"],[9437,1,"n"],[9438,1,"o"],[9439,1,"p"],[9440,1,"q"],[9441,1,"r"],[9442,1,"s"],[9443,1,"t"],[9444,1,"u"],[9445,1,"v"],[9446,1,"w"],[9447,1,"x"],[9448,1,"y"],[9449,1,"z"],[9450,1,"0"],[[9451,9470],2],[9471,2],[[9472,9621],2],[[9622,9631],2],[[9632,9711],2],[[9712,9719],2],[[9720,9727],2],[[9728,9747],2],[[9748,9749],2],[[9750,9751],2],[9752,2],[9753,2],[[9754,9839],2],[[9840,9841],2],[[9842,9853],2],[[9854,9855],2],[[9856,9865],2],[[9866,9873],2],[[9874,9884],2],[9885,2],[[9886,9887],2],[[9888,9889],2],[[9890,9905],2],[9906,2],[[9907,9916],2],[[9917,9919],2],[[9920,9923],2],[[9924,9933],2],[9934,2],[[9935,9953],2],[9954,2],[9955,2],[[9956,9959],2],[[9960,9983],2],[9984,2],[[9985,9988],2],[9989,2],[[9990,9993],2],[[9994,9995],2],[[9996,10023],2],[10024,2],[[10025,10059],2],[10060,2],[10061,2],[10062,2],[[10063,10066],2],[[10067,10069],2],[10070,2],[10071,2],[[10072,10078],2],[[10079,10080],2],[[10081,10087],2],[[10088,10101],2],[[10102,10132],2],[[10133,10135],2],[[10136,10159],2],[10160,2],[[10161,10174],2],[10175,2],[[10176,10182],2],[[10183,10186],2],[10187,2],[10188,2],[10189,2],[[10190,10191],2],[[10192,10219],2],[[10220,10223],2],[[10224,10239],2],[[10240,10495],2],[[10496,10763],2],[10764,1,"\u222B\u222B\u222B\u222B"],[[10765,10867],2],[10868,5,"::="],[10869,5,"=="],[10870,5,"==="],[[10871,10971],2],[10972,1,"\u2ADD\u0338"],[[10973,11007],2],[[11008,11021],2],[[11022,11027],2],[[11028,11034],2],[[11035,11039],2],[[11040,11043],2],[[11044,11084],2],[[11085,11087],2],[[11088,11092],2],[[11093,11097],2],[[11098,11123],2],[[11124,11125],3],[[11126,11157],2],[11158,3],[11159,2],[[11160,11193],2],[[11194,11196],2],[[11197,11208],2],[11209,2],[[11210,11217],2],[11218,2],[[11219,11243],2],[[11244,11247],2],[[11248,11262],2],[11263,2],[11264,1,"\u2C30"],[11265,1,"\u2C31"],[11266,1,"\u2C32"],[11267,1,"\u2C33"],[11268,1,"\u2C34"],[11269,1,"\u2C35"],[11270,1,"\u2C36"],[11271,1,"\u2C37"],[11272,1,"\u2C38"],[11273,1,"\u2C39"],[11274,1,"\u2C3A"],[11275,1,"\u2C3B"],[11276,1,"\u2C3C"],[11277,1,"\u2C3D"],[11278,1,"\u2C3E"],[11279,1,"\u2C3F"],[11280,1,"\u2C40"],[11281,1,"\u2C41"],[11282,1,"\u2C42"],[11283,1,"\u2C43"],[11284,1,"\u2C44"],[11285,1,"\u2C45"],[11286,1,"\u2C46"],[11287,1,"\u2C47"],[11288,1,"\u2C48"],[11289,1,"\u2C49"],[11290,1,"\u2C4A"],[11291,1,"\u2C4B"],[11292,1,"\u2C4C"],[11293,1,"\u2C4D"],[11294,1,"\u2C4E"],[11295,1,"\u2C4F"],[11296,1,"\u2C50"],[11297,1,"\u2C51"],[11298,1,"\u2C52"],[11299,1,"\u2C53"],[11300,1,"\u2C54"],[11301,1,"\u2C55"],[11302,1,"\u2C56"],[11303,1,"\u2C57"],[11304,1,"\u2C58"],[11305,1,"\u2C59"],[11306,1,"\u2C5A"],[11307,1,"\u2C5B"],[11308,1,"\u2C5C"],[11309,1,"\u2C5D"],[11310,1,"\u2C5E"],[11311,1,"\u2C5F"],[[11312,11358],2],[11359,2],[11360,1,"\u2C61"],[11361,2],[11362,1,"\u026B"],[11363,1,"\u1D7D"],[11364,1,"\u027D"],[[11365,11366],2],[11367,1,"\u2C68"],[11368,2],[11369,1,"\u2C6A"],[11370,2],[11371,1,"\u2C6C"],[11372,2],[11373,1,"\u0251"],[11374,1,"\u0271"],[11375,1,"\u0250"],[11376,1,"\u0252"],[11377,2],[11378,1,"\u2C73"],[11379,2],[11380,2],[11381,1,"\u2C76"],[[11382,11383],2],[[11384,11387],2],[11388,1,"j"],[11389,1,"v"],[11390,1,"\u023F"],[11391,1,"\u0240"],[11392,1,"\u2C81"],[11393,2],[11394,1,"\u2C83"],[11395,2],[11396,1,"\u2C85"],[11397,2],[11398,1,"\u2C87"],[11399,2],[11400,1,"\u2C89"],[11401,2],[11402,1,"\u2C8B"],[11403,2],[11404,1,"\u2C8D"],[11405,2],[11406,1,"\u2C8F"],[11407,2],[11408,1,"\u2C91"],[11409,2],[11410,1,"\u2C93"],[11411,2],[11412,1,"\u2C95"],[11413,2],[11414,1,"\u2C97"],[11415,2],[11416,1,"\u2C99"],[11417,2],[11418,1,"\u2C9B"],[11419,2],[11420,1,"\u2C9D"],[11421,2],[11422,1,"\u2C9F"],[11423,2],[11424,1,"\u2CA1"],[11425,2],[11426,1,"\u2CA3"],[11427,2],[11428,1,"\u2CA5"],[11429,2],[11430,1,"\u2CA7"],[11431,2],[11432,1,"\u2CA9"],[11433,2],[11434,1,"\u2CAB"],[11435,2],[11436,1,"\u2CAD"],[11437,2],[11438,1,"\u2CAF"],[11439,2],[11440,1,"\u2CB1"],[11441,2],[11442,1,"\u2CB3"],[11443,2],[11444,1,"\u2CB5"],[11445,2],[11446,1,"\u2CB7"],[11447,2],[11448,1,"\u2CB9"],[11449,2],[11450,1,"\u2CBB"],[11451,2],[11452,1,"\u2CBD"],[11453,2],[11454,1,"\u2CBF"],[11455,2],[11456,1,"\u2CC1"],[11457,2],[11458,1,"\u2CC3"],[11459,2],[11460,1,"\u2CC5"],[11461,2],[11462,1,"\u2CC7"],[11463,2],[11464,1,"\u2CC9"],[11465,2],[11466,1,"\u2CCB"],[11467,2],[11468,1,"\u2CCD"],[11469,2],[11470,1,"\u2CCF"],[11471,2],[11472,1,"\u2CD1"],[11473,2],[11474,1,"\u2CD3"],[11475,2],[11476,1,"\u2CD5"],[11477,2],[11478,1,"\u2CD7"],[11479,2],[11480,1,"\u2CD9"],[11481,2],[11482,1,"\u2CDB"],[11483,2],[11484,1,"\u2CDD"],[11485,2],[11486,1,"\u2CDF"],[11487,2],[11488,1,"\u2CE1"],[11489,2],[11490,1,"\u2CE3"],[[11491,11492],2],[[11493,11498],2],[11499,1,"\u2CEC"],[11500,2],[11501,1,"\u2CEE"],[[11502,11505],2],[11506,1,"\u2CF3"],[11507,2],[[11508,11512],3],[[11513,11519],2],[[11520,11557],2],[11558,3],[11559,2],[[11560,11564],3],[11565,2],[[11566,11567],3],[[11568,11621],2],[[11622,11623],2],[[11624,11630],3],[11631,1,"\u2D61"],[11632,2],[[11633,11646],3],[11647,2],[[11648,11670],2],[[11671,11679],3],[[11680,11686],2],[11687,3],[[11688,11694],2],[11695,3],[[11696,11702],2],[11703,3],[[11704,11710],2],[11711,3],[[11712,11718],2],[11719,3],[[11720,11726],2],[11727,3],[[11728,11734],2],[11735,3],[[11736,11742],2],[11743,3],[[11744,11775],2],[[11776,11799],2],[[11800,11803],2],[[11804,11805],2],[[11806,11822],2],[11823,2],[11824,2],[11825,2],[[11826,11835],2],[[11836,11842],2],[[11843,11844],2],[[11845,11849],2],[[11850,11854],2],[11855,2],[[11856,11858],2],[[11859,11869],2],[[11870,11903],3],[[11904,11929],2],[11930,3],[[11931,11934],2],[11935,1,"\u6BCD"],[[11936,12018],2],[12019,1,"\u9F9F"],[[12020,12031],3],[12032,1,"\u4E00"],[12033,1,"\u4E28"],[12034,1,"\u4E36"],[12035,1,"\u4E3F"],[12036,1,"\u4E59"],[12037,1,"\u4E85"],[12038,1,"\u4E8C"],[12039,1,"\u4EA0"],[12040,1,"\u4EBA"],[12041,1,"\u513F"],[12042,1,"\u5165"],[12043,1,"\u516B"],[12044,1,"\u5182"],[12045,1,"\u5196"],[12046,1,"\u51AB"],[12047,1,"\u51E0"],[12048,1,"\u51F5"],[12049,1,"\u5200"],[12050,1,"\u529B"],[12051,1,"\u52F9"],[12052,1,"\u5315"],[12053,1,"\u531A"],[12054,1,"\u5338"],[12055,1,"\u5341"],[12056,1,"\u535C"],[12057,1,"\u5369"],[12058,1,"\u5382"],[12059,1,"\u53B6"],[12060,1,"\u53C8"],[12061,1,"\u53E3"],[12062,1,"\u56D7"],[12063,1,"\u571F"],[12064,1,"\u58EB"],[12065,1,"\u5902"],[12066,1,"\u590A"],[12067,1,"\u5915"],[12068,1,"\u5927"],[12069,1,"\u5973"],[12070,1,"\u5B50"],[12071,1,"\u5B80"],[12072,1,"\u5BF8"],[12073,1,"\u5C0F"],[12074,1,"\u5C22"],[12075,1,"\u5C38"],[12076,1,"\u5C6E"],[12077,1,"\u5C71"],[12078,1,"\u5DDB"],[12079,1,"\u5DE5"],[12080,1,"\u5DF1"],[12081,1,"\u5DFE"],[12082,1,"\u5E72"],[12083,1,"\u5E7A"],[12084,1,"\u5E7F"],[12085,1,"\u5EF4"],[12086,1,"\u5EFE"],[12087,1,"\u5F0B"],[12088,1,"\u5F13"],[12089,1,"\u5F50"],[12090,1,"\u5F61"],[12091,1,"\u5F73"],[12092,1,"\u5FC3"],[12093,1,"\u6208"],[12094,1,"\u6236"],[12095,1,"\u624B"],[12096,1,"\u652F"],[12097,1,"\u6534"],[12098,1,"\u6587"],[12099,1,"\u6597"],[12100,1,"\u65A4"],[12101,1,"\u65B9"],[12102,1,"\u65E0"],[12103,1,"\u65E5"],[12104,1,"\u66F0"],[12105,1,"\u6708"],[12106,1,"\u6728"],[12107,1,"\u6B20"],[12108,1,"\u6B62"],[12109,1,"\u6B79"],[12110,1,"\u6BB3"],[12111,1,"\u6BCB"],[12112,1,"\u6BD4"],[12113,1,"\u6BDB"],[12114,1,"\u6C0F"],[12115,1,"\u6C14"],[12116,1,"\u6C34"],[12117,1,"\u706B"],[12118,1,"\u722A"],[12119,1,"\u7236"],[12120,1,"\u723B"],[12121,1,"\u723F"],[12122,1,"\u7247"],[12123,1,"\u7259"],[12124,1,"\u725B"],[12125,1,"\u72AC"],[12126,1,"\u7384"],[12127,1,"\u7389"],[12128,1,"\u74DC"],[12129,1,"\u74E6"],[12130,1,"\u7518"],[12131,1,"\u751F"],[12132,1,"\u7528"],[12133,1,"\u7530"],[12134,1,"\u758B"],[12135,1,"\u7592"],[12136,1,"\u7676"],[12137,1,"\u767D"],[12138,1,"\u76AE"],[12139,1,"\u76BF"],[12140,1,"\u76EE"],[12141,1,"\u77DB"],[12142,1,"\u77E2"],[12143,1,"\u77F3"],[12144,1,"\u793A"],[12145,1,"\u79B8"],[12146,1,"\u79BE"],[12147,1,"\u7A74"],[12148,1,"\u7ACB"],[12149,1,"\u7AF9"],[12150,1,"\u7C73"],[12151,1,"\u7CF8"],[12152,1,"\u7F36"],[12153,1,"\u7F51"],[12154,1,"\u7F8A"],[12155,1,"\u7FBD"],[12156,1,"\u8001"],[12157,1,"\u800C"],[12158,1,"\u8012"],[12159,1,"\u8033"],[12160,1,"\u807F"],[12161,1,"\u8089"],[12162,1,"\u81E3"],[12163,1,"\u81EA"],[12164,1,"\u81F3"],[12165,1,"\u81FC"],[12166,1,"\u820C"],[12167,1,"\u821B"],[12168,1,"\u821F"],[12169,1,"\u826E"],[12170,1,"\u8272"],[12171,1,"\u8278"],[12172,1,"\u864D"],[12173,1,"\u866B"],[12174,1,"\u8840"],[12175,1,"\u884C"],[12176,1,"\u8863"],[12177,1,"\u897E"],[12178,1,"\u898B"],[12179,1,"\u89D2"],[12180,1,"\u8A00"],[12181,1,"\u8C37"],[12182,1,"\u8C46"],[12183,1,"\u8C55"],[12184,1,"\u8C78"],[12185,1,"\u8C9D"],[12186,1,"\u8D64"],[12187,1,"\u8D70"],[12188,1,"\u8DB3"],[12189,1,"\u8EAB"],[12190,1,"\u8ECA"],[12191,1,"\u8F9B"],[12192,1,"\u8FB0"],[12193,1,"\u8FB5"],[12194,1,"\u9091"],[12195,1,"\u9149"],[12196,1,"\u91C6"],[12197,1,"\u91CC"],[12198,1,"\u91D1"],[12199,1,"\u9577"],[12200,1,"\u9580"],[12201,1,"\u961C"],[12202,1,"\u96B6"],[12203,1,"\u96B9"],[12204,1,"\u96E8"],[12205,1,"\u9751"],[12206,1,"\u975E"],[12207,1,"\u9762"],[12208,1,"\u9769"],[12209,1,"\u97CB"],[12210,1,"\u97ED"],[12211,1,"\u97F3"],[12212,1,"\u9801"],[12213,1,"\u98A8"],[12214,1,"\u98DB"],[12215,1,"\u98DF"],[12216,1,"\u9996"],[12217,1,"\u9999"],[12218,1,"\u99AC"],[12219,1,"\u9AA8"],[12220,1,"\u9AD8"],[12221,1,"\u9ADF"],[12222,1,"\u9B25"],[12223,1,"\u9B2F"],[12224,1,"\u9B32"],[12225,1,"\u9B3C"],[12226,1,"\u9B5A"],[12227,1,"\u9CE5"],[12228,1,"\u9E75"],[12229,1,"\u9E7F"],[12230,1,"\u9EA5"],[12231,1,"\u9EBB"],[12232,1,"\u9EC3"],[12233,1,"\u9ECD"],[12234,1,"\u9ED1"],[12235,1,"\u9EF9"],[12236,1,"\u9EFD"],[12237,1,"\u9F0E"],[12238,1,"\u9F13"],[12239,1,"\u9F20"],[12240,1,"\u9F3B"],[12241,1,"\u9F4A"],[12242,1,"\u9F52"],[12243,1,"\u9F8D"],[12244,1,"\u9F9C"],[12245,1,"\u9FA0"],[[12246,12271],3],[[12272,12283],3],[[12284,12287],3],[12288,5," "],[12289,2],[12290,1,"."],[[12291,12292],2],[[12293,12295],2],[[12296,12329],2],[[12330,12333],2],[[12334,12341],2],[12342,1,"\u3012"],[12343,2],[12344,1,"\u5341"],[12345,1,"\u5344"],[12346,1,"\u5345"],[12347,2],[12348,2],[12349,2],[12350,2],[12351,2],[12352,3],[[12353,12436],2],[[12437,12438],2],[[12439,12440],3],[[12441,12442],2],[12443,5," \u3099"],[12444,5," \u309A"],[[12445,12446],2],[12447,1,"\u3088\u308A"],[12448,2],[[12449,12542],2],[12543,1,"\u30B3\u30C8"],[[12544,12548],3],[[12549,12588],2],[12589,2],[12590,2],[12591,2],[12592,3],[12593,1,"\u1100"],[12594,1,"\u1101"],[12595,1,"\u11AA"],[12596,1,"\u1102"],[12597,1,"\u11AC"],[12598,1,"\u11AD"],[12599,1,"\u1103"],[12600,1,"\u1104"],[12601,1,"\u1105"],[12602,1,"\u11B0"],[12603,1,"\u11B1"],[12604,1,"\u11B2"],[12605,1,"\u11B3"],[12606,1,"\u11B4"],[12607,1,"\u11B5"],[12608,1,"\u111A"],[12609,1,"\u1106"],[12610,1,"\u1107"],[12611,1,"\u1108"],[12612,1,"\u1121"],[12613,1,"\u1109"],[12614,1,"\u110A"],[12615,1,"\u110B"],[12616,1,"\u110C"],[12617,1,"\u110D"],[12618,1,"\u110E"],[12619,1,"\u110F"],[12620,1,"\u1110"],[12621,1,"\u1111"],[12622,1,"\u1112"],[12623,1,"\u1161"],[12624,1,"\u1162"],[12625,1,"\u1163"],[12626,1,"\u1164"],[12627,1,"\u1165"],[12628,1,"\u1166"],[12629,1,"\u1167"],[12630,1,"\u1168"],[12631,1,"\u1169"],[12632,1,"\u116A"],[12633,1,"\u116B"],[12634,1,"\u116C"],[12635,1,"\u116D"],[12636,1,"\u116E"],[12637,1,"\u116F"],[12638,1,"\u1170"],[12639,1,"\u1171"],[12640,1,"\u1172"],[12641,1,"\u1173"],[12642,1,"\u1174"],[12643,1,"\u1175"],[12644,3],[12645,1,"\u1114"],[12646,1,"\u1115"],[12647,1,"\u11C7"],[12648,1,"\u11C8"],[12649,1,"\u11CC"],[12650,1,"\u11CE"],[12651,1,"\u11D3"],[12652,1,"\u11D7"],[12653,1,"\u11D9"],[12654,1,"\u111C"],[12655,1,"\u11DD"],[12656,1,"\u11DF"],[12657,1,"\u111D"],[12658,1,"\u111E"],[12659,1,"\u1120"],[12660,1,"\u1122"],[12661,1,"\u1123"],[12662,1,"\u1127"],[12663,1,"\u1129"],[12664,1,"\u112B"],[12665,1,"\u112C"],[12666,1,"\u112D"],[12667,1,"\u112E"],[12668,1,"\u112F"],[12669,1,"\u1132"],[12670,1,"\u1136"],[12671,1,"\u1140"],[12672,1,"\u1147"],[12673,1,"\u114C"],[12674,1,"\u11F1"],[12675,1,"\u11F2"],[12676,1,"\u1157"],[12677,1,"\u1158"],[12678,1,"\u1159"],[12679,1,"\u1184"],[12680,1,"\u1185"],[12681,1,"\u1188"],[12682,1,"\u1191"],[12683,1,"\u1192"],[12684,1,"\u1194"],[12685,1,"\u119E"],[12686,1,"\u11A1"],[12687,3],[[12688,12689],2],[12690,1,"\u4E00"],[12691,1,"\u4E8C"],[12692,1,"\u4E09"],[12693,1,"\u56DB"],[12694,1,"\u4E0A"],[12695,1,"\u4E2D"],[12696,1,"\u4E0B"],[12697,1,"\u7532"],[12698,1,"\u4E59"],[12699,1,"\u4E19"],[12700,1,"\u4E01"],[12701,1,"\u5929"],[12702,1,"\u5730"],[12703,1,"\u4EBA"],[[12704,12727],2],[[12728,12730],2],[[12731,12735],2],[[12736,12751],2],[[12752,12771],2],[[12772,12783],3],[[12784,12799],2],[12800,5,"(\u1100)"],[12801,5,"(\u1102)"],[12802,5,"(\u1103)"],[12803,5,"(\u1105)"],[12804,5,"(\u1106)"],[12805,5,"(\u1107)"],[12806,5,"(\u1109)"],[12807,5,"(\u110B)"],[12808,5,"(\u110C)"],[12809,5,"(\u110E)"],[12810,5,"(\u110F)"],[12811,5,"(\u1110)"],[12812,5,"(\u1111)"],[12813,5,"(\u1112)"],[12814,5,"(\uAC00)"],[12815,5,"(\uB098)"],[12816,5,"(\uB2E4)"],[12817,5,"(\uB77C)"],[12818,5,"(\uB9C8)"],[12819,5,"(\uBC14)"],[12820,5,"(\uC0AC)"],[12821,5,"(\uC544)"],[12822,5,"(\uC790)"],[12823,5,"(\uCC28)"],[12824,5,"(\uCE74)"],[12825,5,"(\uD0C0)"],[12826,5,"(\uD30C)"],[12827,5,"(\uD558)"],[12828,5,"(\uC8FC)"],[12829,5,"(\uC624\uC804)"],[12830,5,"(\uC624\uD6C4)"],[12831,3],[12832,5,"(\u4E00)"],[12833,5,"(\u4E8C)"],[12834,5,"(\u4E09)"],[12835,5,"(\u56DB)"],[12836,5,"(\u4E94)"],[12837,5,"(\u516D)"],[12838,5,"(\u4E03)"],[12839,5,"(\u516B)"],[12840,5,"(\u4E5D)"],[12841,5,"(\u5341)"],[12842,5,"(\u6708)"],[12843,5,"(\u706B)"],[12844,5,"(\u6C34)"],[12845,5,"(\u6728)"],[12846,5,"(\u91D1)"],[12847,5,"(\u571F)"],[12848,5,"(\u65E5)"],[12849,5,"(\u682A)"],[12850,5,"(\u6709)"],[12851,5,"(\u793E)"],[12852,5,"(\u540D)"],[12853,5,"(\u7279)"],[12854,5,"(\u8CA1)"],[12855,5,"(\u795D)"],[12856,5,"(\u52B4)"],[12857,5,"(\u4EE3)"],[12858,5,"(\u547C)"],[12859,5,"(\u5B66)"],[12860,5,"(\u76E3)"],[12861,5,"(\u4F01)"],[12862,5,"(\u8CC7)"],[12863,5,"(\u5354)"],[12864,5,"(\u796D)"],[12865,5,"(\u4F11)"],[12866,5,"(\u81EA)"],[12867,5,"(\u81F3)"],[12868,1,"\u554F"],[12869,1,"\u5E7C"],[12870,1,"\u6587"],[12871,1,"\u7B8F"],[[12872,12879],2],[12880,1,"pte"],[12881,1,"21"],[12882,1,"22"],[12883,1,"23"],[12884,1,"24"],[12885,1,"25"],[12886,1,"26"],[12887,1,"27"],[12888,1,"28"],[12889,1,"29"],[12890,1,"30"],[12891,1,"31"],[12892,1,"32"],[12893,1,"33"],[12894,1,"34"],[12895,1,"35"],[12896,1,"\u1100"],[12897,1,"\u1102"],[12898,1,"\u1103"],[12899,1,"\u1105"],[12900,1,"\u1106"],[12901,1,"\u1107"],[12902,1,"\u1109"],[12903,1,"\u110B"],[12904,1,"\u110C"],[12905,1,"\u110E"],[12906,1,"\u110F"],[12907,1,"\u1110"],[12908,1,"\u1111"],[12909,1,"\u1112"],[12910,1,"\uAC00"],[12911,1,"\uB098"],[12912,1,"\uB2E4"],[12913,1,"\uB77C"],[12914,1,"\uB9C8"],[12915,1,"\uBC14"],[12916,1,"\uC0AC"],[12917,1,"\uC544"],[12918,1,"\uC790"],[12919,1,"\uCC28"],[12920,1,"\uCE74"],[12921,1,"\uD0C0"],[12922,1,"\uD30C"],[12923,1,"\uD558"],[12924,1,"\uCC38\uACE0"],[12925,1,"\uC8FC\uC758"],[12926,1,"\uC6B0"],[12927,2],[12928,1,"\u4E00"],[12929,1,"\u4E8C"],[12930,1,"\u4E09"],[12931,1,"\u56DB"],[12932,1,"\u4E94"],[12933,1,"\u516D"],[12934,1,"\u4E03"],[12935,1,"\u516B"],[12936,1,"\u4E5D"],[12937,1,"\u5341"],[12938,1,"\u6708"],[12939,1,"\u706B"],[12940,1,"\u6C34"],[12941,1,"\u6728"],[12942,1,"\u91D1"],[12943,1,"\u571F"],[12944,1,"\u65E5"],[12945,1,"\u682A"],[12946,1,"\u6709"],[12947,1,"\u793E"],[12948,1,"\u540D"],[12949,1,"\u7279"],[12950,1,"\u8CA1"],[12951,1,"\u795D"],[12952,1,"\u52B4"],[12953,1,"\u79D8"],[12954,1,"\u7537"],[12955,1,"\u5973"],[12956,1,"\u9069"],[12957,1,"\u512A"],[12958,1,"\u5370"],[12959,1,"\u6CE8"],[12960,1,"\u9805"],[12961,1,"\u4F11"],[12962,1,"\u5199"],[12963,1,"\u6B63"],[12964,1,"\u4E0A"],[12965,1,"\u4E2D"],[12966,1,"\u4E0B"],[12967,1,"\u5DE6"],[12968,1,"\u53F3"],[12969,1,"\u533B"],[12970,1,"\u5B97"],[12971,1,"\u5B66"],[12972,1,"\u76E3"],[12973,1,"\u4F01"],[12974,1,"\u8CC7"],[12975,1,"\u5354"],[12976,1,"\u591C"],[12977,1,"36"],[12978,1,"37"],[12979,1,"38"],[12980,1,"39"],[12981,1,"40"],[12982,1,"41"],[12983,1,"42"],[12984,1,"43"],[12985,1,"44"],[12986,1,"45"],[12987,1,"46"],[12988,1,"47"],[12989,1,"48"],[12990,1,"49"],[12991,1,"50"],[12992,1,"1\u6708"],[12993,1,"2\u6708"],[12994,1,"3\u6708"],[12995,1,"4\u6708"],[12996,1,"5\u6708"],[12997,1,"6\u6708"],[12998,1,"7\u6708"],[12999,1,"8\u6708"],[13e3,1,"9\u6708"],[13001,1,"10\u6708"],[13002,1,"11\u6708"],[13003,1,"12\u6708"],[13004,1,"hg"],[13005,1,"erg"],[13006,1,"ev"],[13007,1,"ltd"],[13008,1,"\u30A2"],[13009,1,"\u30A4"],[13010,1,"\u30A6"],[13011,1,"\u30A8"],[13012,1,"\u30AA"],[13013,1,"\u30AB"],[13014,1,"\u30AD"],[13015,1,"\u30AF"],[13016,1,"\u30B1"],[13017,1,"\u30B3"],[13018,1,"\u30B5"],[13019,1,"\u30B7"],[13020,1,"\u30B9"],[13021,1,"\u30BB"],[13022,1,"\u30BD"],[13023,1,"\u30BF"],[13024,1,"\u30C1"],[13025,1,"\u30C4"],[13026,1,"\u30C6"],[13027,1,"\u30C8"],[13028,1,"\u30CA"],[13029,1,"\u30CB"],[13030,1,"\u30CC"],[13031,1,"\u30CD"],[13032,1,"\u30CE"],[13033,1,"\u30CF"],[13034,1,"\u30D2"],[13035,1,"\u30D5"],[13036,1,"\u30D8"],[13037,1,"\u30DB"],[13038,1,"\u30DE"],[13039,1,"\u30DF"],[13040,1,"\u30E0"],[13041,1,"\u30E1"],[13042,1,"\u30E2"],[13043,1,"\u30E4"],[13044,1,"\u30E6"],[13045,1,"\u30E8"],[13046,1,"\u30E9"],[13047,1,"\u30EA"],[13048,1,"\u30EB"],[13049,1,"\u30EC"],[13050,1,"\u30ED"],[13051,1,"\u30EF"],[13052,1,"\u30F0"],[13053,1,"\u30F1"],[13054,1,"\u30F2"],[13055,1,"\u4EE4\u548C"],[13056,1,"\u30A2\u30D1\u30FC\u30C8"],[13057,1,"\u30A2\u30EB\u30D5\u30A1"],[13058,1,"\u30A2\u30F3\u30DA\u30A2"],[13059,1,"\u30A2\u30FC\u30EB"],[13060,1,"\u30A4\u30CB\u30F3\u30B0"],[13061,1,"\u30A4\u30F3\u30C1"],[13062,1,"\u30A6\u30A9\u30F3"],[13063,1,"\u30A8\u30B9\u30AF\u30FC\u30C9"],[13064,1,"\u30A8\u30FC\u30AB\u30FC"],[13065,1,"\u30AA\u30F3\u30B9"],[13066,1,"\u30AA\u30FC\u30E0"],[13067,1,"\u30AB\u30A4\u30EA"],[13068,1,"\u30AB\u30E9\u30C3\u30C8"],[13069,1,"\u30AB\u30ED\u30EA\u30FC"],[13070,1,"\u30AC\u30ED\u30F3"],[13071,1,"\u30AC\u30F3\u30DE"],[13072,1,"\u30AE\u30AC"],[13073,1,"\u30AE\u30CB\u30FC"],[13074,1,"\u30AD\u30E5\u30EA\u30FC"],[13075,1,"\u30AE\u30EB\u30C0\u30FC"],[13076,1,"\u30AD\u30ED"],[13077,1,"\u30AD\u30ED\u30B0\u30E9\u30E0"],[13078,1,"\u30AD\u30ED\u30E1\u30FC\u30C8\u30EB"],[13079,1,"\u30AD\u30ED\u30EF\u30C3\u30C8"],[13080,1,"\u30B0\u30E9\u30E0"],[13081,1,"\u30B0\u30E9\u30E0\u30C8\u30F3"],[13082,1,"\u30AF\u30EB\u30BC\u30A4\u30ED"],[13083,1,"\u30AF\u30ED\u30FC\u30CD"],[13084,1,"\u30B1\u30FC\u30B9"],[13085,1,"\u30B3\u30EB\u30CA"],[13086,1,"\u30B3\u30FC\u30DD"],[13087,1,"\u30B5\u30A4\u30AF\u30EB"],[13088,1,"\u30B5\u30F3\u30C1\u30FC\u30E0"],[13089,1,"\u30B7\u30EA\u30F3\u30B0"],[13090,1,"\u30BB\u30F3\u30C1"],[13091,1,"\u30BB\u30F3\u30C8"],[13092,1,"\u30C0\u30FC\u30B9"],[13093,1,"\u30C7\u30B7"],[13094,1,"\u30C9\u30EB"],[13095,1,"\u30C8\u30F3"],[13096,1,"\u30CA\u30CE"],[13097,1,"\u30CE\u30C3\u30C8"],[13098,1,"\u30CF\u30A4\u30C4"],[13099,1,"\u30D1\u30FC\u30BB\u30F3\u30C8"],[13100,1,"\u30D1\u30FC\u30C4"],[13101,1,"\u30D0\u30FC\u30EC\u30EB"],[13102,1,"\u30D4\u30A2\u30B9\u30C8\u30EB"],[13103,1,"\u30D4\u30AF\u30EB"],[13104,1,"\u30D4\u30B3"],[13105,1,"\u30D3\u30EB"],[13106,1,"\u30D5\u30A1\u30E9\u30C3\u30C9"],[13107,1,"\u30D5\u30A3\u30FC\u30C8"],[13108,1,"\u30D6\u30C3\u30B7\u30A7\u30EB"],[13109,1,"\u30D5\u30E9\u30F3"],[13110,1,"\u30D8\u30AF\u30BF\u30FC\u30EB"],[13111,1,"\u30DA\u30BD"],[13112,1,"\u30DA\u30CB\u30D2"],[13113,1,"\u30D8\u30EB\u30C4"],[13114,1,"\u30DA\u30F3\u30B9"],[13115,1,"\u30DA\u30FC\u30B8"],[13116,1,"\u30D9\u30FC\u30BF"],[13117,1,"\u30DD\u30A4\u30F3\u30C8"],[13118,1,"\u30DC\u30EB\u30C8"],[13119,1,"\u30DB\u30F3"],[13120,1,"\u30DD\u30F3\u30C9"],[13121,1,"\u30DB\u30FC\u30EB"],[13122,1,"\u30DB\u30FC\u30F3"],[13123,1,"\u30DE\u30A4\u30AF\u30ED"],[13124,1,"\u30DE\u30A4\u30EB"],[13125,1,"\u30DE\u30C3\u30CF"],[13126,1,"\u30DE\u30EB\u30AF"],[13127,1,"\u30DE\u30F3\u30B7\u30E7\u30F3"],[13128,1,"\u30DF\u30AF\u30ED\u30F3"],[13129,1,"\u30DF\u30EA"],[13130,1,"\u30DF\u30EA\u30D0\u30FC\u30EB"],[13131,1,"\u30E1\u30AC"],[13132,1,"\u30E1\u30AC\u30C8\u30F3"],[13133,1,"\u30E1\u30FC\u30C8\u30EB"],[13134,1,"\u30E4\u30FC\u30C9"],[13135,1,"\u30E4\u30FC\u30EB"],[13136,1,"\u30E6\u30A2\u30F3"],[13137,1,"\u30EA\u30C3\u30C8\u30EB"],[13138,1,"\u30EA\u30E9"],[13139,1,"\u30EB\u30D4\u30FC"],[13140,1,"\u30EB\u30FC\u30D6\u30EB"],[13141,1,"\u30EC\u30E0"],[13142,1,"\u30EC\u30F3\u30C8\u30B2\u30F3"],[13143,1,"\u30EF\u30C3\u30C8"],[13144,1,"0\u70B9"],[13145,1,"1\u70B9"],[13146,1,"2\u70B9"],[13147,1,"3\u70B9"],[13148,1,"4\u70B9"],[13149,1,"5\u70B9"],[13150,1,"6\u70B9"],[13151,1,"7\u70B9"],[13152,1,"8\u70B9"],[13153,1,"9\u70B9"],[13154,1,"10\u70B9"],[13155,1,"11\u70B9"],[13156,1,"12\u70B9"],[13157,1,"13\u70B9"],[13158,1,"14\u70B9"],[13159,1,"15\u70B9"],[13160,1,"16\u70B9"],[13161,1,"17\u70B9"],[13162,1,"18\u70B9"],[13163,1,"19\u70B9"],[13164,1,"20\u70B9"],[13165,1,"21\u70B9"],[13166,1,"22\u70B9"],[13167,1,"23\u70B9"],[13168,1,"24\u70B9"],[13169,1,"hpa"],[13170,1,"da"],[13171,1,"au"],[13172,1,"bar"],[13173,1,"ov"],[13174,1,"pc"],[13175,1,"dm"],[13176,1,"dm2"],[13177,1,"dm3"],[13178,1,"iu"],[13179,1,"\u5E73\u6210"],[13180,1,"\u662D\u548C"],[13181,1,"\u5927\u6B63"],[13182,1,"\u660E\u6CBB"],[13183,1,"\u682A\u5F0F\u4F1A\u793E"],[13184,1,"pa"],[13185,1,"na"],[13186,1,"\u03BCa"],[13187,1,"ma"],[13188,1,"ka"],[13189,1,"kb"],[13190,1,"mb"],[13191,1,"gb"],[13192,1,"cal"],[13193,1,"kcal"],[13194,1,"pf"],[13195,1,"nf"],[13196,1,"\u03BCf"],[13197,1,"\u03BCg"],[13198,1,"mg"],[13199,1,"kg"],[13200,1,"hz"],[13201,1,"khz"],[13202,1,"mhz"],[13203,1,"ghz"],[13204,1,"thz"],[13205,1,"\u03BCl"],[13206,1,"ml"],[13207,1,"dl"],[13208,1,"kl"],[13209,1,"fm"],[13210,1,"nm"],[13211,1,"\u03BCm"],[13212,1,"mm"],[13213,1,"cm"],[13214,1,"km"],[13215,1,"mm2"],[13216,1,"cm2"],[13217,1,"m2"],[13218,1,"km2"],[13219,1,"mm3"],[13220,1,"cm3"],[13221,1,"m3"],[13222,1,"km3"],[13223,1,"m\u2215s"],[13224,1,"m\u2215s2"],[13225,1,"pa"],[13226,1,"kpa"],[13227,1,"mpa"],[13228,1,"gpa"],[13229,1,"rad"],[13230,1,"rad\u2215s"],[13231,1,"rad\u2215s2"],[13232,1,"ps"],[13233,1,"ns"],[13234,1,"\u03BCs"],[13235,1,"ms"],[13236,1,"pv"],[13237,1,"nv"],[13238,1,"\u03BCv"],[13239,1,"mv"],[13240,1,"kv"],[13241,1,"mv"],[13242,1,"pw"],[13243,1,"nw"],[13244,1,"\u03BCw"],[13245,1,"mw"],[13246,1,"kw"],[13247,1,"mw"],[13248,1,"k\u03C9"],[13249,1,"m\u03C9"],[13250,3],[13251,1,"bq"],[13252,1,"cc"],[13253,1,"cd"],[13254,1,"c\u2215kg"],[13255,3],[13256,1,"db"],[13257,1,"gy"],[13258,1,"ha"],[13259,1,"hp"],[13260,1,"in"],[13261,1,"kk"],[13262,1,"km"],[13263,1,"kt"],[13264,1,"lm"],[13265,1,"ln"],[13266,1,"log"],[13267,1,"lx"],[13268,1,"mb"],[13269,1,"mil"],[13270,1,"mol"],[13271,1,"ph"],[13272,3],[13273,1,"ppm"],[13274,1,"pr"],[13275,1,"sr"],[13276,1,"sv"],[13277,1,"wb"],[13278,1,"v\u2215m"],[13279,1,"a\u2215m"],[13280,1,"1\u65E5"],[13281,1,"2\u65E5"],[13282,1,"3\u65E5"],[13283,1,"4\u65E5"],[13284,1,"5\u65E5"],[13285,1,"6\u65E5"],[13286,1,"7\u65E5"],[13287,1,"8\u65E5"],[13288,1,"9\u65E5"],[13289,1,"10\u65E5"],[13290,1,"11\u65E5"],[13291,1,"12\u65E5"],[13292,1,"13\u65E5"],[13293,1,"14\u65E5"],[13294,1,"15\u65E5"],[13295,1,"16\u65E5"],[13296,1,"17\u65E5"],[13297,1,"18\u65E5"],[13298,1,"19\u65E5"],[13299,1,"20\u65E5"],[13300,1,"21\u65E5"],[13301,1,"22\u65E5"],[13302,1,"23\u65E5"],[13303,1,"24\u65E5"],[13304,1,"25\u65E5"],[13305,1,"26\u65E5"],[13306,1,"27\u65E5"],[13307,1,"28\u65E5"],[13308,1,"29\u65E5"],[13309,1,"30\u65E5"],[13310,1,"31\u65E5"],[13311,1,"gal"],[[13312,19893],2],[[19894,19903],2],[[19904,19967],2],[[19968,40869],2],[[40870,40891],2],[[40892,40899],2],[[40900,40907],2],[40908,2],[[40909,40917],2],[[40918,40938],2],[[40939,40943],2],[[40944,40956],2],[[40957,40959],2],[[40960,42124],2],[[42125,42127],3],[[42128,42145],2],[[42146,42147],2],[[42148,42163],2],[42164,2],[[42165,42176],2],[42177,2],[[42178,42180],2],[42181,2],[42182,2],[[42183,42191],3],[[42192,42237],2],[[42238,42239],2],[[42240,42508],2],[[42509,42511],2],[[42512,42539],2],[[42540,42559],3],[42560,1,"\uA641"],[42561,2],[42562,1,"\uA643"],[42563,2],[42564,1,"\uA645"],[42565,2],[42566,1,"\uA647"],[42567,2],[42568,1,"\uA649"],[42569,2],[42570,1,"\uA64B"],[42571,2],[42572,1,"\uA64D"],[42573,2],[42574,1,"\uA64F"],[42575,2],[42576,1,"\uA651"],[42577,2],[42578,1,"\uA653"],[42579,2],[42580,1,"\uA655"],[42581,2],[42582,1,"\uA657"],[42583,2],[42584,1,"\uA659"],[42585,2],[42586,1,"\uA65B"],[42587,2],[42588,1,"\uA65D"],[42589,2],[42590,1,"\uA65F"],[42591,2],[42592,1,"\uA661"],[42593,2],[42594,1,"\uA663"],[42595,2],[42596,1,"\uA665"],[42597,2],[42598,1,"\uA667"],[42599,2],[42600,1,"\uA669"],[42601,2],[42602,1,"\uA66B"],[42603,2],[42604,1,"\uA66D"],[[42605,42607],2],[[42608,42611],2],[[42612,42619],2],[[42620,42621],2],[42622,2],[42623,2],[42624,1,"\uA681"],[42625,2],[42626,1,"\uA683"],[42627,2],[42628,1,"\uA685"],[42629,2],[42630,1,"\uA687"],[42631,2],[42632,1,"\uA689"],[42633,2],[42634,1,"\uA68B"],[42635,2],[42636,1,"\uA68D"],[42637,2],[42638,1,"\uA68F"],[42639,2],[42640,1,"\uA691"],[42641,2],[42642,1,"\uA693"],[42643,2],[42644,1,"\uA695"],[42645,2],[42646,1,"\uA697"],[42647,2],[42648,1,"\uA699"],[42649,2],[42650,1,"\uA69B"],[42651,2],[42652,1,"\u044A"],[42653,1,"\u044C"],[42654,2],[42655,2],[[42656,42725],2],[[42726,42735],2],[[42736,42737],2],[[42738,42743],2],[[42744,42751],3],[[42752,42774],2],[[42775,42778],2],[[42779,42783],2],[[42784,42785],2],[42786,1,"\uA723"],[42787,2],[42788,1,"\uA725"],[42789,2],[42790,1,"\uA727"],[42791,2],[42792,1,"\uA729"],[42793,2],[42794,1,"\uA72B"],[42795,2],[42796,1,"\uA72D"],[42797,2],[42798,1,"\uA72F"],[[42799,42801],2],[42802,1,"\uA733"],[42803,2],[42804,1,"\uA735"],[42805,2],[42806,1,"\uA737"],[42807,2],[42808,1,"\uA739"],[42809,2],[42810,1,"\uA73B"],[42811,2],[42812,1,"\uA73D"],[42813,2],[42814,1,"\uA73F"],[42815,2],[42816,1,"\uA741"],[42817,2],[42818,1,"\uA743"],[42819,2],[42820,1,"\uA745"],[42821,2],[42822,1,"\uA747"],[42823,2],[42824,1,"\uA749"],[42825,2],[42826,1,"\uA74B"],[42827,2],[42828,1,"\uA74D"],[42829,2],[42830,1,"\uA74F"],[42831,2],[42832,1,"\uA751"],[42833,2],[42834,1,"\uA753"],[42835,2],[42836,1,"\uA755"],[42837,2],[42838,1,"\uA757"],[42839,2],[42840,1,"\uA759"],[42841,2],[42842,1,"\uA75B"],[42843,2],[42844,1,"\uA75D"],[42845,2],[42846,1,"\uA75F"],[42847,2],[42848,1,"\uA761"],[42849,2],[42850,1,"\uA763"],[42851,2],[42852,1,"\uA765"],[42853,2],[42854,1,"\uA767"],[42855,2],[42856,1,"\uA769"],[42857,2],[42858,1,"\uA76B"],[42859,2],[42860,1,"\uA76D"],[42861,2],[42862,1,"\uA76F"],[42863,2],[42864,1,"\uA76F"],[[42865,42872],2],[42873,1,"\uA77A"],[42874,2],[42875,1,"\uA77C"],[42876,2],[42877,1,"\u1D79"],[42878,1,"\uA77F"],[42879,2],[42880,1,"\uA781"],[42881,2],[42882,1,"\uA783"],[42883,2],[42884,1,"\uA785"],[42885,2],[42886,1,"\uA787"],[[42887,42888],2],[[42889,42890],2],[42891,1,"\uA78C"],[42892,2],[42893,1,"\u0265"],[42894,2],[42895,2],[42896,1,"\uA791"],[42897,2],[42898,1,"\uA793"],[42899,2],[[42900,42901],2],[42902,1,"\uA797"],[42903,2],[42904,1,"\uA799"],[42905,2],[42906,1,"\uA79B"],[42907,2],[42908,1,"\uA79D"],[42909,2],[42910,1,"\uA79F"],[42911,2],[42912,1,"\uA7A1"],[42913,2],[42914,1,"\uA7A3"],[42915,2],[42916,1,"\uA7A5"],[42917,2],[42918,1,"\uA7A7"],[42919,2],[42920,1,"\uA7A9"],[42921,2],[42922,1,"\u0266"],[42923,1,"\u025C"],[42924,1,"\u0261"],[42925,1,"\u026C"],[42926,1,"\u026A"],[42927,2],[42928,1,"\u029E"],[42929,1,"\u0287"],[42930,1,"\u029D"],[42931,1,"\uAB53"],[42932,1,"\uA7B5"],[42933,2],[42934,1,"\uA7B7"],[42935,2],[42936,1,"\uA7B9"],[42937,2],[42938,1,"\uA7BB"],[42939,2],[42940,1,"\uA7BD"],[42941,2],[42942,1,"\uA7BF"],[42943,2],[42944,1,"\uA7C1"],[42945,2],[42946,1,"\uA7C3"],[42947,2],[42948,1,"\uA794"],[42949,1,"\u0282"],[42950,1,"\u1D8E"],[42951,1,"\uA7C8"],[42952,2],[42953,1,"\uA7CA"],[42954,2],[[42955,42959],3],[42960,1,"\uA7D1"],[42961,2],[42962,3],[42963,2],[42964,3],[42965,2],[42966,1,"\uA7D7"],[42967,2],[42968,1,"\uA7D9"],[42969,2],[[42970,42993],3],[42994,1,"c"],[42995,1,"f"],[42996,1,"q"],[42997,1,"\uA7F6"],[42998,2],[42999,2],[43e3,1,"\u0127"],[43001,1,"\u0153"],[43002,2],[[43003,43007],2],[[43008,43047],2],[[43048,43051],2],[43052,2],[[43053,43055],3],[[43056,43065],2],[[43066,43071],3],[[43072,43123],2],[[43124,43127],2],[[43128,43135],3],[[43136,43204],2],[43205,2],[[43206,43213],3],[[43214,43215],2],[[43216,43225],2],[[43226,43231],3],[[43232,43255],2],[[43256,43258],2],[43259,2],[43260,2],[43261,2],[[43262,43263],2],[[43264,43309],2],[[43310,43311],2],[[43312,43347],2],[[43348,43358],3],[43359,2],[[43360,43388],2],[[43389,43391],3],[[43392,43456],2],[[43457,43469],2],[43470,3],[[43471,43481],2],[[43482,43485],3],[[43486,43487],2],[[43488,43518],2],[43519,3],[[43520,43574],2],[[43575,43583],3],[[43584,43597],2],[[43598,43599],3],[[43600,43609],2],[[43610,43611],3],[[43612,43615],2],[[43616,43638],2],[[43639,43641],2],[[43642,43643],2],[[43644,43647],2],[[43648,43714],2],[[43715,43738],3],[[43739,43741],2],[[43742,43743],2],[[43744,43759],2],[[43760,43761],2],[[43762,43766],2],[[43767,43776],3],[[43777,43782],2],[[43783,43784],3],[[43785,43790],2],[[43791,43792],3],[[43793,43798],2],[[43799,43807],3],[[43808,43814],2],[43815,3],[[43816,43822],2],[43823,3],[[43824,43866],2],[43867,2],[43868,1,"\uA727"],[43869,1,"\uAB37"],[43870,1,"\u026B"],[43871,1,"\uAB52"],[[43872,43875],2],[[43876,43877],2],[[43878,43879],2],[43880,2],[43881,1,"\u028D"],[[43882,43883],2],[[43884,43887],3],[43888,1,"\u13A0"],[43889,1,"\u13A1"],[43890,1,"\u13A2"],[43891,1,"\u13A3"],[43892,1,"\u13A4"],[43893,1,"\u13A5"],[43894,1,"\u13A6"],[43895,1,"\u13A7"],[43896,1,"\u13A8"],[43897,1,"\u13A9"],[43898,1,"\u13AA"],[43899,1,"\u13AB"],[43900,1,"\u13AC"],[43901,1,"\u13AD"],[43902,1,"\u13AE"],[43903,1,"\u13AF"],[43904,1,"\u13B0"],[43905,1,"\u13B1"],[43906,1,"\u13B2"],[43907,1,"\u13B3"],[43908,1,"\u13B4"],[43909,1,"\u13B5"],[43910,1,"\u13B6"],[43911,1,"\u13B7"],[43912,1,"\u13B8"],[43913,1,"\u13B9"],[43914,1,"\u13BA"],[43915,1,"\u13BB"],[43916,1,"\u13BC"],[43917,1,"\u13BD"],[43918,1,"\u13BE"],[43919,1,"\u13BF"],[43920,1,"\u13C0"],[43921,1,"\u13C1"],[43922,1,"\u13C2"],[43923,1,"\u13C3"],[43924,1,"\u13C4"],[43925,1,"\u13C5"],[43926,1,"\u13C6"],[43927,1,"\u13C7"],[43928,1,"\u13C8"],[43929,1,"\u13C9"],[43930,1,"\u13CA"],[43931,1,"\u13CB"],[43932,1,"\u13CC"],[43933,1,"\u13CD"],[43934,1,"\u13CE"],[43935,1,"\u13CF"],[43936,1,"\u13D0"],[43937,1,"\u13D1"],[43938,1,"\u13D2"],[43939,1,"\u13D3"],[43940,1,"\u13D4"],[43941,1,"\u13D5"],[43942,1,"\u13D6"],[43943,1,"\u13D7"],[43944,1,"\u13D8"],[43945,1,"\u13D9"],[43946,1,"\u13DA"],[43947,1,"\u13DB"],[43948,1,"\u13DC"],[43949,1,"\u13DD"],[43950,1,"\u13DE"],[43951,1,"\u13DF"],[43952,1,"\u13E0"],[43953,1,"\u13E1"],[43954,1,"\u13E2"],[43955,1,"\u13E3"],[43956,1,"\u13E4"],[43957,1,"\u13E5"],[43958,1,"\u13E6"],[43959,1,"\u13E7"],[43960,1,"\u13E8"],[43961,1,"\u13E9"],[43962,1,"\u13EA"],[43963,1,"\u13EB"],[43964,1,"\u13EC"],[43965,1,"\u13ED"],[43966,1,"\u13EE"],[43967,1,"\u13EF"],[[43968,44010],2],[44011,2],[[44012,44013],2],[[44014,44015],3],[[44016,44025],2],[[44026,44031],3],[[44032,55203],2],[[55204,55215],3],[[55216,55238],2],[[55239,55242],3],[[55243,55291],2],[[55292,55295],3],[[55296,57343],3],[[57344,63743],3],[63744,1,"\u8C48"],[63745,1,"\u66F4"],[63746,1,"\u8ECA"],[63747,1,"\u8CC8"],[63748,1,"\u6ED1"],[63749,1,"\u4E32"],[63750,1,"\u53E5"],[[63751,63752],1,"\u9F9C"],[63753,1,"\u5951"],[63754,1,"\u91D1"],[63755,1,"\u5587"],[63756,1,"\u5948"],[63757,1,"\u61F6"],[63758,1,"\u7669"],[63759,1,"\u7F85"],[63760,1,"\u863F"],[63761,1,"\u87BA"],[63762,1,"\u88F8"],[63763,1,"\u908F"],[63764,1,"\u6A02"],[63765,1,"\u6D1B"],[63766,1,"\u70D9"],[63767,1,"\u73DE"],[63768,1,"\u843D"],[63769,1,"\u916A"],[63770,1,"\u99F1"],[63771,1,"\u4E82"],[63772,1,"\u5375"],[63773,1,"\u6B04"],[63774,1,"\u721B"],[63775,1,"\u862D"],[63776,1,"\u9E1E"],[63777,1,"\u5D50"],[63778,1,"\u6FEB"],[63779,1,"\u85CD"],[63780,1,"\u8964"],[63781,1,"\u62C9"],[63782,1,"\u81D8"],[63783,1,"\u881F"],[63784,1,"\u5ECA"],[63785,1,"\u6717"],[63786,1,"\u6D6A"],[63787,1,"\u72FC"],[63788,1,"\u90CE"],[63789,1,"\u4F86"],[63790,1,"\u51B7"],[63791,1,"\u52DE"],[63792,1,"\u64C4"],[63793,1,"\u6AD3"],[63794,1,"\u7210"],[63795,1,"\u76E7"],[63796,1,"\u8001"],[63797,1,"\u8606"],[63798,1,"\u865C"],[63799,1,"\u8DEF"],[63800,1,"\u9732"],[63801,1,"\u9B6F"],[63802,1,"\u9DFA"],[63803,1,"\u788C"],[63804,1,"\u797F"],[63805,1,"\u7DA0"],[63806,1,"\u83C9"],[63807,1,"\u9304"],[63808,1,"\u9E7F"],[63809,1,"\u8AD6"],[63810,1,"\u58DF"],[63811,1,"\u5F04"],[63812,1,"\u7C60"],[63813,1,"\u807E"],[63814,1,"\u7262"],[63815,1,"\u78CA"],[63816,1,"\u8CC2"],[63817,1,"\u96F7"],[63818,1,"\u58D8"],[63819,1,"\u5C62"],[63820,1,"\u6A13"],[63821,1,"\u6DDA"],[63822,1,"\u6F0F"],[63823,1,"\u7D2F"],[63824,1,"\u7E37"],[63825,1,"\u964B"],[63826,1,"\u52D2"],[63827,1,"\u808B"],[63828,1,"\u51DC"],[63829,1,"\u51CC"],[63830,1,"\u7A1C"],[63831,1,"\u7DBE"],[63832,1,"\u83F1"],[63833,1,"\u9675"],[63834,1,"\u8B80"],[63835,1,"\u62CF"],[63836,1,"\u6A02"],[63837,1,"\u8AFE"],[63838,1,"\u4E39"],[63839,1,"\u5BE7"],[63840,1,"\u6012"],[63841,1,"\u7387"],[63842,1,"\u7570"],[63843,1,"\u5317"],[63844,1,"\u78FB"],[63845,1,"\u4FBF"],[63846,1,"\u5FA9"],[63847,1,"\u4E0D"],[63848,1,"\u6CCC"],[63849,1,"\u6578"],[63850,1,"\u7D22"],[63851,1,"\u53C3"],[63852,1,"\u585E"],[63853,1,"\u7701"],[63854,1,"\u8449"],[63855,1,"\u8AAA"],[63856,1,"\u6BBA"],[63857,1,"\u8FB0"],[63858,1,"\u6C88"],[63859,1,"\u62FE"],[63860,1,"\u82E5"],[63861,1,"\u63A0"],[63862,1,"\u7565"],[63863,1,"\u4EAE"],[63864,1,"\u5169"],[63865,1,"\u51C9"],[63866,1,"\u6881"],[63867,1,"\u7CE7"],[63868,1,"\u826F"],[63869,1,"\u8AD2"],[63870,1,"\u91CF"],[63871,1,"\u52F5"],[63872,1,"\u5442"],[63873,1,"\u5973"],[63874,1,"\u5EEC"],[63875,1,"\u65C5"],[63876,1,"\u6FFE"],[63877,1,"\u792A"],[63878,1,"\u95AD"],[63879,1,"\u9A6A"],[63880,1,"\u9E97"],[63881,1,"\u9ECE"],[63882,1,"\u529B"],[63883,1,"\u66C6"],[63884,1,"\u6B77"],[63885,1,"\u8F62"],[63886,1,"\u5E74"],[63887,1,"\u6190"],[63888,1,"\u6200"],[63889,1,"\u649A"],[63890,1,"\u6F23"],[63891,1,"\u7149"],[63892,1,"\u7489"],[63893,1,"\u79CA"],[63894,1,"\u7DF4"],[63895,1,"\u806F"],[63896,1,"\u8F26"],[63897,1,"\u84EE"],[63898,1,"\u9023"],[63899,1,"\u934A"],[63900,1,"\u5217"],[63901,1,"\u52A3"],[63902,1,"\u54BD"],[63903,1,"\u70C8"],[63904,1,"\u88C2"],[63905,1,"\u8AAA"],[63906,1,"\u5EC9"],[63907,1,"\u5FF5"],[63908,1,"\u637B"],[63909,1,"\u6BAE"],[63910,1,"\u7C3E"],[63911,1,"\u7375"],[63912,1,"\u4EE4"],[63913,1,"\u56F9"],[63914,1,"\u5BE7"],[63915,1,"\u5DBA"],[63916,1,"\u601C"],[63917,1,"\u73B2"],[63918,1,"\u7469"],[63919,1,"\u7F9A"],[63920,1,"\u8046"],[63921,1,"\u9234"],[63922,1,"\u96F6"],[63923,1,"\u9748"],[63924,1,"\u9818"],[63925,1,"\u4F8B"],[63926,1,"\u79AE"],[63927,1,"\u91B4"],[63928,1,"\u96B8"],[63929,1,"\u60E1"],[63930,1,"\u4E86"],[63931,1,"\u50DA"],[63932,1,"\u5BEE"],[63933,1,"\u5C3F"],[63934,1,"\u6599"],[63935,1,"\u6A02"],[63936,1,"\u71CE"],[63937,1,"\u7642"],[63938,1,"\u84FC"],[63939,1,"\u907C"],[63940,1,"\u9F8D"],[63941,1,"\u6688"],[63942,1,"\u962E"],[63943,1,"\u5289"],[63944,1,"\u677B"],[63945,1,"\u67F3"],[63946,1,"\u6D41"],[63947,1,"\u6E9C"],[63948,1,"\u7409"],[63949,1,"\u7559"],[63950,1,"\u786B"],[63951,1,"\u7D10"],[63952,1,"\u985E"],[63953,1,"\u516D"],[63954,1,"\u622E"],[63955,1,"\u9678"],[63956,1,"\u502B"],[63957,1,"\u5D19"],[63958,1,"\u6DEA"],[63959,1,"\u8F2A"],[63960,1,"\u5F8B"],[63961,1,"\u6144"],[63962,1,"\u6817"],[63963,1,"\u7387"],[63964,1,"\u9686"],[63965,1,"\u5229"],[63966,1,"\u540F"],[63967,1,"\u5C65"],[63968,1,"\u6613"],[63969,1,"\u674E"],[63970,1,"\u68A8"],[63971,1,"\u6CE5"],[63972,1,"\u7406"],[63973,1,"\u75E2"],[63974,1,"\u7F79"],[63975,1,"\u88CF"],[63976,1,"\u88E1"],[63977,1,"\u91CC"],[63978,1,"\u96E2"],[63979,1,"\u533F"],[63980,1,"\u6EBA"],[63981,1,"\u541D"],[63982,1,"\u71D0"],[63983,1,"\u7498"],[63984,1,"\u85FA"],[63985,1,"\u96A3"],[63986,1,"\u9C57"],[63987,1,"\u9E9F"],[63988,1,"\u6797"],[63989,1,"\u6DCB"],[63990,1,"\u81E8"],[63991,1,"\u7ACB"],[63992,1,"\u7B20"],[63993,1,"\u7C92"],[63994,1,"\u72C0"],[63995,1,"\u7099"],[63996,1,"\u8B58"],[63997,1,"\u4EC0"],[63998,1,"\u8336"],[63999,1,"\u523A"],[64e3,1,"\u5207"],[64001,1,"\u5EA6"],[64002,1,"\u62D3"],[64003,1,"\u7CD6"],[64004,1,"\u5B85"],[64005,1,"\u6D1E"],[64006,1,"\u66B4"],[64007,1,"\u8F3B"],[64008,1,"\u884C"],[64009,1,"\u964D"],[64010,1,"\u898B"],[64011,1,"\u5ED3"],[64012,1,"\u5140"],[64013,1,"\u55C0"],[[64014,64015],2],[64016,1,"\u585A"],[64017,2],[64018,1,"\u6674"],[[64019,64020],2],[64021,1,"\u51DE"],[64022,1,"\u732A"],[64023,1,"\u76CA"],[64024,1,"\u793C"],[64025,1,"\u795E"],[64026,1,"\u7965"],[64027,1,"\u798F"],[64028,1,"\u9756"],[64029,1,"\u7CBE"],[64030,1,"\u7FBD"],[64031,2],[64032,1,"\u8612"],[64033,2],[64034,1,"\u8AF8"],[[64035,64036],2],[64037,1,"\u9038"],[64038,1,"\u90FD"],[[64039,64041],2],[64042,1,"\u98EF"],[64043,1,"\u98FC"],[64044,1,"\u9928"],[64045,1,"\u9DB4"],[64046,1,"\u90DE"],[64047,1,"\u96B7"],[64048,1,"\u4FAE"],[64049,1,"\u50E7"],[64050,1,"\u514D"],[64051,1,"\u52C9"],[64052,1,"\u52E4"],[64053,1,"\u5351"],[64054,1,"\u559D"],[64055,1,"\u5606"],[64056,1,"\u5668"],[64057,1,"\u5840"],[64058,1,"\u58A8"],[64059,1,"\u5C64"],[64060,1,"\u5C6E"],[64061,1,"\u6094"],[64062,1,"\u6168"],[64063,1,"\u618E"],[64064,1,"\u61F2"],[64065,1,"\u654F"],[64066,1,"\u65E2"],[64067,1,"\u6691"],[64068,1,"\u6885"],[64069,1,"\u6D77"],[64070,1,"\u6E1A"],[64071,1,"\u6F22"],[64072,1,"\u716E"],[64073,1,"\u722B"],[64074,1,"\u7422"],[64075,1,"\u7891"],[64076,1,"\u793E"],[64077,1,"\u7949"],[64078,1,"\u7948"],[64079,1,"\u7950"],[64080,1,"\u7956"],[64081,1,"\u795D"],[64082,1,"\u798D"],[64083,1,"\u798E"],[64084,1,"\u7A40"],[64085,1,"\u7A81"],[64086,1,"\u7BC0"],[64087,1,"\u7DF4"],[64088,1,"\u7E09"],[64089,1,"\u7E41"],[64090,1,"\u7F72"],[64091,1,"\u8005"],[64092,1,"\u81ED"],[[64093,64094],1,"\u8279"],[64095,1,"\u8457"],[64096,1,"\u8910"],[64097,1,"\u8996"],[64098,1,"\u8B01"],[64099,1,"\u8B39"],[64100,1,"\u8CD3"],[64101,1,"\u8D08"],[64102,1,"\u8FB6"],[64103,1,"\u9038"],[64104,1,"\u96E3"],[64105,1,"\u97FF"],[64106,1,"\u983B"],[64107,1,"\u6075"],[64108,1,"\u{242EE}"],[64109,1,"\u8218"],[[64110,64111],3],[64112,1,"\u4E26"],[64113,1,"\u51B5"],[64114,1,"\u5168"],[64115,1,"\u4F80"],[64116,1,"\u5145"],[64117,1,"\u5180"],[64118,1,"\u52C7"],[64119,1,"\u52FA"],[64120,1,"\u559D"],[64121,1,"\u5555"],[64122,1,"\u5599"],[64123,1,"\u55E2"],[64124,1,"\u585A"],[64125,1,"\u58B3"],[64126,1,"\u5944"],[64127,1,"\u5954"],[64128,1,"\u5A62"],[64129,1,"\u5B28"],[64130,1,"\u5ED2"],[64131,1,"\u5ED9"],[64132,1,"\u5F69"],[64133,1,"\u5FAD"],[64134,1,"\u60D8"],[64135,1,"\u614E"],[64136,1,"\u6108"],[64137,1,"\u618E"],[64138,1,"\u6160"],[64139,1,"\u61F2"],[64140,1,"\u6234"],[64141,1,"\u63C4"],[64142,1,"\u641C"],[64143,1,"\u6452"],[64144,1,"\u6556"],[64145,1,"\u6674"],[64146,1,"\u6717"],[64147,1,"\u671B"],[64148,1,"\u6756"],[64149,1,"\u6B79"],[64150,1,"\u6BBA"],[64151,1,"\u6D41"],[64152,1,"\u6EDB"],[64153,1,"\u6ECB"],[64154,1,"\u6F22"],[64155,1,"\u701E"],[64156,1,"\u716E"],[64157,1,"\u77A7"],[64158,1,"\u7235"],[64159,1,"\u72AF"],[64160,1,"\u732A"],[64161,1,"\u7471"],[64162,1,"\u7506"],[64163,1,"\u753B"],[64164,1,"\u761D"],[64165,1,"\u761F"],[64166,1,"\u76CA"],[64167,1,"\u76DB"],[64168,1,"\u76F4"],[64169,1,"\u774A"],[64170,1,"\u7740"],[64171,1,"\u78CC"],[64172,1,"\u7AB1"],[64173,1,"\u7BC0"],[64174,1,"\u7C7B"],[64175,1,"\u7D5B"],[64176,1,"\u7DF4"],[64177,1,"\u7F3E"],[64178,1,"\u8005"],[64179,1,"\u8352"],[64180,1,"\u83EF"],[64181,1,"\u8779"],[64182,1,"\u8941"],[64183,1,"\u8986"],[64184,1,"\u8996"],[64185,1,"\u8ABF"],[64186,1,"\u8AF8"],[64187,1,"\u8ACB"],[64188,1,"\u8B01"],[64189,1,"\u8AFE"],[64190,1,"\u8AED"],[64191,1,"\u8B39"],[64192,1,"\u8B8A"],[64193,1,"\u8D08"],[64194,1,"\u8F38"],[64195,1,"\u9072"],[64196,1,"\u9199"],[64197,1,"\u9276"],[64198,1,"\u967C"],[64199,1,"\u96E3"],[64200,1,"\u9756"],[64201,1,"\u97DB"],[64202,1,"\u97FF"],[64203,1,"\u980B"],[64204,1,"\u983B"],[64205,1,"\u9B12"],[64206,1,"\u9F9C"],[64207,1,"\u{2284A}"],[64208,1,"\u{22844}"],[64209,1,"\u{233D5}"],[64210,1,"\u3B9D"],[64211,1,"\u4018"],[64212,1,"\u4039"],[64213,1,"\u{25249}"],[64214,1,"\u{25CD0}"],[64215,1,"\u{27ED3}"],[64216,1,"\u9F43"],[64217,1,"\u9F8E"],[[64218,64255],3],[64256,1,"ff"],[64257,1,"fi"],[64258,1,"fl"],[64259,1,"ffi"],[64260,1,"ffl"],[[64261,64262],1,"st"],[[64263,64274],3],[64275,1,"\u0574\u0576"],[64276,1,"\u0574\u0565"],[64277,1,"\u0574\u056B"],[64278,1,"\u057E\u0576"],[64279,1,"\u0574\u056D"],[[64280,64284],3],[64285,1,"\u05D9\u05B4"],[64286,2],[64287,1,"\u05F2\u05B7"],[64288,1,"\u05E2"],[64289,1,"\u05D0"],[64290,1,"\u05D3"],[64291,1,"\u05D4"],[64292,1,"\u05DB"],[64293,1,"\u05DC"],[64294,1,"\u05DD"],[64295,1,"\u05E8"],[64296,1,"\u05EA"],[64297,5,"+"],[64298,1,"\u05E9\u05C1"],[64299,1,"\u05E9\u05C2"],[64300,1,"\u05E9\u05BC\u05C1"],[64301,1,"\u05E9\u05BC\u05C2"],[64302,1,"\u05D0\u05B7"],[64303,1,"\u05D0\u05B8"],[64304,1,"\u05D0\u05BC"],[64305,1,"\u05D1\u05BC"],[64306,1,"\u05D2\u05BC"],[64307,1,"\u05D3\u05BC"],[64308,1,"\u05D4\u05BC"],[64309,1,"\u05D5\u05BC"],[64310,1,"\u05D6\u05BC"],[64311,3],[64312,1,"\u05D8\u05BC"],[64313,1,"\u05D9\u05BC"],[64314,1,"\u05DA\u05BC"],[64315,1,"\u05DB\u05BC"],[64316,1,"\u05DC\u05BC"],[64317,3],[64318,1,"\u05DE\u05BC"],[64319,3],[64320,1,"\u05E0\u05BC"],[64321,1,"\u05E1\u05BC"],[64322,3],[64323,1,"\u05E3\u05BC"],[64324,1,"\u05E4\u05BC"],[64325,3],[64326,1,"\u05E6\u05BC"],[64327,1,"\u05E7\u05BC"],[64328,1,"\u05E8\u05BC"],[64329,1,"\u05E9\u05BC"],[64330,1,"\u05EA\u05BC"],[64331,1,"\u05D5\u05B9"],[64332,1,"\u05D1\u05BF"],[64333,1,"\u05DB\u05BF"],[64334,1,"\u05E4\u05BF"],[64335,1,"\u05D0\u05DC"],[[64336,64337],1,"\u0671"],[[64338,64341],1,"\u067B"],[[64342,64345],1,"\u067E"],[[64346,64349],1,"\u0680"],[[64350,64353],1,"\u067A"],[[64354,64357],1,"\u067F"],[[64358,64361],1,"\u0679"],[[64362,64365],1,"\u06A4"],[[64366,64369],1,"\u06A6"],[[64370,64373],1,"\u0684"],[[64374,64377],1,"\u0683"],[[64378,64381],1,"\u0686"],[[64382,64385],1,"\u0687"],[[64386,64387],1,"\u068D"],[[64388,64389],1,"\u068C"],[[64390,64391],1,"\u068E"],[[64392,64393],1,"\u0688"],[[64394,64395],1,"\u0698"],[[64396,64397],1,"\u0691"],[[64398,64401],1,"\u06A9"],[[64402,64405],1,"\u06AF"],[[64406,64409],1,"\u06B3"],[[64410,64413],1,"\u06B1"],[[64414,64415],1,"\u06BA"],[[64416,64419],1,"\u06BB"],[[64420,64421],1,"\u06C0"],[[64422,64425],1,"\u06C1"],[[64426,64429],1,"\u06BE"],[[64430,64431],1,"\u06D2"],[[64432,64433],1,"\u06D3"],[[64434,64449],2],[64450,2],[[64451,64466],3],[[64467,64470],1,"\u06AD"],[[64471,64472],1,"\u06C7"],[[64473,64474],1,"\u06C6"],[[64475,64476],1,"\u06C8"],[64477,1,"\u06C7\u0674"],[[64478,64479],1,"\u06CB"],[[64480,64481],1,"\u06C5"],[[64482,64483],1,"\u06C9"],[[64484,64487],1,"\u06D0"],[[64488,64489],1,"\u0649"],[[64490,64491],1,"\u0626\u0627"],[[64492,64493],1,"\u0626\u06D5"],[[64494,64495],1,"\u0626\u0648"],[[64496,64497],1,"\u0626\u06C7"],[[64498,64499],1,"\u0626\u06C6"],[[64500,64501],1,"\u0626\u06C8"],[[64502,64504],1,"\u0626\u06D0"],[[64505,64507],1,"\u0626\u0649"],[[64508,64511],1,"\u06CC"],[64512,1,"\u0626\u062C"],[64513,1,"\u0626\u062D"],[64514,1,"\u0626\u0645"],[64515,1,"\u0626\u0649"],[64516,1,"\u0626\u064A"],[64517,1,"\u0628\u062C"],[64518,1,"\u0628\u062D"],[64519,1,"\u0628\u062E"],[64520,1,"\u0628\u0645"],[64521,1,"\u0628\u0649"],[64522,1,"\u0628\u064A"],[64523,1,"\u062A\u062C"],[64524,1,"\u062A\u062D"],[64525,1,"\u062A\u062E"],[64526,1,"\u062A\u0645"],[64527,1,"\u062A\u0649"],[64528,1,"\u062A\u064A"],[64529,1,"\u062B\u062C"],[64530,1,"\u062B\u0645"],[64531,1,"\u062B\u0649"],[64532,1,"\u062B\u064A"],[64533,1,"\u062C\u062D"],[64534,1,"\u062C\u0645"],[64535,1,"\u062D\u062C"],[64536,1,"\u062D\u0645"],[64537,1,"\u062E\u062C"],[64538,1,"\u062E\u062D"],[64539,1,"\u062E\u0645"],[64540,1,"\u0633\u062C"],[64541,1,"\u0633\u062D"],[64542,1,"\u0633\u062E"],[64543,1,"\u0633\u0645"],[64544,1,"\u0635\u062D"],[64545,1,"\u0635\u0645"],[64546,1,"\u0636\u062C"],[64547,1,"\u0636\u062D"],[64548,1,"\u0636\u062E"],[64549,1,"\u0636\u0645"],[64550,1,"\u0637\u062D"],[64551,1,"\u0637\u0645"],[64552,1,"\u0638\u0645"],[64553,1,"\u0639\u062C"],[64554,1,"\u0639\u0645"],[64555,1,"\u063A\u062C"],[64556,1,"\u063A\u0645"],[64557,1,"\u0641\u062C"],[64558,1,"\u0641\u062D"],[64559,1,"\u0641\u062E"],[64560,1,"\u0641\u0645"],[64561,1,"\u0641\u0649"],[64562,1,"\u0641\u064A"],[64563,1,"\u0642\u062D"],[64564,1,"\u0642\u0645"],[64565,1,"\u0642\u0649"],[64566,1,"\u0642\u064A"],[64567,1,"\u0643\u0627"],[64568,1,"\u0643\u062C"],[64569,1,"\u0643\u062D"],[64570,1,"\u0643\u062E"],[64571,1,"\u0643\u0644"],[64572,1,"\u0643\u0645"],[64573,1,"\u0643\u0649"],[64574,1,"\u0643\u064A"],[64575,1,"\u0644\u062C"],[64576,1,"\u0644\u062D"],[64577,1,"\u0644\u062E"],[64578,1,"\u0644\u0645"],[64579,1,"\u0644\u0649"],[64580,1,"\u0644\u064A"],[64581,1,"\u0645\u062C"],[64582,1,"\u0645\u062D"],[64583,1,"\u0645\u062E"],[64584,1,"\u0645\u0645"],[64585,1,"\u0645\u0649"],[64586,1,"\u0645\u064A"],[64587,1,"\u0646\u062C"],[64588,1,"\u0646\u062D"],[64589,1,"\u0646\u062E"],[64590,1,"\u0646\u0645"],[64591,1,"\u0646\u0649"],[64592,1,"\u0646\u064A"],[64593,1,"\u0647\u062C"],[64594,1,"\u0647\u0645"],[64595,1,"\u0647\u0649"],[64596,1,"\u0647\u064A"],[64597,1,"\u064A\u062C"],[64598,1,"\u064A\u062D"],[64599,1,"\u064A\u062E"],[64600,1,"\u064A\u0645"],[64601,1,"\u064A\u0649"],[64602,1,"\u064A\u064A"],[64603,1,"\u0630\u0670"],[64604,1,"\u0631\u0670"],[64605,1,"\u0649\u0670"],[64606,5," \u064C\u0651"],[64607,5," \u064D\u0651"],[64608,5," \u064E\u0651"],[64609,5," \u064F\u0651"],[64610,5," \u0650\u0651"],[64611,5," \u0651\u0670"],[64612,1,"\u0626\u0631"],[64613,1,"\u0626\u0632"],[64614,1,"\u0626\u0645"],[64615,1,"\u0626\u0646"],[64616,1,"\u0626\u0649"],[64617,1,"\u0626\u064A"],[64618,1,"\u0628\u0631"],[64619,1,"\u0628\u0632"],[64620,1,"\u0628\u0645"],[64621,1,"\u0628\u0646"],[64622,1,"\u0628\u0649"],[64623,1,"\u0628\u064A"],[64624,1,"\u062A\u0631"],[64625,1,"\u062A\u0632"],[64626,1,"\u062A\u0645"],[64627,1,"\u062A\u0646"],[64628,1,"\u062A\u0649"],[64629,1,"\u062A\u064A"],[64630,1,"\u062B\u0631"],[64631,1,"\u062B\u0632"],[64632,1,"\u062B\u0645"],[64633,1,"\u062B\u0646"],[64634,1,"\u062B\u0649"],[64635,1,"\u062B\u064A"],[64636,1,"\u0641\u0649"],[64637,1,"\u0641\u064A"],[64638,1,"\u0642\u0649"],[64639,1,"\u0642\u064A"],[64640,1,"\u0643\u0627"],[64641,1,"\u0643\u0644"],[64642,1,"\u0643\u0645"],[64643,1,"\u0643\u0649"],[64644,1,"\u0643\u064A"],[64645,1,"\u0644\u0645"],[64646,1,"\u0644\u0649"],[64647,1,"\u0644\u064A"],[64648,1,"\u0645\u0627"],[64649,1,"\u0645\u0645"],[64650,1,"\u0646\u0631"],[64651,1,"\u0646\u0632"],[64652,1,"\u0646\u0645"],[64653,1,"\u0646\u0646"],[64654,1,"\u0646\u0649"],[64655,1,"\u0646\u064A"],[64656,1,"\u0649\u0670"],[64657,1,"\u064A\u0631"],[64658,1,"\u064A\u0632"],[64659,1,"\u064A\u0645"],[64660,1,"\u064A\u0646"],[64661,1,"\u064A\u0649"],[64662,1,"\u064A\u064A"],[64663,1,"\u0626\u062C"],[64664,1,"\u0626\u062D"],[64665,1,"\u0626\u062E"],[64666,1,"\u0626\u0645"],[64667,1,"\u0626\u0647"],[64668,1,"\u0628\u062C"],[64669,1,"\u0628\u062D"],[64670,1,"\u0628\u062E"],[64671,1,"\u0628\u0645"],[64672,1,"\u0628\u0647"],[64673,1,"\u062A\u062C"],[64674,1,"\u062A\u062D"],[64675,1,"\u062A\u062E"],[64676,1,"\u062A\u0645"],[64677,1,"\u062A\u0647"],[64678,1,"\u062B\u0645"],[64679,1,"\u062C\u062D"],[64680,1,"\u062C\u0645"],[64681,1,"\u062D\u062C"],[64682,1,"\u062D\u0645"],[64683,1,"\u062E\u062C"],[64684,1,"\u062E\u0645"],[64685,1,"\u0633\u062C"],[64686,1,"\u0633\u062D"],[64687,1,"\u0633\u062E"],[64688,1,"\u0633\u0645"],[64689,1,"\u0635\u062D"],[64690,1,"\u0635\u062E"],[64691,1,"\u0635\u0645"],[64692,1,"\u0636\u062C"],[64693,1,"\u0636\u062D"],[64694,1,"\u0636\u062E"],[64695,1,"\u0636\u0645"],[64696,1,"\u0637\u062D"],[64697,1,"\u0638\u0645"],[64698,1,"\u0639\u062C"],[64699,1,"\u0639\u0645"],[64700,1,"\u063A\u062C"],[64701,1,"\u063A\u0645"],[64702,1,"\u0641\u062C"],[64703,1,"\u0641\u062D"],[64704,1,"\u0641\u062E"],[64705,1,"\u0641\u0645"],[64706,1,"\u0642\u062D"],[64707,1,"\u0642\u0645"],[64708,1,"\u0643\u062C"],[64709,1,"\u0643\u062D"],[64710,1,"\u0643\u062E"],[64711,1,"\u0643\u0644"],[64712,1,"\u0643\u0645"],[64713,1,"\u0644\u062C"],[64714,1,"\u0644\u062D"],[64715,1,"\u0644\u062E"],[64716,1,"\u0644\u0645"],[64717,1,"\u0644\u0647"],[64718,1,"\u0645\u062C"],[64719,1,"\u0645\u062D"],[64720,1,"\u0645\u062E"],[64721,1,"\u0645\u0645"],[64722,1,"\u0646\u062C"],[64723,1,"\u0646\u062D"],[64724,1,"\u0646\u062E"],[64725,1,"\u0646\u0645"],[64726,1,"\u0646\u0647"],[64727,1,"\u0647\u062C"],[64728,1,"\u0647\u0645"],[64729,1,"\u0647\u0670"],[64730,1,"\u064A\u062C"],[64731,1,"\u064A\u062D"],[64732,1,"\u064A\u062E"],[64733,1,"\u064A\u0645"],[64734,1,"\u064A\u0647"],[64735,1,"\u0626\u0645"],[64736,1,"\u0626\u0647"],[64737,1,"\u0628\u0645"],[64738,1,"\u0628\u0647"],[64739,1,"\u062A\u0645"],[64740,1,"\u062A\u0647"],[64741,1,"\u062B\u0645"],[64742,1,"\u062B\u0647"],[64743,1,"\u0633\u0645"],[64744,1,"\u0633\u0647"],[64745,1,"\u0634\u0645"],[64746,1,"\u0634\u0647"],[64747,1,"\u0643\u0644"],[64748,1,"\u0643\u0645"],[64749,1,"\u0644\u0645"],[64750,1,"\u0646\u0645"],[64751,1,"\u0646\u0647"],[64752,1,"\u064A\u0645"],[64753,1,"\u064A\u0647"],[64754,1,"\u0640\u064E\u0651"],[64755,1,"\u0640\u064F\u0651"],[64756,1,"\u0640\u0650\u0651"],[64757,1,"\u0637\u0649"],[64758,1,"\u0637\u064A"],[64759,1,"\u0639\u0649"],[64760,1,"\u0639\u064A"],[64761,1,"\u063A\u0649"],[64762,1,"\u063A\u064A"],[64763,1,"\u0633\u0649"],[64764,1,"\u0633\u064A"],[64765,1,"\u0634\u0649"],[64766,1,"\u0634\u064A"],[64767,1,"\u062D\u0649"],[64768,1,"\u062D\u064A"],[64769,1,"\u062C\u0649"],[64770,1,"\u062C\u064A"],[64771,1,"\u062E\u0649"],[64772,1,"\u062E\u064A"],[64773,1,"\u0635\u0649"],[64774,1,"\u0635\u064A"],[64775,1,"\u0636\u0649"],[64776,1,"\u0636\u064A"],[64777,1,"\u0634\u062C"],[64778,1,"\u0634\u062D"],[64779,1,"\u0634\u062E"],[64780,1,"\u0634\u0645"],[64781,1,"\u0634\u0631"],[64782,1,"\u0633\u0631"],[64783,1,"\u0635\u0631"],[64784,1,"\u0636\u0631"],[64785,1,"\u0637\u0649"],[64786,1,"\u0637\u064A"],[64787,1,"\u0639\u0649"],[64788,1,"\u0639\u064A"],[64789,1,"\u063A\u0649"],[64790,1,"\u063A\u064A"],[64791,1,"\u0633\u0649"],[64792,1,"\u0633\u064A"],[64793,1,"\u0634\u0649"],[64794,1,"\u0634\u064A"],[64795,1,"\u062D\u0649"],[64796,1,"\u062D\u064A"],[64797,1,"\u062C\u0649"],[64798,1,"\u062C\u064A"],[64799,1,"\u062E\u0649"],[64800,1,"\u062E\u064A"],[64801,1,"\u0635\u0649"],[64802,1,"\u0635\u064A"],[64803,1,"\u0636\u0649"],[64804,1,"\u0636\u064A"],[64805,1,"\u0634\u062C"],[64806,1,"\u0634\u062D"],[64807,1,"\u0634\u062E"],[64808,1,"\u0634\u0645"],[64809,1,"\u0634\u0631"],[64810,1,"\u0633\u0631"],[64811,1,"\u0635\u0631"],[64812,1,"\u0636\u0631"],[64813,1,"\u0634\u062C"],[64814,1,"\u0634\u062D"],[64815,1,"\u0634\u062E"],[64816,1,"\u0634\u0645"],[64817,1,"\u0633\u0647"],[64818,1,"\u0634\u0647"],[64819,1,"\u0637\u0645"],[64820,1,"\u0633\u062C"],[64821,1,"\u0633\u062D"],[64822,1,"\u0633\u062E"],[64823,1,"\u0634\u062C"],[64824,1,"\u0634\u062D"],[64825,1,"\u0634\u062E"],[64826,1,"\u0637\u0645"],[64827,1,"\u0638\u0645"],[[64828,64829],1,"\u0627\u064B"],[[64830,64831],2],[[64832,64847],2],[64848,1,"\u062A\u062C\u0645"],[[64849,64850],1,"\u062A\u062D\u062C"],[64851,1,"\u062A\u062D\u0645"],[64852,1,"\u062A\u062E\u0645"],[64853,1,"\u062A\u0645\u062C"],[64854,1,"\u062A\u0645\u062D"],[64855,1,"\u062A\u0645\u062E"],[[64856,64857],1,"\u062C\u0645\u062D"],[64858,1,"\u062D\u0645\u064A"],[64859,1,"\u062D\u0645\u0649"],[64860,1,"\u0633\u062D\u062C"],[64861,1,"\u0633\u062C\u062D"],[64862,1,"\u0633\u062C\u0649"],[[64863,64864],1,"\u0633\u0645\u062D"],[64865,1,"\u0633\u0645\u062C"],[[64866,64867],1,"\u0633\u0645\u0645"],[[64868,64869],1,"\u0635\u062D\u062D"],[64870,1,"\u0635\u0645\u0645"],[[64871,64872],1,"\u0634\u062D\u0645"],[64873,1,"\u0634\u062C\u064A"],[[64874,64875],1,"\u0634\u0645\u062E"],[[64876,64877],1,"\u0634\u0645\u0645"],[64878,1,"\u0636\u062D\u0649"],[[64879,64880],1,"\u0636\u062E\u0645"],[[64881,64882],1,"\u0637\u0645\u062D"],[64883,1,"\u0637\u0645\u0645"],[64884,1,"\u0637\u0645\u064A"],[64885,1,"\u0639\u062C\u0645"],[[64886,64887],1,"\u0639\u0645\u0645"],[64888,1,"\u0639\u0645\u0649"],[64889,1,"\u063A\u0645\u0645"],[64890,1,"\u063A\u0645\u064A"],[64891,1,"\u063A\u0645\u0649"],[[64892,64893],1,"\u0641\u062E\u0645"],[64894,1,"\u0642\u0645\u062D"],[64895,1,"\u0642\u0645\u0645"],[64896,1,"\u0644\u062D\u0645"],[64897,1,"\u0644\u062D\u064A"],[64898,1,"\u0644\u062D\u0649"],[[64899,64900],1,"\u0644\u062C\u062C"],[[64901,64902],1,"\u0644\u062E\u0645"],[[64903,64904],1,"\u0644\u0645\u062D"],[64905,1,"\u0645\u062D\u062C"],[64906,1,"\u0645\u062D\u0645"],[64907,1,"\u0645\u062D\u064A"],[64908,1,"\u0645\u062C\u062D"],[64909,1,"\u0645\u062C\u0645"],[64910,1,"\u0645\u062E\u062C"],[64911,1,"\u0645\u062E\u0645"],[[64912,64913],3],[64914,1,"\u0645\u062C\u062E"],[64915,1,"\u0647\u0645\u062C"],[64916,1,"\u0647\u0645\u0645"],[64917,1,"\u0646\u062D\u0645"],[64918,1,"\u0646\u062D\u0649"],[[64919,64920],1,"\u0646\u062C\u0645"],[64921,1,"\u0646\u062C\u0649"],[64922,1,"\u0646\u0645\u064A"],[64923,1,"\u0646\u0645\u0649"],[[64924,64925],1,"\u064A\u0645\u0645"],[64926,1,"\u0628\u062E\u064A"],[64927,1,"\u062A\u062C\u064A"],[64928,1,"\u062A\u062C\u0649"],[64929,1,"\u062A\u062E\u064A"],[64930,1,"\u062A\u062E\u0649"],[64931,1,"\u062A\u0645\u064A"],[64932,1,"\u062A\u0645\u0649"],[64933,1,"\u062C\u0645\u064A"],[64934,1,"\u062C\u062D\u0649"],[64935,1,"\u062C\u0645\u0649"],[64936,1,"\u0633\u062E\u0649"],[64937,1,"\u0635\u062D\u064A"],[64938,1,"\u0634\u062D\u064A"],[64939,1,"\u0636\u062D\u064A"],[64940,1,"\u0644\u062C\u064A"],[64941,1,"\u0644\u0645\u064A"],[64942,1,"\u064A\u062D\u064A"],[64943,1,"\u064A\u062C\u064A"],[64944,1,"\u064A\u0645\u064A"],[64945,1,"\u0645\u0645\u064A"],[64946,1,"\u0642\u0645\u064A"],[64947,1,"\u0646\u062D\u064A"],[64948,1,"\u0642\u0645\u062D"],[64949,1,"\u0644\u062D\u0645"],[64950,1,"\u0639\u0645\u064A"],[64951,1,"\u0643\u0645\u064A"],[64952,1,"\u0646\u062C\u062D"],[64953,1,"\u0645\u062E\u064A"],[64954,1,"\u0644\u062C\u0645"],[64955,1,"\u0643\u0645\u0645"],[64956,1,"\u0644\u062C\u0645"],[64957,1,"\u0646\u062C\u062D"],[64958,1,"\u062C\u062D\u064A"],[64959,1,"\u062D\u062C\u064A"],[64960,1,"\u0645\u062C\u064A"],[64961,1,"\u0641\u0645\u064A"],[64962,1,"\u0628\u062D\u064A"],[64963,1,"\u0643\u0645\u0645"],[64964,1,"\u0639\u062C\u0645"],[64965,1,"\u0635\u0645\u0645"],[64966,1,"\u0633\u062E\u064A"],[64967,1,"\u0646\u062C\u064A"],[[64968,64974],3],[64975,2],[[64976,65007],3],[65008,1,"\u0635\u0644\u06D2"],[65009,1,"\u0642\u0644\u06D2"],[65010,1,"\u0627\u0644\u0644\u0647"],[65011,1,"\u0627\u0643\u0628\u0631"],[65012,1,"\u0645\u062D\u0645\u062F"],[65013,1,"\u0635\u0644\u0639\u0645"],[65014,1,"\u0631\u0633\u0648\u0644"],[65015,1,"\u0639\u0644\u064A\u0647"],[65016,1,"\u0648\u0633\u0644\u0645"],[65017,1,"\u0635\u0644\u0649"],[65018,5,"\u0635\u0644\u0649 \u0627\u0644\u0644\u0647 \u0639\u0644\u064A\u0647 \u0648\u0633\u0644\u0645"],[65019,5,"\u062C\u0644 \u062C\u0644\u0627\u0644\u0647"],[65020,1,"\u0631\u06CC\u0627\u0644"],[65021,2],[[65022,65023],2],[[65024,65039],7],[65040,5,","],[65041,1,"\u3001"],[65042,3],[65043,5,":"],[65044,5,";"],[65045,5,"!"],[65046,5,"?"],[65047,1,"\u3016"],[65048,1,"\u3017"],[65049,3],[[65050,65055],3],[[65056,65059],2],[[65060,65062],2],[[65063,65069],2],[[65070,65071],2],[65072,3],[65073,1,"\u2014"],[65074,1,"\u2013"],[[65075,65076],5,"_"],[65077,5,"("],[65078,5,")"],[65079,5,"{"],[65080,5,"}"],[65081,1,"\u3014"],[65082,1,"\u3015"],[65083,1,"\u3010"],[65084,1,"\u3011"],[65085,1,"\u300A"],[65086,1,"\u300B"],[65087,1,"\u3008"],[65088,1,"\u3009"],[65089,1,"\u300C"],[65090,1,"\u300D"],[65091,1,"\u300E"],[65092,1,"\u300F"],[[65093,65094],2],[65095,5,"["],[65096,5,"]"],[[65097,65100],5," \u0305"],[[65101,65103],5,"_"],[65104,5,","],[65105,1,"\u3001"],[65106,3],[65107,3],[65108,5,";"],[65109,5,":"],[65110,5,"?"],[65111,5,"!"],[65112,1,"\u2014"],[65113,5,"("],[65114,5,")"],[65115,5,"{"],[65116,5,"}"],[65117,1,"\u3014"],[65118,1,"\u3015"],[65119,5,"#"],[65120,5,"&"],[65121,5,"*"],[65122,5,"+"],[65123,1,"-"],[65124,5,"<"],[65125,5,">"],[65126,5,"="],[65127,3],[65128,5,"\\"],[65129,5,"$"],[65130,5,"%"],[65131,5,"@"],[[65132,65135],3],[65136,5," \u064B"],[65137,1,"\u0640\u064B"],[65138,5," \u064C"],[65139,2],[65140,5," \u064D"],[65141,3],[65142,5," \u064E"],[65143,1,"\u0640\u064E"],[65144,5," \u064F"],[65145,1,"\u0640\u064F"],[65146,5," \u0650"],[65147,1,"\u0640\u0650"],[65148,5," \u0651"],[65149,1,"\u0640\u0651"],[65150,5," \u0652"],[65151,1,"\u0640\u0652"],[65152,1,"\u0621"],[[65153,65154],1,"\u0622"],[[65155,65156],1,"\u0623"],[[65157,65158],1,"\u0624"],[[65159,65160],1,"\u0625"],[[65161,65164],1,"\u0626"],[[65165,65166],1,"\u0627"],[[65167,65170],1,"\u0628"],[[65171,65172],1,"\u0629"],[[65173,65176],1,"\u062A"],[[65177,65180],1,"\u062B"],[[65181,65184],1,"\u062C"],[[65185,65188],1,"\u062D"],[[65189,65192],1,"\u062E"],[[65193,65194],1,"\u062F"],[[65195,65196],1,"\u0630"],[[65197,65198],1,"\u0631"],[[65199,65200],1,"\u0632"],[[65201,65204],1,"\u0633"],[[65205,65208],1,"\u0634"],[[65209,65212],1,"\u0635"],[[65213,65216],1,"\u0636"],[[65217,65220],1,"\u0637"],[[65221,65224],1,"\u0638"],[[65225,65228],1,"\u0639"],[[65229,65232],1,"\u063A"],[[65233,65236],1,"\u0641"],[[65237,65240],1,"\u0642"],[[65241,65244],1,"\u0643"],[[65245,65248],1,"\u0644"],[[65249,65252],1,"\u0645"],[[65253,65256],1,"\u0646"],[[65257,65260],1,"\u0647"],[[65261,65262],1,"\u0648"],[[65263,65264],1,"\u0649"],[[65265,65268],1,"\u064A"],[[65269,65270],1,"\u0644\u0622"],[[65271,65272],1,"\u0644\u0623"],[[65273,65274],1,"\u0644\u0625"],[[65275,65276],1,"\u0644\u0627"],[[65277,65278],3],[65279,7],[65280,3],[65281,5,"!"],[65282,5,'"'],[65283,5,"#"],[65284,5,"$"],[65285,5,"%"],[65286,5,"&"],[65287,5,"'"],[65288,5,"("],[65289,5,")"],[65290,5,"*"],[65291,5,"+"],[65292,5,","],[65293,1,"-"],[65294,1,"."],[65295,5,"/"],[65296,1,"0"],[65297,1,"1"],[65298,1,"2"],[65299,1,"3"],[65300,1,"4"],[65301,1,"5"],[65302,1,"6"],[65303,1,"7"],[65304,1,"8"],[65305,1,"9"],[65306,5,":"],[65307,5,";"],[65308,5,"<"],[65309,5,"="],[65310,5,">"],[65311,5,"?"],[65312,5,"@"],[65313,1,"a"],[65314,1,"b"],[65315,1,"c"],[65316,1,"d"],[65317,1,"e"],[65318,1,"f"],[65319,1,"g"],[65320,1,"h"],[65321,1,"i"],[65322,1,"j"],[65323,1,"k"],[65324,1,"l"],[65325,1,"m"],[65326,1,"n"],[65327,1,"o"],[65328,1,"p"],[65329,1,"q"],[65330,1,"r"],[65331,1,"s"],[65332,1,"t"],[65333,1,"u"],[65334,1,"v"],[65335,1,"w"],[65336,1,"x"],[65337,1,"y"],[65338,1,"z"],[65339,5,"["],[65340,5,"\\"],[65341,5,"]"],[65342,5,"^"],[65343,5,"_"],[65344,5,"`"],[65345,1,"a"],[65346,1,"b"],[65347,1,"c"],[65348,1,"d"],[65349,1,"e"],[65350,1,"f"],[65351,1,"g"],[65352,1,"h"],[65353,1,"i"],[65354,1,"j"],[65355,1,"k"],[65356,1,"l"],[65357,1,"m"],[65358,1,"n"],[65359,1,"o"],[65360,1,"p"],[65361,1,"q"],[65362,1,"r"],[65363,1,"s"],[65364,1,"t"],[65365,1,"u"],[65366,1,"v"],[65367,1,"w"],[65368,1,"x"],[65369,1,"y"],[65370,1,"z"],[65371,5,"{"],[65372,5,"|"],[65373,5,"}"],[65374,5,"~"],[65375,1,"\u2985"],[65376,1,"\u2986"],[65377,1,"."],[65378,1,"\u300C"],[65379,1,"\u300D"],[65380,1,"\u3001"],[65381,1,"\u30FB"],[65382,1,"\u30F2"],[65383,1,"\u30A1"],[65384,1,"\u30A3"],[65385,1,"\u30A5"],[65386,1,"\u30A7"],[65387,1,"\u30A9"],[65388,1,"\u30E3"],[65389,1,"\u30E5"],[65390,1,"\u30E7"],[65391,1,"\u30C3"],[65392,1,"\u30FC"],[65393,1,"\u30A2"],[65394,1,"\u30A4"],[65395,1,"\u30A6"],[65396,1,"\u30A8"],[65397,1,"\u30AA"],[65398,1,"\u30AB"],[65399,1,"\u30AD"],[65400,1,"\u30AF"],[65401,1,"\u30B1"],[65402,1,"\u30B3"],[65403,1,"\u30B5"],[65404,1,"\u30B7"],[65405,1,"\u30B9"],[65406,1,"\u30BB"],[65407,1,"\u30BD"],[65408,1,"\u30BF"],[65409,1,"\u30C1"],[65410,1,"\u30C4"],[65411,1,"\u30C6"],[65412,1,"\u30C8"],[65413,1,"\u30CA"],[65414,1,"\u30CB"],[65415,1,"\u30CC"],[65416,1,"\u30CD"],[65417,1,"\u30CE"],[65418,1,"\u30CF"],[65419,1,"\u30D2"],[65420,1,"\u30D5"],[65421,1,"\u30D8"],[65422,1,"\u30DB"],[65423,1,"\u30DE"],[65424,1,"\u30DF"],[65425,1,"\u30E0"],[65426,1,"\u30E1"],[65427,1,"\u30E2"],[65428,1,"\u30E4"],[65429,1,"\u30E6"],[65430,1,"\u30E8"],[65431,1,"\u30E9"],[65432,1,"\u30EA"],[65433,1,"\u30EB"],[65434,1,"\u30EC"],[65435,1,"\u30ED"],[65436,1,"\u30EF"],[65437,1,"\u30F3"],[65438,1,"\u3099"],[65439,1,"\u309A"],[65440,3],[65441,1,"\u1100"],[65442,1,"\u1101"],[65443,1,"\u11AA"],[65444,1,"\u1102"],[65445,1,"\u11AC"],[65446,1,"\u11AD"],[65447,1,"\u1103"],[65448,1,"\u1104"],[65449,1,"\u1105"],[65450,1,"\u11B0"],[65451,1,"\u11B1"],[65452,1,"\u11B2"],[65453,1,"\u11B3"],[65454,1,"\u11B4"],[65455,1,"\u11B5"],[65456,1,"\u111A"],[65457,1,"\u1106"],[65458,1,"\u1107"],[65459,1,"\u1108"],[65460,1,"\u1121"],[65461,1,"\u1109"],[65462,1,"\u110A"],[65463,1,"\u110B"],[65464,1,"\u110C"],[65465,1,"\u110D"],[65466,1,"\u110E"],[65467,1,"\u110F"],[65468,1,"\u1110"],[65469,1,"\u1111"],[65470,1,"\u1112"],[[65471,65473],3],[65474,1,"\u1161"],[65475,1,"\u1162"],[65476,1,"\u1163"],[65477,1,"\u1164"],[65478,1,"\u1165"],[65479,1,"\u1166"],[[65480,65481],3],[65482,1,"\u1167"],[65483,1,"\u1168"],[65484,1,"\u1169"],[65485,1,"\u116A"],[65486,1,"\u116B"],[65487,1,"\u116C"],[[65488,65489],3],[65490,1,"\u116D"],[65491,1,"\u116E"],[65492,1,"\u116F"],[65493,1,"\u1170"],[65494,1,"\u1171"],[65495,1,"\u1172"],[[65496,65497],3],[65498,1,"\u1173"],[65499,1,"\u1174"],[65500,1,"\u1175"],[[65501,65503],3],[65504,1,"\xA2"],[65505,1,"\xA3"],[65506,1,"\xAC"],[65507,5," \u0304"],[65508,1,"\xA6"],[65509,1,"\xA5"],[65510,1,"\u20A9"],[65511,3],[65512,1,"\u2502"],[65513,1,"\u2190"],[65514,1,"\u2191"],[65515,1,"\u2192"],[65516,1,"\u2193"],[65517,1,"\u25A0"],[65518,1,"\u25CB"],[[65519,65528],3],[[65529,65531],3],[65532,3],[65533,3],[[65534,65535],3],[[65536,65547],2],[65548,3],[[65549,65574],2],[65575,3],[[65576,65594],2],[65595,3],[[65596,65597],2],[65598,3],[[65599,65613],2],[[65614,65615],3],[[65616,65629],2],[[65630,65663],3],[[65664,65786],2],[[65787,65791],3],[[65792,65794],2],[[65795,65798],3],[[65799,65843],2],[[65844,65846],3],[[65847,65855],2],[[65856,65930],2],[[65931,65932],2],[[65933,65934],2],[65935,3],[[65936,65947],2],[65948,2],[[65949,65951],3],[65952,2],[[65953,65999],3],[[66e3,66044],2],[66045,2],[[66046,66175],3],[[66176,66204],2],[[66205,66207],3],[[66208,66256],2],[[66257,66271],3],[66272,2],[[66273,66299],2],[[66300,66303],3],[[66304,66334],2],[66335,2],[[66336,66339],2],[[66340,66348],3],[[66349,66351],2],[[66352,66368],2],[66369,2],[[66370,66377],2],[66378,2],[[66379,66383],3],[[66384,66426],2],[[66427,66431],3],[[66432,66461],2],[66462,3],[66463,2],[[66464,66499],2],[[66500,66503],3],[[66504,66511],2],[[66512,66517],2],[[66518,66559],3],[66560,1,"\u{10428}"],[66561,1,"\u{10429}"],[66562,1,"\u{1042A}"],[66563,1,"\u{1042B}"],[66564,1,"\u{1042C}"],[66565,1,"\u{1042D}"],[66566,1,"\u{1042E}"],[66567,1,"\u{1042F}"],[66568,1,"\u{10430}"],[66569,1,"\u{10431}"],[66570,1,"\u{10432}"],[66571,1,"\u{10433}"],[66572,1,"\u{10434}"],[66573,1,"\u{10435}"],[66574,1,"\u{10436}"],[66575,1,"\u{10437}"],[66576,1,"\u{10438}"],[66577,1,"\u{10439}"],[66578,1,"\u{1043A}"],[66579,1,"\u{1043B}"],[66580,1,"\u{1043C}"],[66581,1,"\u{1043D}"],[66582,1,"\u{1043E}"],[66583,1,"\u{1043F}"],[66584,1,"\u{10440}"],[66585,1,"\u{10441}"],[66586,1,"\u{10442}"],[66587,1,"\u{10443}"],[66588,1,"\u{10444}"],[66589,1,"\u{10445}"],[66590,1,"\u{10446}"],[66591,1,"\u{10447}"],[66592,1,"\u{10448}"],[66593,1,"\u{10449}"],[66594,1,"\u{1044A}"],[66595,1,"\u{1044B}"],[66596,1,"\u{1044C}"],[66597,1,"\u{1044D}"],[66598,1,"\u{1044E}"],[66599,1,"\u{1044F}"],[[66600,66637],2],[[66638,66717],2],[[66718,66719],3],[[66720,66729],2],[[66730,66735],3],[66736,1,"\u{104D8}"],[66737,1,"\u{104D9}"],[66738,1,"\u{104DA}"],[66739,1,"\u{104DB}"],[66740,1,"\u{104DC}"],[66741,1,"\u{104DD}"],[66742,1,"\u{104DE}"],[66743,1,"\u{104DF}"],[66744,1,"\u{104E0}"],[66745,1,"\u{104E1}"],[66746,1,"\u{104E2}"],[66747,1,"\u{104E3}"],[66748,1,"\u{104E4}"],[66749,1,"\u{104E5}"],[66750,1,"\u{104E6}"],[66751,1,"\u{104E7}"],[66752,1,"\u{104E8}"],[66753,1,"\u{104E9}"],[66754,1,"\u{104EA}"],[66755,1,"\u{104EB}"],[66756,1,"\u{104EC}"],[66757,1,"\u{104ED}"],[66758,1,"\u{104EE}"],[66759,1,"\u{104EF}"],[66760,1,"\u{104F0}"],[66761,1,"\u{104F1}"],[66762,1,"\u{104F2}"],[66763,1,"\u{104F3}"],[66764,1,"\u{104F4}"],[66765,1,"\u{104F5}"],[66766,1,"\u{104F6}"],[66767,1,"\u{104F7}"],[66768,1,"\u{104F8}"],[66769,1,"\u{104F9}"],[66770,1,"\u{104FA}"],[66771,1,"\u{104FB}"],[[66772,66775],3],[[66776,66811],2],[[66812,66815],3],[[66816,66855],2],[[66856,66863],3],[[66864,66915],2],[[66916,66926],3],[66927,2],[66928,1,"\u{10597}"],[66929,1,"\u{10598}"],[66930,1,"\u{10599}"],[66931,1,"\u{1059A}"],[66932,1,"\u{1059B}"],[66933,1,"\u{1059C}"],[66934,1,"\u{1059D}"],[66935,1,"\u{1059E}"],[66936,1,"\u{1059F}"],[66937,1,"\u{105A0}"],[66938,1,"\u{105A1}"],[66939,3],[66940,1,"\u{105A3}"],[66941,1,"\u{105A4}"],[66942,1,"\u{105A5}"],[66943,1,"\u{105A6}"],[66944,1,"\u{105A7}"],[66945,1,"\u{105A8}"],[66946,1,"\u{105A9}"],[66947,1,"\u{105AA}"],[66948,1,"\u{105AB}"],[66949,1,"\u{105AC}"],[66950,1,"\u{105AD}"],[66951,1,"\u{105AE}"],[66952,1,"\u{105AF}"],[66953,1,"\u{105B0}"],[66954,1,"\u{105B1}"],[66955,3],[66956,1,"\u{105B3}"],[66957,1,"\u{105B4}"],[66958,1,"\u{105B5}"],[66959,1,"\u{105B6}"],[66960,1,"\u{105B7}"],[66961,1,"\u{105B8}"],[66962,1,"\u{105B9}"],[66963,3],[66964,1,"\u{105BB}"],[66965,1,"\u{105BC}"],[66966,3],[[66967,66977],2],[66978,3],[[66979,66993],2],[66994,3],[[66995,67001],2],[67002,3],[[67003,67004],2],[[67005,67071],3],[[67072,67382],2],[[67383,67391],3],[[67392,67413],2],[[67414,67423],3],[[67424,67431],2],[[67432,67455],3],[67456,2],[67457,1,"\u02D0"],[67458,1,"\u02D1"],[67459,1,"\xE6"],[67460,1,"\u0299"],[67461,1,"\u0253"],[67462,3],[67463,1,"\u02A3"],[67464,1,"\uAB66"],[67465,1,"\u02A5"],[67466,1,"\u02A4"],[67467,1,"\u0256"],[67468,1,"\u0257"],[67469,1,"\u1D91"],[67470,1,"\u0258"],[67471,1,"\u025E"],[67472,1,"\u02A9"],[67473,1,"\u0264"],[67474,1,"\u0262"],[67475,1,"\u0260"],[67476,1,"\u029B"],[67477,1,"\u0127"],[67478,1,"\u029C"],[67479,1,"\u0267"],[67480,1,"\u0284"],[67481,1,"\u02AA"],[67482,1,"\u02AB"],[67483,1,"\u026C"],[67484,1,"\u{1DF04}"],[67485,1,"\uA78E"],[67486,1,"\u026E"],[67487,1,"\u{1DF05}"],[67488,1,"\u028E"],[67489,1,"\u{1DF06}"],[67490,1,"\xF8"],[67491,1,"\u0276"],[67492,1,"\u0277"],[67493,1,"q"],[67494,1,"\u027A"],[67495,1,"\u{1DF08}"],[67496,1,"\u027D"],[67497,1,"\u027E"],[67498,1,"\u0280"],[67499,1,"\u02A8"],[67500,1,"\u02A6"],[67501,1,"\uAB67"],[67502,1,"\u02A7"],[67503,1,"\u0288"],[67504,1,"\u2C71"],[67505,3],[67506,1,"\u028F"],[67507,1,"\u02A1"],[67508,1,"\u02A2"],[67509,1,"\u0298"],[67510,1,"\u01C0"],[67511,1,"\u01C1"],[67512,1,"\u01C2"],[67513,1,"\u{1DF0A}"],[67514,1,"\u{1DF1E}"],[[67515,67583],3],[[67584,67589],2],[[67590,67591],3],[67592,2],[67593,3],[[67594,67637],2],[67638,3],[[67639,67640],2],[[67641,67643],3],[67644,2],[[67645,67646],3],[67647,2],[[67648,67669],2],[67670,3],[[67671,67679],2],[[67680,67702],2],[[67703,67711],2],[[67712,67742],2],[[67743,67750],3],[[67751,67759],2],[[67760,67807],3],[[67808,67826],2],[67827,3],[[67828,67829],2],[[67830,67834],3],[[67835,67839],2],[[67840,67861],2],[[67862,67865],2],[[67866,67867],2],[[67868,67870],3],[67871,2],[[67872,67897],2],[[67898,67902],3],[67903,2],[[67904,67967],3],[[67968,68023],2],[[68024,68027],3],[[68028,68029],2],[[68030,68031],2],[[68032,68047],2],[[68048,68049],3],[[68050,68095],2],[[68096,68099],2],[68100,3],[[68101,68102],2],[[68103,68107],3],[[68108,68115],2],[68116,3],[[68117,68119],2],[68120,3],[[68121,68147],2],[[68148,68149],2],[[68150,68151],3],[[68152,68154],2],[[68155,68158],3],[68159,2],[[68160,68167],2],[68168,2],[[68169,68175],3],[[68176,68184],2],[[68185,68191],3],[[68192,68220],2],[[68221,68223],2],[[68224,68252],2],[[68253,68255],2],[[68256,68287],3],[[68288,68295],2],[68296,2],[[68297,68326],2],[[68327,68330],3],[[68331,68342],2],[[68343,68351],3],[[68352,68405],2],[[68406,68408],3],[[68409,68415],2],[[68416,68437],2],[[68438,68439],3],[[68440,68447],2],[[68448,68466],2],[[68467,68471],3],[[68472,68479],2],[[68480,68497],2],[[68498,68504],3],[[68505,68508],2],[[68509,68520],3],[[68521,68527],2],[[68528,68607],3],[[68608,68680],2],[[68681,68735],3],[68736,1,"\u{10CC0}"],[68737,1,"\u{10CC1}"],[68738,1,"\u{10CC2}"],[68739,1,"\u{10CC3}"],[68740,1,"\u{10CC4}"],[68741,1,"\u{10CC5}"],[68742,1,"\u{10CC6}"],[68743,1,"\u{10CC7}"],[68744,1,"\u{10CC8}"],[68745,1,"\u{10CC9}"],[68746,1,"\u{10CCA}"],[68747,1,"\u{10CCB}"],[68748,1,"\u{10CCC}"],[68749,1,"\u{10CCD}"],[68750,1,"\u{10CCE}"],[68751,1,"\u{10CCF}"],[68752,1,"\u{10CD0}"],[68753,1,"\u{10CD1}"],[68754,1,"\u{10CD2}"],[68755,1,"\u{10CD3}"],[68756,1,"\u{10CD4}"],[68757,1,"\u{10CD5}"],[68758,1,"\u{10CD6}"],[68759,1,"\u{10CD7}"],[68760,1,"\u{10CD8}"],[68761,1,"\u{10CD9}"],[68762,1,"\u{10CDA}"],[68763,1,"\u{10CDB}"],[68764,1,"\u{10CDC}"],[68765,1,"\u{10CDD}"],[68766,1,"\u{10CDE}"],[68767,1,"\u{10CDF}"],[68768,1,"\u{10CE0}"],[68769,1,"\u{10CE1}"],[68770,1,"\u{10CE2}"],[68771,1,"\u{10CE3}"],[68772,1,"\u{10CE4}"],[68773,1,"\u{10CE5}"],[68774,1,"\u{10CE6}"],[68775,1,"\u{10CE7}"],[68776,1,"\u{10CE8}"],[68777,1,"\u{10CE9}"],[68778,1,"\u{10CEA}"],[68779,1,"\u{10CEB}"],[68780,1,"\u{10CEC}"],[68781,1,"\u{10CED}"],[68782,1,"\u{10CEE}"],[68783,1,"\u{10CEF}"],[68784,1,"\u{10CF0}"],[68785,1,"\u{10CF1}"],[68786,1,"\u{10CF2}"],[[68787,68799],3],[[68800,68850],2],[[68851,68857],3],[[68858,68863],2],[[68864,68903],2],[[68904,68911],3],[[68912,68921],2],[[68922,69215],3],[[69216,69246],2],[69247,3],[[69248,69289],2],[69290,3],[[69291,69292],2],[69293,2],[[69294,69295],3],[[69296,69297],2],[[69298,69372],3],[[69373,69375],2],[[69376,69404],2],[[69405,69414],2],[69415,2],[[69416,69423],3],[[69424,69456],2],[[69457,69465],2],[[69466,69487],3],[[69488,69509],2],[[69510,69513],2],[[69514,69551],3],[[69552,69572],2],[[69573,69579],2],[[69580,69599],3],[[69600,69622],2],[[69623,69631],3],[[69632,69702],2],[[69703,69709],2],[[69710,69713],3],[[69714,69733],2],[[69734,69743],2],[[69744,69749],2],[[69750,69758],3],[69759,2],[[69760,69818],2],[[69819,69820],2],[69821,3],[[69822,69825],2],[69826,2],[[69827,69836],3],[69837,3],[[69838,69839],3],[[69840,69864],2],[[69865,69871],3],[[69872,69881],2],[[69882,69887],3],[[69888,69940],2],[69941,3],[[69942,69951],2],[[69952,69955],2],[[69956,69958],2],[69959,2],[[69960,69967],3],[[69968,70003],2],[[70004,70005],2],[70006,2],[[70007,70015],3],[[70016,70084],2],[[70085,70088],2],[[70089,70092],2],[70093,2],[[70094,70095],2],[[70096,70105],2],[70106,2],[70107,2],[70108,2],[[70109,70111],2],[70112,3],[[70113,70132],2],[[70133,70143],3],[[70144,70161],2],[70162,3],[[70163,70199],2],[[70200,70205],2],[70206,2],[[70207,70209],2],[[70210,70271],3],[[70272,70278],2],[70279,3],[70280,2],[70281,3],[[70282,70285],2],[70286,3],[[70287,70301],2],[70302,3],[[70303,70312],2],[70313,2],[[70314,70319],3],[[70320,70378],2],[[70379,70383],3],[[70384,70393],2],[[70394,70399],3],[70400,2],[[70401,70403],2],[70404,3],[[70405,70412],2],[[70413,70414],3],[[70415,70416],2],[[70417,70418],3],[[70419,70440],2],[70441,3],[[70442,70448],2],[70449,3],[[70450,70451],2],[70452,3],[[70453,70457],2],[70458,3],[70459,2],[[70460,70468],2],[[70469,70470],3],[[70471,70472],2],[[70473,70474],3],[[70475,70477],2],[[70478,70479],3],[70480,2],[[70481,70486],3],[70487,2],[[70488,70492],3],[[70493,70499],2],[[70500,70501],3],[[70502,70508],2],[[70509,70511],3],[[70512,70516],2],[[70517,70655],3],[[70656,70730],2],[[70731,70735],2],[[70736,70745],2],[70746,2],[70747,2],[70748,3],[70749,2],[70750,2],[70751,2],[[70752,70753],2],[[70754,70783],3],[[70784,70853],2],[70854,2],[70855,2],[[70856,70863],3],[[70864,70873],2],[[70874,71039],3],[[71040,71093],2],[[71094,71095],3],[[71096,71104],2],[[71105,71113],2],[[71114,71127],2],[[71128,71133],2],[[71134,71167],3],[[71168,71232],2],[[71233,71235],2],[71236,2],[[71237,71247],3],[[71248,71257],2],[[71258,71263],3],[[71264,71276],2],[[71277,71295],3],[[71296,71351],2],[71352,2],[71353,2],[[71354,71359],3],[[71360,71369],2],[[71370,71423],3],[[71424,71449],2],[71450,2],[[71451,71452],3],[[71453,71467],2],[[71468,71471],3],[[71472,71481],2],[[71482,71487],2],[[71488,71494],2],[[71495,71679],3],[[71680,71738],2],[71739,2],[[71740,71839],3],[71840,1,"\u{118C0}"],[71841,1,"\u{118C1}"],[71842,1,"\u{118C2}"],[71843,1,"\u{118C3}"],[71844,1,"\u{118C4}"],[71845,1,"\u{118C5}"],[71846,1,"\u{118C6}"],[71847,1,"\u{118C7}"],[71848,1,"\u{118C8}"],[71849,1,"\u{118C9}"],[71850,1,"\u{118CA}"],[71851,1,"\u{118CB}"],[71852,1,"\u{118CC}"],[71853,1,"\u{118CD}"],[71854,1,"\u{118CE}"],[71855,1,"\u{118CF}"],[71856,1,"\u{118D0}"],[71857,1,"\u{118D1}"],[71858,1,"\u{118D2}"],[71859,1,"\u{118D3}"],[71860,1,"\u{118D4}"],[71861,1,"\u{118D5}"],[71862,1,"\u{118D6}"],[71863,1,"\u{118D7}"],[71864,1,"\u{118D8}"],[71865,1,"\u{118D9}"],[71866,1,"\u{118DA}"],[71867,1,"\u{118DB}"],[71868,1,"\u{118DC}"],[71869,1,"\u{118DD}"],[71870,1,"\u{118DE}"],[71871,1,"\u{118DF}"],[[71872,71913],2],[[71914,71922],2],[[71923,71934],3],[71935,2],[[71936,71942],2],[[71943,71944],3],[71945,2],[[71946,71947],3],[[71948,71955],2],[71956,3],[[71957,71958],2],[71959,3],[[71960,71989],2],[71990,3],[[71991,71992],2],[[71993,71994],3],[[71995,72003],2],[[72004,72006],2],[[72007,72015],3],[[72016,72025],2],[[72026,72095],3],[[72096,72103],2],[[72104,72105],3],[[72106,72151],2],[[72152,72153],3],[[72154,72161],2],[72162,2],[[72163,72164],2],[[72165,72191],3],[[72192,72254],2],[[72255,72262],2],[72263,2],[[72264,72271],3],[[72272,72323],2],[[72324,72325],2],[[72326,72345],2],[[72346,72348],2],[72349,2],[[72350,72354],2],[[72355,72367],3],[[72368,72383],2],[[72384,72440],2],[[72441,72447],3],[[72448,72457],2],[[72458,72703],3],[[72704,72712],2],[72713,3],[[72714,72758],2],[72759,3],[[72760,72768],2],[[72769,72773],2],[[72774,72783],3],[[72784,72793],2],[[72794,72812],2],[[72813,72815],3],[[72816,72817],2],[[72818,72847],2],[[72848,72849],3],[[72850,72871],2],[72872,3],[[72873,72886],2],[[72887,72959],3],[[72960,72966],2],[72967,3],[[72968,72969],2],[72970,3],[[72971,73014],2],[[73015,73017],3],[73018,2],[73019,3],[[73020,73021],2],[73022,3],[[73023,73031],2],[[73032,73039],3],[[73040,73049],2],[[73050,73055],3],[[73056,73061],2],[73062,3],[[73063,73064],2],[73065,3],[[73066,73102],2],[73103,3],[[73104,73105],2],[73106,3],[[73107,73112],2],[[73113,73119],3],[[73120,73129],2],[[73130,73439],3],[[73440,73462],2],[[73463,73464],2],[[73465,73471],3],[[73472,73488],2],[73489,3],[[73490,73530],2],[[73531,73533],3],[[73534,73538],2],[[73539,73551],2],[[73552,73561],2],[[73562,73647],3],[73648,2],[[73649,73663],3],[[73664,73713],2],[[73714,73726],3],[73727,2],[[73728,74606],2],[[74607,74648],2],[74649,2],[[74650,74751],3],[[74752,74850],2],[[74851,74862],2],[74863,3],[[74864,74867],2],[74868,2],[[74869,74879],3],[[74880,75075],2],[[75076,77711],3],[[77712,77808],2],[[77809,77810],2],[[77811,77823],3],[[77824,78894],2],[78895,2],[[78896,78904],3],[[78905,78911],3],[[78912,78933],2],[[78934,82943],3],[[82944,83526],2],[[83527,92159],3],[[92160,92728],2],[[92729,92735],3],[[92736,92766],2],[92767,3],[[92768,92777],2],[[92778,92781],3],[[92782,92783],2],[[92784,92862],2],[92863,3],[[92864,92873],2],[[92874,92879],3],[[92880,92909],2],[[92910,92911],3],[[92912,92916],2],[92917,2],[[92918,92927],3],[[92928,92982],2],[[92983,92991],2],[[92992,92995],2],[[92996,92997],2],[[92998,93007],3],[[93008,93017],2],[93018,3],[[93019,93025],2],[93026,3],[[93027,93047],2],[[93048,93052],3],[[93053,93071],2],[[93072,93759],3],[93760,1,"\u{16E60}"],[93761,1,"\u{16E61}"],[93762,1,"\u{16E62}"],[93763,1,"\u{16E63}"],[93764,1,"\u{16E64}"],[93765,1,"\u{16E65}"],[93766,1,"\u{16E66}"],[93767,1,"\u{16E67}"],[93768,1,"\u{16E68}"],[93769,1,"\u{16E69}"],[93770,1,"\u{16E6A}"],[93771,1,"\u{16E6B}"],[93772,1,"\u{16E6C}"],[93773,1,"\u{16E6D}"],[93774,1,"\u{16E6E}"],[93775,1,"\u{16E6F}"],[93776,1,"\u{16E70}"],[93777,1,"\u{16E71}"],[93778,1,"\u{16E72}"],[93779,1,"\u{16E73}"],[93780,1,"\u{16E74}"],[93781,1,"\u{16E75}"],[93782,1,"\u{16E76}"],[93783,1,"\u{16E77}"],[93784,1,"\u{16E78}"],[93785,1,"\u{16E79}"],[93786,1,"\u{16E7A}"],[93787,1,"\u{16E7B}"],[93788,1,"\u{16E7C}"],[93789,1,"\u{16E7D}"],[93790,1,"\u{16E7E}"],[93791,1,"\u{16E7F}"],[[93792,93823],2],[[93824,93850],2],[[93851,93951],3],[[93952,94020],2],[[94021,94026],2],[[94027,94030],3],[94031,2],[[94032,94078],2],[[94079,94087],2],[[94088,94094],3],[[94095,94111],2],[[94112,94175],3],[94176,2],[94177,2],[94178,2],[94179,2],[94180,2],[[94181,94191],3],[[94192,94193],2],[[94194,94207],3],[[94208,100332],2],[[100333,100337],2],[[100338,100343],2],[[100344,100351],3],[[100352,101106],2],[[101107,101589],2],[[101590,101631],3],[[101632,101640],2],[[101641,110575],3],[[110576,110579],2],[110580,3],[[110581,110587],2],[110588,3],[[110589,110590],2],[110591,3],[[110592,110593],2],[[110594,110878],2],[[110879,110882],2],[[110883,110897],3],[110898,2],[[110899,110927],3],[[110928,110930],2],[[110931,110932],3],[110933,2],[[110934,110947],3],[[110948,110951],2],[[110952,110959],3],[[110960,111355],2],[[111356,113663],3],[[113664,113770],2],[[113771,113775],3],[[113776,113788],2],[[113789,113791],3],[[113792,113800],2],[[113801,113807],3],[[113808,113817],2],[[113818,113819],3],[113820,2],[[113821,113822],2],[113823,2],[[113824,113827],7],[[113828,118527],3],[[118528,118573],2],[[118574,118575],3],[[118576,118598],2],[[118599,118607],3],[[118608,118723],2],[[118724,118783],3],[[118784,119029],2],[[119030,119039],3],[[119040,119078],2],[[119079,119080],3],[119081,2],[[119082,119133],2],[119134,1,"\u{1D157}\u{1D165}"],[119135,1,"\u{1D158}\u{1D165}"],[119136,1,"\u{1D158}\u{1D165}\u{1D16E}"],[119137,1,"\u{1D158}\u{1D165}\u{1D16F}"],[119138,1,"\u{1D158}\u{1D165}\u{1D170}"],[119139,1,"\u{1D158}\u{1D165}\u{1D171}"],[119140,1,"\u{1D158}\u{1D165}\u{1D172}"],[[119141,119154],2],[[119155,119162],3],[[119163,119226],2],[119227,1,"\u{1D1B9}\u{1D165}"],[119228,1,"\u{1D1BA}\u{1D165}"],[119229,1,"\u{1D1B9}\u{1D165}\u{1D16E}"],[119230,1,"\u{1D1BA}\u{1D165}\u{1D16E}"],[119231,1,"\u{1D1B9}\u{1D165}\u{1D16F}"],[119232,1,"\u{1D1BA}\u{1D165}\u{1D16F}"],[[119233,119261],2],[[119262,119272],2],[[119273,119274],2],[[119275,119295],3],[[119296,119365],2],[[119366,119487],3],[[119488,119507],2],[[119508,119519],3],[[119520,119539],2],[[119540,119551],3],[[119552,119638],2],[[119639,119647],3],[[119648,119665],2],[[119666,119672],2],[[119673,119807],3],[119808,1,"a"],[119809,1,"b"],[119810,1,"c"],[119811,1,"d"],[119812,1,"e"],[119813,1,"f"],[119814,1,"g"],[119815,1,"h"],[119816,1,"i"],[119817,1,"j"],[119818,1,"k"],[119819,1,"l"],[119820,1,"m"],[119821,1,"n"],[119822,1,"o"],[119823,1,"p"],[119824,1,"q"],[119825,1,"r"],[119826,1,"s"],[119827,1,"t"],[119828,1,"u"],[119829,1,"v"],[119830,1,"w"],[119831,1,"x"],[119832,1,"y"],[119833,1,"z"],[119834,1,"a"],[119835,1,"b"],[119836,1,"c"],[119837,1,"d"],[119838,1,"e"],[119839,1,"f"],[119840,1,"g"],[119841,1,"h"],[119842,1,"i"],[119843,1,"j"],[119844,1,"k"],[119845,1,"l"],[119846,1,"m"],[119847,1,"n"],[119848,1,"o"],[119849,1,"p"],[119850,1,"q"],[119851,1,"r"],[119852,1,"s"],[119853,1,"t"],[119854,1,"u"],[119855,1,"v"],[119856,1,"w"],[119857,1,"x"],[119858,1,"y"],[119859,1,"z"],[119860,1,"a"],[119861,1,"b"],[119862,1,"c"],[119863,1,"d"],[119864,1,"e"],[119865,1,"f"],[119866,1,"g"],[119867,1,"h"],[119868,1,"i"],[119869,1,"j"],[119870,1,"k"],[119871,1,"l"],[119872,1,"m"],[119873,1,"n"],[119874,1,"o"],[119875,1,"p"],[119876,1,"q"],[119877,1,"r"],[119878,1,"s"],[119879,1,"t"],[119880,1,"u"],[119881,1,"v"],[119882,1,"w"],[119883,1,"x"],[119884,1,"y"],[119885,1,"z"],[119886,1,"a"],[119887,1,"b"],[119888,1,"c"],[119889,1,"d"],[119890,1,"e"],[119891,1,"f"],[119892,1,"g"],[119893,3],[119894,1,"i"],[119895,1,"j"],[119896,1,"k"],[119897,1,"l"],[119898,1,"m"],[119899,1,"n"],[119900,1,"o"],[119901,1,"p"],[119902,1,"q"],[119903,1,"r"],[119904,1,"s"],[119905,1,"t"],[119906,1,"u"],[119907,1,"v"],[119908,1,"w"],[119909,1,"x"],[119910,1,"y"],[119911,1,"z"],[119912,1,"a"],[119913,1,"b"],[119914,1,"c"],[119915,1,"d"],[119916,1,"e"],[119917,1,"f"],[119918,1,"g"],[119919,1,"h"],[119920,1,"i"],[119921,1,"j"],[119922,1,"k"],[119923,1,"l"],[119924,1,"m"],[119925,1,"n"],[119926,1,"o"],[119927,1,"p"],[119928,1,"q"],[119929,1,"r"],[119930,1,"s"],[119931,1,"t"],[119932,1,"u"],[119933,1,"v"],[119934,1,"w"],[119935,1,"x"],[119936,1,"y"],[119937,1,"z"],[119938,1,"a"],[119939,1,"b"],[119940,1,"c"],[119941,1,"d"],[119942,1,"e"],[119943,1,"f"],[119944,1,"g"],[119945,1,"h"],[119946,1,"i"],[119947,1,"j"],[119948,1,"k"],[119949,1,"l"],[119950,1,"m"],[119951,1,"n"],[119952,1,"o"],[119953,1,"p"],[119954,1,"q"],[119955,1,"r"],[119956,1,"s"],[119957,1,"t"],[119958,1,"u"],[119959,1,"v"],[119960,1,"w"],[119961,1,"x"],[119962,1,"y"],[119963,1,"z"],[119964,1,"a"],[119965,3],[119966,1,"c"],[119967,1,"d"],[[119968,119969],3],[119970,1,"g"],[[119971,119972],3],[119973,1,"j"],[119974,1,"k"],[[119975,119976],3],[119977,1,"n"],[119978,1,"o"],[119979,1,"p"],[119980,1,"q"],[119981,3],[119982,1,"s"],[119983,1,"t"],[119984,1,"u"],[119985,1,"v"],[119986,1,"w"],[119987,1,"x"],[119988,1,"y"],[119989,1,"z"],[119990,1,"a"],[119991,1,"b"],[119992,1,"c"],[119993,1,"d"],[119994,3],[119995,1,"f"],[119996,3],[119997,1,"h"],[119998,1,"i"],[119999,1,"j"],[12e4,1,"k"],[120001,1,"l"],[120002,1,"m"],[120003,1,"n"],[120004,3],[120005,1,"p"],[120006,1,"q"],[120007,1,"r"],[120008,1,"s"],[120009,1,"t"],[120010,1,"u"],[120011,1,"v"],[120012,1,"w"],[120013,1,"x"],[120014,1,"y"],[120015,1,"z"],[120016,1,"a"],[120017,1,"b"],[120018,1,"c"],[120019,1,"d"],[120020,1,"e"],[120021,1,"f"],[120022,1,"g"],[120023,1,"h"],[120024,1,"i"],[120025,1,"j"],[120026,1,"k"],[120027,1,"l"],[120028,1,"m"],[120029,1,"n"],[120030,1,"o"],[120031,1,"p"],[120032,1,"q"],[120033,1,"r"],[120034,1,"s"],[120035,1,"t"],[120036,1,"u"],[120037,1,"v"],[120038,1,"w"],[120039,1,"x"],[120040,1,"y"],[120041,1,"z"],[120042,1,"a"],[120043,1,"b"],[120044,1,"c"],[120045,1,"d"],[120046,1,"e"],[120047,1,"f"],[120048,1,"g"],[120049,1,"h"],[120050,1,"i"],[120051,1,"j"],[120052,1,"k"],[120053,1,"l"],[120054,1,"m"],[120055,1,"n"],[120056,1,"o"],[120057,1,"p"],[120058,1,"q"],[120059,1,"r"],[120060,1,"s"],[120061,1,"t"],[120062,1,"u"],[120063,1,"v"],[120064,1,"w"],[120065,1,"x"],[120066,1,"y"],[120067,1,"z"],[120068,1,"a"],[120069,1,"b"],[120070,3],[120071,1,"d"],[120072,1,"e"],[120073,1,"f"],[120074,1,"g"],[[120075,120076],3],[120077,1,"j"],[120078,1,"k"],[120079,1,"l"],[120080,1,"m"],[120081,1,"n"],[120082,1,"o"],[120083,1,"p"],[120084,1,"q"],[120085,3],[120086,1,"s"],[120087,1,"t"],[120088,1,"u"],[120089,1,"v"],[120090,1,"w"],[120091,1,"x"],[120092,1,"y"],[120093,3],[120094,1,"a"],[120095,1,"b"],[120096,1,"c"],[120097,1,"d"],[120098,1,"e"],[120099,1,"f"],[120100,1,"g"],[120101,1,"h"],[120102,1,"i"],[120103,1,"j"],[120104,1,"k"],[120105,1,"l"],[120106,1,"m"],[120107,1,"n"],[120108,1,"o"],[120109,1,"p"],[120110,1,"q"],[120111,1,"r"],[120112,1,"s"],[120113,1,"t"],[120114,1,"u"],[120115,1,"v"],[120116,1,"w"],[120117,1,"x"],[120118,1,"y"],[120119,1,"z"],[120120,1,"a"],[120121,1,"b"],[120122,3],[120123,1,"d"],[120124,1,"e"],[120125,1,"f"],[120126,1,"g"],[120127,3],[120128,1,"i"],[120129,1,"j"],[120130,1,"k"],[120131,1,"l"],[120132,1,"m"],[120133,3],[120134,1,"o"],[[120135,120137],3],[120138,1,"s"],[120139,1,"t"],[120140,1,"u"],[120141,1,"v"],[120142,1,"w"],[120143,1,"x"],[120144,1,"y"],[120145,3],[120146,1,"a"],[120147,1,"b"],[120148,1,"c"],[120149,1,"d"],[120150,1,"e"],[120151,1,"f"],[120152,1,"g"],[120153,1,"h"],[120154,1,"i"],[120155,1,"j"],[120156,1,"k"],[120157,1,"l"],[120158,1,"m"],[120159,1,"n"],[120160,1,"o"],[120161,1,"p"],[120162,1,"q"],[120163,1,"r"],[120164,1,"s"],[120165,1,"t"],[120166,1,"u"],[120167,1,"v"],[120168,1,"w"],[120169,1,"x"],[120170,1,"y"],[120171,1,"z"],[120172,1,"a"],[120173,1,"b"],[120174,1,"c"],[120175,1,"d"],[120176,1,"e"],[120177,1,"f"],[120178,1,"g"],[120179,1,"h"],[120180,1,"i"],[120181,1,"j"],[120182,1,"k"],[120183,1,"l"],[120184,1,"m"],[120185,1,"n"],[120186,1,"o"],[120187,1,"p"],[120188,1,"q"],[120189,1,"r"],[120190,1,"s"],[120191,1,"t"],[120192,1,"u"],[120193,1,"v"],[120194,1,"w"],[120195,1,"x"],[120196,1,"y"],[120197,1,"z"],[120198,1,"a"],[120199,1,"b"],[120200,1,"c"],[120201,1,"d"],[120202,1,"e"],[120203,1,"f"],[120204,1,"g"],[120205,1,"h"],[120206,1,"i"],[120207,1,"j"],[120208,1,"k"],[120209,1,"l"],[120210,1,"m"],[120211,1,"n"],[120212,1,"o"],[120213,1,"p"],[120214,1,"q"],[120215,1,"r"],[120216,1,"s"],[120217,1,"t"],[120218,1,"u"],[120219,1,"v"],[120220,1,"w"],[120221,1,"x"],[120222,1,"y"],[120223,1,"z"],[120224,1,"a"],[120225,1,"b"],[120226,1,"c"],[120227,1,"d"],[120228,1,"e"],[120229,1,"f"],[120230,1,"g"],[120231,1,"h"],[120232,1,"i"],[120233,1,"j"],[120234,1,"k"],[120235,1,"l"],[120236,1,"m"],[120237,1,"n"],[120238,1,"o"],[120239,1,"p"],[120240,1,"q"],[120241,1,"r"],[120242,1,"s"],[120243,1,"t"],[120244,1,"u"],[120245,1,"v"],[120246,1,"w"],[120247,1,"x"],[120248,1,"y"],[120249,1,"z"],[120250,1,"a"],[120251,1,"b"],[120252,1,"c"],[120253,1,"d"],[120254,1,"e"],[120255,1,"f"],[120256,1,"g"],[120257,1,"h"],[120258,1,"i"],[120259,1,"j"],[120260,1,"k"],[120261,1,"l"],[120262,1,"m"],[120263,1,"n"],[120264,1,"o"],[120265,1,"p"],[120266,1,"q"],[120267,1,"r"],[120268,1,"s"],[120269,1,"t"],[120270,1,"u"],[120271,1,"v"],[120272,1,"w"],[120273,1,"x"],[120274,1,"y"],[120275,1,"z"],[120276,1,"a"],[120277,1,"b"],[120278,1,"c"],[120279,1,"d"],[120280,1,"e"],[120281,1,"f"],[120282,1,"g"],[120283,1,"h"],[120284,1,"i"],[120285,1,"j"],[120286,1,"k"],[120287,1,"l"],[120288,1,"m"],[120289,1,"n"],[120290,1,"o"],[120291,1,"p"],[120292,1,"q"],[120293,1,"r"],[120294,1,"s"],[120295,1,"t"],[120296,1,"u"],[120297,1,"v"],[120298,1,"w"],[120299,1,"x"],[120300,1,"y"],[120301,1,"z"],[120302,1,"a"],[120303,1,"b"],[120304,1,"c"],[120305,1,"d"],[120306,1,"e"],[120307,1,"f"],[120308,1,"g"],[120309,1,"h"],[120310,1,"i"],[120311,1,"j"],[120312,1,"k"],[120313,1,"l"],[120314,1,"m"],[120315,1,"n"],[120316,1,"o"],[120317,1,"p"],[120318,1,"q"],[120319,1,"r"],[120320,1,"s"],[120321,1,"t"],[120322,1,"u"],[120323,1,"v"],[120324,1,"w"],[120325,1,"x"],[120326,1,"y"],[120327,1,"z"],[120328,1,"a"],[120329,1,"b"],[120330,1,"c"],[120331,1,"d"],[120332,1,"e"],[120333,1,"f"],[120334,1,"g"],[120335,1,"h"],[120336,1,"i"],[120337,1,"j"],[120338,1,"k"],[120339,1,"l"],[120340,1,"m"],[120341,1,"n"],[120342,1,"o"],[120343,1,"p"],[120344,1,"q"],[120345,1,"r"],[120346,1,"s"],[120347,1,"t"],[120348,1,"u"],[120349,1,"v"],[120350,1,"w"],[120351,1,"x"],[120352,1,"y"],[120353,1,"z"],[120354,1,"a"],[120355,1,"b"],[120356,1,"c"],[120357,1,"d"],[120358,1,"e"],[120359,1,"f"],[120360,1,"g"],[120361,1,"h"],[120362,1,"i"],[120363,1,"j"],[120364,1,"k"],[120365,1,"l"],[120366,1,"m"],[120367,1,"n"],[120368,1,"o"],[120369,1,"p"],[120370,1,"q"],[120371,1,"r"],[120372,1,"s"],[120373,1,"t"],[120374,1,"u"],[120375,1,"v"],[120376,1,"w"],[120377,1,"x"],[120378,1,"y"],[120379,1,"z"],[120380,1,"a"],[120381,1,"b"],[120382,1,"c"],[120383,1,"d"],[120384,1,"e"],[120385,1,"f"],[120386,1,"g"],[120387,1,"h"],[120388,1,"i"],[120389,1,"j"],[120390,1,"k"],[120391,1,"l"],[120392,1,"m"],[120393,1,"n"],[120394,1,"o"],[120395,1,"p"],[120396,1,"q"],[120397,1,"r"],[120398,1,"s"],[120399,1,"t"],[120400,1,"u"],[120401,1,"v"],[120402,1,"w"],[120403,1,"x"],[120404,1,"y"],[120405,1,"z"],[120406,1,"a"],[120407,1,"b"],[120408,1,"c"],[120409,1,"d"],[120410,1,"e"],[120411,1,"f"],[120412,1,"g"],[120413,1,"h"],[120414,1,"i"],[120415,1,"j"],[120416,1,"k"],[120417,1,"l"],[120418,1,"m"],[120419,1,"n"],[120420,1,"o"],[120421,1,"p"],[120422,1,"q"],[120423,1,"r"],[120424,1,"s"],[120425,1,"t"],[120426,1,"u"],[120427,1,"v"],[120428,1,"w"],[120429,1,"x"],[120430,1,"y"],[120431,1,"z"],[120432,1,"a"],[120433,1,"b"],[120434,1,"c"],[120435,1,"d"],[120436,1,"e"],[120437,1,"f"],[120438,1,"g"],[120439,1,"h"],[120440,1,"i"],[120441,1,"j"],[120442,1,"k"],[120443,1,"l"],[120444,1,"m"],[120445,1,"n"],[120446,1,"o"],[120447,1,"p"],[120448,1,"q"],[120449,1,"r"],[120450,1,"s"],[120451,1,"t"],[120452,1,"u"],[120453,1,"v"],[120454,1,"w"],[120455,1,"x"],[120456,1,"y"],[120457,1,"z"],[120458,1,"a"],[120459,1,"b"],[120460,1,"c"],[120461,1,"d"],[120462,1,"e"],[120463,1,"f"],[120464,1,"g"],[120465,1,"h"],[120466,1,"i"],[120467,1,"j"],[120468,1,"k"],[120469,1,"l"],[120470,1,"m"],[120471,1,"n"],[120472,1,"o"],[120473,1,"p"],[120474,1,"q"],[120475,1,"r"],[120476,1,"s"],[120477,1,"t"],[120478,1,"u"],[120479,1,"v"],[120480,1,"w"],[120481,1,"x"],[120482,1,"y"],[120483,1,"z"],[120484,1,"\u0131"],[120485,1,"\u0237"],[[120486,120487],3],[120488,1,"\u03B1"],[120489,1,"\u03B2"],[120490,1,"\u03B3"],[120491,1,"\u03B4"],[120492,1,"\u03B5"],[120493,1,"\u03B6"],[120494,1,"\u03B7"],[120495,1,"\u03B8"],[120496,1,"\u03B9"],[120497,1,"\u03BA"],[120498,1,"\u03BB"],[120499,1,"\u03BC"],[120500,1,"\u03BD"],[120501,1,"\u03BE"],[120502,1,"\u03BF"],[120503,1,"\u03C0"],[120504,1,"\u03C1"],[120505,1,"\u03B8"],[120506,1,"\u03C3"],[120507,1,"\u03C4"],[120508,1,"\u03C5"],[120509,1,"\u03C6"],[120510,1,"\u03C7"],[120511,1,"\u03C8"],[120512,1,"\u03C9"],[120513,1,"\u2207"],[120514,1,"\u03B1"],[120515,1,"\u03B2"],[120516,1,"\u03B3"],[120517,1,"\u03B4"],[120518,1,"\u03B5"],[120519,1,"\u03B6"],[120520,1,"\u03B7"],[120521,1,"\u03B8"],[120522,1,"\u03B9"],[120523,1,"\u03BA"],[120524,1,"\u03BB"],[120525,1,"\u03BC"],[120526,1,"\u03BD"],[120527,1,"\u03BE"],[120528,1,"\u03BF"],[120529,1,"\u03C0"],[120530,1,"\u03C1"],[[120531,120532],1,"\u03C3"],[120533,1,"\u03C4"],[120534,1,"\u03C5"],[120535,1,"\u03C6"],[120536,1,"\u03C7"],[120537,1,"\u03C8"],[120538,1,"\u03C9"],[120539,1,"\u2202"],[120540,1,"\u03B5"],[120541,1,"\u03B8"],[120542,1,"\u03BA"],[120543,1,"\u03C6"],[120544,1,"\u03C1"],[120545,1,"\u03C0"],[120546,1,"\u03B1"],[120547,1,"\u03B2"],[120548,1,"\u03B3"],[120549,1,"\u03B4"],[120550,1,"\u03B5"],[120551,1,"\u03B6"],[120552,1,"\u03B7"],[120553,1,"\u03B8"],[120554,1,"\u03B9"],[120555,1,"\u03BA"],[120556,1,"\u03BB"],[120557,1,"\u03BC"],[120558,1,"\u03BD"],[120559,1,"\u03BE"],[120560,1,"\u03BF"],[120561,1,"\u03C0"],[120562,1,"\u03C1"],[120563,1,"\u03B8"],[120564,1,"\u03C3"],[120565,1,"\u03C4"],[120566,1,"\u03C5"],[120567,1,"\u03C6"],[120568,1,"\u03C7"],[120569,1,"\u03C8"],[120570,1,"\u03C9"],[120571,1,"\u2207"],[120572,1,"\u03B1"],[120573,1,"\u03B2"],[120574,1,"\u03B3"],[120575,1,"\u03B4"],[120576,1,"\u03B5"],[120577,1,"\u03B6"],[120578,1,"\u03B7"],[120579,1,"\u03B8"],[120580,1,"\u03B9"],[120581,1,"\u03BA"],[120582,1,"\u03BB"],[120583,1,"\u03BC"],[120584,1,"\u03BD"],[120585,1,"\u03BE"],[120586,1,"\u03BF"],[120587,1,"\u03C0"],[120588,1,"\u03C1"],[[120589,120590],1,"\u03C3"],[120591,1,"\u03C4"],[120592,1,"\u03C5"],[120593,1,"\u03C6"],[120594,1,"\u03C7"],[120595,1,"\u03C8"],[120596,1,"\u03C9"],[120597,1,"\u2202"],[120598,1,"\u03B5"],[120599,1,"\u03B8"],[120600,1,"\u03BA"],[120601,1,"\u03C6"],[120602,1,"\u03C1"],[120603,1,"\u03C0"],[120604,1,"\u03B1"],[120605,1,"\u03B2"],[120606,1,"\u03B3"],[120607,1,"\u03B4"],[120608,1,"\u03B5"],[120609,1,"\u03B6"],[120610,1,"\u03B7"],[120611,1,"\u03B8"],[120612,1,"\u03B9"],[120613,1,"\u03BA"],[120614,1,"\u03BB"],[120615,1,"\u03BC"],[120616,1,"\u03BD"],[120617,1,"\u03BE"],[120618,1,"\u03BF"],[120619,1,"\u03C0"],[120620,1,"\u03C1"],[120621,1,"\u03B8"],[120622,1,"\u03C3"],[120623,1,"\u03C4"],[120624,1,"\u03C5"],[120625,1,"\u03C6"],[120626,1,"\u03C7"],[120627,1,"\u03C8"],[120628,1,"\u03C9"],[120629,1,"\u2207"],[120630,1,"\u03B1"],[120631,1,"\u03B2"],[120632,1,"\u03B3"],[120633,1,"\u03B4"],[120634,1,"\u03B5"],[120635,1,"\u03B6"],[120636,1,"\u03B7"],[120637,1,"\u03B8"],[120638,1,"\u03B9"],[120639,1,"\u03BA"],[120640,1,"\u03BB"],[120641,1,"\u03BC"],[120642,1,"\u03BD"],[120643,1,"\u03BE"],[120644,1,"\u03BF"],[120645,1,"\u03C0"],[120646,1,"\u03C1"],[[120647,120648],1,"\u03C3"],[120649,1,"\u03C4"],[120650,1,"\u03C5"],[120651,1,"\u03C6"],[120652,1,"\u03C7"],[120653,1,"\u03C8"],[120654,1,"\u03C9"],[120655,1,"\u2202"],[120656,1,"\u03B5"],[120657,1,"\u03B8"],[120658,1,"\u03BA"],[120659,1,"\u03C6"],[120660,1,"\u03C1"],[120661,1,"\u03C0"],[120662,1,"\u03B1"],[120663,1,"\u03B2"],[120664,1,"\u03B3"],[120665,1,"\u03B4"],[120666,1,"\u03B5"],[120667,1,"\u03B6"],[120668,1,"\u03B7"],[120669,1,"\u03B8"],[120670,1,"\u03B9"],[120671,1,"\u03BA"],[120672,1,"\u03BB"],[120673,1,"\u03BC"],[120674,1,"\u03BD"],[120675,1,"\u03BE"],[120676,1,"\u03BF"],[120677,1,"\u03C0"],[120678,1,"\u03C1"],[120679,1,"\u03B8"],[120680,1,"\u03C3"],[120681,1,"\u03C4"],[120682,1,"\u03C5"],[120683,1,"\u03C6"],[120684,1,"\u03C7"],[120685,1,"\u03C8"],[120686,1,"\u03C9"],[120687,1,"\u2207"],[120688,1,"\u03B1"],[120689,1,"\u03B2"],[120690,1,"\u03B3"],[120691,1,"\u03B4"],[120692,1,"\u03B5"],[120693,1,"\u03B6"],[120694,1,"\u03B7"],[120695,1,"\u03B8"],[120696,1,"\u03B9"],[120697,1,"\u03BA"],[120698,1,"\u03BB"],[120699,1,"\u03BC"],[120700,1,"\u03BD"],[120701,1,"\u03BE"],[120702,1,"\u03BF"],[120703,1,"\u03C0"],[120704,1,"\u03C1"],[[120705,120706],1,"\u03C3"],[120707,1,"\u03C4"],[120708,1,"\u03C5"],[120709,1,"\u03C6"],[120710,1,"\u03C7"],[120711,1,"\u03C8"],[120712,1,"\u03C9"],[120713,1,"\u2202"],[120714,1,"\u03B5"],[120715,1,"\u03B8"],[120716,1,"\u03BA"],[120717,1,"\u03C6"],[120718,1,"\u03C1"],[120719,1,"\u03C0"],[120720,1,"\u03B1"],[120721,1,"\u03B2"],[120722,1,"\u03B3"],[120723,1,"\u03B4"],[120724,1,"\u03B5"],[120725,1,"\u03B6"],[120726,1,"\u03B7"],[120727,1,"\u03B8"],[120728,1,"\u03B9"],[120729,1,"\u03BA"],[120730,1,"\u03BB"],[120731,1,"\u03BC"],[120732,1,"\u03BD"],[120733,1,"\u03BE"],[120734,1,"\u03BF"],[120735,1,"\u03C0"],[120736,1,"\u03C1"],[120737,1,"\u03B8"],[120738,1,"\u03C3"],[120739,1,"\u03C4"],[120740,1,"\u03C5"],[120741,1,"\u03C6"],[120742,1,"\u03C7"],[120743,1,"\u03C8"],[120744,1,"\u03C9"],[120745,1,"\u2207"],[120746,1,"\u03B1"],[120747,1,"\u03B2"],[120748,1,"\u03B3"],[120749,1,"\u03B4"],[120750,1,"\u03B5"],[120751,1,"\u03B6"],[120752,1,"\u03B7"],[120753,1,"\u03B8"],[120754,1,"\u03B9"],[120755,1,"\u03BA"],[120756,1,"\u03BB"],[120757,1,"\u03BC"],[120758,1,"\u03BD"],[120759,1,"\u03BE"],[120760,1,"\u03BF"],[120761,1,"\u03C0"],[120762,1,"\u03C1"],[[120763,120764],1,"\u03C3"],[120765,1,"\u03C4"],[120766,1,"\u03C5"],[120767,1,"\u03C6"],[120768,1,"\u03C7"],[120769,1,"\u03C8"],[120770,1,"\u03C9"],[120771,1,"\u2202"],[120772,1,"\u03B5"],[120773,1,"\u03B8"],[120774,1,"\u03BA"],[120775,1,"\u03C6"],[120776,1,"\u03C1"],[120777,1,"\u03C0"],[[120778,120779],1,"\u03DD"],[[120780,120781],3],[120782,1,"0"],[120783,1,"1"],[120784,1,"2"],[120785,1,"3"],[120786,1,"4"],[120787,1,"5"],[120788,1,"6"],[120789,1,"7"],[120790,1,"8"],[120791,1,"9"],[120792,1,"0"],[120793,1,"1"],[120794,1,"2"],[120795,1,"3"],[120796,1,"4"],[120797,1,"5"],[120798,1,"6"],[120799,1,"7"],[120800,1,"8"],[120801,1,"9"],[120802,1,"0"],[120803,1,"1"],[120804,1,"2"],[120805,1,"3"],[120806,1,"4"],[120807,1,"5"],[120808,1,"6"],[120809,1,"7"],[120810,1,"8"],[120811,1,"9"],[120812,1,"0"],[120813,1,"1"],[120814,1,"2"],[120815,1,"3"],[120816,1,"4"],[120817,1,"5"],[120818,1,"6"],[120819,1,"7"],[120820,1,"8"],[120821,1,"9"],[120822,1,"0"],[120823,1,"1"],[120824,1,"2"],[120825,1,"3"],[120826,1,"4"],[120827,1,"5"],[120828,1,"6"],[120829,1,"7"],[120830,1,"8"],[120831,1,"9"],[[120832,121343],2],[[121344,121398],2],[[121399,121402],2],[[121403,121452],2],[[121453,121460],2],[121461,2],[[121462,121475],2],[121476,2],[[121477,121483],2],[[121484,121498],3],[[121499,121503],2],[121504,3],[[121505,121519],2],[[121520,122623],3],[[122624,122654],2],[[122655,122660],3],[[122661,122666],2],[[122667,122879],3],[[122880,122886],2],[122887,3],[[122888,122904],2],[[122905,122906],3],[[122907,122913],2],[122914,3],[[122915,122916],2],[122917,3],[[122918,122922],2],[[122923,122927],3],[122928,1,"\u0430"],[122929,1,"\u0431"],[122930,1,"\u0432"],[122931,1,"\u0433"],[122932,1,"\u0434"],[122933,1,"\u0435"],[122934,1,"\u0436"],[122935,1,"\u0437"],[122936,1,"\u0438"],[122937,1,"\u043A"],[122938,1,"\u043B"],[122939,1,"\u043C"],[122940,1,"\u043E"],[122941,1,"\u043F"],[122942,1,"\u0440"],[122943,1,"\u0441"],[122944,1,"\u0442"],[122945,1,"\u0443"],[122946,1,"\u0444"],[122947,1,"\u0445"],[122948,1,"\u0446"],[122949,1,"\u0447"],[122950,1,"\u0448"],[122951,1,"\u044B"],[122952,1,"\u044D"],[122953,1,"\u044E"],[122954,1,"\uA689"],[122955,1,"\u04D9"],[122956,1,"\u0456"],[122957,1,"\u0458"],[122958,1,"\u04E9"],[122959,1,"\u04AF"],[122960,1,"\u04CF"],[122961,1,"\u0430"],[122962,1,"\u0431"],[122963,1,"\u0432"],[122964,1,"\u0433"],[122965,1,"\u0434"],[122966,1,"\u0435"],[122967,1,"\u0436"],[122968,1,"\u0437"],[122969,1,"\u0438"],[122970,1,"\u043A"],[122971,1,"\u043B"],[122972,1,"\u043E"],[122973,1,"\u043F"],[122974,1,"\u0441"],[122975,1,"\u0443"],[122976,1,"\u0444"],[122977,1,"\u0445"],[122978,1,"\u0446"],[122979,1,"\u0447"],[122980,1,"\u0448"],[122981,1,"\u044A"],[122982,1,"\u044B"],[122983,1,"\u0491"],[122984,1,"\u0456"],[122985,1,"\u0455"],[122986,1,"\u045F"],[122987,1,"\u04AB"],[122988,1,"\uA651"],[122989,1,"\u04B1"],[[122990,123022],3],[123023,2],[[123024,123135],3],[[123136,123180],2],[[123181,123183],3],[[123184,123197],2],[[123198,123199],3],[[123200,123209],2],[[123210,123213],3],[123214,2],[123215,2],[[123216,123535],3],[[123536,123566],2],[[123567,123583],3],[[123584,123641],2],[[123642,123646],3],[123647,2],[[123648,124111],3],[[124112,124153],2],[[124154,124895],3],[[124896,124902],2],[124903,3],[[124904,124907],2],[124908,3],[[124909,124910],2],[124911,3],[[124912,124926],2],[124927,3],[[124928,125124],2],[[125125,125126],3],[[125127,125135],2],[[125136,125142],2],[[125143,125183],3],[125184,1,"\u{1E922}"],[125185,1,"\u{1E923}"],[125186,1,"\u{1E924}"],[125187,1,"\u{1E925}"],[125188,1,"\u{1E926}"],[125189,1,"\u{1E927}"],[125190,1,"\u{1E928}"],[125191,1,"\u{1E929}"],[125192,1,"\u{1E92A}"],[125193,1,"\u{1E92B}"],[125194,1,"\u{1E92C}"],[125195,1,"\u{1E92D}"],[125196,1,"\u{1E92E}"],[125197,1,"\u{1E92F}"],[125198,1,"\u{1E930}"],[125199,1,"\u{1E931}"],[125200,1,"\u{1E932}"],[125201,1,"\u{1E933}"],[125202,1,"\u{1E934}"],[125203,1,"\u{1E935}"],[125204,1,"\u{1E936}"],[125205,1,"\u{1E937}"],[125206,1,"\u{1E938}"],[125207,1,"\u{1E939}"],[125208,1,"\u{1E93A}"],[125209,1,"\u{1E93B}"],[125210,1,"\u{1E93C}"],[125211,1,"\u{1E93D}"],[125212,1,"\u{1E93E}"],[125213,1,"\u{1E93F}"],[125214,1,"\u{1E940}"],[125215,1,"\u{1E941}"],[125216,1,"\u{1E942}"],[125217,1,"\u{1E943}"],[[125218,125258],2],[125259,2],[[125260,125263],3],[[125264,125273],2],[[125274,125277],3],[[125278,125279],2],[[125280,126064],3],[[126065,126132],2],[[126133,126208],3],[[126209,126269],2],[[126270,126463],3],[126464,1,"\u0627"],[126465,1,"\u0628"],[126466,1,"\u062C"],[126467,1,"\u062F"],[126468,3],[126469,1,"\u0648"],[126470,1,"\u0632"],[126471,1,"\u062D"],[126472,1,"\u0637"],[126473,1,"\u064A"],[126474,1,"\u0643"],[126475,1,"\u0644"],[126476,1,"\u0645"],[126477,1,"\u0646"],[126478,1,"\u0633"],[126479,1,"\u0639"],[126480,1,"\u0641"],[126481,1,"\u0635"],[126482,1,"\u0642"],[126483,1,"\u0631"],[126484,1,"\u0634"],[126485,1,"\u062A"],[126486,1,"\u062B"],[126487,1,"\u062E"],[126488,1,"\u0630"],[126489,1,"\u0636"],[126490,1,"\u0638"],[126491,1,"\u063A"],[126492,1,"\u066E"],[126493,1,"\u06BA"],[126494,1,"\u06A1"],[126495,1,"\u066F"],[126496,3],[126497,1,"\u0628"],[126498,1,"\u062C"],[126499,3],[126500,1,"\u0647"],[[126501,126502],3],[126503,1,"\u062D"],[126504,3],[126505,1,"\u064A"],[126506,1,"\u0643"],[126507,1,"\u0644"],[126508,1,"\u0645"],[126509,1,"\u0646"],[126510,1,"\u0633"],[126511,1,"\u0639"],[126512,1,"\u0641"],[126513,1,"\u0635"],[126514,1,"\u0642"],[126515,3],[126516,1,"\u0634"],[126517,1,"\u062A"],[126518,1,"\u062B"],[126519,1,"\u062E"],[126520,3],[126521,1,"\u0636"],[126522,3],[126523,1,"\u063A"],[[126524,126529],3],[126530,1,"\u062C"],[[126531,126534],3],[126535,1,"\u062D"],[126536,3],[126537,1,"\u064A"],[126538,3],[126539,1,"\u0644"],[126540,3],[126541,1,"\u0646"],[126542,1,"\u0633"],[126543,1,"\u0639"],[126544,3],[126545,1,"\u0635"],[126546,1,"\u0642"],[126547,3],[126548,1,"\u0634"],[[126549,126550],3],[126551,1,"\u062E"],[126552,3],[126553,1,"\u0636"],[126554,3],[126555,1,"\u063A"],[126556,3],[126557,1,"\u06BA"],[126558,3],[126559,1,"\u066F"],[126560,3],[126561,1,"\u0628"],[126562,1,"\u062C"],[126563,3],[126564,1,"\u0647"],[[126565,126566],3],[126567,1,"\u062D"],[126568,1,"\u0637"],[126569,1,"\u064A"],[126570,1,"\u0643"],[126571,3],[126572,1,"\u0645"],[126573,1,"\u0646"],[126574,1,"\u0633"],[126575,1,"\u0639"],[126576,1,"\u0641"],[126577,1,"\u0635"],[126578,1,"\u0642"],[126579,3],[126580,1,"\u0634"],[126581,1,"\u062A"],[126582,1,"\u062B"],[126583,1,"\u062E"],[126584,3],[126585,1,"\u0636"],[126586,1,"\u0638"],[126587,1,"\u063A"],[126588,1,"\u066E"],[126589,3],[126590,1,"\u06A1"],[126591,3],[126592,1,"\u0627"],[126593,1,"\u0628"],[126594,1,"\u062C"],[126595,1,"\u062F"],[126596,1,"\u0647"],[126597,1,"\u0648"],[126598,1,"\u0632"],[126599,1,"\u062D"],[126600,1,"\u0637"],[126601,1,"\u064A"],[126602,3],[126603,1,"\u0644"],[126604,1,"\u0645"],[126605,1,"\u0646"],[126606,1,"\u0633"],[126607,1,"\u0639"],[126608,1,"\u0641"],[126609,1,"\u0635"],[126610,1,"\u0642"],[126611,1,"\u0631"],[126612,1,"\u0634"],[126613,1,"\u062A"],[126614,1,"\u062B"],[126615,1,"\u062E"],[126616,1,"\u0630"],[126617,1,"\u0636"],[126618,1,"\u0638"],[126619,1,"\u063A"],[[126620,126624],3],[126625,1,"\u0628"],[126626,1,"\u062C"],[126627,1,"\u062F"],[126628,3],[126629,1,"\u0648"],[126630,1,"\u0632"],[126631,1,"\u062D"],[126632,1,"\u0637"],[126633,1,"\u064A"],[126634,3],[126635,1,"\u0644"],[126636,1,"\u0645"],[126637,1,"\u0646"],[126638,1,"\u0633"],[126639,1,"\u0639"],[126640,1,"\u0641"],[126641,1,"\u0635"],[126642,1,"\u0642"],[126643,1,"\u0631"],[126644,1,"\u0634"],[126645,1,"\u062A"],[126646,1,"\u062B"],[126647,1,"\u062E"],[126648,1,"\u0630"],[126649,1,"\u0636"],[126650,1,"\u0638"],[126651,1,"\u063A"],[[126652,126703],3],[[126704,126705],2],[[126706,126975],3],[[126976,127019],2],[[127020,127023],3],[[127024,127123],2],[[127124,127135],3],[[127136,127150],2],[[127151,127152],3],[[127153,127166],2],[127167,2],[127168,3],[[127169,127183],2],[127184,3],[[127185,127199],2],[[127200,127221],2],[[127222,127231],3],[127232,3],[127233,5,"0,"],[127234,5,"1,"],[127235,5,"2,"],[127236,5,"3,"],[127237,5,"4,"],[127238,5,"5,"],[127239,5,"6,"],[127240,5,"7,"],[127241,5,"8,"],[127242,5,"9,"],[[127243,127244],2],[[127245,127247],2],[127248,5,"(a)"],[127249,5,"(b)"],[127250,5,"(c)"],[127251,5,"(d)"],[127252,5,"(e)"],[127253,5,"(f)"],[127254,5,"(g)"],[127255,5,"(h)"],[127256,5,"(i)"],[127257,5,"(j)"],[127258,5,"(k)"],[127259,5,"(l)"],[127260,5,"(m)"],[127261,5,"(n)"],[127262,5,"(o)"],[127263,5,"(p)"],[127264,5,"(q)"],[127265,5,"(r)"],[127266,5,"(s)"],[127267,5,"(t)"],[127268,5,"(u)"],[127269,5,"(v)"],[127270,5,"(w)"],[127271,5,"(x)"],[127272,5,"(y)"],[127273,5,"(z)"],[127274,1,"\u3014s\u3015"],[127275,1,"c"],[127276,1,"r"],[127277,1,"cd"],[127278,1,"wz"],[127279,2],[127280,1,"a"],[127281,1,"b"],[127282,1,"c"],[127283,1,"d"],[127284,1,"e"],[127285,1,"f"],[127286,1,"g"],[127287,1,"h"],[127288,1,"i"],[127289,1,"j"],[127290,1,"k"],[127291,1,"l"],[127292,1,"m"],[127293,1,"n"],[127294,1,"o"],[127295,1,"p"],[127296,1,"q"],[127297,1,"r"],[127298,1,"s"],[127299,1,"t"],[127300,1,"u"],[127301,1,"v"],[127302,1,"w"],[127303,1,"x"],[127304,1,"y"],[127305,1,"z"],[127306,1,"hv"],[127307,1,"mv"],[127308,1,"sd"],[127309,1,"ss"],[127310,1,"ppv"],[127311,1,"wc"],[[127312,127318],2],[127319,2],[[127320,127326],2],[127327,2],[[127328,127337],2],[127338,1,"mc"],[127339,1,"md"],[127340,1,"mr"],[[127341,127343],2],[[127344,127352],2],[127353,2],[127354,2],[[127355,127356],2],[[127357,127358],2],[127359,2],[[127360,127369],2],[[127370,127373],2],[[127374,127375],2],[127376,1,"dj"],[[127377,127386],2],[[127387,127404],2],[127405,2],[[127406,127461],3],[[127462,127487],2],[127488,1,"\u307B\u304B"],[127489,1,"\u30B3\u30B3"],[127490,1,"\u30B5"],[[127491,127503],3],[127504,1,"\u624B"],[127505,1,"\u5B57"],[127506,1,"\u53CC"],[127507,1,"\u30C7"],[127508,1,"\u4E8C"],[127509,1,"\u591A"],[127510,1,"\u89E3"],[127511,1,"\u5929"],[127512,1,"\u4EA4"],[127513,1,"\u6620"],[127514,1,"\u7121"],[127515,1,"\u6599"],[127516,1,"\u524D"],[127517,1,"\u5F8C"],[127518,1,"\u518D"],[127519,1,"\u65B0"],[127520,1,"\u521D"],[127521,1,"\u7D42"],[127522,1,"\u751F"],[127523,1,"\u8CA9"],[127524,1,"\u58F0"],[127525,1,"\u5439"],[127526,1,"\u6F14"],[127527,1,"\u6295"],[127528,1,"\u6355"],[127529,1,"\u4E00"],[127530,1,"\u4E09"],[127531,1,"\u904A"],[127532,1,"\u5DE6"],[127533,1,"\u4E2D"],[127534,1,"\u53F3"],[127535,1,"\u6307"],[127536,1,"\u8D70"],[127537,1,"\u6253"],[127538,1,"\u7981"],[127539,1,"\u7A7A"],[127540,1,"\u5408"],[127541,1,"\u6E80"],[127542,1,"\u6709"],[127543,1,"\u6708"],[127544,1,"\u7533"],[127545,1,"\u5272"],[127546,1,"\u55B6"],[127547,1,"\u914D"],[[127548,127551],3],[127552,1,"\u3014\u672C\u3015"],[127553,1,"\u3014\u4E09\u3015"],[127554,1,"\u3014\u4E8C\u3015"],[127555,1,"\u3014\u5B89\u3015"],[127556,1,"\u3014\u70B9\u3015"],[127557,1,"\u3014\u6253\u3015"],[127558,1,"\u3014\u76D7\u3015"],[127559,1,"\u3014\u52DD\u3015"],[127560,1,"\u3014\u6557\u3015"],[[127561,127567],3],[127568,1,"\u5F97"],[127569,1,"\u53EF"],[[127570,127583],3],[[127584,127589],2],[[127590,127743],3],[[127744,127776],2],[[127777,127788],2],[[127789,127791],2],[[127792,127797],2],[127798,2],[[127799,127868],2],[127869,2],[[127870,127871],2],[[127872,127891],2],[[127892,127903],2],[[127904,127940],2],[127941,2],[[127942,127946],2],[[127947,127950],2],[[127951,127955],2],[[127956,127967],2],[[127968,127984],2],[[127985,127991],2],[[127992,127999],2],[[128e3,128062],2],[128063,2],[128064,2],[128065,2],[[128066,128247],2],[128248,2],[[128249,128252],2],[[128253,128254],2],[128255,2],[[128256,128317],2],[[128318,128319],2],[[128320,128323],2],[[128324,128330],2],[[128331,128335],2],[[128336,128359],2],[[128360,128377],2],[128378,2],[[128379,128419],2],[128420,2],[[128421,128506],2],[[128507,128511],2],[128512,2],[[128513,128528],2],[128529,2],[[128530,128532],2],[128533,2],[128534,2],[128535,2],[128536,2],[128537,2],[128538,2],[128539,2],[[128540,128542],2],[128543,2],[[128544,128549],2],[[128550,128551],2],[[128552,128555],2],[128556,2],[128557,2],[[128558,128559],2],[[128560,128563],2],[128564,2],[[128565,128576],2],[[128577,128578],2],[[128579,128580],2],[[128581,128591],2],[[128592,128639],2],[[128640,128709],2],[[128710,128719],2],[128720,2],[[128721,128722],2],[[128723,128724],2],[128725,2],[[128726,128727],2],[[128728,128731],3],[128732,2],[[128733,128735],2],[[128736,128748],2],[[128749,128751],3],[[128752,128755],2],[[128756,128758],2],[[128759,128760],2],[128761,2],[128762,2],[[128763,128764],2],[[128765,128767],3],[[128768,128883],2],[[128884,128886],2],[[128887,128890],3],[[128891,128895],2],[[128896,128980],2],[[128981,128984],2],[128985,2],[[128986,128991],3],[[128992,129003],2],[[129004,129007],3],[129008,2],[[129009,129023],3],[[129024,129035],2],[[129036,129039],3],[[129040,129095],2],[[129096,129103],3],[[129104,129113],2],[[129114,129119],3],[[129120,129159],2],[[129160,129167],3],[[129168,129197],2],[[129198,129199],3],[[129200,129201],2],[[129202,129279],3],[[129280,129291],2],[129292,2],[[129293,129295],2],[[129296,129304],2],[[129305,129310],2],[129311,2],[[129312,129319],2],[[129320,129327],2],[129328,2],[[129329,129330],2],[[129331,129342],2],[129343,2],[[129344,129355],2],[129356,2],[[129357,129359],2],[[129360,129374],2],[[129375,129387],2],[[129388,129392],2],[129393,2],[129394,2],[[129395,129398],2],[[129399,129400],2],[129401,2],[129402,2],[129403,2],[[129404,129407],2],[[129408,129412],2],[[129413,129425],2],[[129426,129431],2],[[129432,129442],2],[[129443,129444],2],[[129445,129450],2],[[129451,129453],2],[[129454,129455],2],[[129456,129465],2],[[129466,129471],2],[129472,2],[[129473,129474],2],[[129475,129482],2],[129483,2],[129484,2],[[129485,129487],2],[[129488,129510],2],[[129511,129535],2],[[129536,129619],2],[[129620,129631],3],[[129632,129645],2],[[129646,129647],3],[[129648,129651],2],[129652,2],[[129653,129655],2],[[129656,129658],2],[[129659,129660],2],[[129661,129663],3],[[129664,129666],2],[[129667,129670],2],[[129671,129672],2],[[129673,129679],3],[[129680,129685],2],[[129686,129704],2],[[129705,129708],2],[[129709,129711],2],[[129712,129718],2],[[129719,129722],2],[[129723,129725],2],[129726,3],[129727,2],[[129728,129730],2],[[129731,129733],2],[[129734,129741],3],[[129742,129743],2],[[129744,129750],2],[[129751,129753],2],[[129754,129755],2],[[129756,129759],3],[[129760,129767],2],[129768,2],[[129769,129775],3],[[129776,129782],2],[[129783,129784],2],[[129785,129791],3],[[129792,129938],2],[129939,3],[[129940,129994],2],[[129995,130031],3],[130032,1,"0"],[130033,1,"1"],[130034,1,"2"],[130035,1,"3"],[130036,1,"4"],[130037,1,"5"],[130038,1,"6"],[130039,1,"7"],[130040,1,"8"],[130041,1,"9"],[[130042,131069],3],[[131070,131071],3],[[131072,173782],2],[[173783,173789],2],[[173790,173791],2],[[173792,173823],3],[[173824,177972],2],[[177973,177976],2],[177977,2],[[177978,177983],3],[[177984,178205],2],[[178206,178207],3],[[178208,183969],2],[[183970,183983],3],[[183984,191456],2],[[191457,194559],3],[194560,1,"\u4E3D"],[194561,1,"\u4E38"],[194562,1,"\u4E41"],[194563,1,"\u{20122}"],[194564,1,"\u4F60"],[194565,1,"\u4FAE"],[194566,1,"\u4FBB"],[194567,1,"\u5002"],[194568,1,"\u507A"],[194569,1,"\u5099"],[194570,1,"\u50E7"],[194571,1,"\u50CF"],[194572,1,"\u349E"],[194573,1,"\u{2063A}"],[194574,1,"\u514D"],[194575,1,"\u5154"],[194576,1,"\u5164"],[194577,1,"\u5177"],[194578,1,"\u{2051C}"],[194579,1,"\u34B9"],[194580,1,"\u5167"],[194581,1,"\u518D"],[194582,1,"\u{2054B}"],[194583,1,"\u5197"],[194584,1,"\u51A4"],[194585,1,"\u4ECC"],[194586,1,"\u51AC"],[194587,1,"\u51B5"],[194588,1,"\u{291DF}"],[194589,1,"\u51F5"],[194590,1,"\u5203"],[194591,1,"\u34DF"],[194592,1,"\u523B"],[194593,1,"\u5246"],[194594,1,"\u5272"],[194595,1,"\u5277"],[194596,1,"\u3515"],[194597,1,"\u52C7"],[194598,1,"\u52C9"],[194599,1,"\u52E4"],[194600,1,"\u52FA"],[194601,1,"\u5305"],[194602,1,"\u5306"],[194603,1,"\u5317"],[194604,1,"\u5349"],[194605,1,"\u5351"],[194606,1,"\u535A"],[194607,1,"\u5373"],[194608,1,"\u537D"],[[194609,194611],1,"\u537F"],[194612,1,"\u{20A2C}"],[194613,1,"\u7070"],[194614,1,"\u53CA"],[194615,1,"\u53DF"],[194616,1,"\u{20B63}"],[194617,1,"\u53EB"],[194618,1,"\u53F1"],[194619,1,"\u5406"],[194620,1,"\u549E"],[194621,1,"\u5438"],[194622,1,"\u5448"],[194623,1,"\u5468"],[194624,1,"\u54A2"],[194625,1,"\u54F6"],[194626,1,"\u5510"],[194627,1,"\u5553"],[194628,1,"\u5563"],[[194629,194630],1,"\u5584"],[194631,1,"\u5599"],[194632,1,"\u55AB"],[194633,1,"\u55B3"],[194634,1,"\u55C2"],[194635,1,"\u5716"],[194636,1,"\u5606"],[194637,1,"\u5717"],[194638,1,"\u5651"],[194639,1,"\u5674"],[194640,1,"\u5207"],[194641,1,"\u58EE"],[194642,1,"\u57CE"],[194643,1,"\u57F4"],[194644,1,"\u580D"],[194645,1,"\u578B"],[194646,1,"\u5832"],[194647,1,"\u5831"],[194648,1,"\u58AC"],[194649,1,"\u{214E4}"],[194650,1,"\u58F2"],[194651,1,"\u58F7"],[194652,1,"\u5906"],[194653,1,"\u591A"],[194654,1,"\u5922"],[194655,1,"\u5962"],[194656,1,"\u{216A8}"],[194657,1,"\u{216EA}"],[194658,1,"\u59EC"],[194659,1,"\u5A1B"],[194660,1,"\u5A27"],[194661,1,"\u59D8"],[194662,1,"\u5A66"],[194663,1,"\u36EE"],[194664,3],[194665,1,"\u5B08"],[[194666,194667],1,"\u5B3E"],[194668,1,"\u{219C8}"],[194669,1,"\u5BC3"],[194670,1,"\u5BD8"],[194671,1,"\u5BE7"],[194672,1,"\u5BF3"],[194673,1,"\u{21B18}"],[194674,1,"\u5BFF"],[194675,1,"\u5C06"],[194676,3],[194677,1,"\u5C22"],[194678,1,"\u3781"],[194679,1,"\u5C60"],[194680,1,"\u5C6E"],[194681,1,"\u5CC0"],[194682,1,"\u5C8D"],[194683,1,"\u{21DE4}"],[194684,1,"\u5D43"],[194685,1,"\u{21DE6}"],[194686,1,"\u5D6E"],[194687,1,"\u5D6B"],[194688,1,"\u5D7C"],[194689,1,"\u5DE1"],[194690,1,"\u5DE2"],[194691,1,"\u382F"],[194692,1,"\u5DFD"],[194693,1,"\u5E28"],[194694,1,"\u5E3D"],[194695,1,"\u5E69"],[194696,1,"\u3862"],[194697,1,"\u{22183}"],[194698,1,"\u387C"],[194699,1,"\u5EB0"],[194700,1,"\u5EB3"],[194701,1,"\u5EB6"],[194702,1,"\u5ECA"],[194703,1,"\u{2A392}"],[194704,1,"\u5EFE"],[[194705,194706],1,"\u{22331}"],[194707,1,"\u8201"],[[194708,194709],1,"\u5F22"],[194710,1,"\u38C7"],[194711,1,"\u{232B8}"],[194712,1,"\u{261DA}"],[194713,1,"\u5F62"],[194714,1,"\u5F6B"],[194715,1,"\u38E3"],[194716,1,"\u5F9A"],[194717,1,"\u5FCD"],[194718,1,"\u5FD7"],[194719,1,"\u5FF9"],[194720,1,"\u6081"],[194721,1,"\u393A"],[194722,1,"\u391C"],[194723,1,"\u6094"],[194724,1,"\u{226D4}"],[194725,1,"\u60C7"],[194726,1,"\u6148"],[194727,1,"\u614C"],[194728,1,"\u614E"],[194729,1,"\u614C"],[194730,1,"\u617A"],[194731,1,"\u618E"],[194732,1,"\u61B2"],[194733,1,"\u61A4"],[194734,1,"\u61AF"],[194735,1,"\u61DE"],[194736,1,"\u61F2"],[194737,1,"\u61F6"],[194738,1,"\u6210"],[194739,1,"\u621B"],[194740,1,"\u625D"],[194741,1,"\u62B1"],[194742,1,"\u62D4"],[194743,1,"\u6350"],[194744,1,"\u{22B0C}"],[194745,1,"\u633D"],[194746,1,"\u62FC"],[194747,1,"\u6368"],[194748,1,"\u6383"],[194749,1,"\u63E4"],[194750,1,"\u{22BF1}"],[194751,1,"\u6422"],[194752,1,"\u63C5"],[194753,1,"\u63A9"],[194754,1,"\u3A2E"],[194755,1,"\u6469"],[194756,1,"\u647E"],[194757,1,"\u649D"],[194758,1,"\u6477"],[194759,1,"\u3A6C"],[194760,1,"\u654F"],[194761,1,"\u656C"],[194762,1,"\u{2300A}"],[194763,1,"\u65E3"],[194764,1,"\u66F8"],[194765,1,"\u6649"],[194766,1,"\u3B19"],[194767,1,"\u6691"],[194768,1,"\u3B08"],[194769,1,"\u3AE4"],[194770,1,"\u5192"],[194771,1,"\u5195"],[194772,1,"\u6700"],[194773,1,"\u669C"],[194774,1,"\u80AD"],[194775,1,"\u43D9"],[194776,1,"\u6717"],[194777,1,"\u671B"],[194778,1,"\u6721"],[194779,1,"\u675E"],[194780,1,"\u6753"],[194781,1,"\u{233C3}"],[194782,1,"\u3B49"],[194783,1,"\u67FA"],[194784,1,"\u6785"],[194785,1,"\u6852"],[194786,1,"\u6885"],[194787,1,"\u{2346D}"],[194788,1,"\u688E"],[194789,1,"\u681F"],[194790,1,"\u6914"],[194791,1,"\u3B9D"],[194792,1,"\u6942"],[194793,1,"\u69A3"],[194794,1,"\u69EA"],[194795,1,"\u6AA8"],[194796,1,"\u{236A3}"],[194797,1,"\u6ADB"],[194798,1,"\u3C18"],[194799,1,"\u6B21"],[194800,1,"\u{238A7}"],[194801,1,"\u6B54"],[194802,1,"\u3C4E"],[194803,1,"\u6B72"],[194804,1,"\u6B9F"],[194805,1,"\u6BBA"],[194806,1,"\u6BBB"],[194807,1,"\u{23A8D}"],[194808,1,"\u{21D0B}"],[194809,1,"\u{23AFA}"],[194810,1,"\u6C4E"],[194811,1,"\u{23CBC}"],[194812,1,"\u6CBF"],[194813,1,"\u6CCD"],[194814,1,"\u6C67"],[194815,1,"\u6D16"],[194816,1,"\u6D3E"],[194817,1,"\u6D77"],[194818,1,"\u6D41"],[194819,1,"\u6D69"],[194820,1,"\u6D78"],[194821,1,"\u6D85"],[194822,1,"\u{23D1E}"],[194823,1,"\u6D34"],[194824,1,"\u6E2F"],[194825,1,"\u6E6E"],[194826,1,"\u3D33"],[194827,1,"\u6ECB"],[194828,1,"\u6EC7"],[194829,1,"\u{23ED1}"],[194830,1,"\u6DF9"],[194831,1,"\u6F6E"],[194832,1,"\u{23F5E}"],[194833,1,"\u{23F8E}"],[194834,1,"\u6FC6"],[194835,1,"\u7039"],[194836,1,"\u701E"],[194837,1,"\u701B"],[194838,1,"\u3D96"],[194839,1,"\u704A"],[194840,1,"\u707D"],[194841,1,"\u7077"],[194842,1,"\u70AD"],[194843,1,"\u{20525}"],[194844,1,"\u7145"],[194845,1,"\u{24263}"],[194846,1,"\u719C"],[194847,3],[194848,1,"\u7228"],[194849,1,"\u7235"],[194850,1,"\u7250"],[194851,1,"\u{24608}"],[194852,1,"\u7280"],[194853,1,"\u7295"],[194854,1,"\u{24735}"],[194855,1,"\u{24814}"],[194856,1,"\u737A"],[194857,1,"\u738B"],[194858,1,"\u3EAC"],[194859,1,"\u73A5"],[[194860,194861],1,"\u3EB8"],[194862,1,"\u7447"],[194863,1,"\u745C"],[194864,1,"\u7471"],[194865,1,"\u7485"],[194866,1,"\u74CA"],[194867,1,"\u3F1B"],[194868,1,"\u7524"],[194869,1,"\u{24C36}"],[194870,1,"\u753E"],[194871,1,"\u{24C92}"],[194872,1,"\u7570"],[194873,1,"\u{2219F}"],[194874,1,"\u7610"],[194875,1,"\u{24FA1}"],[194876,1,"\u{24FB8}"],[194877,1,"\u{25044}"],[194878,1,"\u3FFC"],[194879,1,"\u4008"],[194880,1,"\u76F4"],[194881,1,"\u{250F3}"],[194882,1,"\u{250F2}"],[194883,1,"\u{25119}"],[194884,1,"\u{25133}"],[194885,1,"\u771E"],[[194886,194887],1,"\u771F"],[194888,1,"\u774A"],[194889,1,"\u4039"],[194890,1,"\u778B"],[194891,1,"\u4046"],[194892,1,"\u4096"],[194893,1,"\u{2541D}"],[194894,1,"\u784E"],[194895,1,"\u788C"],[194896,1,"\u78CC"],[194897,1,"\u40E3"],[194898,1,"\u{25626}"],[194899,1,"\u7956"],[194900,1,"\u{2569A}"],[194901,1,"\u{256C5}"],[194902,1,"\u798F"],[194903,1,"\u79EB"],[194904,1,"\u412F"],[194905,1,"\u7A40"],[194906,1,"\u7A4A"],[194907,1,"\u7A4F"],[194908,1,"\u{2597C}"],[[194909,194910],1,"\u{25AA7}"],[194911,3],[194912,1,"\u4202"],[194913,1,"\u{25BAB}"],[194914,1,"\u7BC6"],[194915,1,"\u7BC9"],[194916,1,"\u4227"],[194917,1,"\u{25C80}"],[194918,1,"\u7CD2"],[194919,1,"\u42A0"],[194920,1,"\u7CE8"],[194921,1,"\u7CE3"],[194922,1,"\u7D00"],[194923,1,"\u{25F86}"],[194924,1,"\u7D63"],[194925,1,"\u4301"],[194926,1,"\u7DC7"],[194927,1,"\u7E02"],[194928,1,"\u7E45"],[194929,1,"\u4334"],[194930,1,"\u{26228}"],[194931,1,"\u{26247}"],[194932,1,"\u4359"],[194933,1,"\u{262D9}"],[194934,1,"\u7F7A"],[194935,1,"\u{2633E}"],[194936,1,"\u7F95"],[194937,1,"\u7FFA"],[194938,1,"\u8005"],[194939,1,"\u{264DA}"],[194940,1,"\u{26523}"],[194941,1,"\u8060"],[194942,1,"\u{265A8}"],[194943,1,"\u8070"],[194944,1,"\u{2335F}"],[194945,1,"\u43D5"],[194946,1,"\u80B2"],[194947,1,"\u8103"],[194948,1,"\u440B"],[194949,1,"\u813E"],[194950,1,"\u5AB5"],[194951,1,"\u{267A7}"],[194952,1,"\u{267B5}"],[194953,1,"\u{23393}"],[194954,1,"\u{2339C}"],[194955,1,"\u8201"],[194956,1,"\u8204"],[194957,1,"\u8F9E"],[194958,1,"\u446B"],[194959,1,"\u8291"],[194960,1,"\u828B"],[194961,1,"\u829D"],[194962,1,"\u52B3"],[194963,1,"\u82B1"],[194964,1,"\u82B3"],[194965,1,"\u82BD"],[194966,1,"\u82E6"],[194967,1,"\u{26B3C}"],[194968,1,"\u82E5"],[194969,1,"\u831D"],[194970,1,"\u8363"],[194971,1,"\u83AD"],[194972,1,"\u8323"],[194973,1,"\u83BD"],[194974,1,"\u83E7"],[194975,1,"\u8457"],[194976,1,"\u8353"],[194977,1,"\u83CA"],[194978,1,"\u83CC"],[194979,1,"\u83DC"],[194980,1,"\u{26C36}"],[194981,1,"\u{26D6B}"],[194982,1,"\u{26CD5}"],[194983,1,"\u452B"],[194984,1,"\u84F1"],[194985,1,"\u84F3"],[194986,1,"\u8516"],[194987,1,"\u{273CA}"],[194988,1,"\u8564"],[194989,1,"\u{26F2C}"],[194990,1,"\u455D"],[194991,1,"\u4561"],[194992,1,"\u{26FB1}"],[194993,1,"\u{270D2}"],[194994,1,"\u456B"],[194995,1,"\u8650"],[194996,1,"\u865C"],[194997,1,"\u8667"],[194998,1,"\u8669"],[194999,1,"\u86A9"],[195e3,1,"\u8688"],[195001,1,"\u870E"],[195002,1,"\u86E2"],[195003,1,"\u8779"],[195004,1,"\u8728"],[195005,1,"\u876B"],[195006,1,"\u8786"],[195007,3],[195008,1,"\u87E1"],[195009,1,"\u8801"],[195010,1,"\u45F9"],[195011,1,"\u8860"],[195012,1,"\u8863"],[195013,1,"\u{27667}"],[195014,1,"\u88D7"],[195015,1,"\u88DE"],[195016,1,"\u4635"],[195017,1,"\u88FA"],[195018,1,"\u34BB"],[195019,1,"\u{278AE}"],[195020,1,"\u{27966}"],[195021,1,"\u46BE"],[195022,1,"\u46C7"],[195023,1,"\u8AA0"],[195024,1,"\u8AED"],[195025,1,"\u8B8A"],[195026,1,"\u8C55"],[195027,1,"\u{27CA8}"],[195028,1,"\u8CAB"],[195029,1,"\u8CC1"],[195030,1,"\u8D1B"],[195031,1,"\u8D77"],[195032,1,"\u{27F2F}"],[195033,1,"\u{20804}"],[195034,1,"\u8DCB"],[195035,1,"\u8DBC"],[195036,1,"\u8DF0"],[195037,1,"\u{208DE}"],[195038,1,"\u8ED4"],[195039,1,"\u8F38"],[195040,1,"\u{285D2}"],[195041,1,"\u{285ED}"],[195042,1,"\u9094"],[195043,1,"\u90F1"],[195044,1,"\u9111"],[195045,1,"\u{2872E}"],[195046,1,"\u911B"],[195047,1,"\u9238"],[195048,1,"\u92D7"],[195049,1,"\u92D8"],[195050,1,"\u927C"],[195051,1,"\u93F9"],[195052,1,"\u9415"],[195053,1,"\u{28BFA}"],[195054,1,"\u958B"],[195055,1,"\u4995"],[195056,1,"\u95B7"],[195057,1,"\u{28D77}"],[195058,1,"\u49E6"],[195059,1,"\u96C3"],[195060,1,"\u5DB2"],[195061,1,"\u9723"],[195062,1,"\u{29145}"],[195063,1,"\u{2921A}"],[195064,1,"\u4A6E"],[195065,1,"\u4A76"],[195066,1,"\u97E0"],[195067,1,"\u{2940A}"],[195068,1,"\u4AB2"],[195069,1,"\u{29496}"],[[195070,195071],1,"\u980B"],[195072,1,"\u9829"],[195073,1,"\u{295B6}"],[195074,1,"\u98E2"],[195075,1,"\u4B33"],[195076,1,"\u9929"],[195077,1,"\u99A7"],[195078,1,"\u99C2"],[195079,1,"\u99FE"],[195080,1,"\u4BCE"],[195081,1,"\u{29B30}"],[195082,1,"\u9B12"],[195083,1,"\u9C40"],[195084,1,"\u9CFD"],[195085,1,"\u4CCE"],[195086,1,"\u4CED"],[195087,1,"\u9D67"],[195088,1,"\u{2A0CE}"],[195089,1,"\u4CF8"],[195090,1,"\u{2A105}"],[195091,1,"\u{2A20E}"],[195092,1,"\u{2A291}"],[195093,1,"\u9EBB"],[195094,1,"\u4D56"],[195095,1,"\u9EF9"],[195096,1,"\u9EFE"],[195097,1,"\u9F05"],[195098,1,"\u9F0F"],[195099,1,"\u9F16"],[195100,1,"\u9F3B"],[195101,1,"\u{2A600}"],[[195102,196605],3],[[196606,196607],3],[[196608,201546],2],[[201547,201551],3],[[201552,205743],2],[[205744,262141],3],[[262142,262143],3],[[262144,327677],3],[[327678,327679],3],[[327680,393213],3],[[393214,393215],3],[[393216,458749],3],[[458750,458751],3],[[458752,524285],3],[[524286,524287],3],[[524288,589821],3],[[589822,589823],3],[[589824,655357],3],[[655358,655359],3],[[655360,720893],3],[[720894,720895],3],[[720896,786429],3],[[786430,786431],3],[[786432,851965],3],[[851966,851967],3],[[851968,917501],3],[[917502,917503],3],[917504,3],[917505,3],[[917506,917535],3],[[917536,917631],3],[[917632,917759],3],[[917760,917999],7],[[918e3,983037],3],[[983038,983039],3],[[983040,1048573],3],[[1048574,1048575],3],[[1048576,1114109],3],[[1114110,1114111],3]]});var I5=g((b2e,B5)=>{"use strict";d();B5.exports.STATUS_MAPPING={mapped:1,valid:2,disallowed:3,disallowed_STD3_valid:4,disallowed_STD3_mapped:5,deviation:6,ignored:7}});var v5=g((D2e,R5)=>{"use strict";d();var e6=b5(),As=D5(),P5=M5(),{STATUS_MAPPING:un}=I5();function AQ(t){return/[^\x00-\x7F]/u.test(t)}function N5(t,{useSTD3ASCIIRules:e}){let r=0,n=P5.length-1;for(;r<=n;){let s=Math.floor((r+n)/2),i=P5[s],o=Array.isArray(i[0])?i[0][0]:i[0],u=Array.isArray(i[0])?i[0][1]:i[0];if(o<=t&&u>=t)return e&&(i[1]===un.disallowed_STD3_valid||i[1]===un.disallowed_STD3_mapped)?[un.disallowed,...i.slice(2)]:i[1]===un.disallowed_STD3_valid?[un.valid,...i.slice(2)]:i[1]===un.disallowed_STD3_mapped?[un.mapped,...i.slice(2)]:i.slice(1);o>t?n=s-1:r=s+1}return null}function SQ(t,{useSTD3ASCIIRules:e,processingOption:r}){let n=!1,s="";for(let i of t){let[o,u]=N5(i.codePointAt(0),{useSTD3ASCIIRules:e});switch(o){case un.disallowed:n=!0,s+=i;break;case un.ignored:break;case un.mapped:s+=u;break;case un.deviation:r==="transitional"?s+=u:s+=i;break;case un.valid:s+=i;break}}return{string:s,error:n}}function OQ(t,{checkHyphens:e,checkBidi:r,checkJoiners:n,processingOption:s,useSTD3ASCIIRules:i}){if(t.normalize("NFC")!==t)return!1;let o=Array.from(t);if(e&&(o[2]==="-"&&o[3]==="-"||t.startsWith("-")||t.endsWith("-"))||t.includes(".")||o.length>0&&As.combiningMarks.test(o[0]))return!1;for(let u of o){let[a]=N5(u.codePointAt(0),{useSTD3ASCIIRules:i});if(s==="transitional"&&a!==un.valid||s==="nontransitional"&&a!==un.valid&&a!==un.deviation)return!1}if(n){let u=0;for(let[a,c]of o.entries())if(c==="\u200C"||c==="\u200D"){if(a>0){if(As.combiningClassVirama.test(o[a-1]))continue;if(c==="\u200C"){let l=o.indexOf("\u200C",a+1),h=l<0?o.slice(u):o.slice(u,l);if(As.validZWNJ.test(h.join(""))){u=a+1;continue}}}return!1}}if(r&&o.length>0){let u;if(As.bidiS1LTR.test(o[0]))u=!1;else if(As.bidiS1RTL.test(o[0]))u=!0;else return!1;if(u){if(!As.bidiS2.test(t)||!As.bidiS3.test(t)||As.bidiS4EN.test(t)&&As.bidiS4AN.test(t))return!1}else if(!As.bidiS5.test(t)||!As.bidiS6.test(t))return!1}return!0}function wQ(t){let e=t.map(r=>{if(r.startsWith("xn--"))try{return e6.decode(r.substring(4))}catch{return""}return r}).join(".");return As.bidiDomain.test(e)}function F5(t,e){let{processingOption:r}=e,{string:n,error:s}=SQ(t,e);n=n.normalize("NFC");let i=n.split("."),o=wQ(i);for(let[u,a]of i.entries()){let c=a,l=r;if(c.startsWith("xn--")){try{c=e6.decode(c.substring(4)),i[u]=c}catch{s=!0;continue}l="nontransitional"}if(s)continue;OQ(c,{...e,processingOption:l,checkBidi:e.checkBidi&&o})||(s=!0)}return{string:i.join("."),error:s}}function CQ(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:s=!1,processingOption:i="nontransitional",verifyDNSLength:o=!1}={}){if(i!=="transitional"&&i!=="nontransitional")throw new RangeError("processingOption must be either transitional or nontransitional");let u=F5(t,{processingOption:i,checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:s}),a=u.string.split(".");if(a=a.map(c=>{if(AQ(c))try{return`xn--${e6.encode(c)}`}catch{u.error=!0}return c}),o){let c=a.join(".").length;(c>253||c===0)&&(u.error=!0);for(let l=0;l<a.length;++l)if(a[l].length>63||a[l].length===0){u.error=!0;break}}return u.error?null:a.join(".")}function bQ(t,{checkHyphens:e=!1,checkBidi:r=!1,checkJoiners:n=!1,useSTD3ASCIIRules:s=!1,processingOption:i="nontransitional"}={}){let o=F5(t,{processingOption:i,checkHyphens:e,checkBidi:r,checkJoiners:n,useSTD3ASCIIRules:s});return{domain:o.string,error:o.error}}R5.exports={toASCII:CQ,toUnicode:bQ}});var r6=g((B2e,x5)=>{"use strict";d();function t6(t){return t>=48&&t<=57}function $5(t){return t>=65&&t<=90||t>=97&&t<=122}function TQ(t){return $5(t)||t6(t)}function DQ(t){return t6(t)||t>=65&&t<=70||t>=97&&t<=102}x5.exports={isASCIIDigit:t6,isASCIIAlpha:$5,isASCIIAlphanumeric:TQ,isASCIIHex:DQ}});var Qp=g((P2e,k5)=>{"use strict";d();var MQ=new TextEncoder,BQ=new TextDecoder("utf-8",{ignoreBOM:!0});function IQ(t){return MQ.encode(t)}function PQ(t){return BQ.decode(t)}k5.exports={utf8Encode:IQ,utf8DecodeWithoutBOM:PQ}});var Jp=g((F2e,W5)=>{"use strict";d();var{isASCIIHex:q5}=r6(),{utf8Encode:L5}=Qp();function je(t){return t.codePointAt(0)}function NQ(t){let e=t.toString(16).toUpperCase();return e.length===1&&(e=`0${e}`),`%${e}`}function j5(t){let e=new Uint8Array(t.byteLength),r=0;for(let n=0;n<t.byteLength;++n){let s=t[n];if(s!==37)e[r++]=s;else if(s===37&&(!q5(t[n+1])||!q5(t[n+2])))e[r++]=s;else{let i=parseInt(String.fromCodePoint(t[n+1],t[n+2]),16);e[r++]=i,n+=2}}return e.slice(0,r)}function FQ(t){let e=L5(t);return j5(e)}function n6(t){return t<=31||t>126}var RQ=new Set([je(" "),je('"'),je("<"),je(">"),je("`")]);function vQ(t){return n6(t)||RQ.has(t)}var $Q=new Set([je(" "),je('"'),je("#"),je("<"),je(">")]);function s6(t){return n6(t)||$Q.has(t)}function xQ(t){return s6(t)||t===je("'")}var kQ=new Set([je("?"),je("`"),je("{"),je("}")]);function U5(t){return s6(t)||kQ.has(t)}var qQ=new Set([je("/"),je(":"),je(";"),je("="),je("@"),je("["),je("\\"),je("]"),je("^"),je("|")]);function V5(t){return U5(t)||qQ.has(t)}var LQ=new Set([je("$"),je("%"),je("&"),je("+"),je(",")]);function jQ(t){return V5(t)||LQ.has(t)}var UQ=new Set([je("!"),je("'"),je("("),je(")"),je("~")]);function VQ(t){return jQ(t)||UQ.has(t)}function z5(t,e){let r=L5(t),n="";for(let s of r)e(s)?n+=NQ(s):n+=String.fromCharCode(s);return n}function zQ(t,e){return z5(String.fromCodePoint(t),e)}function WQ(t,e,r=!1){let n="";for(let s of t)r&&s===" "?n+="+":n+=z5(s,e);return n}W5.exports={isC0ControlPercentEncode:n6,isFragmentPercentEncode:vQ,isQueryPercentEncode:s6,isSpecialQueryPercentEncode:xQ,isPathPercentEncode:U5,isUserinfoPercentEncode:V5,isURLEncodedPercentEncode:VQ,percentDecodeString:FQ,percentDecodeBytes:j5,utf8PercentEncodeString:WQ,utf8PercentEncodeCodePoint:zQ}});var l6=g((v2e,an)=>{"use strict";d();var HQ=v5(),Or=r6(),{utf8DecodeWithoutBOM:GQ}=Qp(),{percentDecodeString:KQ,utf8PercentEncodeCodePoint:Zp,utf8PercentEncodeString:e0,isC0ControlPercentEncode:Y5,isFragmentPercentEncode:YQ,isQueryPercentEncode:QQ,isSpecialQueryPercentEncode:JQ,isPathPercentEncode:XQ,isUserinfoPercentEncode:u6}=Jp();function X(t){return t.codePointAt(0)}var Q5={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Oe=Symbol("failure");function H5(t){return[...t].length}function G5(t,e){let r=t[e];return isNaN(r)?void 0:String.fromCodePoint(r)}function K5(t){return t==="."||t.toLowerCase()==="%2e"}function ZQ(t){return t=t.toLowerCase(),t===".."||t==="%2e."||t===".%2e"||t==="%2e%2e"}function eJ(t,e){return Or.isASCIIAlpha(t)&&(e===X(":")||e===X("|"))}function J5(t){return t.length===2&&Or.isASCIIAlpha(t.codePointAt(0))&&(t[1]===":"||t[1]==="|")}function tJ(t){return t.length===2&&Or.isASCIIAlpha(t.codePointAt(0))&&t[1]===":"}function X5(t){return t.search(/\u0000|\u0009|\u000A|\u000D|\u0020|#|\/|:|<|>|\?|@|\[|\\|\]|\^|\|/u)!==-1}function rJ(t){return X5(t)||t.search(/[\u0000-\u001F]|%|\u007F/u)!==-1}function Xp(t){return Q5[t]!==void 0}function Sr(t){return Xp(t.scheme)}function i6(t){return!Xp(t.scheme)}function Z5(t){return Q5[t]}function eT(t){if(t==="")return Oe;let e=10;if(t.length>=2&&t.charAt(0)==="0"&&t.charAt(1).toLowerCase()==="x"?(t=t.substring(2),e=16):t.length>=2&&t.charAt(0)==="0"&&(t=t.substring(1),e=8),t==="")return 0;let r=/[^0-7]/u;return e===10&&(r=/[^0-9]/u),e===16&&(r=/[^0-9A-Fa-f]/u),r.test(t)?Oe:parseInt(t,e)}function nJ(t){let e=t.split(".");if(e[e.length-1]===""&&e.length>1&&e.pop(),e.length>4)return Oe;let r=[];for(let i of e){let o=eT(i);if(o===Oe)return Oe;r.push(o)}for(let i=0;i<r.length-1;++i)if(r[i]>255)return Oe;if(r[r.length-1]>=256**(5-r.length))return Oe;let n=r.pop(),s=0;for(let i of r)n+=i*256**(3-s),++s;return n}function sJ(t){let e="",r=t;for(let n=1;n<=4;++n)e=String(r%256)+e,n!==4&&(e=`.${e}`),r=Math.floor(r/256);return e}function iJ(t){let e=[0,0,0,0,0,0,0,0],r=0,n=null,s=0;if(t=Array.from(t,i=>i.codePointAt(0)),t[s]===X(":")){if(t[s+1]!==X(":"))return Oe;s+=2,++r,n=r}for(;s<t.length;){if(r===8)return Oe;if(t[s]===X(":")){if(n!==null)return Oe;++s,++r,n=r;continue}let i=0,o=0;for(;o<4&&Or.isASCIIHex(t[s]);)i=i*16+parseInt(G5(t,s),16),++s,++o;if(t[s]===X(".")){if(o===0||(s-=o,r>6))return Oe;let u=0;for(;t[s]!==void 0;){let a=null;if(u>0)if(t[s]===X(".")&&u<4)++s;else return Oe;if(!Or.isASCIIDigit(t[s]))return Oe;for(;Or.isASCIIDigit(t[s]);){let c=parseInt(G5(t,s));if(a===null)a=c;else{if(a===0)return Oe;a=a*10+c}if(a>255)return Oe;++s}e[r]=e[r]*256+a,++u,(u===2||u===4)&&++r}if(u!==4)return Oe;break}else if(t[s]===X(":")){if(++s,t[s]===void 0)return Oe}else if(t[s]!==void 0)return Oe;e[r]=i,++r}if(n!==null){let i=r-n;for(r=7;r!==0&&i>0;){let o=e[n+i-1];e[n+i-1]=e[r],e[r]=o,--r,--i}}else if(n===null&&r!==8)return Oe;return e}function oJ(t){let e="",r=cJ(t),n=!1;for(let s=0;s<=7;++s)if(!(n&&t[s]===0)){if(n&&(n=!1),r===s){e+=s===0?"::":":",n=!0;continue}e+=t[s].toString(16),s!==7&&(e+=":")}return e}function o6(t,e=!1){if(t[0]==="[")return t[t.length-1]!=="]"?Oe:iJ(t.substring(1,t.length-1));if(e)return aJ(t);let r=GQ(KQ(t)),n=lJ(r);return n===Oe||rJ(n)?Oe:uJ(n)?nJ(n):n}function uJ(t){let e=t.split(".");if(e[e.length-1]===""){if(e.length===1)return!1;e.pop()}let r=e[e.length-1];return!!(eT(r)!==Oe||/^[0-9]+$/u.test(r))}function aJ(t){return X5(t)?Oe:e0(t,Y5)}function cJ(t){let e=null,r=1,n=null,s=0;for(let i=0;i<t.length;++i)t[i]!==0?(s>r&&(e=n,r=s),n=null,s=0):(n===null&&(n=i),++s);return s>r?n:e}function a6(t){return typeof t=="number"?sJ(t):t instanceof Array?`[${oJ(t)}]`:t}function lJ(t,e=!1){let r=HQ.toASCII(t,{checkBidi:!0,checkHyphens:!1,checkJoiners:!0,useSTD3ASCIIRules:e,verifyDNSLength:e});return r===null||r===""?Oe:r}function hJ(t){return t.replace(/^[\u0000-\u001F\u0020]+|[\u0000-\u001F\u0020]+$/ug,"")}function fJ(t){return t.replace(/\u0009|\u000A|\u000D/ug,"")}function tT(t){let{path:e}=t;e.length!==0&&(t.scheme==="file"&&e.length===1&&pJ(e[0])||e.pop())}function rT(t){return t.username!==""||t.password!==""}function dJ(t){return t.host===null||t.host===""||t.scheme==="file"}function N1(t){return typeof t.path=="string"}function pJ(t){return/^[A-Za-z]:$/u.test(t)}function Ft(t,e,r,n,s){if(this.pointer=0,this.input=t,this.base=e||null,this.encodingOverride=r||"utf-8",this.stateOverride=s,this.url=n,this.failure=!1,this.parseError=!1,!this.url){this.url={scheme:"",username:"",password:"",host:null,port:null,path:[],query:null,fragment:null};let o=hJ(this.input);o!==this.input&&(this.parseError=!0),this.input=o}let i=fJ(this.input);for(i!==this.input&&(this.parseError=!0),this.input=i,this.state=s||"scheme start",this.buffer="",this.atFlag=!1,this.arrFlag=!1,this.passwordTokenSeenFlag=!1,this.input=Array.from(this.input,o=>o.codePointAt(0));this.pointer<=this.input.length;++this.pointer){let o=this.input[this.pointer],u=isNaN(o)?void 0:String.fromCodePoint(o),a=this[`parse ${this.state}`](o,u);if(a){if(a===Oe){this.failure=!0;break}}else break}}Ft.prototype["parse scheme start"]=function(e,r){if(Or.isASCIIAlpha(e))this.buffer+=r.toLowerCase(),this.state="scheme";else if(!this.stateOverride)this.state="no scheme",--this.pointer;else return this.parseError=!0,Oe;return!0};Ft.prototype["parse scheme"]=function(e,r){if(Or.isASCIIAlphanumeric(e)||e===X("+")||e===X("-")||e===X("."))this.buffer+=r.toLowerCase();else if(e===X(":")){if(this.stateOverride&&(Sr(this.url)&&!Xp(this.buffer)||!Sr(this.url)&&Xp(this.buffer)||(rT(this.url)||this.url.port!==null)&&this.buffer==="file"||this.url.scheme==="file"&&this.url.host===""))return!1;if(this.url.scheme=this.buffer,this.stateOverride)return this.url.port===Z5(this.url.scheme)&&(this.url.port=null),!1;this.buffer="",this.url.scheme==="file"?((this.input[this.pointer+1]!==X("/")||this.input[this.pointer+2]!==X("/"))&&(this.parseError=!0),this.state="file"):Sr(this.url)&&this.base!==null&&this.base.scheme===this.url.scheme?this.state="special relative or authority":Sr(this.url)?this.state="special authority slashes":this.input[this.pointer+1]===X("/")?(this.state="path or authority",++this.pointer):(this.url.path="",this.state="opaque path")}else if(!this.stateOverride)this.buffer="",this.state="no scheme",this.pointer=-1;else return this.parseError=!0,Oe;return!0};Ft.prototype["parse no scheme"]=function(e){return this.base===null||N1(this.base)&&e!==X("#")?Oe:(N1(this.base)&&e===X("#")?(this.url.scheme=this.base.scheme,this.url.path=this.base.path,this.url.query=this.base.query,this.url.fragment="",this.state="fragment"):this.base.scheme==="file"?(this.state="file",--this.pointer):(this.state="relative",--this.pointer),!0)};Ft.prototype["parse special relative or authority"]=function(e){return e===X("/")&&this.input[this.pointer+1]===X("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="relative",--this.pointer),!0};Ft.prototype["parse path or authority"]=function(e){return e===X("/")?this.state="authority":(this.state="path",--this.pointer),!0};Ft.prototype["parse relative"]=function(e){return this.url.scheme=this.base.scheme,e===X("/")?this.state="relative slash":Sr(this.url)&&e===X("\\")?(this.parseError=!0,this.state="relative slash"):(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===X("?")?(this.url.query="",this.state="query"):e===X("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,this.url.path.pop(),this.state="path",--this.pointer)),!0};Ft.prototype["parse relative slash"]=function(e){return Sr(this.url)&&(e===X("/")||e===X("\\"))?(e===X("\\")&&(this.parseError=!0),this.state="special authority ignore slashes"):e===X("/")?this.state="authority":(this.url.username=this.base.username,this.url.password=this.base.password,this.url.host=this.base.host,this.url.port=this.base.port,this.state="path",--this.pointer),!0};Ft.prototype["parse special authority slashes"]=function(e){return e===X("/")&&this.input[this.pointer+1]===X("/")?(this.state="special authority ignore slashes",++this.pointer):(this.parseError=!0,this.state="special authority ignore slashes",--this.pointer),!0};Ft.prototype["parse special authority ignore slashes"]=function(e){return e!==X("/")&&e!==X("\\")?(this.state="authority",--this.pointer):this.parseError=!0,!0};Ft.prototype["parse authority"]=function(e,r){if(e===X("@")){this.parseError=!0,this.atFlag&&(this.buffer=`%40${this.buffer}`),this.atFlag=!0;let n=H5(this.buffer);for(let s=0;s<n;++s){let i=this.buffer.codePointAt(s);if(i===X(":")&&!this.passwordTokenSeenFlag){this.passwordTokenSeenFlag=!0;continue}let o=Zp(i,u6);this.passwordTokenSeenFlag?this.url.password+=o:this.url.username+=o}this.buffer=""}else if(isNaN(e)||e===X("/")||e===X("?")||e===X("#")||Sr(this.url)&&e===X("\\")){if(this.atFlag&&this.buffer==="")return this.parseError=!0,Oe;this.pointer-=H5(this.buffer)+1,this.buffer="",this.state="host"}else this.buffer+=r;return!0};Ft.prototype["parse hostname"]=Ft.prototype["parse host"]=function(e,r){if(this.stateOverride&&this.url.scheme==="file")--this.pointer,this.state="file host";else if(e===X(":")&&!this.arrFlag){if(this.buffer==="")return this.parseError=!0,Oe;if(this.stateOverride==="hostname")return!1;let n=o6(this.buffer,i6(this.url));if(n===Oe)return Oe;this.url.host=n,this.buffer="",this.state="port"}else if(isNaN(e)||e===X("/")||e===X("?")||e===X("#")||Sr(this.url)&&e===X("\\")){if(--this.pointer,Sr(this.url)&&this.buffer==="")return this.parseError=!0,Oe;if(this.stateOverride&&this.buffer===""&&(rT(this.url)||this.url.port!==null))return this.parseError=!0,!1;let n=o6(this.buffer,i6(this.url));if(n===Oe)return Oe;if(this.url.host=n,this.buffer="",this.state="path start",this.stateOverride)return!1}else e===X("[")?this.arrFlag=!0:e===X("]")&&(this.arrFlag=!1),this.buffer+=r;return!0};Ft.prototype["parse port"]=function(e,r){if(Or.isASCIIDigit(e))this.buffer+=r;else if(isNaN(e)||e===X("/")||e===X("?")||e===X("#")||Sr(this.url)&&e===X("\\")||this.stateOverride){if(this.buffer!==""){let n=parseInt(this.buffer);if(n>2**16-1)return this.parseError=!0,Oe;this.url.port=n===Z5(this.url.scheme)?null:n,this.buffer=""}if(this.stateOverride)return!1;this.state="path start",--this.pointer}else return this.parseError=!0,Oe;return!0};var mJ=new Set([X("/"),X("\\"),X("?"),X("#")]);function nT(t,e){let r=t.length-e;return r>=2&&eJ(t[e],t[e+1])&&(r===2||mJ.has(t[e+2]))}Ft.prototype["parse file"]=function(e){return this.url.scheme="file",this.url.host="",e===X("/")||e===X("\\")?(e===X("\\")&&(this.parseError=!0),this.state="file slash"):this.base!==null&&this.base.scheme==="file"?(this.url.host=this.base.host,this.url.path=this.base.path.slice(),this.url.query=this.base.query,e===X("?")?(this.url.query="",this.state="query"):e===X("#")?(this.url.fragment="",this.state="fragment"):isNaN(e)||(this.url.query=null,nT(this.input,this.pointer)?(this.parseError=!0,this.url.path=[]):tT(this.url),this.state="path",--this.pointer)):(this.state="path",--this.pointer),!0};Ft.prototype["parse file slash"]=function(e){return e===X("/")||e===X("\\")?(e===X("\\")&&(this.parseError=!0),this.state="file host"):(this.base!==null&&this.base.scheme==="file"&&(!nT(this.input,this.pointer)&&tJ(this.base.path[0])&&this.url.path.push(this.base.path[0]),this.url.host=this.base.host),this.state="path",--this.pointer),!0};Ft.prototype["parse file host"]=function(e,r){if(isNaN(e)||e===X("/")||e===X("\\")||e===X("?")||e===X("#"))if(--this.pointer,!this.stateOverride&&J5(this.buffer))this.parseError=!0,this.state="path";else if(this.buffer===""){if(this.url.host="",this.stateOverride)return!1;this.state="path start"}else{let n=o6(this.buffer,i6(this.url));if(n===Oe)return Oe;if(n==="localhost"&&(n=""),this.url.host=n,this.stateOverride)return!1;this.buffer="",this.state="path start"}else this.buffer+=r;return!0};Ft.prototype["parse path start"]=function(e){return Sr(this.url)?(e===X("\\")&&(this.parseError=!0),this.state="path",e!==X("/")&&e!==X("\\")&&--this.pointer):!this.stateOverride&&e===X("?")?(this.url.query="",this.state="query"):!this.stateOverride&&e===X("#")?(this.url.fragment="",this.state="fragment"):e!==void 0?(this.state="path",e!==X("/")&&--this.pointer):this.stateOverride&&this.url.host===null&&this.url.path.push(""),!0};Ft.prototype["parse path"]=function(e){return isNaN(e)||e===X("/")||Sr(this.url)&&e===X("\\")||!this.stateOverride&&(e===X("?")||e===X("#"))?(Sr(this.url)&&e===X("\\")&&(this.parseError=!0),ZQ(this.buffer)?(tT(this.url),e!==X("/")&&!(Sr(this.url)&&e===X("\\"))&&this.url.path.push("")):K5(this.buffer)&&e!==X("/")&&!(Sr(this.url)&&e===X("\\"))?this.url.path.push(""):K5(this.buffer)||(this.url.scheme==="file"&&this.url.path.length===0&&J5(this.buffer)&&(this.buffer=`${this.buffer[0]}:`),this.url.path.push(this.buffer)),this.buffer="",e===X("?")&&(this.url.query="",this.state="query"),e===X("#")&&(this.url.fragment="",this.state="fragment")):(e===X("%")&&(!Or.isASCIIHex(this.input[this.pointer+1])||!Or.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=Zp(e,XQ)),!0};Ft.prototype["parse opaque path"]=function(e){return e===X("?")?(this.url.query="",this.state="query"):e===X("#")?(this.url.fragment="",this.state="fragment"):(!isNaN(e)&&e!==X("%")&&(this.parseError=!0),e===X("%")&&(!Or.isASCIIHex(this.input[this.pointer+1])||!Or.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),isNaN(e)||(this.url.path+=Zp(e,Y5))),!0};Ft.prototype["parse query"]=function(e,r){if((!Sr(this.url)||this.url.scheme==="ws"||this.url.scheme==="wss")&&(this.encodingOverride="utf-8"),!this.stateOverride&&e===X("#")||isNaN(e)){let n=Sr(this.url)?JQ:QQ;this.url.query+=e0(this.buffer,n),this.buffer="",e===X("#")&&(this.url.fragment="",this.state="fragment")}else isNaN(e)||(e===X("%")&&(!Or.isASCIIHex(this.input[this.pointer+1])||!Or.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.buffer+=r);return!0};Ft.prototype["parse fragment"]=function(e){return isNaN(e)||(e===X("%")&&(!Or.isASCIIHex(this.input[this.pointer+1])||!Or.isASCIIHex(this.input[this.pointer+2]))&&(this.parseError=!0),this.url.fragment+=Zp(e,YQ)),!0};function yJ(t,e){let r=`${t.scheme}:`;return t.host!==null&&(r+="//",(t.username!==""||t.password!=="")&&(r+=t.username,t.password!==""&&(r+=`:${t.password}`),r+="@"),r+=a6(t.host),t.port!==null&&(r+=`:${t.port}`)),t.host===null&&!N1(t)&&t.path.length>1&&t.path[0]===""&&(r+="/."),r+=c6(t),t.query!==null&&(r+=`?${t.query}`),!e&&t.fragment!==null&&(r+=`#${t.fragment}`),r}function gJ(t){let e=`${t.scheme}://`;return e+=a6(t.host),t.port!==null&&(e+=`:${t.port}`),e}function c6(t){if(N1(t))return t.path;let e="";for(let r of t.path)e+=`/${r}`;return e}an.exports.serializeURL=yJ;an.exports.serializePath=c6;an.exports.serializeURLOrigin=function(t){switch(t.scheme){case"blob":{let e=an.exports.parseURL(c6(t));return e===null||e.scheme!=="http"&&e.scheme!=="https"?"null":an.exports.serializeURLOrigin(e)}case"ftp":case"http":case"https":case"ws":case"wss":return gJ({scheme:t.scheme,host:t.host,port:t.port});case"file":return"null";default:return"null"}};an.exports.basicURLParse=function(t,e){e===void 0&&(e={});let r=new Ft(t,e.baseURL,e.encodingOverride,e.url,e.stateOverride);return r.failure?null:r.url};an.exports.setTheUsername=function(t,e){t.username=e0(e,u6)};an.exports.setThePassword=function(t,e){t.password=e0(e,u6)};an.exports.serializeHost=a6;an.exports.cannotHaveAUsernamePasswordPort=dJ;an.exports.hasAnOpaquePath=N1;an.exports.serializeInteger=function(t){return String(t)};an.exports.parseURL=function(t,e){return e===void 0&&(e={}),an.exports.basicURLParse(t,{baseURL:e.baseURL,encodingOverride:e.encodingOverride})}});var h6=g((x2e,lT)=>{"use strict";d();var{utf8Encode:EJ,utf8DecodeWithoutBOM:sT}=Qp(),{percentDecodeBytes:iT,utf8PercentEncodeString:oT,isURLEncodedPercentEncode:uT}=Jp();function aT(t){return t.codePointAt(0)}function _J(t){let e=OJ(t,aT("&")),r=[];for(let n of e){if(n.length===0)continue;let s,i,o=n.indexOf(aT("="));o>=0?(s=n.slice(0,o),i=n.slice(o+1)):(s=n,i=new Uint8Array(0)),s=cT(s,43,32),i=cT(i,43,32);let u=sT(iT(s)),a=sT(iT(i));r.push([u,a])}return r}function AJ(t){return _J(EJ(t))}function SJ(t,e=void 0){let r="utf-8";e!==void 0&&(r=e);let n="";for(let[s,i]of t.entries()){let o=oT(i[0],uT,!0),u=i[1];i.length>2&&i[2]!==void 0&&(i[2]==="hidden"&&o==="_charset_"?u=r:i[2]==="file"&&(u=u.name)),u=oT(u,uT,!0),s!==0&&(n+="&"),n+=`${o}=${u}`}return n}function OJ(t,e){let r=[],n=0,s=t.indexOf(e);for(;s>=0;)r.push(t.slice(n,s)),n=s+1,s=t.indexOf(e,n);return n!==t.length&&r.push(t.slice(n)),r}function cT(t,e,r){let n=t.indexOf(e);for(;n>=0;)t[n]=r,n=t.indexOf(e,n+1);return t}lT.exports={parseUrlencodedString:AJ,serializeUrlencoded:SJ}});var dT=g(fT=>{"use strict";d();var hT=Gp(),t0=Yp();fT.convert=(t,e,{context:r="The provided value"}={})=>{if(typeof e!="function")throw new t.TypeError(r+" is not a function");function n(...s){let i=t0.tryWrapperForImpl(this),o;for(let u=0;u<s.length;u++)s[u]=t0.tryWrapperForImpl(s[u]);return o=Reflect.apply(e,i,s),o=hT.any(o,{context:r,globals:t}),o}return n.construct=(...s)=>{for(let o=0;o<s.length;o++)s[o]=t0.tryWrapperForImpl(s[o]);let i=Reflect.construct(e,s);return i=hT.any(i,{context:r,globals:t}),i},n[t0.wrapperSymbol]=e,n.objectReference=e,n}});var mT=g(pT=>{"use strict";d();var f6=h6();pT.implementation=class{constructor(e,r,{doNotStripQMark:n=!1}){let s=r[0];if(this._list=[],this._url=null,!n&&typeof s=="string"&&s[0]==="?"&&(s=s.slice(1)),Array.isArray(s))for(let i of s){if(i.length!==2)throw new TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element does not contain exactly two elements.");this._list.push([i[0],i[1]])}else if(typeof s=="object"&&Object.getPrototypeOf(s)===null)for(let i of Object.keys(s)){let o=s[i];this._list.push([i,o])}else this._list=f6.parseUrlencodedString(s)}_updateSteps(){if(this._url!==null){let e=f6.serializeUrlencoded(this._list);e===""&&(e=null),this._url._url.query=e,e===null&&this._url._potentiallyStripTrailingSpacesFromAnOpaquePath()}}get size(){return this._list.length}append(e,r){this._list.push([e,r]),this._updateSteps()}delete(e,r){let n=0;for(;n<this._list.length;)this._list[n][0]===e&&(r===void 0||this._list[n][1]===r)?this._list.splice(n,1):n++;this._updateSteps()}get(e){for(let r of this._list)if(r[0]===e)return r[1];return null}getAll(e){let r=[];for(let n of this._list)n[0]===e&&r.push(n[1]);return r}has(e,r){for(let n of this._list)if(n[0]===e&&(r===void 0||n[1]===r))return!0;return!1}set(e,r){let n=!1,s=0;for(;s<this._list.length;)this._list[s][0]===e?n?this._list.splice(s,1):(n=!0,this._list[s][1]=r,s++):s++;n||this._list.push([e,r]),this._updateSteps()}sort(){this._list.sort((e,r)=>e[0]<r[0]?-1:e[0]>r[0]?1:0),this._updateSteps()}[Symbol.iterator](){return this._list[Symbol.iterator]()}toString(){return f6.serializeUrlencoded(this._list)}}});var d6=g(ze=>{"use strict";d();var gn=Gp(),ot=Yp(),wJ=dT(),yT=ot.newObjectInRealm,Ut=ot.implSymbol,ET=ot.ctorRegistrySymbol,gT="URLSearchParams";ze.is=t=>ot.isObject(t)&&ot.hasOwn(t,Ut)&&t[Ut]instanceof ru.implementation;ze.isImpl=t=>ot.isObject(t)&&t instanceof ru.implementation;ze.convert=(t,e,{context:r="The provided value"}={})=>{if(ze.is(e))return ot.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URLSearchParams'.`)};ze.createDefaultIterator=(t,e,r)=>{let s=t[ET]["URLSearchParams Iterator"],i=Object.create(s);return Object.defineProperty(i,ot.iterInternalSymbol,{value:{target:e,kind:r,index:0},configurable:!0}),i};function _T(t,e){let r;return e!==void 0&&(r=e.prototype),ot.isObject(r)||(r=t[ET].URLSearchParams.prototype),Object.create(r)}ze.create=(t,e,r)=>{let n=_T(t);return ze.setup(n,t,e,r)};ze.createImpl=(t,e,r)=>{let n=ze.create(t,e,r);return ot.implForWrapper(n)};ze._internalSetup=(t,e)=>{};ze.setup=(t,e,r=[],n={})=>(n.wrapper=t,ze._internalSetup(t,e),Object.defineProperty(t,Ut,{value:new ru.implementation(e,r,n),configurable:!0}),t[Ut][ot.wrapperSymbol]=t,ru.init&&ru.init(t[Ut]),t);ze.new=(t,e)=>{let r=_T(t,e);return ze._internalSetup(r,t),Object.defineProperty(r,Ut,{value:Object.create(ru.implementation.prototype),configurable:!0}),r[Ut][ot.wrapperSymbol]=r,ru.init&&ru.init(r[Ut]),r[Ut]};var CJ=new Set(["Window","Worker"]);ze.install=(t,e)=>{if(!e.some(s=>CJ.has(s)))return;let r=ot.initCtorRegistry(t);class n{constructor(){let i=[];{let o=arguments[0];if(o!==void 0)if(ot.isObject(o))if(o[Symbol.iterator]!==void 0)if(ot.isObject(o)){let u=[],a=o;for(let c of a){if(ot.isObject(c)){let l=[],h=c;for(let f of h)f=gn.USVString(f,{context:"Failed to construct 'URLSearchParams': parameter 1 sequence's element's element",globals:t}),l.push(f);c=l}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence's element is not an iterable object.");u.push(c)}o=u}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 sequence is not an iterable object.");else if(ot.isObject(o)){let u=Object.create(null);for(let a of Reflect.ownKeys(o)){let c=Object.getOwnPropertyDescriptor(o,a);if(c&&c.enumerable){let l=a;l=gn.USVString(l,{context:"Failed to construct 'URLSearchParams': parameter 1 record's key",globals:t});let h=o[a];h=gn.USVString(h,{context:"Failed to construct 'URLSearchParams': parameter 1 record's value",globals:t}),u[l]=h}}o=u}else throw new t.TypeError("Failed to construct 'URLSearchParams': parameter 1 record is not an object.");else o=gn.USVString(o,{context:"Failed to construct 'URLSearchParams': parameter 1",globals:t});else o="";i.push(o)}return ze.setup(Object.create(new.target.prototype),t,i)}append(i,o){let u=this!==null&&this!==void 0?this:t;if(!ze.is(u))throw new t.TypeError("'append' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'append' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let a=[];{let c=arguments[0];c=gn.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 1",globals:t}),a.push(c)}{let c=arguments[1];c=gn.USVString(c,{context:"Failed to execute 'append' on 'URLSearchParams': parameter 2",globals:t}),a.push(c)}return ot.tryWrapperForImpl(u[Ut].append(...a))}delete(i){let o=this!==null&&this!==void 0?this:t;if(!ze.is(o))throw new t.TypeError("'delete' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'delete' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let u=[];{let a=arguments[0];a=gn.USVString(a,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 1",globals:t}),u.push(a)}{let a=arguments[1];a!==void 0&&(a=gn.USVString(a,{context:"Failed to execute 'delete' on 'URLSearchParams': parameter 2",globals:t})),u.push(a)}return ot.tryWrapperForImpl(o[Ut].delete(...u))}get(i){let o=this!==null&&this!==void 0?this:t;if(!ze.is(o))throw new t.TypeError("'get' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'get' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let u=[];{let a=arguments[0];a=gn.USVString(a,{context:"Failed to execute 'get' on 'URLSearchParams': parameter 1",globals:t}),u.push(a)}return o[Ut].get(...u)}getAll(i){let o=this!==null&&this!==void 0?this:t;if(!ze.is(o))throw new t.TypeError("'getAll' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'getAll' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let u=[];{let a=arguments[0];a=gn.USVString(a,{context:"Failed to execute 'getAll' on 'URLSearchParams': parameter 1",globals:t}),u.push(a)}return ot.tryWrapperForImpl(o[Ut].getAll(...u))}has(i){let o=this!==null&&this!==void 0?this:t;if(!ze.is(o))throw new t.TypeError("'has' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError(`Failed to execute 'has' on 'URLSearchParams': 1 argument required, but only ${arguments.length} present.`);let u=[];{let a=arguments[0];a=gn.USVString(a,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 1",globals:t}),u.push(a)}{let a=arguments[1];a!==void 0&&(a=gn.USVString(a,{context:"Failed to execute 'has' on 'URLSearchParams': parameter 2",globals:t})),u.push(a)}return o[Ut].has(...u)}set(i,o){let u=this!==null&&this!==void 0?this:t;if(!ze.is(u))throw new t.TypeError("'set' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<2)throw new t.TypeError(`Failed to execute 'set' on 'URLSearchParams': 2 arguments required, but only ${arguments.length} present.`);let a=[];{let c=arguments[0];c=gn.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 1",globals:t}),a.push(c)}{let c=arguments[1];c=gn.USVString(c,{context:"Failed to execute 'set' on 'URLSearchParams': parameter 2",globals:t}),a.push(c)}return ot.tryWrapperForImpl(u[Ut].set(...a))}sort(){let i=this!==null&&this!==void 0?this:t;if(!ze.is(i))throw new t.TypeError("'sort' called on an object that is not a valid instance of URLSearchParams.");return ot.tryWrapperForImpl(i[Ut].sort())}toString(){let i=this!==null&&this!==void 0?this:t;if(!ze.is(i))throw new t.TypeError("'toString' called on an object that is not a valid instance of URLSearchParams.");return i[Ut].toString()}keys(){if(!ze.is(this))throw new t.TypeError("'keys' called on an object that is not a valid instance of URLSearchParams.");return ze.createDefaultIterator(t,this,"key")}values(){if(!ze.is(this))throw new t.TypeError("'values' called on an object that is not a valid instance of URLSearchParams.");return ze.createDefaultIterator(t,this,"value")}entries(){if(!ze.is(this))throw new t.TypeError("'entries' called on an object that is not a valid instance of URLSearchParams.");return ze.createDefaultIterator(t,this,"key+value")}forEach(i){if(!ze.is(this))throw new t.TypeError("'forEach' called on an object that is not a valid instance of URLSearchParams.");if(arguments.length<1)throw new t.TypeError("Failed to execute 'forEach' on 'iterable': 1 argument required, but only 0 present.");i=wJ.convert(t,i,{context:"Failed to execute 'forEach' on 'iterable': The callback provided as parameter 1"});let o=arguments[1],u=Array.from(this[Ut]),a=0;for(;a<u.length;){let[c,l]=u[a].map(ot.tryWrapperForImpl);i.call(o,l,c,this),u=Array.from(this[Ut]),a++}}get size(){let i=this!==null&&this!==void 0?this:t;if(!ze.is(i))throw new t.TypeError("'get size' called on an object that is not a valid instance of URLSearchParams.");return i[Ut].size}}Object.defineProperties(n.prototype,{append:{enumerable:!0},delete:{enumerable:!0},get:{enumerable:!0},getAll:{enumerable:!0},has:{enumerable:!0},set:{enumerable:!0},sort:{enumerable:!0},toString:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0},forEach:{enumerable:!0},size:{enumerable:!0},[Symbol.toStringTag]:{value:"URLSearchParams",configurable:!0},[Symbol.iterator]:{value:n.prototype.entries,configurable:!0,writable:!0}}),r[gT]=n,r["URLSearchParams Iterator"]=Object.create(r["%IteratorPrototype%"],{[Symbol.toStringTag]:{configurable:!0,value:"URLSearchParams Iterator"}}),ot.define(r["URLSearchParams Iterator"],{next(){let s=this&&this[ot.iterInternalSymbol];if(!s)throw new t.TypeError("next() called on a value that is not a URLSearchParams iterator object");let{target:i,kind:o,index:u}=s,a=Array.from(i[Ut]),c=a.length;if(u>=c)return yT(t,{value:void 0,done:!0});let l=a[u];return s.index=u+1,yT(t,ot.iteratorResult(l.map(ot.tryWrapperForImpl),o))}}),Object.defineProperty(t,gT,{configurable:!0,writable:!0,value:n})};var ru=mT()});var OT=g(ST=>{"use strict";d();var rt=l6(),AT=h6(),bJ=d6();ST.implementation=class{constructor(e,r){let n=r[0],s=r[1],i=null;if(s!==void 0&&(i=rt.basicURLParse(s),i===null))throw new TypeError(`Invalid base URL: ${s}`);let o=rt.basicURLParse(n,{baseURL:i});if(o===null)throw new TypeError(`Invalid URL: ${n}`);let u=o.query!==null?o.query:"";this._url=o,this._query=bJ.createImpl(e,[u],{doNotStripQMark:!0}),this._query._url=this}static canParse(e,r){let n=null;return!(r!==void 0&&(n=rt.basicURLParse(r),n===null)||rt.basicURLParse(e,{baseURL:n})===null)}get href(){return rt.serializeURL(this._url)}set href(e){let r=rt.basicURLParse(e);if(r===null)throw new TypeError(`Invalid URL: ${e}`);this._url=r,this._query._list.splice(0);let{query:n}=r;n!==null&&(this._query._list=AT.parseUrlencodedString(n))}get origin(){return rt.serializeURLOrigin(this._url)}get protocol(){return`${this._url.scheme}:`}set protocol(e){rt.basicURLParse(`${e}:`,{url:this._url,stateOverride:"scheme start"})}get username(){return this._url.username}set username(e){rt.cannotHaveAUsernamePasswordPort(this._url)||rt.setTheUsername(this._url,e)}get password(){return this._url.password}set password(e){rt.cannotHaveAUsernamePasswordPort(this._url)||rt.setThePassword(this._url,e)}get host(){let e=this._url;return e.host===null?"":e.port===null?rt.serializeHost(e.host):`${rt.serializeHost(e.host)}:${rt.serializeInteger(e.port)}`}set host(e){rt.hasAnOpaquePath(this._url)||rt.basicURLParse(e,{url:this._url,stateOverride:"host"})}get hostname(){return this._url.host===null?"":rt.serializeHost(this._url.host)}set hostname(e){rt.hasAnOpaquePath(this._url)||rt.basicURLParse(e,{url:this._url,stateOverride:"hostname"})}get port(){return this._url.port===null?"":rt.serializeInteger(this._url.port)}set port(e){rt.cannotHaveAUsernamePasswordPort(this._url)||(e===""?this._url.port=null:rt.basicURLParse(e,{url:this._url,stateOverride:"port"}))}get pathname(){return rt.serializePath(this._url)}set pathname(e){rt.hasAnOpaquePath(this._url)||(this._url.path=[],rt.basicURLParse(e,{url:this._url,stateOverride:"path start"}))}get search(){return this._url.query===null||this._url.query===""?"":`?${this._url.query}`}set search(e){let r=this._url;if(e===""){r.query=null,this._query._list=[],this._potentiallyStripTrailingSpacesFromAnOpaquePath();return}let n=e[0]==="?"?e.substring(1):e;r.query="",rt.basicURLParse(n,{url:r,stateOverride:"query"}),this._query._list=AT.parseUrlencodedString(n)}get searchParams(){return this._query}get hash(){return this._url.fragment===null||this._url.fragment===""?"":`#${this._url.fragment}`}set hash(e){if(e===""){this._url.fragment=null,this._potentiallyStripTrailingSpacesFromAnOpaquePath();return}let r=e[0]==="#"?e.substring(1):e;this._url.fragment="",rt.basicURLParse(r,{url:this._url,stateOverride:"fragment"})}toJSON(){return this.href}_potentiallyStripTrailingSpacesFromAnOpaquePath(){rt.hasAnOpaquePath(this._url)&&this._url.fragment===null&&this._url.query===null&&(this._url.path=this._url.path.replace(/\u0020+$/u,""))}}});var bT=g(Te=>{"use strict";d();var En=Gp(),Yn=Yp(),We=Yn.implSymbol,TJ=Yn.ctorRegistrySymbol,wT="URL";Te.is=t=>Yn.isObject(t)&&Yn.hasOwn(t,We)&&t[We]instanceof no.implementation;Te.isImpl=t=>Yn.isObject(t)&&t instanceof no.implementation;Te.convert=(t,e,{context:r="The provided value"}={})=>{if(Te.is(e))return Yn.implForWrapper(e);throw new t.TypeError(`${r} is not of type 'URL'.`)};function CT(t,e){let r;return e!==void 0&&(r=e.prototype),Yn.isObject(r)||(r=t[TJ].URL.prototype),Object.create(r)}Te.create=(t,e,r)=>{let n=CT(t);return Te.setup(n,t,e,r)};Te.createImpl=(t,e,r)=>{let n=Te.create(t,e,r);return Yn.implForWrapper(n)};Te._internalSetup=(t,e)=>{};Te.setup=(t,e,r=[],n={})=>(n.wrapper=t,Te._internalSetup(t,e),Object.defineProperty(t,We,{value:new no.implementation(e,r,n),configurable:!0}),t[We][Yn.wrapperSymbol]=t,no.init&&no.init(t[We]),t);Te.new=(t,e)=>{let r=CT(t,e);return Te._internalSetup(r,t),Object.defineProperty(r,We,{value:Object.create(no.implementation.prototype),configurable:!0}),r[We][Yn.wrapperSymbol]=r,no.init&&no.init(r[We]),r[We]};var DJ=new Set(["Window","Worker"]);Te.install=(t,e)=>{if(!e.some(s=>DJ.has(s)))return;let r=Yn.initCtorRegistry(t);class n{constructor(i){if(arguments.length<1)throw new t.TypeError(`Failed to construct 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let u=arguments[0];u=En.USVString(u,{context:"Failed to construct 'URL': parameter 1",globals:t}),o.push(u)}{let u=arguments[1];u!==void 0&&(u=En.USVString(u,{context:"Failed to construct 'URL': parameter 2",globals:t})),o.push(u)}return Te.setup(Object.create(new.target.prototype),t,o)}toJSON(){let i=this!==null&&this!==void 0?this:t;if(!Te.is(i))throw new t.TypeError("'toJSON' called on an object that is not a valid instance of URL.");return i[We].toJSON()}get href(){let i=this!==null&&this!==void 0?this:t;if(!Te.is(i))throw new t.TypeError("'get href' called on an object that is not a valid instance of URL.");return i[We].href}set href(i){let o=this!==null&&this!==void 0?this:t;if(!Te.is(o))throw new t.TypeError("'set href' called on an object that is not a valid instance of URL.");i=En.USVString(i,{context:"Failed to set the 'href' property on 'URL': The provided value",globals:t}),o[We].href=i}toString(){let i=this;if(!Te.is(i))throw new t.TypeError("'toString' called on an object that is not a valid instance of URL.");return i[We].href}get origin(){let i=this!==null&&this!==void 0?this:t;if(!Te.is(i))throw new t.TypeError("'get origin' called on an object that is not a valid instance of URL.");return i[We].origin}get protocol(){let i=this!==null&&this!==void 0?this:t;if(!Te.is(i))throw new t.TypeError("'get protocol' called on an object that is not a valid instance of URL.");return i[We].protocol}set protocol(i){let o=this!==null&&this!==void 0?this:t;if(!Te.is(o))throw new t.TypeError("'set protocol' called on an object that is not a valid instance of URL.");i=En.USVString(i,{context:"Failed to set the 'protocol' property on 'URL': The provided value",globals:t}),o[We].protocol=i}get username(){let i=this!==null&&this!==void 0?this:t;if(!Te.is(i))throw new t.TypeError("'get username' called on an object that is not a valid instance of URL.");return i[We].username}set username(i){let o=this!==null&&this!==void 0?this:t;if(!Te.is(o))throw new t.TypeError("'set username' called on an object that is not a valid instance of URL.");i=En.USVString(i,{context:"Failed to set the 'username' property on 'URL': The provided value",globals:t}),o[We].username=i}get password(){let i=this!==null&&this!==void 0?this:t;if(!Te.is(i))throw new t.TypeError("'get password' called on an object that is not a valid instance of URL.");return i[We].password}set password(i){let o=this!==null&&this!==void 0?this:t;if(!Te.is(o))throw new t.TypeError("'set password' called on an object that is not a valid instance of URL.");i=En.USVString(i,{context:"Failed to set the 'password' property on 'URL': The provided value",globals:t}),o[We].password=i}get host(){let i=this!==null&&this!==void 0?this:t;if(!Te.is(i))throw new t.TypeError("'get host' called on an object that is not a valid instance of URL.");return i[We].host}set host(i){let o=this!==null&&this!==void 0?this:t;if(!Te.is(o))throw new t.TypeError("'set host' called on an object that is not a valid instance of URL.");i=En.USVString(i,{context:"Failed to set the 'host' property on 'URL': The provided value",globals:t}),o[We].host=i}get hostname(){let i=this!==null&&this!==void 0?this:t;if(!Te.is(i))throw new t.TypeError("'get hostname' called on an object that is not a valid instance of URL.");return i[We].hostname}set hostname(i){let o=this!==null&&this!==void 0?this:t;if(!Te.is(o))throw new t.TypeError("'set hostname' called on an object that is not a valid instance of URL.");i=En.USVString(i,{context:"Failed to set the 'hostname' property on 'URL': The provided value",globals:t}),o[We].hostname=i}get port(){let i=this!==null&&this!==void 0?this:t;if(!Te.is(i))throw new t.TypeError("'get port' called on an object that is not a valid instance of URL.");return i[We].port}set port(i){let o=this!==null&&this!==void 0?this:t;if(!Te.is(o))throw new t.TypeError("'set port' called on an object that is not a valid instance of URL.");i=En.USVString(i,{context:"Failed to set the 'port' property on 'URL': The provided value",globals:t}),o[We].port=i}get pathname(){let i=this!==null&&this!==void 0?this:t;if(!Te.is(i))throw new t.TypeError("'get pathname' called on an object that is not a valid instance of URL.");return i[We].pathname}set pathname(i){let o=this!==null&&this!==void 0?this:t;if(!Te.is(o))throw new t.TypeError("'set pathname' called on an object that is not a valid instance of URL.");i=En.USVString(i,{context:"Failed to set the 'pathname' property on 'URL': The provided value",globals:t}),o[We].pathname=i}get search(){let i=this!==null&&this!==void 0?this:t;if(!Te.is(i))throw new t.TypeError("'get search' called on an object that is not a valid instance of URL.");return i[We].search}set search(i){let o=this!==null&&this!==void 0?this:t;if(!Te.is(o))throw new t.TypeError("'set search' called on an object that is not a valid instance of URL.");i=En.USVString(i,{context:"Failed to set the 'search' property on 'URL': The provided value",globals:t}),o[We].search=i}get searchParams(){let i=this!==null&&this!==void 0?this:t;if(!Te.is(i))throw new t.TypeError("'get searchParams' called on an object that is not a valid instance of URL.");return Yn.getSameObject(this,"searchParams",()=>Yn.tryWrapperForImpl(i[We].searchParams))}get hash(){let i=this!==null&&this!==void 0?this:t;if(!Te.is(i))throw new t.TypeError("'get hash' called on an object that is not a valid instance of URL.");return i[We].hash}set hash(i){let o=this!==null&&this!==void 0?this:t;if(!Te.is(o))throw new t.TypeError("'set hash' called on an object that is not a valid instance of URL.");i=En.USVString(i,{context:"Failed to set the 'hash' property on 'URL': The provided value",globals:t}),o[We].hash=i}static canParse(i){if(arguments.length<1)throw new t.TypeError(`Failed to execute 'canParse' on 'URL': 1 argument required, but only ${arguments.length} present.`);let o=[];{let u=arguments[0];u=En.USVString(u,{context:"Failed to execute 'canParse' on 'URL': parameter 1",globals:t}),o.push(u)}{let u=arguments[1];u!==void 0&&(u=En.USVString(u,{context:"Failed to execute 'canParse' on 'URL': parameter 2",globals:t})),o.push(u)}return no.implementation.canParse(...o)}}Object.defineProperties(n.prototype,{toJSON:{enumerable:!0},href:{enumerable:!0},toString:{enumerable:!0},origin:{enumerable:!0},protocol:{enumerable:!0},username:{enumerable:!0},password:{enumerable:!0},host:{enumerable:!0},hostname:{enumerable:!0},port:{enumerable:!0},pathname:{enumerable:!0},search:{enumerable:!0},searchParams:{enumerable:!0},hash:{enumerable:!0},[Symbol.toStringTag]:{value:"URL",configurable:!0}}),Object.defineProperties(n,{canParse:{enumerable:!0}}),r[wT]=n,Object.defineProperty(t,wT,{configurable:!0,writable:!0,value:n}),e.includes("Window")&&Object.defineProperty(t,"webkitURL",{configurable:!0,writable:!0,value:n})};var no=OT()});var TT=g(p6=>{"use strict";d();var MJ=bT(),BJ=d6();p6.URL=MJ;p6.URLSearchParams=BJ});var MT=g(jr=>{"use strict";d();var{URL:IJ,URLSearchParams:PJ}=TT(),ei=l6(),DT=Jp(),r0={Array,Object,Promise,String,TypeError};IJ.install(r0,["Window"]);PJ.install(r0,["Window"]);jr.URL=r0.URL;jr.URLSearchParams=r0.URLSearchParams;jr.parseURL=ei.parseURL;jr.basicURLParse=ei.basicURLParse;jr.serializeURL=ei.serializeURL;jr.serializePath=ei.serializePath;jr.serializeHost=ei.serializeHost;jr.serializeInteger=ei.serializeInteger;jr.serializeURLOrigin=ei.serializeURLOrigin;jr.setTheUsername=ei.setTheUsername;jr.setThePassword=ei.setThePassword;jr.cannotHaveAUsernamePasswordPort=ei.cannotHaveAUsernamePasswordPort;jr.hasAnOpaquePath=ei.hasAnOpaquePath;jr.percentDecodeString=DT.percentDecodeString;jr.percentDecodeBytes=DT.percentDecodeBytes});var IT=g(Ss=>{"use strict";d();var NJ=Ss&&Ss.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r);var s=Object.getOwnPropertyDescriptor(e,r);(!s||("get"in s?!e.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,s)}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),FJ=Ss&&Ss.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),RJ=Ss&&Ss.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var r in t)r!=="default"&&Object.prototype.hasOwnProperty.call(t,r)&&NJ(e,t,r);return FJ(e,t),e};Object.defineProperty(Ss,"__esModule",{value:!0});Ss.redactConnectionString=Ss.redactValidConnectionString=void 0;var BT=RJ(m6());function vJ(t,e){var r,n;let s=t.clone(),i=(r=e?.replacementString)!==null&&r!==void 0?r:"_credentials_",o=(n=e?.redactUsernames)!==null&&n!==void 0?n:!0;if((s.username||s.password)&&o?(s.username=i,s.password=""):s.password&&(s.password=i),s.searchParams.has("authMechanismProperties")){let u=new BT.CommaAndColonSeparatedRecord(s.searchParams.get("authMechanismProperties"));u.get("AWS_SESSION_TOKEN")&&(u.set("AWS_SESSION_TOKEN",i),s.searchParams.set("authMechanismProperties",u.toString()))}return s.searchParams.has("tlsCertificateKeyFilePassword")&&s.searchParams.set("tlsCertificateKeyFilePassword",i),s.searchParams.has("proxyUsername")&&o&&s.searchParams.set("proxyUsername",i),s.searchParams.has("proxyPassword")&&s.searchParams.set("proxyPassword",i),s}Ss.redactValidConnectionString=vJ;function $J(t,e){var r,n;let s=(r=e?.replacementString)!==null&&r!==void 0?r:"<credentials>",i=(n=e?.redactUsernames)!==null&&n!==void 0?n:!0,o;try{o=new BT.default(t)}catch{}if(o)return e={...e,replacementString:"___credentials___"},o.redact(e).toString().replace(/___credentials___/g,s);let u=s,a=[c=>c.replace(i?/(\/\/)(.*)(@)/g:/(\/\/[^@]*:)(.*)(@)/g,`$1${u}$3`),c=>c.replace(/(AWS_SESSION_TOKEN(:|%3A))([^,&]+)/gi,`$1${u}`),c=>c.replace(/(tlsCertificateKeyFilePassword=)([^&]+)/gi,`$1${u}`),c=>i?c.replace(/(proxyUsername=)([^&]+)/gi,`$1${u}`):c,c=>c.replace(/(proxyPassword=)([^&]+)/gi,`$1${u}`)];for(let c of a)t=c(t);return t}Ss.redactConnectionString=$J});var m6=g(so=>{"use strict";d();Object.defineProperty(so,"__esModule",{value:!0});so.CommaAndColonSeparatedRecord=so.ConnectionString=so.redactConnectionString=void 0;var xJ=MT(),PT=IT();Object.defineProperty(so,"redactConnectionString",{enumerable:!0,get:function(){return PT.redactConnectionString}});var F1="__this_is_a_placeholder__";function kJ(t){return t.startsWith("mongodb://")||t.startsWith("mongodb+srv://")}var qJ=/^(?<protocol>[^/]+):\/\/(?:(?<username>[^:@]*)(?::(?<password>[^@]*))?@)?(?<hosts>(?!:)[^/?@]*)(?<rest>.*)/,n0=class extends Map{delete(e){return super.delete(this._normalizeKey(e))}get(e){return super.get(this._normalizeKey(e))}has(e){return super.has(this._normalizeKey(e))}set(e,r){return super.set(this._normalizeKey(e),r)}_normalizeKey(e){e=`${e}`;for(let r of this.keys())if(r.toLowerCase()===e.toLowerCase()){e=r;break}return e}};function LJ(t){return class extends t{append(r,n){return super.append(this._normalizeKey(r),n)}delete(r){return super.delete(this._normalizeKey(r))}get(r){return super.get(this._normalizeKey(r))}getAll(r){return super.getAll(this._normalizeKey(r))}has(r){return super.has(this._normalizeKey(r))}set(r,n){return super.set(this._normalizeKey(r),n)}keys(){return super.keys()}values(){return super.values()}entries(){return super.entries()}[Symbol.iterator](){return super[Symbol.iterator]()}_normalizeKey(r){return n0.prototype._normalizeKey.call(this,r)}}}var y6=class extends xJ.URL{},ti=class extends Error{get name(){return"MongoParseError"}},s0=class t extends y6{constructor(e,r={}){var n;let{looseValidation:s}=r;if(!s&&!kJ(e))throw new ti('Invalid scheme, expected connection string to start with "mongodb://" or "mongodb+srv://"');let i=e.match(qJ);if(!i)throw new ti(`Invalid connection string "${e}"`);let{protocol:o,username:u,password:a,hosts:c,rest:l}=(n=i.groups)!==null&&n!==void 0?n:{};if(!s){if(!o||!c)throw new ti(`Protocol and host list are required in "${e}"`);try{decodeURIComponent(u??""),decodeURIComponent(a??"")}catch(p){throw new ti(p.message)}let f=/[:/?#[\]@]/gi;if(u?.match(f))throw new ti(`Username contains unescaped characters ${u}`);if(!u||!a){let p=e.replace(`${o}://`,"");if(p.startsWith("@")||p.startsWith(":"))throw new ti("URI contained empty userinfo section")}if(a?.match(f))throw new ti("Password contains unescaped characters")}let h="";typeof u=="string"&&(h+=u),typeof a=="string"&&(h+=`:${a}`),h&&(h+="@");try{super(`${o.toLowerCase()}://${h}${F1}${l}`)}catch(f){throw s&&new t(e,{...r,looseValidation:!1}),typeof f.message=="string"&&(f.message=f.message.replace(F1,c)),f}if(this._hosts=c.split(","),!s){if(this.isSRV&&this.hosts.length!==1)throw new ti("mongodb+srv URI cannot have multiple service names");if(this.isSRV&&this.hosts.some(f=>f.includes(":")))throw new ti("mongodb+srv URI cannot have port number")}this.pathname||(this.pathname="/"),Object.setPrototypeOf(this.searchParams,LJ(this.searchParams.constructor).prototype)}get host(){return F1}set host(e){throw new Error("No single host for connection string")}get hostname(){return F1}set hostname(e){throw new Error("No single host for connection string")}get port(){return""}set port(e){throw new Error("No single host for connection string")}get href(){return this.toString()}set href(e){throw new Error("Cannot set href for connection strings")}get isSRV(){return this.protocol.includes("srv")}get hosts(){return this._hosts}set hosts(e){this._hosts=e}toString(){return super.toString().replace(F1,this.hosts.join(","))}clone(){return new t(this.toString(),{looseValidation:!0})}redact(e){return(0,PT.redactValidConnectionString)(this,e)}typedSearchParams(){return this.searchParams}[Symbol.for("nodejs.util.inspect.custom")](){let{href:e,origin:r,protocol:n,username:s,password:i,hosts:o,pathname:u,search:a,searchParams:c,hash:l}=this;return{href:e,origin:r,protocol:n,username:s,password:i,hosts:o,pathname:u,search:a,searchParams:c,hash:l}}};so.ConnectionString=s0;var g6=class extends n0{constructor(e){super();for(let r of(e??"").split(",")){if(!r)continue;let n=r.indexOf(":");n===-1?this.set(r,""):this.set(r.slice(0,n),r.slice(n+1))}}toString(){return[...this].map(e=>e.join(":")).join(",")}};so.CommaAndColonSeparatedRecord=g6;so.default=s0});var NT=g((oge,jJ)=>{jJ.exports={name:"mongodb",version:"6.12.0",description:"The official MongoDB driver for Node.js",main:"lib/index.js",files:["lib","src","etc/prepare.js","mongodb.d.ts","tsconfig.json"],types:"mongodb.d.ts",repository:{type:"git",url:"git@github.com:mongodb/node-mongodb-native.git"},keywords:["mongodb","driver","official"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},dependencies:{"@mongodb-js/saslprep":"^1.1.9",bson:"^6.10.1","mongodb-connection-string-url":"^3.0.0"},peerDependencies:{"@aws-sdk/credential-providers":"^3.188.0","@mongodb-js/zstd":"^1.1.0 || ^2.0.0","gcp-metadata":"^5.2.0",kerberos:"^2.0.1","mongodb-client-encryption":">=6.0.0 <7",snappy:"^7.2.2",socks:"^2.7.1"},peerDependenciesMeta:{"@aws-sdk/credential-providers":{optional:!0},"@mongodb-js/zstd":{optional:!0},kerberos:{optional:!0},snappy:{optional:!0},"mongodb-client-encryption":{optional:!0},"gcp-metadata":{optional:!0},socks:{optional:!0}},devDependencies:{"@aws-sdk/credential-providers":"^3.686.0","@iarna/toml":"^2.2.5","@istanbuljs/nyc-config-typescript":"^1.0.2","@microsoft/api-extractor":"^7.47.11","@microsoft/tsdoc-config":"^0.17.0","@mongodb-js/zstd":"^2.0.0","@types/chai":"^4.3.17","@types/chai-subset":"^1.3.5","@types/express":"^4.17.21","@types/kerberos":"^1.1.5","@types/mocha":"^10.0.9","@types/node":"^22.9.0","@types/saslprep":"^1.0.3","@types/semver":"^7.5.8","@types/sinon":"^17.0.3","@types/sinon-chai":"^3.2.12","@types/whatwg-url":"^11.0.5","@typescript-eslint/eslint-plugin":"8.4.0","@typescript-eslint/parser":"8.4.0",chai:"^4.4.1","chai-subset":"^1.6.0",chalk:"^4.1.2",eslint:"9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-mocha":"^10.4.1","eslint-plugin-prettier":"^5.2.1","eslint-plugin-simple-import-sort":"^12.1.1","eslint-plugin-tsdoc":"^0.3.0","eslint-plugin-unused-imports":"^4.1.4",express:"^4.21.1","gcp-metadata":"^5.3.0","js-yaml":"^4.1.0",mocha:"^10.8.2","mocha-sinon":"^2.1.2","mongodb-client-encryption":"^6.1.0","mongodb-legacy":"^6.1.3",nyc:"^15.1.0",prettier:"^3.3.3",semver:"^7.6.3",sinon:"^18.0.0","sinon-chai":"^3.7.0",snappy:"^7.2.2",socks:"^2.8.1","source-map-support":"^0.5.21","ts-node":"^10.9.2",tsd:"^0.31.2",typescript:"5.5","typescript-cached-transpile":"^0.0.6","v8-heapsnapshot":"^1.3.1",yargs:"^17.7.2"},license:"Apache-2.0",engines:{node:">=16.20.1"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},homepage:"https://github.com/mongodb/node-mongodb-native",scripts:{"build:evergreen":"node .evergreen/generate_evergreen_tasks.js","build:ts":"node ./node_modules/typescript/bin/tsc","build:dts":"npm run build:ts && api-extractor run && node etc/clean_definition_files.cjs && ESLINT_USE_FLAT_CONFIG=false eslint --no-ignore --fix mongodb.d.ts lib/beta.d.ts","build:docs":"./etc/docs/build.ts","build:typedoc":"typedoc","build:nightly":"node ./.github/scripts/nightly.mjs","check:bench":"node test/benchmarks/driverBench","check:coverage":"nyc npm run test:all","check:integration-coverage":"nyc npm run check:test","check:lambda":"mocha --config test/mocha_lambda.json test/integration/node-specific/examples/handler.test.js","check:lambda:aws":"mocha --config test/mocha_lambda.json test/integration/node-specific/examples/aws_handler.test.js","check:lint":"npm run build:dts && npm run check:dts && npm run check:eslint && npm run check:tsd","check:eslint":"npm run build:dts && ESLINT_USE_FLAT_CONFIG=false eslint -v && ESLINT_USE_FLAT_CONFIG=false eslint --max-warnings=0 --ext '.js,.ts' src test","check:tsd":"tsd --version && tsd","check:dependencies":"mocha test/action/dependency.test.ts","check:dts":"node ./node_modules/typescript/bin/tsc --noEmit mongodb.d.ts && tsd","check:search-indexes":"nyc mocha --config test/mocha_mongodb.json test/manual/search-index-management.prose.test.ts","check:test":"mocha --config test/mocha_mongodb.json test/integration","check:unit":"mocha test/unit","check:ts":"node ./node_modules/typescript/bin/tsc -v && node ./node_modules/typescript/bin/tsc --noEmit","check:atlas":"mocha --config test/manual/mocharc.json test/manual/atlas_connectivity.test.ts","check:resource-management":"mocha --config test/manual/mocharc.json test/manual/resource_management.test.ts","check:drivers-atlas-testing":"mocha --config test/mocha_mongodb.json test/atlas/drivers_atlas_testing.test.ts","check:adl":"mocha --config test/mocha_mongodb.json test/manual/atlas-data-lake-testing","check:aws":"nyc mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_aws.test.ts","check:oidc-auth":"mocha --config test/mocha_mongodb.json test/integration/auth/auth.spec.test.ts","check:oidc-test":"mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_oidc.prose.test.ts","check:oidc-azure":"mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_oidc_azure.prose.05.test.ts","check:oidc-gcp":"mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_oidc_gcp.prose.06.test.ts","check:oidc-k8s":"mocha --config test/mocha_mongodb.json test/integration/auth/mongodb_oidc_k8s.prose.07.test.ts","check:ocsp":"mocha --config test/manual/mocharc.json test/manual/ocsp_support.test.js","check:kerberos":"nyc mocha --config test/manual/mocharc.json test/manual/kerberos.test.ts","check:tls":"mocha --config test/manual/mocharc.json test/manual/tls_support.test.ts","check:ldap":"nyc mocha --config test/manual/mocharc.json test/manual/ldap.test.js","check:socks5":"mocha --config test/manual/mocharc.json test/manual/socks5.test.ts","check:csfle":"mocha --config test/mocha_mongodb.json test/integration/client-side-encryption","check:snappy":"mocha test/unit/assorted/snappy.test.js","check:x509":"mocha test/manual/x509_auth.test.ts","fix:eslint":"npm run check:eslint -- --fix",prepare:"node etc/prepare.js","preview:docs":"ts-node etc/docs/preview.ts",test:"npm run check:lint && npm run test:all","test:all":"npm run check:unit && npm run check:test","update:docs":"npm run build:docs -- --yes"},tsd:{directory:"test/types",compilerOptions:{strict:!0,target:"esnext",module:"commonjs",moduleResolution:"node"}}}});var E6=g(oa=>{"use strict";d();Object.defineProperty(oa,"__esModule",{value:!0});oa.LimitedSizeDocument=void 0;oa.makeClientMetadata=VJ;oa.addContainerMetadata=WJ;oa.getFAASEnv=$T;var R1=require("os"),v1=require("process"),Oc=Ue(),FT=Z(),UJ=ae(),RT=NT().version,$1=class{constructor(e){this.maxSize=e,this.document=new Map,this.documentSize=5}ifItFitsItSits(e,r){let n=Oc.BSON.serialize(new Map().set(e,r)).byteLength-5;return n+this.documentSize>this.maxSize?!1:(this.documentSize+=n,this.document.set(e,r),!0)}toObject(){return Oc.BSON.deserialize(Oc.BSON.serialize(this.document),{promoteLongs:!1,promoteBuffers:!1,promoteValues:!1,useBigInt64:!1})}};oa.LimitedSizeDocument=$1;function VJ(t){let e=new $1(512),{appName:r=""}=t;if(r.length>0){let l=Buffer.byteLength(r,"utf8")<=128?t.appName:Buffer.from(r,"utf8").subarray(0,128).toString("utf8");e.ifItFitsItSits("application",{name:l})}let{name:n="",version:s="",platform:i=""}=t.driverInfo,o={name:n.length>0?`nodejs|${n}`:"nodejs",version:s.length>0?`${RT}|${s}`:RT};if(!e.ifItFitsItSits("driver",o))throw new FT.MongoInvalidArgumentError("Unable to include driverInfo name and version, metadata cannot exceed 512 bytes");let u=HJ();if(i.length>0&&(u=`${u}|${i}`),!e.ifItFitsItSits("platform",u))throw new FT.MongoInvalidArgumentError("Unable to include driverInfo platform, metadata cannot exceed 512 bytes");let a=new Map().set("name",v1.platform).set("architecture",v1.arch).set("version",R1.release()).set("type",R1.type());if(!e.ifItFitsItSits("os",a)){for(let l of a.keys())if(a.delete(l),a.size===0||e.ifItFitsItSits("os",a))break}let c=$T();if(c!=null&&!e.ifItFitsItSits("env",c)){for(let l of c.keys())if(c.delete(l),c.size===0||e.ifItFitsItSits("env",c))break}return e.toObject()}var vT;async function zJ(){let t={};vT??=(0,UJ.fileIsAccessible)("/.dockerenv");let e=await vT,{KUBERNETES_SERVICE_HOST:r=""}=v1.env,n=r.length>0;return e&&(t.runtime="docker"),n&&(t.orchestrator="kubernetes"),t}async function WJ(t){let e=await zJ();if(Object.keys(e).length===0)return t;let r=new $1(512),n={...t?.env,container:e};for(let[s,i]of Object.entries(t))s!=="env"?r.ifItFitsItSits(s,i):r.ifItFitsItSits("env",n)||r.ifItFitsItSits("env",i);return"env"in t||r.ifItFitsItSits("env",n),r.toObject()}function $T(){let{AWS_EXECUTION_ENV:t="",AWS_LAMBDA_RUNTIME_API:e="",FUNCTIONS_WORKER_RUNTIME:r="",K_SERVICE:n="",FUNCTION_NAME:s="",VERCEL:i="",AWS_LAMBDA_FUNCTION_MEMORY_SIZE:o="",AWS_REGION:u="",FUNCTION_MEMORY_MB:a="",FUNCTION_REGION:c="",FUNCTION_TIMEOUT_SEC:l="",VERCEL_REGION:h=""}=v1.env,f=t.startsWith("AWS_Lambda_")||e.length>0,p=r.length>0,m=n.length>0||s.length>0,y=i.length>0,A=new Map;return y&&!(p||m)?(h.length>0&&A.set("region",h),A.set("name","vercel"),A):f&&!(p||m||y)?(u.length>0&&A.set("region",u),o.length>0&&Number.isInteger(+o)&&A.set("memory_mb",new Oc.Int32(o)),A.set("name","aws.lambda"),A):p&&!(m||f||y)?(A.set("name","azure.func"),A):m&&!(p||f||y)?(c.length>0&&A.set("region",c),a.length>0&&Number.isInteger(+a)&&A.set("memory_mb",new Oc.Int32(a)),l.length>0&&Number.isInteger(+l)&&A.set("timeout_sec",new Oc.Int32(l)),A.set("name","gcp.func"),A):null}function HJ(){return"Deno"in globalThis?`Deno v${typeof Deno?.version?.deno=="string"?Deno?.version?.deno:"0.0.0-unknown"}, ${R1.endianness()}`:"Bun"in globalThis?`Bun v${typeof Bun?.version=="string"?Bun?.version:"0.0.0-unknown"}, ${R1.endianness()}`:`Node.js ${v1.version}, ${R1.endianness()}`}});var k1=g(_n=>{"use strict";d();Object.defineProperty(_n,"__esModule",{value:!0});_n.OpCompressedRequest=_n.OpMsgResponse=_n.OpMsgRequest=_n.DocumentSequence=_n.OpReply=_n.OpQueryRequest=void 0;var bc=Ue(),x1=Z(),_6=q1(),wc=Lu(),Cc=0,GJ=2,KJ=4,YJ=8,QJ=16,JJ=32,XJ=64,ZJ=128,eX=1,tX=2,rX=4,nX=8,sX=bc.BSON.onDemand.ByteUtils.encodeUTF8Into,S6=class t{constructor(e,r,n){this.databaseName=e,this.query=r,this.moreToCome=!1;let s=`${e}.$cmd`;if(typeof e!="string")throw new x1.MongoRuntimeError("Database name must be a string for a query");if(r==null)throw new x1.MongoRuntimeError("A query document must be specified for query");if(s.indexOf("\0")!==-1)throw new x1.MongoRuntimeError("Namespace cannot contain a null character");this.ns=s,this.numberToSkip=n.numberToSkip||0,this.numberToReturn=n.numberToReturn||0,this.returnFieldSelector=n.returnFieldSelector||void 0,this.requestId=n.requestId??t.getRequestId(),this.pre32Limit=n.pre32Limit,this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.batchSize=this.numberToReturn,this.tailable=!1,this.secondaryOk=typeof n.secondaryOk=="boolean"?n.secondaryOk:!1,this.oplogReplay=!1,this.noCursorTimeout=!1,this.awaitData=!1,this.exhaust=!1,this.partial=!1}incRequestId(){this.requestId=Cc++}nextRequestId(){return Cc+1}static getRequestId(){return++Cc}toBin(){let e=[],r=null,n=0;this.tailable&&(n|=GJ),this.secondaryOk&&(n|=KJ),this.oplogReplay&&(n|=YJ),this.noCursorTimeout&&(n|=QJ),this.awaitData&&(n|=JJ),this.exhaust&&(n|=XJ),this.partial&&(n|=ZJ),this.batchSize!==this.numberToReturn&&(this.numberToReturn=this.batchSize);let s=Buffer.alloc(4*4+4+Buffer.byteLength(this.ns)+1+4+4);e.push(s);let i=bc.serialize(this.query,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined});e.push(i),this.returnFieldSelector&&Object.keys(this.returnFieldSelector).length>0&&(r=bc.serialize(this.returnFieldSelector,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined}),e.push(r));let o=s.length+i.length+(r?r.length:0),u=4;return s[3]=o>>24&255,s[2]=o>>16&255,s[1]=o>>8&255,s[0]=o&255,s[u+3]=this.requestId>>24&255,s[u+2]=this.requestId>>16&255,s[u+1]=this.requestId>>8&255,s[u]=this.requestId&255,u=u+4,s[u+3]=0,s[u+2]=0,s[u+1]=0,s[u]=0,u=u+4,s[u+3]=wc.OP_QUERY>>24&255,s[u+2]=wc.OP_QUERY>>16&255,s[u+1]=wc.OP_QUERY>>8&255,s[u]=wc.OP_QUERY&255,u=u+4,s[u+3]=n>>24&255,s[u+2]=n>>16&255,s[u+1]=n>>8&255,s[u]=n&255,u=u+4,u=u+s.write(this.ns,u,"utf8")+1,s[u-1]=0,s[u+3]=this.numberToSkip>>24&255,s[u+2]=this.numberToSkip>>16&255,s[u+1]=this.numberToSkip>>8&255,s[u]=this.numberToSkip&255,u=u+4,s[u+3]=this.numberToReturn>>24&255,s[u+2]=this.numberToReturn>>16&255,s[u+1]=this.numberToReturn>>8&255,s[u]=this.numberToReturn&255,u=u+4,e}};_n.OpQueryRequest=S6;var O6=class{constructor(e,r,n,s){this.index=0,this.sections=[],this.moreToCome=!1,this.parsed=!1,this.raw=e,this.data=n,this.opts=s??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];if(this.index=20,this.responseFlags=this.data.readInt32LE(0),this.cursorId=new bc.Long(this.data.readInt32LE(4),this.data.readInt32LE(8)),this.startingFrom=this.data.readInt32LE(12),this.numberReturned=this.data.readInt32LE(16),this.numberReturned<0||this.numberReturned>2**32-1)throw new RangeError(`OP_REPLY numberReturned is an invalid array length ${this.numberReturned}`);this.cursorNotFound=(this.responseFlags&eX)!==0,this.queryFailure=(this.responseFlags&tX)!==0,this.shardConfigStale=(this.responseFlags&rX)!==0,this.awaitCapable=(this.responseFlags&nX)!==0;for(let e=0;e<this.numberReturned;e++){let r=this.data[this.index]|this.data[this.index+1]<<8|this.data[this.index+2]<<16|this.data[this.index+3]<<24,n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index=this.index+r}return this.parsed=!0,this.sections[0]}};_n.OpReply=O6;var kT=1,qT=2,LT=65536,i0=class{constructor(e,r){this.field=e,this.documents=[],this.chunks=[],this.serializedDocumentsLength=0;let n=Buffer.allocUnsafe(5+this.field.length+1);if(n[0]=1,sX(n,`${this.field}\0`,5),this.chunks.push(n),this.header=n,r)for(let s of r)this.push(s,bc.serialize(s))}push(e,r){return this.serializedDocumentsLength+=r.length,this.documents.push(e),this.chunks.push(r),this.header?.writeInt32LE(4+this.field.length+1+this.serializedDocumentsLength,1),this.serializedDocumentsLength+this.header.length}toBin(){return Buffer.concat(this.chunks)}};_n.DocumentSequence=i0;var o0=class t{constructor(e,r,n){if(this.databaseName=e,this.command=r,this.options=n,r==null)throw new x1.MongoInvalidArgumentError("Query document must be specified for query");this.command.$db=e,this.options=n??{},this.requestId=n.requestId?n.requestId:t.getRequestId(),this.serializeFunctions=typeof n.serializeFunctions=="boolean"?n.serializeFunctions:!1,this.ignoreUndefined=typeof n.ignoreUndefined=="boolean"?n.ignoreUndefined:!1,this.checkKeys=typeof n.checkKeys=="boolean"?n.checkKeys:!1,this.maxBsonSize=n.maxBsonSize||1024*1024*16,this.checksumPresent=!1,this.moreToCome=n.moreToCome??r.writeConcern?.w===0,this.exhaustAllowed=typeof n.exhaustAllowed=="boolean"?n.exhaustAllowed:!1}toBin(){let e=[],r=0;this.checksumPresent&&(r|=kT),this.moreToCome&&(r|=qT),this.exhaustAllowed&&(r|=LT);let n=Buffer.alloc(4*4+4);e.push(n);let s=n.length,i=this.command;return s+=this.makeSections(e,i),n.writeInt32LE(s,0),n.writeInt32LE(this.requestId,4),n.writeInt32LE(0,8),n.writeInt32LE(wc.OP_MSG,12),n.writeUInt32LE(r,16),e}makeSections(e,r){let n=this.extractDocumentSequences(r),s=Buffer.allocUnsafe(1);s[0]=0;let i=this.serializeBson(r);return e.push(s),e.push(i),e.push(n),s.length+i.length+n.length}extractDocumentSequences(e){let r=[];for(let[n,s]of Object.entries(e))s instanceof i0&&(r.push(s.toBin()),delete e[n]);return r.length>0?Buffer.concat(r):Buffer.alloc(0)}serializeBson(e){return bc.serialize(e,{checkKeys:this.checkKeys,serializeFunctions:this.serializeFunctions,ignoreUndefined:this.ignoreUndefined})}static getRequestId(){return Cc=Cc+1&2147483647,Cc}};_n.OpMsgRequest=o0;var w6=class{constructor(e,r,n,s){this.index=0,this.sections=[],this.parsed=!1,this.raw=e,this.data=n,this.opts=s??{useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},this.length=r.length,this.requestId=r.requestId,this.responseTo=r.responseTo,this.opCode=r.opCode,this.fromCompressed=r.fromCompressed,this.responseFlags=n.readInt32LE(0),this.checksumPresent=(this.responseFlags&kT)!==0,this.moreToCome=(this.responseFlags&qT)!==0,this.exhaustAllowed=(this.responseFlags&LT)!==0,this.useBigInt64=typeof this.opts.useBigInt64=="boolean"?this.opts.useBigInt64:!1,this.promoteLongs=typeof this.opts.promoteLongs=="boolean"?this.opts.promoteLongs:!0,this.promoteValues=typeof this.opts.promoteValues=="boolean"?this.opts.promoteValues:!0,this.promoteBuffers=typeof this.opts.promoteBuffers=="boolean"?this.opts.promoteBuffers:!1,this.bsonRegExp=typeof this.opts.bsonRegExp=="boolean"?this.opts.bsonRegExp:!1}isParsed(){return this.parsed}parse(){if(this.parsed)return this.sections[0];for(this.index=4;this.index<this.data.length;){let e=this.data.readUInt8(this.index++);if(e===0){let r=this.data.readUInt32LE(this.index),n=this.data.subarray(this.index,this.index+r);this.sections.push(n),this.index+=r}else if(e===1)throw new x1.MongoRuntimeError("OP_MSG Payload Type 1 detected unsupported protocol")}return this.parsed=!0,this.sections[0]}};_n.OpMsgResponse=w6;var A6=16,xT=9,C6=class{constructor(e,r){this.command=e,this.options=r}static canCompress(e){let r=e instanceof o0?e.command:e.query,n=Object.keys(r)[0];return!_6.uncompressibleCommands.has(n)}async toBin(){let e=Buffer.concat(this.command.toBin()),r=e.slice(A6),n=e.readInt32LE(12),s=await(0,_6.compress)(this.options,r),i=Buffer.alloc(A6);i.writeInt32LE(A6+xT+s.length,0),i.writeInt32LE(this.command.requestId,4),i.writeInt32LE(0,8),i.writeInt32LE(wc.OP_COMPRESSED,12);let o=Buffer.alloc(xT);return o.writeInt32LE(n,0),o.writeInt32LE(r.length,4),o.writeUInt8(_6.Compressor[this.options.agreedCompressor],8),[i,o,s]}};_n.OpCompressedRequest=C6});var q1=g(wr=>{"use strict";d();Object.defineProperty(wr,"__esModule",{value:!0});wr.uncompressibleCommands=wr.Compressor=void 0;wr.compress=cX;wr.decompress=zT;wr.compressCommand=lX;wr.decompressResponse=hX;var jT=require("util"),u0=require("zlib"),iX=jt(),UT=Xs(),T6=Z(),Tc=k1(),b6=Lu();wr.Compressor=Object.freeze({none:0,snappy:1,zlib:2,zstd:3});wr.uncompressibleCommands=new Set([iX.LEGACY_HELLO_COMMAND,"saslStart","saslContinue","getnonce","authenticate","createUser","updateUser","copydbSaslStart","copydbgetnonce","copydb"]);var oX=3,uX=(0,jT.promisify)(u0.inflate.bind(u0)),aX=(0,jT.promisify)(u0.deflate.bind(u0)),nu,ua=null;function VT(){if(ua==null){let t=(0,UT.getSnappy)();if("kModuleError"in t)throw t.kModuleError;ua=t}return ua}async function cX(t,e){let r={};switch(t.agreedCompressor){case"snappy":return ua??=VT(),await ua.compress(e);case"zstd":{if(WT(),"kModuleError"in nu)throw nu.kModuleError;return await nu.compress(e,oX)}case"zlib":return t.zlibCompressionLevel&&(r.level=t.zlibCompressionLevel),await aX(e,r);default:throw new T6.MongoInvalidArgumentError(`Unknown compressor ${t.agreedCompressor} failed to compress`)}}async function zT(t,e){if(t!==wr.Compressor.snappy&&t!==wr.Compressor.zstd&&t!==wr.Compressor.zlib&&t!==wr.Compressor.none)throw new T6.MongoDecompressionError(`Server sent message compressed using an unsupported compressor. (Received compressor ID ${t})`);switch(t){case wr.Compressor.snappy:return ua??=VT(),await ua.uncompress(e,{asBuffer:!0});case wr.Compressor.zstd:{if(WT(),"kModuleError"in nu)throw nu.kModuleError;return await nu.decompress(e)}case wr.Compressor.zlib:return await uX(e);default:return e}}function WT(){nu||(nu=(0,UT.getZstdLibrary)())}var L1=16;async function lX(t,e){let n=await(e.agreedCompressor==="none"||!Tc.OpCompressedRequest.canCompress(t)?t:new Tc.OpCompressedRequest(t,{agreedCompressor:e.agreedCompressor??"none",zlibCompressionLevel:e.zlibCompressionLevel??0})).toBin();return Buffer.concat(n)}async function hX(t){let e={length:t.readInt32LE(0),requestId:t.readInt32LE(4),responseTo:t.readInt32LE(8),opCode:t.readInt32LE(12)};if(e.opCode!==b6.OP_COMPRESSED){let u=e.opCode===b6.OP_MSG?Tc.OpMsgResponse:Tc.OpReply,a=t.subarray(L1);return new u(t,e,a)}let r={...e,fromCompressed:!0,opCode:t.readInt32LE(L1),length:t.readInt32LE(L1+4)},n=t[L1+8],s=t.slice(L1+9),i=r.opCode===b6.OP_MSG?Tc.OpMsgResponse:Tc.OpReply,o=await zT(n,s);if(o.length!==r.length)throw new T6.MongoDecompressionError("Message body and message header must be the same length");return new i(t,r,o)}});var M6=g(rr=>{"use strict";d();Object.defineProperty(rr,"__esModule",{value:!0});rr.hmacSha256Hook=rr.hmacSha512Hook=rr.aes256CtrDecryptHook=rr.aes256CtrEncryptHook=rr.aes256CbcDecryptHook=rr.aes256CbcEncryptHook=void 0;rr.makeAES256Hook=U1;rr.randomHook=fX;rr.sha256Hook=dX;rr.makeHmacHook=D6;rr.signRsaSha256Hook=pX;var j1=require("crypto");function U1(t,e){return function(r,n,s,i){let o;try{let u=j1[t](e,r,n);u.setAutoPadding(!1),o=u.update(s);let a=u.final();a.length>0&&(o=Buffer.concat([o,a]))}catch(u){return u}return o.copy(i),o.length}}function fX(t,e){try{j1.randomFillSync(t,0,e)}catch(r){return r}return e}function dX(t,e){let r;try{r=j1.createHash("sha256").update(t).digest()}catch(n){return n}return r.copy(e),r.length}function D6(t){return(e,r,n)=>{let s;try{s=j1.createHmac(t,e).update(r).digest()}catch(i){return i}return s.copy(n),s.length}}function pX(t,e,r){let n;try{let s=j1.createSign("sha256WithRSAEncryption"),i=Buffer.from(`-----BEGIN PRIVATE KEY-----
${t.toString("base64")}
-----END PRIVATE KEY-----
`);n=s.update(e).end().sign(i)}catch(s){return s}return n.copy(r),n.length}rr.aes256CbcEncryptHook=U1("createCipheriv","aes-256-cbc");rr.aes256CbcDecryptHook=U1("createDecipheriv","aes-256-cbc");rr.aes256CtrEncryptHook=U1("createCipheriv","aes-256-ctr");rr.aes256CtrDecryptHook=U1("createDecipheriv","aes-256-ctr");rr.hmacSha512Hook=D6("sha512");rr.hmacSha256Hook=D6("sha256")});var Dc=g(An=>{"use strict";d();Object.defineProperty(An,"__esModule",{value:!0});An.MongoCryptKMSRequestNetworkTimeoutError=An.MongoCryptAzureKMSRequestError=An.MongoCryptCreateEncryptedCollectionError=An.MongoCryptCreateDataKeyError=An.MongoCryptInvalidArgumentError=An.MongoCryptError=void 0;var mX=Z(),su=class extends mX.MongoError{constructor(e,r={}){super(e,r)}get name(){return"MongoCryptError"}};An.MongoCryptError=su;var B6=class extends su{constructor(e){super(e)}get name(){return"MongoCryptInvalidArgumentError"}};An.MongoCryptInvalidArgumentError=B6;var I6=class extends su{constructor(e,{cause:r}){super(`Unable to complete creating data keys: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateDataKeyError"}};An.MongoCryptCreateDataKeyError=I6;var P6=class extends su{constructor(e,{cause:r}){super(`Unable to create collection: ${r.message}`,{cause:r}),this.encryptedFields=e}get name(){return"MongoCryptCreateEncryptedCollectionError"}};An.MongoCryptCreateEncryptedCollectionError=P6;var N6=class extends su{constructor(e,r){super(e),this.body=r}get name(){return"MongoCryptAzureKMSRequestError"}};An.MongoCryptAzureKMSRequestError=N6;var F6=class extends su{get name(){return"MongoCryptKMSRequestNetworkTimeoutError"}};An.MongoCryptKMSRequestNetworkTimeoutError=F6});var x6=g(iu=>{"use strict";d();Object.defineProperty(iu,"__esModule",{value:!0});iu.LegacyAWSTemporaryCredentialProvider=iu.AWSSDKCredentialProvider=iu.AWSTemporaryCredentialProvider=void 0;var yX=Xs(),gX=Z(),a0=ae(),EX="http://169.254.170.2",R6="http://169.254.169.254",HT="/latest/meta-data/iam/security-credentials",io=class t{static get awsSDK(){return t._awsSDK??=(0,yX.getAwsCredentialProvider)(),t._awsSDK}static get isAWSSDKInstalled(){return!("kModuleError"in t.awsSDK)}};iu.AWSTemporaryCredentialProvider=io;var v6=class extends io{get provider(){if("kModuleError"in io.awsSDK)throw io.awsSDK.kModuleError;if(this._provider)return this._provider;let{AWS_STS_REGIONAL_ENDPOINTS:e="",AWS_REGION:r=""}=process.env;e=e.toLowerCase(),r=r.toLowerCase();let n=r.length!==0&&e.length!==0,i=e==="regional"||e==="legacy"&&!new Set(["ap-northeast-1","ap-south-1","ap-southeast-1","ap-southeast-2","aws-global","ca-central-1","eu-central-1","eu-north-1","eu-west-1","eu-west-2","eu-west-3","sa-east-1","us-east-1","us-east-2","us-west-1","us-west-2"]).has(r);return this._provider=n&&i?io.awsSDK.fromNodeProviderChain({clientConfig:{region:r}}):io.awsSDK.fromNodeProviderChain(),this._provider}async getCredentials(){try{let e=await this.provider();return{AccessKeyId:e.accessKeyId,SecretAccessKey:e.secretAccessKey,Token:e.sessionToken,Expiration:e.expiration}}catch(e){throw new gX.MongoAWSError(e.message,{cause:e})}}};iu.AWSSDKCredentialProvider=v6;var $6=class extends io{async getCredentials(){if(process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI)return await(0,a0.request)(`${EX}${process.env.AWS_CONTAINER_CREDENTIALS_RELATIVE_URI}`);let e=await(0,a0.request)(`${R6}/latest/api/token`,{method:"PUT",json:!1,headers:{"X-aws-ec2-metadata-token-ttl-seconds":30}}),r=await(0,a0.request)(`${R6}/${HT}`,{json:!1,headers:{"X-aws-ec2-metadata-token":e}});return await(0,a0.request)(`${R6}/${HT}/${r}`,{headers:{"X-aws-ec2-metadata-token":e}})}};iu.LegacyAWSTemporaryCredentialProvider=$6});var GT=g(k6=>{"use strict";d();Object.defineProperty(k6,"__esModule",{value:!0});k6.loadAWSCredentials=AX;var _X=x6();async function AX(t){let e=new _X.AWSSDKCredentialProvider,{SecretAccessKey:r="",AccessKeyId:n="",Token:s}=await e.getCredentials(),i={secretAccessKey:r,accessKeyId:n};return s!=null&&(i.sessionToken=s),{...t,aws:i}}});var q6=g(Sn=>{"use strict";d();Object.defineProperty(Sn,"__esModule",{value:!0});Sn.tokenCache=Sn.AzureCredentialCache=Sn.AZURE_BASE_URL=void 0;Sn.addAzureParams=KT;Sn.prepareRequest=YT;Sn.fetchAzureKMSToken=QT;Sn.loadAzureCredentials=bX;var SX=Z(),OX=ae(),Mc=Dc(),wX=6e3;Sn.AZURE_BASE_URL="http://169.254.169.254/metadata/identity/oauth2/token?";var c0=class{constructor(){this.cachedToken=null}async getToken(){return(this.cachedToken==null||this.needsRefresh(this.cachedToken))&&(this.cachedToken=await this._getToken()),{accessToken:this.cachedToken.accessToken}}needsRefresh(e){return e.expiresOnTimestamp-Date.now()<=wX}resetCache(){this.cachedToken=null}_getToken(){return QT()}};Sn.AzureCredentialCache=c0;Sn.tokenCache=new c0;async function CX(t){let{status:e,body:r}=t,n=(()=>{try{return JSON.parse(r)}catch{throw new Mc.MongoCryptAzureKMSRequestError("Malformed JSON body in GET request.")}})();if(e!==200)throw new Mc.MongoCryptAzureKMSRequestError("Unable to complete request.",n);if(!n.access_token)throw new Mc.MongoCryptAzureKMSRequestError("Malformed response body - missing field `access_token`.");if(!n.expires_in)throw new Mc.MongoCryptAzureKMSRequestError("Malformed response body - missing field `expires_in`.");let s=Number(n.expires_in)*1e3;if(Number.isNaN(s))throw new Mc.MongoCryptAzureKMSRequestError("Malformed response body - unable to parse int from `expires_in` field.");return{accessToken:n.access_token,expiresOnTimestamp:Date.now()+s}}function KT(t,e,r){return t.searchParams.append("api-version","2018-02-01"),t.searchParams.append("resource",e),r&&t.searchParams.append("client_id",r),t}function YT(t){let e=new URL(t.url?.toString()??Sn.AZURE_BASE_URL);return KT(e,"https://vault.azure.net"),{headers:{...t.headers,"Content-Type":"application/json",Metadata:!0},url:e}}async function QT(t={}){let{headers:e,url:r}=YT(t);try{let n=await(0,OX.get)(r,{headers:e});return await CX(n)}catch(n){throw n instanceof SX.MongoNetworkTimeoutError?new Mc.MongoCryptAzureKMSRequestError(`[Azure KMS] ${n.message}`):n}}async function bX(t){let e=await Sn.tokenCache.getToken();return{...t,azure:e}}});var JT=g(L6=>{"use strict";d();Object.defineProperty(L6,"__esModule",{value:!0});L6.loadGCPCredentials=DX;var TX=Xs();async function DX(t){let e=(0,TX.getGcpMetadata)();if("kModuleError"in e)return t;let{access_token:r}=await e.instance({property:"service-accounts/default/token"});return{...t,gcp:{accessToken:r}}}});var j6=g(h0=>{"use strict";d();Object.defineProperty(h0,"__esModule",{value:!0});h0.isEmptyCredentials=l0;h0.refreshKMSCredentials=PX;var MX=GT(),BX=q6(),IX=JT();function l0(t,e){let r=e[t];return r==null?!1:typeof r=="object"&&Object.keys(r).length===0}async function PX(t){let e=t;return l0("aws",t)&&(e=await(0,MX.loadAWSCredentials)(e)),l0("gcp",t)&&(e=await(0,IX.loadGCPCredentials)(e)),l0("azure",t)&&(e=await(0,BX.loadAzureCredentials)(e)),e}});var V6=g(d0=>{"use strict";d();Object.defineProperty(d0,"__esModule",{value:!0});d0.StateMachine=void 0;var XT=require("fs/promises"),NX=require("net"),FX=require("tls"),oo=Ue(),ZT=qr(),RX=Xs(),vX=Z(),eD=$r(),Bc=ae(),$X=p0(),ou=Dc(),V1=null;function xX(){if(V1==null){let t=(0,RX.getSocks)();if("kModuleError"in t)throw t.kModuleError;V1=t}return V1}var f0=0,rD=1,nD=2,sD=3,iD=7,oD=4,uD=5,aD=6,kX=443,qX=new Map([[f0,"MONGOCRYPT_CTX_ERROR"],[rD,"MONGOCRYPT_CTX_NEED_MONGO_COLLINFO"],[nD,"MONGOCRYPT_CTX_NEED_MONGO_MARKINGS"],[sD,"MONGOCRYPT_CTX_NEED_MONGO_KEYS"],[iD,"MONGOCRYPT_CTX_NEED_KMS_CREDENTIALS"],[oD,"MONGOCRYPT_CTX_NEED_KMS"],[uD,"MONGOCRYPT_CTX_READY"],[aD,"MONGOCRYPT_CTX_DONE"]]),LX=["tlsInsecure","tlsAllowInvalidCertificates","tlsAllowInvalidHostnames","tlsDisableOCSPEndpointCheck","tlsDisableCertificateRevocationCheck"];function tD(t){process.env.MONGODB_CRYPT_DEBUG&&console.error(t)}var jX,U6=class{constructor(e,r=(0,oo.pluckBSONSerializeOptions)(e)){this.options=e,this.bsonOptions=r}async execute(e,r,n){let s=e._keyVaultNamespace,i=e._keyVaultClient,o=e._metaDataClient,u=e._mongocryptdClient,a=e._mongocryptdManager,c=null;for(;r.state!==aD&&r.state!==f0;)switch(tD(`[context#${r.id}] ${qX.get(r.state)||r.state}`),r.state){case rD:{let l=(0,oo.deserialize)(r.nextMongoOperation());if(!o)throw new ou.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_COLLINFO but metadata client is undefined");let h=await this.fetchCollectionInfo(o,r.ns,l,n);h&&r.addMongoOperationResponse(h),r.finishMongoOperation();break}case nD:{let l=r.nextMongoOperation();if(!u)throw new ou.MongoCryptError("unreachable state machine state: entered MONGOCRYPT_CTX_NEED_MONGO_MARKINGS but mongocryptdClient is undefined");let h=a?await a.withRespawn(this.markCommand.bind(this,u,r.ns,l,n)):await this.markCommand(u,r.ns,l,n);r.addMongoOperationResponse(h),r.finishMongoOperation();break}case sD:{let l=r.nextMongoOperation(),h=await this.fetchKeys(i,s,l,n);h.length===0&&(c=jX??=(0,oo.serialize)({v:[]}));for await(let f of h)r.addMongoOperationResponse((0,oo.serialize)(f));r.finishMongoOperation();break}case iD:{let l=await e.askForKMSCredentials();r.provideKMSProviders((0,oo.serialize)(l));break}case oD:{await Promise.all(this.requests(r,n)),r.finishKMSRequests();break}case uD:{let l=r.finalize();if(r.state===f0){let h=r.status.message||"Finalization error";throw new ou.MongoCryptError(h)}c=l;break}default:throw new ou.MongoCryptError(`Unknown state: ${r.state}`)}if(r.state===f0||c==null){let l=r.status.message;throw l||tD("unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message."),new ou.MongoCryptError(l??"unidentifiable error in MongoCrypt - received an error status from `libmongocrypt` but received no error message.")}return c}async kmsRequest(e,r){let n=e.endpoint.split(":"),s=n[1]!=null?Number.parseInt(n[1],10):kX,i=(0,$X.autoSelectSocketOptions)(this.options.socketOptions||{}),o={host:n[0],servername:n[0],port:s,...i},u=e.message,a=new Bc.BufferPool,c=new NX.Socket,l;function h(){for(let O of[l,c])O&&(O.removeAllListeners(),O.destroy())}function f(O){return new ou.MongoCryptError("KMS request failed",{cause:O})}function p(){return new ou.MongoCryptError("KMS request closed")}let m=this.options.tlsOptions;if(m){let O=e.kmsProvider,D=m[O];if(D){let b=this.validateTlsOptions(O,D);if(b)throw b;try{await this.setTlsOptions(D,o)}catch(N){throw f(N)}}}let{promise:y,reject:A,resolve:S}=(0,Bc.promiseWithResolvers)();c.once("error",O=>A(f(O))).once("close",()=>A(p())).once("connect",()=>S());try{if(this.options.proxyOptions&&this.options.proxyOptions.proxyHost){let N={host:this.options.proxyOptions.proxyHost,port:this.options.proxyOptions.proxyPort||1080,...i};c.connect(N),await y;try{V1??=xX(),o.socket=(await V1.SocksClient.createConnection({existing_socket:c,command:"connect",destination:{host:o.host,port:o.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:this.options.proxyOptions.proxyUsername,password:this.options.proxyOptions.proxyPassword}})).socket}catch(R){throw f(R)}}l=FX.connect(o,()=>{l.write(u)});let{promise:O,reject:D,resolve:b}=(0,Bc.promiseWithResolvers)();l.once("error",N=>D(f(N))).once("close",()=>D(p())).on("data",N=>{for(a.append(N);e.bytesNeeded>0&&a.length;){let R=Math.min(e.bytesNeeded,a.length);e.addResponse(a.read(R))}e.bytesNeeded<=0&&b()}),await(r?.csotEnabled()?Promise.all([O,eD.Timeout.expires(r?.remainingTimeMS)]):O)}catch(O){throw O instanceof eD.TimeoutError?new vX.MongoOperationTimeoutError("KMS request timed out"):O}finally{h()}}*requests(e,r){for(let n=e.nextKMSRequest();n!=null;n=e.nextKMSRequest())yield this.kmsRequest(n,r)}validateTlsOptions(e,r){let n=Object.keys(r);for(let s of LX)if(n.includes(s))return new ou.MongoCryptError(`Insecure TLS options prohibited for ${e}: ${s}`)}async setTlsOptions(e,r){if(e.tlsCertificateKeyFile){let n=await XT.readFile(e.tlsCertificateKeyFile);r.cert=r.key=n}e.tlsCAFile&&(r.ca=await XT.readFile(e.tlsCAFile)),e.tlsCertificateKeyFilePassword&&(r.passphrase=e.tlsCertificateKeyFilePassword)}async fetchCollectionInfo(e,r,n,s){let{db:i}=Bc.MongoDBCollectionNamespace.fromString(r),u=await e.db(i).listCollections(n,{promoteLongs:!1,promoteValues:!1,timeoutContext:s&&new ZT.CursorTimeoutContext(s,Symbol())}).toArray();return u.length>0?(0,oo.serialize)(u[0]):null}async markCommand(e,r,n,s){let{db:i}=Bc.MongoDBCollectionNamespace.fromString(r),o={promoteLongs:!1,promoteValues:!1},u=(0,oo.deserialize)(n,o),a=await e.db(i).command(u,{...o,...s?.csotEnabled()?{timeoutMS:s?.remainingTimeMS}:void 0});return(0,oo.serialize)(a,this.bsonOptions)}fetchKeys(e,r,n,s){let{db:i,collection:o}=Bc.MongoDBCollectionNamespace.fromString(r);return e.db(i).collection(o,{readConcern:{level:"majority"}}).find((0,oo.deserialize)(n),{timeoutContext:s&&new ZT.CursorTimeoutContext(s,Symbol())}).toArray()}};d0.StateMachine=U6});var p0=g(H1=>{"use strict";d();Object.defineProperty(H1,"__esModule",{value:!0});H1.ClientEncryption=void 0;H1.autoSelectSocketOptions=W1;var On=Ue(),UX=Xs(),z1=$r(),wn=ae(),VX=M6(),aa=Dc(),zX=j6(),m0=V6(),z6=class t{static getMongoCrypt(){let e=(0,UX.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){this._client=e,this._proxyOptions=r.proxyOptions??{},this._tlsOptions=r.tlsOptions??{},this._kmsProviders=r.kmsProviders||{};let{timeoutMS:n}=(0,wn.resolveTimeoutOptions)(e,r);if(this._timeoutMS=n,r.keyVaultNamespace==null)throw new aa.MongoCryptInvalidArgumentError("Missing required option `keyVaultNamespace`");let s={...r,cryptoCallbacks:VX,kmsProviders:Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,On.serialize)(this._kmsProviders)};this._keyVaultNamespace=r.keyVaultNamespace,this._keyVaultClient=r.keyVaultClient||e;let i=t.getMongoCrypt();this._mongoCrypt=new i(s)}async createDataKey(e,r={}){if(r.keyAltNames&&!Array.isArray(r.keyAltNames))throw new aa.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but was of type ${typeof r.keyAltNames}.`);let n;r.keyAltNames&&r.keyAltNames.length>0&&(n=r.keyAltNames.map((p,m)=>{if(typeof p!="string")throw new aa.MongoCryptInvalidArgumentError(`Option "keyAltNames" must be an array of strings, but item at index ${m} was of type ${typeof p}`);return(0,On.serialize)({keyAltName:p})}));let s;r.keyMaterial&&(s=(0,On.serialize)({keyMaterial:r.keyMaterial}));let i=(0,On.serialize)({provider:e,...r.masterKey}),o=this._mongoCrypt.makeDataKeyContext(i,{keyAltNames:n,keyMaterial:s}),u=new m0.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:W1(this._client.s.options)}),a=r?.timeoutContext??z1.TimeoutContext.create((0,wn.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),c=(0,On.deserialize)(await u.execute(this,o,a)),{db:l,collection:h}=wn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),{insertedId:f}=await this._keyVaultClient.db(l).collection(h).insertOne(c,{writeConcern:{w:"majority"},timeoutMS:a?.csotEnabled()?a?.getRemainingTimeMSOrThrow():void 0});return f}async rewrapManyDataKey(e,r){let n;if(r){let p=Object.assign({provider:r.provider},r.masterKey);n=(0,On.serialize)(p)}let s=(0,On.serialize)(e),i=this._mongoCrypt.makeRewrapManyDataKeyContext(s,n),o=new m0.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:W1(this._client.s.options)}),u=z1.TimeoutContext.create((0,wn.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})),{v:a}=(0,On.deserialize)(await o.execute(this,i,u));if(a.length===0)return{};let{db:c,collection:l}=wn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),h=a.map(p=>({updateOne:{filter:{_id:p._id},update:{$set:{masterKey:p.masterKey,keyMaterial:p.keyMaterial},$currentDate:{updateDate:!0}}}}));return{bulkWriteResult:await this._keyVaultClient.db(c).collection(l).bulkWrite(h,{writeConcern:{w:"majority"},timeoutMS:u.csotEnabled()?u?.remainingTimeMS:void 0})}}async deleteKey(e){let{db:r,collection:n}=wn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).deleteOne({_id:e},{writeConcern:{w:"majority"},timeoutMS:this._timeoutMS})}getKeys(){let{db:e,collection:r}=wn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return this._keyVaultClient.db(e).collection(r).find({},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKey(e){let{db:r,collection:n}=wn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({_id:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async getKeyByAltName(e){let{db:r,collection:n}=wn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(r).collection(n).findOne({keyAltNames:e},{readConcern:{level:"majority"},timeoutMS:this._timeoutMS})}async addKeyAltName(e,r){let{db:n,collection:s}=wn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace);return await this._keyVaultClient.db(n).collection(s).findOneAndUpdate({_id:e},{$addToSet:{keyAltNames:r}},{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async removeKeyAltName(e,r){let{db:n,collection:s}=wn.MongoDBCollectionNamespace.fromString(this._keyVaultNamespace),i=[{$set:{keyAltNames:{$cond:[{$eq:["$keyAltNames",[r]]},"$$REMOVE",{$filter:{input:"$keyAltNames",cond:{$ne:["$$this",r]}}}]}}}];return await this._keyVaultClient.db(n).collection(s).findOneAndUpdate({_id:e},i,{writeConcern:{w:"majority"},returnDocument:"before",timeoutMS:this._timeoutMS})}async createEncryptedCollection(e,r,n){let{provider:s,masterKey:i,createCollectionOptions:{encryptedFields:{...o},...u}}=n,a=this._timeoutMS!=null?z1.TimeoutContext.create((0,wn.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0;if(Array.isArray(o.fields)){let c=o.fields.map(async f=>f==null||typeof f!="object"||f.keyId!=null?f:{...f,keyId:await this.createDataKey(s,{masterKey:i,timeoutContext:a?.csotEnabled()?a?.clone():void 0})}),l=await Promise.allSettled(c);o.fields=l.map((f,p)=>f.status==="fulfilled"?f.value:o.fields[p]);let h=l.find(f=>f.status==="rejected");if(h!=null)throw new aa.MongoCryptCreateDataKeyError(o,{cause:h.reason})}try{return{collection:await e.createCollection(r,{...u,encryptedFields:o,timeoutMS:a?.csotEnabled()?a?.getRemainingTimeMSOrThrow():void 0}),encryptedFields:o}}catch(c){throw new aa.MongoCryptCreateEncryptedCollectionError(o,{cause:c})}}async encrypt(e,r){return await this._encrypt(e,!1,r)}async encryptExpression(e,r){return await this._encrypt(e,!0,r)}async decrypt(e){let r=(0,On.serialize)({v:e}),n=this._mongoCrypt.makeExplicitDecryptionContext(r),s=new m0.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:W1(this._client.s.options)}),i=this._timeoutMS!=null?z1.TimeoutContext.create((0,wn.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:o}=(0,On.deserialize)(await s.execute(this,n,i));return o}async askForKMSCredentials(){return await(0,zX.refreshKMSCredentials)(this._kmsProviders)}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}async _encrypt(e,r,n){let{algorithm:s,keyId:i,keyAltName:o,contentionFactor:u,queryType:a,rangeOptions:c}=n,l={expressionMode:r,algorithm:s};if(i&&(l.keyId=i.buffer),o){if(i)throw new aa.MongoCryptInvalidArgumentError('"options" cannot contain both "keyId" and "keyAltName"');if(typeof o!="string")throw new aa.MongoCryptInvalidArgumentError(`"options.keyAltName" must be of type string, but was of type ${typeof o}`);l.keyAltName=(0,On.serialize)({keyAltName:o})}(typeof u=="number"||typeof u=="bigint")&&(l.contentionFactor=u),typeof a=="string"&&(l.queryType=a),typeof c=="object"&&(l.rangeOptions=(0,On.serialize)(c));let h=(0,On.serialize)({v:e}),f=new m0.StateMachine({proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:W1(this._client.s.options)}),p=this._mongoCrypt.makeExplicitEncryptionContext(h,l),m=this._timeoutMS!=null?z1.TimeoutContext.create((0,wn.resolveTimeoutOptions)(this._client,{timeoutMS:this._timeoutMS})):void 0,{v:y}=(0,On.deserialize)(await f.execute(this,p,m));return y}};H1.ClientEncryption=z6;function W1(t){let e={autoSelectFamily:!0};return"autoSelectFamily"in t&&(e.autoSelectFamily=t.autoSelectFamily),"autoSelectFamilyAttemptTimeout"in t&&(e.autoSelectFamilyAttemptTimeout=t.autoSelectFamilyAttemptTimeout),e}});var cD=g(g0=>{"use strict";d();Object.defineProperty(g0,"__esModule",{value:!0});g0.MongocryptdManager=void 0;var WX=Z(),y0=class t{constructor(e={}){this.spawnPath="",this.spawnArgs=[],this.uri=typeof e.mongocryptdURI=="string"&&e.mongocryptdURI.length>0?e.mongocryptdURI:t.DEFAULT_MONGOCRYPTD_URI,this.bypassSpawn=!!e.mongocryptdBypassSpawn,Object.hasOwn(e,"mongocryptdSpawnPath")&&e.mongocryptdSpawnPath&&(this.spawnPath=e.mongocryptdSpawnPath),Object.hasOwn(e,"mongocryptdSpawnArgs")&&Array.isArray(e.mongocryptdSpawnArgs)&&(this.spawnArgs=this.spawnArgs.concat(e.mongocryptdSpawnArgs)),this.spawnArgs.filter(r=>typeof r=="string").every(r=>r.indexOf("--idleShutdownTimeoutSecs")<0)&&this.spawnArgs.push("--idleShutdownTimeoutSecs","60")}async spawn(){let e=this.spawnPath||"mongocryptd",{spawn:r}=require("child_process");this._child=r(e,this.spawnArgs,{stdio:"ignore",detached:!0}),this._child.on("error",()=>{}),this._child.unref()}async withRespawn(e){try{return await e()}catch(n){if(!(n instanceof WX.MongoNetworkTimeoutError&&!this.bypassSpawn))throw n}return await this.spawn(),await e()}};g0.MongocryptdManager=y0;y0.DEFAULT_MONGOCRYPTD_URI="mongodb://localhost:27020"});var K6=g(Ic=>{"use strict";d();var fD;Object.defineProperty(Ic,"__esModule",{value:!0});Ic.AutoEncrypter=Ic.AutoEncryptionLoggerLevel=void 0;var lD=require("net"),G1=Ue(),HX=jt(),GX=Xs(),W6=Z(),KX=Jo(),YX=ae(),H6=p0(),QX=M6(),JX=Dc(),XX=cD(),ZX=j6(),hD=V6();Ic.AutoEncryptionLoggerLevel=Object.freeze({FatalError:0,Error:1,Warning:2,Info:3,Trace:4});var G6=class t{static getMongoCrypt(){let e=(0,GX.getMongoDBClientEncryption)();if("kModuleError"in e)throw e.kModuleError;return e.MongoCrypt}constructor(e,r){this[fD]=!1,this._client=e,this._bypassEncryption=r.bypassAutoEncryption===!0,this._keyVaultNamespace=r.keyVaultNamespace||"admin.datakeys",this._keyVaultClient=r.keyVaultClient||e,this._metaDataClient=r.metadataClient||e,this._proxyOptions=r.proxyOptions||{},this._tlsOptions=r.tlsOptions||{},this._kmsProviders=r.kmsProviders||{};let n={cryptoCallbacks:QX};r.schemaMap&&(n.schemaMap=Buffer.isBuffer(r.schemaMap)?r.schemaMap:(0,G1.serialize)(r.schemaMap)),r.encryptedFieldsMap&&(n.encryptedFieldsMap=Buffer.isBuffer(r.encryptedFieldsMap)?r.encryptedFieldsMap:(0,G1.serialize)(r.encryptedFieldsMap)),n.kmsProviders=Buffer.isBuffer(this._kmsProviders)?this._kmsProviders:(0,G1.serialize)(this._kmsProviders),r.options?.logger&&(n.logger=r.options.logger),r.extraOptions&&r.extraOptions.cryptSharedLibPath&&(n.cryptSharedLibPath=r.extraOptions.cryptSharedLibPath),r.bypassQueryAnalysis&&(n.bypassQueryAnalysis=r.bypassQueryAnalysis),this._bypassMongocryptdAndCryptShared=this._bypassEncryption||!!r.bypassQueryAnalysis,r.extraOptions&&r.extraOptions.cryptSharedLibSearchPaths?n.cryptSharedLibSearchPaths=r.extraOptions.cryptSharedLibSearchPaths:this._bypassMongocryptdAndCryptShared||(n.cryptSharedLibSearchPaths=["$SYSTEM"]);let s=t.getMongoCrypt();if(this._mongocrypt=new s(n),this._contextCounter=0,r.extraOptions&&r.extraOptions.cryptSharedLibRequired&&!this.cryptSharedLibVersionInfo)throw new JX.MongoCryptInvalidArgumentError("`cryptSharedLibRequired` set but no crypt_shared library loaded");if(!this._bypassMongocryptdAndCryptShared&&!this.cryptSharedLibVersionInfo){this._mongocryptdManager=new XX.MongocryptdManager(r.extraOptions);let i={serverSelectionTimeoutMS:1e4};(r.extraOptions==null||typeof r.extraOptions.mongocryptdURI!="string")&&!lD.getDefaultAutoSelectFamily&&(i.family=4),lD.getDefaultAutoSelectFamily&&Object.assign(i,(0,H6.autoSelectSocketOptions)(this._client.s?.options??{})),this._mongocryptdClient=new KX.MongoClient(this._mongocryptdManager.uri,i)}}async init(){if(!(this._bypassMongocryptdAndCryptShared||this.cryptSharedLibVersionInfo)){if(!this._mongocryptdManager)throw new W6.MongoRuntimeError("Reached impossible state: mongocryptdManager is undefined when neither bypassSpawn nor the shared lib are specified.");if(!this._mongocryptdClient)throw new W6.MongoRuntimeError("Reached impossible state: mongocryptdClient is undefined when neither bypassSpawn nor the shared lib are specified.");this._mongocryptdManager.bypassSpawn||await this._mongocryptdManager.spawn();try{return await this._mongocryptdClient.connect()}catch(e){let{message:r}=e;throw r&&(r.match(/timed out after/)||r.match(/ENOTFOUND/))?new W6.MongoRuntimeError("Unable to connect to `mongocryptd`, please make sure it is running or in your PATH for auto-spawn",{cause:e}):e}}}async teardown(e){await this._mongocryptdClient?.close(e)}async encrypt(e,r,n={}){if(this._bypassEncryption)return r;let s=Buffer.isBuffer(r)?r:(0,G1.serialize)(r,n),i=this._mongocrypt.makeEncryptionContext(YX.MongoDBCollectionNamespace.fromString(e).db,s);i.id=this._contextCounter++,i.ns=e,i.document=r;let o=new hD.StateMachine({promoteValues:!1,promoteLongs:!1,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,H6.autoSelectSocketOptions)(this._client.s.options)});return(0,G1.deserialize)(await o.execute(this,i,n.timeoutContext),{promoteValues:!1,promoteLongs:!1})}async decrypt(e,r={}){let n=this._mongocrypt.makeDecryptionContext(e);return n.id=this._contextCounter++,await new hD.StateMachine({...r,proxyOptions:this._proxyOptions,tlsOptions:this._tlsOptions,socketOptions:(0,H6.autoSelectSocketOptions)(this._client.s.options)}).execute(this,n,r.timeoutContext?.csotEnabled()?r.timeoutContext:void 0)}async askForKMSCredentials(){return await(0,ZX.refreshKMSCredentials)(this._kmsProviders)}get cryptSharedLibVersionInfo(){return this._mongocrypt.cryptSharedLibVersionInfo}static get libmongocryptVersion(){return t.getMongoCrypt().libmongocryptVersion}};Ic.AutoEncrypter=G6;fD=HX.kDecorateResult});var pD=g(E0=>{"use strict";d();Object.defineProperty(E0,"__esModule",{value:!0});E0.Encrypter=void 0;var eZ=require("util"),tZ=K6(),rZ=jt(),nZ=Xs(),dD=Z(),sZ=Jo(),K1=Symbol("internalClient"),Y6=class{constructor(e,r,n){if(typeof n.autoEncryption!="object")throw new dD.MongoInvalidArgumentError('Option "autoEncryption" must be specified');this[K1]=null,this.bypassAutoEncryption=!!n.autoEncryption.bypassAutoEncryption,this.needsConnecting=!1,n.maxPoolSize===0&&n.autoEncryption.keyVaultClient==null?n.autoEncryption.keyVaultClient=e:n.autoEncryption.keyVaultClient==null&&(n.autoEncryption.keyVaultClient=this.getInternalClient(e,r,n)),this.bypassAutoEncryption?n.autoEncryption.metadataClient=void 0:n.maxPoolSize===0?n.autoEncryption.metadataClient=e:n.autoEncryption.metadataClient=this.getInternalClient(e,r,n),n.proxyHost&&(n.autoEncryption.proxyOptions={proxyHost:n.proxyHost,proxyPort:n.proxyPort,proxyUsername:n.proxyUsername,proxyPassword:n.proxyPassword}),this.autoEncrypter=new tZ.AutoEncrypter(e,n.autoEncryption)}getInternalClient(e,r,n){let s=this[K1];if(s==null){let i={};for(let o of[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)])["autoEncryption","minPoolSize","servers","caseTranslate","dbName"].includes(o)||Reflect.set(i,o,Reflect.get(n,o));i.minPoolSize=0,s=new sZ.MongoClient(r,i),this[K1]=s;for(let o of rZ.MONGO_CLIENT_EVENTS)for(let u of e.listeners(o))s.on(o,u);e.on("newListener",(o,u)=>{s?.on(o,u)}),this.needsConnecting=!0}return s}async connectInternalClient(){let e=this[K1];this.needsConnecting&&e!=null&&(this.needsConnecting=!1,await e.connect())}closeCallback(e,r,n){(0,eZ.callbackify)(this.close.bind(this))(e,r,n)}async close(e,r){let n;try{await this.autoEncrypter.teardown(r)}catch(i){n=i}let s=this[K1];if(s!=null&&e!==s)return await s.close(r);if(n!=null)throw n}static checkForMongoCrypt(){let e=(0,nZ.getMongoDBClientEncryption)();if("kModuleError"in e)throw new dD.MongoMissingDependencyError("Auto-encryption requested, but the module is not installed. Please add `mongodb-client-encryption` as a dependency of your project",{cause:e.kModuleError,dependencyName:"mongodb-client-encryption"})}};E0.Encrypter=Y6});var Q6=g(_0=>{"use strict";d();Object.defineProperty(_0,"__esModule",{value:!0});_0.ConnectionPoolMetrics=void 0;var Pc=class t{constructor(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}markPinned(e){e===t.TXN?this.txnConnections+=1:e===t.CURSOR?this.cursorConnections+=1:this.otherConnections+=1}markUnpinned(e){e===t.TXN?this.txnConnections-=1:e===t.CURSOR?this.cursorConnections-=1:this.otherConnections-=1}info(e){return`Timed out while checking out a connection from connection pool: maxPoolSize: ${e}, connections in use by cursors: ${this.cursorConnections}, connections in use by transactions: ${this.txnConnections}, connections in use by other operations: ${this.otherConnections}`}reset(){this.txnConnections=0,this.cursorConnections=0,this.otherConnections=0}};_0.ConnectionPoolMetrics=Pc;Pc.TXN="txn";Pc.CURSOR="cursor";Pc.OTHER="other"});var Y1=g(Rc=>{"use strict";d();Object.defineProperty(Rc,"__esModule",{value:!0});Rc.ServerDescription=void 0;Rc.parseServerType=mD;Rc.compareTopologyVersion=yD;var Nc=Ue(),iZ=Z(),Fc=ae(),Yt=Vn(),oZ=new Set([Yt.ServerType.RSPrimary,Yt.ServerType.Standalone,Yt.ServerType.Mongos,Yt.ServerType.LoadBalancer]),uZ=new Set([Yt.ServerType.RSPrimary,Yt.ServerType.RSSecondary,Yt.ServerType.Mongos,Yt.ServerType.Standalone,Yt.ServerType.LoadBalancer]),J6=class{constructor(e,r,n={}){if(e==null||e==="")throw new iZ.MongoRuntimeError("ServerDescription must be provided with a non-empty address");this.address=typeof e=="string"?Fc.HostAddress.fromString(e).toString():e.toString(),this.type=mD(r,n),this.hosts=r?.hosts?.map(s=>s.toLowerCase())??[],this.passives=r?.passives?.map(s=>s.toLowerCase())??[],this.arbiters=r?.arbiters?.map(s=>s.toLowerCase())??[],this.tags=r?.tags??{},this.minWireVersion=r?.minWireVersion??0,this.maxWireVersion=r?.maxWireVersion??0,this.roundTripTime=n?.roundTripTime??-1,this.minRoundTripTime=n?.minRoundTripTime??0,this.lastUpdateTime=(0,Fc.now)(),this.lastWriteDate=r?.lastWrite?.lastWriteDate??0,this.error=n.error??null,this.error?.stack,this.topologyVersion=this.error?.topologyVersion??r?.topologyVersion??null,this.setName=r?.setName??null,this.setVersion=r?.setVersion??null,this.electionId=r?.electionId??null,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes??null,this.maxMessageSizeBytes=r?.maxMessageSizeBytes??null,this.maxWriteBatchSize=r?.maxWriteBatchSize??null,this.maxBsonObjectSize=r?.maxBsonObjectSize??null,this.primary=r?.primary??null,this.me=r?.me?.toLowerCase()??null,this.$clusterTime=r?.$clusterTime??null,this.iscryptd=!!r?.iscryptd}get hostAddress(){return Fc.HostAddress.fromString(this.address)}get allHosts(){return this.hosts.concat(this.arbiters).concat(this.passives)}get isReadable(){return this.type===Yt.ServerType.RSSecondary||this.isWritable}get isDataBearing(){return uZ.has(this.type)}get isWritable(){return oZ.has(this.type)}get host(){let e=`:${this.port}`.length;return this.address.slice(0,-e)}get port(){let e=this.address.split(":").pop();return e?Number.parseInt(e,10):27017}equals(e){let r=this.topologyVersion===e?.topologyVersion||yD(this.topologyVersion,e?.topologyVersion)===0,n=this.electionId!=null&&e?.electionId!=null?(0,Fc.compareObjectId)(this.electionId,e.electionId)===0:this.electionId===e?.electionId;return e!=null&&e.iscryptd===this.iscryptd&&(0,Fc.errorStrictEqual)(this.error,e.error)&&this.type===e.type&&this.minWireVersion===e.minWireVersion&&(0,Fc.arrayStrictEqual)(this.hosts,e.hosts)&&aZ(this.tags,e.tags)&&this.setName===e.setName&&this.setVersion===e.setVersion&&n&&this.primary===e.primary&&this.logicalSessionTimeoutMinutes===e.logicalSessionTimeoutMinutes&&r}};Rc.ServerDescription=J6;function mD(t,e){return e?.loadBalanced?Yt.ServerType.LoadBalancer:!t||!t.ok?Yt.ServerType.Unknown:t.isreplicaset?Yt.ServerType.RSGhost:t.msg&&t.msg==="isdbgrid"?Yt.ServerType.Mongos:t.setName?t.hidden?Yt.ServerType.RSOther:t.isWritablePrimary?Yt.ServerType.RSPrimary:t.secondary?Yt.ServerType.RSSecondary:t.arbiterOnly?Yt.ServerType.RSArbiter:Yt.ServerType.RSOther:Yt.ServerType.Standalone}function aZ(t,e){let r=Object.keys(t),n=Object.keys(e);return r.length===n.length&&r.every(s=>e[s]===t[s])}function yD(t,e){if(t==null||e==null||!t.processId.equals(e.processId))return-1;let r=typeof t.counter=="bigint"?Nc.Long.fromBigInt(t.counter):Nc.Long.isLong(t.counter)?t.counter:Nc.Long.fromNumber(t.counter),n=typeof e.counter=="bigint"?Nc.Long.fromBigInt(e.counter):Nc.Long.isLong(e.counter)?e.counter:Nc.Long.fromNumber(e.counter);return r.compare(n)}});var eA=g(O0=>{"use strict";d();Object.defineProperty(O0,"__esModule",{value:!0});O0.TopologyDescription=void 0;var cZ=Ue(),S0=Lu(),A0=Z(),X6=ae(),ke=Vn(),uu=Y1(),lZ=S0.MIN_SUPPORTED_SERVER_VERSION,hZ=S0.MAX_SUPPORTED_SERVER_VERSION,gD=S0.MIN_SUPPORTED_WIRE_VERSION,ED=S0.MAX_SUPPORTED_WIRE_VERSION,fZ=new Set([ke.ServerType.Mongos,ke.ServerType.Unknown]),_D=new Set([ke.ServerType.Mongos,ke.ServerType.Standalone]),AD=new Set([ke.ServerType.RSSecondary,ke.ServerType.RSArbiter,ke.ServerType.RSOther]),Z6=class t{constructor(e,r=null,n=null,s=null,i=null,o=null,u=null){u=u??{},this.type=e??ke.TopologyType.Unknown,this.servers=r??new Map,this.stale=!1,this.compatible=!0,this.heartbeatFrequencyMS=u.heartbeatFrequencyMS??0,this.localThresholdMS=u.localThresholdMS??15,this.setName=n??null,this.maxElectionId=i??null,this.maxSetVersion=s??null,this.commonWireVersion=o??0;for(let a of this.servers.values())if(!(a.type===ke.ServerType.Unknown||a.type===ke.ServerType.LoadBalancer)&&(a.minWireVersion>ED&&(this.compatible=!1,this.compatibilityError=`Server at ${a.address} requires wire version ${a.minWireVersion}, but this version of the driver only supports up to ${ED} (MongoDB ${hZ})`),a.maxWireVersion<gD)){this.compatible=!1,this.compatibilityError=`Server at ${a.address} reports wire version ${a.maxWireVersion}, but this version of the driver requires at least ${gD} (MongoDB ${lZ}).`;break}this.logicalSessionTimeoutMinutes=null;for(let[,a]of this.servers)if(a.isReadable){if(a.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=null;break}if(this.logicalSessionTimeoutMinutes==null){this.logicalSessionTimeoutMinutes=a.logicalSessionTimeoutMinutes;continue}this.logicalSessionTimeoutMinutes=Math.min(this.logicalSessionTimeoutMinutes,a.logicalSessionTimeoutMinutes)}}updateFromSrvPollingEvent(e,r=0){let n=e.hostnames(),s=new Set(this.servers.keys()),i=new Set(n),o=new Set;for(let a of s)i.delete(a),n.has(a)||o.add(a);if(i.size===0&&o.size===0)return this;let u=new Map(this.servers);for(let a of o)u.delete(a);if(i.size>0){if(r===0)for(let a of i)u.set(a,new uu.ServerDescription(a));else if(u.size<r){let a=(0,X6.shuffle)(i,r-u.size);for(let c of a)u.set(c,new uu.ServerDescription(c))}}return new t(this.type,u,this.setName,this.maxSetVersion,this.maxElectionId,this.commonWireVersion,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}update(e){let r=e.address,{type:n,setName:s,maxSetVersion:i,maxElectionId:o,commonWireVersion:u}=this,a=e.type,c=new Map(this.servers);if(e.maxWireVersion!==0&&(u==null?u=e.maxWireVersion:u=Math.min(u,e.maxWireVersion)),typeof e.setName=="string"&&typeof s=="string"&&e.setName!==s&&(n===ke.TopologyType.Single?e=new uu.ServerDescription(r):c.delete(r)),c.set(r,e),n===ke.TopologyType.Single)return new t(ke.TopologyType.Single,c,s,i,o,u,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS});if(n===ke.TopologyType.Unknown&&(a===ke.ServerType.Standalone&&this.servers.size!==1?c.delete(r):n=dZ(a)),n===ke.TopologyType.Sharded&&(fZ.has(a)||c.delete(r)),n===ke.TopologyType.ReplicaSetNoPrimary){if(_D.has(a)&&c.delete(r),a===ke.ServerType.RSPrimary){let l=SD(c,e,s,i,o);n=l[0],s=l[1],i=l[2],o=l[3]}else if(AD.has(a)){let l=mZ(c,e,s);n=l[0],s=l[1]}}if(n===ke.TopologyType.ReplicaSetWithPrimary)if(_D.has(a))c.delete(r),n=ca(c);else if(a===ke.ServerType.RSPrimary){let l=SD(c,e,s,i,o);n=l[0],s=l[1],i=l[2],o=l[3]}else AD.has(a)?n=pZ(c,e,s):n=ca(c);return new t(n,c,s,i,o,u,{heartbeatFrequencyMS:this.heartbeatFrequencyMS,localThresholdMS:this.localThresholdMS})}get error(){let e=Array.from(this.servers.values()).filter(r=>r.error);return e.length>0?e[0].error:null}get hasKnownServers(){return Array.from(this.servers.values()).some(e=>e.type!==ke.ServerType.Unknown)}get hasDataBearingServers(){return Array.from(this.servers.values()).some(e=>e.isDataBearing)}hasServer(e){return this.servers.has(e)}toJSON(){return cZ.EJSON.serialize(this)}};O0.TopologyDescription=Z6;function dZ(t){switch(t){case ke.ServerType.Standalone:return ke.TopologyType.Single;case ke.ServerType.Mongos:return ke.TopologyType.Sharded;case ke.ServerType.RSPrimary:return ke.TopologyType.ReplicaSetWithPrimary;case ke.ServerType.RSOther:case ke.ServerType.RSSecondary:return ke.TopologyType.ReplicaSetNoPrimary;default:return ke.TopologyType.Unknown}}function SD(t,e,r=null,n=null,s=null){if(r=r||e.setName,r!==e.setName)return t.delete(e.address),[ca(t),r,n,s];if(e.maxWireVersion>=17){let u=(0,X6.compareObjectId)(s,e.electionId),a=u===0,c=u===-1,l=(n??-1)<=(e.setVersion??-1);if(c||a&&l)s=e.electionId,n=e.setVersion;else return t.set(e.address,new uu.ServerDescription(e.address,void 0,{error:new A0.MongoStalePrimaryError(e,n,s)})),[ca(t),r,n,s]}else{let u=e.electionId?e.electionId:null;if(e.setVersion&&u){if(n&&s&&(n>e.setVersion||(0,X6.compareObjectId)(s,u)>0))return t.set(e.address,new uu.ServerDescription(e.address,void 0,{error:new A0.MongoStalePrimaryError(e,n,s)})),[ca(t),r,n,s];s=e.electionId}e.setVersion!=null&&(n==null||e.setVersion>n)&&(n=e.setVersion)}for(let[u,a]of t)if(a.type===ke.ServerType.RSPrimary&&a.address!==e.address){t.set(u,new uu.ServerDescription(a.address,void 0,{error:new A0.MongoStalePrimaryError(e,n,s)}));break}e.allHosts.forEach(u=>{t.has(u)||t.set(u,new uu.ServerDescription(u))});let i=Array.from(t.keys()),o=e.allHosts;return i.filter(u=>o.indexOf(u)===-1).forEach(u=>{t.delete(u)}),[ca(t),r,n,s]}function pZ(t,e,r=null){if(r==null)throw new A0.MongoRuntimeError('Argument "setName" is required if connected to a replica set');return(r!==e.setName||e.me&&e.address!==e.me)&&t.delete(e.address),ca(t)}function mZ(t,e,r=null){let n=ke.TopologyType.ReplicaSetNoPrimary;return r=r??e.setName,r!==e.setName?(t.delete(e.address),[n,r]):(e.allHosts.forEach(s=>{t.has(s)||t.set(s,new uu.ServerDescription(s))}),e.me&&e.address!==e.me&&t.delete(e.address),[n,r])}function ca(t){for(let e of t.values())if(e.type===ke.ServerType.RSPrimary)return ke.TopologyType.ReplicaSetWithPrimary;return ke.TopologyType.ReplicaSetNoPrimary}});var rA=g(w0=>{"use strict";d();Object.defineProperty(w0,"__esModule",{value:!0});w0.getReadPreference=EZ;w0.isSharded=_Z;var yZ=Z(),tA=lr(),OD=Vn(),gZ=eA();function EZ(t){let e=t?.readPreference??tA.ReadPreference.primary;if(typeof e=="string"&&(e=tA.ReadPreference.fromString(e)),!(e instanceof tA.ReadPreference))throw new yZ.MongoInvalidArgumentError('Option "readPreference" must be a ReadPreference instance');return e}function _Z(t){return t==null?!1:t.description&&t.description.type===OD.ServerType.Mongos?!0:t.description&&t.description instanceof gZ.TopologyDescription?Array.from(t.description.servers.values()).some(r=>r.type===OD.ServerType.Mongos):!1}});var sA=g(De=>{"use strict";d();Object.defineProperty(De,"__esModule",{value:!0});De.Transaction=De.TxnState=void 0;De.isTransactionCommand=TZ;var wD=Z(),AZ=ls(),SZ=lr(),OZ=vr();De.TxnState=Object.freeze({NO_TRANSACTION:"NO_TRANSACTION",STARTING_TRANSACTION:"STARTING_TRANSACTION",TRANSACTION_IN_PROGRESS:"TRANSACTION_IN_PROGRESS",TRANSACTION_COMMITTED:"TRANSACTION_COMMITTED",TRANSACTION_COMMITTED_EMPTY:"TRANSACTION_COMMITTED_EMPTY",TRANSACTION_ABORTED:"TRANSACTION_ABORTED"});var wZ={[De.TxnState.NO_TRANSACTION]:[De.TxnState.NO_TRANSACTION,De.TxnState.STARTING_TRANSACTION],[De.TxnState.STARTING_TRANSACTION]:[De.TxnState.TRANSACTION_IN_PROGRESS,De.TxnState.TRANSACTION_COMMITTED,De.TxnState.TRANSACTION_COMMITTED_EMPTY,De.TxnState.TRANSACTION_ABORTED],[De.TxnState.TRANSACTION_IN_PROGRESS]:[De.TxnState.TRANSACTION_IN_PROGRESS,De.TxnState.TRANSACTION_COMMITTED,De.TxnState.TRANSACTION_ABORTED],[De.TxnState.TRANSACTION_COMMITTED]:[De.TxnState.TRANSACTION_COMMITTED,De.TxnState.TRANSACTION_COMMITTED_EMPTY,De.TxnState.STARTING_TRANSACTION,De.TxnState.NO_TRANSACTION],[De.TxnState.TRANSACTION_ABORTED]:[De.TxnState.STARTING_TRANSACTION,De.TxnState.NO_TRANSACTION],[De.TxnState.TRANSACTION_COMMITTED_EMPTY]:[De.TxnState.TRANSACTION_COMMITTED_EMPTY,De.TxnState.NO_TRANSACTION]},CZ=new Set([De.TxnState.STARTING_TRANSACTION,De.TxnState.TRANSACTION_IN_PROGRESS]),bZ=new Set([De.TxnState.TRANSACTION_COMMITTED,De.TxnState.TRANSACTION_COMMITTED_EMPTY,De.TxnState.TRANSACTION_ABORTED]),nA=class{constructor(e){e=e??{},this.state=De.TxnState.NO_TRANSACTION,this.options={};let r=OZ.WriteConcern.fromOptions(e);if(r){if(r.w===0)throw new wD.MongoTransactionError("Transactions do not support unacknowledged write concern");this.options.writeConcern=r}e.readConcern&&(this.options.readConcern=AZ.ReadConcern.fromOptions(e)),e.readPreference&&(this.options.readPreference=SZ.ReadPreference.fromOptions(e)),e.maxCommitTimeMS&&(this.options.maxTimeMS=e.maxCommitTimeMS),this._pinnedServer=void 0,this._recoveryToken=void 0}get server(){return this._pinnedServer}get recoveryToken(){return this._recoveryToken}get isPinned(){return!!this.server}get isStarting(){return this.state===De.TxnState.STARTING_TRANSACTION}get isActive(){return CZ.has(this.state)}get isCommitted(){return bZ.has(this.state)}transition(e){let r=wZ[this.state];if(r&&r.includes(e)){this.state=e,(this.state===De.TxnState.NO_TRANSACTION||this.state===De.TxnState.STARTING_TRANSACTION||this.state===De.TxnState.TRANSACTION_ABORTED)&&this.unpinServer();return}throw new wD.MongoRuntimeError(`Attempted illegal state transition from [${this.state}] to [${e}]`)}pinServer(e){this.isActive&&(this._pinnedServer=e)}unpinServer(){this._pinnedServer=void 0}};De.Transaction=nA;function TZ(t){return!!(t.commitTransaction||t.abortTransaction)}});var qc=g(ri=>{"use strict";d();var TD;Object.defineProperty(ri,"__esModule",{value:!0});ri.ServerSessionPool=ri.ServerSession=ri.ClientSession=void 0;ri.maybeClearPinnedConnection=T0;ri.applySession=FZ;ri.updateSessionFromResponse=RZ;var b0=Ue(),D0=Q6(),DZ=rA(),DD=jt(),Ee=Z(),MZ=Hn(),C0=kr(),iA=ic(),BZ=ls(),oA=lr(),IZ=cc(),aA=Vn(),uA=$r(),it=sA(),Cn=ae(),vc=vr(),PZ=8,$c=Symbol("serverSession"),M0=Symbol("snapshotTime"),kc=Symbol("snapshotEnabled"),xc=Symbol("pinnedConnection"),B0=Symbol("txnNumberIncrement"),I0=class t extends MZ.TypedEventEmitter{constructor(e,r,n,s){if(super(),this[TD]=!1,this.timeoutContext=null,e==null)throw new Ee.MongoRuntimeError("ClientSession requires a MongoClient");if(r==null||!(r instanceof P0))throw new Ee.MongoRuntimeError("ClientSession requires a ServerSessionPool");if(n=n??{},n.snapshot===!0&&(this[kc]=!0,n.causalConsistency===!0))throw new Ee.MongoInvalidArgumentError('Properties "causalConsistency" and "snapshot" are mutually exclusive');this.client=e,this.sessionPool=r,this.hasEnded=!1,this.clientOptions=s,this.timeoutMS=n.defaultTimeoutMS??e.s.options?.timeoutMS,this.explicit=!!n.explicit,this[$c]=this.explicit?this.sessionPool.acquire():null,this[B0]=0;let i=this.explicit&&n.snapshot!==!0;this.supports={causalConsistency:n.causalConsistency??i},this.clusterTime=n.initialClusterTime,this.operationTime=void 0,this.owner=n.owner,this.defaultTransactionOptions={...n.defaultTransactionOptions},this.transaction=new it.Transaction}get id(){return this[$c]?.id}get serverSession(){let e=this[$c];if(e==null){if(this.explicit)throw new Ee.MongoRuntimeError("Unexpected null serverSession for an explicit session");if(this.hasEnded)throw new Ee.MongoRuntimeError("Unexpected null serverSession for an ended implicit session");e=this.sessionPool.acquire(),this[$c]=e}return e}get snapshotEnabled(){return this[kc]}get loadBalanced(){return this.client.topology?.description.type===aA.TopologyType.LoadBalanced}get pinnedConnection(){return this[xc]}pin(e){if(this[xc])throw TypeError("Cannot pin multiple connections to the same session");this[xc]=e,e.emit(DD.PINNED,this.inTransaction()?D0.ConnectionPoolMetrics.TXN:D0.ConnectionPoolMetrics.CURSOR)}unpin(e){if(this.loadBalanced)return T0(this,e);this.transaction.unpinServer()}get isPinned(){return this.loadBalanced?!!this[xc]:this.transaction.isPinned}async endSession(e){try{this.inTransaction()&&await this.abortTransaction({...e,throwTimeout:!0})}catch(r){if(r.name==="MongoOperationTimeoutError")throw r;(0,Cn.squashError)(r)}finally{if(!this.hasEnded){let r=this[$c];r!=null&&(this.sessionPool.release(r),this[$c]=new Q1(r)),this.hasEnded=!0,this.emit("ended",this)}T0(this,{force:!0,...e})}}async asyncDispose(){await this.endSession({force:!0})}advanceOperationTime(e){if(this.operationTime==null){this.operationTime=e;return}e.greaterThan(this.operationTime)&&(this.operationTime=e)}advanceClusterTime(e){if(!e||typeof e!="object")throw new Ee.MongoInvalidArgumentError("input cluster time must be an object");if(!e.clusterTime||e.clusterTime._bsontype!=="Timestamp")throw new Ee.MongoInvalidArgumentError('input cluster time "clusterTime" property must be a valid BSON Timestamp');if(!e.signature||e.signature.hash?._bsontype!=="Binary"||typeof e.signature.keyId!="bigint"&&typeof e.signature.keyId!="number"&&e.signature.keyId?._bsontype!=="Long")throw new Ee.MongoInvalidArgumentError('input cluster time must have a valid "signature" property with BSON Binary hash and BSON Long keyId');(0,aA._advanceClusterTime)(this,e)}equals(e){return!(e instanceof t)||this.id==null||e.id==null?!1:Cn.ByteUtils.equals(this.id.id.buffer,e.id.id.buffer)}incrementTransactionNumber(){this[B0]+=1}inTransaction(){return this.transaction.isActive}startTransaction(e){if(this[kc])throw new Ee.MongoCompatibilityError("Transactions are not supported in snapshot sessions");if(this.inTransaction())throw new Ee.MongoTransactionError("Transaction already in progress");this.isPinned&&this.transaction.isCommitted&&this.unpin();let r=(0,Cn.maxWireVersion)(this.client.topology);if((0,DZ.isSharded)(this.client.topology)&&r!=null&&r<PZ)throw new Ee.MongoCompatibilityError("Transactions are not supported on sharded clusters in MongoDB < 4.2.");this.commitAttempted=!1,this.incrementTransactionNumber(),this.transaction=new it.Transaction({readConcern:e?.readConcern??this.defaultTransactionOptions.readConcern??this.clientOptions?.readConcern,writeConcern:e?.writeConcern??this.defaultTransactionOptions.writeConcern??this.clientOptions?.writeConcern,readPreference:e?.readPreference??this.defaultTransactionOptions.readPreference??this.clientOptions?.readPreference,maxCommitTimeMS:e?.maxCommitTimeMS??this.defaultTransactionOptions.maxCommitTimeMS}),this.transaction.transition(it.TxnState.STARTING_TRANSACTION)}async commitTransaction(e){if(this.transaction.state===it.TxnState.NO_TRANSACTION)throw new Ee.MongoTransactionError("No transaction started");if(this.transaction.state===it.TxnState.STARTING_TRANSACTION||this.transaction.state===it.TxnState.TRANSACTION_COMMITTED_EMPTY){this.transaction.transition(it.TxnState.TRANSACTION_COMMITTED_EMPTY);return}if(this.transaction.state===it.TxnState.TRANSACTION_ABORTED)throw new Ee.MongoTransactionError("Cannot call commitTransaction after calling abortTransaction");let r={commitTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,s=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;if(s!=null)if(n==null&&this.timeoutContext==null)vc.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...s});else{let u=Object.keys(s);(u.length>2||!u.includes("wtimeoutMS")&&!u.includes("wTimeoutMS"))&&vc.WriteConcern.apply(r,{...s,wtimeoutMS:void 0})}(this.transaction.state===it.TxnState.TRANSACTION_COMMITTED||this.commitAttempted)&&(n==null&&this.timeoutContext==null?vc.WriteConcern.apply(r,{wtimeoutMS:1e4,...s,w:"majority"}):vc.WriteConcern.apply(r,{w:"majority",...s,wtimeoutMS:void 0})),typeof this.transaction.options.maxTimeMS=="number"&&(r.maxTimeMS=this.transaction.options.maxTimeMS),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let i=new iA.RunAdminCommandOperation(r,{session:this,readPreference:oA.ReadPreference.primary,bypassPinningCheck:!0}),o=this.timeoutContext??(typeof n=="number"?uA.TimeoutContext.create({serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS,timeoutMS:n}):null);try{await(0,C0.executeOperation)(this.client,i,o),this.commitAttempted=void 0;return}catch(u){if(this.commitAttempted=!0,u instanceof Ee.MongoError&&(0,Ee.isRetryableWriteError)(u)){vc.WriteConcern.apply(r,{wtimeoutMS:1e4,...s,w:"majority"}),this.unpin({force:!0});try{await(0,C0.executeOperation)(this.client,new iA.RunAdminCommandOperation(r,{session:this,readPreference:oA.ReadPreference.primary,bypassPinningCheck:!0}),o);return}catch(a){throw bD(a)&&a.addErrorLabel(Ee.MongoErrorLabel.UnknownTransactionCommitResult),CD(a)&&this.unpin({error:a}),a}}throw bD(u)&&u.addErrorLabel(Ee.MongoErrorLabel.UnknownTransactionCommitResult),CD(u)&&this.unpin({error:u}),u}finally{this.transaction.transition(it.TxnState.TRANSACTION_COMMITTED)}}async abortTransaction(e){if(this.transaction.state===it.TxnState.NO_TRANSACTION)throw new Ee.MongoTransactionError("No transaction started");if(this.transaction.state===it.TxnState.STARTING_TRANSACTION){this.transaction.transition(it.TxnState.TRANSACTION_ABORTED);return}if(this.transaction.state===it.TxnState.TRANSACTION_ABORTED)throw new Ee.MongoTransactionError("Cannot call abortTransaction twice");if(this.transaction.state===it.TxnState.TRANSACTION_COMMITTED||this.transaction.state===it.TxnState.TRANSACTION_COMMITTED_EMPTY)throw new Ee.MongoTransactionError("Cannot call abortTransaction after calling commitTransaction");let r={abortTransaction:1},n=typeof e?.timeoutMS=="number"?e.timeoutMS:this.timeoutContext?.csotEnabled()?this.timeoutContext.timeoutMS:typeof this.timeoutMS=="number"?this.timeoutMS:null,s=n!=null?uA.TimeoutContext.create({timeoutMS:n,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null,i=this.transaction.options.writeConcern??this.clientOptions?.writeConcern;i!=null&&n==null&&vc.WriteConcern.apply(r,{wtimeoutMS:1e4,w:"majority",...i}),this.transaction.recoveryToken&&(r.recoveryToken=this.transaction.recoveryToken);let o=new iA.RunAdminCommandOperation(r,{session:this,readPreference:oA.ReadPreference.primary,bypassPinningCheck:!0});try{await(0,C0.executeOperation)(this.client,o,s),this.unpin();return}catch(u){if(this.unpin(),u.name==="MongoRuntimeError"||e?.throwTimeout&&u.name==="MongoOperationTimeoutError")throw u;if(u instanceof Ee.MongoError&&(0,Ee.isRetryableWriteError)(u))try{await(0,C0.executeOperation)(this.client,o,s);return}catch(a){if(a.name==="MongoRuntimeError"||e?.throwTimeout&&a.name==="MongoOperationTimeoutError")throw a}}finally{this.transaction.transition(it.TxnState.TRANSACTION_ABORTED),this.loadBalanced&&T0(this,{force:!1})}}toBSON(){throw new Ee.MongoRuntimeError("ClientSession cannot be serialized to BSON.")}async withTransaction(e,r){let s=r?.timeoutMS??this.timeoutMS??null;this.timeoutContext=s!=null?uA.TimeoutContext.create({timeoutMS:s,serverSelectionTimeoutMS:this.clientOptions.serverSelectionTimeoutMS,socketTimeoutMS:this.clientOptions.socketTimeoutMS}):null;let i=this.timeoutContext?.csotEnabled()?this.timeoutContext.start:(0,Cn.now)(),o=!1,u;try{for(;!o;){this.startTransaction(r);try{let a=e(this);if(!(0,Cn.isPromiseLike)(a))throw new Ee.MongoInvalidArgumentError("Function provided to `withTransaction` must return a Promise");if(u=await a,this.transaction.state===it.TxnState.NO_TRANSACTION||this.transaction.state===it.TxnState.TRANSACTION_COMMITTED||this.transaction.state===it.TxnState.TRANSACTION_ABORTED)return u}catch(a){if(!(a instanceof Ee.MongoError)||a instanceof Ee.MongoInvalidArgumentError)throw await this.abortTransaction(),a;if((this.transaction.state===it.TxnState.STARTING_TRANSACTION||this.transaction.state===it.TxnState.TRANSACTION_IN_PROGRESS)&&await this.abortTransaction(),a.hasErrorLabel(Ee.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,Cn.now)()-i<12e4))continue;throw a}for(;!o;)try{await this.commitTransaction(),o=!0}catch(a){if(!N0(a)&&a.hasErrorLabel(Ee.MongoErrorLabel.UnknownTransactionCommitResult)&&(this.timeoutContext!=null||(0,Cn.now)()-i<12e4))continue;if(a.hasErrorLabel(Ee.MongoErrorLabel.TransientTransactionError)&&(this.timeoutContext!=null||(0,Cn.now)()-i<12e4))break;throw a}}return u}finally{this.timeoutContext=null}}};ri.ClientSession=I0;TD=kc;(0,IZ.configureResourceManagement)(I0.prototype);var NZ=new Set(["CannotSatisfyWriteConcern","UnknownReplWriteConcern","UnsatisfiableWriteConcern"]);function CD(t){if(t instanceof Ee.MongoError){if((0,Ee.isRetryableWriteError)(t)||t instanceof Ee.MongoWriteConcernError||N0(t)){if(MD(t))return!0}else if(t.hasErrorLabel(Ee.MongoErrorLabel.TransientTransactionError))return!0}return!1}function bD(t){let e=(0,Ee.isRetryableWriteError)(t);return e||=t instanceof Ee.MongoWriteConcernError,e||=N0(t),e&&=MD(t),e}function MD(t){let e=t instanceof Ee.MongoServerError&&t.codeName&&NZ.has(t.codeName);return N0(t)||!e&&t.code!==Ee.MONGODB_ERROR_CODES.UnsatisfiableWriteConcern&&t.code!==Ee.MONGODB_ERROR_CODES.UnknownReplWriteConcern}function T0(t,e){let r=t[xc],n=e?.error;if(t.inTransaction()&&n&&n instanceof Ee.MongoError&&n.hasErrorLabel(Ee.MongoErrorLabel.TransientTransactionError))return;let s=t.client.topology;if(r&&s!=null){let o=Array.from(s.s.servers.values())[0];(e?.error==null||e?.force)&&(o.pool.checkIn(r),t[xc]=void 0,r.emit(DD.UNPINNED,t.transaction.state!==it.TxnState.NO_TRANSACTION?D0.ConnectionPoolMetrics.TXN:D0.ConnectionPoolMetrics.CURSOR),e?.forceClear&&o.pool.clear({serviceId:r.serviceId}))}}function N0(t){return t==null||!(t instanceof Ee.MongoServerError)?!1:t.code===Ee.MONGODB_ERROR_CODES.MaxTimeMSExpired||t.writeConcernError?.code===Ee.MONGODB_ERROR_CODES.MaxTimeMSExpired}var Q1=class{constructor(e){if(e!=null){let r=Buffer.allocUnsafe(16);r.set(e.id.id.buffer),this.id={id:new b0.Binary(r,e.id.id.sub_type)},this.lastUse=e.lastUse,this.txnNumber=e.txnNumber,this.isDirty=e.isDirty;return}this.id={id:new b0.Binary((0,Cn.uuidV4)(),b0.Binary.SUBTYPE_UUID)},this.lastUse=(0,Cn.now)(),this.txnNumber=0,this.isDirty=!1}hasTimedOut(e){return Math.round((0,Cn.calculateDurationInMs)(this.lastUse)%864e5%36e5/6e4)>e-1}};ri.ServerSession=Q1;var P0=class{constructor(e){if(e==null)throw new Ee.MongoRuntimeError("ServerSessionPool requires a MongoClient");this.client=e,this.sessions=new Cn.List}acquire(){let e=this.client.topology?.logicalSessionTimeoutMinutes??10,r=null;for(;this.sessions.length>0;){let n=this.sessions.shift();if(n!=null&&(this.client.topology?.loadBalanced||!n.hasTimedOut(e))){r=n;break}}return r==null&&(r=new Q1),r}release(e){let r=this.client.topology?.logicalSessionTimeoutMinutes??10;if(this.client.topology?.loadBalanced&&!r&&this.sessions.unshift(e),!!r&&(this.sessions.prune(n=>n.hasTimedOut(r)),!e.hasTimedOut(r))){if(e.isDirty)return;this.sessions.unshift(e)}}};ri.ServerSessionPool=P0;function FZ(t,e,r){if(t.hasEnded)return new Ee.MongoExpiredSessionError;let n=t.serverSession;if(n==null)return new Ee.MongoRuntimeError("Unable to acquire server session");if(r.writeConcern?.w===0)return t&&t.explicit?new Ee.MongoAPIError("Cannot have explicit session with unacknowledged writes"):void 0;n.lastUse=(0,Cn.now)(),e.lsid=n.id;let s=t.inTransaction()||(0,it.isTransactionCommand)(e);if((!!r.willRetryWrite||s)&&(n.txnNumber+=t[B0],t[B0]=0,e.txnNumber=b0.Long.fromNumber(n.txnNumber)),!s){t.transaction.state!==it.TxnState.NO_TRANSACTION&&t.transaction.transition(it.TxnState.NO_TRANSACTION),t.supports.causalConsistency&&t.operationTime&&(0,Cn.commandSupportsReadConcern)(e)?(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime})):t[kc]&&(e.readConcern=e.readConcern||{level:BZ.ReadConcernLevel.snapshot},t[M0]!=null&&Object.assign(e.readConcern,{atClusterTime:t[M0]}));return}if(e.autocommit=!1,t.transaction.state===it.TxnState.STARTING_TRANSACTION){t.transaction.transition(it.TxnState.TRANSACTION_IN_PROGRESS),e.startTransaction=!0;let o=t.transaction.options.readConcern||t?.clientOptions?.readConcern;o&&(e.readConcern=o),t.supports.causalConsistency&&t.operationTime&&(e.readConcern=e.readConcern||{},Object.assign(e.readConcern,{afterClusterTime:t.operationTime}))}}function RZ(t,e){if(e.$clusterTime&&(0,aA._advanceClusterTime)(t,e.$clusterTime),e.operationTime&&t&&t.supports.causalConsistency&&t.advanceOperationTime(e.operationTime),e.recoveryToken&&t&&t.inTransaction()&&(t.transaction._recoveryToken=e.recoveryToken),t?.[kc]&&t[M0]==null){let r=e.atClusterTime;r&&(t[M0]=r)}}});var yA=g(Os=>{"use strict";d();Object.defineProperty(Os,"__esModule",{value:!0});Os.SENSITIVE_COMMANDS=Os.CommandFailedEvent=Os.CommandSucceededEvent=Os.CommandStartedEvent=void 0;var J1=jt(),ni=ae(),F0=k1(),cA=class{constructor(e,r,n){this.name=J1.COMMAND_STARTED;let s=pA(r),i=fA(s),{address:o,connectionId:u,serviceId:a}=mA(e);Os.SENSITIVE_COMMANDS.has(i)&&(this.commandObj={},this.commandObj[i]=!0),this.address=o,this.connectionId=u,this.serviceId=a,this.requestId=r.requestId,this.databaseName=r.databaseName,this.commandName=i,this.command=dA(i,s,s),this.serverConnectionId=n}get hasServiceId(){return!!this.serviceId}};Os.CommandStartedEvent=cA;var lA=class{constructor(e,r,n,s,i){this.name=J1.COMMAND_SUCCEEDED;let o=pA(r),u=fA(o),{address:a,connectionId:c,serviceId:l}=mA(e);this.address=a,this.connectionId=c,this.serviceId=l,this.requestId=r.requestId,this.commandName=u,this.duration=(0,ni.calculateDurationInMs)(s),this.reply=dA(u,o,qZ(r,n)),this.serverConnectionId=i}get hasServiceId(){return!!this.serviceId}};Os.CommandSucceededEvent=lA;var hA=class{constructor(e,r,n,s,i){this.name=J1.COMMAND_FAILED;let o=pA(r),u=fA(o),{address:a,connectionId:c,serviceId:l}=mA(e);this.address=a,this.connectionId=c,this.serviceId=l,this.requestId=r.requestId,this.commandName=u,this.duration=(0,ni.calculateDurationInMs)(s),this.failure=dA(u,o,n),this.serverConnectionId=i}get hasServiceId(){return!!this.serviceId}};Os.CommandFailedEvent=hA;Os.SENSITIVE_COMMANDS=new Set(["authenticate","saslStart","saslContinue","getnonce","createUser","updateUser","copydbgetnonce","copydbsaslstart","copydb"]);var vZ=new Set(["hello",J1.LEGACY_HELLO_COMMAND,J1.LEGACY_HELLO_COMMAND_CAMEL_CASE]),fA=t=>Object.keys(t)[0],$Z=t=>t.ns,xZ=t=>t.ns.split(".")[1],dA=(t,e,r)=>Os.SENSITIVE_COMMANDS.has(t)||vZ.has(t)&&e.speculativeAuthenticate?{}:r,BD={$query:"filter",$orderby:"sort",$hint:"hint",$comment:"comment",$maxScan:"maxScan",$max:"max",$min:"min",$returnKey:"returnKey",$showDiskLoc:"showRecordId",$maxTimeMS:"maxTimeMS",$snapshot:"snapshot"},ID={numberToSkip:"skip",numberToReturn:"batchSize",returnFieldSelector:"projection"},kZ=["tailable","oplogReplay","noCursorTimeout","awaitData","partial","exhaust"];function pA(t){if(t instanceof F0.OpMsgRequest){let n=(0,ni.deepCopy)(t.command);return n.ops instanceof F0.DocumentSequence&&(n.ops=n.ops.documents),n.nsInfo instanceof F0.DocumentSequence&&(n.nsInfo=n.nsInfo.documents),n}if(t.query?.$query){let n;return t.ns==="admin.$cmd"?n=Object.assign({},t.query.$query):(n={find:xZ(t)},Object.keys(BD).forEach(s=>{t.query[s]!=null&&(n[BD[s]]=(0,ni.deepCopy)(t.query[s]))})),Object.keys(ID).forEach(s=>{let i=s;t[i]!=null&&(n[ID[i]]=(0,ni.deepCopy)(t[i]))}),kZ.forEach(s=>{t[s]&&(n[s]=t[s])}),t.pre32Limit!=null&&(n.limit=t.pre32Limit),t.query.$explain?{explain:n}:n}let e={},r={};if(t.query){for(let n in t.query)e[n]=(0,ni.deepCopy)(t.query[n]);r.query=e}for(let n in t)n!=="query"&&(r[n]=(0,ni.deepCopy)(t[n]));return t.query?e:r}function qZ(t,e){return e&&(t instanceof F0.OpMsgRequest?(0,ni.deepCopy)(e.result?e.result:e):t.query&&t.query.$query!=null?{ok:1,cursor:{id:(0,ni.deepCopy)(e.cursorId),ns:$Z(t),firstBatch:(0,ni.deepCopy)(e.documents)}}:(0,ni.deepCopy)(e.result?e.result:e))}function mA(t){let e;return"id"in t&&(e=t.id),{address:t.address,serviceId:t.serviceId,connectionId:e}}});var PD=g(R0=>{"use strict";d();Object.defineProperty(R0,"__esModule",{value:!0});R0.StreamDescription=void 0;var LZ=Ue(),jZ=Vn(),UZ=Y1(),VZ=["minWireVersion","maxWireVersion","maxBsonObjectSize","maxMessageSizeBytes","maxWriteBatchSize","logicalSessionTimeoutMinutes"],gA=class{constructor(e,r){this.hello=null,this.address=e,this.type=jZ.ServerType.Unknown,this.minWireVersion=void 0,this.maxWireVersion=void 0,this.maxBsonObjectSize=16777216,this.maxMessageSizeBytes=48e6,this.maxWriteBatchSize=1e5,this.logicalSessionTimeoutMinutes=r?.logicalSessionTimeoutMinutes,this.loadBalanced=!!r?.loadBalanced,this.compressors=r&&r.compressors&&Array.isArray(r.compressors)?r.compressors:[],this.serverConnectionId=null}receiveResponse(e){if(e!=null){this.hello=e,this.type=(0,UZ.parseServerType)(e),"connectionId"in e?this.serverConnectionId=this.parseServerConnectionID(e.connectionId):this.serverConnectionId=null;for(let r of VZ)e[r]!=null&&(this[r]=e[r]),"__nodejs_mock_server__"in e&&(this.__nodejs_mock_server__=e.__nodejs_mock_server__);e.compression&&(this.compressor=this.compressors.filter(r=>e.compression?.includes(r))[0])}}parseServerConnectionID(e){return LZ.Long.isLong(e)?e.toBigInt():BigInt(e)}};R0.StreamDescription=gA});var ND=g(_A=>{"use strict";d();Object.defineProperty(_A,"__esModule",{value:!0});_A.onData=zZ;var EA=ae();function zZ(t,{timeoutContext:e}){let r=new EA.List,n=new EA.List,s=null,i=!1,o={next(){let h=r.shift();if(h!=null)return Promise.resolve({value:h,done:!1});if(s!=null){let y=Promise.reject(s);return s=null,y}if(i)return l();let{promise:f,resolve:p,reject:m}=(0,EA.promiseWithResolvers)();return n.push({resolve:p,reject:m}),f},return(){return l()},throw(h){return c(h),Promise.resolve({value:void 0,done:!0})},[Symbol.asyncIterator](){return this}};t.on("data",a),t.on("error",c);let u=e?.timeoutForSocketRead;return u?.throwIfExpired(),u?.then(void 0,c),o;function a(h){let f=n.shift();f!=null?f.resolve({value:h,done:!1}):r.push(h)}function c(h){let f=n.shift();f!=null?f.reject(h):s=h,l()}function l(){t.off("data",a),t.off("error",c),i=!0,u?.clear();let h={value:void 0,done:i};for(let f of n)f.resolve(h);return Promise.resolve(h)}}});var x0=g(uo=>{"use strict";d();Object.defineProperty(uo,"__esModule",{value:!0});uo.CryptoConnection=uo.SizedMessageTransform=uo.Connection=void 0;uo.hasSessionSupport=ZZ;var WZ=require("stream"),$D=require("timers"),HZ=Ue(),au=jt(),Rt=Z(),FD=Wu(),GZ=Hn(),KZ=lr(),YZ=Vn(),RD=qc(),vD=$r(),ws=ae(),AA=yA(),v0=k1(),QZ=PD(),JZ=q1(),XZ=ND(),X1=Hs(),SA=rA();function ZZ(t){return t.description.logicalSessionTimeoutMinutes!=null}function eee(t,e){if(e.proxyHost)return e.hostAddress.toString();let{remoteAddress:r,remotePort:n}=t;return typeof r=="string"&&typeof n=="number"?ws.HostAddress.fromHostPort(r,n).toString():(0,ws.uuidV4)().toString("hex")}var si=class t extends GZ.TypedEventEmitter{constructor(e,r){super(),this.lastHelloMS=-1,this.helloOk=!1,this.delayedTimeoutId=null,this.closed=!1,this.clusterTime=null,this.error=null,this.dataEvents=null,this.socket=e,this.id=r.id,this.address=eee(e,r),this.socketTimeoutMS=r.socketTimeoutMS??0,this.monitorCommands=r.monitorCommands,this.serverApi=r.serverApi,this.mongoLogger=r.mongoLogger,this.established=!1,this.description=new QZ.StreamDescription(this.address,r),this.generation=r.generation,this.lastUseTime=(0,ws.now)(),this.messageStream=this.socket.on("error",this.onError.bind(this)).pipe(new $0({connection:this})).on("error",this.onError.bind(this)),this.socket.on("close",this.onClose.bind(this)),this.socket.on("timeout",this.onTimeout.bind(this)),this.messageStream.pause()}get hello(){return this.description.hello}set hello(e){this.description.receiveResponse(e),Object.freeze(this.description)}get serviceId(){return this.hello?.serviceId}get loadBalanced(){return this.description.loadBalanced}get idleTime(){return(0,ws.calculateDurationInMs)(this.lastUseTime)}get hasSessionSupport(){return this.description.logicalSessionTimeoutMinutes!=null}get supportsOpMsg(){return this.description!=null&&(0,ws.maxWireVersion)(this)>=6&&!this.description.__nodejs_mock_server__}get shouldEmitAndLogCommand(){return(this.monitorCommands||this.established&&!this.authContext?.reauthenticating&&this.mongoLogger?.willLog(FD.MongoLoggableComponent.COMMAND,FD.SeverityLevel.DEBUG))??!1}markAvailable(){this.lastUseTime=(0,ws.now)()}onError(e){this.cleanup(e)}onClose(){let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new Rt.MongoNetworkError(e))}onTimeout(){this.delayedTimeoutId=(0,$D.setTimeout)(()=>{let e=`connection ${this.id} to ${this.address} timed out`,r=this.hello==null;this.cleanup(new Rt.MongoNetworkTimeoutError(e,{beforeHandshake:r}))},1).unref()}destroy(){if(this.closed)return;this.removeAllListeners(t.PINNED),this.removeAllListeners(t.UNPINNED);let e=`connection ${this.id} to ${this.address} closed`;this.cleanup(new Rt.MongoNetworkError(e))}cleanup(e){this.closed||(this.socket.destroy(),this.error=e,this.dataEvents?.throw(e).then(void 0,ws.squashError),this.closed=!0,this.emit(t.CLOSE))}prepareCommand(e,r,n){let s={...r},i=(0,SA.getReadPreference)(n),o=n?.session,u=this.clusterTime;if(this.serverApi){let{version:l,strict:h,deprecationErrors:f}=this.serverApi;s.apiVersion=l,h!=null&&(s.apiStrict=h),f!=null&&(s.apiDeprecationErrors=f)}if(this.hasSessionSupport&&o){o.clusterTime&&u&&o.clusterTime.clusterTime.greaterThan(u.clusterTime)&&(u=o.clusterTime);let l=(0,RD.applySession)(o,s,n);if(l)throw l}else if(o?.explicit)throw new Rt.MongoCompatibilityError("Current topology does not support sessions");u&&(s.$clusterTime=u),this.description.type!==YZ.ServerType.Standalone&&(!(0,SA.isSharded)(this)&&!this.description.loadBalanced&&this.supportsOpMsg&&n.directConnection===!0&&i?.mode==="primary"?s.$readPreference=KZ.ReadPreference.primaryPreferred.toJSON():(0,SA.isSharded)(this)&&!this.supportsOpMsg&&i?.mode!=="primary"?s={$query:s,$readPreference:i.toJSON()}:i?.mode!=="primary"&&(s.$readPreference=i.toJSON()));let a={numberToSkip:0,numberToReturn:-1,checkKeys:!1,secondaryOk:i.secondaryOk(),...n};return n.timeoutContext?.addMaxTimeMSToCommand(s,n),this.supportsOpMsg?new v0.OpMsgRequest(e,s,a):new v0.OpQueryRequest(e,s,a)}async*sendWire(e,r,n){this.throwIfAborted();let s=r.socketTimeoutMS??r?.timeoutContext?.getSocketTimeoutMS()??this.socketTimeoutMS;this.socket.setTimeout(s);try{if(await this.writeCommand(e,{agreedCompressor:this.description.compressor??"none",zlibCompressionLevel:this.description.zlibCompressionLevel,timeoutContext:r.timeoutContext}),r.noResponse||e.moreToCome){yield X1.MongoDBResponse.empty;return}if(this.throwIfAborted(),r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new Rt.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");for await(let i of this.readMany({timeoutContext:r.timeoutContext})){this.socket.setTimeout(0);let o=i.parse();yield(n??X1.MongoDBResponse).make(o),this.throwIfAborted(),this.socket.setTimeout(s)}}finally{this.socket.setTimeout(0)}}async*sendCommand(e,r,n,s){let i=this.prepareCommand(e.db,r,n),o=0;this.shouldEmitAndLogCommand&&(o=(0,ws.now)(),this.emitAndLogCommand(this.monitorCommands,t.COMMAND_STARTED,i.databaseName,this.established,new AA.CommandStartedEvent(this,i,this.description.serverConnectionId)));let u=n.documentsReturnedIn==null||!n.raw?n:{...n,raw:!1,fieldsAsRaw:{[n.documentsReturnedIn]:!0}},a,c;try{this.throwIfAborted();for await(a of this.sendWire(i,n,s)){if(c=void 0,n.session!=null&&(0,RD.updateSessionFromResponse)(n.session,a),a.$clusterTime&&(this.clusterTime=a.$clusterTime,this.emit(t.CLUSTER_TIME_RECEIVED,a.$clusterTime)),a.ok===0)throw n.timeoutContext?.csotEnabled()&&a.isMaxTimeExpiredError?new Rt.MongoOperationTimeoutError("Server reported a timeout error",{cause:new Rt.MongoServerError(c??=a.toObject(u))}):new Rt.MongoServerError(c??=a.toObject(u));this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_SUCCEEDED,i.databaseName,this.established,new AA.CommandSucceededEvent(this,i,n.noResponse?void 0:i.moreToCome?{ok:1}:c??=a.toObject(u),o,this.description.serverConnectionId)),s==null?yield c??=a.toObject(u):yield a,this.throwIfAborted()}}catch(l){throw this.shouldEmitAndLogCommand&&this.emitAndLogCommand(this.monitorCommands,t.COMMAND_FAILED,i.databaseName,this.established,new AA.CommandFailedEvent(this,i,l,o,this.description.serverConnectionId)),l}}async command(e,r,n={},s){this.throwIfAborted();for await(let i of this.sendCommand(e,r,n,s)){if(n.timeoutContext?.csotEnabled()){if(X1.MongoDBResponse.is(i)){if(i.isMaxTimeExpiredError)throw new Rt.MongoOperationTimeoutError("Server reported a timeout error",{cause:new Rt.MongoServerError(i.toObject())})}else if(Array.isArray(i?.writeErrors)&&i.writeErrors.some(o=>o?.code===Rt.MONGODB_ERROR_CODES.MaxTimeMSExpired)||i?.writeConcernError?.code===Rt.MONGODB_ERROR_CODES.MaxTimeMSExpired)throw new Rt.MongoOperationTimeoutError("Server reported a timeout error",{cause:new Rt.MongoServerError(i)})}return i}throw new Rt.MongoUnexpectedServerResponseError("Unable to get response from server")}exhaustCommand(e,r,n,s){(async()=>{this.throwIfAborted();for await(let o of this.sendCommand(e,r,n))s(void 0,o),this.throwIfAborted();throw new Rt.MongoUnexpectedServerResponseError("Server ended moreToCome unexpectedly")})().then(void 0,s)}throwIfAborted(){if(this.error)throw this.error}async writeCommand(e,r){let n=r.agreedCompressor==="none"||!v0.OpCompressedRequest.canCompress(e)?e:new v0.OpCompressedRequest(e,{agreedCompressor:r.agreedCompressor??"none",zlibCompressionLevel:r.zlibCompressionLevel??0}),s=Buffer.concat(await n.toBin());if(r.timeoutContext?.csotEnabled()&&r.timeoutContext.minRoundTripTime!=null&&r.timeoutContext.remainingTimeMS<r.timeoutContext.minRoundTripTime)throw new Rt.MongoOperationTimeoutError("Server roundtrip time is greater than the time remaining");if(this.socket.write(s))return;let i=(0,ws.once)(this.socket,"drain"),o=r?.timeoutContext?.timeoutForSocketWrite;if(o)try{return await Promise.race([i,o])}catch(u){let a=u;throw vD.TimeoutError.is(u)&&(a=new Rt.MongoOperationTimeoutError("Timed out at socket write"),this.cleanup(a)),u}finally{o.clear()}return await i}async*readMany(e){try{this.dataEvents=(0,XZ.onData)(this.messageStream,e),this.messageStream.resume();for await(let r of this.dataEvents){let n=await(0,JZ.decompressResponse)(r);if(yield n,!n.moreToCome)return}}catch(r){let n=r;if(vD.TimeoutError.is(r)){let s=new Rt.MongoOperationTimeoutError(`Timed out during socket read (${r.duration}ms)`);throw this.dataEvents=null,this.onError(s),s}throw n}finally{this.dataEvents=null,this.messageStream.pause(),this.throwIfAborted()}}};uo.Connection=si;si.COMMAND_STARTED=au.COMMAND_STARTED;si.COMMAND_SUCCEEDED=au.COMMAND_SUCCEEDED;si.COMMAND_FAILED=au.COMMAND_FAILED;si.CLUSTER_TIME_RECEIVED=au.CLUSTER_TIME_RECEIVED;si.CLOSE=au.CLOSE;si.PINNED=au.PINNED;si.UNPINNED=au.UNPINNED;var $0=class extends WZ.Transform{constructor({connection:e}){super({writableObjectMode:!1,readableObjectMode:!0}),this.bufferPool=new ws.BufferPool,this.connection=e}_transform(e,r,n){this.connection.delayedTimeoutId!=null&&((0,$D.clearTimeout)(this.connection.delayedTimeoutId),this.connection.delayedTimeoutId=null),this.bufferPool.append(e);let s=this.bufferPool.getInt32();if(s==null)return n();if(s<0)return n(new Rt.MongoParseError(`Invalid message size: ${s}, too small`));if(s>this.bufferPool.length)return n();let i=this.bufferPool.read(s);return n(null,i)}};uo.SizedMessageTransform=$0;var OA=class extends si{constructor(e,r){super(e,r),this.autoEncrypter=r.autoEncrypter}async command(e,r,n,s){let{autoEncrypter:i}=this;if(!i)throw new Rt.MongoMissingDependencyError("No AutoEncrypter available for encryption",{dependencyName:"n/a"});let o=(0,ws.maxWireVersion)(this);if(o===0)return await super.command(e,r,n,s);if(o<8)throw new Rt.MongoCompatibilityError("Auto-encryption requires a minimum MongoDB version of 4.2");let u=r.find||r.findAndModify?r.sort:null,a=r.createIndexes?r.indexes.map(p=>p.key):null,c=await i.encrypt(e.toString(),r,n);if(u!=null&&(r.find||r.findAndModify)&&(c.sort=u),a!=null&&r.createIndexes)for(let[p,m]of a.entries())c.indexes[p].key=m;let l=await super.command(e,c,n,s??X1.MongoDBResponse),h=await i.decrypt(l.toBytes(),n),f=s?.make(h)??(0,HZ.deserialize)(h,n);return i[au.kDecorateResult]&&(s==null?(0,ws.decorateDecryptionResult)(f,l.toObject(),!0):f instanceof X1.CursorResponse&&(f.encryptedResponse=l)),f}};uo.CryptoConnection=OA});var bA=g(Qn=>{"use strict";d();Object.defineProperty(Qn,"__esModule",{value:!0});Qn.LEGAL_TCP_SOCKET_OPTIONS=Qn.LEGAL_TLS_SOCKET_OPTIONS=void 0;Qn.connect=see;Qn.makeConnection=LD;Qn.performInitialHandshake=jD;Qn.prepareHandshakeDocument=UD;Qn.makeSocket=q0;var kD=require("net"),tee=require("tls"),qD=jt(),ree=Xs(),Dt=Z(),wA=ae(),nee=eu(),k0=Di(),xD=x0(),Lc=Lu();async function see(t){let e=null;try{let r=await q0(t);return e=LD(t,r),await jD(e,t),e}catch(r){throw e?.destroy(),r}}function LD(t,e){let r=t.connectionType??xD.Connection;return t.autoEncrypter&&(r=xD.CryptoConnection),new r(e,t)}function iee(t,e){let r=Number(t.maxWireVersion),n=Number(t.minWireVersion),s=!Number.isNaN(r)&&r>=Lc.MIN_SUPPORTED_WIRE_VERSION,i=!Number.isNaN(n)&&n<=Lc.MAX_SUPPORTED_WIRE_VERSION;if(s){if(i)return null;let u=`Server at ${e.hostAddress} reports minimum wire version ${JSON.stringify(t.minWireVersion)}, but this version of the Node.js Driver requires at most ${Lc.MAX_SUPPORTED_WIRE_VERSION} (MongoDB ${Lc.MAX_SUPPORTED_SERVER_VERSION})`;return new Dt.MongoCompatibilityError(u)}let o=`Server at ${e.hostAddress} reports maximum wire version ${JSON.stringify(t.maxWireVersion)??0}, but this version of the Node.js Driver requires at least ${Lc.MIN_SUPPORTED_WIRE_VERSION} (MongoDB ${Lc.MIN_SUPPORTED_SERVER_VERSION})`;return new Dt.MongoCompatibilityError(o)}async function jD(t,e){let r=e.credentials;if(r&&r.mechanism!==k0.AuthMechanism.MONGODB_DEFAULT&&!e.authProviders.getOrCreateProvider(r.mechanism,r.mechanismProperties))throw new Dt.MongoInvalidArgumentError(`AuthMechanism '${r.mechanism}' not supported`);let n=new nee.AuthContext(t,r,e);t.authContext=n;let s=await UD(n),i={...e,raw:!1};typeof e.connectTimeoutMS=="number"&&(i.socketTimeoutMS=e.connectTimeoutMS);let o=new Date().getTime(),u=await c(s,i);"isWritablePrimary"in u||(u.isWritablePrimary=u[qD.LEGACY_HELLO_COMMAND]),u.helloOk&&(t.helloOk=!0);let a=iee(u,e);if(a)throw a;if(e.loadBalanced&&!u.serviceId)throw new Dt.MongoCompatibilityError("Driver attempted to initialize in load balancing mode, but the server does not support this mode.");if(t.hello=u,t.lastHelloMS=new Date().getTime()-o,!u.arbiterOnly&&r){n.response=u;let l=r.resolveAuthMechanism(u),h=e.authProviders.getOrCreateProvider(l.mechanism,l.mechanismProperties);if(!h)throw new Dt.MongoInvalidArgumentError(`No AuthProvider for ${l.mechanism} defined.`);try{await h.auth(n)}catch(f){throw f instanceof Dt.MongoError&&(f.addErrorLabel(Dt.MongoErrorLabel.HandshakeError),(0,Dt.needsRetryableWriteLabel)(f,u.maxWireVersion,t.description.type)&&f.addErrorLabel(Dt.MongoErrorLabel.RetryableWriteError)),f}}t.established=!0;async function c(l,h){try{return await t.command((0,wA.ns)("admin.$cmd"),l,h)}catch(f){throw f instanceof Dt.MongoError&&f.addErrorLabel(Dt.MongoErrorLabel.HandshakeError),f}}}async function UD(t){let e=t.options,r=e.compressors?e.compressors:[],{serverApi:n}=t.connection,s=await e.extendedMetadata,i={[n?.version||e.loadBalanced===!0?"hello":qD.LEGACY_HELLO_COMMAND]:1,helloOk:!0,client:s,compression:r};e.loadBalanced===!0&&(i.loadBalanced=!0);let o=t.credentials;if(o){if(o.mechanism===k0.AuthMechanism.MONGODB_DEFAULT&&o.username){i.saslSupportedMechs=`${o.source}.${o.username}`;let a=t.options.authProviders.getOrCreateProvider(k0.AuthMechanism.MONGODB_SCRAM_SHA256,o.mechanismProperties);if(!a)throw new Dt.MongoInvalidArgumentError(`No AuthProvider for ${k0.AuthMechanism.MONGODB_SCRAM_SHA256} defined.`);return await a.prepare(i,t)}let u=t.options.authProviders.getOrCreateProvider(o.mechanism,o.mechanismProperties);if(!u)throw new Dt.MongoInvalidArgumentError(`No AuthProvider for ${o.mechanism} defined.`);return await u.prepare(i,t)}return i}Qn.LEGAL_TLS_SOCKET_OPTIONS=["allowPartialTrustChain","ALPNProtocols","ca","cert","checkServerIdentity","ciphers","crl","ecdhCurve","key","minDHSize","passphrase","pfx","rejectUnauthorized","secureContext","secureProtocol","servername","session"];Qn.LEGAL_TCP_SOCKET_OPTIONS=["autoSelectFamily","autoSelectFamilyAttemptTimeout","family","hints","localAddress","localPort","lookup"];function CA(t){let e=t.hostAddress;if(!e)throw new Dt.MongoInvalidArgumentError('Option "hostAddress" is required');let r={};for(let n of Qn.LEGAL_TCP_SOCKET_OPTIONS)t[n]!=null&&(r[n]=t[n]);if(typeof e.socketPath=="string")return r.path=e.socketPath,r;if(typeof e.host=="string")return r.host=e.host,r.port=e.port,r;throw new Dt.MongoRuntimeError(`Unexpected HostAddress ${JSON.stringify(e)}`)}function oee(t){let e=CA(t);for(let r of Qn.LEGAL_TLS_SOCKET_OPTIONS)t[r]!=null&&(e[r]=t[r]);return t.existingSocket&&(e.socket=t.existingSocket),e.servername==null&&e.host&&!kD.isIP(e.host)&&(e.servername=e.host),e}async function q0(t){let e=t.tls??!1,r=t.noDelay??!0,n=t.connectTimeoutMS??3e4,s=t.existingSocket,i;if(t.proxyHost!=null)return await aee({...t,connectTimeoutMS:n});if(e){let l=tee.connect(oee(t));typeof l.disableRenegotiation=="function"&&l.disableRenegotiation(),i=l}else s?i=s:i=kD.createConnection(CA(t));i.setKeepAlive(!0,3e5),i.setTimeout(n),i.setNoDelay(r);let o=null,{promise:u,resolve:a,reject:c}=(0,wA.promiseWithResolvers)();if(s)a(i);else{let l=performance.now(),h=e?"secureConnect":"connect";i.once(h,()=>a(i)).once("error",f=>c(new Dt.MongoNetworkError(Dt.MongoError.buildErrorMessage(f),{cause:f}))).once("timeout",()=>{c(new Dt.MongoNetworkTimeoutError(`Socket '${h}' timed out after ${performance.now()-l|0}ms (connectTimeoutMS: ${n})`))}).once("close",()=>c(new Dt.MongoNetworkError(`Socket closed after ${performance.now()-l|0} during connection establishment`))),t.cancellationToken!=null&&(o=()=>c(new Dt.MongoNetworkError(`Socket connection establishment was cancelled after ${performance.now()-l|0}`)),t.cancellationToken.once("cancel",o))}try{return i=await u,i}catch(l){throw i.destroy(),l}finally{i.setTimeout(0),i.removeAllListeners(),o!=null&&t.cancellationToken?.removeListener("cancel",o)}}var Z1=null;function uee(){if(Z1==null){let t=(0,ree.getSocks)();if("kModuleError"in t)throw t.kModuleError;Z1=t}return Z1}async function aee(t){let e=wA.HostAddress.fromHostPort(t.proxyHost??"",t.proxyPort??1080),r=await q0({...t,hostAddress:e,tls:!1,proxyHost:void 0}),n=CA(t);if(typeof n.host!="string"||typeof n.port!="number")throw new Dt.MongoInvalidArgumentError("Can only make Socks5 connections to TCP hosts");Z1??=uee();let s;try{s=(await Z1.SocksClient.createConnection({existing_socket:r,timeout:t.connectTimeoutMS,command:"connect",destination:{host:n.host,port:n.port},proxy:{host:"iLoveJavaScript",port:0,type:5,userId:t.proxyUsername||void 0,password:t.proxyPassword||void 0}})).socket}catch(i){throw new Dt.MongoNetworkError(Dt.MongoError.buildErrorMessage(i),{cause:i})}return await q0({...t,existingSocket:s,proxyHost:void 0})}});var L0=g(Qt=>{"use strict";d();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.ServerHeartbeatFailedEvent=Qt.ServerHeartbeatSucceededEvent=Qt.ServerHeartbeatStartedEvent=Qt.TopologyClosedEvent=Qt.TopologyOpeningEvent=Qt.TopologyDescriptionChangedEvent=Qt.ServerClosedEvent=Qt.ServerOpeningEvent=Qt.ServerDescriptionChangedEvent=void 0;var ao=jt(),TA=class{constructor(e,r,n,s){this.name=ao.SERVER_DESCRIPTION_CHANGED,this.topologyId=e,this.address=r,this.previousDescription=n,this.newDescription=s}};Qt.ServerDescriptionChangedEvent=TA;var DA=class{constructor(e,r){this.name=ao.SERVER_OPENING,this.topologyId=e,this.address=r}};Qt.ServerOpeningEvent=DA;var MA=class{constructor(e,r){this.name=ao.SERVER_CLOSED,this.topologyId=e,this.address=r}};Qt.ServerClosedEvent=MA;var BA=class{constructor(e,r,n){this.name=ao.TOPOLOGY_DESCRIPTION_CHANGED,this.topologyId=e,this.previousDescription=r,this.newDescription=n}};Qt.TopologyDescriptionChangedEvent=BA;var IA=class{constructor(e){this.name=ao.TOPOLOGY_OPENING,this.topologyId=e}};Qt.TopologyOpeningEvent=IA;var PA=class{constructor(e){this.name=ao.TOPOLOGY_CLOSED,this.topologyId=e}};Qt.TopologyClosedEvent=PA;var NA=class{constructor(e,r){this.name=ao.SERVER_HEARTBEAT_STARTED,this.connectionId=e,this.awaited=r}};Qt.ServerHeartbeatStartedEvent=NA;var FA=class{constructor(e,r,n,s){this.name=ao.SERVER_HEARTBEAT_SUCCEEDED,this.connectionId=e,this.duration=r,this.reply=n??{},this.awaited=s}};Qt.ServerHeartbeatSucceededEvent=FA;var RA=class{constructor(e,r,n,s){this.name=ao.SERVER_HEARTBEAT_FAILED,this.connectionId=e,this.duration=r,this.failure=n,this.awaited=s}};Qt.ServerHeartbeatFailedEvent=RA});var GA=g(dt=>{"use strict";d();Object.defineProperty(dt,"__esModule",{value:!0});dt.ConnectionPoolClearedEvent=dt.ConnectionCheckedInEvent=dt.ConnectionCheckedOutEvent=dt.ConnectionCheckOutFailedEvent=dt.ConnectionCheckOutStartedEvent=dt.ConnectionClosedEvent=dt.ConnectionReadyEvent=dt.ConnectionCreatedEvent=dt.ConnectionPoolClosedEvent=dt.ConnectionPoolReadyEvent=dt.ConnectionPoolCreatedEvent=dt.ConnectionPoolMonitoringEvent=void 0;var ii=jt(),HA=ae(),bn=class{constructor(e){this.time=new Date,this.address=e.address}};dt.ConnectionPoolMonitoringEvent=bn;var vA=class extends bn{constructor(e){super(e),this.name=ii.CONNECTION_POOL_CREATED;let{maxConnecting:r,maxPoolSize:n,minPoolSize:s,maxIdleTimeMS:i,waitQueueTimeoutMS:o}=e.options;this.options={maxConnecting:r,maxPoolSize:n,minPoolSize:s,maxIdleTimeMS:i,waitQueueTimeoutMS:o}}};dt.ConnectionPoolCreatedEvent=vA;var $A=class extends bn{constructor(e){super(e),this.name=ii.CONNECTION_POOL_READY}};dt.ConnectionPoolReadyEvent=$A;var xA=class extends bn{constructor(e){super(e),this.name=ii.CONNECTION_POOL_CLOSED}};dt.ConnectionPoolClosedEvent=xA;var kA=class extends bn{constructor(e,r){super(e),this.name=ii.CONNECTION_CREATED,this.connectionId=r.id}};dt.ConnectionCreatedEvent=kA;var qA=class extends bn{constructor(e,r,n){super(e),this.name=ii.CONNECTION_READY,this.durationMS=(0,HA.now)()-n,this.connectionId=r.id}};dt.ConnectionReadyEvent=qA;var LA=class extends bn{constructor(e,r,n,s){super(e),this.name=ii.CONNECTION_CLOSED,this.connectionId=r.id,this.reason=n,this.serviceId=r.serviceId,this.error=s??null}};dt.ConnectionClosedEvent=LA;var jA=class extends bn{constructor(e){super(e),this.name=ii.CONNECTION_CHECK_OUT_STARTED}};dt.ConnectionCheckOutStartedEvent=jA;var UA=class extends bn{constructor(e,r,n,s){super(e),this.name=ii.CONNECTION_CHECK_OUT_FAILED,this.durationMS=(0,HA.now)()-n,this.reason=r,this.error=s}};dt.ConnectionCheckOutFailedEvent=UA;var VA=class extends bn{constructor(e,r,n){super(e),this.name=ii.CONNECTION_CHECKED_OUT,this.durationMS=(0,HA.now)()-n,this.connectionId=r.id}};dt.ConnectionCheckedOutEvent=VA;var zA=class extends bn{constructor(e,r){super(e),this.name=ii.CONNECTION_CHECKED_IN,this.connectionId=r.id}};dt.ConnectionCheckedInEvent=zA;var WA=class extends bn{constructor(e,r={}){super(e),this.name=ii.CONNECTION_POOL_CLEARED,this.serviceId=r.serviceId,this.interruptInUseConnections=r.interruptInUseConnections}};dt.ConnectionPoolClearedEvent=WA});var JA=g(Bi=>{"use strict";d();Object.defineProperty(Bi,"__esModule",{value:!0});Bi.WaitQueueTimeoutError=Bi.PoolClearedOnNetworkError=Bi.PoolClearedError=Bi.PoolClosedError=void 0;var j0=Z(),KA=class extends j0.MongoDriverError{constructor(e){super("Attempted to check out a connection from closed connection pool"),this.address=e.address}get name(){return"MongoPoolClosedError"}};Bi.PoolClosedError=KA;var U0=class extends j0.MongoNetworkError{constructor(e,r){let n=r||`Connection pool for ${e.address} was cleared because another operation failed with: "${e.serverError?.message}"`;super(n,e.serverError?{cause:e.serverError}:void 0),this.address=e.address,this.addErrorLabel(j0.MongoErrorLabel.PoolRequstedRetry)}get name(){return"MongoPoolClearedError"}};Bi.PoolClearedError=U0;var YA=class extends U0{constructor(e){super(e,`Connection to ${e.address} interrupted due to server monitor timeout`)}get name(){return"PoolClearedOnNetworkError"}};Bi.PoolClearedOnNetworkError=YA;var QA=class extends j0.MongoDriverError{constructor(e,r){super(e),this.address=r}get name(){return"MongoWaitQueueTimeoutError"}};Bi.WaitQueueTimeoutError=QA});var WD=g(br=>{"use strict";d();Object.defineProperty(br,"__esModule",{value:!0});br.ConnectionPool=br.PoolState=void 0;var jc=require("timers"),Cs=jt(),Ii=Z(),VD=Hn(),cee=$r(),Uc=ae(),lee=bA(),V0=x0(),Cr=GA(),Vc=JA(),hee=Q6(),zc=Symbol("server"),co=Symbol("connections"),Wc=Symbol("pending"),cu=Symbol("checkedOut"),la=Symbol("minPoolSizeTimer"),Hc=Symbol("generation"),zD=Symbol("serviceGenerations"),z0=Symbol("connectionCounter"),W0=Symbol("cancellationToken"),lo=Symbol("waitQueue"),H0=Symbol("cancelled"),G0=Symbol("metrics"),K0=Symbol("processingWaitQueue"),oi=Symbol("poolState");br.PoolState=Object.freeze({paused:"paused",ready:"ready",closed:"closed"});var Tn=class t extends VD.TypedEventEmitter{constructor(e,r){if(super(),this.options=Object.freeze({connectionType:V0.Connection,...r,maxPoolSize:r.maxPoolSize??100,minPoolSize:r.minPoolSize??0,maxConnecting:r.maxConnecting??2,maxIdleTimeMS:r.maxIdleTimeMS??0,waitQueueTimeoutMS:r.waitQueueTimeoutMS??0,minPoolSizeCheckFrequencyMS:r.minPoolSizeCheckFrequencyMS??100,autoEncrypter:r.autoEncrypter}),this.options.minPoolSize>this.options.maxPoolSize)throw new Ii.MongoInvalidArgumentError("Connection pool minimum size must not be greater than maximum pool size");this[oi]=br.PoolState.paused,this[zc]=e,this[co]=new Uc.List,this[Wc]=0,this[cu]=new Set,this[la]=void 0,this[Hc]=0,this[zD]=new Map,this[z0]=(0,Uc.makeCounter)(1),this[W0]=new VD.CancellationToken,this[W0].setMaxListeners(1/0),this[lo]=new Uc.List,this[G0]=new hee.ConnectionPoolMetrics,this[K0]=!1,this.mongoLogger=this[zc].topology.client?.mongoLogger,this.component="connection",process.nextTick(()=>{this.emitAndLog(t.CONNECTION_POOL_CREATED,new Cr.ConnectionPoolCreatedEvent(this))})}get address(){return this.options.hostAddress.toString()}get closed(){return this[oi]===br.PoolState.closed}get generation(){return this[Hc]}get totalConnectionCount(){return this.availableConnectionCount+this.pendingConnectionCount+this.currentCheckedOutCount}get availableConnectionCount(){return this[co].length}get pendingConnectionCount(){return this[Wc]}get currentCheckedOutCount(){return this[cu].size}get waitQueueSize(){return this[lo].length}get loadBalanced(){return this.options.loadBalanced}get serviceGenerations(){return this[zD]}get serverError(){return this[zc].description.error}get checkedOutConnections(){return this[cu]}waitQueueErrorMetrics(){return this[G0].info(this.options.maxPoolSize)}ready(){this[oi]===br.PoolState.paused&&(this[oi]=br.PoolState.ready,this.emitAndLog(t.CONNECTION_POOL_READY,new Cr.ConnectionPoolReadyEvent(this)),(0,jc.clearTimeout)(this[la]),this.ensureMinPoolSize())}async checkOut(e){let r=(0,Uc.now)();this.emitAndLog(t.CONNECTION_CHECK_OUT_STARTED,new Cr.ConnectionCheckOutStartedEvent(this));let{promise:n,resolve:s,reject:i}=(0,Uc.promiseWithResolvers)(),o=e.timeoutContext.connectionCheckoutTimeout,u={resolve:s,reject:i,checkoutTime:r};this[lo].push(u),process.nextTick(()=>this.processWaitQueue());try{return o?.throwIfExpired(),await(o?Promise.race([n,o]):n)}catch(a){if(cee.TimeoutError.is(a)){o?.clear(),u[H0]=!0,this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Cr.ConnectionCheckOutFailedEvent(this,"timeout",u.checkoutTime));let c=new Vc.WaitQueueTimeoutError(this.loadBalanced?this.waitQueueErrorMetrics():"Timed out while checking out a connection from connection pool",this.address);throw e.timeoutContext.csotEnabled()?new Ii.MongoOperationTimeoutError("Timed out during connection checkout",{cause:c}):c}throw a}finally{o?.clear()}}checkIn(e){if(!this[cu].has(e))return;let r=this.closed,n=this.connectionIsStale(e),s=!!(r||n||e.closed);if(s||(e.markAvailable(),this[co].unshift(e)),this[cu].delete(e),this.emitAndLog(t.CONNECTION_CHECKED_IN,new Cr.ConnectionCheckedInEvent(this,e)),s){let i=e.closed?"error":r?"poolClosed":"stale";this.destroyConnection(e,i)}process.nextTick(()=>this.processWaitQueue())}clear(e={}){if(this.closed)return;if(this.loadBalanced){let{serviceId:i}=e;if(!i)throw new Ii.MongoRuntimeError("ConnectionPool.clear() called in load balanced mode with no serviceId.");let o=i.toHexString(),u=this.serviceGenerations.get(o);if(u==null)throw new Ii.MongoRuntimeError("Service generations are required in load balancer mode.");this.serviceGenerations.set(o,u+1),this.emitAndLog(t.CONNECTION_POOL_CLEARED,new Cr.ConnectionPoolClearedEvent(this,{serviceId:i}));return}let r=e.interruptInUseConnections??!1,n=this[Hc];this[Hc]+=1;let s=this[oi]===br.PoolState.paused;this[oi]=br.PoolState.paused,this.clearMinPoolSizeTimer(),s||this.emitAndLog(t.CONNECTION_POOL_CLEARED,new Cr.ConnectionPoolClearedEvent(this,{interruptInUseConnections:r})),r&&process.nextTick(()=>this.interruptInUseConnections(n)),this.processWaitQueue()}interruptInUseConnections(e){for(let r of this[cu])r.generation<=e&&(r.onError(new Vc.PoolClearedOnNetworkError(this)),this.checkIn(r))}close(){if(!this.closed){this[W0].emit("cancel"),typeof this[z0].return=="function"&&this[z0].return(void 0),this[oi]=br.PoolState.closed,this.clearMinPoolSizeTimer(),this.processWaitQueue();for(let e of this[co])this.emitAndLog(t.CONNECTION_CLOSED,new Cr.ConnectionClosedEvent(this,e,"poolClosed")),e.destroy();this[co].clear(),this.emitAndLog(t.CONNECTION_POOL_CLOSED,new Cr.ConnectionPoolClosedEvent(this))}}async reauthenticate(e){let r=e.authContext;if(!r)throw new Ii.MongoRuntimeError("No auth context found on connection.");let n=r.credentials;if(!n)throw new Ii.MongoMissingCredentialsError("Connection is missing credentials when asked to reauthenticate");let s=n.resolveAuthMechanism(e.hello),i=this[zc].topology.client.s.authProviders.getOrCreateProvider(s.mechanism,s.mechanismProperties);if(!i)throw new Ii.MongoMissingCredentialsError(`Reauthenticate failed due to no auth provider for ${n.mechanism}`);await i.reauth(r)}clearMinPoolSizeTimer(){let e=this[la];e&&(0,jc.clearTimeout)(e)}destroyConnection(e,r){this.emitAndLog(t.CONNECTION_CLOSED,new Cr.ConnectionClosedEvent(this,e,r)),e.destroy()}connectionIsStale(e){let r=e.serviceId;if(this.loadBalanced&&r){let n=r.toHexString(),s=this.serviceGenerations.get(n);return e.generation!==s}return e.generation!==this[Hc]}connectionIsIdle(e){return!!(this.options.maxIdleTimeMS&&e.idleTime>this.options.maxIdleTimeMS)}destroyConnectionIfPerished(e){let r=this.connectionIsStale(e),n=this.connectionIsIdle(e);if(!r&&!n&&!e.closed)return!1;let s=e.closed?"error":r?"stale":"idle";return this.destroyConnection(e,s),!0}createConnection(e){let r={...this.options,id:this[z0].next().value,generation:this[Hc],cancellationToken:this[W0],mongoLogger:this.mongoLogger,authProviders:this[zc].topology.client.s.authProviders};this[Wc]++;let n=(0,Uc.now)();this.emitAndLog(t.CONNECTION_CREATED,new Cr.ConnectionCreatedEvent(this,{id:r.id})),(0,lee.connect)(r).then(s=>{if(this[oi]!==br.PoolState.ready){this[Wc]--,s.destroy(),e(this.closed?new Vc.PoolClosedError(this):new Vc.PoolClearedError(this));return}for(let i of[...Cs.APM_EVENTS,V0.Connection.CLUSTER_TIME_RECEIVED])s.on(i,o=>this.emit(i,o));if(this.loadBalanced){s.on(V0.Connection.PINNED,o=>this[G0].markPinned(o)),s.on(V0.Connection.UNPINNED,o=>this[G0].markUnpinned(o));let i=s.serviceId;if(i){let o,u=i.toHexString();(o=this.serviceGenerations.get(u))?s.generation=o:(this.serviceGenerations.set(u,0),s.generation=0)}}s.markAvailable(),this.emitAndLog(t.CONNECTION_READY,new Cr.ConnectionReadyEvent(this,s,n)),this[Wc]--,e(void 0,s)},s=>{this[Wc]--,this[zc].handleError(s),this.emitAndLog(t.CONNECTION_CLOSED,new Cr.ConnectionClosedEvent(this,{id:r.id,serviceId:void 0},"error",s)),(s instanceof Ii.MongoNetworkError||s instanceof Ii.MongoServerError)&&(s.connectionGeneration=r.generation),e(s??new Ii.MongoRuntimeError("Connection creation failed without error"))})}ensureMinPoolSize(){let e=this.options.minPoolSize;this[oi]!==br.PoolState.ready||e===0||(this[co].prune(r=>this.destroyConnectionIfPerished(r)),this.totalConnectionCount<e&&this.pendingConnectionCount<this.options.maxConnecting?this.createConnection((r,n)=>{!r&&n&&(this[co].push(n),process.nextTick(()=>this.processWaitQueue())),this[oi]===br.PoolState.ready&&((0,jc.clearTimeout)(this[la]),this[la]=(0,jc.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS))}):((0,jc.clearTimeout)(this[la]),this[la]=(0,jc.setTimeout)(()=>this.ensureMinPoolSize(),this.options.minPoolSizeCheckFrequencyMS)))}processWaitQueue(){if(this[K0])return;for(this[K0]=!0;this.waitQueueSize;){let n=this[lo].first();if(!n){this[lo].shift();continue}if(n[H0]){this[lo].shift();continue}if(this[oi]!==br.PoolState.ready){let i=this.closed?"poolClosed":"connectionError",o=this.closed?new Vc.PoolClosedError(this):new Vc.PoolClearedError(this);this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Cr.ConnectionCheckOutFailedEvent(this,i,n.checkoutTime,o)),this[lo].shift(),n.reject(o);continue}if(!this.availableConnectionCount)break;let s=this[co].shift();if(!s)break;this.destroyConnectionIfPerished(s)||(this[cu].add(s),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new Cr.ConnectionCheckedOutEvent(this,s,n.checkoutTime)),this[lo].shift(),n.resolve(s))}let{maxPoolSize:e,maxConnecting:r}=this.options;for(;this.waitQueueSize>0&&this.pendingConnectionCount<r&&(e===0||this.totalConnectionCount<e);){let n=this[lo].shift();!n||n[H0]||this.createConnection((s,i)=>{n[H0]?!s&&i&&this[co].push(i):s?(this.emitAndLog(t.CONNECTION_CHECK_OUT_FAILED,new Cr.ConnectionCheckOutFailedEvent(this,"connectionError",n.checkoutTime,s)),n.reject(s)):i&&(this[cu].add(i),this.emitAndLog(t.CONNECTION_CHECKED_OUT,new Cr.ConnectionCheckedOutEvent(this,i,n.checkoutTime)),n.resolve(i)),process.nextTick(()=>this.processWaitQueue())})}this[K0]=!1}};br.ConnectionPool=Tn;Tn.CONNECTION_POOL_CREATED=Cs.CONNECTION_POOL_CREATED;Tn.CONNECTION_POOL_CLOSED=Cs.CONNECTION_POOL_CLOSED;Tn.CONNECTION_POOL_CLEARED=Cs.CONNECTION_POOL_CLEARED;Tn.CONNECTION_POOL_READY=Cs.CONNECTION_POOL_READY;Tn.CONNECTION_CREATED=Cs.CONNECTION_CREATED;Tn.CONNECTION_READY=Cs.CONNECTION_READY;Tn.CONNECTION_CLOSED=Cs.CONNECTION_CLOSED;Tn.CONNECTION_CHECK_OUT_STARTED=Cs.CONNECTION_CHECK_OUT_STARTED;Tn.CONNECTION_CHECK_OUT_FAILED=Cs.CONNECTION_CHECK_OUT_FAILED;Tn.CONNECTION_CHECKED_OUT=Cs.CONNECTION_CHECKED_OUT;Tn.CONNECTION_CHECKED_IN=Cs.CONNECTION_CHECKED_IN});var r4=g(Q0=>{"use strict";d();Object.defineProperty(Q0,"__esModule",{value:!0});Q0.Server=void 0;var fee=x0(),dee=WD(),pee=JA(),Pi=jt(),St=Z(),mee=Hn(),e4=sA(),Y0=ae(),HD=vr(),ut=Vn(),yee=n4(),t4=Y1(),eh=(0,Y0.makeStateMachine)({[ut.STATE_CLOSED]:[ut.STATE_CLOSED,ut.STATE_CONNECTING],[ut.STATE_CONNECTING]:[ut.STATE_CONNECTING,ut.STATE_CLOSING,ut.STATE_CONNECTED,ut.STATE_CLOSED],[ut.STATE_CONNECTED]:[ut.STATE_CONNECTED,ut.STATE_CLOSING,ut.STATE_CLOSED],[ut.STATE_CLOSING]:[ut.STATE_CLOSING,ut.STATE_CLOSED]}),ui=class t extends mee.TypedEventEmitter{constructor(e,r,n){super(),this.serverApi=n.serverApi;let s={hostAddress:r.hostAddress,...n};this.topology=e,this.pool=new dee.ConnectionPool(this,s),this.s={description:r,options:n,state:ut.STATE_CLOSED,operationCount:0};for(let i of[...Pi.CMAP_EVENTS,...Pi.APM_EVENTS])this.pool.on(i,o=>this.emit(i,o));if(this.pool.on(fee.Connection.CLUSTER_TIME_RECEIVED,i=>{this.clusterTime=i}),this.loadBalanced){this.monitor=null;return}this.monitor=new yee.Monitor(this,this.s.options);for(let i of Pi.HEARTBEAT_EVENTS)this.monitor.on(i,o=>this.emit(i,o));this.monitor.on("resetServer",i=>XA(this,i)),this.monitor.on(t.SERVER_HEARTBEAT_SUCCEEDED,i=>{this.emit(t.DESCRIPTION_RECEIVED,new t4.ServerDescription(this.description.hostAddress,i.reply,{roundTripTime:this.monitor?.roundTripTime,minRoundTripTime:this.monitor?.minRoundTripTime})),this.s.state===ut.STATE_CONNECTING&&(eh(this,ut.STATE_CONNECTED),this.emit(t.CONNECT,this))})}get clusterTime(){return this.topology.clusterTime}set clusterTime(e){this.topology.clusterTime=e}get description(){return this.s.description}get name(){return this.s.description.address}get autoEncrypter(){if(this.s.options&&this.s.options.autoEncrypter)return this.s.options.autoEncrypter}get loadBalanced(){return this.topology.description.type===ut.TopologyType.LoadBalanced}connect(){this.s.state===ut.STATE_CLOSED&&(eh(this,ut.STATE_CONNECTING),this.loadBalanced?(eh(this,ut.STATE_CONNECTED),this.emit(t.CONNECT,this)):this.monitor?.connect())}destroy(){this.s.state!==ut.STATE_CLOSED&&(eh(this,ut.STATE_CLOSING),this.loadBalanced||this.monitor?.close(),this.pool.close(),eh(this,ut.STATE_CLOSED),this.emit("closed"))}requestCheck(){this.loadBalanced||this.monitor?.requestCheck()}async command(e,r,n,s){if(e.db==null||typeof e=="string")throw new St.MongoInvalidArgumentError("Namespace must not be a string");if(this.s.state===ut.STATE_CLOSING||this.s.state===ut.STATE_CLOSED)throw new St.MongoServerClosedError;let i=Object.assign({},n,{wireProtocolCommand:!1,directConnection:this.topology.s.options.directConnection});i.omitReadPreference&&delete i.readPreference,this.description.iscryptd&&(i.omitMaxTimeMS=!0);let o=i.session,u=o?.pinnedConnection;if(this.incrementOperationCount(),u==null)try{u=await this.pool.checkOut(n),this.loadBalanced&&gee(r,o)&&o?.pin(u)}catch(a){throw this.decrementOperationCount(),a instanceof pee.PoolClearedError||this.handleError(a),a}try{try{let a=await u.command(e,r,i,s);return(0,HD.throwIfWriteConcernError)(a),a}catch(a){throw this.decorateCommandError(u,r,i,a)}}catch(a){if(a instanceof St.MongoError&&a.code===St.MONGODB_ERROR_CODES.Reauthenticate){await this.pool.reauthenticate(u);try{let c=await u.command(e,r,i,s);return(0,HD.throwIfWriteConcernError)(c),c}catch(c){throw this.decorateCommandError(u,r,i,c)}}else throw a}finally{this.decrementOperationCount(),o?.pinnedConnection!==u&&this.pool.checkIn(u)}}handleError(e,r){if(!(e instanceof St.MongoError)||e.connectionGeneration&&e.connectionGeneration<this.pool.generation)return;let s=e instanceof St.MongoNetworkError&&!(e instanceof St.MongoNetworkTimeoutError),i=(0,St.isNetworkErrorBeforeHandshake)(e),o=e.hasErrorLabel(St.MongoErrorLabel.HandshakeError);if(s||i||o)this.loadBalanced?r&&this.pool.clear({serviceId:r.serviceId}):(e.addErrorLabel(St.MongoErrorLabel.ResetPool),XA(this,e));else if((0,St.isSDAMUnrecoverableError)(e)&&_ee(this,e)){let u=(0,Y0.maxWireVersion)(this)<=7||(0,St.isNodeShuttingDownError)(e);this.loadBalanced&&r&&u&&this.pool.clear({serviceId:r.serviceId}),this.loadBalanced||(u&&e.addErrorLabel(St.MongoErrorLabel.ResetPool),XA(this,e),process.nextTick(()=>this.requestCheck()))}}decorateCommandError(e,r,n,s){if(typeof s!="object"||s==null||!("name"in s))throw new St.MongoRuntimeError("An unexpected error type: "+typeof s);if(s.name==="AbortError"&&"cause"in s&&s.cause instanceof St.MongoError&&(s=s.cause),!(s instanceof St.MongoError)||Eee(this.pool,e))return s;let i=n?.session;return s instanceof St.MongoNetworkError?(i&&!i.hasEnded&&i.serverSession&&(i.serverSession.isDirty=!0),ZA(i,r)&&!s.hasErrorLabel(St.MongoErrorLabel.TransientTransactionError)&&s.addErrorLabel(St.MongoErrorLabel.TransientTransactionError),(GD(this.topology)||(0,e4.isTransactionCommand)(r))&&(0,Y0.supportsRetryableWrites)(this)&&!ZA(i,r)&&s.addErrorLabel(St.MongoErrorLabel.RetryableWriteError)):(GD(this.topology)||(0,e4.isTransactionCommand)(r))&&(0,St.needsRetryableWriteLabel)(s,(0,Y0.maxWireVersion)(this),this.description.type)&&!ZA(i,r)&&s.addErrorLabel(St.MongoErrorLabel.RetryableWriteError),i&&i.isPinned&&s.hasErrorLabel(St.MongoErrorLabel.TransientTransactionError)&&i.unpin({force:!0}),this.handleError(s,e),s}decrementOperationCount(){return this.s.operationCount-=1}incrementOperationCount(){return this.s.operationCount+=1}};Q0.Server=ui;ui.SERVER_HEARTBEAT_STARTED=Pi.SERVER_HEARTBEAT_STARTED;ui.SERVER_HEARTBEAT_SUCCEEDED=Pi.SERVER_HEARTBEAT_SUCCEEDED;ui.SERVER_HEARTBEAT_FAILED=Pi.SERVER_HEARTBEAT_FAILED;ui.CONNECT=Pi.CONNECT;ui.DESCRIPTION_RECEIVED=Pi.DESCRIPTION_RECEIVED;ui.CLOSED=Pi.CLOSED;ui.ENDED=Pi.ENDED;function XA(t,e){t.loadBalanced||(e instanceof St.MongoNetworkError&&!(e instanceof St.MongoNetworkTimeoutError)&&t.monitor?.reset(),t.emit(ui.DESCRIPTION_RECEIVED,new t4.ServerDescription(t.description.hostAddress,void 0,{error:e})))}function gee(t,e){return e?e.inTransaction()||e.transaction.isCommitted&&"commitTransaction"in t||"aggregate"in t||"find"in t||"getMore"in t||"listCollections"in t||"listIndexes"in t||"bulkWrite"in t:!1}function Eee(t,e){return e.serviceId?e.generation!==t.serviceGenerations.get(e.serviceId.toHexString()):e.generation!==t.generation}function _ee(t,e){let r=e.topologyVersion,n=t.description.topologyVersion;return(0,t4.compareTopologyVersion)(n,r)<0}function ZA(t,e){return t&&t.inTransaction()&&!(0,e4.isTransactionCommand)(e)}function GD(t){return t.s.options.retryWrites!==!1}});var n4=g(Dn=>{"use strict";d();Object.defineProperty(Dn,"__esModule",{value:!0});Dn.RTTSampler=Dn.MonitorInterval=Dn.RTTPinger=Dn.Monitor=Dn.ServerMonitoringMode=void 0;var lu=require("timers"),KD=Ue(),J0=bA(),Aee=E6(),s4=jt(),Gc=Z(),See=Wu(),YD=Hn(),Ur=ae(),Tr=Vn(),th=L0(),rh=r4(),Ni=Symbol("server"),Fi=Symbol("monitorId"),Qc=Symbol("cancellationToken"),Kc="idle",ha="monitoring",Yc=(0,Ur.makeStateMachine)({[Tr.STATE_CLOSING]:[Tr.STATE_CLOSING,Kc,Tr.STATE_CLOSED],[Tr.STATE_CLOSED]:[Tr.STATE_CLOSED,ha],[Kc]:[Kc,ha,Tr.STATE_CLOSING],[ha]:[ha,Kc,Tr.STATE_CLOSING]}),Oee=new Set([Tr.STATE_CLOSING,Tr.STATE_CLOSED,ha]);function nh(t){return t.s.state===Tr.STATE_CLOSED||t.s.state===Tr.STATE_CLOSING}Dn.ServerMonitoringMode=Object.freeze({auto:"auto",poll:"poll",stream:"stream"});var i4=class extends YD.TypedEventEmitter{constructor(e,r){super(),this.component=See.MongoLoggableComponent.TOPOLOGY,this[Ni]=e,this.connection=null,this[Qc]=new YD.CancellationToken,this[Qc].setMaxListeners(1/0),this[Fi]=void 0,this.s={state:Tr.STATE_CLOSED},this.address=e.description.address,this.options=Object.freeze({connectTimeoutMS:r.connectTimeoutMS??1e4,heartbeatFrequencyMS:r.heartbeatFrequencyMS??1e4,minHeartbeatFrequencyMS:r.minHeartbeatFrequencyMS??500,serverMonitoringMode:r.serverMonitoringMode}),this.isRunningInFaasEnv=(0,Aee.getFAASEnv)()!=null,this.mongoLogger=this[Ni].topology.client?.mongoLogger,this.rttSampler=new Z0(10);let n=this[Qc],s={id:"<monitor>",generation:e.pool.generation,cancellationToken:n,hostAddress:e.description.hostAddress,...r,raw:!1,useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!0};delete s.credentials,s.autoEncrypter&&delete s.autoEncrypter,this.connectOptions=Object.freeze(s)}connect(){if(this.s.state!==Tr.STATE_CLOSED)return;let e=this.options.heartbeatFrequencyMS,r=this.options.minHeartbeatFrequencyMS;this[Fi]=new ih(JD(this),{heartbeatFrequencyMS:e,minHeartbeatFrequencyMS:r,immediate:!0})}requestCheck(){Oee.has(this.s.state)||this[Fi]?.wake()}reset(){let e=this[Ni].description.topologyVersion;if(nh(this)||e==null)return;Yc(this,Tr.STATE_CLOSING),QD(this),Yc(this,Kc);let r=this.options.heartbeatFrequencyMS,n=this.options.minHeartbeatFrequencyMS;this[Fi]=new ih(JD(this),{heartbeatFrequencyMS:r,minHeartbeatFrequencyMS:n})}close(){nh(this)||(Yc(this,Tr.STATE_CLOSING),QD(this),this.emit("close"),Yc(this,Tr.STATE_CLOSED))}get roundTripTime(){return this.rttSampler.average()}get minRoundTripTime(){return this.rttSampler.min()}get latestRtt(){return this.rttSampler.last}addRttSample(e){this.rttSampler.addSample(e)}clearRttSamples(){this.rttSampler.clear()}};Dn.Monitor=i4;function QD(t){t[Fi]?.stop(),t[Fi]=void 0,t.rttPinger?.close(),t.rttPinger=void 0,t[Qc].emit("cancel"),t.connection?.destroy(),t.connection=null,t.clearRttSamples()}function o4(t,e){if(e==null)return!1;let r=t.options.serverMonitoringMode;return r===Dn.ServerMonitoringMode.poll?!1:r===Dn.ServerMonitoringMode.stream?!0:!t.isRunningInFaasEnv}function wee(t,e){let r,n,s=t[Ni].description.topologyVersion,i=o4(t,s);t.emitAndLogHeartbeat(rh.Server.SERVER_HEARTBEAT_STARTED,t[Ni].topology.s.id,void 0,new th.ServerHeartbeatStartedEvent(t.address,i));function o(c){t.connection?.destroy(),t.connection=null,t.emitAndLogHeartbeat(rh.Server.SERVER_HEARTBEAT_FAILED,t[Ni].topology.s.id,void 0,new th.ServerHeartbeatFailedEvent(t.address,(0,Ur.calculateDurationInMs)(r),c,n));let l=c instanceof Gc.MongoError?c:new Gc.MongoError(Gc.MongoError.buildErrorMessage(c),{cause:c});l.addErrorLabel(Gc.MongoErrorLabel.ResetPool),l instanceof Gc.MongoNetworkTimeoutError&&l.addErrorLabel(Gc.MongoErrorLabel.InterruptInUseConnections),t.emit("resetServer",l),e(c)}function u(c){"isWritablePrimary"in c||(c.isWritablePrimary=c[s4.LEGACY_HELLO_COMMAND]);let l=i&&t.rttPinger?t.rttPinger.latestRtt??(0,Ur.calculateDurationInMs)(r):(0,Ur.calculateDurationInMs)(r);t.addRttSample(l),t.emitAndLogHeartbeat(rh.Server.SERVER_HEARTBEAT_SUCCEEDED,t[Ni].topology.s.id,c.connectionId,new th.ServerHeartbeatSucceededEvent(t.address,l,c,i)),i?(t.emitAndLogHeartbeat(rh.Server.SERVER_HEARTBEAT_STARTED,t[Ni].topology.s.id,void 0,new th.ServerHeartbeatStartedEvent(t.address,!0)),r=(0,Ur.now)()):(t.rttPinger?.close(),t.rttPinger=void 0,e(void 0,c))}let{connection:a}=t;if(a&&!a.closed){let{serverApi:c,helloOk:l}=a,h=t.options.connectTimeoutMS,f=t.options.heartbeatFrequencyMS,p={[c?.version||l?"hello":s4.LEGACY_HELLO_COMMAND]:1,...i&&s?{maxAwaitTimeMS:f,topologyVersion:Cee(s)}:{}},m=i?{socketTimeoutMS:h?h+f:0,exhaustAllowed:!0}:{socketTimeoutMS:h};if(i&&t.rttPinger==null&&(t.rttPinger=new X0(t)),r=(0,Ur.now)(),i)return n=!0,a.exhaustCommand((0,Ur.ns)("admin.$cmd"),p,m,(y,A)=>y?o(y):u(A));n=!1,a.command((0,Ur.ns)("admin.$cmd"),p,m).then(u,o);return}(async()=>{let c=await(0,J0.makeSocket)(t.connectOptions),l=(0,J0.makeConnection)(t.connectOptions,c);r=(0,Ur.now)();try{return await(0,J0.performInitialHandshake)(l,t.connectOptions),l}catch(h){throw l.destroy(),h}})().then(c=>{if(nh(t)){c.destroy();return}let l=(0,Ur.calculateDurationInMs)(r);t.addRttSample(l),t.connection=c,t.emitAndLogHeartbeat(rh.Server.SERVER_HEARTBEAT_SUCCEEDED,t[Ni].topology.s.id,c.hello?.connectionId,new th.ServerHeartbeatSucceededEvent(t.address,l,c.hello,o4(t,c.hello?.topologyVersion))),e(void 0,c.hello)},c=>{t.connection=null,n=!1,o(c)})}function JD(t){return e=>{if(t.s.state===ha){process.nextTick(e);return}Yc(t,ha);function r(){nh(t)||Yc(t,Kc),e()}wee(t,(n,s)=>{if(n&&t[Ni].description.type===Tr.ServerType.Unknown)return r();o4(t,s?.topologyVersion)&&(0,lu.setTimeout)(()=>{nh(t)||t[Fi]?.wake()},0),r()})}}function Cee(t){return{processId:t.processId,counter:KD.Long.isLong(t.counter)?t.counter:KD.Long.fromNumber(t.counter)}}var X0=class{constructor(e){this.connection=void 0,this[Qc]=e[Qc],this.closed=!1,this.monitor=e,this.latestRtt=e.latestRtt??void 0;let r=e.options.heartbeatFrequencyMS;this[Fi]=(0,lu.setTimeout)(()=>this.measureRoundTripTime(),r)}get roundTripTime(){return this.monitor.roundTripTime}get minRoundTripTime(){return this.monitor.minRoundTripTime}close(){this.closed=!0,(0,lu.clearTimeout)(this[Fi]),this.connection?.destroy(),this.connection=void 0}measureAndReschedule(e,r){if(this.closed){r?.destroy();return}this.connection==null&&(this.connection=r),this.latestRtt=(0,Ur.calculateDurationInMs)(e),this[Fi]=(0,lu.setTimeout)(()=>this.measureRoundTripTime(),this.monitor.options.heartbeatFrequencyMS)}measureRoundTripTime(){let e=(0,Ur.now)();if(this.closed)return;let r=this.connection;if(r==null){(0,J0.connect)(this.monitor.connectOptions).then(s=>{this.measureAndReschedule(e,s)},()=>{this.connection=void 0});return}let n=r.serverApi?.version||r.helloOk?"hello":s4.LEGACY_HELLO_COMMAND;r.command((0,Ur.ns)("admin.$cmd"),{[n]:1},void 0).then(()=>this.measureAndReschedule(e),()=>{this.connection?.destroy(),this.connection=void 0})}};Dn.RTTPinger=X0;var ih=class{constructor(e,r={}){this.isExpeditedCallToFnScheduled=!1,this.stopped=!1,this.isExecutionInProgress=!1,this.hasExecutedOnce=!1,this._executeAndReschedule=()=>{this.stopped||(this.timerId&&(0,lu.clearTimeout)(this.timerId),this.isExpeditedCallToFnScheduled=!1,this.isExecutionInProgress=!0,this.fn(()=>{this.lastExecutionEnded=(0,Ur.now)(),this.isExecutionInProgress=!1,this._reschedule(this.heartbeatFrequencyMS)}))},this.fn=e,this.lastExecutionEnded=-1/0,this.heartbeatFrequencyMS=r.heartbeatFrequencyMS??1e3,this.minHeartbeatFrequencyMS=r.minHeartbeatFrequencyMS??500,r.immediate?this._executeAndReschedule():this._reschedule(void 0)}wake(){let r=(0,Ur.now)()-this.lastExecutionEnded;if(r<0)return this._executeAndReschedule();if(!this.isExecutionInProgress&&!this.isExpeditedCallToFnScheduled){if(r<this.minHeartbeatFrequencyMS){this.isExpeditedCallToFnScheduled=!0,this._reschedule(this.minHeartbeatFrequencyMS-r);return}this._executeAndReschedule()}}stop(){this.stopped=!0,this.timerId&&((0,lu.clearTimeout)(this.timerId),this.timerId=void 0),this.lastExecutionEnded=-1/0,this.isExpeditedCallToFnScheduled=!1}toString(){return JSON.stringify(this)}toJSON(){let e=(0,Ur.now)(),r=e-this.lastExecutionEnded;return{timerId:this.timerId!=null?"set":"cleared",lastCallTime:this.lastExecutionEnded,isExpeditedCheckScheduled:this.isExpeditedCallToFnScheduled,stopped:this.stopped,heartbeatFrequencyMS:this.heartbeatFrequencyMS,minHeartbeatFrequencyMS:this.minHeartbeatFrequencyMS,currentTime:e,timeSinceLastCall:r}}_reschedule(e){this.stopped||(this.timerId&&(0,lu.clearTimeout)(this.timerId),this.timerId=(0,lu.setTimeout)(this._executeAndReschedule,e||this.heartbeatFrequencyMS))}};Dn.MonitorInterval=ih;var Z0=class{constructor(e=10){this.rttSamples=new Float64Array(e),this.length=0,this.writeIndex=0}addSample(e){this.rttSamples[this.writeIndex++]=e,this.length<this.rttSamples.length&&this.length++,this.writeIndex%=this.rttSamples.length}min(){if(this.length<2)return 0;let e=this.rttSamples[0];for(let r=1;r<this.length;r++)this.rttSamples[r]<e&&(e=this.rttSamples[r]);return e}average(){if(this.length===0)return 0;let e=0;for(let r=0;r<this.length;r++)e+=this.rttSamples[r];return e/this.length}get last(){return this.length===0?null:this.rttSamples[this.writeIndex===0?this.length-1:this.writeIndex-1]}clear(){this.length=0,this.writeIndex=0}};Dn.RTTSampler=Z0});var f4=g(Vr=>{"use strict";d();Object.defineProperty(Vr,"__esModule",{value:!0});Vr.FEATURE_FLAGS=Vr.DEFAULT_OPTIONS=Vr.OPTIONS=void 0;Vr.resolveSRVRecord=Pee;Vr.parseOptions=Fee;var XD=require("dns"),bee=m6(),Tee=require("url"),Jc=Wp(),Ri=Di(),ZD=E6(),eM=q1(),tM=pD(),le=Z(),em=Jo(),c4=Wu(),u4=ls(),hu=lr(),Dee=n4(),Dr=ae(),ho=vr(),a4=["authSource","replicaSet","loadBalanced"],Mee="loadBalanced option only supported with a single host in the URI",Bee="loadBalanced option not supported with a replicaSet option",Iee="loadBalanced option not supported when directConnection is provided";async function Pee(t){if(typeof t.srvHost!="string")throw new le.MongoAPIError('Option "srvHost" must not be empty');let e=t.srvHost,r=XD.promises.resolveTxt(e);r.then(void 0,Dr.squashError);let n=await XD.promises.resolveSrv(`_${t.srvServiceName}._tcp.${e}`);if(n.length===0)throw new le.MongoAPIError("No addresses found at host");for(let{name:h}of n)(0,Dr.checkParentDomainMatch)(h,e);let s=n.map(h=>Dr.HostAddress.fromString(`${h.name}:${h.port??27017}`));l4(s,t,!0);let i;try{i=await r}catch(h){if(h.code!=="ENODATA"&&h.code!=="ENOTFOUND")throw h;return s}if(i.length>1)throw new le.MongoParseError("Multiple text records not allowed");let o=new Tee.URLSearchParams(i[0].join(""));if([...o.keys()].some(h=>!a4.includes(h)))throw new le.MongoParseError(`Text record may only set any of: ${a4.join(", ")}`);if(a4.some(h=>o.get(h)===""))throw new le.MongoParseError("Cannot have empty URI params in DNS TXT Record");let a=o.get("authSource")??void 0,c=o.get("replicaSet")??void 0,l=o.get("loadBalanced")??void 0;if(!t.userSpecifiedAuthSource&&a&&t.credentials&&!Ri.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(t.credentials.mechanism)&&(t.credentials=Jc.MongoCredentials.merge(t.credentials,{source:a})),!t.userSpecifiedReplicaSet&&c&&(t.replicaSet=c),l==="true"&&(t.loadBalanced=!0),t.replicaSet&&t.srvMaxHosts>0)throw new le.MongoParseError("Cannot combine replicaSet option with srvMaxHosts");return l4(s,t,!0),s}function Nee(t){if(!t)return;let e=(r,n)=>{if(t.has(r)&&t.has(n))throw new le.MongoAPIError(`The '${r}' option cannot be used with the '${n}' option`)};e("tlsInsecure","tlsAllowInvalidCertificates"),e("tlsInsecure","tlsAllowInvalidHostnames"),e("tlsInsecure","tlsDisableCertificateRevocationCheck"),e("tlsInsecure","tlsDisableOCSPEndpointCheck"),e("tlsAllowInvalidCertificates","tlsDisableCertificateRevocationCheck"),e("tlsAllowInvalidCertificates","tlsDisableOCSPEndpointCheck"),e("tlsDisableCertificateRevocationCheck","tlsDisableOCSPEndpointCheck")}function fo(t,e){if(typeof e=="boolean")return e;switch(e){case"true":return!0;case"false":return!1;default:throw new le.MongoParseError(`${t} must be either "true" or "false"`)}}function h4(t,e){let r=(0,Dr.parseInteger)(e);if(r!=null)return r;throw new le.MongoParseError(`Expected ${t} to be stringified int value, got: ${e}`)}function oh(t,e){let r=h4(t,e);if(r<0)throw new le.MongoParseError(`${t} can only be a positive int value, got: ${e}`);return r}function*rM(t){if(t==="")return;let e=t.split(",");for(let r of e){let[n,s]=r.split(/:(.*)/);if(s==null)throw new le.MongoParseError("Cannot have undefined values in key value pairs");yield[n,s]}}var Xc=class extends Map{constructor(e=[]){super(e.map(([r,n])=>[r.toLowerCase(),n]))}has(e){return super.has(e.toLowerCase())}get(e){return super.get(e.toLowerCase())}set(e,r){return super.set(e.toLowerCase(),r)}delete(e){return super.delete(e.toLowerCase())}};function Fee(t,e=void 0,r={}){if(e!=null&&!(e instanceof em.MongoClient)&&(r=e,e=void 0),r.useBigInt64&&typeof r.promoteLongs=="boolean"&&!r.promoteLongs)throw new le.MongoAPIError("Must request either bigint or Long for int64 deserialization");if(r.useBigInt64&&typeof r.promoteValues=="boolean"&&!r.promoteValues)throw new le.MongoAPIError("Must request either bigint or Long for int64 deserialization");let n=new bee.default(t),{hosts:s,isSRV:i}=n,o=Object.create(null);for(let S of Object.getOwnPropertySymbols(r))Vr.FEATURE_FLAGS.has(S)&&(o[S]=r[S]);o.hosts=i?[]:s.map(Dr.HostAddress.fromString);let u=new Xc;if(n.pathname!=="/"&&n.pathname!==""){let S=decodeURIComponent(n.pathname[0]==="/"?n.pathname.slice(1):n.pathname);S&&u.set("dbName",[S])}if(n.username!==""){let S={username:decodeURIComponent(n.username)};typeof n.password=="string"&&(S.password=decodeURIComponent(n.password)),u.set("auth",[S])}for(let S of n.searchParams.keys()){let O=n.searchParams.getAll(S),D=/readPreferenceTags/i.test(S);if(!D&&O.length>1)throw new le.MongoInvalidArgumentError(`URI option "${S}" cannot appear more than once in the connection string`);if(!D&&O.includes(""))throw new le.MongoAPIError(`URI option "${S}" cannot be specified with no value`);u.has(S)||u.set(S,O)}let a=new Xc(Object.entries(r).filter(([,S])=>S!=null));if(u.has("serverApi"))throw new le.MongoParseError("URI cannot contain `serverApi`, it can only be passed to the client");let c=u.get("authMechanismProperties");if(c){for(let S of c)if(/(^|,)ALLOWED_HOSTS:/.test(S))throw new le.MongoParseError("Auth mechanism property ALLOWED_HOSTS is not allowed in the connection string.")}if(a.has("loadBalanced"))throw new le.MongoParseError("loadBalanced is only a valid option in the URI");let l=new Xc,h=new Set([...u.keys(),...a.keys()]);for(let S of h){let O=[],D=a.get(S);D!=null&&O.push(D);let b=u.get(S)??[];O.push(...b),l.set(S,O)}if(l.has("tls")||l.has("ssl")){let S=(l.get("tls")||[]).concat(l.get("ssl")||[]).map(fo.bind(null,"tls/ssl"));if(new Set(S).size!==1)throw new le.MongoParseError("All values of tls/ssl must be the same.")}Nee(l);let f=(0,Dr.setDifference)(h,Array.from(Object.keys(Vr.OPTIONS)).map(S=>S.toLowerCase()));if(f.size!==0){let S=f.size>1?"options":"option",O=f.size>1?"are":"is";throw new le.MongoParseError(`${S} ${Array.from(f).join(", ")} ${O} not supported`)}for(let[S,O]of Object.entries(Vr.OPTIONS)){let D=l.get(S);if(!D||D.length===0)Vr.DEFAULT_OPTIONS.has(S)&&nM(o,S,O,[Vr.DEFAULT_OPTIONS.get(S)]);else{let{deprecated:b}=O;if(b){let N=typeof b=="string"?`: ${b}`:"";(0,Dr.emitWarning)(`${S} is a deprecated option${N}`)}nM(o,S,O,D)}}if(o.credentials){let S=o.credentials.mechanism===Ri.AuthMechanism.MONGODB_GSSAPI,O=o.credentials.mechanism===Ri.AuthMechanism.MONGODB_X509,D=o.credentials.mechanism===Ri.AuthMechanism.MONGODB_AWS,b=o.credentials.mechanism===Ri.AuthMechanism.MONGODB_OIDC;if((S||O)&&l.has("authSource")&&o.credentials.source!=="$external")throw new le.MongoParseError(`authMechanism ${o.credentials.mechanism} requires an authSource of '$external'`);if(!(S||O||D||b)&&o.dbName&&!l.has("authSource")&&(o.credentials=Jc.MongoCredentials.merge(o.credentials,{source:o.dbName})),D&&o.credentials.username&&!o.credentials.password)throw new le.MongoMissingCredentialsError(`When using ${o.credentials.mechanism} password must be set when a username is specified`);o.credentials.validate(),o.credentials.password===""&&o.credentials.username===""&&o.credentials.mechanism===Ri.AuthMechanism.MONGODB_DEFAULT&&Object.keys(o.credentials.mechanismProperties).length===0&&delete o.credentials}if(o.dbName||(o.dbName="test"),l4(s,o,i),e&&o.autoEncryption&&(tM.Encrypter.checkForMongoCrypt(),o.encrypter=new tM.Encrypter(e,t,r),o.autoEncrypter=o.encrypter.autoEncrypter),o.userSpecifiedAuthSource=a.has("authSource")||u.has("authSource"),o.userSpecifiedReplicaSet=a.has("replicaSet")||u.has("replicaSet"),i){if(o.srvHost=s[0],o.directConnection)throw new le.MongoAPIError("SRV URI does not support directConnection");if(o.srvMaxHosts>0&&typeof o.replicaSet=="string")throw new le.MongoParseError("Cannot use srvMaxHosts option with replicaSet");let S=!a.has("tls")&&!u.has("tls"),O=!a.has("ssl")&&!u.has("ssl");S&&O&&(o.tls=!0)}else if(u.has("srvMaxHosts")||a.has("srvMaxHosts")||u.has("srvServiceName")||a.has("srvServiceName"))throw new le.MongoParseError("Cannot use srvMaxHosts or srvServiceName with a non-srv connection string");if(o.directConnection&&o.hosts.length!==1)throw new le.MongoParseError("directConnection option requires exactly one host");if(!o.proxyHost&&(o.proxyPort||o.proxyUsername||o.proxyPassword))throw new le.MongoParseError("Must specify proxyHost if other proxy options are passed");if(o.proxyUsername&&!o.proxyPassword||!o.proxyUsername&&o.proxyPassword)throw new le.MongoParseError("Can only specify both of proxy username/password or neither");if(["proxyHost","proxyPort","proxyUsername","proxyPassword"].map(S=>u.get(S)??[]).some(S=>S.length>1))throw new le.MongoParseError("Proxy options cannot be specified multiple times in the connection string");let m=Symbol.for("@@mdb.enableMongoLogger");o[m]=o[m]??!1;let y={},A={};return o[m]&&(y={MONGODB_LOG_COMMAND:process.env.MONGODB_LOG_COMMAND,MONGODB_LOG_TOPOLOGY:process.env.MONGODB_LOG_TOPOLOGY,MONGODB_LOG_SERVER_SELECTION:process.env.MONGODB_LOG_SERVER_SELECTION,MONGODB_LOG_CONNECTION:process.env.MONGODB_LOG_CONNECTION,MONGODB_LOG_CLIENT:process.env.MONGODB_LOG_CLIENT,MONGODB_LOG_ALL:process.env.MONGODB_LOG_ALL,MONGODB_LOG_MAX_DOCUMENT_LENGTH:process.env.MONGODB_LOG_MAX_DOCUMENT_LENGTH,MONGODB_LOG_PATH:process.env.MONGODB_LOG_PATH,...o[Symbol.for("@@mdb.internalLoggerConfig")]},A={mongodbLogPath:o.mongodbLogPath,mongodbLogComponentSeverities:o.mongodbLogComponentSeverities,mongodbLogMaxDocumentLength:o.mongodbLogMaxDocumentLength}),o.mongoLoggerOptions=c4.MongoLogger.resolveOptions(y,A),o.metadata=(0,ZD.makeClientMetadata)(o),o.extendedMetadata=(0,ZD.addContainerMetadata)(o.metadata).then(void 0,Dr.squashError),o}function l4(t,e,r){if(e.loadBalanced){if(t.length>1)throw new le.MongoParseError(Mee);if(e.replicaSet)throw new le.MongoParseError(Bee);if(e.directConnection)throw new le.MongoParseError(Iee);if(r&&e.srvMaxHosts>0)throw new le.MongoParseError("Cannot limit srv hosts with loadBalanced enabled")}}function nM(t,e,r,n){let{target:s,type:i,transform:o}=r,u=s??e;switch(i){case"boolean":t[u]=fo(u,n[0]);break;case"int":t[u]=h4(u,n[0]);break;case"uint":t[u]=oh(u,n[0]);break;case"string":if(n[0]==null)break;t[u]=String(n[0]);break;case"record":if(!(0,Dr.isRecord)(n[0]))throw new le.MongoParseError(`${u} must be an object`);t[u]=n[0];break;case"any":t[u]=n[0];break;default:{if(!o)throw new le.MongoParseError("Descriptors missing a type must define a transform");let a=o({name:u,options:t,values:n});t[u]=a;break}}}Vr.OPTIONS={appName:{type:"string"},auth:{target:"credentials",transform({name:t,options:e,values:[r]}){if(!(0,Dr.isRecord)(r,["username","password"]))throw new le.MongoParseError(`${t} must be an object with 'username' and 'password' properties`);return Jc.MongoCredentials.merge(e.credentials,{username:r.username,password:r.password})}},authMechanism:{target:"credentials",transform({options:t,values:[e]}){let r=Object.values(Ri.AuthMechanism),[n]=r.filter(o=>o.match(RegExp(String.raw`\b${e}\b`,"i")));if(!n)throw new le.MongoParseError(`authMechanism one of ${r}, got ${e}`);let s=t.credentials?.source;(n===Ri.AuthMechanism.MONGODB_PLAIN||Ri.AUTH_MECHS_AUTH_SRC_EXTERNAL.has(n))&&(s="$external");let i=t.credentials?.password;return n===Ri.AuthMechanism.MONGODB_X509&&i===""&&(i=void 0),Jc.MongoCredentials.merge(t.credentials,{mechanism:n,source:s,password:i})}},authMechanismProperties:{target:"credentials",transform({options:t,values:e}){let r=Object.create(null);for(let n of e)if(typeof n=="string")for(let[s,i]of rM(n))try{r[s]=fo(s,i)}catch{r[s]=i}else{if(!(0,Dr.isRecord)(n))throw new le.MongoParseError("AuthMechanismProperties must be an object");r={...n}}return Jc.MongoCredentials.merge(t.credentials,{mechanismProperties:r})}},authSource:{target:"credentials",transform({options:t,values:[e]}){let r=String(e);return Jc.MongoCredentials.merge(t.credentials,{source:r})}},autoEncryption:{type:"record"},autoSelectFamily:{type:"boolean",default:!0},autoSelectFamilyAttemptTimeout:{type:"uint"},bsonRegExp:{type:"boolean"},serverApi:{target:"serverApi",transform({values:[t]}){let e=typeof t=="string"?{version:t}:t,r=e&&e.version;if(!r)throw new le.MongoParseError(`Invalid \`serverApi\` property; must specify a version from the following enum: ["${Object.values(em.ServerApiVersion).join('", "')}"]`);if(!Object.values(em.ServerApiVersion).some(n=>n===r))throw new le.MongoParseError(`Invalid server API version=${r}; must be in the following enum: ["${Object.values(em.ServerApiVersion).join('", "')}"]`);return e}},checkKeys:{type:"boolean"},compressors:{default:"none",target:"compressors",transform({values:t}){let e=new Set;for(let r of t){let n=typeof r=="string"?r.split(","):r;if(!Array.isArray(n))throw new le.MongoInvalidArgumentError("compressors must be an array or a comma-delimited list of strings");for(let s of n)if(Object.keys(eM.Compressor).includes(String(s)))e.add(String(s));else throw new le.MongoInvalidArgumentError(`${s} is not a valid compression mechanism. Must be one of: ${Object.keys(eM.Compressor)}.`)}return[...e]}},connectTimeoutMS:{default:3e4,type:"uint"},dbName:{type:"string"},directConnection:{default:!1,type:"boolean"},driverInfo:{default:{},type:"record"},enableUtf8Validation:{type:"boolean",default:!0},family:{transform({name:t,values:[e]}){let r=h4(t,e);if(r===4||r===6)return r;throw new le.MongoParseError(`Option 'family' must be 4 or 6 got ${r}.`)}},fieldsAsRaw:{type:"record"},forceServerObjectId:{default:!1,type:"boolean"},fsync:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=ho.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,fsync:fo(t,r)}});if(!n)throw new le.MongoParseError(`Unable to make a writeConcern from fsync=${r}`);return n}},heartbeatFrequencyMS:{default:1e4,type:"uint"},ignoreUndefined:{type:"boolean"},j:{deprecated:"Please use journal instead",target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=ho.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:fo(t,r)}});if(!n)throw new le.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},journal:{target:"writeConcern",transform({name:t,options:e,values:[r]}){let n=ho.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,journal:fo(t,r)}});if(!n)throw new le.MongoParseError(`Unable to make a writeConcern from journal=${r}`);return n}},loadBalanced:{default:!1,type:"boolean"},localThresholdMS:{default:15,type:"uint"},maxConnecting:{default:2,transform({name:t,values:[e]}){let r=oh(t,e);if(r===0)throw new le.MongoInvalidArgumentError("maxConnecting must be > 0 if specified");return r}},maxIdleTimeMS:{default:0,type:"uint"},maxPoolSize:{default:100,type:"uint"},maxStalenessSeconds:{target:"readPreference",transform({name:t,options:e,values:[r]}){let n=oh(t,r);return e.readPreference?hu.ReadPreference.fromOptions({readPreference:{...e.readPreference,maxStalenessSeconds:n}}):new hu.ReadPreference("secondary",void 0,{maxStalenessSeconds:n})}},minInternalBufferSize:{type:"uint"},minPoolSize:{default:0,type:"uint"},minHeartbeatFrequencyMS:{default:500,type:"uint"},monitorCommands:{default:!1,type:"boolean"},name:{target:"driverInfo",transform({values:[t],options:e}){return{...e.driverInfo,name:String(t)}}},noDelay:{default:!0,type:"boolean"},pkFactory:{default:Dr.DEFAULT_PK_FACTORY,transform({values:[t]}){if((0,Dr.isRecord)(t,["createPk"])&&typeof t.createPk=="function")return t;throw new le.MongoParseError(`Option pkFactory must be an object with a createPk function, got ${t}`)}},promoteBuffers:{type:"boolean"},promoteLongs:{type:"boolean"},promoteValues:{type:"boolean"},useBigInt64:{type:"boolean"},proxyHost:{type:"string"},proxyPassword:{type:"string"},proxyPort:{type:"uint"},proxyUsername:{type:"string"},raw:{default:!1,type:"boolean"},readConcern:{transform({values:[t],options:e}){if(t instanceof u4.ReadConcern||(0,Dr.isRecord)(t,["level"]))return u4.ReadConcern.fromOptions({...e.readConcern,...t});throw new le.MongoParseError(`ReadConcern must be an object, got ${JSON.stringify(t)}`)}},readConcernLevel:{target:"readConcern",transform({values:[t],options:e}){return u4.ReadConcern.fromOptions({...e.readConcern,level:t})}},readPreference:{default:hu.ReadPreference.primary,transform({values:[t],options:e}){if(t instanceof hu.ReadPreference)return hu.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if((0,Dr.isRecord)(t,["mode"])){let r=hu.ReadPreference.fromOptions({readPreference:{...e.readPreference,...t},...t});if(r)return r;throw new le.MongoParseError(`Cannot make read preference from ${JSON.stringify(t)}`)}if(typeof t=="string"){let r={hedge:e.readPreference?.hedge,maxStalenessSeconds:e.readPreference?.maxStalenessSeconds};return new hu.ReadPreference(t,e.readPreference?.tags,r)}throw new le.MongoParseError(`Unknown ReadPreference value: ${t}`)}},readPreferenceTags:{target:"readPreference",transform({values:t,options:e}){let r=Array.isArray(t[0])?t[0]:t,n=[];for(let s of r){let i=Object.create(null);if(typeof s=="string")for(let[o,u]of rM(s))i[o]=u;if((0,Dr.isRecord)(s))for(let[o,u]of Object.entries(s))i[o]=u;n.push(i)}return hu.ReadPreference.fromOptions({readPreference:e.readPreference,readPreferenceTags:n})}},replicaSet:{type:"string"},retryReads:{default:!0,type:"boolean"},retryWrites:{default:!0,type:"boolean"},serializeFunctions:{type:"boolean"},serverMonitoringMode:{default:"auto",transform({values:[t]}){if(!Object.values(Dee.ServerMonitoringMode).includes(t))throw new le.MongoParseError("serverMonitoringMode must be one of `auto`, `poll`, or `stream`");return t}},serverSelectionTimeoutMS:{default:3e4,type:"uint"},servername:{type:"string"},socketTimeoutMS:{default:0,type:"uint"},srvMaxHosts:{type:"uint",default:0},srvServiceName:{type:"string",default:"mongodb"},ssl:{target:"tls",type:"boolean"},timeoutMS:{type:"uint"},tls:{type:"boolean"},tlsAllowInvalidCertificates:{target:"rejectUnauthorized",transform({name:t,values:[e]}){return!fo(t,e)}},tlsAllowInvalidHostnames:{target:"checkServerIdentity",transform({name:t,values:[e]}){return fo(t,e)?()=>{}:void 0}},tlsCAFile:{type:"string"},tlsCRLFile:{type:"string"},tlsCertificateKeyFile:{type:"string"},tlsCertificateKeyFilePassword:{target:"passphrase",type:"any"},tlsInsecure:{transform({name:t,options:e,values:[r]}){let n=fo(t,r);return n?(e.checkServerIdentity=()=>{},e.rejectUnauthorized=!1):(e.checkServerIdentity=e.tlsAllowInvalidHostnames?()=>{}:void 0,e.rejectUnauthorized=!e.tlsAllowInvalidCertificates),n}},w:{target:"writeConcern",transform({values:[t],options:e}){return ho.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}})}},waitQueueTimeoutMS:{default:0,type:"uint"},writeConcern:{target:"writeConcern",transform({values:[t],options:e}){if((0,Dr.isRecord)(t)||t instanceof ho.WriteConcern)return ho.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,...t}});if(t==="majority"||typeof t=="number")return ho.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,w:t}});throw new le.MongoParseError(`Invalid WriteConcern cannot parse: ${JSON.stringify(t)}`)}},wtimeout:{deprecated:"Please use wtimeoutMS instead",target:"writeConcern",transform({values:[t],options:e}){let r=ho.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeout:oh("wtimeout",t)}});if(r)return r;throw new le.MongoParseError("Cannot make WriteConcern from wtimeout")}},wtimeoutMS:{target:"writeConcern",transform({values:[t],options:e}){let r=ho.WriteConcern.fromOptions({writeConcern:{...e.writeConcern,wtimeoutMS:oh("wtimeoutMS",t)}});if(r)return r;throw new le.MongoParseError("Cannot make WriteConcern from wtimeout")}},zlibCompressionLevel:{default:0,type:"int"},connectionType:{type:"any"},srvPoller:{type:"any"},allowPartialTrustChain:{type:"any"},minDHSize:{type:"any"},pskCallback:{type:"any"},secureContext:{type:"any"},enableTrace:{type:"any"},requestCert:{type:"any"},rejectUnauthorized:{type:"any"},checkServerIdentity:{type:"any"},ALPNProtocols:{type:"any"},SNICallback:{type:"any"},session:{type:"any"},requestOCSP:{type:"any"},localAddress:{type:"any"},localPort:{type:"any"},hints:{type:"any"},lookup:{type:"any"},ca:{type:"any"},cert:{type:"any"},ciphers:{type:"any"},crl:{type:"any"},ecdhCurve:{type:"any"},key:{type:"any"},passphrase:{type:"any"},pfx:{type:"any"},secureProtocol:{type:"any"},index:{type:"any"},useNewUrlParser:{type:"boolean",deprecated:"useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},useUnifiedTopology:{type:"boolean",deprecated:"useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version"},mongodbLogPath:{transform({values:[t]}){if(!(typeof t=="string"&&["stderr","stdout"].includes(t)||t&&typeof t=="object"&&"write"in t&&typeof t.write=="function"))throw new le.MongoAPIError("Option 'mongodbLogPath' must be of type 'stderr' | 'stdout' | MongoDBLogWritable");return t}},mongodbLogComponentSeverities:{transform({values:[t]}){if(typeof t!="object"||!t)throw new le.MongoAPIError("Option 'mongodbLogComponentSeverities' must be a non-null object");for(let[e,r]of Object.entries(t)){if(typeof r!="string"||typeof e!="string")throw new le.MongoAPIError("User input for option 'mongodbLogComponentSeverities' object cannot include a non-string key or value");if(!Object.values(c4.MongoLoggableComponent).some(n=>n===e)&&e!=="default")throw new le.MongoAPIError(`User input for option 'mongodbLogComponentSeverities' contains invalid key: ${e}`);if(!Object.values(c4.SeverityLevel).some(n=>n===r))throw new le.MongoAPIError(`Option 'mongodbLogComponentSeverities' does not support ${r} as a value for ${e}`)}return t}},mongodbLogMaxDocumentLength:{type:"uint"}};Vr.DEFAULT_OPTIONS=new Xc(Object.entries(Vr.OPTIONS).filter(([,t])=>t.default!=null).map(([t,e])=>[t,e.default]));Vr.FEATURE_FLAGS=new Set([Symbol.for("@@mdb.skipPingOnConnect"),Symbol.for("@@mdb.enableMongoLogger"),Symbol.for("@@mdb.internalLoggerConfig")])});var sM=g(tm=>{"use strict";d();Object.defineProperty(tm,"__esModule",{value:!0});tm.MongoDBAWS=void 0;var d4=Ue(),p4=Xs(),el=Z(),Zc=ae(),Ree=eu(),m4=x6(),vee=Wp(),$ee=Di(),xee=110,y4={useBigInt64:!1,promoteLongs:!0,promoteValues:!0,promoteBuffers:!1,bsonRegExp:!1},g4=class extends Ree.AuthProvider{constructor(){super(),this.credentialFetcher=m4.AWSTemporaryCredentialProvider.isAWSSDKInstalled?new m4.AWSSDKCredentialProvider:new m4.LegacyAWSTemporaryCredentialProvider}async auth(e){let{connection:r}=e;if(!e.credentials)throw new el.MongoMissingCredentialsError("AuthContext must provide credentials.");if("kModuleError"in p4.aws4)throw p4.aws4.kModuleError;let{sign:n}=p4.aws4;if((0,Zc.maxWireVersion)(r)<9)throw new el.MongoCompatibilityError("MONGODB-AWS authentication requires MongoDB version 4.4 or later");e.credentials.username||(e.credentials=await kee(e.credentials,this.credentialFetcher));let{credentials:s}=e,i=s.username,o=s.password,u=s.mechanismProperties.AWS_SESSION_TOKEN,a=i&&o&&u?{accessKeyId:i,secretAccessKey:o,sessionToken:u}:i&&o?{accessKeyId:i,secretAccessKey:o}:void 0,c=s.source,l=await(0,Zc.randomBytes)(32),h={saslStart:1,mechanism:"MONGODB-AWS",payload:d4.serialize({r:l,p:xee},y4)},f=await r.command((0,Zc.ns)(`${c}.$cmd`),h,void 0),p=d4.deserialize(f.payload.buffer,y4),m=p.h,y=p.s.buffer;if(y.length!==64)throw new el.MongoRuntimeError(`Invalid server nonce length ${y.length}, expected 64`);if(!Zc.ByteUtils.equals(y.subarray(0,l.byteLength),l))throw new el.MongoRuntimeError("Server nonce does not begin with client nonce");if(m.length<1||m.length>255||m.indexOf("..")!==-1)throw new el.MongoRuntimeError(`Server returned an invalid host: "${m}"`);let A="Action=GetCallerIdentity&Version=2011-06-15",S=n({method:"POST",host:m,region:qee(p.h),service:"sts",headers:{"Content-Type":"application/x-www-form-urlencoded","Content-Length":A.length,"X-MongoDB-Server-Nonce":Zc.ByteUtils.toBase64(y),"X-MongoDB-GS2-CB-Flag":"n"},path:"/",body:A},a),O={a:S.headers.Authorization,d:S.headers["X-Amz-Date"]};u&&(O.t=u);let D={saslContinue:1,conversationId:1,payload:d4.serialize(O,y4)};await r.command((0,Zc.ns)(`${c}.$cmd`),D,void 0)}};tm.MongoDBAWS=g4;async function kee(t,e){function r(s){if(!s.AccessKeyId||!s.SecretAccessKey)throw new el.MongoMissingCredentialsError("Could not obtain temporary MONGODB-AWS credentials");return new vee.MongoCredentials({username:s.AccessKeyId,password:s.SecretAccessKey,source:t.source,mechanism:$ee.AuthMechanism.MONGODB_AWS,mechanismProperties:{AWS_SESSION_TOKEN:s.Token}})}let n=await e.getCredentials();return r(n)}function qee(t){let e=t.split(".");return e.length===1||e[1]==="amazonaws"?"us-east-1":e[1]}});var E4=g(rm=>{"use strict";d();Object.defineProperty(rm,"__esModule",{value:!0});rm.finishCommandDocument=Lee;rm.startCommandDocument=jee;var tl=Ue(),iM=Di();function Lee(t,e){return e!=null?{saslContinue:1,conversationId:e,payload:new tl.Binary(tl.BSON.serialize({jwt:t}))}:{saslStart:1,mechanism:iM.AuthMechanism.MONGODB_OIDC,payload:new tl.Binary(tl.BSON.serialize({jwt:t}))}}function jee(t){let e={};return t.username&&(e.n=t.username),{saslStart:1,autoAuthorize:1,mechanism:iM.AuthMechanism.MONGODB_OIDC,payload:new tl.Binary(tl.BSON.serialize(e))}}});var uh=g(nm=>{"use strict";d();Object.defineProperty(nm,"__esModule",{value:!0});nm.MachineWorkflow=void 0;var Uee=require("timers/promises"),Vee=ae(),oM=E4(),_4=100,A4=class{constructor(e){this.cache=e,this.callback=this.withLock(this.getToken.bind(this)),this.lastExecutionTime=Date.now()-_4}async execute(e,r){let n=await this.getTokenFromCacheOrEnv(e,r),s=(0,oM.finishCommandDocument)(n);await e.command((0,Vee.ns)(r.source),s,void 0)}async reauthenticate(e,r){this.cache.hasAccessToken&&(e.accessToken===this.cache.getAccessToken()?(this.cache.removeAccessToken(),delete e.accessToken):e.accessToken=this.cache.getAccessToken()),await this.execute(e,r)}async speculativeAuth(e,r){if(!this.cache.hasAccessToken)return{};let n=await this.getTokenFromCacheOrEnv(e,r),s=(0,oM.finishCommandDocument)(n);return s.db=r.source,{speculativeAuthenticate:s}}async getTokenFromCacheOrEnv(e,r){if(this.cache.hasAccessToken)return this.cache.getAccessToken();{let n=await this.callback(r);return this.cache.put({accessToken:n.access_token,expiresInSeconds:n.expires_in}),e.accessToken=n.access_token,n.access_token}}withLock(e){let r=Promise.resolve();return async n=>(await r,r=r.catch(()=>null).then(async()=>{let s=Date.now()-this.lastExecutionTime;return s<=_4&&await(0,Uee.setTimeout)(_4-s),this.lastExecutionTime=Date.now(),await e(n)}),await r)}};nm.MachineWorkflow=A4});var aM=g(sm=>{"use strict";d();Object.defineProperty(sm,"__esModule",{value:!0});sm.AzureMachineWorkflow=void 0;var uM=q6(),S4=Z(),zee=ae(),Wee=uh(),Hee=Object.freeze({Metadata:"true",Accept:"application/json"}),Gee="Azure endpoint did not return a value with only access_token and expires_in properties",Kee="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is azure.",O4=class extends Wee.MachineWorkflow{constructor(e){super(e)}async getToken(e){let r=e?.mechanismProperties.TOKEN_RESOURCE,n=e?.username;if(!r)throw new S4.MongoAzureError(Kee);let s=await Yee(r,n);if(!Qee(s))throw new S4.MongoAzureError(Gee);return s}};sm.AzureMachineWorkflow=O4;async function Yee(t,e){let r=new URL(uM.AZURE_BASE_URL);(0,uM.addAzureParams)(r,t,e);let n=await(0,zee.get)(r,{headers:Hee});if(n.status!==200)throw new S4.MongoAzureError(`Status code ${n.status} returned from the Azure endpoint. Response body: ${n.body}`);let s=JSON.parse(n.body);return{access_token:s.access_token,expires_in:Number(s.expires_in)}}function Qee(t){return t==null||typeof t!="object"?!1:"access_token"in t&&typeof t.access_token=="string"&&"expires_in"in t&&typeof t.expires_in=="number"}});var lM=g(im=>{"use strict";d();Object.defineProperty(im,"__esModule",{value:!0});im.GCPMachineWorkflow=void 0;var cM=Z(),Jee=ae(),Xee=uh(),Zee="http://metadata/computeMetadata/v1/instance/service-accounts/default/identity",ete=Object.freeze({"Metadata-Flavor":"Google"}),tte="TOKEN_RESOURCE must be set in the auth mechanism properties when ENVIRONMENT is gcp.",w4=class extends Xee.MachineWorkflow{constructor(e){super(e)}async getToken(e){let r=e?.mechanismProperties.TOKEN_RESOURCE;if(!r)throw new cM.MongoGCPError(tte);return await rte(r)}};im.GCPMachineWorkflow=w4;async function rte(t){let e=new URL(Zee);e.searchParams.append("audience",t);let r=await(0,Jee.get)(e,{headers:ete});if(r.status!==200)throw new cM.MongoGCPError(`Status code ${r.status} returned from the GCP endpoint. Response body: ${r.body}`);return{access_token:r.body}}});var dM=g(om=>{"use strict";d();Object.defineProperty(om,"__esModule",{value:!0});om.K8SMachineWorkflow=void 0;var nte=require("fs/promises"),ste=uh(),ite="/var/run/secrets/kubernetes.io/serviceaccount/token",hM="AZURE_FEDERATED_TOKEN_FILE",fM="AWS_WEB_IDENTITY_TOKEN_FILE",C4=class extends ste.MachineWorkflow{constructor(e){super(e)}async getToken(){let e;return process.env[hM]?e=process.env[hM]:process.env[fM]?e=process.env[fM]:e=ite,{access_token:await(0,nte.readFile)(e,"utf8")}}};om.K8SMachineWorkflow=C4});var T4=g(um=>{"use strict";d();Object.defineProperty(um,"__esModule",{value:!0});um.TokenCache=void 0;var ote=Z(),ah=class extends ote.MongoDriverError{},b4=class{get hasAccessToken(){return!!this.accessToken}get hasRefreshToken(){return!!this.refreshToken}get hasIdpInfo(){return!!this.idpInfo}getAccessToken(){if(!this.accessToken)throw new ah("Attempted to get an access token when none exists.");return this.accessToken}getRefreshToken(){if(!this.refreshToken)throw new ah("Attempted to get a refresh token when none exists.");return this.refreshToken}getIdpInfo(){if(!this.idpInfo)throw new ah("Attempted to get IDP information when none exists.");return this.idpInfo}put(e,r){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expiresInSeconds=e.expiresInSeconds,r&&(this.idpInfo=r)}removeAccessToken(){this.accessToken=void 0}removeRefreshToken(){this.refreshToken=void 0}};um.TokenCache=b4});var pM=g(am=>{"use strict";d();Object.defineProperty(am,"__esModule",{value:!0});am.TokenMachineWorkflow=void 0;var ute=require("fs"),ate=Z(),cte=uh(),lte="OIDC_TOKEN_FILE must be set in the environment.",D4=class extends cte.MachineWorkflow{constructor(e){super(e)}async getToken(){let e=process.env.OIDC_TOKEN_FILE;if(!e)throw new ate.MongoAWSError(lte);return{access_token:await ute.promises.readFile(e,"utf8")}}};am.TokenMachineWorkflow=D4});var lm=g(bs=>{"use strict";d();Object.defineProperty(bs,"__esModule",{value:!0});bs.MongoDBOIDC=bs.OIDC_WORKFLOWS=bs.OIDC_VERSION=void 0;var yM=Z(),hte=eu(),fte=aM(),dte=lM(),pte=dM(),cm=T4(),mte=pM(),yte="AuthContext must provide credentials.";bs.OIDC_VERSION=1;bs.OIDC_WORKFLOWS=new Map;bs.OIDC_WORKFLOWS.set("test",()=>new mte.TokenMachineWorkflow(new cm.TokenCache));bs.OIDC_WORKFLOWS.set("azure",()=>new fte.AzureMachineWorkflow(new cm.TokenCache));bs.OIDC_WORKFLOWS.set("gcp",()=>new dte.GCPMachineWorkflow(new cm.TokenCache));bs.OIDC_WORKFLOWS.set("k8s",()=>new pte.K8SMachineWorkflow(new cm.TokenCache));var M4=class extends hte.AuthProvider{constructor(e){if(super(),!e)throw new yM.MongoInvalidArgumentError("No workflow provided to the OIDC auth provider.");this.workflow=e}async auth(e){let{connection:r,reauthenticating:n,response:s}=e;if(s?.speculativeAuthenticate?.done)return;let i=mM(e);n?await this.workflow.reauthenticate(r,i):await this.workflow.execute(r,i,s)}async prepare(e,r){let{connection:n}=r,s=mM(r),i=await this.workflow.speculativeAuth(n,s);return{...e,...i}}};bs.MongoDBOIDC=M4;function mM(t){let{credentials:e}=t;if(!e)throw new yM.MongoMissingCredentialsError(yte);return e}});var N4=g(fu=>{"use strict";d();Object.defineProperty(fu,"__esModule",{value:!0});fu.CallbackWorkflow=fu.AUTOMATED_TIMEOUT_MS=fu.HUMAN_TIMEOUT_MS=void 0;var gte=require("timers/promises"),Ete=Z(),gM=ae(),B4=E4();fu.HUMAN_TIMEOUT_MS=3e5;fu.AUTOMATED_TIMEOUT_MS=6e4;var _te=["accessToken","expiresInSeconds","refreshToken"],Ate="User provided OIDC callbacks must return a valid object with an accessToken.",I4=100,P4=class{constructor(e,r){this.cache=e,this.callback=this.withLock(r),this.lastExecutionTime=Date.now()-I4}async speculativeAuth(e,r){if(this.cache.hasAccessToken){let n=this.cache.getAccessToken();e.accessToken=n;let s=(0,B4.finishCommandDocument)(n);return s.db=r.source,{speculativeAuthenticate:s}}return{}}async reauthenticate(e,r){this.cache.hasAccessToken&&(e.accessToken===this.cache.getAccessToken()?(this.cache.removeAccessToken(),delete e.accessToken):e.accessToken=this.cache.getAccessToken()),await this.execute(e,r)}async startAuthentication(e,r,n){let s;return n?.speculativeAuthenticate?s=n.speculativeAuthenticate:s=await e.command((0,gM.ns)(r.source),(0,B4.startCommandDocument)(r),void 0),s}async finishAuthentication(e,r,n,s){await e.command((0,gM.ns)(r.source),(0,B4.finishCommandDocument)(n,s),void 0)}async executeAndValidateCallback(e){let r=await this.callback(e);if(Ste(r))throw new Ete.MongoMissingCredentialsError(Ate);return r}withLock(e){let r=Promise.resolve();return async n=>(await r,r=r.catch(()=>null).then(async()=>{let s=Date.now()-this.lastExecutionTime;return s<=I4&&await(0,gte.setTimeout)(I4-s,{signal:n.timeoutContext}),this.lastExecutionTime=Date.now(),await e(n)}),await r)}};fu.CallbackWorkflow=P4;function Ste(t){return t==null||typeof t!="object"||!("accessToken"in t)?!0:!Object.getOwnPropertyNames(t).every(e=>_te.includes(e))}});var _M=g(hm=>{"use strict";d();Object.defineProperty(hm,"__esModule",{value:!0});hm.AutomatedCallbackWorkflow=void 0;var F4=Z(),EM=$r(),Ote=lm(),R4=N4(),v4=class extends R4.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let s=this.cache.getAccessToken();try{return await this.finishAuthentication(e,r,s)}catch(i){if(i instanceof F4.MongoError&&i.code===F4.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),await this.execute(e,r);throw i}}let n=await this.fetchAccessToken(r);this.cache.put(n),e.accessToken=n.accessToken,await this.finishAuthentication(e,r,n.accessToken)}async fetchAccessToken(e){let r=new AbortController,n={timeoutContext:r.signal,version:Ote.OIDC_VERSION};e.username&&(n.username=e.username);let s=EM.Timeout.expires(R4.AUTOMATED_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(n),s])}catch(i){throw EM.TimeoutError.is(i)?(r.abort(),new F4.MongoOIDCError(`OIDC callback timed out after ${R4.AUTOMATED_TIMEOUT_MS}ms.`)):i}finally{s.clear()}}};hm.AutomatedCallbackWorkflow=v4});var SM=g(fm=>{"use strict";d();Object.defineProperty(fm,"__esModule",{value:!0});fm.HumanCallbackWorkflow=void 0;var wte=Ue(),ch=Z(),AM=$r(),Cte=lm(),$4=N4(),x4=class extends $4.CallbackWorkflow{constructor(e,r){super(e,r)}async execute(e,r){if(this.cache.hasAccessToken){let u=this.cache.getAccessToken();e.accessToken=u;try{return await this.finishAuthentication(e,r,u)}catch(a){if(a instanceof ch.MongoError&&a.code===ch.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeAccessToken(),delete e.accessToken,await this.execute(e,r);throw a}}if(this.cache.hasRefreshToken){let u=this.cache.getRefreshToken(),a=await this.fetchAccessToken(this.cache.getIdpInfo(),r,u);this.cache.put(a),e.accessToken=a.accessToken;try{return await this.finishAuthentication(e,r,a.accessToken)}catch(c){if(c instanceof ch.MongoError&&c.code===ch.MONGODB_ERROR_CODES.AuthenticationFailed)return this.cache.removeRefreshToken(),delete e.accessToken,await this.execute(e,r);throw c}}let n=await this.startAuthentication(e,r),s=n.conversationId,i=wte.BSON.deserialize(n.payload.buffer),o=await this.fetchAccessToken(i,r);return this.cache.put(o,i),e.accessToken=o.accessToken,await this.finishAuthentication(e,r,o.accessToken,s)}async fetchAccessToken(e,r,n){let s=new AbortController,i={timeoutContext:s.signal,version:Cte.OIDC_VERSION,idpInfo:e};r.username&&(i.username=r.username),n&&(i.refreshToken=n);let o=AM.Timeout.expires($4.HUMAN_TIMEOUT_MS);try{return await Promise.race([this.executeAndValidateCallback(i),o])}catch(u){throw AM.TimeoutError.is(u)?(s.abort(),new ch.MongoOIDCError(`OIDC callback timed out after ${$4.HUMAN_TIMEOUT_MS}ms.`)):u}finally{o.clear()}}};fm.HumanCallbackWorkflow=x4});var OM=g(dm=>{"use strict";d();Object.defineProperty(dm,"__esModule",{value:!0});dm.Plain=void 0;var bte=Ue(),Tte=Z(),Dte=ae(),Mte=eu(),k4=class extends Mte.AuthProvider{async auth(e){let{connection:r,credentials:n}=e;if(!n)throw new Tte.MongoMissingCredentialsError("AuthContext must provide credentials.");let{username:s,password:i}=n,u={saslStart:1,mechanism:"PLAIN",payload:new bte.Binary(Buffer.from(`\0${s}\0${i}`)),autoAuthorize:1};await r.command((0,Dte.ns)("$external.$cmd"),u,void 0)}};dm.Plain=k4});var TM=g((WEe,bM)=>{"use strict";d();var wM=t=>t.codePointAt(0),Bte=t=>t[0],Ite=t=>t[t.length-1];function CM(t){let e=[],r=t.length;for(let n=0;n<r;n+=1){let s=t.charCodeAt(n);if(s>=55296&&s<=56319&&r>n+1){let i=t.charCodeAt(n+1);if(i>=56320&&i<=57343){e.push((s-55296)*1024+i-56320+65536),n+=1;continue}}e.push(s)}return e}function lh({unassigned_code_points:t,commonly_mapped_to_nothing:e,non_ASCII_space_characters:r,prohibited_characters:n,bidirectional_r_al:s,bidirectional_l:i},o,u={}){let a=r,c=e;if(typeof o!="string")throw new TypeError("Expected string.");if(o.length===0)return"";let l=CM(o).map(O=>a.get(O)?32:O).filter(O=>!c.get(O)),h=String.fromCodePoint.apply(null,l).normalize("NFKC"),f=CM(h);if(f.some(O=>n.get(O)))throw new Error("Prohibited character, see https://tools.ietf.org/html/rfc4013#section-2.3");if(u.allowUnassigned!==!0&&f.some(D=>t.get(D)))throw new Error("Unassigned code point, see https://tools.ietf.org/html/rfc4013#section-2.5");let m=f.some(O=>s.get(O)),y=f.some(O=>i.get(O));if(m&&y)throw new Error("String must not contain RandALCat and LCat at the same time, see https://tools.ietf.org/html/rfc3454#section-6");let A=s.get(wM(Bte(h))),S=s.get(wM(Ite(h)));if(m&&!(A&&S))throw new Error("Bidirectional RandALCat character must be the first and the last character of the string, see https://tools.ietf.org/html/rfc3454#section-6");return h}lh.saslprep=lh;lh.default=lh;bM.exports=lh});var BM=g((GEe,MM)=>{d();MM.exports=po;function po(t,e){if(!(this instanceof po))return new po(t,e);this.length=0,this.updates=[],this.path=new Uint16Array(4),this.pages=new Array(32768),this.maxPages=this.pages.length,this.level=0,this.pageSize=t||1024,this.deduplicate=e?e.deduplicate:null,this.zeros=this.deduplicate?pm(this.deduplicate.length):null}po.prototype.updated=function(t){for(;this.deduplicate&&t.buffer[t.deduplicate]===this.deduplicate[t.deduplicate];)if(t.deduplicate++,t.deduplicate===this.deduplicate.length){t.deduplicate=0,t.buffer.equals&&t.buffer.equals(this.deduplicate)&&(t.buffer=this.deduplicate);break}t.updated||!this.updates||(t.updated=!0,this.updates.push(t))};po.prototype.lastUpdate=function(){if(!this.updates||!this.updates.length)return null;var t=this.updates.pop();return t.updated=!1,t};po.prototype._array=function(t,e){if(t>=this.maxPages){if(e)return;Pte(this,t)}Rte(t,this.path);for(var r=this.pages,n=this.level;n>0;n--){var s=this.path[n],i=r[s];if(!i){if(e)return;i=r[s]=new Array(32768)}r=i}return r};po.prototype.get=function(t,e){var r=this._array(t,e),n=this.path[0],s=r&&r[n];return!s&&!e&&(s=r[n]=new DM(t,pm(this.pageSize)),t>=this.length&&(this.length=t+1)),s&&s.buffer===this.deduplicate&&this.deduplicate&&!e&&(s.buffer=Fte(s.buffer),s.deduplicate=0),s};po.prototype.set=function(t,e){var r=this._array(t,!1),n=this.path[0];if(t>=this.length&&(this.length=t+1),!e||this.zeros&&e.equals&&e.equals(this.zeros)){r[n]=void 0;return}this.deduplicate&&e.equals&&e.equals(this.deduplicate)&&(e=this.deduplicate);var s=r[n],i=Nte(e,this.pageSize);s?s.buffer=i:r[n]=new DM(t,i)};po.prototype.toBuffer=function(){for(var t=new Array(this.length),e=pm(this.pageSize),r=0;r<t.length;)for(var n=this._array(r,!0),s=0;s<32768&&r<t.length;s++)t[r++]=n&&n[s]?n[s].buffer:e;return Buffer.concat(t)};function Pte(t,e){for(;t.maxPages<e;){var r=t.pages;t.pages=new Array(32768),t.pages[0]=r,t.level++,t.maxPages*=32768}}function Nte(t,e){if(t.length===e)return t;if(t.length>e)return t.slice(0,e);var r=pm(e);return t.copy(r),r}function pm(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function Fte(t){var e=Buffer.allocUnsafe?Buffer.allocUnsafe(t.length):new Buffer(t.length);return t.copy(e),e}function DM(t,e){this.offset=t*e.length,this.buffer=e,this.updated=!1,this.deduplicate=0}function Rte(t,e){t=(t-(e[0]=t&32767))/32768,t=(t-(e[1]=t&32767))/32768,e[3]=(t-(e[2]=t&32767))/32768&32767}});var PM=g((YEe,IM)=>{d();var vte=BM();IM.exports=du;function du(t){if(!(this instanceof du))return new du(t);if(t||(t={}),Buffer.isBuffer(t)&&(t={buffer:t}),this.pageOffset=t.pageOffset||0,this.pageSize=t.pageSize||1024,this.pages=t.pages||vte(this.pageSize),this.byteLength=this.pages.length*this.pageSize,this.length=8*this.byteLength,!xte(this.pageSize))throw new Error("The page size should be a power of two");if(this._trackUpdates=!!t.trackUpdates,this._pageMask=this.pageSize-1,t.buffer){for(var e=0;e<t.buffer.length;e+=this.pageSize)this.pages.set(e/this.pageSize,t.buffer.slice(e,e+this.pageSize));this.byteLength=t.buffer.length,this.length=8*this.byteLength}}du.prototype.get=function(t){var e=t&7,r=(t-e)/8;return!!(this.getByte(r)&128>>e)};du.prototype.getByte=function(t){var e=t&this._pageMask,r=(t-e)/this.pageSize,n=this.pages.get(r,!0);return n?n.buffer[e+this.pageOffset]:0};du.prototype.set=function(t,e){var r=t&7,n=(t-r)/8,s=this.getByte(n);return this.setByte(n,e?s|128>>r:s&(255^128>>r))};du.prototype.toBuffer=function(){for(var t=$te(this.pages.length*this.pageSize),e=0;e<this.pages.length;e++){var r=this.pages.get(e,!0),n=e*this.pageSize;r&&r.buffer.copy(t,n,this.pageOffset,this.pageOffset+this.pageSize)}return t};du.prototype.setByte=function(t,e){var r=t&this._pageMask,n=(t-r)/this.pageSize,s=this.pages.get(n,!1);return r+=this.pageOffset,s.buffer[r]===e?!1:(s.buffer[r]=e,t>=this.byteLength&&(this.byteLength=t+1,this.length=this.byteLength*8),this._trackUpdates&&this.pages.updated(s),!0)};function $te(t){if(Buffer.alloc)return Buffer.alloc(t);var e=new Buffer(t);return e.fill(0),e}function xte(t){return!(t&t-1)}});var NM=g(rl=>{"use strict";d();var kte=rl&&rl.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(rl,"__esModule",{value:!0});rl.createMemoryCodePoints=void 0;var qte=kte(PM());function Lte(t){let e=0;function r(){let c=t.readUInt32BE(e);e+=4;let l=t.slice(e,e+c);return e+=c,(0,qte.default)({buffer:l})}let n=r(),s=r(),i=r(),o=r(),u=r(),a=r();return{unassigned_code_points:n,commonly_mapped_to_nothing:s,non_ASCII_space_characters:i,prohibited_characters:o,bidirectional_r_al:u,bidirectional_l:a}}rl.createMemoryCodePoints=Lte});var FM=g(q4=>{"use strict";d();Object.defineProperty(q4,"__esModule",{value:!0});var jte=require("zlib");q4.default=(0,jte.gunzipSync)(Buffer.from("H4sIAAAAAAACA+3dTYgcaRkA4LemO9Mhxm0FITnE9Cwr4jHgwgZ22B6YywqCJ0HQg5CL4sGTuOjCtGSF4CkHEW856MlTQHD3EJnWkU0Owh5VxE3LHlYQdNxd2U6mU59UV/d09fw4M2EySSXPAzNdP1/9fX/99bzVNZEN4jisRDulVFnQmLxm1aXF9Id/2/xMxNJ4XZlg576yuYlGt9gupV6xoFf8jhu9YvulVrFlp5XSx+lfvYhORGPXvqIRWSxERKtIm8bKFd10WNfKDS5Fo9jJWrq2+M2IlW+8uHgl/+BsROfPF4v5L7148Ur68Sha6dqZpYiVVy8tvLCWXo80Sf/lS89dGX2wHGvpzoXVn75/YWH5wmqe8uika82ViJXTy83Ve2k5Urozm38wm4/ls6t5uT6yfsTSJ7J3T0VKt8c5ExEXI8aFkH729c3eT+7EC6ca8cVULZUiYacX0R5PNWNxlh9L1y90q5kyzrpyy+9WcvOV6URntqw7La9sNVstXyczWVaWYbaaTYqzOHpr7pyiNT3/YzKuT63Z/FqKZlFTiuXtFM2vVOtIq7jiyKJbWZaOWD0euz0yoV2Z7kY0xq2x0YhfzVpmM5px9nTEH7JZ0ot5u39p0ma75Z472/s/H+2yr2inYyuq7fMvJivH2rM72N/Z3lyL31F2b1ya1P0zn816k2KP6JU9UzseucdQH5YqVeH/lFajSN2udg+TLJ9rksNxlvV2lki19rXKI43TPLejFu4ov7k3nMbhyhfY3Xb37f8BAGCf0eMTOH5szf154KmnNgKcnLb+Fzi2AfXktbN7fJelwTAiO/W5uQ2KINXRYu+znqo/WTAdLadURHmy3qciazd3bra4T3w16/f7t7Ms9U5gfJu10955sx1r3vmhBAAAAAAAgId20J1iZbDowNvIjuH427Gr5l/eiC+8OplZON8sVjx/qr9y+Pj+YRItT+NqAM+kkZs3AAAAAID6yfx1FwCAI97/dCh1/ub6SA0AAAAAAAAAgNoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hP/BwAAAAAAAID6E/8HAAAAAAAAgPoT/wcAAAAAAACA+hutp5SiQpYAAAAAAAAAQO2MIpZiT804flnAE2fhwjOeAZXr76kOAAAAAAAA8FjNf4N/l0NE3U/vuVQskLpSd4/Yh2xu9xTu0tFeeNYsLI2f/VMdNxTzj6Je9E/+6pp6Nn3awW3A54goe4Bss6v+PGsjQGMAAAAAAOBp5XEgwH6e7J7rwEQHRb/XvAMAAAAAAAA8yzoDeQDwVGjIAgAAAAAAAACoPfF/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqD/xfwAAAAAAAACoP/F/AAAAAAAAAKg/8X8AAAAAAAAAqL/GSkSkClkCAAAAAAAAALXTSAAAAAAAAABA3Y1kAQAAAAAAAADUX8RSXZ9dsHC9+M8Fg2Ex/em1lAZpEBGttcrVjZqLEa+k0XpKw9mG4zWx4ukPUMhkAQAAAAAAABzBqbSe3//rXOS9HxGdo4TqR2XkutCdBu+LaPZw/lBbO7cbHnh2C7N7AIo4evEznllqLqWUp/LnYOtpM2bnOH66wI1+9GO4sOuISwv/TOlumu56FDv3NZhc4mR9v7zYIrafr40j/Cccvj9Xns3t3mu99E7qxUv3bqS0/ouNH/08++RGemfQ+nsx/5uNXsQPGulynPvv3ZTW37zd+1ovrqaYpP/122X6Xpx779Z3zr/3YOPKW1lkaRDf31pPaf3j/msRsVGkL+d/f+/m4sJsPm1cfSsr16e8m9Ldj/KsnyIuR3nXw83Is3EhxLd/2V773ks3m/cj/THKUummdP9qKhIOImuOU0Xjwb3y+oqt735rpTetVbF9n8R4x9crRfO77TKqVOZpDclv5bfK18lMnk+q0K18UpxF/RrGXE0Zxtqx3tWSj+vxbL4XaasfKb0dRbtLW73JsfPGg177H+OmGKlfvS1msllt7JEJm9XOJqXR+Fkfo1H66uy5H1v3Xx5+uJmGLw9jro2u7Loj4PnuR6+f+e3d261+eazNhzrL7X83MohoHpS4PddV8ki1it61//pw1g7z6p1U/26Nm2llST57B5rUvuG0XqSU/rPd7jYrqWcbd+beJQ77BgPMDwn37/8BAGCf0eMTOH4cPlufv9VGgJOzqf8Fjm1APXkd7B7f5dF57GPMaWy/MTvjvNvtXj6h8W2+GXvnzXaseeeHEgAAAAAAAB7aQXeKlcGiadBoEOeLb2dtpGOL2MyOtf391a3P/zD96c3JzIP3t4oV797vrh8+vn+YRL5bBuj/AQAAAABqJvfHXQAAHkX82zfXAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACeAgkAAAAAAAAAqLuRLAAAAAAAAACA2hv9D1iu/VAYaAYA","base64"))});var $M=g((L4,vM)=>{"use strict";d();var RM=L4&&L4.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Ute=RM(TM()),Vte=NM(),zte=RM(FM()),Wte=(0,Vte.createMemoryCodePoints)(zte.default);function hh(t,e){return(0,Ute.default)(Wte,t,e)}hh.saslprep=hh;hh.default=hh;vM.exports=hh});var VM=g(nl=>{"use strict";d();Object.defineProperty(nl,"__esModule",{value:!0});nl.ScramSHA256=nl.ScramSHA1=void 0;var Hte=$M(),fa=require("crypto"),j4=Ue(),ai=Z(),gm=ae(),Gte=eu(),xM=Di(),Em=class extends Gte.AuthProvider{constructor(e){super(),this.cryptoMethod=e||"sha1"}async prepare(e,r){let n=this.cryptoMethod,s=r.credentials;if(!s)throw new ai.MongoMissingCredentialsError("AuthContext must provide credentials.");let i=await(0,gm.randomBytes)(24);return r.nonce=i,{...e,speculativeAuthenticate:{...jM(n,s,i),db:s.source}}}async auth(e){let{reauthenticating:r,response:n}=e;return n?.speculativeAuthenticate&&!r?await UM(this.cryptoMethod,n.speculativeAuthenticate,e):await Kte(this.cryptoMethod,e)}};function qM(t){return t.replace("=","=3D").replace(",","=2C")}function LM(t,e){return Buffer.concat([Buffer.from("n=","utf8"),Buffer.from(t,"utf8"),Buffer.from(",r=","utf8"),Buffer.from(e.toString("base64"),"utf8")])}function jM(t,e,r){let n=qM(e.username);return{saslStart:1,mechanism:t==="sha1"?xM.AuthMechanism.MONGODB_SCRAM_SHA1:xM.AuthMechanism.MONGODB_SCRAM_SHA256,payload:new j4.Binary(Buffer.concat([Buffer.from("n,,","utf8"),LM(n,r)])),autoAuthorize:1,options:{skipEmptyExchange:!0}}}async function Kte(t,e){let{connection:r,credentials:n}=e;if(!n)throw new ai.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!e.nonce)throw new ai.MongoInvalidArgumentError("AuthContext must contain a valid nonce property");let s=e.nonce,i=n.source,o=jM(t,n,s),u=await r.command((0,gm.ns)(`${i}.$cmd`),o,void 0);await UM(t,u,e)}async function UM(t,e,r){let n=r.connection,s=r.credentials;if(!s)throw new ai.MongoMissingCredentialsError("AuthContext must provide credentials.");if(!r.nonce)throw new ai.MongoInvalidArgumentError("Unable to continue SCRAM without valid nonce");let i=r.nonce,o=s.source,u=qM(s.username),a=s.password,c=t==="sha256"?(0,Hte.saslprep)(a):Yte(u,a),l=Buffer.isBuffer(e.payload)?new j4.Binary(e.payload):e.payload,h=kM(l),f=parseInt(h.i,10);if(f&&f<4096)throw new ai.MongoRuntimeError(`Server returned an invalid iteration count ${f}`);let p=h.s,m=h.r;if(m.startsWith("nonce"))throw new ai.MongoRuntimeError(`Server returned an invalid nonce: ${m}`);let y=`c=biws,r=${m}`,A=ere(c,Buffer.from(p,"base64"),f,t),S=mm(t,A,"Client Key"),O=mm(t,A,"Server Key"),D=Jte(t,S),b=[LM(u,i),l.toString("utf8"),y].join(","),N=mm(t,D,b),R=`p=${Qte(S,N)}`,F=[y,R].join(","),G=mm(t,O,b),z={saslContinue:1,conversationId:e.conversationId,payload:new j4.Binary(Buffer.from(F))},j=await n.command((0,gm.ns)(`${o}.$cmd`),z,void 0),v=kM(j.payload);if(!tre(Buffer.from(v.v,"base64"),G))throw new ai.MongoRuntimeError("Server returned an invalid signature");if(j.done!==!1)return;let x={saslContinue:1,conversationId:j.conversationId,payload:Buffer.alloc(0)};await n.command((0,gm.ns)(`${o}.$cmd`),x,void 0)}function kM(t){let e=t.toString("utf8"),r={},n=e.split(",");for(let s=0;s<n.length;s++){let i=(n[s].match(/^([^=]*)=(.*)$/)??[]).slice(1);r[i[0]]=i[1]}return r}function Yte(t,e){if(typeof t!="string")throw new ai.MongoInvalidArgumentError("Username must be a string");if(typeof e!="string")throw new ai.MongoInvalidArgumentError("Password must be a string");if(e.length===0)throw new ai.MongoInvalidArgumentError("Password cannot be empty");let r;try{r=fa.createHash("md5")}catch(n){throw fa.getFips()?new Error("Auth mechanism SCRAM-SHA-1 is not supported in FIPS mode"):n}return r.update(`${t}:mongo:${e}`,"utf8"),r.digest("hex")}function Qte(t,e){Buffer.isBuffer(t)||(t=Buffer.from(t)),Buffer.isBuffer(e)||(e=Buffer.from(e));let r=Math.max(t.length,e.length),n=[];for(let s=0;s<r;s+=1)n.push(t[s]^e[s]);return Buffer.from(n).toString("base64")}function Jte(t,e){return fa.createHash(t).update(e).digest()}function mm(t,e,r){return fa.createHmac(t,e).update(r).digest()}var ym={},U4=0;function Xte(){ym={},U4=0}var Zte={sha256:32,sha1:20};function ere(t,e,r,n){let s=[t,e.toString("base64"),r].join("_");if(ym[s]!=null)return ym[s];let i=fa.pbkdf2Sync(t,e,r,Zte[n],n);return U4>=200&&Xte(),ym[s]=i,U4+=1,i}function tre(t,e){if(t.length!==e.length)return!1;if(typeof fa.timingSafeEqual=="function")return fa.timingSafeEqual(t,e);let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}var V4=class extends Em{constructor(){super("sha1")}};nl.ScramSHA1=V4;var z4=class extends Em{constructor(){super("sha256")}};nl.ScramSHA256=z4});var HM=g(_m=>{"use strict";d();Object.defineProperty(_m,"__esModule",{value:!0});_m.X509=void 0;var zM=Z(),rre=ae(),nre=eu(),W4=class extends nre.AuthProvider{async prepare(e,r){let{credentials:n}=r;if(!n)throw new zM.MongoMissingCredentialsError("AuthContext must provide credentials.");return{...e,speculativeAuthenticate:WM(n)}}async auth(e){let r=e.connection,n=e.credentials;if(!n)throw new zM.MongoMissingCredentialsError("AuthContext must provide credentials.");e.response?.speculativeAuthenticate||await r.command((0,rre.ns)("$external.$cmd"),WM(n),void 0)}};_m.X509=W4;function WM(t){let e={authenticate:1,mechanism:"MONGODB-X509"};return t.username&&(e.user=t.username),e}});var K4=g(Am=>{"use strict";d();Object.defineProperty(Am,"__esModule",{value:!0});Am.MongoClientAuthProviders=void 0;var sre=zp(),ire=sM(),YM=lm(),ore=_M(),ure=SM(),GM=T4(),are=OM(),mo=Di(),KM=VM(),cre=HM(),H4=Z(),lre=new Map([[mo.AuthMechanism.MONGODB_AWS,()=>new ire.MongoDBAWS],[mo.AuthMechanism.MONGODB_CR,()=>{throw new H4.MongoInvalidArgumentError("MONGODB-CR is no longer a supported auth mechanism in MongoDB 4.0+")}],[mo.AuthMechanism.MONGODB_GSSAPI,()=>new sre.GSSAPI],[mo.AuthMechanism.MONGODB_OIDC,t=>new YM.MongoDBOIDC(t)],[mo.AuthMechanism.MONGODB_PLAIN,()=>new are.Plain],[mo.AuthMechanism.MONGODB_SCRAM_SHA1,()=>new KM.ScramSHA1],[mo.AuthMechanism.MONGODB_SCRAM_SHA256,()=>new KM.ScramSHA256],[mo.AuthMechanism.MONGODB_X509,()=>new cre.X509]]),G4=class{constructor(){this.existingProviders=new Map}getOrCreateProvider(e,r){let n=this.existingProviders.get(e);if(n)return n;let s=lre.get(e);if(!s)throw new H4.MongoInvalidArgumentError(`authMechanism ${e} not supported`);let i;return e===mo.AuthMechanism.MONGODB_OIDC?i=s(this.getWorkflow(r)):i=s(),this.existingProviders.set(e,i),i}getWorkflow(e){if(e.OIDC_HUMAN_CALLBACK)return new ure.HumanCallbackWorkflow(new GM.TokenCache,e.OIDC_HUMAN_CALLBACK);if(e.OIDC_CALLBACK)return new ore.AutomatedCallbackWorkflow(new GM.TokenCache,e.OIDC_CALLBACK);{let r=e.ENVIRONMENT,n=YM.OIDC_WORKFLOWS.get(r)?.();if(!n)throw new H4.MongoInvalidArgumentError(`Could not load workflow for environment ${e.ENVIRONMENT}`);return n}}};Am.MongoClientAuthProviders=G4});var QM=g(Sm=>{"use strict";d();Object.defineProperty(Sm,"__esModule",{value:!0});hre(da(),Sm);function hre(t){for(let e of Object.keys(t))Object.defineProperty(Sm,e,{enumerable:!0,get:function(){return t[e]}})}});var Q4=g(wm=>{"use strict";d();Object.defineProperty(wm,"__esModule",{value:!0});wm.ClientBulkWriteOperation=void 0;var Y4=QM(),fre=Hs(),dre=ae(),pre=Pt(),sl=Ke(),Om=class extends pre.CommandOperation{get commandName(){return"bulkWrite"}constructor(e,r){super(void 0,r),this.commandBuilder=e,this.options=r,this.ns=new dre.MongoDBNamespace("admin","$cmd")}resetBatch(){return this.commandBuilder.resetBatch()}get canRetryWrite(){return this.commandBuilder.isBatchRetryable}async execute(e,r,n){let s;if(e.description.type===Y4.ServerType.LoadBalancer)if(r){let i;r.pinnedConnection?i=r.pinnedConnection:(i=await e.pool.checkOut({timeoutContext:n}),r.pin(i)),s=this.commandBuilder.buildBatch(i.hello?.maxMessageSizeBytes,i.hello?.maxWriteBatchSize,i.hello?.maxBsonObjectSize)}else throw new Y4.MongoClientBulkWriteExecutionError("Session provided to the client bulk write operation must be present.");else{if(!e.description.maxWriteBatchSize||!e.description.maxMessageSizeBytes||!e.description.maxBsonObjectSize)throw new Y4.MongoClientBulkWriteExecutionError("In order to execute a client bulk write, both maxWriteBatchSize, maxMessageSizeBytes and maxBsonObjectSize must be provided by the servers hello response.");s=this.commandBuilder.buildBatch(e.description.maxMessageSizeBytes,e.description.maxWriteBatchSize,e.description.maxBsonObjectSize)}return this.canRetryWrite||(this.options.willRetryWrite=!1),await super.executeCommand(e,r,s,n,fre.ClientBulkWriteCursorResponse)}};wm.ClientBulkWriteOperation=Om;(0,sl.defineAspects)(Om,[sl.Aspect.WRITE_OPERATION,sl.Aspect.SKIP_COLLATION,sl.Aspect.CURSOR_CREATING,sl.Aspect.RETRYABLE,sl.Aspect.COMMAND_BATCHING])});var XM=g(Cm=>{"use strict";d();Object.defineProperty(Cm,"__esModule",{value:!0});Cm.ClientBulkWriteCursor=void 0;var mre=Q4(),yre=kr(),JM=ae(),gre=qr(),J4=class t extends gre.AbstractCursor{constructor(e,r,n={}){super(e,new JM.MongoDBNamespace("admin","$cmd"),n),this.commandBuilder=r,this.clientBulkWriteOptions=n}get response(){return this.cursorResponse?this.cursorResponse:null}get operations(){return this.commandBuilder.lastOperations}clone(){let e=(0,JM.mergeOptions)({},this.clientBulkWriteOptions);return delete e.session,new t(this.client,this.commandBuilder,{...e})}async _initialize(e){let r=new mre.ClientBulkWriteOperation(this.commandBuilder,{...this.clientBulkWriteOptions,...this.cursorOptions,session:e}),n=await(0,yre.executeOperation)(this.client,r,this.timeoutContext);return this.cursorResponse=n,{server:r.server,session:e,response:n}}};Cm.ClientBulkWriteCursor=J4});var nB=g(Mt=>{"use strict";d();Object.defineProperty(Mt,"__esModule",{value:!0});Mt.buildReplaceOneOperation=Mt.buildUpdateManyOperation=Mt.buildUpdateOneOperation=Mt.buildDeleteManyOperation=Mt.buildDeleteOneOperation=Mt.buildInsertOneOperation=Mt.ClientBulkWriteCommandBuilder=void 0;Mt.buildOperation=tS;var X4=Ue(),ZM=k1(),fh=Z(),rS=ae(),eB=1e3,eS=class{constructor(e,r,n){this.models=e,this.options=r,this.pkFactory=n??rS.DEFAULT_PK_FACTORY,this.currentModelIndex=0,this.previousModelIndex=0,this.lastOperations=[],this.isBatchRetryable=!0}get errorsOnly(){return"verboseResults"in this.options?!this.options.verboseResults:!0}hasNextBatch(){return this.currentModelIndex<this.models.length}resetBatch(){return this.currentModelIndex=this.previousModelIndex,!0}buildBatch(e,r,n){this.isBatchRetryable=!0;let s=0,i=0,o=this.baseCommand(),u=new Map;for(this.previousModelIndex=this.currentModelIndex;this.currentModelIndex<this.models.length;){let a=this.models[this.currentModelIndex],c=a.namespace,l=u.get(c);if((a.name==="deleteMany"||a.name==="updateMany")&&(this.isBatchRetryable=!1),l!=null){let h=tS(a,l,this.pkFactory),f;try{f=X4.BSON.serialize(h)}catch(p){throw new fh.MongoInvalidArgumentError("Could not serialize operation to BSON",{cause:p})}if(Z4("ops",f,n),s+f.length<e&&o.ops.documents.length<r)s=eB+o.ops.push(h,f),this.currentModelIndex++;else break}else{u.set(c,i);let h={ns:c},f=tS(a,i,this.pkFactory),p,m;try{p=X4.BSON.serialize(h),m=X4.BSON.serialize(f)}catch(y){throw new fh.MongoInvalidArgumentError("Could not serialize ns info to BSON",{cause:y})}if(Z4("nsInfo",p,n),Z4("ops",m,n),s+p.length+m.length<e&&o.ops.documents.length<r)s=eB+o.nsInfo.push(h,p)+o.ops.push(f,m),i++,this.currentModelIndex++;else break}}return this.lastOperations=o.ops.documents,o}baseCommand(){let e={bulkWrite:1,errorsOnly:this.errorsOnly,ordered:this.options.ordered??!0,ops:new ZM.DocumentSequence("ops"),nsInfo:new ZM.DocumentSequence("nsInfo")};return this.options.bypassDocumentValidation!=null&&(e.bypassDocumentValidation=this.options.bypassDocumentValidation),this.options.let&&(e.let=this.options.let),this.options.comment!==void 0&&(e.comment=this.options.comment),e}};Mt.ClientBulkWriteCommandBuilder=eS;function Z4(t,e,r){if(e.length>r)throw new fh.MongoInvalidArgumentError(`Client bulk write operation ${t} of length ${e.length} exceeds the max bson object size of ${r}`)}var Ere=(t,e,r)=>{let n={insert:e,document:t.document};return n.document._id=t.document._id??r.createPk(),n};Mt.buildInsertOneOperation=Ere;var _re=(t,e)=>tB(t,e,!1);Mt.buildDeleteOneOperation=_re;var Are=(t,e)=>tB(t,e,!0);Mt.buildDeleteManyOperation=Are;function tB(t,e,r){let n={delete:e,multi:r,filter:t.filter};return t.hint&&(n.hint=t.hint),t.collation&&(n.collation=t.collation),n}var Sre=(t,e)=>rB(t,e,!1);Mt.buildUpdateOneOperation=Sre;var Ore=(t,e)=>rB(t,e,!0);Mt.buildUpdateManyOperation=Ore;function wre(t){if(!(0,rS.hasAtomicOperators)(t))throw new fh.MongoAPIError("Client bulk write update models must only contain atomic modifiers (start with $) and must not be empty.")}function rB(t,e,r){wre(t.update);let n={update:e,multi:r,filter:t.filter,updateMods:t.update};return t.hint&&(n.hint=t.hint),t.upsert&&(n.upsert=t.upsert),t.arrayFilters&&(n.arrayFilters=t.arrayFilters),t.collation&&(n.collation=t.collation),n}var Cre=(t,e)=>{if((0,rS.hasAtomicOperators)(t.replacement))throw new fh.MongoAPIError("Client bulk write replace models must not contain atomic modifiers (start with $) and must not be empty.");let r={update:e,multi:!1,filter:t.filter,updateMods:t.replacement};return t.hint&&(r.hint=t.hint),t.upsert&&(r.upsert=t.upsert),t.collation&&(r.collation=t.collation),r};Mt.buildReplaceOneOperation=Cre;function tS(t,e,r){switch(t.name){case"insertOne":return(0,Mt.buildInsertOneOperation)(t,e,r);case"deleteOne":return(0,Mt.buildDeleteOneOperation)(t,e);case"deleteMany":return(0,Mt.buildDeleteManyOperation)(t,e);case"updateOne":return(0,Mt.buildUpdateOneOperation)(t,e);case"updateMany":return(0,Mt.buildUpdateManyOperation)(t,e);case"replaceOne":return(0,Mt.buildReplaceOneOperation)(t,e)}}});var sB=g(bm=>{"use strict";d();Object.defineProperty(bm,"__esModule",{value:!0});bm.ClientBulkWriteResultsMerger=void 0;var bre=da(),Tre=Z(),Dre={acknowledged:!1,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},nS=class{static unacknowledged(){return Dre}constructor(e){this.options=e,this.currentBatchOffset=0,this.writeConcernErrors=[],this.writeErrors=new Map,this.result={acknowledged:!0,insertedCount:0,upsertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,insertResults:void 0,updateResults:void 0,deleteResults:void 0},e.verboseResults&&(this.result.insertResults=new Map,this.result.updateResults=new Map,this.result.deleteResults=new Map)}get bulkWriteResult(){return{acknowledged:this.result.acknowledged,insertedCount:this.result.insertedCount,upsertedCount:this.result.upsertedCount,matchedCount:this.result.matchedCount,modifiedCount:this.result.modifiedCount,deletedCount:this.result.deletedCount,insertResults:this.result.insertResults,updateResults:this.result.updateResults,deleteResults:this.result.deleteResults}}async merge(e){let r;try{for await(let n of e)if(n.ok===1)this.options.verboseResults&&this.processDocument(e,n);else if(this.options.ordered){let s=new Tre.MongoClientBulkWriteError({message:"Mongo client ordered bulk write encountered a write error."});throw s.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg}),s.partialResult=this.result,s}else this.writeErrors.set(n.idx+this.currentBatchOffset,{code:n.code,message:n.errmsg})}catch(n){if(n instanceof bre.MongoWriteConcernError){let s=n.result;if(r={insertedCount:s.nInserted,upsertedCount:s.nUpserted,matchedCount:s.nMatched,modifiedCount:s.nModified,deletedCount:s.nDeleted,writeConcernError:s.writeConcernError},this.options.verboseResults&&s.cursor.firstBatch)for(let i of s.cursor.firstBatch)i.ok===1&&this.processDocument(e,i)}else throw n}finally{if(e.response){let n=e.response;this.incrementCounts(n)}this.currentBatchOffset+=e.operations.length}if(r){let n=r.writeConcernError;this.incrementCounts(r),this.writeConcernErrors.push({code:n.code,message:n.errmsg})}return this.result}processDocument(e,r){let n=e.operations[r.idx];if("insert"in n&&this.result.insertResults?.set(r.idx+this.currentBatchOffset,{insertedId:n.document._id}),"update"in n){let s={matchedCount:r.n,modifiedCount:r.nModified??0,didUpsert:r.upserted!=null};r.upserted&&(s.upsertedId=r.upserted._id),this.result.updateResults?.set(r.idx+this.currentBatchOffset,s)}"delete"in n&&this.result.deleteResults?.set(r.idx+this.currentBatchOffset,{deletedCount:r.n})}incrementCounts(e){this.result.insertedCount+=e.insertedCount,this.result.upsertedCount+=e.upsertedCount,this.result.matchedCount+=e.matchedCount,this.result.modifiedCount+=e.modifiedCount,this.result.deletedCount+=e.deletedCount}};bm.ClientBulkWriteResultsMerger=nS});var uB=g(Tm=>{"use strict";d();Object.defineProperty(Tm,"__esModule",{value:!0});Tm.ClientBulkWriteExecutor=void 0;var iB=qr(),Mre=XM(),pa=Z(),Bre=$r(),Ire=ae(),Pre=vr(),Nre=kr(),Fre=Q4(),Rre=nB(),oB=sB(),sS=class{constructor(e,r,n){if(r.length===0)throw new pa.MongoClientBulkWriteExecutionError("No client bulk write models were provided.");if(this.client=e,this.operations=r,this.options={ordered:!0,bypassDocumentValidation:!1,verboseResults:!1,...n},this.options.writeConcern||(this.options.writeConcern=Pre.WriteConcern.fromOptions(this.client.s.options)),this.options.writeConcern?.w===0){if(this.options.verboseResults)throw new pa.MongoInvalidArgumentError("Cannot request unacknowledged write concern and verbose results");if(this.options.ordered)throw new pa.MongoInvalidArgumentError("Cannot request unacknowledged write concern and ordered writes")}}async execute(){let e=this.client.s.options.pkFactory,r=new Rre.ClientBulkWriteCommandBuilder(this.operations,this.options,e),n=(0,Ire.resolveTimeoutOptions)(this.client,this.options),s=Bre.TimeoutContext.create(n);if(this.options.writeConcern?.w===0){for(;r.hasNextBatch();){let i=new Fre.ClientBulkWriteOperation(r,this.options);await(0,Nre.executeOperation)(this.client,i,s)}return oB.ClientBulkWriteResultsMerger.unacknowledged()}else{let i=new oB.ClientBulkWriteResultsMerger(this.options);for(;r.hasNextBatch();){let o=new iB.CursorTimeoutContext(s,Symbol()),u={...this.options,timeoutContext:o,...n.timeoutMS!=null&&{timeoutMode:iB.CursorTimeoutMode.LIFETIME}},a=new Mre.ClientBulkWriteCursor(this.client,r,u);try{await i.merge(a)}catch(c){if(c instanceof pa.MongoServerError&&!(c instanceof pa.MongoClientBulkWriteError)){let l=new pa.MongoClientBulkWriteError({message:"Mongo client bulk write encountered an error during execution"});throw l.cause=c,l.partialResult=i.bulkWriteResult,l}else throw c}}if(i.writeConcernErrors.length>0||i.writeErrors.size>0){let o=new pa.MongoClientBulkWriteError({message:"Mongo client bulk write encountered errors during execution."});throw o.writeConcernErrors=i.writeConcernErrors,o.writeErrors=i.writeErrors,o.partialResult=i.bulkWriteResult,o}return i.bulkWriteResult}}};Tm.ClientBulkWriteExecutor=sS});var cS=g(Ts=>{"use strict";d();Object.defineProperty(Ts,"__esModule",{value:!0});Ts.WaitingForSuitableServerEvent=Ts.ServerSelectionSucceededEvent=Ts.ServerSelectionFailedEvent=Ts.ServerSelectionStartedEvent=Ts.ServerSelectionEvent=void 0;var vre=ae(),Dm=jt(),ma=class{constructor(e,r,n){this.selector=e,this.operation=n,this.topologyDescription=r}};Ts.ServerSelectionEvent=ma;var iS=class extends ma{constructor(e,r,n){super(e,r,n),this.name=Dm.SERVER_SELECTION_STARTED,this.message="Server selection started"}};Ts.ServerSelectionStartedEvent=iS;var oS=class extends ma{constructor(e,r,n,s){super(e,r,s),this.name=Dm.SERVER_SELECTION_FAILED,this.message="Server selection failed",this.failure=n}};Ts.ServerSelectionFailedEvent=oS;var uS=class extends ma{constructor(e,r,n,s){super(e,r,s),this.name=Dm.SERVER_SELECTION_SUCCEEDED,this.message="Server selection succeeded";let{host:i,port:o}=vre.HostAddress.fromString(n).toHostPort();this.serverHost=i,this.serverPort=o}};Ts.ServerSelectionSucceededEvent=uS;var aS=class extends ma{constructor(e,r,n,s){super(e,r,s),this.name=Dm.WAITING_FOR_SUITABLE_SERVER,this.message="Waiting for suitable server to become available",this.remainingTimeMS=n}};Ts.WaitingForSuitableServerEvent=aS});var hS=g(il=>{"use strict";d();Object.defineProperty(il,"__esModule",{value:!0});il.SrvPoller=il.SrvPollingEvent=void 0;var $re=require("dns"),lS=require("timers"),xre=Z(),kre=Hn(),Mm=ae(),Bm=class{constructor(e){this.srvRecords=e}hostnames(){return new Set(this.srvRecords.map(e=>Mm.HostAddress.fromSrvRecord(e).toString()))}};il.SrvPollingEvent=Bm;var Im=class t extends kre.TypedEventEmitter{constructor(e){if(super(),!e||!e.srvHost)throw new xre.MongoRuntimeError("Options for SrvPoller must exist and include srvHost");this.srvHost=e.srvHost,this.srvMaxHosts=e.srvMaxHosts??0,this.srvServiceName=e.srvServiceName??"mongodb",this.rescanSrvIntervalMS=6e4,this.heartbeatFrequencyMS=e.heartbeatFrequencyMS??1e4,this.haMode=!1,this.generation=0,this._timeout=void 0}get srvAddress(){return`_${this.srvServiceName}._tcp.${this.srvHost}`}get intervalMS(){return this.haMode?this.heartbeatFrequencyMS:this.rescanSrvIntervalMS}start(){this._timeout||this.schedule()}stop(){this._timeout&&((0,lS.clearTimeout)(this._timeout),this.generation+=1,this._timeout=void 0)}schedule(){this._timeout&&(0,lS.clearTimeout)(this._timeout),this._timeout=(0,lS.setTimeout)(()=>{this._poll().then(void 0,Mm.squashError)},this.intervalMS)}success(e){this.haMode=!1,this.schedule(),this.emit(t.SRV_RECORD_DISCOVERY,new Bm(e))}failure(){this.haMode=!0,this.schedule()}async _poll(){let e=this.generation,r;try{r=await $re.promises.resolveSrv(this.srvAddress)}catch{this.failure();return}if(e!==this.generation)return;let n=[];for(let s of r)try{(0,Mm.checkParentDomainMatch)(s.name,this.srvHost),n.push(s)}catch(i){(0,Mm.squashError)(i)}if(!n.length){this.failure();return}this.success(n)}};il.SrvPoller=Im;Im.SRV_RECORD_DISCOVERY="srvRecordDiscovery"});var yB=g(ol=>{"use strict";d();Object.defineProperty(ol,"__esModule",{value:!0});ol.ServerCapabilities=ol.Topology=void 0;var aB=f4(),Mn=jt(),vi=Z(),wt=Wu(),qre=Hn(),dh=lr(),fS=$r(),Ds=ae(),Me=Vn(),pu=L0(),cB=r4(),pS=Y1(),dS=l1(),mu=cS(),Pm=hS(),lB=eA(),Lre=0,ph=(0,Ds.makeStateMachine)({[Me.STATE_CLOSED]:[Me.STATE_CLOSED,Me.STATE_CONNECTING],[Me.STATE_CONNECTING]:[Me.STATE_CONNECTING,Me.STATE_CLOSING,Me.STATE_CONNECTED,Me.STATE_CLOSED],[Me.STATE_CONNECTED]:[Me.STATE_CONNECTED,Me.STATE_CLOSING,Me.STATE_CLOSED],[Me.STATE_CLOSING]:[Me.STATE_CLOSING,Me.STATE_CLOSED]}),mS=Symbol("cancelled"),yo=Symbol("waitQueue"),zr=class t extends qre.TypedEventEmitter{constructor(e,r,n){super(),this.client=e,n=n??{hosts:[Ds.HostAddress.fromString("localhost:27017")],...Object.fromEntries(aB.DEFAULT_OPTIONS.entries()),...Object.fromEntries(aB.FEATURE_FLAGS.entries())},typeof r=="string"?r=[Ds.HostAddress.fromString(r)]:Array.isArray(r)||(r=[r]);let s=[];for(let c of r)if(typeof c=="string")s.push(Ds.HostAddress.fromString(c));else if(c instanceof Ds.HostAddress)s.push(c);else throw new vi.MongoRuntimeError(`Topology cannot be constructed from ${JSON.stringify(c)}`);let i=jre(n),o=Lre++,u=n.srvMaxHosts==null||n.srvMaxHosts===0||n.srvMaxHosts>=s.length?s:(0,Ds.shuffle)(s,n.srvMaxHosts),a=new Map;for(let c of u)a.set(c.toString(),new pS.ServerDescription(c));this[yo]=new Ds.List,this.s={id:o,options:n,seedlist:s,state:Me.STATE_CLOSED,description:new lB.TopologyDescription(i,a,n.replicaSet,void 0,void 0,void 0,n),serverSelectionTimeoutMS:n.serverSelectionTimeoutMS,heartbeatFrequencyMS:n.heartbeatFrequencyMS,minHeartbeatFrequencyMS:n.minHeartbeatFrequencyMS,servers:new Map,credentials:n?.credentials,clusterTime:void 0,detectShardedTopology:c=>this.detectShardedTopology(c),detectSrvRecords:c=>this.detectSrvRecords(c)},this.mongoLogger=e.mongoLogger,this.component="topology",n.srvHost&&!n.loadBalanced&&(this.s.srvPoller=n.srvPoller??new Pm.SrvPoller({heartbeatFrequencyMS:this.s.heartbeatFrequencyMS,srvHost:n.srvHost,srvMaxHosts:n.srvMaxHosts,srvServiceName:n.srvServiceName}),this.on(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology)),this.connectionLock=void 0}detectShardedTopology(e){let r=e.previousDescription.type,n=e.newDescription.type,s=r!==Me.TopologyType.Sharded&&n===Me.TopologyType.Sharded,o=!!this.s.srvPoller?.listeners(Pm.SrvPoller.SRV_RECORD_DISCOVERY)?.includes(this.s.detectSrvRecords);s&&!o&&(this.s.srvPoller?.on(Pm.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords),this.s.srvPoller?.start())}detectSrvRecords(e){let r=this.s.description;this.s.description=this.s.description.updateFromSrvPollingEvent(e,this.s.options.srvMaxHosts),this.s.description!==r&&(hB(this),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new pu.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description)))}get description(){return this.s.description}get loadBalanced(){return this.s.options.loadBalanced}get serverApi(){return this.s.options.serverApi}get capabilities(){return new Nm(this.lastHello())}async connect(e){this.connectionLock??=this._connect(e);try{return await this.connectionLock,this}finally{this.connectionLock=void 0}}async _connect(e){if(e=e??{},this.s.state===Me.STATE_CONNECTED)return this;ph(this,Me.STATE_CONNECTING),this.emitAndLog(t.TOPOLOGY_OPENING,new pu.TopologyOpeningEvent(this.s.id)),this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new pu.TopologyDescriptionChangedEvent(this.s.id,new lB.TopologyDescription(Me.TopologyType.Unknown),this.s.description));let r=Array.from(this.s.description.servers.values());if(this.s.servers=new Map(r.map(u=>[u.address,pB(this,u)])),this.s.options.loadBalanced)for(let u of r){let a=new pS.ServerDescription(u.hostAddress,void 0,{loadBalanced:this.s.options.loadBalanced});this.serverUpdateHandler(a)}let n=this.client.s.options.serverSelectionTimeoutMS,s=e.readPreference??dh.ReadPreference.primary,i=fS.TimeoutContext.create({timeoutMS:void 0,serverSelectionTimeoutMS:n,waitQueueTimeoutMS:this.client.s.options.waitQueueTimeoutMS}),o={operationName:"ping",...e,timeoutContext:i};try{let u=await this.selectServer((0,dS.readPreferenceServerSelector)(s),o);return!(this.s.options[Symbol.for("@@mdb.skipPingOnConnect")]===!0)&&this.s.credentials?(await u.command((0,Ds.ns)("admin.$cmd"),{ping:1},{timeoutContext:i}),ph(this,Me.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this):(ph(this,Me.STATE_CONNECTED),this.emit(t.OPEN,this),this.emit(t.CONNECT,this),this)}catch(u){throw this.close(),u}}close(){if(!(this.s.state===Me.STATE_CLOSED||this.s.state===Me.STATE_CLOSING)){for(let e of this.s.servers.values())dB(e,this);this.s.servers.clear(),ph(this,Me.STATE_CLOSING),mB(this[yo],new vi.MongoTopologyClosedError),this.s.srvPoller&&(this.s.srvPoller.stop(),this.s.srvPoller.removeListener(Pm.SrvPoller.SRV_RECORD_DISCOVERY,this.s.detectSrvRecords)),this.removeListener(t.TOPOLOGY_DESCRIPTION_CHANGED,this.s.detectShardedTopology),ph(this,Me.STATE_CLOSED),this.emitAndLog(t.TOPOLOGY_CLOSED,new pu.TopologyClosedEvent(this.s.id))}}async selectServer(e,r){let n;if(typeof e!="function")if(typeof e=="string")n=(0,dS.readPreferenceServerSelector)(dh.ReadPreference.fromString(e));else{let f;e instanceof dh.ReadPreference?f=e:(dh.ReadPreference.translate(r),f=r.readPreference||dh.ReadPreference.primary),n=(0,dS.readPreferenceServerSelector)(f)}else n=e;r={serverSelectionTimeoutMS:this.s.serverSelectionTimeoutMS,...r},this.client.mongoLogger?.willLog(wt.MongoLoggableComponent.SERVER_SELECTION,wt.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(wt.MongoLoggableComponent.SERVER_SELECTION,new mu.ServerSelectionStartedEvent(e,this.description,r.operationName));let s;r.timeoutContext?s=r.timeoutContext.serverSelectionTimeout:s=fS.Timeout.expires(r.serverSelectionTimeoutMS??0);let i=this.description.type===Me.TopologyType.Sharded,o=r.session,u=o&&o.transaction;if(i&&u&&u.server)return this.client.mongoLogger?.willLog(wt.MongoLoggableComponent.SERVER_SELECTION,wt.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(wt.MongoLoggableComponent.SERVER_SELECTION,new mu.ServerSelectionSucceededEvent(e,this.description,u.server.pool.address,r.operationName)),r.timeoutContext?.clearServerSelectionTimeout&&s?.clear(),u.server;let{promise:a,resolve:c,reject:l}=(0,Ds.promiseWithResolvers)(),h={serverSelector:n,topologyDescription:this.description,mongoLogger:this.client.mongoLogger,transaction:u,resolve:c,reject:l,startTime:(0,Ds.now)(),operationName:r.operationName,waitingLogged:!1,previousServer:r.previousServer};this[yo].push(h),fB(this);try{s?.throwIfExpired();let f=await(s?Promise.race([a,s]):a);return r.timeoutContext?.csotEnabled()&&f.description.minRoundTripTime!==0&&(r.timeoutContext.minRoundTripTime=f.description.minRoundTripTime),f}catch(f){if(fS.TimeoutError.is(f)){h[mS]=!0;let p=new vi.MongoServerSelectionError(`Server selection timed out after ${s?.duration} ms`,this.description);throw this.client.mongoLogger?.willLog(wt.MongoLoggableComponent.SERVER_SELECTION,wt.SeverityLevel.DEBUG)&&this.client.mongoLogger?.debug(wt.MongoLoggableComponent.SERVER_SELECTION,new mu.ServerSelectionFailedEvent(e,this.description,p,r.operationName)),r.timeoutContext?.csotEnabled()?new vi.MongoOperationTimeoutError("Timed out during server selection",{cause:p}):p}throw f}finally{r.timeoutContext?.clearServerSelectionTimeout&&s?.clear()}}serverUpdateHandler(e){if(!this.s.description.hasServer(e.address)||Ure(this.s.description,e))return;let r=this.s.description,n=this.s.description.servers.get(e.address);if(!n)return;let s=e.$clusterTime;s&&(0,Me._advanceClusterTime)(this,s);let i=n&&n.equals(e);if(this.s.description=this.s.description.update(e),this.s.description.compatibilityError){this.emit(t.ERROR,new vi.MongoCompatibilityError(this.s.description.compatibilityError));return}if(!i){let o=this.s.description.servers.get(e.address);o&&this.emit(t.SERVER_DESCRIPTION_CHANGED,new pu.ServerDescriptionChangedEvent(this.s.id,e.address,n,o))}hB(this,e),this[yo].length>0&&fB(this),i||this.emitAndLog(t.TOPOLOGY_DESCRIPTION_CHANGED,new pu.TopologyDescriptionChangedEvent(this.s.id,r,this.s.description))}auth(e,r){typeof e=="function"&&(r=e,e=void 0),typeof r=="function"&&r(void 0,!0)}get clientMetadata(){return this.s.options.metadata}isConnected(){return this.s.state===Me.STATE_CONNECTED}isDestroyed(){return this.s.state===Me.STATE_CLOSED}lastHello(){let e=Array.from(this.description.servers.values());return e.length===0?{}:e.filter(s=>s.type!==Me.ServerType.Unknown)[0]||{maxWireVersion:this.description.commonWireVersion}}get commonWireVersion(){return this.description.commonWireVersion}get logicalSessionTimeoutMinutes(){return this.description.logicalSessionTimeoutMinutes}get clusterTime(){return this.s.clusterTime}set clusterTime(e){this.s.clusterTime=e}};ol.Topology=zr;zr.SERVER_OPENING=Mn.SERVER_OPENING;zr.SERVER_CLOSED=Mn.SERVER_CLOSED;zr.SERVER_DESCRIPTION_CHANGED=Mn.SERVER_DESCRIPTION_CHANGED;zr.TOPOLOGY_OPENING=Mn.TOPOLOGY_OPENING;zr.TOPOLOGY_CLOSED=Mn.TOPOLOGY_CLOSED;zr.TOPOLOGY_DESCRIPTION_CHANGED=Mn.TOPOLOGY_DESCRIPTION_CHANGED;zr.ERROR=Mn.ERROR;zr.OPEN=Mn.OPEN;zr.CONNECT=Mn.CONNECT;zr.CLOSE=Mn.CLOSE;zr.TIMEOUT=Mn.TIMEOUT;function dB(t,e){for(let r of Mn.LOCAL_SERVER_EVENTS)t.removeAllListeners(r);t.destroy(),e.emitAndLog(zr.SERVER_CLOSED,new pu.ServerClosedEvent(e.s.id,t.description.address));for(let r of Mn.SERVER_RELAY_EVENTS)t.removeAllListeners(r)}function jre(t){return t?.directConnection?Me.TopologyType.Single:t?.replicaSet?Me.TopologyType.ReplicaSetNoPrimary:t?.loadBalanced?Me.TopologyType.LoadBalanced:Me.TopologyType.Unknown}function pB(t,e){t.emitAndLog(zr.SERVER_OPENING,new pu.ServerOpeningEvent(t.s.id,e.address));let r=new cB.Server(t,e,t.s.options);for(let n of Mn.SERVER_RELAY_EVENTS)r.on(n,s=>t.emit(n,s));return r.on(cB.Server.DESCRIPTION_RECEIVED,n=>t.serverUpdateHandler(n)),r.connect(),r}function hB(t,e){if(e&&t.s.servers.has(e.address)){let r=t.s.servers.get(e.address);if(r){if(r.s.description=e,e.error instanceof vi.MongoError&&e.error.hasErrorLabel(vi.MongoErrorLabel.ResetPool)){let n=e.error.hasErrorLabel(vi.MongoErrorLabel.InterruptInUseConnections);r.pool.clear({interruptInUseConnections:n})}else if(e.error==null){let n=t.s.description.type;(e.isDataBearing||e.type!==Me.ServerType.Unknown&&n===Me.TopologyType.Single)&&r.pool.ready()}}}for(let r of t.description.servers.values())if(!t.s.servers.has(r.address)){let n=pB(t,r);t.s.servers.set(r.address,n)}for(let r of t.s.servers){let n=r[0];if(t.description.hasServer(n)||!t.s.servers.has(n))continue;let s=t.s.servers.get(n);t.s.servers.delete(n),s&&dB(s,t)}}function mB(t,e){for(;t.length;){let r=t.shift();r&&(r[mS]||(r.mongoLogger?.willLog(wt.MongoLoggableComponent.SERVER_SELECTION,wt.SeverityLevel.DEBUG)&&r.mongoLogger?.debug(wt.MongoLoggableComponent.SERVER_SELECTION,new mu.ServerSelectionFailedEvent(r.serverSelector,r.topologyDescription,e,r.operationName)),r.reject(e)))}}function fB(t){if(t.s.state===Me.STATE_CLOSED){mB(t[yo],new vi.MongoTopologyClosedError);return}let e=t.description.type===Me.TopologyType.Sharded,r=Array.from(t.description.servers.values()),n=t[yo].length;for(let s=0;s<n;++s){let i=t[yo].shift();if(!i||i[mS])continue;let o;try{let c=i.serverSelector,l=i.previousServer;o=c?c(t.description,r,l?[l]:[]):r}catch(c){t.client.mongoLogger?.willLog(wt.MongoLoggableComponent.SERVER_SELECTION,wt.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(wt.MongoLoggableComponent.SERVER_SELECTION,new mu.ServerSelectionFailedEvent(i.serverSelector,t.description,c,i.operationName)),i.reject(c);continue}let u;if(o.length===0){i.waitingLogged||(t.client.mongoLogger?.willLog(wt.MongoLoggableComponent.SERVER_SELECTION,wt.SeverityLevel.INFORMATIONAL)&&t.client.mongoLogger?.info(wt.MongoLoggableComponent.SERVER_SELECTION,new mu.WaitingForSuitableServerEvent(i.serverSelector,t.description,t.s.serverSelectionTimeoutMS!==0?t.s.serverSelectionTimeoutMS-((0,Ds.now)()-i.startTime):-1,i.operationName)),i.waitingLogged=!0),t[yo].push(i);continue}else if(o.length===1)u=t.s.servers.get(o[0].address);else{let c=(0,Ds.shuffle)(o,2),l=t.s.servers.get(c[0].address),h=t.s.servers.get(c[1].address);u=l&&h&&l.s.operationCount<h.s.operationCount?l:h}if(!u){let c=new vi.MongoServerSelectionError("server selection returned a server description but the server was not found in the topology",t.description);t.client.mongoLogger?.willLog(wt.MongoLoggableComponent.SERVER_SELECTION,wt.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(wt.MongoLoggableComponent.SERVER_SELECTION,new mu.ServerSelectionFailedEvent(i.serverSelector,t.description,c,i.operationName)),i.reject(c);return}let a=i.transaction;e&&a&&a.isActive&&u&&a.pinServer(u),t.client.mongoLogger?.willLog(wt.MongoLoggableComponent.SERVER_SELECTION,wt.SeverityLevel.DEBUG)&&t.client.mongoLogger?.debug(wt.MongoLoggableComponent.SERVER_SELECTION,new mu.ServerSelectionSucceededEvent(i.serverSelector,i.topologyDescription,u.pool.address,i.operationName)),i.resolve(u)}if(t[yo].length>0)for(let[,s]of t.s.servers)process.nextTick(function(){return s.requestCheck()})}function Ure(t,e){let n=t.servers.get(e.address)?.topologyVersion;return(0,pS.compareTopologyVersion)(n,e.topologyVersion)>0}var Nm=class{constructor(e){this.minWireVersion=e.minWireVersion||0,this.maxWireVersion=e.maxWireVersion||0}get hasAggregationCursor(){return this.maxWireVersion>=1}get hasWriteCommands(){return this.maxWireVersion>=2}get hasTextSearch(){return this.minWireVersion>=0}get hasAuthCommands(){return this.maxWireVersion>=1}get hasListCollectionsCommand(){return this.maxWireVersion>=3}get hasListIndexesCommand(){return this.maxWireVersion>=3}get supportsSnapshotReads(){return this.maxWireVersion>=13}get commandsTakeWriteConcern(){return this.maxWireVersion>=5}get commandsTakeCollation(){return this.maxWireVersion>=5}};ol.ServerCapabilities=Nm});var Jo=g(ul=>{"use strict";d();Object.defineProperty(ul,"__esModule",{value:!0});ul.MongoClient=ul.ServerApiVersion=void 0;var yS=require("fs"),Vre=Ue(),zre=Zu(),Wre=Wp(),Hre=Di(),gB=f4(),Gre=jt(),Kre=Np(),gS=Z(),Yre=K4(),EB=Wu(),Qre=Hn(),Jre=uB(),Xre=kr(),Zre=ic(),_B=lr(),ene=cc(),tne=l1(),AB=yB(),SB=qc(),Wr=ae();ul.ServerApiVersion=Object.freeze({v1:"1"});var vt=Symbol("options"),Fm=class extends Qre.TypedEventEmitter{constructor(e,r){super(),this[vt]=(0,gB.parseOptions)(e,this,r);let n=Object.values(this[vt].mongoLoggerOptions.componentSeverities).some(i=>i!==EB.SeverityLevel.OFF);this.mongoLogger=n?new EB.MongoLogger(this[vt].mongoLoggerOptions):void 0;let s=this;this.s={url:e,bsonOptions:(0,Vre.resolveBSONOptions)(this[vt]),namespace:(0,Wr.ns)("admin"),hasBeenClosed:!1,sessionPool:new SB.ServerSessionPool(this),activeSessions:new Set,authProviders:new Yre.MongoClientAuthProviders,get options(){return s[vt]},get readConcern(){return s[vt].readConcern},get writeConcern(){return s[vt].writeConcern},get readPreference(){return s[vt].readPreference},get isMongoClient(){return!0}},this.checkForNonGenuineHosts()}async asyncDispose(){await this.close()}checkForNonGenuineHosts(){let e=this[vt].hosts.filter(i=>(0,Wr.isHostMatch)(Wr.DOCUMENT_DB_CHECK,i.host)),r=(0,Wr.isHostMatch)(Wr.DOCUMENT_DB_CHECK,this[vt].srvHost),n=this[vt].hosts.filter(i=>(0,Wr.isHostMatch)(Wr.COSMOS_DB_CHECK,i.host)),s=(0,Wr.isHostMatch)(Wr.COSMOS_DB_CHECK,this[vt].srvHost);e.length!==0||r?this.mongoLogger?.info("client",Wr.DOCUMENT_DB_MSG):(n.length!==0||s)&&this.mongoLogger?.info("client",Wr.COSMOS_DB_MSG)}get options(){return Object.freeze({...this[vt]})}get serverApi(){return this[vt].serverApi&&Object.freeze({...this[vt].serverApi})}get monitorCommands(){return this[vt].monitorCommands}set monitorCommands(e){this[vt].monitorCommands=e}get autoEncrypter(){return this[vt].autoEncrypter}get readConcern(){return this.s.readConcern}get writeConcern(){return this.s.writeConcern}get readPreference(){return this.s.readPreference}get bsonOptions(){return this.s.bsonOptions}get timeoutMS(){return this.s.options.timeoutMS}async bulkWrite(e,r){if(this.autoEncrypter)throw new gS.MongoInvalidArgumentError("MongoClient bulkWrite does not currently support automatic encryption.");return await new Jre.ClientBulkWriteExecutor(this,e,(0,Wr.resolveOptions)(this,r)).execute()}async connect(){if(this.connectionLock)return await this.connectionLock;try{this.connectionLock=this._connect(),await this.connectionLock}finally{this.connectionLock=void 0}return this}async _connect(){if(this.topology&&this.topology.isConnected())return this;let e=this[vt];if(e.tls&&(typeof e.tlsCAFile=="string"&&(e.ca??=await yS.promises.readFile(e.tlsCAFile)),typeof e.tlsCRLFile=="string"&&(e.crl??=await yS.promises.readFile(e.tlsCRLFile)),typeof e.tlsCertificateKeyFile=="string"&&(!e.key||!e.cert))){let n=await yS.promises.readFile(e.tlsCertificateKeyFile);e.key??=n,e.cert??=n}if(typeof e.srvHost=="string"){let n=await(0,gB.resolveSRVRecord)(e);for(let[s,i]of n.entries())e.hosts[s]=i}if(e.credentials?.mechanism===Hre.AuthMechanism.MONGODB_OIDC){let n=e.credentials?.mechanismProperties?.ALLOWED_HOSTS||Wre.DEFAULT_ALLOWED_HOSTS;if(!!!e.credentials?.mechanismProperties?.ENVIRONMENT){for(let i of e.hosts)if(!(0,Wr.hostMatchesWildcards)(i.toHostPort().host,n))throw new gS.MongoInvalidArgumentError(`Host '${i}' is not valid for OIDC authentication with ALLOWED_HOSTS of '${n.join(",")}'`)}}this.topology=new AB.Topology(this,e.hosts,e),this.topology.once(AB.Topology.OPEN,()=>this.emit("open",this));for(let n of Gre.MONGO_CLIENT_EVENTS)this.topology.on(n,(...s)=>this.emit(n,...s));let r=async()=>{try{await this.topology?.connect(e)}catch(n){throw this.topology?.close(),n}};return this.autoEncrypter?(await this.autoEncrypter?.init(),await r(),await e.encrypter.connectInternalClient()):await r(),this}async close(e=!1){Object.defineProperty(this.s,"hasBeenClosed",{value:!0,enumerable:!0,configurable:!1,writable:!1});let r=Array.from(this.s.activeSessions,c=>c.endSession());if(this.s.activeSessions.clear(),await Promise.all(r),this.topology==null)return;let n=(0,tne.readPreferenceServerSelector)(_B.ReadPreference.primaryPreferred),s=this.topology.description,i=Array.from(s.servers.values());if(n(s,i).length!==0){let c=Array.from(this.s.sessionPool.sessions,({id:l})=>l);if(c.length!==0)try{await(0,Xre.executeOperation)(this,new Zre.RunAdminCommandOperation({endSessions:c},{readPreference:_B.ReadPreference.primaryPreferred,noResponse:!0}))}catch(l){(0,Wr.squashError)(l)}}let u=this.topology;this.topology=void 0,u.close();let{encrypter:a}=this[vt];a&&await a.close(this,e)}db(e,r){r=r??{},e||(e=this.s.options.dbName);let n=Object.assign({},this[vt],r);return new Kre.Db(this,e,n)}static async connect(e,r){return await new this(e,r).connect()}startSession(e){let r=new SB.ClientSession(this,this.s.sessionPool,{explicit:!0,...e},this[vt]);return this.s.activeSessions.add(r),r.once("ended",()=>{this.s.activeSessions.delete(r)}),r}async withSession(e,r){let n={owner:Symbol(),...typeof e=="object"?e:{}},s=typeof e=="function"?e:r;if(s==null)throw new gS.MongoInvalidArgumentError("Missing required callback parameter");let i=this.startSession(n);try{return await s(i)}finally{try{await i.endSession()}catch(o){(0,Wr.squashError)(o)}}}watch(e=[],r={}){return Array.isArray(e)||(r=e,e=[]),new zre.ChangeStream(this,e,(0,Wr.resolveOptions)(this,r))}};ul.MongoClient=Fm;(0,ene.configureResourceManagement)(Fm.prototype)});var cc=g(Rm=>{"use strict";d();Object.defineProperty(Rm,"__esModule",{value:!0});Rm.configureResourceManagement=mh;Rm.configureExplicitResourceManagement=rne;function mh(t){Symbol.asyncDispose&&Object.defineProperty(t,Symbol.asyncDispose,{value:async function(){await this.asyncDispose()},enumerable:!1,configurable:!0,writable:!0})}function rne(){let{MongoClient:t}=Jo(),{ClientSession:e}=qc(),{AbstractCursor:r}=qr(),{ChangeStream:n}=Zu();mh(t.prototype),mh(e.prototype),mh(r.prototype),mh(n.prototype)}});var qr=g($t=>{"use strict";d();Object.defineProperty($t,"__esModule",{value:!0});$t.CursorTimeoutContext=$t.AbstractCursor=$t.CursorTimeoutMode=$t.CURSOR_FLAGS=void 0;var bB=require("stream"),al=Ue(),mr=Z(),nne=Hn(),OB=kr(),sne=c_(),ine=bb(),wB=ls(),vm=lr(),one=cc(),CB=qc(),ES=$r(),ya=ae();$t.CURSOR_FLAGS=["tailable","oplogReplay","noCursorTimeout","awaitData","exhaust","partial"];$t.CursorTimeoutMode=Object.freeze({ITERATION:"iteration",LIFETIME:"cursorLifetime"});var yh=class extends nne.TypedEventEmitter{constructor(e,r,n={}){if(super(),this.documents=null,this.hasEmittedClose=!1,!e.s.isMongoClient)throw new mr.MongoRuntimeError("Cursor must be constructed with MongoClient");if(this.cursorClient=e,this.cursorNamespace=r,this.cursorId=null,this.initialized=!1,this.isClosed=!1,this.isKilled=!1,this.cursorOptions={readPreference:n.readPreference&&n.readPreference instanceof vm.ReadPreference?n.readPreference:vm.ReadPreference.primary,...(0,al.pluckBSONSerializeOptions)(n),timeoutMS:n?.timeoutContext?.csotEnabled()?n.timeoutContext.timeoutMS:n.timeoutMS,tailable:n.tailable,awaitData:n.awaitData},this.cursorOptions.timeoutMS!=null)if(n.timeoutMode==null)if(n.tailable){if(n.awaitData&&n.maxAwaitTimeMS!=null&&n.maxAwaitTimeMS>=this.cursorOptions.timeoutMS)throw new mr.MongoInvalidArgumentError("Cannot specify maxAwaitTimeMS >= timeoutMS for a tailable awaitData cursor");this.cursorOptions.timeoutMode=$t.CursorTimeoutMode.ITERATION}else this.cursorOptions.timeoutMode=$t.CursorTimeoutMode.LIFETIME;else{if(n.tailable&&n.timeoutMode===$t.CursorTimeoutMode.LIFETIME)throw new mr.MongoInvalidArgumentError("Cannot set tailable cursor's timeoutMode to LIFETIME");this.cursorOptions.timeoutMode=n.timeoutMode}else if(n.timeoutMode!=null)throw new mr.MongoInvalidArgumentError("Cannot set timeoutMode without setting timeoutMS");this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null&&(this.cursorOptions.timeoutMode===$t.CursorTimeoutMode.ITERATION&&!this.cursorOptions.tailable||this.cursorOptions.tailable&&!this.cursorOptions.awaitData);let s=wB.ReadConcern.fromOptions(n);s&&(this.cursorOptions.readConcern=s),typeof n.batchSize=="number"&&(this.cursorOptions.batchSize=n.batchSize),n.comment!==void 0&&(this.cursorOptions.comment=n.comment),typeof n.maxTimeMS=="number"&&(this.cursorOptions.maxTimeMS=n.maxTimeMS),typeof n.maxAwaitTimeMS=="number"&&(this.cursorOptions.maxAwaitTimeMS=n.maxAwaitTimeMS),n.session instanceof CB.ClientSession?this.cursorSession=n.session:this.cursorSession=this.cursorClient.startSession({owner:this,explicit:!1}),this.deserializationOptions={...this.cursorOptions,validation:{utf8:n?.enableUtf8Validation!==!1}},this.timeoutContext=n.timeoutContext}get id(){return this.cursorId??void 0}get isDead(){return(this.cursorId?.isZero()??!1)||this.isClosed||this.isKilled}get client(){return this.cursorClient}get server(){return this.selectedServer}get namespace(){return this.cursorNamespace}get readPreference(){return this.cursorOptions.readPreference}get readConcern(){return this.cursorOptions.readConcern}get session(){return this.cursorSession}set session(e){this.cursorSession=e}get closed(){return this.isClosed&&(this.documents?.length??0)===0}get killed(){return this.isKilled}get loadBalanced(){return!!this.cursorClient.topology?.loadBalanced}async asyncDispose(){await this.close()}bufferedCount(){return this.documents?.length??0}readBufferedDocuments(e){let r=[],n=Math.min(e??this.documents?.length??0,this.documents?.length??0);for(let s=0;s<n;s++){let i=this.documents?.shift(this.deserializationOptions);i!=null&&r.push(i)}return r}async*[Symbol.asyncIterator](){if(!this.closed)try{for(;;){if(this.isKilled||this.closed||this.cursorId!=null&&this.isDead&&(this.documents?.length??0)===0)return;let e=await this.next();if(e===null)return;yield e}}finally{if(!this.isClosed)try{await this.close()}catch(e){(0,ya.squashError)(e)}}}stream(e){if(e?.transform){let r=e.transform,n=new $m(this),s=n.pipe(new bB.Transform({objectMode:!0,highWaterMark:1,transform(i,o,u){try{let a=r(i);u(void 0,a)}catch(a){u(a)}}}));return n.on("error",i=>s.emit("error",i)),s}return new $m(this)}async hasNext(){if(this.cursorId===al.Long.ZERO)return!1;this.cursorOptions.timeoutMode===$t.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{if((this.documents?.length??0)!==0)return!0;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===$t.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return!1}async next(){if(this.cursorId===al.Long.ZERO)throw new mr.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===$t.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{do{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;await this.fetchBatch()}while(!this.isDead||(this.documents?.length??0)!==0)}finally{this.cursorOptions.timeoutMode===$t.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async tryNext(){if(this.cursorId===al.Long.ZERO)throw new mr.MongoCursorExhaustedError;this.cursorOptions.timeoutMode===$t.CursorTimeoutMode.ITERATION&&this.cursorId!=null&&this.timeoutContext?.refresh();try{let e=this.documents?.shift(this.deserializationOptions);if(e!=null)return this.transform!=null?await this.transformDocument(e):e;if(await this.fetchBatch(),e=this.documents?.shift(this.deserializationOptions),e!=null)return this.transform!=null?await this.transformDocument(e):e}finally{this.cursorOptions.timeoutMode===$t.CursorTimeoutMode.ITERATION&&this.timeoutContext?.clear()}return null}async forEach(e){if(typeof e!="function")throw new mr.MongoInvalidArgumentError('Argument "iterator" must be a function');for await(let r of this)if(e(r)===!1)break}async close(e){await this.cleanup(e?.timeoutMS)}async toArray(){let e=[];for await(let r of this){e.push(r);let n=this.readBufferedDocuments();if(this.transform!=null)for(let s of n)e.push(await this.transformDocument(s));else e.push(...n)}return e}addCursorFlag(e,r){if(this.throwIfInitialized(),!$t.CURSOR_FLAGS.includes(e))throw new mr.MongoInvalidArgumentError(`Flag ${e} is not one of ${$t.CURSOR_FLAGS}`);if(typeof r!="boolean")throw new mr.MongoInvalidArgumentError(`Flag ${e} must be a boolean value`);return this.cursorOptions[e]=r,this}map(e){this.throwIfInitialized();let r=this.transform;return r?this.transform=n=>e(r(n)):this.transform=e,this}withReadPreference(e){if(this.throwIfInitialized(),e instanceof vm.ReadPreference)this.cursorOptions.readPreference=e;else if(typeof e=="string")this.cursorOptions.readPreference=vm.ReadPreference.fromString(e);else throw new mr.MongoInvalidArgumentError(`Invalid read preference: ${e}`);return this}withReadConcern(e){this.throwIfInitialized();let r=wB.ReadConcern.fromOptions({readConcern:e});return r&&(this.cursorOptions.readConcern=r),this}maxTimeMS(e){if(this.throwIfInitialized(),typeof e!="number")throw new mr.MongoInvalidArgumentError("Argument for maxTimeMS must be a number");return this.cursorOptions.maxTimeMS=e,this}batchSize(e){if(this.throwIfInitialized(),this.cursorOptions.tailable)throw new mr.MongoTailableCursorError("Tailable cursor does not support batchSize");if(typeof e!="number")throw new mr.MongoInvalidArgumentError('Operation "batchSize" requires an integer');return this.cursorOptions.batchSize=e,this}rewind(){if(this.timeoutContext&&this.timeoutContext.owner!==this)throw new mr.MongoAPIError("Cannot rewind cursor that does not own its timeout context.");if(!this.initialized)return;this.cursorId=null,this.documents?.clear(),this.timeoutContext?.clear(),this.timeoutContext=void 0,this.isClosed=!1,this.isKilled=!1,this.initialized=!1;let e=this.cursorSession;e&&e.explicit===!1&&(e.hasEnded||e.endSession().then(void 0,ya.squashError),this.cursorSession=this.cursorClient.startSession({owner:this,explicit:!1}))}async getMore(e){if(this.cursorId==null)throw new mr.MongoRuntimeError("Unexpected null cursor id. A cursor creating command should have set this");if(this.selectedServer==null)throw new mr.MongoRuntimeError("Unexpected null selectedServer. A cursor creating command should have set this");let r={...this.cursorOptions,session:this.cursorSession,batchSize:e},n=new sne.GetMoreOperation(this.cursorNamespace,this.cursorId,this.selectedServer,r);return await(0,OB.executeOperation)(this.cursorClient,n,this.timeoutContext)}async cursorInit(){this.cursorOptions.timeoutMS!=null&&(this.timeoutContext??=new gh(ES.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:this.cursorOptions.timeoutMS}),this));try{let e=await this._initialize(this.cursorSession);this.cursorOptions.omitMaxTimeMS=this.cursorOptions.timeoutMS!=null;let r=e.response;this.selectedServer=e.server,this.cursorId=r.id,this.cursorNamespace=r.ns??this.namespace,this.documents=r,this.initialized=!0}catch(e){throw this.initialized=!0,await this.cleanup(void 0,e),e}this.isDead&&await this.cleanup()}async fetchBatch(){if(this.isClosed)return;if(this.isDead){await this.cleanup();return}if(this.cursorId==null&&(await this.cursorInit(),(this.documents?.length??0)!==0||this.isDead))return;let e=this.cursorOptions.batchSize||1e3;try{let r=await this.getMore(e);this.cursorId=r.id,this.documents=r}catch(r){try{await this.cleanup(void 0,r)}catch(n){(0,ya.squashError)(n)}throw r}this.isDead&&await this.cleanup()}async cleanup(e,r){this.isClosed=!0;let n=this.cursorSession,s=()=>e!=null?(this.timeoutContext?.clear(),new gh(ES.TimeoutContext.create({serverSelectionTimeoutMS:this.client.s.options.serverSelectionTimeoutMS,timeoutMS:e}),this)):this.timeoutContext?.refreshed();try{if(!this.isKilled&&this.cursorId&&!this.cursorId.isZero()&&this.cursorNamespace&&this.selectedServer&&!n.hasEnded){this.isKilled=!0;let i=this.cursorId;this.cursorId=al.Long.ZERO,await(0,OB.executeOperation)(this.cursorClient,new ine.KillCursorsOperation(i,this.cursorNamespace,this.selectedServer,{session:n}),s())}}catch(i){(0,ya.squashError)(i)}finally{n?.owner===this&&await n.endSession({error:r}),n?.inTransaction()||(0,CB.maybeClearPinnedConnection)(n,{error:r}),this.emitClose()}}emitClose(){try{!this.hasEmittedClose&&((this.documents?.length??0)===0||this.isClosed)&&this.emit("close")}finally{this.hasEmittedClose=!0}}async transformDocument(e){if(this.transform==null)return e;try{let r=this.transform(e);if(r===null){let n="Cursor returned a `null` document, but the cursor is not exhausted.  Mapping documents to `null` is not supported in the cursor transform.";throw new mr.MongoAPIError(n)}return r}catch(r){try{await this.close()}catch(n){(0,ya.squashError)(n)}throw r}}throwIfInitialized(){if(this.initialized)throw new mr.MongoCursorInUseError}};$t.AbstractCursor=yh;yh.CLOSE="close";var $m=class extends bB.Readable{constructor(e){super({objectMode:!0,autoDestroy:!1,highWaterMark:1}),this._readInProgress=!1,this._cursor=e}_read(e){this._readInProgress||(this._readInProgress=!0,this._readNext())}_destroy(e,r){this._cursor.close().then(()=>r(e),n=>r(n))}_readNext(){if(this._cursor.id===al.Long.ZERO){this.push(null);return}this._cursor.next().then(e=>{if(e==null)this.push(null);else if(this.destroyed)this._cursor.close().then(void 0,ya.squashError);else{if(this.push(e))return this._readNext();this._readInProgress=!1}},e=>e.message.match(/server is closed/)?(this._cursor.close().then(void 0,ya.squashError),this.push(null)):e.message.match(/operation was interrupted/)?this.push(null):this.destroy(e))}};(0,one.configureResourceManagement)(yh.prototype);var gh=class t extends ES.TimeoutContext{constructor(e,r){super(),this.timeoutContext=e,this.owner=r}get serverSelectionTimeout(){return this.timeoutContext.serverSelectionTimeout}get connectionCheckoutTimeout(){return this.timeoutContext.connectionCheckoutTimeout}get clearServerSelectionTimeout(){return this.timeoutContext.clearServerSelectionTimeout}get timeoutForSocketWrite(){return this.timeoutContext.timeoutForSocketWrite}get timeoutForSocketRead(){return this.timeoutContext.timeoutForSocketRead}csotEnabled(){return this.timeoutContext.csotEnabled()}refresh(){if(typeof this.owner!="symbol")return this.timeoutContext.refresh()}clear(){if(typeof this.owner!="symbol")return this.timeoutContext.clear()}get maxTimeMS(){return this.timeoutContext.maxTimeMS}get timeoutMS(){return this.timeoutContext.csotEnabled()?this.timeoutContext.timeoutMS:null}refreshed(){return new t(this.timeoutContext.refreshed(),this.owner)}addMaxTimeMSToCommand(e,r){this.timeoutContext.addMaxTimeMSToCommand(e,r)}getSocketTimeoutMS(){return this.timeoutContext.getSocketTimeoutMS()}};$t.CursorTimeoutContext=gh});var Qu=g(Ms=>{"use strict";d();Object.defineProperty(Ms,"__esModule",{value:!0});Ms.ExplainableCursor=Ms.Explain=Ms.ExplainVerbosity=void 0;Ms.validateExplainTimeoutOptions=cne;Ms.decorateWithExplain=lne;var une=qr(),ane=Z();Ms.ExplainVerbosity=Object.freeze({queryPlanner:"queryPlanner",queryPlannerExtended:"queryPlannerExtended",executionStats:"executionStats",allPlansExecution:"allPlansExecution"});var _S=class t{constructor(e,r){typeof e=="boolean"?this.verbosity=e?Ms.ExplainVerbosity.allPlansExecution:Ms.ExplainVerbosity.queryPlanner:this.verbosity=e,this.maxTimeMS=r}static fromOptions({explain:e}={}){if(e==null)return;if(typeof e=="boolean"||typeof e=="string")return new t(e);let{verbosity:r,maxTimeMS:n}=e;return new t(r,n)}};Ms.Explain=_S;function cne(t,e){let{maxTimeMS:r,timeoutMS:n}=t;if(n!=null&&(r!=null||e?.maxTimeMS!=null))throw new ane.MongoAPIError("Cannot use maxTimeMS with timeoutMS for explain commands.")}function lne(t,e){let{verbosity:r,maxTimeMS:n}=e,s={explain:t,verbosity:r};return typeof n=="number"&&(s.maxTimeMS=n),s}var AS=class extends une.AbstractCursor{resolveExplainTimeoutOptions(e,r){let n,s;return e==null&&r==null?(n=void 0,s=void 0):e!=null&&r==null?(n=typeof e!="object"||"verbosity"in e?e:void 0,s=typeof e=="object"&&"timeoutMS"in e?e:void 0):(n=e,s=r),{timeout:s,explain:n}}};Ms.ExplainableCursor=AS});var Pt=g(km=>{"use strict";d();Object.defineProperty(km,"__esModule",{value:!0});km.CommandOperation=void 0;var hne=Z(),SS=Qu(),fne=ls(),dne=l1(),xm=ae(),TB=vr(),cl=Ke(),OS=class extends cl.AbstractOperation{constructor(e,r){super(r),this.options=r??{};let n=r?.dbName||r?.authdb;if(n?this.ns=new xm.MongoDBNamespace(n,"$cmd"):this.ns=e?e.s.namespace.withCollection("$cmd"):new xm.MongoDBNamespace("admin","$cmd"),this.readConcern=fne.ReadConcern.fromOptions(r),this.writeConcern=TB.WriteConcern.fromOptions(r),this.hasAspect(cl.Aspect.EXPLAINABLE))this.explain=SS.Explain.fromOptions(r),this.explain&&(0,SS.validateExplainTimeoutOptions)(this.options,this.explain);else if(r?.explain!=null)throw new hne.MongoInvalidArgumentError('Option "explain" is not supported on this command')}get canRetryWrite(){return this.hasAspect(cl.Aspect.EXPLAINABLE)?this.explain==null:super.canRetryWrite}async executeCommand(e,r,n,s,i){this.server=e;let o={...this.options,...this.bsonOptions,timeoutContext:s,readPreference:this.readPreference,session:r},u=(0,xm.maxWireVersion)(e),a=this.session&&this.session.inTransaction();return this.readConcern&&(0,xm.commandSupportsReadConcern)(n)&&!a&&Object.assign(n,{readConcern:this.readConcern}),this.trySecondaryWrite&&u<dne.MIN_SECONDARY_WRITE_WIRE_VERSION&&(o.omitReadPreference=!0),this.writeConcern&&this.hasAspect(cl.Aspect.WRITE_OPERATION)&&!a&&TB.WriteConcern.apply(n,this.writeConcern),o.collation&&typeof o.collation=="object"&&!this.hasAspect(cl.Aspect.SKIP_COLLATION)&&Object.assign(n,{collation:o.collation}),typeof o.maxTimeMS=="number"&&(n.maxTimeMS=o.maxTimeMS),this.hasAspect(cl.Aspect.EXPLAINABLE)&&this.explain&&(n=(0,SS.decorateWithExplain)(n,this.explain)),await e.command(this.ns,n,o,i)}};km.CommandOperation=OS});var MB=g(Lm=>{"use strict";d();Object.defineProperty(Lm,"__esModule",{value:!0});Lm.ListDatabasesOperation=void 0;var DB=ae(),pne=Pt(),wS=Ke(),qm=class extends pne.CommandOperation{constructor(e,r){super(e,r),this.options=r??{},this.ns=new DB.MongoDBNamespace("admin","$cmd")}get commandName(){return"listDatabases"}async execute(e,r,n){let s={listDatabases:1};return typeof this.options.nameOnly=="boolean"&&(s.nameOnly=this.options.nameOnly),this.options.filter&&(s.filter=this.options.filter),typeof this.options.authorizedDatabases=="boolean"&&(s.authorizedDatabases=this.options.authorizedDatabases),(0,DB.maxWireVersion)(e)>=9&&this.options.comment!==void 0&&(s.comment=this.options.comment),await super.executeCommand(e,r,s,n)}};Lm.ListDatabasesOperation=qm;(0,wS.defineAspects)(qm,[wS.Aspect.READ_OPERATION,wS.Aspect.RETRYABLE])});var BB=g(jm=>{"use strict";d();Object.defineProperty(jm,"__esModule",{value:!0});jm.ValidateCollectionOperation=void 0;var CS=Z(),mne=Pt(),bS=class extends mne.CommandOperation{constructor(e,r,n){let s={validate:r},i=Object.keys(n);for(let o=0;o<i.length;o++)Object.prototype.hasOwnProperty.call(n,i[o])&&i[o]!=="session"&&(s[i[o]]=n[i[o]]);super(e.s.db,n),this.options=n,this.command=s,this.collectionName=r}get commandName(){return"validate"}async execute(e,r,n){let s=this.collectionName,i=await super.executeCommand(e,r,this.command,n);if(i.result!=null&&typeof i.result!="string")throw new CS.MongoUnexpectedServerResponseError("Error with validation data");if(i.result!=null&&i.result.match(/exception|corrupt/)!=null)throw new CS.MongoUnexpectedServerResponseError(`Invalid collection ${s}`);if(i.valid!=null&&!i.valid)throw new CS.MongoUnexpectedServerResponseError(`Invalid collection ${s}`);return i}};jm.ValidateCollectionOperation=bS});var S3=g(Vm=>{"use strict";d();Object.defineProperty(Vm,"__esModule",{value:!0});Vm.Admin=void 0;var yne=Ue(),Um=kr(),gne=MB(),Ene=E3(),_ne=ic(),Ane=BB(),TS=class{constructor(e){this.s={db:e}}async command(e,r){return await(0,Um.executeOperation)(this.s.db.client,new _ne.RunAdminCommandOperation(e,{...(0,yne.resolveBSONOptions)(r),session:r?.session,readPreference:r?.readPreference,timeoutMS:r?.timeoutMS??this.s.db.timeoutMS}))}async buildInfo(e){return await this.command({buildinfo:1},e)}async serverInfo(e){return await this.command({buildinfo:1},e)}async serverStatus(e){return await this.command({serverStatus:1},e)}async ping(e){return await this.command({ping:1},e)}async removeUser(e,r){return await(0,Um.executeOperation)(this.s.db.client,new Ene.RemoveUserOperation(this.s.db,e,{dbName:"admin",...r}))}async validateCollection(e,r={}){return await(0,Um.executeOperation)(this.s.db.client,new Ane.ValidateCollectionOperation(this,e,r))}async listDatabases(e){return await(0,Um.executeOperation)(this.s.db.client,new gne.ListDatabasesOperation(this.s.db,{timeoutMS:this.s.db.timeoutMS,...e}))}async replSetGetStatus(e){return await this.command({replSetGetStatus:1},e)}};Vm.Admin=TS});var DS=g(zm=>{"use strict";d();Object.defineProperty(zm,"__esModule",{value:!0});zm.GridFSBucketReadStream=void 0;var Sne=require("stream"),One=qr(),Jn=Z(),wne=$r(),Eh=class extends Sne.Readable{constructor(e,r,n,s,i){super({emitClose:!0}),this.s={bytesToTrim:0,bytesToSkip:0,bytesRead:0,chunks:e,expected:0,files:r,filter:s,init:!1,expectedEnd:0,options:{start:0,end:0,...i},readPreference:n,timeoutContext:i?.timeoutMS!=null?new wne.CSOTTimeoutContext({timeoutMS:i.timeoutMS,serverSelectionTimeoutMS:0}):void 0}}_read(){this.destroyed||Tne(this,()=>Cne(this))}start(e=0){return IB(this),this.s.options.start=e,this}end(e=0){return IB(this),this.s.options.end=e,this}async abort(){this.push(null),this.destroy();let e=this.s.timeoutContext?.getRemainingTimeMSOrThrow();await this.s.cursor?.close({timeoutMS:e})}};zm.GridFSBucketReadStream=Eh;Eh.FILE="file";function IB(t){if(t.s.init)throw new Jn.MongoGridFSStreamError("Options cannot be changed after the stream is initialized")}function Cne(t){if(t.destroyed||!t.s.cursor||!t.s.file)return;let e=r=>{if(t.destroyed)return;if(!r){t.push(null),t.s.cursor?.close().then(void 0,h=>t.destroy(h));return}if(!t.s.file)return;let n=t.s.file.length-t.s.bytesRead,s=t.s.expected++,i=Math.min(t.s.file.chunkSize,n);if(r.n>s)return t.destroy(new Jn.MongoGridFSChunkError(`ChunkIsMissing: Got unexpected n: ${r.n}, expected: ${s}`));if(r.n<s)return t.destroy(new Jn.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected: ${s}`));let o=Buffer.isBuffer(r.data)?r.data:r.data.buffer;if(o.byteLength!==i)return n<=0?t.destroy(new Jn.MongoGridFSChunkError(`ExtraChunk: Got unexpected n: ${r.n}, expected file length ${t.s.file.length} bytes but already read ${t.s.bytesRead} bytes`)):t.destroy(new Jn.MongoGridFSChunkError(`ChunkIsWrongSize: Got unexpected length: ${o.byteLength}, expected: ${i}`));if(t.s.bytesRead+=o.byteLength,o.byteLength===0)return t.push(null);let u=null,a=null;t.s.bytesToSkip!=null&&(u=t.s.bytesToSkip,t.s.bytesToSkip=0);let c=s===t.s.expectedEnd-1,l=t.s.options.end-t.s.bytesToSkip;c&&t.s.bytesToTrim!=null?a=t.s.file.chunkSize-t.s.bytesToTrim:t.s.options.end&&l<r.data.byteLength&&(a=l),(u!=null||a!=null)&&(o=o.slice(u||0,a||o.byteLength)),t.push(o)};t.s.cursor.next().then(e,r=>{t.destroyed||t.destroy(r)})}function bne(t){let e={};t.s.readPreference&&(e.readPreference=t.s.readPreference),t.s.options&&t.s.options.sort&&(e.sort=t.s.options.sort),t.s.options&&t.s.options.skip&&(e.skip=t.s.options.skip);let r=s=>{if(t.destroyed)return;if(!s){let a=`FileNotFound: file ${t.s.filter._id?t.s.filter._id.toString():t.s.filter.filename} was not found`,c=new Jn.MongoRuntimeError(a);return c.code="ENOENT",t.destroy(c)}if(s.length<=0){t.push(null);return}if(t.destroyed){t.destroy();return}try{t.s.bytesToSkip=Dne(t,s,t.s.options)}catch(u){return t.destroy(u)}let i={files_id:s._id};if(t.s.options&&t.s.options.start!=null){let u=Math.floor(t.s.options.start/s.chunkSize);u>0&&(i.n={$gte:u})}let o;try{o=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(u){return t.destroy(u)}t.s.cursor=t.s.chunks.find(i,{timeoutMode:t.s.options.timeoutMS!=null?One.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:o}).sort({n:1}),t.s.readPreference&&t.s.cursor.withReadPreference(t.s.readPreference),t.s.expectedEnd=Math.ceil(s.length/s.chunkSize),t.s.file=s;try{t.s.bytesToTrim=Mne(t,s,t.s.cursor,t.s.options)}catch(u){return t.destroy(u)}t.emit(Eh.FILE,s)},n;try{n=t.s.timeoutContext?.getRemainingTimeMSOrThrow(`Download timed out after ${t.s.timeoutContext?.timeoutMS}ms`)}catch(s){t.destroyed||t.destroy(s);return}e.timeoutMS=n,t.s.files.findOne(t.s.filter,e).then(r,s=>{t.destroyed||t.destroy(s)})}function Tne(t,e){if(t.s.file)return e();t.s.init||(bne(t),t.s.init=!0),t.once("file",()=>{e()})}function Dne(t,e,r){if(r&&r.start!=null){if(r.start>e.length)throw new Jn.MongoInvalidArgumentError(`Stream start (${r.start}) must not be more than the length of the file (${e.length})`);if(r.start<0)throw new Jn.MongoInvalidArgumentError(`Stream start (${r.start}) must not be negative`);if(r.end!=null&&r.end<r.start)throw new Jn.MongoInvalidArgumentError(`Stream start (${r.start}) must not be greater than stream end (${r.end})`);return t.s.bytesRead=Math.floor(r.start/e.chunkSize)*e.chunkSize,t.s.expected=Math.floor(r.start/e.chunkSize),r.start-t.s.bytesRead}throw new Jn.MongoInvalidArgumentError("Start option must be defined")}function Mne(t,e,r,n){if(n&&n.end!=null){if(n.end>e.length)throw new Jn.MongoInvalidArgumentError(`Stream end (${n.end}) must not be more than the length of the file (${e.length})`);if(n.start==null||n.start<0)throw new Jn.MongoInvalidArgumentError(`Stream end (${n.end}) must not be negative`);let s=n.start!=null?Math.floor(n.start/e.chunkSize):0;return r.limit(Math.ceil(n.end/e.chunkSize)-s),t.s.expectedEnd=Math.ceil(n.end/e.chunkSize),Math.ceil(n.end/e.chunkSize)*e.chunkSize-n.end}throw new Jn.MongoInvalidArgumentError("End option must be defined")}});var IS=g(Hm=>{"use strict";d();Object.defineProperty(Hm,"__esModule",{value:!0});Hm.GridFSBucketWriteStream=void 0;var Bne=require("stream"),NB=Ue(),FB=qr(),ci=Z(),Ine=$r(),PB=ae(),Pne=vr(),MS=class extends Bne.Writable{constructor(e,r,n){super(),this.gridFSFile=null,n=n??{},this.bucket=e,this.chunks=e.s._chunksCollection,this.filename=r,this.files=e.s._filesCollection,this.options=n,this.writeConcern=Pne.WriteConcern.fromOptions(n)||e.s.options.writeConcern,this.done=!1,this.id=n.id?n.id:new NB.ObjectId,this.chunkSizeBytes=n.chunkSizeBytes||this.bucket.s.options.chunkSizeBytes,this.bufToStore=Buffer.alloc(this.chunkSizeBytes),this.length=0,this.n=0,this.pos=0,this.state={streamEnd:!1,outstandingRequests:0,errored:!1,aborted:!1},n.timeoutMS!=null&&(this.timeoutContext=new Ine.CSOTTimeoutContext({timeoutMS:n.timeoutMS,serverSelectionTimeoutMS:(0,PB.resolveTimeoutOptions)(this.bucket.s.db.client,{}).serverSelectionTimeoutMS}))}_construct(e){if(!this.bucket.s.calledOpenUploadStream)this.bucket.s.calledOpenUploadStream=!0,Fne(this).then(()=>{this.bucket.s.checkedIndexes=!0,this.bucket.emit("index"),e()},r=>{if(r instanceof ci.MongoOperationTimeoutError)return ga(this,r,e);(0,PB.squashError)(r),e()});else return process.nextTick(e)}_write(e,r,n){vne(this,e,r,n)}_final(e){if(this.state.streamEnd)return process.nextTick(e);this.state.streamEnd=!0,$ne(this,e)}async abort(){if(this.state.streamEnd)throw new ci.MongoAPIError("Cannot abort a stream that has already completed");if(this.state.aborted)throw new ci.MongoAPIError("Cannot call abort() on a stream twice");this.state.aborted=!0;let e=this.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${this.timeoutContext?.timeoutMS}ms`);await this.chunks.deleteMany({files_id:this.id},{timeoutMS:e})}};Hm.GridFSBucketWriteStream=MS;function ga(t,e,r){if(t.state.errored){process.nextTick(r);return}t.state.errored=!0,process.nextTick(r,e)}function RB(t,e,r){return{_id:new NB.ObjectId,files_id:t,n:e,data:r}}async function Nne(t){let e={files_id:1,n:1},r;r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let n;try{n=await t.chunks.listIndexes({timeoutMode:r!=null?FB.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:r}).toArray()}catch(i){if(i instanceof ci.MongoError&&i.code===ci.MONGODB_ERROR_CODES.NamespaceNotFound)n=[];else throw i}!!n.find(i=>Object.keys(i.key).length===2&&i.key.files_id===1&&i.key.n===1)||(r=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.chunks.createIndex(e,{...t.writeConcern,background:!0,unique:!0,timeoutMS:r}))}function BS(t,e){if(t.done)return process.nextTick(e);if(t.state.streamEnd&&t.state.outstandingRequests===0&&!t.state.errored){t.done=!0;let r=Rne(t.id,t.length,t.chunkSizeBytes,t.filename,t.options.contentType,t.options.aliases,t.options.metadata);if(Wm(t,e))return;let n=t.timeoutContext?.remainingTimeMS;if(n!=null&&n<=0)return ga(t,new ci.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);t.files.insertOne(r,{writeConcern:t.writeConcern,timeoutMS:n}).then(()=>{t.gridFSFile=r,e()},s=>ga(t,s,e));return}process.nextTick(e)}async function Fne(t){let e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);if(await t.files.findOne({},{projection:{_id:1},timeoutMS:e})!=null)return;let n={filename:1,uploadDate:1},s;e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`);let i={timeoutMode:e!=null?FB.CursorTimeoutMode.LIFETIME:void 0,timeoutMS:e};try{s=await t.files.listIndexes(i).toArray()}catch(u){if(u instanceof ci.MongoError&&u.code===ci.MONGODB_ERROR_CODES.NamespaceNotFound)s=[];else throw u}!!s.find(u=>Object.keys(u.key).length===2&&u.key.filename===1&&u.key.uploadDate===1)||(e=t.timeoutContext?.getRemainingTimeMSOrThrow(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),await t.files.createIndex(n,{background:!1,timeoutMS:e})),await Nne(t)}function Rne(t,e,r,n,s,i,o){let u={_id:t,length:e,chunkSize:r,uploadDate:new Date,filename:n};return s&&(u.contentType=s),i&&(u.aliases=i),o&&(u.metadata=o),u}function vne(t,e,r,n){if(Wm(t,n))return;let s=Buffer.isBuffer(e)?e:Buffer.from(e,r);if(t.length+=s.length,t.pos+s.length<t.chunkSizeBytes){s.copy(t.bufToStore,t.pos),t.pos+=s.length,process.nextTick(n);return}let i=s.length,o=t.chunkSizeBytes-t.pos,u=Math.min(o,s.length),a=0;for(;i>0;){let c=s.length-i;s.copy(t.bufToStore,t.pos,c,c+u),t.pos+=u,o-=u;let l;if(o===0){l=RB(t.id,t.n,Buffer.from(t.bufToStore));let h=t.timeoutContext?.remainingTimeMS;if(h!=null&&h<=0)return ga(t,new ci.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),n);if(++t.state.outstandingRequests,++a,Wm(t,n))return;t.chunks.insertOne(l,{writeConcern:t.writeConcern,timeoutMS:h}).then(()=>{--t.state.outstandingRequests,--a,a||BS(t,n)},f=>ga(t,f,n)),o=t.chunkSizeBytes,t.pos=0,++t.n}i-=u,u=Math.min(o,i)}}function $ne(t,e){if(t.pos===0)return BS(t,e);let r=Buffer.alloc(t.pos);t.bufToStore.copy(r,0,0,t.pos);let n=RB(t.id,t.n,r);if(Wm(t,e))return;let s=t.timeoutContext?.remainingTimeMS;if(s!=null&&s<=0)return ga(t,new ci.MongoOperationTimeoutError(`Upload timed out after ${t.timeoutContext?.timeoutMS}ms`),e);++t.state.outstandingRequests,t.chunks.insertOne(n,{writeConcern:t.writeConcern,timeoutMS:s}).then(()=>{--t.state.outstandingRequests,BS(t,e)},i=>ga(t,i,e))}function Wm(t,e){return t.state.aborted?(process.nextTick(e,new ci.MongoAPIError("Stream has been aborted")),!0):!1}});var kB=g(Km=>{"use strict";d();Object.defineProperty(Km,"__esModule",{value:!0});Km.GridFSBucket=void 0;var PS=Z(),xne=Hn(),vB=$r(),NS=ae(),kne=vr(),$B=DS(),xB=IS(),qne={bucketName:"fs",chunkSizeBytes:255*1024},Gm=class extends xne.TypedEventEmitter{constructor(e,r){super(),this.setMaxListeners(0);let n=(0,NS.resolveOptions)(e,{...qne,...r,writeConcern:kne.WriteConcern.fromOptions(r)});this.s={db:e,options:n,_chunksCollection:e.collection(n.bucketName+".chunks"),_filesCollection:e.collection(n.bucketName+".files"),checkedIndexes:!1,calledOpenUploadStream:!1}}openUploadStream(e,r){return new xB.GridFSBucketWriteStream(this,e,{timeoutMS:this.s.options.timeoutMS,...r})}openUploadStreamWithId(e,r,n){return new xB.GridFSBucketWriteStream(this,r,{timeoutMS:this.s.options.timeoutMS,...n,id:e})}openDownloadStream(e,r){return new $B.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{_id:e},{timeoutMS:this.s.options.timeoutMS,...r})}async delete(e,r){let{timeoutMS:n}=(0,NS.resolveOptions)(this.s.db,r),s;n&&(s=new vB.CSOTTimeoutContext({timeoutMS:n,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS}));let{deletedCount:i}=await this.s._filesCollection.deleteOne({_id:e},{timeoutMS:s?.remainingTimeMS}),o=s?.remainingTimeMS;if(o!=null&&o<=0)throw new PS.MongoOperationTimeoutError(`Timed out after ${n}ms`);if(await this.s._chunksCollection.deleteMany({files_id:e},{timeoutMS:o}),i===0)throw new PS.MongoRuntimeError(`File not found for id ${e}`)}find(e={},r={}){return this.s._filesCollection.find(e,r)}openDownloadStreamByName(e,r){let n={uploadDate:-1},s;return r&&r.revision!=null&&(r.revision>=0?(n={uploadDate:1},s=r.revision):s=-r.revision-1),new $B.GridFSBucketReadStream(this.s._chunksCollection,this.s._filesCollection,this.s.options.readPreference,{filename:e},{timeoutMS:this.s.options.timeoutMS,...r,sort:n,skip:s})}async rename(e,r,n){let s={_id:e},i={$set:{filename:r}},{matchedCount:o}=await this.s._filesCollection.updateOne(s,i,n);if(o===0)throw new PS.MongoRuntimeError(`File with id ${e} not found`)}async drop(e){let{timeoutMS:r}=(0,NS.resolveOptions)(this.s.db,e),n;if(r&&(n=new vB.CSOTTimeoutContext({timeoutMS:r,serverSelectionTimeoutMS:this.s.db.client.s.options.serverSelectionTimeoutMS})),n){await this.s._filesCollection.drop({timeoutMS:n.remainingTimeMS});let s=n.getRemainingTimeMSOrThrow(`Timed out after ${r}ms`);await this.s._chunksCollection.drop({timeoutMS:s})}else await this.s._filesCollection.drop(),await this.s._chunksCollection.drop()}};Km.GridFSBucket=Gm;Gm.INDEX="index"});var da=g(C=>{"use strict";d();Object.defineProperty(C,"__esModule",{value:!0});C.MongoServerError=C.MongoServerClosedError=C.MongoRuntimeError=C.MongoParseError=C.MongoOperationTimeoutError=C.MongoOIDCError=C.MongoNotConnectedError=C.MongoNetworkTimeoutError=C.MongoNetworkError=C.MongoMissingDependencyError=C.MongoMissingCredentialsError=C.MongoKerberosError=C.MongoInvalidArgumentError=C.MongoGridFSStreamError=C.MongoGridFSChunkError=C.MongoGCPError=C.MongoExpiredSessionError=C.MongoError=C.MongoDriverError=C.MongoDecompressionError=C.MongoCursorInUseError=C.MongoCursorExhaustedError=C.MongoCompatibilityError=C.MongoClientBulkWriteExecutionError=C.MongoClientBulkWriteError=C.MongoClientBulkWriteCursorError=C.MongoChangeStreamError=C.MongoBatchReExecutionError=C.MongoAzureError=C.MongoAWSError=C.MongoAPIError=C.ChangeStreamCursor=C.ClientEncryption=C.MongoBulkWriteError=C.UUID=C.Timestamp=C.ObjectId=C.MinKey=C.MaxKey=C.Long=C.Int32=C.Double=C.Decimal128=C.DBRef=C.Code=C.BSONType=C.BSONSymbol=C.BSONRegExp=C.Binary=C.BSON=void 0;C.ConnectionCheckedInEvent=C.CommandSucceededEvent=C.CommandStartedEvent=C.CommandFailedEvent=C.WriteConcern=C.ReadPreference=C.ReadConcern=C.TopologyType=C.ServerType=C.ReadPreferenceMode=C.ReadConcernLevel=C.ProfilingLevel=C.ReturnDocument=C.ServerApiVersion=C.ExplainVerbosity=C.MongoErrorLabel=C.CursorTimeoutMode=C.CURSOR_FLAGS=C.Compressor=C.AuthMechanism=C.GSSAPICanonicalizationValue=C.AutoEncryptionLoggerLevel=C.BatchType=C.UnorderedBulkOperation=C.OrderedBulkOperation=C.MongoClient=C.ListIndexesCursor=C.ListCollectionsCursor=C.GridFSBucketWriteStream=C.GridFSBucketReadStream=C.GridFSBucket=C.FindCursor=C.ExplainableCursor=C.Db=C.Collection=C.ClientSession=C.ChangeStream=C.CancellationToken=C.AggregationCursor=C.Admin=C.AbstractCursor=C.configureExplicitResourceManagement=C.MongoWriteConcernError=C.MongoUnexpectedServerResponseError=C.MongoTransactionError=C.MongoTopologyClosedError=C.MongoTailableCursorError=C.MongoSystemError=C.MongoStalePrimaryError=C.MongoServerSelectionError=void 0;C.MongoClientAuthProviders=C.MongoCryptKMSRequestNetworkTimeoutError=C.MongoCryptInvalidArgumentError=C.MongoCryptError=C.MongoCryptCreateEncryptedCollectionError=C.MongoCryptCreateDataKeyError=C.MongoCryptAzureKMSRequestError=C.SrvPollingEvent=C.WaitingForSuitableServerEvent=C.ServerSelectionSucceededEvent=C.ServerSelectionStartedEvent=C.ServerSelectionFailedEvent=C.ServerSelectionEvent=C.TopologyOpeningEvent=C.TopologyDescriptionChangedEvent=C.TopologyClosedEvent=C.ServerOpeningEvent=C.ServerHeartbeatSucceededEvent=C.ServerHeartbeatStartedEvent=C.ServerHeartbeatFailedEvent=C.ServerDescriptionChangedEvent=C.ServerClosedEvent=C.ConnectionReadyEvent=C.ConnectionPoolReadyEvent=C.ConnectionPoolMonitoringEvent=C.ConnectionPoolCreatedEvent=C.ConnectionPoolClosedEvent=C.ConnectionPoolClearedEvent=C.ConnectionCreatedEvent=C.ConnectionClosedEvent=C.ConnectionCheckOutStartedEvent=C.ConnectionCheckOutFailedEvent=C.ConnectionCheckedOutEvent=void 0;var Lne=S3();Object.defineProperty(C,"Admin",{enumerable:!0,get:function(){return Lne.Admin}});var jne=C_();Object.defineProperty(C,"OrderedBulkOperation",{enumerable:!0,get:function(){return jne.OrderedBulkOperation}});var Une=T_();Object.defineProperty(C,"UnorderedBulkOperation",{enumerable:!0,get:function(){return Une.UnorderedBulkOperation}});var Vne=Zu();Object.defineProperty(C,"ChangeStream",{enumerable:!0,get:function(){return Vne.ChangeStream}});var zne=Xu();Object.defineProperty(C,"Collection",{enumerable:!0,get:function(){return zne.Collection}});var Wne=qr();Object.defineProperty(C,"AbstractCursor",{enumerable:!0,get:function(){return Wne.AbstractCursor}});var Hne=O1();Object.defineProperty(C,"AggregationCursor",{enumerable:!0,get:function(){return Hne.AggregationCursor}});var Gne=q_();Object.defineProperty(C,"FindCursor",{enumerable:!0,get:function(){return Gne.FindCursor}});var Kne=f3();Object.defineProperty(C,"ListCollectionsCursor",{enumerable:!0,get:function(){return Kne.ListCollectionsCursor}});var Yne=V_();Object.defineProperty(C,"ListIndexesCursor",{enumerable:!0,get:function(){return Yne.ListIndexesCursor}});var Qne=Np();Object.defineProperty(C,"Db",{enumerable:!0,get:function(){return Qne.Db}});var Jne=Qu();Object.defineProperty(C,"ExplainableCursor",{enumerable:!0,get:function(){return Jne.ExplainableCursor}});var Xne=kB();Object.defineProperty(C,"GridFSBucket",{enumerable:!0,get:function(){return Xne.GridFSBucket}});var Zne=DS();Object.defineProperty(C,"GridFSBucketReadStream",{enumerable:!0,get:function(){return Zne.GridFSBucketReadStream}});var ese=IS();Object.defineProperty(C,"GridFSBucketWriteStream",{enumerable:!0,get:function(){return ese.GridFSBucketWriteStream}});var tse=Jo();Object.defineProperty(C,"MongoClient",{enumerable:!0,get:function(){return tse.MongoClient}});var rse=Hn();Object.defineProperty(C,"CancellationToken",{enumerable:!0,get:function(){return rse.CancellationToken}});var nse=qc();Object.defineProperty(C,"ClientSession",{enumerable:!0,get:function(){return nse.ClientSession}});var sse=Ue();Object.defineProperty(C,"BSON",{enumerable:!0,get:function(){return sse.BSON}});var cn=Ue();Object.defineProperty(C,"Binary",{enumerable:!0,get:function(){return cn.Binary}});Object.defineProperty(C,"BSONRegExp",{enumerable:!0,get:function(){return cn.BSONRegExp}});Object.defineProperty(C,"BSONSymbol",{enumerable:!0,get:function(){return cn.BSONSymbol}});Object.defineProperty(C,"BSONType",{enumerable:!0,get:function(){return cn.BSONType}});Object.defineProperty(C,"Code",{enumerable:!0,get:function(){return cn.Code}});Object.defineProperty(C,"DBRef",{enumerable:!0,get:function(){return cn.DBRef}});Object.defineProperty(C,"Decimal128",{enumerable:!0,get:function(){return cn.Decimal128}});Object.defineProperty(C,"Double",{enumerable:!0,get:function(){return cn.Double}});Object.defineProperty(C,"Int32",{enumerable:!0,get:function(){return cn.Int32}});Object.defineProperty(C,"Long",{enumerable:!0,get:function(){return cn.Long}});Object.defineProperty(C,"MaxKey",{enumerable:!0,get:function(){return cn.MaxKey}});Object.defineProperty(C,"MinKey",{enumerable:!0,get:function(){return cn.MinKey}});Object.defineProperty(C,"ObjectId",{enumerable:!0,get:function(){return cn.ObjectId}});Object.defineProperty(C,"Timestamp",{enumerable:!0,get:function(){return cn.Timestamp}});Object.defineProperty(C,"UUID",{enumerable:!0,get:function(){return cn.UUID}});var ise=A1();Object.defineProperty(C,"MongoBulkWriteError",{enumerable:!0,get:function(){return ise.MongoBulkWriteError}});var ose=p0();Object.defineProperty(C,"ClientEncryption",{enumerable:!0,get:function(){return ose.ClientEncryption}});var use=l3();Object.defineProperty(C,"ChangeStreamCursor",{enumerable:!0,get:function(){return use.ChangeStreamCursor}});var Fe=Z();Object.defineProperty(C,"MongoAPIError",{enumerable:!0,get:function(){return Fe.MongoAPIError}});Object.defineProperty(C,"MongoAWSError",{enumerable:!0,get:function(){return Fe.MongoAWSError}});Object.defineProperty(C,"MongoAzureError",{enumerable:!0,get:function(){return Fe.MongoAzureError}});Object.defineProperty(C,"MongoBatchReExecutionError",{enumerable:!0,get:function(){return Fe.MongoBatchReExecutionError}});Object.defineProperty(C,"MongoChangeStreamError",{enumerable:!0,get:function(){return Fe.MongoChangeStreamError}});Object.defineProperty(C,"MongoClientBulkWriteCursorError",{enumerable:!0,get:function(){return Fe.MongoClientBulkWriteCursorError}});Object.defineProperty(C,"MongoClientBulkWriteError",{enumerable:!0,get:function(){return Fe.MongoClientBulkWriteError}});Object.defineProperty(C,"MongoClientBulkWriteExecutionError",{enumerable:!0,get:function(){return Fe.MongoClientBulkWriteExecutionError}});Object.defineProperty(C,"MongoCompatibilityError",{enumerable:!0,get:function(){return Fe.MongoCompatibilityError}});Object.defineProperty(C,"MongoCursorExhaustedError",{enumerable:!0,get:function(){return Fe.MongoCursorExhaustedError}});Object.defineProperty(C,"MongoCursorInUseError",{enumerable:!0,get:function(){return Fe.MongoCursorInUseError}});Object.defineProperty(C,"MongoDecompressionError",{enumerable:!0,get:function(){return Fe.MongoDecompressionError}});Object.defineProperty(C,"MongoDriverError",{enumerable:!0,get:function(){return Fe.MongoDriverError}});Object.defineProperty(C,"MongoError",{enumerable:!0,get:function(){return Fe.MongoError}});Object.defineProperty(C,"MongoExpiredSessionError",{enumerable:!0,get:function(){return Fe.MongoExpiredSessionError}});Object.defineProperty(C,"MongoGCPError",{enumerable:!0,get:function(){return Fe.MongoGCPError}});Object.defineProperty(C,"MongoGridFSChunkError",{enumerable:!0,get:function(){return Fe.MongoGridFSChunkError}});Object.defineProperty(C,"MongoGridFSStreamError",{enumerable:!0,get:function(){return Fe.MongoGridFSStreamError}});Object.defineProperty(C,"MongoInvalidArgumentError",{enumerable:!0,get:function(){return Fe.MongoInvalidArgumentError}});Object.defineProperty(C,"MongoKerberosError",{enumerable:!0,get:function(){return Fe.MongoKerberosError}});Object.defineProperty(C,"MongoMissingCredentialsError",{enumerable:!0,get:function(){return Fe.MongoMissingCredentialsError}});Object.defineProperty(C,"MongoMissingDependencyError",{enumerable:!0,get:function(){return Fe.MongoMissingDependencyError}});Object.defineProperty(C,"MongoNetworkError",{enumerable:!0,get:function(){return Fe.MongoNetworkError}});Object.defineProperty(C,"MongoNetworkTimeoutError",{enumerable:!0,get:function(){return Fe.MongoNetworkTimeoutError}});Object.defineProperty(C,"MongoNotConnectedError",{enumerable:!0,get:function(){return Fe.MongoNotConnectedError}});Object.defineProperty(C,"MongoOIDCError",{enumerable:!0,get:function(){return Fe.MongoOIDCError}});Object.defineProperty(C,"MongoOperationTimeoutError",{enumerable:!0,get:function(){return Fe.MongoOperationTimeoutError}});Object.defineProperty(C,"MongoParseError",{enumerable:!0,get:function(){return Fe.MongoParseError}});Object.defineProperty(C,"MongoRuntimeError",{enumerable:!0,get:function(){return Fe.MongoRuntimeError}});Object.defineProperty(C,"MongoServerClosedError",{enumerable:!0,get:function(){return Fe.MongoServerClosedError}});Object.defineProperty(C,"MongoServerError",{enumerable:!0,get:function(){return Fe.MongoServerError}});Object.defineProperty(C,"MongoServerSelectionError",{enumerable:!0,get:function(){return Fe.MongoServerSelectionError}});Object.defineProperty(C,"MongoStalePrimaryError",{enumerable:!0,get:function(){return Fe.MongoStalePrimaryError}});Object.defineProperty(C,"MongoSystemError",{enumerable:!0,get:function(){return Fe.MongoSystemError}});Object.defineProperty(C,"MongoTailableCursorError",{enumerable:!0,get:function(){return Fe.MongoTailableCursorError}});Object.defineProperty(C,"MongoTopologyClosedError",{enumerable:!0,get:function(){return Fe.MongoTopologyClosedError}});Object.defineProperty(C,"MongoTransactionError",{enumerable:!0,get:function(){return Fe.MongoTransactionError}});Object.defineProperty(C,"MongoUnexpectedServerResponseError",{enumerable:!0,get:function(){return Fe.MongoUnexpectedServerResponseError}});Object.defineProperty(C,"MongoWriteConcernError",{enumerable:!0,get:function(){return Fe.MongoWriteConcernError}});var ase=cc();Object.defineProperty(C,"configureExplicitResourceManagement",{enumerable:!0,get:function(){return ase.configureExplicitResourceManagement}});var cse=A1();Object.defineProperty(C,"BatchType",{enumerable:!0,get:function(){return cse.BatchType}});var lse=K6();Object.defineProperty(C,"AutoEncryptionLoggerLevel",{enumerable:!0,get:function(){return lse.AutoEncryptionLoggerLevel}});var hse=zp();Object.defineProperty(C,"GSSAPICanonicalizationValue",{enumerable:!0,get:function(){return hse.GSSAPICanonicalizationValue}});var fse=Di();Object.defineProperty(C,"AuthMechanism",{enumerable:!0,get:function(){return fse.AuthMechanism}});var dse=q1();Object.defineProperty(C,"Compressor",{enumerable:!0,get:function(){return dse.Compressor}});var qB=qr();Object.defineProperty(C,"CURSOR_FLAGS",{enumerable:!0,get:function(){return qB.CURSOR_FLAGS}});Object.defineProperty(C,"CursorTimeoutMode",{enumerable:!0,get:function(){return qB.CursorTimeoutMode}});var pse=Z();Object.defineProperty(C,"MongoErrorLabel",{enumerable:!0,get:function(){return pse.MongoErrorLabel}});var mse=Qu();Object.defineProperty(C,"ExplainVerbosity",{enumerable:!0,get:function(){return mse.ExplainVerbosity}});var yse=Jo();Object.defineProperty(C,"ServerApiVersion",{enumerable:!0,get:function(){return yse.ServerApiVersion}});var gse=Y_();Object.defineProperty(C,"ReturnDocument",{enumerable:!0,get:function(){return gse.ReturnDocument}});var Ese=A3();Object.defineProperty(C,"ProfilingLevel",{enumerable:!0,get:function(){return Ese.ProfilingLevel}});var _se=ls();Object.defineProperty(C,"ReadConcernLevel",{enumerable:!0,get:function(){return _se.ReadConcernLevel}});var Ase=lr();Object.defineProperty(C,"ReadPreferenceMode",{enumerable:!0,get:function(){return Ase.ReadPreferenceMode}});var LB=Vn();Object.defineProperty(C,"ServerType",{enumerable:!0,get:function(){return LB.ServerType}});Object.defineProperty(C,"TopologyType",{enumerable:!0,get:function(){return LB.TopologyType}});var Sse=ls();Object.defineProperty(C,"ReadConcern",{enumerable:!0,get:function(){return Sse.ReadConcern}});var Ose=lr();Object.defineProperty(C,"ReadPreference",{enumerable:!0,get:function(){return Ose.ReadPreference}});var wse=vr();Object.defineProperty(C,"WriteConcern",{enumerable:!0,get:function(){return wse.WriteConcern}});var FS=yA();Object.defineProperty(C,"CommandFailedEvent",{enumerable:!0,get:function(){return FS.CommandFailedEvent}});Object.defineProperty(C,"CommandStartedEvent",{enumerable:!0,get:function(){return FS.CommandStartedEvent}});Object.defineProperty(C,"CommandSucceededEvent",{enumerable:!0,get:function(){return FS.CommandSucceededEvent}});var Bs=GA();Object.defineProperty(C,"ConnectionCheckedInEvent",{enumerable:!0,get:function(){return Bs.ConnectionCheckedInEvent}});Object.defineProperty(C,"ConnectionCheckedOutEvent",{enumerable:!0,get:function(){return Bs.ConnectionCheckedOutEvent}});Object.defineProperty(C,"ConnectionCheckOutFailedEvent",{enumerable:!0,get:function(){return Bs.ConnectionCheckOutFailedEvent}});Object.defineProperty(C,"ConnectionCheckOutStartedEvent",{enumerable:!0,get:function(){return Bs.ConnectionCheckOutStartedEvent}});Object.defineProperty(C,"ConnectionClosedEvent",{enumerable:!0,get:function(){return Bs.ConnectionClosedEvent}});Object.defineProperty(C,"ConnectionCreatedEvent",{enumerable:!0,get:function(){return Bs.ConnectionCreatedEvent}});Object.defineProperty(C,"ConnectionPoolClearedEvent",{enumerable:!0,get:function(){return Bs.ConnectionPoolClearedEvent}});Object.defineProperty(C,"ConnectionPoolClosedEvent",{enumerable:!0,get:function(){return Bs.ConnectionPoolClosedEvent}});Object.defineProperty(C,"ConnectionPoolCreatedEvent",{enumerable:!0,get:function(){return Bs.ConnectionPoolCreatedEvent}});Object.defineProperty(C,"ConnectionPoolMonitoringEvent",{enumerable:!0,get:function(){return Bs.ConnectionPoolMonitoringEvent}});Object.defineProperty(C,"ConnectionPoolReadyEvent",{enumerable:!0,get:function(){return Bs.ConnectionPoolReadyEvent}});Object.defineProperty(C,"ConnectionReadyEvent",{enumerable:!0,get:function(){return Bs.ConnectionReadyEvent}});var go=L0();Object.defineProperty(C,"ServerClosedEvent",{enumerable:!0,get:function(){return go.ServerClosedEvent}});Object.defineProperty(C,"ServerDescriptionChangedEvent",{enumerable:!0,get:function(){return go.ServerDescriptionChangedEvent}});Object.defineProperty(C,"ServerHeartbeatFailedEvent",{enumerable:!0,get:function(){return go.ServerHeartbeatFailedEvent}});Object.defineProperty(C,"ServerHeartbeatStartedEvent",{enumerable:!0,get:function(){return go.ServerHeartbeatStartedEvent}});Object.defineProperty(C,"ServerHeartbeatSucceededEvent",{enumerable:!0,get:function(){return go.ServerHeartbeatSucceededEvent}});Object.defineProperty(C,"ServerOpeningEvent",{enumerable:!0,get:function(){return go.ServerOpeningEvent}});Object.defineProperty(C,"TopologyClosedEvent",{enumerable:!0,get:function(){return go.TopologyClosedEvent}});Object.defineProperty(C,"TopologyDescriptionChangedEvent",{enumerable:!0,get:function(){return go.TopologyDescriptionChangedEvent}});Object.defineProperty(C,"TopologyOpeningEvent",{enumerable:!0,get:function(){return go.TopologyOpeningEvent}});var _h=cS();Object.defineProperty(C,"ServerSelectionEvent",{enumerable:!0,get:function(){return _h.ServerSelectionEvent}});Object.defineProperty(C,"ServerSelectionFailedEvent",{enumerable:!0,get:function(){return _h.ServerSelectionFailedEvent}});Object.defineProperty(C,"ServerSelectionStartedEvent",{enumerable:!0,get:function(){return _h.ServerSelectionStartedEvent}});Object.defineProperty(C,"ServerSelectionSucceededEvent",{enumerable:!0,get:function(){return _h.ServerSelectionSucceededEvent}});Object.defineProperty(C,"WaitingForSuitableServerEvent",{enumerable:!0,get:function(){return _h.WaitingForSuitableServerEvent}});var Cse=hS();Object.defineProperty(C,"SrvPollingEvent",{enumerable:!0,get:function(){return Cse.SrvPollingEvent}});var ll=Dc();Object.defineProperty(C,"MongoCryptAzureKMSRequestError",{enumerable:!0,get:function(){return ll.MongoCryptAzureKMSRequestError}});Object.defineProperty(C,"MongoCryptCreateDataKeyError",{enumerable:!0,get:function(){return ll.MongoCryptCreateDataKeyError}});Object.defineProperty(C,"MongoCryptCreateEncryptedCollectionError",{enumerable:!0,get:function(){return ll.MongoCryptCreateEncryptedCollectionError}});Object.defineProperty(C,"MongoCryptError",{enumerable:!0,get:function(){return ll.MongoCryptError}});Object.defineProperty(C,"MongoCryptInvalidArgumentError",{enumerable:!0,get:function(){return ll.MongoCryptInvalidArgumentError}});Object.defineProperty(C,"MongoCryptKMSRequestNetworkTimeoutError",{enumerable:!0,get:function(){return ll.MongoCryptKMSRequestNetworkTimeoutError}});var bse=K4();Object.defineProperty(C,"MongoClientAuthProviders",{enumerable:!0,get:function(){return bse.MongoClientAuthProviders}})});var fe=g(nr=>{"use strict";d();nr.arrayAtomicsBackupSymbol=Symbol("mongoose#Array#atomicsBackup");nr.arrayAtomicsSymbol=Symbol("mongoose#Array#_atomics");nr.arrayParentSymbol=Symbol("mongoose#Array#_parent");nr.arrayPathSymbol=Symbol("mongoose#Array#_path");nr.arraySchemaSymbol=Symbol("mongoose#Array#_schema");nr.documentArrayParent=Symbol("mongoose#documentArrayParent");nr.documentIsSelected=Symbol("mongoose#Document#isSelected");nr.documentIsModified=Symbol("mongoose#Document#isModified");nr.documentModifiedPaths=Symbol("mongoose#Document#modifiedPaths");nr.documentSchemaSymbol=Symbol("mongoose#Document#schema");nr.getSymbol=Symbol("mongoose#Document#get");nr.modelSymbol=Symbol("mongoose#Model");nr.objectIdSymbol=Symbol("mongoose#ObjectId");nr.populateModelSymbol=Symbol("mongoose#PopulateOptions#Model");nr.schemaTypeSymbol=Symbol("mongoose#schemaType");nr.sessionNewDocuments=Symbol("mongoose#ClientSession#newDocuments");nr.scopeSymbol=Symbol("mongoose#Document#scope");nr.validatorErrorSymbol=Symbol("mongoose#validatorError")});var Eo=g((X_e,jB)=>{"use strict";d();var Ah=cs().ObjectId,Tse=fe().objectIdSymbol;Object.defineProperty(Ah.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}});Ah.prototype.hasOwnProperty("valueOf")||(Ah.prototype.valueOf=function(){return this.toString()});Ah.prototype[Tse]=!0;jB.exports=Ah});var ln=g((e3e,UB)=>{"use strict";d();UB.exports=function(e){if(e!=null&&typeof e.constructor=="function")return e.constructor.name}});var li=g(VB=>{"use strict";d();VB.internalToObjectOptions={transform:!1,virtuals:!1,getters:!1,_skipDepopulateTopLevel:!0,depopulate:!0,flattenDecimals:!1,useProjection:!1,versionKey:!0,flattenObjectIds:!1}});var Ym=g((s3e,zB)=>{"use strict";d();zB.exports=cs().Decimal128});var Ea=g((o3e,WB)=>{"use strict";d();WB.exports=new Set(["__proto__","constructor","prototype"])});var Qm=g(HB=>{"use strict";d();HB.isMongooseArray=function(t){return Array.isArray(t)&&t.isMongooseArray}});var Sh=g((l3e,GB)=>{"use strict";d();var Dse=Qm().isMongooseArray;GB.exports=function(t){return t!=null&&(Dse(t)||t.$__!=null||t.isMongooseBuffer||t.$isMongooseMap)}});var RS=g((f3e,KB)=>{"use strict";d();var Mse=/^function\s*([^\s(]+)/;KB.exports=function(t){return t.name||(t.toString().trim().match(Mse)||[])[1]}});var Mr=g((p3e,YB)=>{"use strict";d();function Bse(t,e){return t!=null&&t._bsontype===e}YB.exports=Bse});var yu=g((y3e,QB)=>{"use strict";d();QB.exports=function(t){return Buffer.isBuffer(t)||Object.prototype.toString.call(t)==="[object Object]"}});var hl=g((E3e,JB)=>{"use strict";d();JB.exports=function(e){if(e==null||typeof e!="object")return!1;let r=Object.getPrototypeOf(e);return!r||r.constructor.name==="Object"}});var fl=g(vS=>{"use strict";d();var XB=Symbol("mongoose#trustedSymbol");vS.trustedSymbol=XB;vS.trusted=function(e){return e==null||typeof e!="object"||(e[XB]=!0),e}});var Bt=g((O3e,ZB)=>{"use strict";d();var Ise=Ym(),Pse=Eo(),Nse=Ea(),Fse=Sh(),Rse=RS(),$S=Mr(),vse=Qm().isMongooseArray,$se=yu(),xse=hl(),kse=fe(),xS=fl().trustedSymbol,qse=cs();function qS(t,e,r){if(t==null)return t;if($S(t,"Double"))return new qse.Double(t.value);if(typeof t=="number"||typeof t=="string"||typeof t=="boolean"||typeof t=="bigint")return t;if(Array.isArray(t))return Lse(vse(t)?t.__array:t,e);if(Fse(t)){if(e&&e.retainDocuments&&t.$__!=null){let o=t.$clone();return t.__index!=null&&(o.__index=t.__index),t.__parentArray!=null&&(o.__parentArray=t.__parentArray),o.$__parent=t.$__parent,o}let s=t.$isSingleNested;if(xse(t)&&t.$__!=null&&t._doc!=null)return t._doc;let i;return e&&e.json&&typeof t.toJSON=="function"?i=t.toJSON(e):i=t.toObject(e),e&&e.minimize&&!t.constructor.$__required&&s&&Object.keys(i).length===0?void 0:i}let n=t.constructor;if(n)switch(Rse(n)){case"Object":return kS(t,e,r);case"Date":return new n(+t);case"RegExp":return jse(t);default:break}return $S(t,"ObjectId")?e&&e.flattenObjectIds?t.toJSON():new Pse(t.id):$S(t,"Decimal128")?e&&e.flattenDecimals?t.toJSON():Ise.fromString(t.toString()):!n&&$se(t)?kS(t,e,r):typeof t=="object"&&t[kse.schemaTypeSymbol]?t.clone():e&&e.bson&&typeof t.toBSON=="function"?t:typeof t.valueOf=="function"?t.valueOf():kS(t,e,r)}ZB.exports=qS;function kS(t,e,r){let n=e&&e.minimize,s=e&&e.omitUndefined,i=e&&e._seen,o={},u;if(i&&i.has(t))return i.get(t);i&&i.set(t,o),xS in t&&(o[xS]=t[xS]);let a=Object.keys(t),c=a.length;for(let l=0;l<c;++l){let h=a[l];if(Nse.has(h))continue;let f=qS(t[h],e,!1);(n===!1||s)&&typeof f>"u"?delete o[h]:(n!==!0||typeof f<"u")&&(u||(u=!0),o[h]=f)}return n&&!r?u&&o:o}function Lse(t,e){let r=0,n=t.length,s=new Array(n);for(r=0;r<n;++r)s[r]=qS(t[r],e,!0);return s}function jse(t){let e=new RegExp(t.source,t.flags);return e.lastIndex!==t.lastIndex&&(e.lastIndex=t.lastIndex),e}});var rI=g((C3e,tI)=>{"use strict";d();var Jm=Q9(),LS=Ie(),jS=da().Collection,Use=Eo(),eI=ln(),Vse=li().internalToObjectOptions,zse=require("stream"),US=require("util");function hi(t,e,r){this.collection=null,this.Promise=r.Promise||Promise,this.modelName=r.modelName,delete r.modelName,this._closed=!1,Jm.apply(this,arguments)}Object.setPrototypeOf(hi.prototype,Jm.prototype);hi.prototype.onOpen=function(){return this.collection=this.conn.db.collection(this.name),Jm.prototype.onOpen.call(this),this.collection};hi.prototype.onClose=function(t){Jm.prototype.onClose.call(this,t)};hi.prototype._getCollection=function(){return this.collection?this.collection:this.conn.db!=null?(this.collection=this.conn.db.collection(this.name),this.collection):null};var Oh={watch:!0,find:!0,aggregate:!0};function Wse(t){hi.prototype[t]=function(){let e=this._getCollection(),r=Array.from(arguments),n=this,s=n&&n.conn&&n.conn.base&&n.conn.base.options&&n.conn.base.options.debug,i=n&&n.conn&&n.conn.options&&n.conn.options.debug,o=i??s,u=arguments[arguments.length-1],a=new Use;if(this.conn.$wasForceClosed){let h=new LS("Connection was force closed");if(r.length>0&&typeof r[r.length-1]=="function"){r[r.length-1](h);return}else throw h}let c=r,l=null;if(this._shouldBufferCommands()&&this.buffer){this.conn.emit("buffer",{_id:a,modelName:n.modelName,collectionName:n.name,method:t,args:r});let h,f=r,p=null,m=null;Oh[t]&&typeof u=="function"?(this.addQueue(t,f),h=u):Oh[t]?p=new this.Promise((A,S)=>{h=function(D,b){if(m!=null&&clearTimeout(m),D!=null)return S(D);A(b)},f=r.concat([h]),this.addQueue(t,f)}):typeof u=="function"?(h=function(){return m!=null&&clearTimeout(m),u.apply(this,arguments)},f=r.slice(0,r.length-1).concat([h])):p=new Promise((A,S)=>{h=function(D,b){if(m!=null&&clearTimeout(m),D!=null)return S(D);A(b)},f=r.concat([h]),this.addQueue(t,f)});let y=this._getBufferTimeoutMS();if(m=setTimeout(()=>{if(this.removeQueue(t,f)){let S="Operation `"+this.name+"."+t+"()` buffering timed out after "+y+"ms",O=new LS(S);this.conn.emit("buffer-end",{_id:a,modelName:n.modelName,collectionName:n.name,method:t,error:O}),h(O)}},y),!Oh[t]&&typeof u=="function"){this.addQueue(t,f);return}return p}else!Oh[t]&&typeof u=="function"&&(l=function(f,p){return f!=null?n.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:n.name,method:t,error:f}):n.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:n.name,method:t,result:p}),u.apply(this,arguments)},c=r.slice(0,r.length-1).concat([l]));if(o)if(typeof o=="function"){let h=null;typeof r[r.length-1]=="function"?h=r.slice(0,r.length-1):h=r,o.apply(n,[n.name,t].concat(h))}else if(o instanceof zse.Writable)this.$printToStream(n.name,t,r,o);else{let h=o.color==null?!0:o.color,f=o.shell==null?!1:o.shell;this.$print(n.name,t,r,h,f)}this.conn.emit("operation-start",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,params:c});try{if(e==null){let f="Cannot call `"+this.name+"."+t+"()` before initial connection is complete if `bufferCommands = false`. Make sure you `await mongoose.connect()` if you have `bufferCommands = false`.";throw new LS(f)}if(Oh[t]&&typeof u=="function"){let f=e[t].apply(e,c.slice(0,c.length-1));return this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,result:f}),u.call(this,null,f)}let h=e[t].apply(e,c);return h!=null&&typeof h.then=="function"?h.then(f=>(typeof u=="function"?u(null,f):this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,result:f}),f),f=>{if(typeof u=="function"){u(f);return}else this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,error:f});throw f}):h}catch(h){if(typeof u=="function")return u(h);throw this.conn.emit("operation-end",{_id:a,modelName:n.modelName,collectionName:this.name,method:t,error:h}),h}}}for(let t of Object.getOwnPropertyNames(jS.prototype))Object.getOwnPropertyDescriptor(jS.prototype,t).get===void 0&&typeof jS.prototype[t]=="function"&&Wse(t);hi.prototype.$print=function(t,e,r,n,s){let i=n?"\x1B[0;36mMongoose:\x1B[0m ":"Mongoose: ",o=[t,e].join("."),u=[];for(let c=r.length-1;c>=0;--c)(this.$format(r[c])||u.length)&&u.unshift(this.$format(r[c],n,s));let a="("+u.join(", ")+")";console.info(i+o+a)};hi.prototype.$printToStream=function(t,e,r,n){let s=[t,e].join("."),i=[];for(let u=r.length-1;u>=0;--u)(this.$format(r[u])||i.length)&&i.unshift(this.$format(r[u]));let o="("+i.join(", ")+")";n.write(s+o,"utf8")};hi.prototype.$format=function(t,e,r){let n=typeof t;return n==="function"||n==="undefined"?"":VS(t,!1,e,r)};function dl(t){let e={inspect:function(){return t}};return US.inspect.custom&&(e[US.inspect.custom]=e.inspect),e}function Hse(t){return VS(t,!0)}function Gse(t,e){t[e]=dl('ObjectId("'+t[e].toHexString()+'")')}function Kse(t,e,r){r?t[e]=dl('ISODate("'+t[e].toUTCString()+'")'):t[e]=dl('new Date("'+t[e].toUTCString()+'")')}function VS(t,e,r,n){if(t&&typeof t.toBSON=="function"&&(t=t.toBSON()),t==null)return t;let i=Bt()(t,Vse),o=eI(i);if(o==="Binary")i="BinData("+i.sub_type+', "'+i.toString("base64")+'")';else if(o==="ObjectId")i=dl('ObjectId("'+i.toHexString()+'")');else if(o==="Date")i=dl('new Date("'+i.toUTCString()+'")');else if(o==="Object"){let u=Object.keys(i),a=u.length,c;for(let l=0;l<a;++l)if(c=u[l],i[c]){let h;if(typeof i[c].toBSON=="function")try{i[c]=i[c].toBSON()}catch(p){h=p}let f=eI(i[c]);if(f==="Binary")i[c]="BinData("+i[c].sub_type+', "'+i[c].buffer.toString("base64")+'")';else if(f==="Object")i[c]=VS(i[c],!0);else if(f==="ObjectId")Gse(i,c);else if(f==="Date")Kse(i,c,n);else if(f==="ClientSession")i[c]=dl('ClientSession("'+(i[c]&&i[c].id&&i[c].id.id&&i[c].id.id.buffer||"").toString("hex")+'")');else if(Array.isArray(i[c]))i[c]=i[c].map(Hse);else if(h!=null)throw h}}return e?i:US.inspect(i,!1,10,r).replace(/\n/g,"").replace(/\s{2,}/g," ")}hi.prototype.getIndexes=hi.prototype.indexInformation;tI.exports=hi});var WS=g((T3e,sI)=>{"use strict";d();var Yse=require("events").EventEmitter,wh=Ie();var nI=["close","change","end","error","resumeTokenChanged"];var zS=class extends Yse{constructor(e,r,n){if(super(),this.driverChangeStream=null,this.closed=!1,this.bindedEvents=!1,this.pipeline=r,this.options=n,this.errored=!1,n&&n.hydrate&&!n.model)throw new Error("Cannot create change stream with `hydrate: true` unless calling `Model.watch()`");let s=null;if(this.$driverChangeStreamPromise=new Promise((i,o)=>{try{e((u,a)=>{if(u!=null)return this.errored=!0,this.emit("error",u),o(u);this.driverChangeStream=a,this.emit("ready"),i()})}catch(u){s=u,this.errored=!0,this.emit("error",u),o(u)}}),s!=null)throw s}_bindEvents(){if(!this.bindedEvents){if(this.bindedEvents=!0,this.driverChangeStream==null){this.$driverChangeStreamPromise.then(()=>{this.driverChangeStream.on("close",()=>{this.closed=!0}),nI.forEach(e=>{this.driverChangeStream.on(e,r=>{r!=null&&r.fullDocument!=null&&this.options&&this.options.hydrate&&(r.fullDocument=this.options.model.hydrate(r.fullDocument)),this.emit(e,r)})})},()=>{});return}this.driverChangeStream.on("close",()=>{this.closed=!0}),nI.forEach(e=>{this.driverChangeStream.on(e,r=>{r!=null&&r.fullDocument!=null&&this.options&&this.options.hydrate&&(r.fullDocument=this.options.model.hydrate(r.fullDocument)),this.emit(e,r)})})}}hasNext(e){if(this.errored)throw new wh("Cannot call hasNext() on errored ChangeStream");return this.driverChangeStream.hasNext(e)}next(e){if(this.errored)throw new wh("Cannot call next() on errored ChangeStream");if(this.options&&this.options.hydrate){if(e!=null){let n=e;e=(s,i)=>s!=null?n(s):(i.fullDocument!=null&&(i.fullDocument=this.options.model.hydrate(i.fullDocument)),n(null,i))}let r=this.driverChangeStream.next(e);return r&&typeof r.then=="function"&&(r=r.then(n=>(n.fullDocument!=null&&(n.fullDocument=this.options.model.hydrate(n.fullDocument)),n))),r}return this.driverChangeStream.next(e)}addListener(e,r){if(this.errored)throw new wh("Cannot call addListener() on errored ChangeStream");return this._bindEvents(),super.addListener(e,r)}on(e,r){if(this.errored)throw new wh("Cannot call on() on errored ChangeStream");return this._bindEvents(),super.on(e,r)}once(e,r){if(this.errored)throw new wh("Cannot call once() on errored ChangeStream");return this._bindEvents(),super.once(e,r)}_queue(e){this.once("ready",()=>e())}close(){return this.closed=!0,this.driverChangeStream?this.driverChangeStream.close():this.$driverChangeStreamPromise.then(()=>this.driverChangeStream.close(),()=>{})}};sI.exports=zS});var pl=g((M3e,uI)=>{"use strict";d();function Ze(){this._pres=new Map,this._posts=new Map}Ze.skipWrappedFunction=function(){if(!(this instanceof Ze.skipWrappedFunction))return new Ze.skipWrappedFunction(...arguments);this.args=[...arguments]};Ze.overwriteResult=function(){if(!(this instanceof Ze.overwriteResult))return new Ze.overwriteResult(...arguments);this.args=[...arguments]};Ze.prototype.execPre=function(t,e,r,n){arguments.length===3&&(n=r,r=[]);let s=this._pres.get(t)||[],i=s.length,o=s.numAsync||0,u=0,a=o,c=!1,l=r,h=null;if(!i)return bh(function(){n(null)});function f(){if(u>=i)return;let m=s[u];if(m.isAsync){let y=[Ch(p),Ch(function(A){if(A){if(c)return;if(A instanceof Ze.skipWrappedFunction)h=A;else return c=!0,n(A)}if(--a===0&&u>=i)return n(h)})];Xm(m.fn,e,y,y[0])}else if(m.fn.length>0){let y=[Ch(p)],A=arguments.length>=2?arguments:[null].concat(l);for(let S=1;S<A.length;++S)S===A.length-1&&typeof A[S]=="function"||y.push(A[S]);Xm(m.fn,e,y,y[0])}else{let y=null;try{y=m.fn.call(e)}catch(A){if(A!=null)return n(A)}if(Zm(y))y.then(()=>p(),A=>p(A));else{if(++u>=i)return a>0?void 0:bh(function(){n(h)});f()}}}f.apply(null,[null].concat(r));function p(m){if(m){if(c)return;if(m instanceof Ze.skipWrappedFunction)h=m;else return c=!0,n(m)}if(++u>=i)return a>0?void 0:n(h);f.apply(e,arguments)}};Ze.prototype.execPreSync=function(t,e,r){let n=this._pres.get(t)||[],s=n.length;for(let i=0;i<s;++i)n[i].fn.apply(e,r||[])};Ze.prototype.execPost=function(t,e,r,n,s){arguments.length<5&&(s=n,n=null);let i=this._posts.get(t)||[],o=i.length,u=0,a=null;if(n&&n.error&&(a=n.error),!o)return bh(function(){s.apply(null,[a].concat(r))});function c(){let l=i[u].fn,h=0,f=r.length,p=[];for(let m=0;m<f;++m)h+=r[m]&&r[m]._kareemIgnore?0:1,(!r[m]||!r[m]._kareemIgnore)&&p.push(r[m]);if(a)if(oI(i[u],h)){let m=Ch(function(y){if(y){if(y instanceof Ze.overwriteResult)return r=y.args,++u>=o?s.call(null,a):c();a=y}if(++u>=o)return s.call(null,a);c()});Xm(l,e,[a].concat(p).concat([m]),m)}else{if(++u>=o)return s.call(null,a);c()}else{let m=Ch(function(y){if(y)return y instanceof Ze.overwriteResult?(r=y.args,++u>=o?s.apply(null,[null].concat(r)):c()):(a=y,c());if(++u>=o)return s.apply(null,[null].concat(r));c()});if(oI(i[u],h))return++u>=o?s.apply(null,[null].concat(r)):c();if(l.length===h+1)Xm(l,e,p.concat([m]),m);else{let y,A;try{A=l.apply(e,p)}catch(S){y=S,a=S}if(Zm(A))return A.then(S=>{m(S instanceof Ze.overwriteResult?S:null)},S=>m(S));if(A instanceof Ze.overwriteResult&&(r=A.args),++u>=o)return s.apply(null,[y].concat(r));c()}}}c()};Ze.prototype.execPostSync=function(t,e,r){let n=this._posts.get(t)||[],s=n.length;for(let i=0;i<s;++i){let o=n[i].fn.apply(e,r||[]);o instanceof Ze.overwriteResult&&(r=o.args)}return r};Ze.prototype.createWrapperSync=function(t,e){let r=this;return function(){r.execPreSync(t,this,arguments);let s=e.apply(this,arguments);return r.execPostSync(t,this,[s])[0]}};function iI(t,e,r,n,s,i,o){return i.useErrorHandlers?t.execPost(r,n,s,{error:e},function(u){return typeof o=="function"&&o(u)}):typeof o=="function"&&o(e)}Ze.prototype.wrap=function(t,e,r,n,s){let i=n.length>0?n[n.length-1]:null,o=Array.from(n);typeof i=="function"&&o.pop();let u=this;s=s||{};let a=s.checkForPromise;this.execPre(t,r,n,function(c){if(c&&!(c instanceof Ze.skipWrappedFunction)){let p=s.numCallbackParams||0,m=s.contextParameter?[r]:[];for(let y=m.length;y<p;++y)m.push(null);return iI(u,c,t,r,m,s,i)}let l=e.length,h;if(c instanceof Ze.skipWrappedFunction)return h=c.args[0],f(null,...c.args);try{h=e.apply(r,o.concat(f))}catch(p){return f(p)}if(a){if(Zm(h))return h.then(p=>f(null,p),p=>f(p));if(l<o.length+1)return f(null,h)}function f(){let p=Array.from(arguments);if(p.shift(),s.nullResultByDefault&&p.length===0&&p.push(null),arguments[0])return iI(u,arguments[0],t,r,p,s,i);u.execPost(t,r,p,function(){i!==null&&(arguments[0]?i(arguments[0]):i.apply(r,arguments))})}})};Ze.prototype.filter=function(t){let e=this.clone(),r=Array.from(e._pres.keys());for(let s of r){let i=this._pres.get(s).map(o=>Object.assign({},o,{name:s})).filter(t);if(i.length===0){e._pres.delete(s);continue}i.numAsync=i.filter(o=>o.isAsync).length,e._pres.set(s,i)}let n=Array.from(e._posts.keys());for(let s of n){let i=this._posts.get(s).map(o=>Object.assign({},o,{name:s})).filter(t);if(i.length===0){e._posts.delete(s);continue}e._posts.set(s,i)}return e};Ze.prototype.hasHooks=function(t){return this._pres.has(t)||this._posts.has(t)};Ze.prototype.createWrapper=function(t,e,r,n){let s=this;return this.hasHooks(t)?function(){let i=r||this;s.wrap(t,e,i,Array.from(arguments),n)}:function(){bh(()=>e.apply(this,arguments))}};Ze.prototype.pre=function(t,e,r,n,s){let i={};typeof e=="object"&&e!==null?(i=e,e=i.isAsync):typeof arguments[1]!="boolean"&&(r=e,e=!1);let o=this._pres.get(t)||[];if(this._pres.set(t,o),e&&(o.numAsync=o.numAsync||0,++o.numAsync),typeof r!="function")throw new Error('pre() requires a function, got "'+typeof r+'"');return s?o.unshift(Object.assign({},i,{fn:r,isAsync:e})):o.push(Object.assign({},i,{fn:r,isAsync:e})),this};Ze.prototype.post=function(t,e,r,n){let s=this._posts.get(t)||[];if(typeof e=="function"&&(n=!!r,r=e,e={}),typeof r!="function")throw new Error('post() requires a function, got "'+typeof r+'"');return n?s.unshift(Object.assign({},e,{fn:r})):s.push(Object.assign({},e,{fn:r})),this._posts.set(t,s),this};Ze.prototype.clone=function(){let t=new Ze;for(let e of this._pres.keys()){let r=this._pres.get(e).slice();r.numAsync=this._pres.get(e).numAsync,t._pres.set(e,r)}for(let e of this._posts.keys())t._posts.set(e,this._posts.get(e).slice());return t};Ze.prototype.merge=function(t,e){e=arguments.length===1?!0:e;let r=e?this.clone():this;for(let n of t._pres.keys()){let s=r._pres.get(n)||[],i=t._pres.get(n).filter(u=>s.map(a=>a.fn).indexOf(u.fn)===-1),o=s.concat(i);o.numAsync=s.numAsync||0,o.numAsync+=i.filter(u=>u.isAsync).length,r._pres.set(n,o)}for(let n of t._posts.keys()){let s=r._posts.get(n)||[],i=t._posts.get(n).filter(o=>s.indexOf(o)===-1);r._posts.set(n,s.concat(i))}return r};function Xm(t,e,r,n){let s;try{s=t.apply(e,r)}catch(i){return n(i)}Zm(s)&&s.then(()=>n(),i=>n(i))}function Zm(t){return typeof t=="object"&&t!==null&&typeof t.then=="function"}function Ch(t){let e=!1,r=this;return function(){if(!e)return e=!0,bh(()=>t.apply(r,arguments))}}var bh=typeof process=="object"&&process!==null&&process.nextTick||function(e){setTimeout(e,0)};function oI(t,e){return t.errorHandler?!0:t.fn.length===e+2}uI.exports=Ze});var lI=g((aI,cI)=>{"use strict";d();var Hr=cI.exports=aI={};Hr.DocumentNotFoundError=null;Hr.general={};Hr.general.default="Validator failed for path `{PATH}` with value `{VALUE}`";Hr.general.required="Path `{PATH}` is required.";Hr.Number={};Hr.Number.min="Path `{PATH}` ({VALUE}) is less than minimum allowed value ({MIN}).";Hr.Number.max="Path `{PATH}` ({VALUE}) is more than maximum allowed value ({MAX}).";Hr.Number.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";Hr.Date={};Hr.Date.min="Path `{PATH}` ({VALUE}) is before minimum allowed value ({MIN}).";Hr.Date.max="Path `{PATH}` ({VALUE}) is after maximum allowed value ({MAX}).";Hr.String={};Hr.String.enum="`{VALUE}` is not a valid enum value for path `{PATH}`.";Hr.String.match="Path `{PATH}` is invalid ({VALUE}).";Hr.String.minlength="Path `{PATH}` (`{VALUE}`) is shorter than the minimum allowed length ({MINLENGTH}).";Hr.String.maxlength="Path `{PATH}` (`{VALUE}`) is longer than the maximum allowed length ({MAXLENGTH})."});var ty=g((P3e,fI)=>{"use strict";d();var hI=Ie(),Qse=require("util"),ey=class extends hI{constructor(e,r,n,s){let i,o=hI.messages;o.DocumentNotFoundError!=null?i=typeof o.DocumentNotFoundError=="function"?o.DocumentNotFoundError(e,r):o.DocumentNotFoundError:i='No document found for query "'+Qse.inspect(e)+'" on model "'+r+'"',super(i),this.result=s,this.numAffected=n,this.filter=e,this.query=e}};Object.defineProperty(ey.prototype,"name",{value:"DocumentNotFoundError"});fI.exports=ey});var Gr=g((F3e,mI)=>{"use strict";d();var Jse=Ie(),Xse=require("util"),ry=class extends Jse{constructor(e,r,n,s,i){if(arguments.length>0){let o=dI(r),u=pI(i),a=HS(null,e,r,n,u,o,s);super(a),this.init(e,r,n,s,i)}else super(HS())}toJSON(){return{stringValue:this.stringValue,valueType:this.valueType,kind:this.kind,value:this.value,path:this.path,reason:this.reason,name:this.name,message:this.message}}init(e,r,n,s,i){this.stringValue=GS(r),this.messageFormat=pI(i),this.kind=e,this.value=r,this.path=n,this.reason=s,this.valueType=dI(r)}copy(e){this.messageFormat=e.messageFormat,this.stringValue=e.stringValue,this.kind=e.kind,this.value=e.value,this.path=e.path,this.reason=e.reason,this.message=e.message,this.valueType=e.valueType}setModel(e){this.message=HS(e,this.kind,this.value,this.path,this.messageFormat,this.valueType)}};Object.defineProperty(ry.prototype,"name",{value:"CastError"});function GS(t){let e=Xse.inspect(t);return e=e.replace(/^'|'$/g,'"'),e.startsWith('"')||(e='"'+e+'"'),e}function dI(t){if(t==null)return""+t;let e=typeof t;return e!=="object"||typeof t.constructor!="function"?e:t.constructor.name}function pI(t){let e=t&&t._castErrorMessage||null;if(typeof e=="string"||typeof e=="function")return e}function HS(t,e,r,n,s,i,o){if(typeof s=="string"){let u=GS(r),a=s.replace("{KIND}",e).replace("{VALUE}",u).replace("{PATH}",n);return t!=null&&(a=a.replace("{MODEL}",t.modelName)),a}else{if(typeof s=="function")return s(r,n,t,e);{let u=GS(r),a=i?" (type "+i+")":"",c="Cast to "+e+" failed for value "+u+a+' at path "'+n+'"';return t!=null&&(c+=' for model "'+t.modelName+'"'),o!=null&&typeof o.constructor=="function"&&o.constructor.name!=="AssertionError"&&o.constructor.name!=="Error"&&(c+=' because of "'+o.constructor.name+'"'),c}}}mI.exports=ry});var KS=g((v3e,yI)=>{"use strict";d();yI.exports=function(e){let r=Object.keys(e.errors||{}),n=r.length,s=[],i;for(let o=0;o<n;++o)i=r[o],e!==e.errors[i]&&s.push(i+": "+e.errors[i].message);return s.join(", ")}});var Aa=g((x3e,_I)=>{"use strict";d();var Zse=Ie(),eie=ln(),gI=require("util"),EI=KS(),_a=class t extends Zse{constructor(e){let r;eie(e)==="model"?r=e.constructor.modelName+" validation failed":r="Validation failed",super(r),this.errors={},this._message=r,e&&(e.$errors=this.errors)}toString(){return this.name+": "+EI(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(e,r){if(r instanceof t){let{errors:n}=r;for(let s of Object.keys(n))this.addError(`${e}.${s}`,n[s]);return}this.errors[e]=r,this.message=this._message+": "+EI(this)}};gI.inspect.custom&&(_a.prototype[gI.inspect.custom]=_a.prototype.inspect);Object.defineProperty(_a.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(_a.prototype,"name",{value:"ValidationError"});_I.exports=_a});var YS=g((q3e,OI)=>{"use strict";d();var AI=Ie(),ml=class extends AI{constructor(e,r){let n=e.message;n||(n=AI.messages.general.default);let s=SI(n,e,r);super(s),e=Object.assign({},e,{message:s}),this.properties=e,this.kind=e.type,this.path=e.path,this.value=e.value,this.reason=e.reason}toString(){return this.message}toJSON(){return Object.assign({name:this.name,message:this.message},this)}};Object.defineProperty(ml.prototype,"name",{value:"ValidatorError"});Object.defineProperty(ml.prototype,"properties",{enumerable:!1,writable:!0,value:null});ml.prototype.formatMessage=SI;function SI(t,e,r){if(typeof t=="function")return t(e,r);let n=Object.keys(e);for(let s of n)s!=="message"&&(t=t.replace("{"+s.toUpperCase()+"}",e[s]));return t}OI.exports=ml});var QS=g((j3e,wI)=>{"use strict";d();var tie=Ie(),ny=class extends tie{constructor(e,r,n){let s=n.join(", ");super('No matching document found for id "'+e._doc._id+'" version '+r+' modifiedPaths "'+s+'"'),this.version=r,this.modifiedPaths=n}};Object.defineProperty(ny.prototype,"name",{value:"VersionError"});wI.exports=ny});var JS=g((V3e,CI)=>{"use strict";d();var rie=Ie(),sy=class extends rie{constructor(e){super("Can't save() the same doc multiple times in parallel. Document: "+e._doc._id)}};Object.defineProperty(sy.prototype,"name",{value:"ParallelSaveError"});CI.exports=sy});var XS=g((W3e,bI)=>{"use strict";d();var nie=Ie(),iy=class extends nie{constructor(e){super("Cannot overwrite `"+e+"` model once compiled.")}};Object.defineProperty(iy.prototype,"name",{value:"OverwriteModelError"});bI.exports=iy});var DI=g((G3e,TI)=>{"use strict";d();var sie=Ie(),oy=class extends sie{constructor(e){let r=`Schema hasn't been registered for model "`+e+`".
Use mongoose.model(name, schema)`;super(r)}};Object.defineProperty(oy.prototype,"name",{value:"MissingSchemaError"});TI.exports=oy});var BI=g((Y3e,MI)=>{"use strict";d();var iie=ln();MI.exports=function(e){if(iie(e)!=="TopologyDescription")return!1;let r=Array.from(e.servers.values());return r.length>0&&r.every(n=>n.type==="Unknown")}});var PI=g((J3e,II)=>{"use strict";d();var oie=ln();II.exports=function(e){if(oie(e)!=="TopologyDescription"||e.servers.size===0)return!1;for(let r of e.servers.values())if(r.host.endsWith(".mongodb.net")===!1||r.port!==27017)return!1;return!0}});var FI=g((Z3e,NI)=>{"use strict";d();var uie=ln(),aie="Client network socket disconnected before secure TLS connection was established";NI.exports=function(e){if(uie(e)!=="TopologyDescription")return!1;let r=Array.from(e.servers.values());return r.length>0&&r.every(n=>n.error&&n.error.message.indexOf(aie)!==-1)}});var ZS=g((t6e,RI)=>{"use strict";d();var cie=Ie(),lie=BI(),hie=PI(),fie=FI();var die="Could not connect to any servers in your MongoDB Atlas cluster. One common reason is that you're trying to access the database from an IP that isn't whitelisted. Make sure your current IP address is on your Atlas cluster's IP whitelist: https://www.mongodb.com/docs/atlas/security-whitelist/",pie="Mongoose is connecting with SSL enabled, but the server is not accepting SSL connections. Please ensure that the MongoDB server you are connecting to is configured to accept SSL connections. Learn more: https://mongoosejs.com/docs/tutorials/ssl.html",uy=class extends cie{assimilateError(e){let r=e.reason;hie(r)&&lie(r)&&e.message.indexOf("bad auth")===-1&&e.message.indexOf("Authentication failed")===-1?this.message=die:fie(r)?this.message=pie:this.message=e.message;for(let s in e)s!=="name"&&(this[s]=e[s]);return this}};Object.defineProperty(uy.prototype,"name",{value:"MongooseServerSelectionError"});RI.exports=uy});var eO=g((n6e,vI)=>{"use strict";d();var mie=Ie(),ay=class extends mie{constructor(e){let r="For your own good, using `document.save()` to update an array which was selected using an $elemMatch projection OR populated using skip, limit, query conditions, or exclusion of the _id field when the operation results in a $pop or $set of the entire array is not supported. The following path(s) would have been modified unsafely:\n  "+e.join(`
  `)+`
Use Model.updateOne() to update these arrays instead.`;super(r)}};Object.defineProperty(ay.prototype,"name",{value:"DivergentArrayError"});vI.exports=ay});var gu=g((i6e,$I)=>{"use strict";d();var yie=Ie(),cy=class extends yie{constructor(e,r,n){r=r||"Field `"+e+"` is not in schema and strict mode is set to throw.",super(r),this.isImmutableError=!!n,this.path=e}};Object.defineProperty(cy.prototype,"name",{value:"StrictModeError"});$I.exports=cy});var tO=g((u6e,xI)=>{"use strict";d();var gie=Ie(),ly=class extends gie{constructor(e,r){r=r||"Cannot populate path `"+e+"` because it is not in your schema. Set the `strictPopulate` option to false to override.",super(r),this.path=e}};Object.defineProperty(ly.prototype,"name",{value:"StrictPopulateError"});xI.exports=ly});var Bn=g((kI,qI)=>{"use strict";d();var Kr=Ie();qI.exports=kI=Kr;Kr.messages=lI();Kr.Messages=Kr.messages;Kr.DocumentNotFoundError=ty();Kr.CastError=Gr();Kr.ValidationError=Aa();Kr.ValidatorError=YS();Kr.VersionError=QS();Kr.ParallelSaveError=JS();Kr.OverwriteModelError=XS();Kr.MissingSchemaError=DI();Kr.MongooseServerSelectionError=ZS();Kr.DivergentArrayError=eO();Kr.StrictModeError=gu();Kr.StrictPopulateError=tO()});var Is=g((l6e,LI)=>{"use strict";d();LI.exports=Object.freeze({enumerable:!0,configurable:!0,writable:!0,value:void 0})});var Xn=g((f6e,jI)=>{"use strict";d();var Eie=Bt(),Br=class{constructor(e){if(e==null)return this;Object.assign(this,Eie(e))}},In=Is();Object.defineProperty(Br.prototype,"type",In);Object.defineProperty(Br.prototype,"validate",In);Object.defineProperty(Br.prototype,"cast",In);Object.defineProperty(Br.prototype,"required",In);Object.defineProperty(Br.prototype,"default",In);Object.defineProperty(Br.prototype,"ref",In);Object.defineProperty(Br.prototype,"refPath",In);Object.defineProperty(Br.prototype,"select",In);Object.defineProperty(Br.prototype,"index",In);Object.defineProperty(Br.prototype,"unique",In);Object.defineProperty(Br.prototype,"immutable",In);Object.defineProperty(Br.prototype,"sparse",In);Object.defineProperty(Br.prototype,"text",In);Object.defineProperty(Br.prototype,"transform",In);jI.exports=Br});var hy=g((p6e,yl)=>{"use strict";d();var _ie=Gr();yl.exports=function(e,r){if(yl.exports.convertToTrue.has(e))return!0;if(yl.exports.convertToFalse.has(e))return!1;if(e==null)return e;throw new _ie("boolean",e,r)};yl.exports.convertToTrue=new Set([!0,"true",1,"1","yes"]);yl.exports.convertToFalse=new Set([!1,"false",0,"0","no"])});var fy=g((y6e,UI)=>{"use strict";d();var Aie=hy();UI.exports=function(t){let e=this!=null?this.path:null;return Aie(t,e)}});var rO=g((E6e,VI)=>{"use strict";d();VI.exports=function(t){if(Array.isArray(t)){if(!t.every(e=>typeof e=="number"||typeof e=="string"))throw new Error("$type array values must be strings or numbers");return t}if(typeof t!="number"&&typeof t!="string")throw new Error("$type parameter must be number, string, or array of numbers and strings");return t}});var WI=g((A6e,zI)=>{"use strict";d();var Sie=gu();zI.exports=function(t){t.$immutable?(t.$immutableSetter=Oie(t.path,t.options.immutable),t.set(t.$immutableSetter)):t.$immutableSetter&&(t.setters=t.setters.filter(e=>e!==t.$immutableSetter),delete t.$immutableSetter)};function Oie(t,e){return function(n,s,i,o){if(this==null||this.$__==null||this.isNew||o&&o.overwriteImmutable||!(typeof e=="function"?e.call(this,this):e))return n;let a=this.$__.priorDoc!=null?this.$__.priorDoc.$__getValue(t):this.$__getValue(t);if(this.$__.strictMode==="throw"&&n!==a)throw new Sie(t,"Path `"+t+"` is immutable and strict mode is set to throw.",!0);return a}}});var GI=g((O6e,HI)=>{"use strict";d();HI.exports=function(e){return typeof e=="function"&&e.constructor&&e.constructor.name==="AsyncFunction"}});var YI=g((C6e,KI)=>{"use strict";d();KI.exports=function(e){let r=Object.keys(e),n=!0;for(let s=0,i=r.length;s<i;++s)if(typeof e[r[s]]=="object"&&e[r[s]]!==null){n=!1;break}return n}});var nO=g((T6e,QI)=>{d();var gl=1e3,El=gl*60,_l=El*60,Sa=_l*24,wie=Sa*7,Cie=Sa*365.25;QI.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return bie(t);if(r==="number"&&isFinite(t))return e.long?Die(t):Tie(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function bie(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Cie;case"weeks":case"week":case"w":return r*wie;case"days":case"day":case"d":return r*Sa;case"hours":case"hour":case"hrs":case"hr":case"h":return r*_l;case"minutes":case"minute":case"mins":case"min":case"m":return r*El;case"seconds":case"second":case"secs":case"sec":case"s":return r*gl;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Tie(t){var e=Math.abs(t);return e>=Sa?Math.round(t/Sa)+"d":e>=_l?Math.round(t/_l)+"h":e>=El?Math.round(t/El)+"m":e>=gl?Math.round(t/gl)+"s":t+"ms"}function Die(t){var e=Math.abs(t);return e>=Sa?dy(t,e,Sa,"day"):e>=_l?dy(t,e,_l,"hour"):e>=El?dy(t,e,El,"minute"):e>=gl?dy(t,e,gl,"second"):t+" ms"}function dy(t,e,r,n){var s=e>=r*1.5;return Math.round(t/r)+" "+n+(s?"s":"")}});var XI=g((M6e,JI)=>{"use strict";d();JI.exports=function(e){let r=[],n="",s="DEFAULT";for(let i=0;i<e.length;++i)s==="IN_SQUARE_BRACKETS"&&!/\d/.test(e[i])&&e[i]!=="]"&&(s="DEFAULT",n=r[r.length-1]+"["+n,r.splice(r.length-1,1)),e[i]==="["?(s!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(r.push(n),n=""),s="IN_SQUARE_BRACKETS"):e[i]==="]"?s==="IN_SQUARE_BRACKETS"?(s="IMMEDIATELY_AFTER_SQUARE_BRACKETS",r.push(n),n=""):(s="DEFAULT",n+=e[i]):e[i]==="."?(s!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&(r.push(n),n=""),s="DEFAULT"):n+=e[i];return s!=="IMMEDIATELY_AFTER_SQUARE_BRACKETS"&&r.push(n),r}});var rP=g(_o=>{d();var Th=XI(),ZI=["__proto__","constructor","prototype"];_o.get=function(t,e,r,n){var s;typeof r=="function"&&(r.length<2?(n=r,r=void 0):(s=r,r=void 0)),n||(n=tP);var i=typeof t=="string"?Th(t):t;if(!Array.isArray(i))throw new TypeError("Invalid `path`. Must be either string or array");for(var o=e,u,a=0;a<i.length;++a){if(u=i[a],typeof i[a]!="string"&&typeof i[a]!="number")throw new TypeError("Each segment of path to `get()` must be a string or number, got "+typeof i[a]);if(Array.isArray(o)&&!/^\d+$/.test(u)){var c=i.slice(a);return[].concat(o).map(function(h){return h?_o.get(c,h,r||s,n):n(void 0)})}if(s)o=s(o,u);else{var l=r&&o[r]?o[r]:o;o=l instanceof Map?l.get(u):l[u]}if(!o)return n(o)}return n(o)};_o.has=function(t,e){var r=typeof t=="string"?Th(t):t;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var n=r.length,s=e,i=0;i<n;++i){if(typeof r[i]!="string"&&typeof r[i]!="number")throw new TypeError("Each segment of path to `has()` must be a string or number, got "+typeof r[i]);if(s==null||typeof s!="object"||!(r[i]in s))return!1;s=s[r[i]]}return!0};_o.unset=function(t,e){var r=typeof t=="string"?Th(t):t;if(!Array.isArray(r))throw new TypeError("Invalid `path`. Must be either string or array");for(var n=r.length,s=e,i=0;i<n;++i){if(s==null||typeof s!="object"||!(r[i]in s))return!1;if(typeof r[i]!="string"&&typeof r[i]!="number")throw new TypeError("Each segment of path to `unset()` must be a string or number, got "+typeof r[i]);if(ZI.indexOf(r[i])!==-1)return!1;if(i===n-1)return delete s[r[i]],!0;s=s instanceof Map?s.get(r[i]):s[r[i]]}return!0};_o.set=function(t,e,r,n,s,i){var o;typeof n=="function"&&(n.length<2?(s=n,n=void 0):(o=n,n=void 0)),s||(s=tP);var u=typeof t=="string"?Th(t):t;if(!Array.isArray(u))throw new TypeError("Invalid `path`. Must be either string or array");if(r!=null){for(var a=0;a<u.length;++a){if(typeof u[a]!="string"&&typeof u[a]!="number")throw new TypeError("Each segment of path to `set()` must be a string or number, got "+typeof u[a]);if(ZI.indexOf(u[a])!==-1)return}for(var c=i||/\$/.test(t)&&i!==!1,l=r,h,a=0,f=u.length-1;a<f;++a){if(h=u[a],h=="$"){if(a==f-1)break;continue}if(Array.isArray(l)&&!/^\d+$/.test(h)){var p=u.slice(a);if(!c&&Array.isArray(e))for(var m=0;m<l.length&&m<e.length;++m)_o.set(p,e[m],l[m],n||o,s,c);else for(var m=0;m<l.length;++m)_o.set(p,e,l[m],n||o,s,c);return}if(o)l=o(l,h);else{var y=n&&l[n]?l[n]:l;l=y instanceof Map?y.get(h):y[h]}if(!l)return}if(h=u[f],n&&l[n]&&(l=l[n]),Array.isArray(l)&&!/^\d+$/.test(h))if(!c&&Array.isArray(e))eP(l,e,h,o,n,s);else for(var m=0;m<l.length;++m){var A=l[m];A&&(o?o(A,h,s(e)):(A[n]&&(A=A[n]),A[h]=s(e)))}else o?o(l,h,s(e)):l instanceof Map?l.set(h,s(e)):l[h]=s(e)}};_o.stringToParts=Th;function eP(t,e,r,n,s,i){for(var o,u=0;u<t.length&&u<e.length;++u)o=t[u],Array.isArray(o)&&Array.isArray(e[u])?eP(o,e[u],r,n,s,i):o&&(n?n(o,r,i(e[u])):(o[s]&&(o=o[s]),o[r]=i(e[u])))}function tP(t){return t}});var Zn=g((nP,sP)=>{"use strict";d();sP.exports=nP=rP()});var iO=g((F6e,iP)=>{"use strict";d();var Mie=Bt(),sO=class{constructor(e){if(this._docs={},this._childDocs=[],e!=null&&(e=Mie(e),Object.assign(this,e),typeof e.subPopulate=="object"&&(this.populate=e.subPopulate),e.perDocumentLimit!=null&&e.limit!=null))throw new Error("Can not use `limit` and `perDocumentLimit` at the same time. Path: `"+e.path+"`.")}};iP.exports=sO});var uP=g(oP=>{"use strict";d();oP.isMongooseDocumentArray=function(t){return Array.isArray(t)&&t.isMongooseDocumentArray}});var py=g((x6e,aP)=>{"use strict";d();var Bie=os(),Al=Symbol("mongoose#emitted");aP.exports=function(e,r,n,s){if(typeof e=="function")try{return r(function(i){if(i!=null){n!=null&&n.listeners!=null&&n.listeners("error").length>0&&!i[Al]&&(i[Al]=!0,n.emit("error",i));try{e(i)}catch(o){return Bie(()=>{throw o})}return}e.apply(this,arguments)})}catch(i){return n!=null&&n.listeners!=null&&n.listeners("error").length>0&&!i[Al]&&(i[Al]=!0,n.emit("error",i)),e(i)}return s=s||global.Promise,new s((i,o)=>{r(function(u,a){if(u!=null)return n!=null&&n.listeners!=null&&n.listeners("error").length>0&&!u[Al]&&(u[Al]=!0,n.emit("error",u)),o(u);if(arguments.length>2)return i(Array.prototype.slice.call(arguments,1));i(a)})})}});var my=g((q6e,cP)=>{"use strict";d();cP.exports=function(e,r,n){let s=Object.keys(r.tree),i={};for(let o of s)n&&(e.paths[o]||e.nested[o]||e.singleNestedPaths[o])||(i[o]=r.tree[o]);e.options._isMerging=!0,e.add(i,null),delete e.options._isMerging,e.callQueue=e.callQueue.concat(r.callQueue),e.method(r.methods),e.static(r.statics);for(let[o,u]of Object.entries(r._userProvidedOptions))o in e._userProvidedOptions||e.set(o,u);for(let o in r.query)e.query[o]=r.query[o];for(let o in r.virtuals)e.virtuals[o]=r.virtuals[o].clone();e._indexes=e._indexes.concat(r._indexes||[]),e.s.hooks.merge(r.s.hooks,!1)}});var fP=g((lP,hP)=>{"use strict";d();var j6e=Ae(),Ps=hP.exports=lP=function(){};Ps.ctor=function(){let t=[...arguments],e=function(){Ps.apply(this,arguments),this.paths={},this.states={}};return e.prototype=new Ps,e.prototype.constructor=e,e.prototype.stateNames=t,t.forEach(function(r){e.prototype[r]=function(n){this._changeState(n,r)}}),e};Ps.prototype._changeState=function(e,r){let n=this.paths[e];if(n===r)return;let s=this.states[n];s&&delete s[e],this.paths[e]=r,this.states[r]=this.states[r]||{},this.states[r][e]=!0};Ps.prototype.clear=function(e){if(this.states[e]==null)return;let r=Object.keys(this.states[e]),n=r.length,s;for(;n--;)s=r[n],delete this.states[e][s],delete this.paths[s]};Ps.prototype.clearPath=function(e){let r=this.paths[e];r&&(delete this.paths[e],delete this.states[r][e])};Ps.prototype.getStatePaths=function(e){return this.states[e]!=null?this.states[e]:{}};Ps.prototype.some=function(){let e=this,r=arguments.length?arguments:this.stateNames;return Array.prototype.some.call(r,function(n){return e.states[n]==null?!1:Object.keys(e.states[n]).length})};Ps.prototype._iter=function(e){return function(){let r=[...arguments],n=r.pop();r.length||(r=this.stateNames);let s=this;return r.reduce(function(o,u){return s.states[u]==null?o:o.concat(Object.keys(s.states[u]))},[])[e](function(o,u,a){return n(o,u,a)})}};Ps.prototype.forEach=function(){return this.forEach=this._iter("forEach"),this.forEach.apply(this,arguments)};Ps.prototype.map=function(){return this.map=this._iter("map"),this.map.apply(this,arguments)};Ps.prototype.clone=function(){let e=new this.constructor;e.paths={...this.paths};for(let r of this.stateNames)r in this.states&&(e.states[r]=this.states[r]==null?this.states[r]:{...this.states[r]});return e}});var mP=g((dP,pP)=>{"use strict";d();var Iie=fP(),Pie=Iie.ctor("require","modify","init","default","ignore");pP.exports=dP=xt;function xt(){this.activePaths=new Pie}xt.prototype.strictMode=!0;xt.prototype.fullPath=void 0;xt.prototype.selected=void 0;xt.prototype.shardval=void 0;xt.prototype.saveError=void 0;xt.prototype.validationError=void 0;xt.prototype.adhocPaths=void 0;xt.prototype.removing=void 0;xt.prototype.inserting=void 0;xt.prototype.saving=void 0;xt.prototype.version=void 0;xt.prototype._id=void 0;xt.prototype.ownerDocument=void 0;xt.prototype.populate=void 0;xt.prototype.populated=void 0;xt.prototype.primitiveAtomics=void 0;xt.prototype.wasPopulated=!1;xt.prototype.scope=void 0;xt.prototype.session=null;xt.prototype.pathsToScopes=null;xt.prototype.cachedRequired=null});var Dh=g((z6e,EP)=>{"use strict";d();var oO=cs().Binary,yP=Ae();function Pn(t,e,r){let n=t;t==null&&(n=0);let s,i,o;Array.isArray(e)?(i=e[0],o=e[1]):s=e;let u;return typeof n=="number"||n instanceof Number?u=Buffer.alloc(n):u=Buffer.from(n,s,r),yP.decorate(u,Pn.mixin),u.isMongooseBuffer=!0,u[Pn.pathSymbol]=i,u[gP]=o,u._subtype=0,u}var Nie=Symbol.for("mongoose#Buffer#_path"),gP=Symbol.for("mongoose#Buffer#_parent");Pn.pathSymbol=Nie;Pn.mixin={_subtype:void 0,_markModified:function(){let t=this[gP];return t&&t.markModified(this[Pn.pathSymbol]),this},write:function(){let t=Buffer.prototype.write.apply(this,arguments);return t>0&&this._markModified(),t},copy:function(t){let e=Buffer.prototype.copy.apply(this,arguments);return t&&t.isMongooseBuffer&&t._markModified(),e}};yP.each(["writeUInt8","writeUInt16","writeUInt32","writeInt8","writeInt16","writeInt32","writeFloat","writeDouble","fill","utf8Write","binaryWrite","asciiWrite","set","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE"],function(t){Buffer.prototype[t]&&(Pn.mixin[t]=function(){let e=Buffer.prototype[t].apply(this,arguments);return this._markModified(),e})});Pn.mixin.toObject=function(t){let e=typeof t=="number"?t:this._subtype||0;return new oO(Buffer.from(this),e)};Pn.mixin.$toObject=Pn.mixin.toObject;Pn.mixin.toBSON=function(){return new oO(this,this._subtype||0)};Pn.mixin.equals=function(t){if(!Buffer.isBuffer(t)||this.length!==t.length)return!1;for(let e=0;e<this.length;++e)if(this[e]!==t[e])return!1;return!0};Pn.mixin.subtype=function(t){if(typeof t!="number")throw new TypeError("Invalid subtype. Expected a number");this._subtype!==t&&this._markModified(),this._subtype=t};Pn.Binary=oO;EP.exports=Pn});var Oa=g(uO=>{"use strict";d();uO.schemaMixedSymbol=Symbol.for("mongoose:schema_mixed");uO.builtInMiddleware=Symbol.for("mongoose:built-in-middleware")});var wa=g((K6e,_P)=>{"use strict";d();var yy=Jt(),Fie=Oa(),Rie=yu(),vie=Ae();function fi(t,e){if(e&&e.default){let r=e.default;Array.isArray(r)&&r.length===0?e.default=Array:!e.shared&&Rie(r)&&Object.keys(r).length===0&&(e.default=function(){return{}})}yy.call(this,t,e,"Mixed"),this[Fie.schemaMixedSymbol]=!0}fi.schemaName="Mixed";fi.defaultOptions={};fi.prototype=Object.create(yy.prototype);fi.prototype.constructor=fi;fi.get=yy.get;fi.set=yy.set;fi.setters=[];fi.prototype.cast=function(t){return t instanceof Error?vie.errorToPOJO(t):t};fi.prototype.castForQuery=function(t,e){return e};_P.exports=fi});var SP=g((J6e,AP)=>{"use strict";d();AP.exports=class{constructor(e,r,n){this.subdocSnapshot=e,this.activePaths=r,this.version=n}}});var aO=g((Z6e,OP)=>{"use strict";d();var $ie=Ie(),gy=class extends $ie{constructor(e,r){let n=Array.isArray(r)?"array":"primitive value";super("Tried to set nested object field `"+e+`\` to ${n} \``+r+"`"),this.path=e}};Object.defineProperty(gy.prototype,"name",{value:"ObjectExpectedError"});OP.exports=gy});var _y=g((tAe,wP)=>{"use strict";d();var xie=Ie(),Ey=class extends xie{constructor(e,r,n){super('Parameter "'+r+'" to '+n+'() must be an object, got "'+e.toString()+'" (type '+typeof e+")")}};Object.defineProperty(Ey.prototype,"name",{value:"ObjectParameterError"});wP.exports=Ey});var bP=g((nAe,CP)=>{"use strict";d();var kie=Ie(),Ay=class extends kie{constructor(e){super("Can't validate() the same doc multiple times in parallel. Document: "+e._doc._id)}};Object.defineProperty(Ay.prototype,"name",{value:"ParallelValidateError"});CP.exports=Ay});var cO=g((iAe,TP)=>{"use strict";d();TP.exports=function(e){let r={},n=Object.keys(e);for(let s of n){if(s.indexOf(".")===-1){r[s]=1;continue}let i=s.split("."),o=i[0];for(let u=0;u<i.length;++u)r[o]=1,u+1<i.length&&(o=o+"."+i[u+1])}return r}});var MP=g((uAe,DP)=>{"use strict";d();DP.exports=function(e){return e==null||typeof e!="object"?!1:e.$slice==null&&e.$elemMatch==null&&e.$meta==null&&e.$==null}});var Sy=g((cAe,BP)=>{"use strict";d();var qie=MP();BP.exports=function(e,r,n,s,i,o,u){let a=Object.keys(e.$__schema.paths),c=a.length,l=u&&u.skipParentChangeTracking;for(let h=0;h<c;++h){let f,p="",m=a[h];if(m==="_id"&&e.$__.skipId)continue;let y=e.$__schema.paths[m],A=y.splitPath(),S=A.length,O=!1,D=e._doc;for(let b=0;b<S&&D!=null;++b){let N=A[b];if(p+=(p.length?".":"")+N,n===!0){if(p in r)break}else if(n===!1&&r&&!O){let R=y.$isSingleNested||y.$isMongooseDocumentArray;if(p in r&&!qie(r[p])||b===S-1&&R&&s!=null&&s[p])O=!0;else if(s!=null&&!s[p])break}if(b===S-1){if(D[N]!==void 0)break;if(i!=null){if(typeof y.defaultValue=="function"){if(!y.defaultValue.$runBeforeSetters&&i||y.defaultValue.$runBeforeSetters&&!i)break}else if(!i)continue}if(o&&o[p])break;if(r&&n!==null){if(n===!0){if(m in r)continue;try{f=y.getDefault(e,!1)}catch(R){e.invalidate(m,R);break}typeof f<"u"&&(D[N]=f,lO(e,m,l))}else if(O){try{f=y.getDefault(e,!1)}catch(R){e.invalidate(m,R);break}typeof f<"u"&&(D[N]=f,lO(e,m,l))}}else{try{f=y.getDefault(e,!1)}catch(R){e.invalidate(m,R);break}typeof f<"u"&&(D[N]=f,lO(e,m,l))}}else D=D[N]}}};function lO(t,e,r){t.$__.activePaths.default(e),!r&&t.$isSubdocument&&t.$isSingleNested&&t.$parent()!=null&&t.$parent().$__.activePaths.default(t.$__pathRelativeToParent(e))}});var Oy=g((hAe,PP)=>{"use strict";d();PP.exports=function(e,r,n){n=n||{};let s=n.skipDocArrays,i=0;if(!e)return i;for(let o of Object.keys(e.$__.activePaths.getStatePaths("modify"))){if(s){let u=e.$__schema.path(o);if(u&&u.$isMongooseDocumentArray)continue}o.startsWith(r+".")&&(e.$__.activePaths.clearPath(o),++i,e.$isSubdocument&&IP(e,o))}return i};function IP(t,e,r=new Set){if(r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");let n=t.$parent(),s=t.$__pathRelativeToParent(void 0,!1)+"."+e;n.$__.activePaths.clearPath(s),n.$isSubdocument&&IP(n,s,r)}});var Cy=g(hO=>{"use strict";d();var Lie=Bt(),jie=fe().documentSchemaSymbol,Uie=li().internalToObjectOptions,Vie=Ae(),Sl,zie=fe().getSymbol,wy=fe().scopeSymbol,NP=Vie.isPOJO;hO.compile=FP;hO.defineKey=RP;var Wie=Object.freeze({minimize:!0,virtuals:!1,getters:!1,transform:!1}),Hie=Object.freeze({noDottedPath:!0});function FP(t,e,r,n){Sl=Sl||Nn();let s=n.typeKey;for(let i of Object.keys(t)){let o=t[i],a=NP(o)&&Object.keys(o).length>0&&(!o[s]||s==="type"&&NP(o.type)&&o.type.type)?o:null;RP({prop:i,subprops:a,prototype:e,prefix:r,options:n})}}function RP({prop:t,subprops:e,prototype:r,prefix:n,options:s}){Sl=Sl||Nn();let i=(n?n+".":"")+t;n=n||"";let o=n?Object.freeze({}):Hie;e?Object.defineProperty(r,t,{enumerable:!0,configurable:!0,get:function(){let u=this;if(this.$__.getters||(this.$__.getters={}),!this.$__.getters[i]){let a=Object.create(Sl.prototype,Gie(this));n||(a.$__[wy]=this),a.$__.nestedPath=i,Object.defineProperty(a,"schema",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(a,"$__schema",{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(a,jie,{enumerable:!1,configurable:!0,writable:!1,value:r.schema}),Object.defineProperty(a,"toObject",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Lie(u.get(i,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null}))}}),Object.defineProperty(a,"$__get",{enumerable:!1,configurable:!0,writable:!1,value:function(){return u.get(i,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toObject&&this.schema.options.toObject.virtuals||null})}}),Object.defineProperty(a,"toJSON",{enumerable:!1,configurable:!0,writable:!1,value:function(){return u.get(i,null,{virtuals:this&&this.schema&&this.schema.options&&this.schema.options.toJSON&&this.schema.options.toJSON.virtuals||null})}}),Object.defineProperty(a,"$__isNested",{enumerable:!1,configurable:!0,writable:!1,value:!0}),Object.defineProperty(a,"$isEmpty",{enumerable:!1,configurable:!0,writable:!1,value:function(){return Object.keys(this.get(i,null,Wie)||{}).length===0}}),Object.defineProperty(a,"$__parent",{enumerable:!1,configurable:!0,writable:!1,value:this}),FP(e,a,i,s),this.$__.getters[i]=a}return this.$__.getters[i]},set:function(u){u!=null&&u.$__isNested?u=u.$__get():u instanceof Sl&&!u.$__isNested&&(u=u.$toObject(Uie)),(this.$__[wy]||this).$set(i,u)}}):Object.defineProperty(r,t,{enumerable:!0,configurable:!0,get:function(){return this[zie].call(this.$__[wy]||this,i,null,o)},set:function(u){this.$set.call(this.$__[wy]||this,i,u)}})}function Gie(t){let e={};return Object.getOwnPropertyNames(t).forEach(function(r){["isNew","$__","$errors","errors","_doc","$locals","$op","__parentArray","__index","$isDocumentArrayElement"].indexOf(r)!==-1&&(e[r]=Object.getOwnPropertyDescriptor(t,r),e[r].enumerable=!1)}),e}});var $P=g((mAe,vP)=>{"use strict";d();vP.exports=function(e){return e==null?null:Object.keys(e)[0]}});var Ol=g(fO=>{"use strict";d();var Kie=cs().Binary,xP=Mr(),kP=Sh(),Yie=Bn(),Qie=require("util");fO.flatten=qP;fO.modifiedPaths=LP;function qP(t,e,r,n){let s;t&&kP(t)&&!Buffer.isBuffer(t)?s=Object.keys(t.toObject({transform:!1,virtuals:!1})||{}):s=Object.keys(t||{});let i=s.length,o={};e=e?e+".":"";for(let u=0;u<i;++u){let a=s[u],c=t[a];o[e+a]=c;let l=n&&n.path&&n.path(e+a),h=n&&n.nested&&n.nested[e+a];if(!(l&&l.instance==="Mixed")){if(jP(c)){if(r&&r.skipArrays&&Array.isArray(c))continue;let f=qP(c,e+a,r,n);for(let p in f)o[p]=f[p];Array.isArray(c)&&(o[e+a]=c)}if(h){let f=Object.keys(n.paths);for(let p of f)p.startsWith(e+a+".")&&!o.hasOwnProperty(p)&&(o[p]=void 0)}}}return o}function LP(t,e,r,n=null){if(t==null||typeof t!="object")return;if(n==null&&(n={raw:{update:t,path:e},trace:new WeakSet}),n.trace.has(t))throw new Yie(`a circular reference in the update value, updateValue:
${Qie.inspect(n.raw.update,{showHidden:!1,depth:1})}
updatePath: '${n.raw.path}'`);n.trace.add(t);let s=Object.keys(t||{}),i=s.length;r=r||{},e=e?e+".":"";for(let o=0;o<i;++o){let u=s[o],a=t[u],c=e+u;r[c]=!0,!Buffer.isBuffer(a)&&kP(a)&&(a=a.toObject({transform:!1,virtuals:!1})),jP(a)&&LP(a,e+u,r,n)}return n.trace.delete(t),r}function jP(t){return t&&typeof t=="object"&&!(t instanceof Date)&&!xP(t,"ObjectId")&&(!Array.isArray(t)||t.length!==0)&&!(t instanceof Buffer)&&!xP(t,"Decimal128")&&!(t instanceof Kie)}});var kt=g((_Ae,UP)=>{"use strict";d();UP.exports=function(e,r,n){let s,i=!1;if(typeof r=="string"){if(r.indexOf(".")===-1){let a=dO(e,r);return a??n}s=r.split(".")}else if(i=!0,s=r,s.length===1){let a=dO(e,s[0]);return a??n}let o=r,u=e;for(let a of s){if(u==null)return n;if(!i&&u[o]!=null)return u[o];u=dO(u,a),i||(o=o.substr(a.length+1))}return u??n};function dO(t,e){return t==null?t:t instanceof Map?t.get(e):t[e]}});var pO=g((SAe,zP)=>{"use strict";d();var VP=Mr();zP.exports=function(e,r){return typeof e=="string"&&typeof r=="string"||typeof e=="number"&&typeof r=="number"?e===r:VP(e,"ObjectId")&&VP(r,"ObjectId")?e.toString()===r.toString():!1}});var by=g((wAe,WP)=>{"use strict";d();var Jie=pO();WP.exports=function(e,r){if(e==null||e.discriminators==null)return null;for(let n of Object.keys(e.discriminators)){let s=e.discriminators[n];if(s.discriminatorMapping!=null&&Jie(s.discriminatorMapping.value,r))return s}return null}});var GP=g((bAe,HP)=>{"use strict";d();var Xie=kt(),Zie=by();HP.exports=function t(e,r,n){n=n||{};let s=n.typeOnly,i=Array.isArray(r)?r:r.indexOf(".")===-1?[r]:r.split("."),o=null,u="adhocOrUndefined",a=Zie(e.schema,e.get(e.schema.options.discriminatorKey))||e.schema;for(let c=0;c<i.length;++c){let l=i.slice(0,c+1).join(".");if(o=a.path(l),o==null){u="adhocOrUndefined";continue}if(o.instance==="Mixed")return s?"real":o;if(u=a.pathType(l),(o.$isSingleNested||o.$isMongooseDocumentArrayElement)&&o.schema.discriminators!=null){let h=o.schema.discriminators,f=e.get(l+"."+Xie(o,"schema.options.discriminatorKey"));if(f==null||h[f]==null)continue;let p=i.slice(c+1).join(".");return t(e.get(l),p,n)}}return s?u:o}});var YP=g((DAe,KP)=>{"use strict";d();var eoe=kt();KP.exports=function(e,r,n){let s=n!=null?Object.keys(eoe(e.tree,n,{})):Object.keys(e.tree),i=new Set(Object.keys(r)),o;if(i.size>1){o=new Set;for(let u of s)i.has(u)&&o.add(u);for(let u of i)o.has(u)||o.add(u);o=Array.from(o)}else o=Array.from(i);return o}});var JP=g((BAe,QP)=>{"use strict";d();QP.exports=function(e,r){if(r.length===1)return;let n=r[0],s;for(let i=0;i<r.length-1;++i){let o=e.path(n);o&&o.schema?(s=o.schema.options.strict,e=o.schema,n=o.$isMongooseDocumentArray&&!isNaN(r[i+1])?"":r[i+1]):n+=n.length?"."+r[i+1]:r[i+1]}return s}});var Ty=g((PAe,XP)=>{"use strict";d();var toe=Ae(),roe=new Set(["__index","__parentArray","_doc"]);XP.exports=function(e,r){if(toe.isPOJO(e)&&e.$__!=null&&e._doc!=null){if(r){let n={};for(let s of Object.keys(e))typeof s!="symbol"&&s[0]!=="$"&&(roe.has(s)||(n[s]=e[s]));return{...e._doc,...n}}return e._doc}return e}});var wl=g((FAe,ZP)=>{"use strict";d();ZP.exports=function(e){return e==null?!0:typeof e=="object"?!("$meta"in e)&&!("$slice"in e):!0}});var Cl=g((vAe,eN)=>{"use strict";d();var noe=wl(),soe=hl();eN.exports=function t(e){if(e==null)return null;let r=Object.keys(e),n=null;if(r.length===1&&r[0]==="_id")n=!e._id;else for(let s=0;s<r.length;++s){let i=r[s];if(i!=="_id"&&noe(e[i])&&(n=soe(e[i])?t(e[i])??n:!e[i],n!=null))break}return n}});var mO=g((xAe,tN)=>{"use strict";d();var ioe=wl();tN.exports=function(e,r){if(e==null)return!1;if(r==="_id")return e._id===0;let n=Object.keys(e),s=null;for(let i of n)if(ioe(e[i])){s=e[r]===1?"inclusive":"exclusive";break}return s==="inclusive"?e[r]!==1:s==="exclusive"?e[r]===0:!1}});var yO=g((qAe,rN)=>{"use strict";d();var ooe=Ae();rN.exports=function(e,r){if(e._doc._id==null||r==null||r.length===0)return;let n=String(e._doc._id);for(let s of r){if(s.isVirtual)continue;let o=s.path.split(".");for(let u=0;u<o.length-1;++u){let a=o.slice(0,u+1).join("."),c=o.slice(u+1).join("."),l=e.get(a);if(l!=null&&ooe.isMongooseDocumentArray(l)){for(let h=0;h<l.length;++h)l[h]&&l[h].populated(c,s._docs[n]==null?void 0:s._docs[n][h],s);break}}}}});var gO=g((jAe,sN)=>{"use strict";d();var{isPOJO:uoe}=Ae();sN.exports=nN;function nN(t){let e=Object.keys(t),r=e.length,n,s,i;for(;r--;){if(s=e[r],i=t[s],uoe(i)&&(t[s]=nN(i)),t[s]===void 0){delete t[s];continue}n=!0}return n?t:void 0}});var EO=g((VAe,iN)=>{"use strict";d();var aoe=/\./g;iN.exports=function(e){if(e.indexOf(".")===-1)return[e];let r=e.split(aoe),n=r.length,s=new Array(n),i="";for(let o=0;o<n;++o)i+=i.length!==0?"."+r[o]:r[o],s[o]=i;return s}});var uN=g((WAe,oN)=>{"use strict";d();oN.exports=function(e,r,n,s,i){let o=Object.keys(e).reduce((a,c)=>a||c.startsWith(r+"."),!1),u=r+"."+n.options.discriminatorKey;!o&&i.length===1&&i[0]===u&&s.splice(s.indexOf(u),1)}});var Ns=g((GAe,aN)=>{"use strict";d();var coe=pO();aN.exports=function(e,r){if(e==null)return null;for(let n of Object.keys(e)){let s=e[n];if(s.schema&&s.schema.discriminatorMapping&&coe(s.schema.discriminatorMapping.value,r))return s}return null}});var Dy=g((YAe,cN)=>{"use strict";d();cN.exports=function(e,r){let n=r.split("."),s="",i,o,u;for(let a=0;a<n.length;++a)if(s+=s.length?".":""+n[a],e[s]){for(o=Object.keys(e),u=o.length,i=0;i<u;++i)o[a].indexOf(s+".")===0&&o[a].indexOf(r);return!0}return!1}});var Mh=g(Ca=>{"use strict";d();var lN=iO(),loe=uN(),hN=kt(),hoe=Ns(),foe=wl(),doe=Bt(),poe=Dy();Ca.preparePopulationOptionsMQ=function(e,r){let n=e._mongooseOptions.populate,s=Object.keys(n).reduce((u,a)=>u.concat([n[a]]),[]);r.lean!=null&&s.filter(u=>(u&&u.options&&u.options.lean)==null).forEach(moe(r.lean));let i=e&&e.options&&e.options.session||null;i!=null&&s.forEach(u=>{if(u.options==null){u.options={session:i};return}"session"in u.options||(u.options.session=i)});let o=e._fieldsForExec();for(let u=0;u<s.length;++u)s[u]instanceof lN?s[u]=new lN({...s[u],_queryProjection:o,_localModel:e.model}):(s[u]._queryProjection=o,s[u]._localModel=e.model);return s};Ca.createModel=function(e,r,n,s,i){e.hooks.execPreSync("createModel",r);let o=e.schema?e.schema.discriminatorMapping:null,u=o&&o.isRoot?o.key:null,a=r[u];if(u&&a&&e.discriminators){let l=e.discriminators[a]||hoe(e.discriminators,a);if(l){let h=doe(s);return Ca.applyPaths(h,l.schema),new l(void 0,h,!0)}}let c={skipId:!0,isNew:!1,willInit:!0};return i!=null&&"defaults"in i&&(c.defaults=i.defaults),new e(void 0,n,c)};Ca.createModelAndInit=function(e,r,n,s,i,o,u){let a=o?{populated:o}:void 0,c=Ca.createModel(e,r,n,s,i);try{c.$init(r,a,u)}catch(l){u(l,c)}};Ca.applyPaths=function(e,r,n){let s,i,o=new Set;if(e){i=Object.keys(e);let f=[];for(let p=0;p<i.length;++p){let m=i[p];i[p][0]==="-"&&(delete e[m],m==="-_id"?e._id=0:f.push(m.slice(1)))}i=Object.keys(e);for(let p=0;p<i.length;++p){if(i[p][0]==="+")continue;let m=e[i[p]];if(foe(m)&&!(i[p]==="_id"&&i.length>1)&&!(i[p]===r.options.discriminatorKey&&i.length>1&&m!=null&&!m)){s=!m;break}}for(let p of f){let m=r.path(p);!m||!m.selected||s!==!1?(e[p]=0,s=!0):m&&m.selected&&s===!1&&o.add(p)}}let u=[],a=[],c=[];switch(l(r),s){case!0:for(let f of a)e[f]=0;break;case!1:r&&r.paths._id&&r.paths._id.options&&r.paths._id.options.select===!1&&(e._id=0);for(let f of u)o.has(f)||poe(e,f)||(e[f]=e[f]||1);break;case void 0:if(e==null)break;for(let f of Object.keys(e||{}))f.startsWith("+")&&delete e[f];for(let f of a)e[f]==null&&(e[f]=0);break}function l(f,p){if(p||(p=""),c.indexOf(f)!==-1)return[];c.push(f);let m=[];return f.eachPath(function(y,A){if(p&&(y=p+"."+y),A.$isSchemaMap||y.endsWith(".$*")){let O="+"+y,D=e&&O in e;A.options&&A.options.select===!1&&!D&&a.push(y);return}let S=h(y,A);if(S==null&&!Array.isArray(A)&&A.$isMongooseArray&&!A.$isMongooseDocumentArray&&(S=h(y,A.caster)),S!=null&&m.push(S),A.schema){let O=l(A.schema,y);s===!1&&loe(e,y,A.schema,u,O)}}),c.pop(),m}function h(f,p){if(e==null||typeof p.selected!="boolean")return;if(p.selected===!1&&e[f]){n&&(e[f]=0);return}if(!s&&p.selected&&f===r.options.discriminatorKey&&e[f]!=null&&!e[f]){delete e[f];return}if(s===!1&&p.selected&&e[f]!=null&&!e[f]){delete e[f];return}let m="+"+f;if(e&&m in e){delete e[m],s===!1&&i.length>1&&!~i.indexOf(f)&&!n?e[f]=1:s==null&&n&&p.selected===!1&&(e[f]=0);return}let A=f.split("."),S="";for(let O=0;O<A.length;++O)if(S+=S.length?"."+A[O]:A[O],a.indexOf(S)!==-1)return;if(!s&&(p&&p.options&&p.options.$skipDiscriminatorCheck)){let O="";for(let D=0;D<A.length;++D){O+=(O.length===0?"":".")+A[D];let b=hN(e,O,!1)||hN(e,O+".$",!1);if(b&&typeof b!="object")return}}return(p.selected?u:a).push(f),f}};function moe(t){return function(e){e.options||(e.options={}),t!=null&&Array.isArray(t.virtuals)&&(t=Object.assign({},t),t.virtuals=t.virtuals.filter(r=>typeof r=="string"&&r.startsWith(e.path+".")).map(r=>r.slice(e.path.length+1))),e.options.lean=t}}});var _O=g((ZAe,fN)=>{"use strict";d();function yoe(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}fN.exports=yoe});var pN=g((t4e,dN)=>{"use strict";d();dN.exports=function(e,r,n){let s=r[0],i=n,o=e;for(let u=0;u<r.length-1;++u){let a=i.path(s);if(a&&a.schema){let c=o.get(s);if(i=a.schema,s=r[u+1],Array.isArray(c)&&!isNaN(s)&&(c=c[s],s=""),c==null)break;o=c}else s+=s.length?"."+r[u+1]:r[u+1]}return o}});var My=g((n4e,yN)=>{"use strict";d();var Eu=Nn(),goe=os(),Eoe=li().internalToObjectOptions,mN=require("util"),_oe=Ae();yN.exports=at;function at(t,e,r,n,s){if(typeof n=="object"&&n!=null&&s==null&&(s=n,n=void 0),r!=null){let i={isNew:r.isNew};"defaults"in r.$__&&(i.defaults=r.$__.defaults),s=Object.assign(i,s)}s!=null&&s.path!=null&&(this.$basePath=s.path),Eu.call(this,t,e,n,s),delete this.$__.priorDoc}at.prototype=Object.create(Eu.prototype);Object.defineProperty(at.prototype,"$isSubdocument",{configurable:!1,writable:!1,value:!0});Object.defineProperty(at.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!0});at.prototype.toBSON=function(){return this.toObject(Eoe)};at.prototype.save=async function(e){return e=e||{},e.suppressWarning||_oe.warn("mongoose: calling `save()` on a subdoc does **not** save the document to MongoDB, it only runs save middleware. Use `subdoc.save({ suppressWarning: true })` to hide this warning if you're sure this behavior is right for your app."),new Promise((r,n)=>{this.$__save(s=>{if(s!=null)return n(s);r(this)})})};at.prototype.$__fullPath=function(t){return this.$__.fullPath||this.ownerDocument(),t?this.$__.fullPath+"."+t:this.$__.fullPath};at.prototype.$__pathRelativeToParent=function(t){return t==null?this.$basePath:[this.$basePath,t].join(".")};at.prototype.$__save=function(t){return goe(()=>t(null,this))};at.prototype.$isValid=function(t){let e=this.$parent(),r=this.$__pathRelativeToParent(t);return e!=null&&r!=null?e.$isValid(r):Eu.prototype.$isValid.call(this,t)};at.prototype.markModified=function(t){Eu.prototype.markModified.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);if(e==null||r==null)return;let n=this.$__pathRelativeToParent().replace(/\.$/,"");e.isDirectModified(n)||this.isNew||this.$__parent.markModified(r,this)};at.prototype.isModified=function(t,e,r){let n=this.$parent();return n!=null?(Array.isArray(t)||typeof t=="string"?(t=Array.isArray(t)?t:t.split(" "),t=t.map(s=>this.$__pathRelativeToParent(s)).filter(s=>s!=null)):t||(t=this.$__pathRelativeToParent()),n.$isModified(t,e,r)):Eu.prototype.isModified.call(this,t,e,r)};at.prototype.$markValid=function(t){Eu.prototype.$markValid.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);e!=null&&r!=null&&e.$markValid(r)};at.prototype.invalidate=function(t,e,r){Eu.prototype.invalidate.call(this,t,e,r);let n=this.$parent(),s=this.$__pathRelativeToParent(t);if(n!=null&&s!=null)n.invalidate(s,e,r);else if(e.kind==="cast"||e.name==="CastError"||s==null)throw e;return this.ownerDocument().$__.validationError};at.prototype.$ignore=function(t){Eu.prototype.$ignore.call(this,t);let e=this.$parent(),r=this.$__pathRelativeToParent(t);e!=null&&r!=null&&e.$ignore(r)};at.prototype.ownerDocument=function(){if(this.$__.ownerDocument)return this.$__.ownerDocument;let t=this,e=[],r=new Set([t]);for(;typeof t.$__pathRelativeToParent=="function";){e.unshift(t.$__pathRelativeToParent(void 0,!0));let n=t.$parent();if(n==null)break;if(t=n,r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");r.add(t)}return this.$__.fullPath=e.join("."),this.$__.ownerDocument=t,this.$__.ownerDocument};at.prototype.$__fullPathWithIndexes=function(){let t=this,e=[],r=new Set([t]);for(;typeof t.$__pathRelativeToParent=="function";){e.unshift(t.$__pathRelativeToParent(void 0,!1));let n=t.$parent();if(n==null)break;if(t=n,r.has(t))throw new Error("Infinite subdocument loop: subdoc with _id "+t._id+" is a parent of itself");r.add(t)}return e.join(".")};at.prototype.parent=function(){return this.$__parent};at.prototype.$parent=at.prototype.parent;at.prototype.$__deleteOne=function(t){if(t!=null)return t(null,this)};at.prototype.$__removeFromParent=function(){this.$__parent.set(this.$basePath,null)};at.prototype.deleteOne=function(t,e){if(typeof t=="function"&&(e=t,t=null),Aoe(this),!t||!t.noop){this.$__removeFromParent();let r=this.ownerDocument();r.$__.removedSubdocs=r.$__.removedSubdocs||[],r.$__.removedSubdocs.push(this)}return this.$__deleteOne(e)};at.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.nested.populate("path")`, use `doc.populate("nested.path")`')};at.prototype.inspect=function(){return this.toObject()};mN.inspect.custom&&(at.prototype[mN.inspect.custom]=at.prototype.inspect);function Aoe(t){let e=t.ownerDocument();function r(){e.$removeListener("save",r),e.$removeListener("deleteOne",r),t.emit("deleteOne",t),t.constructor.emit("deleteOne",t)}e.$on("save",r),e.$on("deleteOne",r)}});var bl=g((i4e,_N)=>{"use strict";d();var gN=require("events").EventEmitter,EN=My(),Soe=Ae(),Bh=fe().documentArrayParent;function Fn(t,e,r,n,s){Soe.isMongooseDocumentArray(e)?(this.__parentArray=e,this[Bh]=e.$parent()):(this.__parentArray=void 0,this[Bh]=void 0),this.$setIndex(s),this.$__parent=this[Bh];let i;typeof r=="object"&&r!=null?(i={isNew:!0,...r},r=void 0):i={isNew:!0},EN.call(this,t,n,this[Bh],r,i)}Fn.prototype=Object.create(EN.prototype);Fn.prototype.constructor=Fn;Object.defineProperty(Fn.prototype,"$isSingleNested",{configurable:!1,writable:!1,value:!1});Object.defineProperty(Fn.prototype,"$isDocumentArrayElement",{configurable:!1,writable:!1,value:!0});for(let t in gN.prototype)Fn[t]=gN.prototype[t];Fn.prototype.$setIndex=function(t){if(this.__index=t,this.$__!=null&&this.$__.validationError!=null){let e=Object.keys(this.$__.validationError.errors);for(let r of e)this.invalidate(r,this.$__.validationError.errors[r])}};Fn.prototype.populate=function(){throw new Error('Mongoose does not support calling populate() on nested docs. Instead of `doc.arr[0].populate("path")`, use `doc.populate("arr.0.path")`')};Fn.prototype.$__removeFromParent=function(){let t=this._doc._id;if(!t)throw new Error("For your own good, Mongoose does not know how to remove an ArraySubdocument that has no _id");this.__parentArray.pull({_id:t})};Fn.prototype.$__fullPath=function(t,e){return this.__index==null?null:(this.$__.fullPath||this.ownerDocument(),e?t?this.$__.fullPath+"."+t:this.$__.fullPath:t?this.$__.fullPath+"."+this.__index+"."+t:this.$__.fullPath+"."+this.__index)};Fn.prototype.$__pathRelativeToParent=function(t,e){return this.__index==null||!this.__parentArray||!this.__parentArray.$path?null:e?t==null?this.__parentArray.$path():this.__parentArray.$path()+"."+t:t==null?this.__parentArray.$path()+"."+this.__index:this.__parentArray.$path()+"."+this.__index+"."+t};Fn.prototype.$parent=function(){return this[Bh]};Fn.prototype.parentArray=function(){return this.__parentArray};_N.exports=Fn});var Py=g((u4e,DN)=>{"use strict";d();var OO=Nn(),AO=bl(),Ooe=Ie(),AN=Oy(),woe=Bt(),SN=li().internalToObjectOptions,CN=Zn(),Yr=Ae(),SO=Mr(),Ao=fe().arrayAtomicsSymbol,So=fe().arrayParentSymbol,Oo=fe().arrayPathSymbol,Rn=fe().arraySchemaSymbol,bN=fe().populateModelSymbol,Coe=Symbol("mongoose#Array#sliced"),ON=Array.prototype.push;var Iy={$__getAtomics(){let t=[],e=Object.keys(this[Ao]||{}),r=e.length,n=Object.assign({},SN,{_isNested:!0});if(r===0)return t[0]=["$set",this.toObject(n)],t;for(;r--;){let s=e[r],i=this[Ao][s];Yr.isMongooseObject(i)?i=i.toObject(n):Array.isArray(i)?i=this.toObject.call(i,n):i!=null&&Array.isArray(i.$each)?i.$each=this.toObject.call(i.$each,n):i!=null&&typeof i.valueOf=="function"&&(i=i.valueOf()),s==="$addToSet"&&(i={$each:i}),t.push([s,i])}return t},$atomics(){return this[Ao]},$parent(){return this[So]},$path(){return this[Oo]},$shift(){this._registerAtomic("$pop",-1),this._markModified();let t=this.__array;if(!t._shifted)return t._shifted=!0,[].shift.call(t)},$pop(){if(this._registerAtomic("$pop",1),this._markModified(),!this._popped)return this._popped=!0,[].pop.call(this)},$schema(){return this[Rn]},_cast(t){let e=!1,r,n=this[So];if(n&&(e=n.$populated(this[Oo],!0)),e&&t!==null&&t!==void 0){if(r=e.options[bN],r==null)throw new Ooe("No populated model found for path `"+this[Oo]+"`. This is likely a bug in Mongoose, please report an issue on github.com/Automattic/mongoose.");return(Buffer.isBuffer(t)||SO(t,"ObjectId")||!Yr.isObject(t))&&(t={_id:t}),t.schema&&t.schema.discriminatorMapping&&t.schema.discriminatorMapping.key!==void 0||(t=new r(t)),this[Rn].caster.applySetters(t,n,!0)}return this[Rn].caster.applySetters(t,n,!1)},_mapCast(t,e){return this._cast(t,this.length+e)},_markModified(t){let e=this[So],r;if(e){if(r=this[Oo],arguments.length&&(r=r+"."+t),r!=null&&r.endsWith(".$"))return this;e.markModified(r,arguments.length!==0?t:e)}return this},_registerAtomic(t,e){if(this[Coe])return;if(t==="$set")return this[Ao]={$set:e},AN(this[So],this[Oo]),this._markModified(),this;let r=this[Ao];if(t==="$pop"&&!("$pop"in r)){let s=this;this[So].once("save",function(){s._popped=s._shifted=null})}if(r.$set||Object.keys(r).length&&!(t in r))return this[Ao]={$set:this},this;let n;if(t==="$pullAll"||t==="$addToSet")r[t]||(r[t]=[]),r[t]=r[t].concat(e);else if(t==="$pullDocs"){let s=r.$pull||(r.$pull={});e[0]instanceof AO?(n=s.$or||(s.$or=[]),Array.prototype.push.apply(n,e.map(i=>i.toObject({transform:(o,u)=>(i==null||i.$__==null||Object.keys(i.$__.activePaths.getStatePaths("default")).forEach(a=>{CN.unset(a,u),TN(u,a)}),u),virtuals:!1})))):(n=s._id||(s._id={$in:[]}),n.$in=n.$in.concat(e))}else if(t==="$push")if(r.$push=r.$push||{$each:[]},e!=null&&Yr.hasUserDefinedProperty(e,"$each"))r.$push=e;else if(e.length===1)r.$push.$each.push(e[0]);else if(e.length<1e4)r.$push.$each.push(...e);else for(let s of e)r.$push.$each.push(s);else r[t]=e;return this},addToSet(){By(this,arguments),wN(this,arguments);let t=[].map.call(arguments,this._mapCast,this),e=[],r="";t[0]instanceof AO?r="doc":t[0]instanceof Date?r="date":SO(t[0],"ObjectId")&&(r="ObjectId");let n=Yr.isMongooseArray(t)?t.__array:t,s=Yr.isMongooseArray(this)?this.__array:this;return n.forEach(function(i){let o,u=+i;switch(r){case"doc":o=this.some(function(a){return a.equals(i)});break;case"date":o=this.some(function(a){return+a===u});break;case"ObjectId":o=this.find(a=>a.toString()===i.toString());break;default:o=~this.indexOf(i);break}o||(this._markModified(),s.push(i),this._registerAtomic("$addToSet",i),[].push.call(e,i))},this),e},hasAtomics(){return Yr.isPOJO(this[Ao])?Object.keys(this[Ao]).length:0},includes(t,e){return this.indexOf(t,e)!==-1},indexOf(t,e){SO(t,"ObjectId")&&(t=t.toString()),e=e??0;let r=this.length;for(let n=e;n<r;++n)if(t==this[n])return n;return-1},inspect(){return JSON.stringify(this)},nonAtomicPush(){let t=[].map.call(arguments,this._mapCast,this);this._markModified();let e=[].push.apply(this,t);return this._registerAtomic("$set",this),e},pop(){this._markModified();let t=[].pop.call(this);return this._registerAtomic("$set",this),t},pull(){let t=[].map.call(arguments,(s,i)=>this._cast(s,i,{defaults:!1}),this),e=this[So].get(this[Oo]);Yr.isMongooseArray(e)&&(e=e.__array);let r=e.length,n;for(this._markModified();r--;)n=e[r],n instanceof OO?t.some(function(i){return n.equals(i)})&&e.splice(r,1):~this.indexOf.call(t,n)&&e.splice(r,1);return t[0]instanceof AO?this._registerAtomic("$pullDocs",t.map(function(s){let i=s.$__getValue("_id");return i===void 0||s.$isDefault("_id")?s:i})):this._registerAtomic("$pullAll",t),AN(this[So],this[Oo])>0&&this._registerAtomic("$set",this),this},push(){let t=arguments,e=t,r=t[0]!=null&&Yr.hasUserDefinedProperty(t[0],"$each"),n=Yr.isMongooseArray(this)?this.__array:this;if(r&&(e=t[0],t=t[0].$each),this[Rn]==null)return ON.apply(this,t);By(this,t),wN(this,t),t=[].map.call(t,this._mapCast,this);let s,i=this[Ao];return this._markModified(),r?(e.$each=t,(i.$push&&i.$push.$each&&i.$push.$each.length||0)!==0&&i.$push.$position!=e.$position?(e.$position!=null?([].splice.apply(n,[e.$position,0].concat(t)),s=n.length):s=[].push.apply(n,t),this._registerAtomic("$set",this)):e.$position!=null?([].splice.apply(n,[e.$position,0].concat(t)),s=this.length):s=[].push.apply(n,t)):(e=t,s=ON.apply(n,t)),this._registerAtomic("$push",e),s},remove(){return this.pull.apply(this,arguments)},set(t,e,r){let n=this.__array;if(r)return n[t]=e,this;let s=Iy._cast.call(this,e,t);return Iy._markModified.call(this,t),n[t]=s,this},shift(){let t=Yr.isMongooseArray(this)?this.__array:this;this._markModified();let e=[].shift.call(t);return this._registerAtomic("$set",this),e},sort(){let t=Yr.isMongooseArray(this)?this.__array:this,e=[].sort.apply(t,arguments);return this._registerAtomic("$set",this),e},splice(){let t,e=Yr.isMongooseArray(this)?this.__array:this;if(this._markModified(),By(this,Array.prototype.slice.call(arguments,2)),arguments.length){let r;if(this[Rn]==null)r=arguments;else{r=[];for(let n=0;n<arguments.length;++n)r[n]=n<2?arguments[n]:this._cast(arguments[n],arguments[0]+(n-2))}t=[].splice.apply(e,r),this._registerAtomic("$set",this)}return t},toBSON(){return this.toObject(SN)},toObject(t){let e=Yr.isMongooseArray(this)?this.__array:this;return t&&t.depopulate?(t=woe(t),t._isNested=!0,[].concat(e).map(function(r){return r instanceof OO?r.toObject(t):r})):[].concat(e)},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},unshift(){By(this,arguments);let t;this[Rn]==null?t=arguments:t=[].map.call(arguments,this._cast,this);let e=Yr.isMongooseArray(this)?this.__array:this;return this._markModified(),[].unshift.apply(e,t),this._registerAtomic("$set",this),this.length}};function boe(t,e){if(!e)return!1;for(let r of t){if(r==null)return!1;let n=r.constructor;if(!(r instanceof OO)||n.modelName!==e&&n.baseModelName!==e)return!1}return!0}function TN(t,e,r){if(typeof e=="string"){if(e.indexOf(".")===-1)return;e=CN.stringToParts(e)}r=r||0,!(r>=e.length)&&(t==null||typeof t!="object"||(TN(t[e[0]],e,r+1),t[e[0]]!=null&&typeof t[e[0]]=="object"&&Object.keys(t[e[0]]).length===0&&delete t[e[0]]))}function By(t,e){let r=t==null?null:t[Rn]&&t[Rn].caster&&t[Rn].caster.options&&t[Rn].caster.options.ref||null;t.length===0&&e.length!==0&&boe(e,r)&&t[So].$populated(t[Oo],[],{[bN]:e[0].constructor})}function wN(t,e){let r=t==null?null:t[Rn]&&t[Rn].caster&&t[Rn].caster.options&&t[Rn].caster.options.ref||null,n=t[So],s=t[Oo];if(!(!r||!n.populated(s))){for(let i of e)if(i!=null&&(typeof i!="object"||i instanceof String||i instanceof Number||i instanceof Buffer||Yr.isMongooseType(i))){n.depopulate(s);break}}}var Toe=["filter","flat","flatMap","map","slice"];for(let t of Toe)Array.prototype[t]!=null&&(Iy[t]=function(){let e=Yr.isMongooseArray(this)?this.__array:this,r=[].concat(e);return r[t].apply(r,arguments)});DN.exports=Iy});var CO=g((NN,FN)=>{"use strict";d();var Doe=Nn(),wO=Py(),Ny=fe().arrayAtomicsSymbol,Moe=fe().arrayAtomicsBackupSymbol,MN=fe().arrayParentSymbol,Boe=fe().arrayPathSymbol,BN=fe().arraySchemaSymbol,IN=Array.prototype.push,PN=/^\d+$/;function Ioe(t,e,r,n){let s;if(Array.isArray(t)){let u=t.length;if(u===0)s=new Array;else if(u===1)s=new Array(1),s[0]=t[0];else if(u<1e4)s=new Array,IN.apply(s,t);else{s=new Array;for(let a=0;a<u;++a)IN.call(s,t[a])}}else s=[];let i={[Ny]:{},[Moe]:void 0,[Boe]:e,[BN]:n,[MN]:void 0,isMongooseArray:!0,isMongooseArrayProxy:!0,__array:s};t&&t[Ny]!=null&&(i[Ny]=t[Ny]),r!=null&&r instanceof Doe&&(i[MN]=r,i[BN]=n||r.schema.path(e));let o=new Proxy(s,{get:function(u,a){return i.hasOwnProperty(a)?i[a]:wO.hasOwnProperty(a)?wO[a]:n&&n.virtuals&&n.virtuals.hasOwnProperty(a)?n.virtuals[a].applyGetters(void 0,u):typeof a=="string"&&PN.test(a)&&n?.$embeddedSchemaType!=null?n.$embeddedSchemaType.applyGetters(s[a],r):s[a]},set:function(u,a,c){return typeof a=="string"&&PN.test(a)?wO.set.call(o,a,c,!1):i.hasOwnProperty(a)?i[a]=c:n&&n.virtuals&&n.virtuals.hasOwnProperty(a)?n.virtuals[a].applySetters(c,u):s[a]=c,!0}});return o}FN.exports=NN=Ioe});var TO=g((l4e,vN)=>{"use strict";d();var RN=Mr(),bO=Eo();vN.exports=function(e){if(e==null||RN(e,"ObjectId"))return e;if(e._id){if(RN(e._id,"ObjectId"))return e._id;if(e._id.toString instanceof Function)return new bO(e._id.toString())}return e.toString instanceof Function?new bO(e.toString()):new bO(e)}});var qN=g((f4e,kN)=>{"use strict";d();var Fy=Py(),Poe=Nn(),Noe=TO(),$N=Ns(),Foe=li().internalToObjectOptions,Ry=Ae(),DO=Mr(),$y=fe().arrayParentSymbol,BO=fe().arrayPathSymbol,MO=fe().arraySchemaSymbol,xN=fe().documentArrayParent,Roe=Array.prototype.toString,IO={toBSON(){return this.toObject(Foe)},toString(){return Roe.call(this.__array.map(t=>t!=null&&t.$__!=null?t.toString():t))},getArrayParent(){return this[$y]},_cast(t,e,r){if(this[MO]==null)return t;let n=this[MO].casterConstructor;if((n.$isMongooseDocumentArray?Ry.isMongooseDocumentArray(t):t instanceof n)||t&&t.constructor&&t.constructor.baseCasterConstructor===n)return t[xN]&&t.__parentArray||(t[xN]=this[$y],t.__parentArray=this),t.$setIndex(e),t;if(t==null)return null;if((Buffer.isBuffer(t)||DO(t,"ObjectId")||!Ry.isObject(t))&&(t={_id:t}),t&&n.discriminators&&n.schema&&n.schema.options&&n.schema.options.discriminatorKey)if(typeof t[n.schema.options.discriminatorKey]=="string"&&n.discriminators[t[n.schema.options.discriminatorKey]])n=n.discriminators[t[n.schema.options.discriminatorKey]];else{let o=$N(n.discriminators,t[n.schema.options.discriminatorKey]);o&&(n=o)}if(n.$isMongooseDocumentArray)return n.cast(t,this,void 0,void 0,e);let i=new n(t,this,r,void 0,e);return i.isNew=!0,i},id(t){let e,r,n;try{e=Noe(t).toString()}catch{e=null}for(let s of this)if(s&&(n=s.get("_id"),!(n===null||typeof n>"u"))){if(n instanceof Poe){if(r||(r=String(t)),r==n._id)return s}else if(!DO(t,"ObjectId")&&!DO(n,"ObjectId")){if(t==n||Ry.deepEqual(t,n))return s}else if(e==n)return s}return null},toObject(t){return[].concat(this.map(function(e){return e==null?null:typeof e.toObject!="function"?e:e.toObject(t)}))},$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)},push(){let t=Fy.push.apply(this,arguments);return vy(this),t},pull(){let t=Fy.pull.apply(this,arguments);return vy(this),t},shift(){let t=Fy.shift.apply(this,arguments);return vy(this),t},splice(){let t=Fy.splice.apply(this,arguments);return vy(this),t},inspect(){return this.toObject()},create(t){let e=this[MO].casterConstructor;if(t&&e.discriminators&&e.schema&&e.schema.options&&e.schema.options.discriminatorKey)if(typeof t[e.schema.options.discriminatorKey]=="string"&&e.discriminators[t[e.schema.options.discriminatorKey]])e=e.discriminators[t[e.schema.options.discriminatorKey]];else{let r=$N(e.discriminators,t[e.schema.options.discriminatorKey]);r&&(e=r)}return new e(t,this)},notify(t){let e=this;return function r(n,s){s=s||e;let i=s.length;for(;i--;)if(s[i]!=null){switch(t){case"save":n=e[i];break;default:break}Ry.isMongooseArray(s[i])?r(n,s[i]):s[i]&&s[i].emit(t,n)}}},set(t,e,r){let n=this.__array;if(r)return n[t]=e,this;let s=IO._cast.call(this,e,t);return IO._markModified.call(this,t),n[t]=s,this},_markModified(t,e){let r=this[$y],n;if(r){if(n=this[BO],arguments.length)if(e!=null){let s=t.__index;n=n+"."+s+"."+e}else n=n+"."+t;if(n!=null&&n.endsWith(".$"))return this;r.markModified(n,arguments.length!==0?t:r)}return this}};kN.exports=IO;function vy(t){let e=t[$y];if(!e||e.$__.populated==null)return;let r=Object.keys(e.$__.populated).filter(n=>n.startsWith(t[BO]+"."));for(let n of r){let s=n.slice((t[BO]+".").length);Array.isArray(e.$__.populated[n].value)&&(e.$__.populated[n].value=t.map(i=>i.$populated(s)))}}});var Ta=g((p4e,jN)=>{"use strict";d();var LN=Py(),PO=qN(),voe=Nn(),NO=fe().arrayAtomicsSymbol,$oe=fe().arrayAtomicsBackupSymbol,FO=fe().arrayParentSymbol,RO=fe().arrayPathSymbol,ba=fe().arraySchemaSymbol,xoe=Array.prototype.push,koe=/^\d+$/;function qoe(t,e,r,n){let s=[],i={[NO]:{},[$oe]:void 0,[RO]:e,[ba]:void 0,[FO]:void 0};if(Array.isArray(t)&&(t[RO]===e&&t[FO]===r&&(i[NO]=Object.assign({},t[NO])),t.forEach(u=>{xoe.call(s,u)})),i[RO]=e,i.__array=s,r&&r instanceof voe)for(i[FO]=r,i[ba]=r.$__schema.path(e);i[ba]!=null&&i[ba].$isMongooseArray&&!i[ba].$isMongooseDocumentArray;)i[ba]=i[ba].casterConstructor;let o=new Proxy(s,{get:function(u,a){return a==="isMongooseArray"||a==="isMongooseArrayProxy"||a==="isMongooseDocumentArray"||a==="isMongooseDocumentArrayProxy"?!0:i.hasOwnProperty(a)?i[a]:PO.hasOwnProperty(a)?PO[a]:n&&n.virtuals&&n.virtuals.hasOwnProperty(a)?n.virtuals[a].applyGetters(void 0,u):LN.hasOwnProperty(a)?LN[a]:s[a]},set:function(u,a,c){return typeof a=="string"&&koe.test(a)?PO.set.call(o,a,c,!1):i.hasOwnProperty(a)?i[a]=c:n&&n.virtuals&&n.virtuals.hasOwnProperty(a)?n.virtuals[a].applySetters(c,u):s[a]=c,!0}});return o}jN.exports=qoe});var Nn=g((iF,oF)=>{"use strict";d();var Loe=eO(),xO=require("events").EventEmitter,joe=mP(),Uoe=Dh(),vn=Bn(),UN=wa(),Voe=SP(),zoe=aO(),Woe=_y(),VN=bP(),Hoe=Tl(),kO=gu(),Ly=Aa(),JN=YS(),XN=cO(),qO=Sy(),vO=Oy(),$i=Bt(),Goe=Cy().compile,Koe=Cy().defineKey,Yoe=$P(),Qoe=Ol().flatten,$O=GP(),zN=YP(),Joe=JP(),Xoe=Ty(),WN=os(),HN=Mr(),ZN=wl(),Zoe=Cl(),GN=mO(),LO=require("util").inspect,eF=li().internalToObjectOptions,eue=yO(),tue=gO(),rue=Zn(),jO=EO(),nue=Mh(),Se=Ae(),sue=_O(),ky=Se.deepEqual,iue=Se.isMongooseObject,Ph=fe().arrayAtomicsBackupSymbol,hn=fe().arrayAtomicsSymbol,oue=fe().documentArrayParent,uue=fe().documentIsModified,tF=fe().documentModifiedPaths,aue=fe().documentSchemaSymbol,cue=fe().getSymbol,KN=fe().populateModelSymbol,lue=fe().scopeSymbol,hue=Oa().schemaMixedSymbol,fue=pN(),xy=fe().sessionNewDocuments,qy,YN,Ih,due=Se.specialProperties,Nh=1,UO=2,wo=Nh|UO;function U(t,e,r,n){if(typeof r=="object"&&r!=null&&(n=r,r=n.skipId),n=Object.assign({},n),this.$__schema==null){let c=Se.isObject(e)&&!e.instanceOfSchema?new Hoe(e):e;this.$__setSchema(c),e=r,r=n,n=arguments[4]||{}}if(this.$__=new joe,n.isNew!=null&&n.isNew!==!0&&(this.$isNew=n.isNew),n.priorDoc!=null&&(this.$__.priorDoc=n.priorDoc),r&&(this.$__.skipId=r),t!=null&&typeof t!="object")throw new Woe(t,"obj","Document");let s=!0;n.defaults!==void 0&&(this.$__.defaults=n.defaults,s=n.defaults);let i=this.$__schema;typeof e=="boolean"||e==="throw"?(e!==!0&&(this.$__.strictMode=e),e=void 0):i.options.strict!==!0&&(this.$__.strictMode=i.options.strict);let o=i.requiredPaths(!0);for(let c of o)this.$__.activePaths.require(c);let u=null;Se.isPOJO(e)&&Object.keys(e).length>0&&(u=Zoe(e),this.$__.selected=e,this.$__.exclude=u);let a=u===!1&&e?XN(e):null;if(this._doc==null&&(this.$__buildDoc(t,e,r,u,a,!1),s&&qO(this,e,u,a,!0,null,{skipParentChangeTracking:!0})),t&&(this.$__original_set?this.$__original_set(t,void 0,!0,n):this.$set(t,void 0,!0,n),t instanceof U&&(this.$isNew=t.$isNew)),n.willInit&&s?n.skipDefaults&&(this.$__.skipDefaults=n.skipDefaults):s&&qO(this,e,u,a,!1,n.skipDefaults),!this.$__.strictMode&&t){let c=this;Object.keys(this._doc).forEach(function(h){!(h in i.tree)&&!(h in i.methods)&&!(h in i.virtuals)&&!h.startsWith("$")&&Koe({prop:h,subprops:null,prototype:c})})}Oue(this)}U.prototype.$isMongooseDocumentPrototype=!0;Object.defineProperty(U.prototype,"isNew",{get:function(){return this.$isNew},set:function(t){this.$isNew=t}});Object.defineProperty(U.prototype,"errors",{get:function(){return this.$errors},set:function(t){this.$errors=t}});U.prototype.$isNew=!0;Se.each(["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"],function(t){U.prototype[t]=function(){if(!this.$__.emitter){if(t==="emit")return;this.$__.emitter=new xO,this.$__.emitter.setMaxListeners(0)}return this.$__.emitter[t].apply(this.$__.emitter,arguments)},U.prototype[`$${t}`]=U.prototype[t]});U.prototype.constructor=U;for(let t in xO.prototype)U[t]=xO.prototype[t];U.prototype.$__schema;U.prototype.schema;Object.defineProperty(U.prototype,"$locals",{configurable:!1,enumerable:!1,get:function(){return this.$__.locals==null&&(this.$__.locals={}),this.$__.locals},set:function(t){this.$__.locals=t}});U.prototype.isNew;Object.defineProperty(U.prototype,"$where",{configurable:!1,enumerable:!1,writable:!0});U.prototype.id;U.prototype.$errors;Object.defineProperty(U.prototype,"$op",{get:function(){return this.$__.op||null},set:function(t){this.$__.op=t}});function pue(t,e,r){if(t==null)return;let n=Object.keys(r.$__schema.paths),s=n.length,i=e.indexOf(".")===-1?[e]:e.split(".");for(let o=0;o<s;++o){let u="",a=n[o];if(!a.startsWith(e+"."))continue;let c=r.$__schema.paths[a],l=c.splitPath().slice(i.length),h=l.length;if(c.defaultValue===void 0)continue;let f=t;for(let p=0;p<h&&f!=null;++p){let m=l[p];if(p===h-1){if(f[m]!==void 0)break;try{let y=c.getDefault(r,!1);y!==void 0&&(f[m]=y)}catch(y){r.invalidate(e+"."+u,y);break}break}u+=(u.length?".":"")+m,f[m]=f[m]||{},f=f[m]}}}U.prototype.$__buildDoc=function(t,e,r,n,s){let i={},o=Object.keys(this.$__schema.paths).filter(c=>!c.includes("$*")),u=o.length,a=0;for(;a<u;++a){let c=o[a];if(c==="_id"&&(r||t&&"_id"in t))continue;let l=this.$__schema.paths[c].splitPath(),h=l.length,f=h-1,p="",m=i,y=!1;for(let A=0;A<h;++A){let S=l[A];if(p.length?p+="."+S:p=S,n===!0){if(p in e)break}else if(n===!1&&e&&!y){if(p in e)y=!0;else if(!s[p])break}A<f&&(m=m[S]||(m[S]={}))}}this._doc=i};U.prototype.toBSON=function(){return this.toObject(eF)};U.prototype.init=function(t,e,r){return typeof e=="function"&&(r=e,e=null),this.$__init(t,e),r&&r(null,this),this};U.prototype.$init=function(){return this.constructor.prototype.init.apply(this,arguments)};U.prototype.$__init=function(t,e){if(this.$isNew=!1,e=e||{},t._id!=null&&e.populated&&e.populated.length){let n=String(t._id);for(let s of e.populated)if(s.isVirtual?this.$populated(s.path,Se.getValue(s.path,t),s):this.$populated(s.path,s._docs[n],s),s._childDocs!=null){for(let i of s._childDocs)i==null||i.$__==null||(i.$__.parent=this);s._childDocs=[]}}rF(this,t,this._doc,e),eue(this,e.populated),this.$emit("init",this),this.constructor.emit("init",this);let r=this.$__.exclude===!1&&this.$__.selected?XN(this.$__.selected):null;return qO(this,this.$__.selected,this.$__.exclude,r,!1,this.$__.skipDefaults),this};function rF(t,e,r,n,s){s=s||"",e.$__!=null&&(e=e._doc);let i=Object.keys(e),o=i.length,u,a,c,l=0,h=t.$__.strictMode,f=t.$__schema;for(;l<o;)p(l++);function p(m){if(c=i[m],c==="__proto__"||c==="constructor"||(a=s?s+c:c,u=f.path(a),f.$isRootDiscriminator&&!t.$__isSelected(a)))return;let y=e[c];if(!u&&Se.isPOJO(y))r[c]||(r[c]={},!h&&!(c in f.tree)&&!(c in f.methods)&&!(c in f.virtuals)&&(t[c]=r[c])),rF(t,y,r[c],n,a+".");else if(!u)r[c]=y,!h&&!s&&(t[c]=y);else{if(r.hasOwnProperty(c)&&y!==void 0&&!n.hydratedPopulatedDocs&&delete r[c],y===null)r[c]=u._castNullish(null);else if(y!==void 0){let A=y.$__==null?null:y.$__.wasPopulated;if(u&&!A&&!n.hydratedPopulatedDocs)try{n&&n.setters?r[c]=u.applySetters(y,t,!1):r[c]=u.cast(y,t,!0)}catch(S){t.invalidate(S.path,new JN({path:S.path,message:S.message,type:"cast",value:S.value,reason:S}))}else n.hydratedPopulatedDocs?(r[c]=u.cast(y,t,!0),r[c]&&r[c].$__&&r[c].$__.wasPopulated?t.$populated(a,r[c].$__.wasPopulated.value,r[c].$__.wasPopulated.options):Array.isArray(r[c])&&r[c].length&&r[c][0]?.$__?.wasPopulated&&t.$populated(a,r[c].map(S=>S?.$__?.wasPopulated?.value).filter(S=>S!=null),r[c][0].$__.wasPopulated.options)):r[c]=y}t.$isModified(a)||t.$__.activePaths.init(a)}}}U.prototype.updateOne=function(e,r,n){let s=this.constructor.updateOne({_id:this._doc._id},e,r),i=this;return s.pre(function(u){i.constructor._middleware.execPre("updateOne",i,[i],u)}),s.post(function(u){i.constructor._middleware.execPost("updateOne",i,[i],{},u)}),this.$session()!=null&&("session"in s.options||(s.options.session=this.$session())),n!=null?s.exec(n):s};U.prototype.replaceOne=function(){let e=[...arguments];return e.unshift({_id:this._doc._id}),this.constructor.replaceOne.apply(this.constructor,e)};U.prototype.$session=function(e){if(arguments.length===0)return this.$__.session!=null&&this.$__.session.hasEnded?(this.$__.session=null,null):this.$__.session;if(e!=null&&e.hasEnded)throw new vn("Cannot set a document's session to a session that has ended. Make sure you haven't called `endSession()` on the session you are passing to `$session()`.");if(!(e==null&&this.$__.session==null)){if(this.$__.session=e,!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)n.$session(e)}return e}};U.prototype.$timestamps=function(e){if(arguments.length===0)return this.$__.timestamps!=null?this.$__.timestamps:this.$__schema?this.$__schema.options.timestamps:void 0;let r=this.$timestamps();return e!==r&&(this.$__.timestamps=e),this};U.prototype.overwrite=function(e){let r=Array.from(new Set(Object.keys(this._doc).concat(Object.keys(e))));for(let n of r)n!=="_id"&&(this.$__schema.options.versionKey&&n===this.$__schema.options.versionKey||this.$__schema.options.discriminatorKey&&n===this.$__schema.options.discriminatorKey||this.$set(n,e[n]));return this};U.prototype.$set=function(e,r,n,s){Se.isPOJO(n)&&(s=n,n=void 0);let i=s&&s.merge,o=n&&n!==!0,u=n===!0,a,c,l=0,h,f,p,m=s&&"strict"in s,y=m?s.strict:this.$__.strictMode;if(o&&(a=this.$__.adhocPaths||(this.$__.adhocPaths={}),a[e]=this.$__schema.interpretAsType(e,n,this.$__schema.options)),e==null)[e,r]=[r,e];else if(typeof e!="string"){e instanceof U&&(e.$__isNested?e=e.toObject():e=e.$__schema===this.$__schema?VO(e,{...e._doc}):e._doc),e==null&&([e,r]=[r,e]),p=r?r+".":"",c=zN(this.$__schema,e);let G=c.length,z=s&&s._skipMinimizeTopLevel||!1;if(G===0&&z)return delete s._skipMinimizeTopLevel,r&&this.$set(r,{}),this;s=Object.assign({},s,{_skipMinimizeTopLevel:!1});for(let x=0;x<G;++x){f=c[x];let W=p?p+f:f;h=this.$__schema.pathType(W);let te=e[f];if(n===!0&&!p&&te!=null&&h==="nested"&&this._doc[f]!=null&&delete this._doc[f],Se.isNonBuiltinObject(te)&&h==="nested"){this.$set(W,te,u,Object.assign({},s,{_skipMarkModified:!0})),pue(this.$get(W),W,this);continue}else if(y){if(u&&te===void 0&&this.$get(W)!==void 0)continue;if(h==="adhocOrUndefined"&&(h=$O(this,W,{typeOnly:!0})),h==="real"||h==="virtual")this.$set(W,te,u,s);else if(h==="nested"&&te instanceof U)this.$set(W,te.toObject({transform:!1}),u,s);else{if(y==="throw")throw h==="nested"?new zoe(f,te):new kO(f);h==="nested"&&te==null&&this.$set(W,te,u,s)}}else te!==void 0&&this.$set(W,te,u,s)}let j={},v=Object.keys(this.$__schema.tree);for(let x=0,W=v.length;x<W;++x)(f=v[x])&&this._doc.hasOwnProperty(f)&&(j[f]=void 0);return this._doc=Object.assign(j,this._doc),this}let A=this.$__schema.pathType(e),S=null;if(A==="adhocOrUndefined"&&(S=e.indexOf(".")===-1?[e]:e.split("."),A=$O(this,S,{typeOnly:!0})),A==="adhocOrUndefined"&&!m){S==null&&(S=e.indexOf(".")===-1?[e]:e.split("."));let G=Joe(this.$__schema,S);G!==void 0&&(y=G)}r=Xoe(r,!0);let O=(()=>{if(this.$__.priorDoc!=null)return this.$__.priorDoc.$__getValue(e);if(!u)return this.$__getValue(e)})();if(A==="nested"&&r){if(typeof r=="object"&&r!=null){if(r.$__!=null&&(r=r.toObject(eF)),r==null)return this.invalidate(e,new vn.CastError("Object",r,e)),this;let G=this.$isModified(e),z=this.$__.savedState!=null&&this.$__.savedState.hasOwnProperty(e);if(this.$__.savedState!=null&&!this.$isNew&&!this.$__.savedState.hasOwnProperty(e)){let v=this.$__getValue(e);this.$__.savedState[e]=v;let x=Object.keys(v||{});for(let W of x)this.$__.savedState[e+"."+W]=v[W]}if(!i)this.$__setValue(e,null),vO(this,e);else return this.$set(r,e,u,s);let j=zN(this.$__schema,r,e);this.$__setValue(e,{});for(let v of j)this.$set(e+"."+v,r[v],u,{...s,_skipMarkModified:!0});return O!=null&&(!G||z)&&Se.deepEqual(z?this.$__.savedState[e]:O,r)?this.unmarkModified(e):this.markModified(e),this}return this.invalidate(e,new vn.CastError("Object",r,e)),this}let D;if(S==null&&(S=e.indexOf(".")===-1?[e]:e.split(".")),typeof this.$__schema.aliases[S[0]]=="string"&&(S[0]=this.$__schema.aliases[S[0]]),A==="adhocOrUndefined"&&y){let G;for(l=0;l<S.length;++l){let z=S.slice(0,l+1).join(".");if(l+1<S.length&&this.$__schema.pathType(z)==="virtual")return rue.set(e,r,this),this;if(D=this.$__schema.path(z),D!=null){if(D instanceof UN){G=!0;break}else if(D.$isSchemaMap&&D.$__schemaType instanceof UN&&l<S.length-1){G=!0,D=D.$__schemaType;break}}}if(D==null&&(D=$O(this,e)),!G&&!D){if(y==="throw")throw new kO(e);return this}}else{if(A==="virtual")return D=this.$__schema.virtualpath(e),D.applySetters(r,this),this;D=this.$__path(e)}let b=this._doc,N="";for(l=0;l<S.length-1;++l)b=b[S[l]],N+=(N.length!==0?".":"")+S[l],b||(this.$set(N,{}),this.$__isSelected(N)||this.unmarkModified(N),b=this.$__getValue(N));let R;if(S.length<=1)R=e;else{let G=S.length;for(l=0;l<G;++l){let z=S.slice(0,l+1).join(".");if(this.$get(z,null,{getters:!1})===null){R=z;break}}R||(R=e)}if(!D)return this.$__set(R,e,s,u,S,D,r,O),A==="nested"&&r==null&&vO(this,e),this;if((D.$isSingleNested||D.$isMongooseArray)&&Aue(this,e),r!=null&&i&&D.$isSingleNested){r instanceof U&&(r=r.toObject({virtuals:!1,transform:!1}));let G=Object.keys(r);for(let z of G)this.$set(e+"."+z,r[z],u,s);return this}let F=!0;try{let G=(()=>{if(D.options==null||!(r instanceof U))return!1;let x=r.constructor,W=D.options.ref;if(W!=null&&(W===x.modelName||W===x.baseModelName))return!0;let te=D.options.refPath;if(te==null)return!1;let qe=r.get(te);return qe===x.modelName||qe===x.baseModelName})(),z=!1;if(G&&r instanceof U&&(!r.$__.wasPopulated||Se.deepEqual(r.$__.wasPopulated.value,r._doc._id))){let x=D&&D.$isSingleNested?D.cast(r,this):r._doc._id;this.$populated(e,x,{[KN]:r.constructor}),r.$__.wasPopulated={value:x},z=!0}let j,v=this.$__schema.options.typeKey;if(D.options&&Array.isArray(D.options[v])&&D.options[v].length&&D.options[v][0]&&D.options[v][0].ref&&mue(r,D.options[v][0].ref)){j={[KN]:r[0].constructor},this.$populated(e,r.map(function(x){return x._doc._id}),j);for(let x of r)x.$__.wasPopulated={value:x._doc._id};z=!0}if(!G||!D.$isSingleNested||!r.$__){let x=this;this.$__schema.singleNestedPaths[e]!=null&&S.length>1&&(x=fue(this,S,this.schema)),s!=null&&s.overwriteImmutable?r=D.applySetters(r,x,!1,O,{overwriteImmutable:!0}):r=D.applySetters(r,x,!1,O)}if(Array.isArray(r)&&!Array.isArray(D)&&D.$isMongooseDocumentArray&&r.length!==0&&r[0]!=null&&r[0].$__!=null&&r[0].$__.populated!=null){let x=Object.keys(r[0].$__.populated);for(let W of x)this.$populated(e+"."+W,r.map(te=>te.$populated(W)),r[0].$__.populated[W].options);z=!0}if(!z&&this.$__.populated){if(Array.isArray(r)&&this.$__.populated[e])for(let x=0;x<r.length;++x)r[x]instanceof U&&r.set(x,r[x]._doc._id,!0);delete this.$__.populated[e]}r!=null&&D.$isSingleNested&&Sue(r,D,O),this.$markValid(e)}catch(G){G instanceof vn.StrictModeError&&G.isImmutableError?this.invalidate(e,G):G instanceof vn.CastError?(this.invalidate(G.path,G),G.$originalErrorPath&&this.invalidate(e,new vn.CastError(D.instance,r,e,G.$originalErrorPath))):this.invalidate(e,new vn.CastError(D.instance,r,e,G)),F=!1}if(F){let G=null,z=null;if(!u){let x=this.$isSubdocument?this.ownerDocument():this;G=x.$__.savedState,z=this.$isSubdocument?this.$__.fullPath+"."+e:e,x.$__saveInitialState(z)}this.$__set(R,e,s,u,S,D,r,O);let j=!!this.$__.session?.transaction,v=this.$__.session&&this.$__.session[xy]&&this.$__.session[xy].has(this)&&this.$__.session[xy].get(this).modifiedPaths&&!this.$__.session[xy].get(this).modifiedPaths.has(z);G!=null&&G.hasOwnProperty(z)&&(!j||v)&&Se.deepEqual(r,G[z])&&this.unmarkModified(e)}return D.$isSingleNested&&(this.isDirectModified(e)||r==null)&&vO(this,e),this};function mue(t,e){if(!Array.isArray(t)||t.length===0)return!1;for(let r of t)if(!(r instanceof U)||r.constructor.modelName==null||r.constructor.modelName!=e&&r.constructor.baseModelName!=e)return!1;return!0}U.prototype.set=U.prototype.$set;U.prototype.$__shouldModify=function(t,e,r,n,s,i,o,u){return r&&r._skipMarkModified?!1:this.$isNew||e in this.$__.activePaths.getStatePaths("modify")||o===void 0&&!this.$__isSelected(e)?!0:o===void 0&&e in this.$__.activePaths.getStatePaths("default")||this.$populated(e)&&o instanceof U&&ky(o._doc._id,u)?!1:!!(!ky(o,u!==void 0?u:Se.getValue(e,this))||!n&&o!==null&&o!==void 0&&e in this.$__.activePaths.getStatePaths("default")&&ky(o,i.getDefault(this,n)))};U.prototype.$__set=function(t,e,r,n,s,i,o,u){Ih=Ih||bl();let a=this.$__shouldModify(t,e,r,n,s,i,o,u);a?(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[e]&&(delete this.$__.primitiveAtomics[e],Object.keys(this.$__.primitiveAtomics).length===0&&delete this.$__.primitiveAtomics),this.markModified(t),YN||(YN=CO()),o&&Se.isMongooseArray(o)&&(o._registerAtomic("$set",o),Se.isMongooseDocumentArray(o)&&o.forEach(function(p){p&&p.__parentArray&&(p.__parentArray=o)}))):Array.isArray(o)&&Array.isArray(u)&&Se.isMongooseArray(o)&&Se.isMongooseArray(u)&&(o[hn]=u[hn],o[Ph]=u[Ph],Se.isMongooseDocumentArray(o)&&o.forEach(p=>{p!=null&&(p.$isNew=!1)}));let c=this._doc,l=0,h=s.length,f="";for(;l<h;l++){let m=l+1===h;if(f+=f?"."+s[l]:s[l],due.has(s[l]))return;if(m)c instanceof Map?c.set(s[l],o):c.$isSingleNested?(s[l]in c||(c[s[l]]=o),c._doc[s[l]]=o,a&&c.markModified(s[l])):c[s[l]]=o;else{let y=c instanceof Map,A=y?c.get(s[l]):c[s[l]];Se.isPOJO(A)||A&&A instanceof Ih||A&&!Array.isArray(A)&&A.$isSingleNested||A&&Array.isArray(A)||A==null&&(A={},y?c.set(s[l],A):c[s[l]]=A),c=A}}};U.prototype.$__getValue=function(t){if(typeof t!="string"&&!Array.isArray(t))throw new TypeError(`Invalid \`path\`. Must be either string or array. Got "${t}" (type ${typeof t})`);return Se.getValue(t,this._doc)};U.prototype.$inc=function(e,r){if(r==null&&(r=1),Array.isArray(e))return e.forEach(a=>this.$inc(a,r)),this;let n=this.$__path(e);if(n==null){if(this.$__.strictMode==="throw")throw new kO(e);if(this.$__.strictMode===!0)return this}else if(n.instance!=="Number")return this.invalidate(e,new vn.CastError(n.instance,r,e)),this;let s=this.$__getValue(e)||0,i=!1,o=null,u=r;try{r=n.cast(r),o=n.applySetters(s+r,this),u=o-s,i=!0}catch(a){this.invalidate(e,new vn.CastError("number",r,e,a))}return i&&(this.$__.primitiveAtomics=this.$__.primitiveAtomics||{},this.$__.primitiveAtomics[e]==null?this.$__.primitiveAtomics[e]={$inc:u}:this.$__.primitiveAtomics[e].$inc+=u,this.markModified(e),this.$__setValue(e,o)),this};U.prototype.$__setValue=function(t,e){return Se.setValue(t,e,this._doc),this};U.prototype.get=function(t,e,r){let n;r==null&&(r={}),e&&(n=this.$__schema.interpretAsType(t,e,this.$__schema.options));let s=r.noDottedPath,i=s?this.$__schema.paths[t]:this.$__path(t);if(i==null&&(i=this.$__schema.virtualpath(t),i!=null))return i.applyGetters(void 0,this);if(s){let c=this._doc[t];return n&&(c=n.cast(c)),i!=null&&r.getters!==!1?i.applyGetters(c,this):c}if(i!=null&&i.instance==="Mixed"){let c=this.$__schema.virtualpath(t);c!=null&&(i=c)}let o=t.indexOf(".")!==-1,u=this._doc,a=o?t.split("."):[t];typeof this.$__schema.aliases[a[0]]=="string"&&(a[0]=this.$__schema.aliases[a[0]]);for(let c=0,l=a.length;c<l;c++)u&&u._doc&&(u=u._doc),u==null?u=void 0:u instanceof Map?u=u.get(a[c],{getters:!1}):c===l-1?u=Se.getValue(a[c],u):u=u[a[c]];if(n&&(u=n.cast(u)),i!=null&&r.getters!==!1)u=i.applyGetters(u,this);else if(this.$__schema.nested[t]&&r.virtuals)return VO(this,$i(u)||{},{path:t});return u};U.prototype[cue]=U.prototype.get;U.prototype.$get=U.prototype.get;U.prototype.$__path=function(t){let e=this.$__.adhocPaths,r=e&&e.hasOwnProperty(t)?e[t]:null;return r||this.$__schema.path(t)};U.prototype.markModified=function(t,e){this.$__saveInitialState(t),this.$__.activePaths.modify(t),e!=null&&!this.$isSubdocument&&(this.$__.pathsToScopes=this.$__pathsToScopes||{},this.$__.pathsToScopes[t]=e)};U.prototype.$__saveInitialState=function(e){let r=this.$__.savedState,n=e;if(r!=null){let s=n.indexOf("."),i=s===-1?n:n.slice(0,s);r.hasOwnProperty(i)||(r[i]=$i(this.$__getValue(i)))}};U.prototype.unmarkModified=function(t){this.$__.activePaths.init(t),this.$__.pathsToScopes!=null&&delete this.$__.pathsToScopes[t]};U.prototype.$ignore=function(t){this.$__.activePaths.ignore(t)};U.prototype.directModifiedPaths=function(){return Object.keys(this.$__.activePaths.getStatePaths("modify"))};U.prototype.$isEmpty=function(t){let e={minimize:!0,virtuals:!1,getters:!1,transform:!1};if(arguments.length!==0){let r=this.$get(t);return r==null?!0:typeof r!="object"?!1:Se.isPOJO(r)?nF(r):Object.keys(r.toObject(e)).length===0}return Object.keys(this.toObject(e)).length===0};function nF(t){if(t==null)return!0;if(typeof t!="object"||Array.isArray(t))return!1;for(let e of Object.keys(t))if(!nF(t[e]))return!1;return!0}U.prototype.modifiedPaths=function(t){t=t||{};let e=Object.keys(this.$__.activePaths.getStatePaths("modify")),r=new Set,n=0,s=0,i=e.length;for(n=0;n<i;++n){let o=e[n],u=jO(o),a=u.length;for(s=0;s<a;++s)r.add(u[s]);if(!t.includeChildren)continue;let c=0,l=this.$get(o);if(typeof l=="object"&&l!==null){l._doc&&(l=l._doc);let h=l.length;if(Array.isArray(l))for(c=0;c<h;++c){let f=o+"."+c;if(!r.has(f)&&(r.add(f),l[c]!=null&&l[c].$__)){let p=l[c].modifiedPaths(),m=0,y=p.length;for(m=0;m<y;++m)r.add(f+"."+p[m])}}else{let f=Object.keys(l),p=0,m=f.length;for(p=0;p<m;++p)r.add(o+"."+f[p])}}}return Array.from(r)};U.prototype[tF]=U.prototype.modifiedPaths;U.prototype.isModified=function(t,e,r){if(t){let n=e&&e.ignoreAtomics,s=this.$__.activePaths.states.modify;if(s==null)return!1;typeof t=="string"&&(t=t.indexOf(" ")===-1?[t]:t.split(" "));for(let a of t)if(s[a]!=null)return!0;let i=r||this[tF](),o=t.some(function(a){return!!~i.indexOf(a)}),u=Object.keys(s);return n&&(u=u.filter(a=>{let c=this.$__getValue(a);return!(c!=null&&c[hn]!=null&&c[hn].$set===void 0)})),o||t.some(function(a){return u.some(function(c){return c===a||a.startsWith(c+".")})})}return this.$__.activePaths.some("modify")};U.prototype.$isModified=U.prototype.isModified;U.prototype[uue]=U.prototype.isModified;U.prototype.$isDefault=function(t){if(t==null)return this.$__.activePaths.some("default");if(typeof t=="string"&&t.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("default").hasOwnProperty(t);let e=t;return Array.isArray(e)||(e=e.split(" ")),e.some(r=>this.$__.activePaths.getStatePaths("default").hasOwnProperty(r))};U.prototype.$isDeleted=function(t){return arguments.length===0?!!this.$__.isDeleted:(this.$__.isDeleted=!!t,this)};U.prototype.isDirectModified=function(t){if(t==null)return this.$__.activePaths.some("modify");if(typeof t=="string"&&t.indexOf(" ")===-1){let r=this.$__.activePaths.getStatePaths("modify").hasOwnProperty(t);if(r||t.indexOf(".")===-1)return r;let n=t.split(".");for(let s=0;s<n.length-1;++s){let i=n.slice(0,s+1).join("."),o=this.$get(i);if(o!=null&&o.$__!=null&&o.isDirectModified(n.slice(s+1).join(".")))return!0}return!1}let e=t;return typeof e=="string"&&(e=e.split(" ")),e.some(r=>this.isDirectModified(r))};U.prototype.isInit=function(t){if(t==null)return this.$__.activePaths.some("init");if(typeof t=="string"&&t.indexOf(" ")===-1)return this.$__.activePaths.getStatePaths("init").hasOwnProperty(t);let e=t;return Array.isArray(e)||(e=e.split(" ")),e.some(r=>this.$__.activePaths.getStatePaths("init").hasOwnProperty(r))};U.prototype.isSelected=function(e){if(this.$__.selected==null)return!0;if(!e)return!1;if(e==="_id")return this.$__.selected._id!==0;if(e.indexOf(" ")!==-1&&(e=e.split(" ")),Array.isArray(e))return e.some(i=>this.$__isSelected(i));let r=Object.keys(this.$__.selected),n=null;if(r.length===1&&r[0]==="_id")return this.$__.selected._id===0;for(let i of r)if(i!=="_id"&&ZN(this.$__.selected[i])){n=!!this.$__.selected[i];break}if(n===null)return!0;if(e in this.$__.selected)return n;let s=e+".";for(let i of r)if(i!=="_id"){if(i.startsWith(s))return n||i!==s;if(s.startsWith(i+"."))return n}return!n};U.prototype.$__isSelected=U.prototype.isSelected;U.prototype.isDirectSelected=function(e){if(this.$__.selected==null)return!0;if(e==="_id")return this.$__.selected._id!==0;if(e.indexOf(" ")!==-1&&(e=e.split(" ")),Array.isArray(e))return e.some(s=>this.isDirectSelected(s));let r=Object.keys(this.$__.selected),n=null;if(r.length===1&&r[0]==="_id")return this.$__.selected._id===0;for(let s of r)if(s!=="_id"&&ZN(this.$__.selected[s])){n=!!this.$__.selected[s];break}return n===null?!0:this.$__.selected.hasOwnProperty(e)?n:!n};U.prototype.validate=async function(e,r){if(typeof e=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new vn("Document.prototype.validate() no longer accepts a callback");let n;if(this.$op="validate",arguments.length===1&&typeof arguments[0]=="object"&&!Array.isArray(arguments[0])&&(r=arguments[0],e=null),r&&typeof r.pathsToSkip=="string"){let i=r.pathsToSkip.indexOf(" ")===-1;r.pathsToSkip=i?[r.pathsToSkip]:r.pathsToSkip.split(" ")}let s=r&&r._skipParallelValidateCheck;if(this.$isSubdocument!=null||(this.$__.validating&&!s?n=new VN(this,{parentStack:r&&r.parentStack,conflictStack:this.$__.validating.stack}):s||(this.$__.validating=new VN(this,{parentStack:r&&r.parentStack}))),n!=null)throw n;return new Promise((i,o)=>{this.$__validate(e,r,u=>{if(this.$op=null,this.$__.validating=null,u!=null)return o(u);i()})})};U.prototype.$validate=U.prototype.validate;function yue(t){let e=Object.keys(t.$__.activePaths.getStatePaths("require")),r=0,n=e.length;for(r=0;r<n;++r){let s=e[r],i=t.$__schema.path(s);if(i!=null&&typeof i.originalRequiredValue=="function"){t.$__.cachedRequired=t.$__.cachedRequired||{};try{t.$__.cachedRequired[s]=i.originalRequiredValue.call(t,t)}catch(o){t.invalidate(s,o)}}}}function sF(t,e,r,n){let s={};yue(t);let i=new Set(Object.keys(t.$__.activePaths.getStatePaths("require")).filter(function(a){return!t.$__isSelected(a)&&!t.$isModified(a)?!1:t.$__.cachedRequired!=null&&a in t.$__.cachedRequired?t.$__.cachedRequired[a]:!0}));Object.keys(t.$__.activePaths.getStatePaths("init")).forEach(o),Object.keys(t.$__.activePaths.getStatePaths("modify")).forEach(o),Object.keys(t.$__.activePaths.getStatePaths("default")).forEach(o);function o(a){i.add(a)}if(!n){let a=t.$getAllSubdocs({useCache:!0}),c=t.modifiedPaths();for(let l of a)if(l.$basePath){let h=l.$isSingleNested?l.$__pathRelativeToParent():l.$__fullPathWithIndexes();for(let f of l.modifiedPaths())i.delete(h+"."+f);t.$isModified(h,null,c)&&!t.$__.activePaths.getStatePaths("modify").hasOwnProperty(h)&&!t.$isDefault(h)&&(i.add(h),t.$__.pathsToScopes==null&&(t.$__.pathsToScopes={}),t.$__.pathsToScopes[h]=l.$isDocumentArrayElement?l.__parentArray:l.$parent(),s[h]={skipSchemaValidators:!0},l.$isDocumentArrayElement&&l.__index!=null&&(s[h].index=l.__index))}}for(let a of i){let c=t.$__schema.path(a);if(c){if(c.$isMongooseDocumentArray)for(let l of i)(l==null||l.startsWith(c.path+"."))&&i.delete(l);(!c.caster&&c.validators.length===0&&!c.$parentSchemaDocArray||c.$isMongooseArray&&!c.$isMongooseDocumentArray&&!c.$embeddedSchemaType.$isMongooseArray&&c.validators.length===0&&c.$embeddedSchemaType.validators.length===0)&&i.delete(a)}}Array.isArray(e)?i=Eue(i,e):Array.isArray(r)&&(i=_ue(i,r)),gue(t,i);let u={skipArrays:!0};for(let a of i)if(t.$__schema.nested[a]){let c=t.$__getValue(a);iue(c)&&(c=c.toObject({transform:!1}));let l=Qoe(c,a,u,t.$__schema);Object.keys(l).filter(h=>!t.$__schema.singleNestedPaths.hasOwnProperty(h)).forEach(o)}for(let a of i){let c=t.$__schema.path(a);if(!c||(c.$parentSchemaDocArray&&typeof c.$parentSchemaDocArray.path=="string"&&i.add(c.$parentSchemaDocArray.path),!c.$isSchemaMap))continue;let l=t.$__getValue(a);if(l!=null)for(let h of l.keys())i.add(a+"."+h)}return i=Array.from(i),[i,s]}function gue(t,e){for(let r of e){let n=t.$__schema.path(r);if(!n||!n.$isMongooseArray||!Array.isArray(n)&&n.$isMongooseDocumentArray&&!(n&&n.schemaOptions&&n.schemaOptions.required)||n.$isMongooseArray&&!n.$isMongooseDocumentArray&&!n.$embeddedSchemaType.$isMongooseArray&&n.$embeddedSchemaType.validators.length===0)continue;let s=t.$__getValue(r);jy(s,e,r)}}function jy(t,e,r){if(t!=null){let n=t.length;for(let s=0;s<n;++s)Array.isArray(t[s])?jy(t[s],e,r+"."+s):e.add(r+"."+s)}}U.prototype.$__validate=function(t,e,r){this.$__.saveOptions&&this.$__.saveOptions.pathsToSave&&!t?t=[...this.$__.saveOptions.pathsToSave]:typeof t=="function"?(r=t,e=null,t=null):typeof e=="function"&&(r=e,e=null);let n=e&&typeof e=="object"&&"validateModifiedOnly"in e,s=e&&e.pathsToSkip||null,i;n?i=!!e.validateModifiedOnly:i=this.$__schema.options.validateModifiedOnly;let o=e&&e.validateAllPaths;if(o){if(s)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(t)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`");if(n&&i)throw new TypeError("Cannot set both `validateAllPaths` and `validateModifiedOnly`")}let u=this,a=()=>{let A=this.$__.validationError;if(this.$__.validationError=null,this.$__.validating=null,i&&A!=null){let S=Object.keys(A.errors);for(let O of S)this.$isModified(O)||delete A.errors[O];Object.keys(A.errors).length===0&&(A=void 0)}if(this.$__.cachedRequired={},this.$emit("validate",u),this.constructor.emit("validate",u),A){for(let S in A.errors)!this[oue]&&A.errors[S]instanceof vn.CastError&&this.invalidate(S,A.errors[S]);return A}},c,l;if(o){c=new Set(Object.keys(this.$__schema.paths));for(let A of c){let S=this.$__schema.path(A);if(!S||!S.$isMongooseArray)continue;let O=this.$__getValue(A);O&&jy(O,c,A)}c=[...c],l={}}else{let A=sF(this,t,s,e&&e._nestedValidate);c=i?A[0].filter(S=>this.$isModified(S)):A[0],l=A[1]}if(typeof t=="string"&&(t=t.split(" ")),c.length===0)return WN(function(){let A=a();if(A)return u.$__schema.s.hooks.execPost("validate:error",u,[u],{error:A},function(S){r(S)});r(null,u)});let h={},f=0,p=this.$__.saveOptions?.pathsToSave;if(Array.isArray(p)){p=new Set(p);for(let A of c)p.has(A)&&m(A)}else for(let A of c)m(A);function m(A){A==null||h[A]||(h[A]=!0,f++,WN(function(){let S=u.$__schema.path(A);if(!S)return--f||y();if(!u.$isValid(A)){--f||y();return}if(S[hue]!=null&&A!==S.path)return--f||y();let O=u.$__getValue(A),D;(D=u.$populated(A))?O=D:O!=null&&O.$__!=null&&O.$__.wasPopulated&&(O=O._doc._id);let b=u.$__.pathsToScopes!=null&&A in u.$__.pathsToScopes?u.$__.pathsToScopes[A]:u,N={...l[A],path:A,validateAllPaths:o,_nestedValidate:!0};S.doValidate(O,function(R){if(R){if((S.$isSingleNested||S.$isArraySubdocument||S.$isMongooseDocumentArray)&&R instanceof Ly)return--f||y();u.invalidate(A,R,void 0,!0)}--f||y()},b,N)}))}function y(){let A=a();if(A)return u.$__schema.s.hooks.execPost("validate:error",u,[u],{error:A},function(S){r(S)});r(null,u)}};function Eue(t,e){let r=new Set(e),n=new Map([]);for(let i of e){if(i.indexOf(".")===-1)continue;let o=i.split("."),u=o[0];for(let a=1;a<o.length;++a)n.set(u,i),u=u+"."+o[a]}let s=new Set;for(let i of t)r.has(i)?s.add(i):n.has(i)&&s.add(n.get(i));return s}function _ue(t,e){return e=new Set(e),t=Array.from(t).filter(r=>!e.has(r)),new Set(t)}U.prototype.validateSync=function(t,e){let r=this;arguments.length===1&&typeof arguments[0]=="object"&&!Array.isArray(arguments[0])&&(e=arguments[0],t=null);let n=e&&typeof e=="object"&&"validateModifiedOnly"in e,s;n?s=!!e.validateModifiedOnly:s=this.$__schema.options.validateModifiedOnly;let i=e&&e.pathsToSkip,o=e&&e.validateAllPaths;if(o){if(i)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToSkip`");if(t)throw new TypeError("Cannot set both `validateAllPaths` and `pathsToValidate`")}typeof t=="string"?t=t.indexOf(" ")===-1?[t]:t.split(" "):typeof i=="string"&&i.indexOf(" ")!==-1&&(i=i.split(" "));let u,a;if(o){u=new Set(Object.keys(this.$__schema.paths));for(let h of u){let f=this.$__schema.path(h);if(!f||!f.$isMongooseArray)continue;let p=this.$__getValue(h);p&&jy(p,u,h)}u=[...u],a={}}else{let h=sF(this,t,i);u=s?h[0].filter(f=>this.$isModified(f)):h[0],a=h[1]}let c={};for(let h=0,f=u.length;h<f;++h){let p=u[h];if(c[p])continue;c[p]=!0;let m=r.$__schema.path(p);if(!m||!r.$isValid(p))continue;let y=r.$__getValue(p),A=m.doValidateSync(y,r,{skipSchemaValidators:a[p],path:p,validateModifiedOnly:s,validateAllPaths:o});if(A){if((m.$isSingleNested||m.$isArraySubdocument||m.$isMongooseDocumentArray)&&A instanceof Ly)continue;r.invalidate(p,A,void 0,!0)}}let l=r.$__.validationError;if(r.$__.validationError=void 0,r.$emit("validate",r),r.constructor.emit("validate",r),l)for(let h in l.errors)l.errors[h]instanceof vn.CastError&&r.invalidate(h,l.errors[h]);return l};U.prototype.invalidate=function(t,e,r,n){if(this.$__.validationError||(this.$__.validationError=new Ly(this)),!this.$__.validationError.errors[t])return(!e||typeof e=="string")&&(e=new JN({path:t,message:e,type:n||"user defined",value:r})),this.$__.validationError===e?this.$__.validationError:(this.$__.validationError.addError(t,e),this.$__.validationError)};U.prototype.$markValid=function(t){!this.$__.validationError||!this.$__.validationError.errors[t]||(delete this.$__.validationError.errors[t],Object.keys(this.$__.validationError.errors).length===0&&(this.$__.validationError=null))};function Aue(t,e){if(!t.$__.validationError)return;let r=Object.keys(t.$__.validationError.errors);for(let n of r)n.startsWith(e+".")&&delete t.$__.validationError.errors[n];Object.keys(t.$__.validationError.errors).length===0&&(t.$__.validationError=null)}function Sue(t,e,r){let n=e.schema;if(n!=null)for(let s of Object.keys(n.paths)){let i=n.paths[s];if(i.$immutableSetter==null)continue;let o=r?.$__getValue(s);i.$immutableSetter.call(t,o)}}U.prototype.$isValid=function(t){return this.$__.validationError==null||Object.keys(this.$__.validationError.errors).length===0?!0:t==null?!1:(t.indexOf(" ")!==-1&&(t=t.split(" ")),Array.isArray(t)?t.some(e=>this.$__.validationError.errors[e]==null):this.$__.validationError.errors[t]==null)};U.prototype.$__reset=function(){let e=this,r=this.$isSubdocument?null:this.$getAllSubdocs({useCache:!0});if(r&&r.length>0)for(let n of r)n.$__reset();return this.$__dirty().forEach(function(n){let s=n.value;s&&s[hn]&&(s[Ph]=s[hn],s[hn]={})}),this.$__.backup={},this.$__.backup.activePaths={modify:Object.assign({},this.$__.activePaths.getStatePaths("modify")),default:Object.assign({},this.$__.activePaths.getStatePaths("default"))},this.$__.backup.validationError=this.$__.validationError,this.$__.backup.errors=this.$errors,this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("default"),this.$__.validationError=void 0,this.$errors=void 0,e=this,this.$__schema.requiredPaths().forEach(function(n){e.$__.activePaths.require(n)}),this};U.prototype.$__undoReset=function(){if(!(this.$__.backup==null||this.$__.backup.activePaths==null)){this.$__.activePaths.states.modify=this.$__.backup.activePaths.modify,this.$__.activePaths.states.default=this.$__.backup.activePaths.default,this.$__.validationError=this.$__.backup.validationError,this.$errors=this.$__.backup.errors;for(let e of this.$__dirty()){let r=e.value;r&&r[hn]&&r[Ph]&&(r[hn]=r[Ph])}for(let e of this.$getAllSubdocs())e.$__undoReset()}};U.prototype.$__dirty=function(){let t=this,e=this.$__.activePaths.map("modify",function(s){return{path:s,value:t.$__getValue(s),schema:t.$__path(s)}});e=e.concat(this.$__.activePaths.map("default",function(s){if(!(s==="_id"||t.$__getValue(s)==null))return{path:s,value:t.$__getValue(s),schema:t.$__path(s)}}));let r=new Map(e.filter(s=>s!=null).map(s=>[s.path,s.value])),n=[];return e.forEach(function(s){if(!s)return;let i=null,o=jO(s.path);for(let u=0;u<o.length-1;u++)if(r.has(o[u])){i=r.get(o[u]);break}i==null?n.push(s):i!=null&&i[hn]!=null&&i.hasAtomics()&&(i[hn]={},i[hn].$set=i)}),n};U.prototype.$__setSchema=function(t){Goe(t.tree,this,void 0,t.options);for(let e of Object.keys(t.virtuals))t.virtuals[e]._applyDefaultGetters();t.path("schema")==null&&(this.schema=t),this.$__schema=t,this[aue]=t};U.prototype.$__getArrayPathsToValidate=function(){return qy||(qy=Ta()),this.$__.activePaths.map("init","modify",function(t){return this.$__getValue(t)}.bind(this)).filter(function(t){return t&&Array.isArray(t)&&Se.isMongooseDocumentArray(t)&&t.length}).reduce(function(t,e){return t.concat(e)},[]).filter(function(t){return t})};U.prototype.$getAllSubdocs=function(t){if(t?.useCache&&this.$__.saveOptions?.__subdocs)return this.$__.saveOptions.__subdocs;qy||(qy=Ta()),Ih=Ih||bl();let e=[];function r(n){let s=[];for(let{path:i}of n.$__schema.childSchemas){let o=n.$__getValue(i);if(o!=null){if(o.$__&&s.push(o),Array.isArray(o))for(let u of o)u!=null&&u.$__&&s.push(u);if(o instanceof Map)for(let u of o.values())u!=null&&u.$__&&s.push(u)}}for(let i of s)r(i);e.push(...s)}return r(this),this.$__.saveOptions&&(this.$__.saveOptions.__subdocs=e),e};function Oue(t){let e=t.$__schema&&t.$__schema.callQueue;if(e.length)for(let r of e)r[0]!=="pre"&&r[0]!=="post"&&r[0]!=="on"&&t[r[0]].apply(t,r[1])}U.prototype.$__handleReject=function(e){this.$listeners("error").length?this.$emit("error",e):this.constructor.listeners&&this.constructor.listeners("error").length&&this.constructor.emit("error",e)};U.prototype.$toObject=function(t,e){let r=this.$__schema._defaultToObjectOptions(e),n=this.$__hasOnlyPrimitiveValues();t=Se.isPOJO(t)?{...t}:{},t._calledWithOptions=t._calledWithOptions||{...t};let s;t._calledWithOptions.minimize!=null?s=t.minimize:r!=null&&r.minimize!=null?s=r.minimize:s=this.$__schema.options.minimize,t.minimize=s,n||(t._seen=t._seen||new Map);let i=t._calledWithOptions.depopulate??r?.depopulate??t.depopulate??!1;if(i&&t._isNested&&this.$__.wasPopulated)return $i(this.$__.wasPopulated.value||this._doc._id,t);if(i&&(t.depopulate=!0),r!=null)for(let f of Object.keys(r))t[f]==null&&(t[f]=r[f]);t._isNested=!0,t.json=e,t.minimize=s;let o=t._parentOptions;t._parentOptions=this.$isSubdocument?t:null;let u;n&&!t.flattenObjectIds?u=this.$__toObjectShallow():u=$i(this._doc,t)||{};let a=t._calledWithOptions.getters??t.getters??r.getters??!1;a&&(wue(this,u),t.minimize&&(u=tue(u)||{}));let c=t._calledWithOptions.virtuals??r.virtuals??o?.virtuals??void 0;(c||a&&c!==!1)&&VO(this,u,t,t),t.versionKey===!1&&this.$__schema.options.versionKey&&delete u[this.$__schema.options.versionKey];let l=t._calledWithOptions.transform??!0,h;if(l===!0?h=r.transform:typeof l=="function"&&(h=l),l&&Cue(this,u),t.useProjection&&bue(this,u),typeof h=="function"){let f=h(this,u,t);typeof f<"u"&&(u=f)}return u};U.prototype.$__toObjectShallow=function(){let e={};if(this._doc!=null)for(let r of Object.keys(this._doc)){let n=this._doc[r];n instanceof Date?e[r]=new Date(n):n!==void 0&&(e[r]=n)}return e};U.prototype.toObject=function(t){return this.$toObject(t)};function VO(t,e,r,n){let s=t.$__schema,i=s.virtuals,o=Object.keys(i),u=o.length,a=u,c,l,h=t._doc,f,p=typeof(n&&n.aliases)=="boolean"?n.aliases:!0;r=r||{};let m=null;if(Array.isArray(r.virtuals))m=new Set(r.virtuals);else if(r.virtuals&&r.virtuals.pathsToSkip){m=new Set(o);for(let y=0;y<r.virtuals.pathsToSkip.length;y++)m.has(r.virtuals.pathsToSkip[y])&&m.delete(r.virtuals.pathsToSkip[y])}if(!h)return e;for(u=0;u<a;++u){if(c=o[u],m!=null&&!m.has(c)||!p&&s.aliases.hasOwnProperty(c))continue;if(l=c,r.path!=null){if(!c.startsWith(r.path+"."))continue;l=c.substring(r.path.length+1)}if(l.indexOf(".")===-1&&l===c){if(f=i[c].applyGetters(void 0,t),f===void 0)continue;f=$i(f,r),e[l]=f;continue}let y=l.split(".");if(f=$i(t.get(c),r),f===void 0)continue;let A=y.length;h=e;for(let S=0;S<A-1;++S)h[y[S]]=h[y[S]]||{},h=h[y[S]];h[y[A-1]]=f}return e}function wue(t,e){let r=t.$__schema,n=Object.keys(r.paths),s=n.length,i,o=t._doc,u;if(!o)return e;for(;s--;){i=n[s];let a=i.split("."),c=a.length,l=c-1,h=e,f;if(o=t._doc,!!t.$__isSelected(i))for(let p=0;p<c&&(f=a[p],u=o[f],!(h!=null&&typeof h!="object"));++p){if(p===l){if(h[f]=r.paths[i].applyGetters(h[f],t),Array.isArray(h[f])&&r.paths[i].$embeddedSchemaType)for(let m=0;m<h[f].length;++m)h[f][m]=r.paths[i].$embeddedSchemaType.applyGetters(h[f][m],t)}else if(u==null){f in o&&(h[f]=u);break}else h=h[f]||(h[f]={});o=u}}return e}function Cue(t,e){let r=t.$__schema,n=Object.keys(r.paths||{});if(!t._doc)return e;for(let i of n){let o=r.paths[i];if(typeof o.options.transform=="function"){let u=t.$get(i);if(u===void 0)continue;let a=o.options.transform.call(t,u);QN(i,a),Se.setValue(i,a,e)}else if(o.$embeddedSchemaType!=null&&typeof o.$embeddedSchemaType.options.transform=="function"){let u=t.$get(i);if(u===void 0)continue;let a=[].concat(u),c=o.$embeddedSchemaType.options.transform;for(let l=0;l<a.length;++l){let h=c.call(t,a[l]);a[l]=h,QN(i,h)}e[i]=a}}return e}function QN(t,e){if(sue(e))throw new Error("`transform` function must be synchronous, but the transform on path `"+t+"` returned a promise.")}function bue(t,e){let r=t.$__schema,n=Object.keys(r.paths||{});if(!t._doc)return e;let i=t.$__.selected;if(i===void 0&&(i={},nue.applyPaths(i,r)),i==null||Object.keys(i).length===0)return e;for(let o of n)i[o]!=null&&!i[o]&&delete e[o];return e}U.prototype.toJSON=function(t){return this.$toObject(t,!0)};U.prototype.ownerDocument=function(){return this};U.prototype.parent=function(){return this.$isSubdocument||this.$__.wasPopulated?this.$__.parent:this};U.prototype.$parent=U.prototype.parent;U.prototype.inspect=function(t){let e=Se.isPOJO(t),r;e&&(r=t,r.minimize=!1);let n=arguments.length>0?this.toObject(r):this.toObject();return n??"MongooseDocument { "+n+" }"};LO.custom&&(U.prototype[LO.custom]=U.prototype.inspect);U.prototype.toString=function(){let t=this.inspect();return typeof t=="string"?t:LO(t)};U.prototype.equals=function(t){if(!t)return!1;let e=this.$__getValue("_id"),r=t.$__!=null?t.$__getValue("_id"):t;return!e&&!r?ky(this,t):e&&e.equals?e.equals(r):e===r};U.prototype.populate=async function(){let e={},r=[...arguments];if(typeof r[r.length-1]=="function")throw new vn("Document.prototype.populate() no longer accepts a callback");if(r.length!==0){let i=Se.populate.apply(null,r);for(let o of i)e[o.path]=o}let n=Se.object.vals(e),s=this.constructor;if(this.$__isNested){s=this.$__[lue].constructor;let i=this.$__.nestedPath;n.forEach(function(o){o.path=i+"."+o.path})}if(this.$session()!=null){let i=this.$session();n.forEach(o=>{if(o.options==null){o.options={session:i};return}"session"in o.options||(o.options.session=i)})}return n.forEach(i=>{i._localModel=s}),s.populate(this,n)};U.prototype.$getPopulatedDocs=function(){let e=[];this.$__.populated!=null&&(e=e.concat(Object.keys(this.$__.populated)));let r=[];for(let n of e){let s=this.$get(n);Array.isArray(s)?r=r.concat(s):s instanceof U&&r.push(s)}return r};U.prototype.populated=function(t,e,r){if(e==null||e===!0){if(!this.$__.populated||typeof t!="string")return;let s=t.endsWith(".$*")?t.replace(/\.\$\*$/,""):t,i=this.$__.populated[s];return i?e===!0?i:i.value:void 0}this.$__.populated||(this.$__.populated={}),this.$__.populated[t]={value:e,options:r};let n=t.split(".");for(let s=0;s<n.length-1;++s){let i=n.slice(0,s+1).join("."),o=this.$get(i);if(o!=null&&o.$__!=null&&this.$populated(i)){let u=n.slice(s+1).join(".");o.$populated(u,e,r);break}}return e};U.prototype.$populated=U.prototype.populated;U.prototype.$assertPopulated=function(e,r){if(Array.isArray(e))return e.forEach(n=>this.$assertPopulated(n,r)),this;if(arguments.length>1&&this.$set(r),!this.$populated(e))throw new vn(`Expected path "${e}" to be populated`);return this};U.prototype.depopulate=function(t){typeof t=="string"&&(t=t.indexOf(" ")===-1?[t]:t.split(" "));let e,r=this.$$populatedVirtuals?Object.keys(this.$$populatedVirtuals):[],n=this.$__&&this.$__.populated||{};if(arguments.length===0){for(let i of r)delete this.$$populatedVirtuals[i],delete this._doc[i],delete n[i];let s=Object.keys(n);for(let i of s)if(e=this.$populated(i),!!e)if(delete n[i],Array.isArray(e)){let o=Se.getValue(i,this._doc);if(o.isMongooseArray){let u=o.__array;for(let a=0;a<u.length;++a){let c=u[a];c!=null&&(u[a]=c instanceof U?c._doc._id:c._id)}}else Se.setValue(i,e,this._doc)}else Se.setValue(i,e,this._doc);return this}for(let s of t)if(e=this.$populated(s),delete n[s],r.indexOf(s)!==-1)delete this.$$populatedVirtuals[s],delete this._doc[s];else if(e)if(Array.isArray(e)){let i=Se.getValue(s,this._doc);if(i.isMongooseArray){let o=i.__array;for(let u=0;u<o.length;++u){let a=o[u];a!=null&&(o[u]=a instanceof U?a._doc._id:a._id)}}else Se.setValue(s,e,this._doc)}else Se.setValue(s,e,this._doc);return this};U.prototype.$__fullPath=function(t){return t||""};U.prototype.getChanges=function(){let t=this.$__delta();return t?t[1]:{}};U.prototype.$__delta=function(){let e=this.$__dirty(),r=this.$__schema.options.optimisticConcurrency;if(r)if(Array.isArray(r)){let a=new Set(r);this.modifiedPaths().find(l=>a.has(l))&&(this.$__.version=e.length?wo:Nh)}else this.$__.version=e.length?wo:Nh;if(!e.length&&wo!==this.$__.version)return;let n={},s={},i=e.length,o=[],u=0;for(n._id=this._doc._id,(n&&n._id&&n._id.$__||null)!=null&&(n._id=n._id.toObject({transform:!1,depopulate:!0}));u<i;++u){let a=e[u],c=a.value,l=Tue(this,a.path,c);if(l){o.push(l);continue}if(!this.$populated(a.path,!0)&&this.$__.selected){let f=a.path.split("."),p=f[0];if(this.$__.selected[p]&&this.$__.selected[p].$elemMatch)if(f.length>1&&f[1]==0&&typeof n[p]>"u")n[p]=this.$__.selected[p],f[1]="$",a.path=f.join(".");else{o.push(a.path);continue}}if(!(this.$isDefault(a.path)&&this.$__.selected&&(a.path.indexOf(".")===-1&&GN(this.$__.selected,a.path)||jO(a.path).find(p=>GN(this.$__.isSelected,p))))&&!o.length)if(c===void 0)_u(this,n,s,a,1,"$unset");else if(c===null)_u(this,n,s,a,null);else if(Se.isMongooseArray(c)&&c.$path()&&c[hn])Due(this,n,s,a,c);else if(c[Uoe.pathSymbol]&&Buffer.isBuffer(c))c=c.toObject(),_u(this,n,s,a,c);else if(this.$__.primitiveAtomics&&this.$__.primitiveAtomics[a.path]!=null){let f=this.$__.primitiveAtomics[a.path],p=Yoe(f);_u(this,n,s,a,f[p],p)}else c=$i(c,{depopulate:!0,transform:!1,virtuals:!1,getters:!1,omitUndefined:!0,_isNested:!0}),_u(this,n,s,a,c)}return o.length?new Loe(o):(this.$__.version&&this.$__version(n,s),Object.keys(s).length===0?[n,null]:[n,s])};function Tue(t,e,r){let n=t.$populated(e,!0);if(!n&&t.$__.selected){let i=e.split(".")[0];if(t.$__.selected[i+".$"])return i}if(!(n&&Se.isMongooseArray(r)))return;if(n.options.match||n.options.options&&Se.object.hasOwnProperty(n.options.options,"limit")||n.options.options&&n.options.options.skip||n.options.select&&(n.options.select._id===0||/\s?-_id\s?/.test(n.options.select))){let i=r[hn];if(Object.keys(i).length===0||i.$set||i.$pop)return e}}function _u(t,e,r,n,s,i){if(i||(i="$set"),r[i]||(r[i]={}),r[i][n.path]=s,t.$__schema.options.versionKey!==!1&&!Mue(t,n.path)&&wo!==(wo&t.$__.version)&&!t.$__schema.options.optimisticConcurrency){switch(i){case"$set":case"$unset":case"$pop":case"$pull":case"$pullAll":case"$push":case"$addToSet":case"$inc":break;default:return}i==="$push"||i==="$addToSet"||i==="$pullAll"||i==="$pull"?/\.\d+\.|\.\d+$/.test(n.path)?t.$__.version=wo:t.$__.version=UO:/^\$p/.test(i)||Array.isArray(s)?t.$__.version=wo:/\.\d+\.|\.\d+$/.test(n.path)&&(t.$__.version=Nh)}}function Due(t,e,r,n,s){if(r.$set&&r.$set[n.path])return;if(typeof s.$__getAtomics=="function"){s.$__getAtomics().forEach(function(h){let f=h[0],p=h[1];_u(t,e,r,n,p,f)});return}let i=s[hn],o=Object.keys(i),u=o.length,a,c;if(u===0)return Se.isMongooseObject(s)?s=s.toObject({depopulate:1,_isNested:!0}):s.valueOf&&(s=s.valueOf()),_u(t,e,r,n,s);function l(h){return Se.isMongooseObject(h)?h.toObject({depopulate:1,_isNested:!0}):h}for(;u--;)c=o[u],a=i[c],Se.isMongooseObject(a)?a=a.toObject({depopulate:!0,transform:!1,_isNested:!0}):Array.isArray(a)?a=a.map(l):a.valueOf&&(a=a.valueOf()),c==="$addToSet"&&(a={$each:a}),_u(t,e,r,n,a,c)}function Mue(t,e){let r=t.$__schema.options.skipVersioning;return r?(e=e.replace(/\.\d+\./,"."),r[e]):!1}U.prototype.$clone=function(){let t=this.constructor,e=new t;if(e.$isNew=this.$isNew,this._doc&&(e._doc=$i(this._doc,{retainDocuments:!0})),this.$__){let r=this.$__.constructor,n=new r;for(let s of Object.getOwnPropertyNames(this.$__))s!=="activePaths"&&(n[s]=$i(this.$__[s]));Object.assign(n.activePaths,$i({...this.$__.activePaths})),e.$__=n}return e};U.prototype.$createModifiedPathsSnapshot=function(){let e=new WeakMap;if(!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)e.set(n,n.$__.activePaths.clone())}return new Voe(e,this.$__.activePaths.clone(),this.$__.version)};U.prototype.$restoreModifiedPathsSnapshot=function(e){if(this.$__.activePaths=e.activePaths.clone(),this.$__.version=e.version,!this.$isSubdocument){let r=this.$getAllSubdocs();for(let n of r)e.subdocSnapshot.has(n)&&(n.$__.activePaths=e.subdocSnapshot.get(n))}return this};U.prototype.$clearModifiedPaths=function(){if(this.$__.activePaths.clear("modify"),this.$__.activePaths.clear("init"),this.$__.version=0,!this.$isSubdocument){let e=this.$getAllSubdocs();for(let r of e)r.$clearModifiedPaths()}return this};U.prototype.$__hasOnlyPrimitiveValues=function(){return!this.$__.populated&&!this.$__.wasPopulated&&(this._doc==null||Object.values(this._doc).every(e=>e==null||typeof e!="object"||Se.isNativeObject(e)&&!Array.isArray(e)||HN(e,"ObjectId")||HN(e,"Decimal128")))};U.VERSION_WHERE=Nh;U.VERSION_INC=UO;U.VERSION_ALL=wo;U.ValidationError=Ly;oF.exports=iF=U});var Ae=g(ce=>{"use strict";d();var Bue=cs().UUID,Iue=nO(),aF=Zn(),Pue=Eo(),cF=iO(),WO=Bt(),Nue=os(),Fue=yu(),lF=Qm(),hF=uP(),Au=Mr(),Rue=hl(),vue=RS(),Fh=Sh(),$ue=py(),xue=my(),Rh=Ea(),{trustedSymbol:Dl}=fl(),zO;ce.specialProperties=Rh;ce.isMongooseArray=lF.isMongooseArray;ce.isMongooseDocumentArray=hF.isMongooseDocumentArray;ce.registerMongooseArray=lF.registerMongooseArray;ce.registerMongooseDocumentArray=hF.registerMongooseDocumentArray;var HO=/\s/,GO=/\s+/;ce.toCollectionName=function(t,e){if(t==="system.profile"||t==="system.indexes")return t;if(typeof e=="function"){if(typeof t!="string")throw new TypeError("Collection name must be a string");if(t.length===0)throw new TypeError("Collection name cannot be empty");return e(t)}return t};ce.deepEqual=function t(e,r){if(e===r)return!0;if(typeof e!="object"||typeof r!="object")return e===r;if(e instanceof Date&&r instanceof Date)return e.getTime()===r.getTime();if(Au(e,"ObjectId")&&Au(r,"ObjectId")||Au(e,"Decimal128")&&Au(r,"Decimal128"))return e.toString()===r.toString();if(e instanceof RegExp&&r instanceof RegExp)return e.source===r.source&&e.ignoreCase===r.ignoreCase&&e.multiline===r.multiline&&e.global===r.global&&e.dotAll===r.dotAll&&e.unicode===r.unicode&&e.sticky===r.sticky&&e.hasIndices===r.hasIndices;if(e==null||r==null||e.prototype!==r.prototype)return!1;if(e instanceof Map||r instanceof Map)return!(e instanceof Map)||!(r instanceof Map)?!1:t(Array.from(e.keys()),Array.from(r.keys()))&&t(Array.from(e.values()),Array.from(r.values()));if(e instanceof Number&&r instanceof Number)return e.valueOf()===r.valueOf();if(Buffer.isBuffer(e))return ce.buffer.areEqual(e,r);if(Array.isArray(e)||Array.isArray(r)){if(!Array.isArray(e)||!Array.isArray(r))return!1;let o=e.length;if(o!==r.length)return!1;for(let u=0;u<o;++u)if(!t(e[u],r[u]))return!1;return!0}e.$__!=null?e=e._doc:Fh(e)&&(e=e.toObject()),r.$__!=null?r=r._doc:Fh(r)&&(r=r.toObject());let n=Object.keys(e),s=Object.keys(r),i=n.length;if(i!==s.length)return!1;for(let o=i-1;o>=0;o--)if(n[o]!==s[o])return!1;for(let o of n)if(!t(e[o],r[o]))return!1;return!0};ce.last=function(t){if(t.length>0)return t[t.length-1]};ce.promiseOrCallback=$ue;ce.cloneArrays=function(e){return Array.isArray(e)?e.map(r=>ce.cloneArrays(r)):e};ce.omit=function(e,r){if(r==null)return Object.assign({},e);Array.isArray(r)||(r=[r]);let n=Object.assign({},e);for(let s of r)delete n[s];return n};ce.merge=function t(e,r,n,s){n=n||{};let i=Object.keys(r),o=0,u=i.length,a;r[Dl]&&(e[Dl]=r[Dl]),s=s||"";let c=n.omitNested||{};for(;o<u;)if(a=i[o++],!(n.omit&&n.omit[a])&&!c[s]&&!Rh.has(a))if(e[a]==null)Rue(r[a])?e[a]={...r[a]}:Array.isArray(r[a])?e[a]=[...r[a]]:e[a]=r[a];else if(ce.isObject(r[a])){if(ce.isObject(e[a])||(e[a]={}),r[a]!=null){if(n.isDiscriminatorSchemaMerge&&r[a].$isSingleNested&&e[a].$isMongooseDocumentArray||r[a].$isMongooseDocumentArray&&e[a].$isSingleNested)continue;if(r[a].instanceOfSchema){e[a].instanceOfSchema?xue(e[a],r[a].clone(),n.isDiscriminatorSchemaMerge):e[a]=r[a].clone();continue}else if(Au(r[a],"ObjectId")){e[a]=new Pue(r[a]);continue}}t(e[a],r[a],n,s?s+"."+a:a)}else n.overwrite&&(e[a]=r[a]);return e};ce.toObject=function t(e){zO||(zO=Nn());let r;if(e==null)return e;if(e instanceof zO)return e.toObject();if(Array.isArray(e)){r=[];for(let n of e)r.push(t(n));return r}if(ce.isPOJO(e)){r={},e[Dl]&&(r[Dl]=e[Dl]);for(let n of Object.keys(e))Rh.has(n)||(r[n]=t(e[n]));return r}return e};ce.isObject=Fue;ce.isPOJO=hl();ce.isNonBuiltinObject=function(e){return typeof e=="object"&&!ce.isNativeObject(e)&&!ce.isMongooseType(e)&&!(e instanceof Bue)&&e!=null};ce.isNativeObject=function(t){return Array.isArray(t)||t instanceof Date||t instanceof Boolean||t instanceof Number||t instanceof String};ce.isEmptyObject=function(t){return t!=null&&typeof t=="object"&&Object.keys(t).length===0};ce.hasKey=function(e,r){let n=Object.keys(e);for(let s of n)if(s===r||ce.isPOJO(e[s])&&ce.hasKey(e[s],r))return!0;return!1};ce.tick=function(e){if(typeof e=="function")return function(){try{e.apply(this,arguments)}catch(r){Nue(function(){throw r})}}};ce.isMongooseType=function(t){return Au(t,"ObjectId")||Au(t,"Decimal128")||t instanceof Buffer};ce.isMongooseObject=Fh;ce.expires=function(e){e&&e.constructor.name==="Object"&&"expires"in e&&(e.expireAfterSeconds=typeof e.expires!="string"?e.expires:Math.round(Iue(e.expires)/1e3),delete e.expires)};ce.populate=function(e,r,n,s,i,o,u,a){let c=null;if(arguments.length===1){if(e instanceof cF)return e._docs={},e._childDocs=[],[e];if(Array.isArray(e))return l(e).map(f=>ce.populate(f)[0]);ce.isObject(e)?c=Object.assign({},e):c={path:e}}else typeof n=="object"?c={path:e,select:r,match:n,options:s}:c={path:e,select:r,model:n,match:s,options:i,populate:o,justOne:u,count:a};if(typeof c.path!="string")throw new TypeError("utils.populate: invalid path. Expected string. Got typeof `"+typeof e+"`");return kue(c);function l(h){let f=[];return h.forEach(function(p){HO.test(p.path)?p.path.split(GO).forEach(function(y){let A=Object.assign({},p);A.path=y,f.push(A)}):f.push(p)}),f}};function kue(t){if(Array.isArray(t.populate)){let n=[];t.populate.forEach(function(s){if(HO.test(s.path)){let i=Object.assign({},s);i.path.split(GO).forEach(function(u){i.path=u,n.push(ce.populate(i)[0])})}else n.push(ce.populate(s)[0])}),t.populate=ce.populate(n)}else t.populate!=null&&typeof t.populate=="object"&&(t.populate=ce.populate(t.populate));let e=[],r=HO.test(t.path)?t.path.split(GO):[t.path];t.options!=null&&(t.options=WO(t.options));for(let n of r)e.push(new cF(Object.assign({},t,{path:n})));return e}ce.getValue=function(t,e,r){return aF.get(t,e,Lue,r)};var que=Object.freeze({getters:!1});function Lue(t,e){let r=t?._doc||t;return r!=null&&r.isMongooseArrayProxy&&(r=r.__array),r instanceof Map?r.get(e,que):r[e]}ce.setValue=function(t,e,r,n,s){aF.set(t,e,r,"_doc",n,s)};ce.object={};ce.object.vals=function(e){let r=Object.keys(e),n=r.length,s=[];for(;n--;)s.push(e[r[n]]);return s};var jue=Object.prototype.hasOwnProperty;ce.object.hasOwnProperty=function(t,e){return jue.call(t,e)};ce.isNullOrUndefined=function(t){return t==null};ce.array={};ce.array.flatten=function t(e,r,n){return n||(n=[]),e.forEach(function(s){Array.isArray(s)?t(s,r,n):(!r||r(s))&&n.push(s)}),n};var Uue=Object.prototype.hasOwnProperty;ce.hasUserDefinedProperty=function(t,e){if(t==null)return!1;if(Array.isArray(e)){for(let r of e)if(ce.hasUserDefinedProperty(t,r))return!0;return!1}if(Uue.call(t,e))return!0;if(typeof t=="object"&&e in t){let r=t[e];return r!==Object.prototype[e]&&r!==Array.prototype[e]}return!1};var uF=Math.pow(2,32)-1;ce.isArrayIndex=function(t){return typeof t=="number"?t>=0&&t<=uF:typeof t=="string"&&/^\d+$/.test(t)?(t=+t,t>=0&&t<=uF):!1};ce.array.unique=function(t){let e=new Set,r=new Set,n=[];for(let s of t)if(typeof s=="number"||typeof s=="string"||s==null){if(e.has(s))continue;n.push(s),e.add(s)}else if(Au(s,"ObjectId")){if(r.has(s.toString()))continue;n.push(s),r.add(s.toString())}else n.push(s);return n};ce.buffer={};ce.buffer.areEqual=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e)||t.length!==e.length)return!1;for(let r=0,n=t.length;r<n;++r)if(t[r]!==e[r])return!1;return!0};ce.getFunctionName=vue;ce.decorate=function(t,e){for(let r in e)Rh.has(r)||(t[r]=e[r])};ce.mergeClone=function(t,e){Fh(e)&&(e=e.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1}));let r=Object.keys(e),n=r.length,s=0,i;for(;s<n;)if(i=r[s++],!Rh.has(i))if(typeof t[i]>"u")t[i]=WO(e[i],{transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1});else{let o=e[i];if(o!=null&&o.valueOf&&!(o instanceof Date)&&(o=o.valueOf()),ce.isObject(o)){let u=o;Fh(o)&&!o.isMongooseBuffer&&(u=u.toObject({transform:!1,virtuals:!1,depopulate:!0,getters:!1,flattenDecimals:!1})),o.isMongooseBuffer&&(u=Buffer.from(u)),ce.mergeClone(t[i],u)}else t[i]=WO(o,{flattenDecimals:!1})}};ce.each=function(t,e){for(let r of t)e(r)};ce.renameObjKey=function(t,e,r){return Object.keys(t).reduce((s,i)=>(i===e?s[r]=t[e]:s[i]=t[i],s),{})};ce.getOption=function(t){let e=Array.prototype.slice.call(arguments,1);for(let r of e)if(r!=null&&r[t]!=null)return r[t];return null};ce.noop=function(){};ce.errorToPOJO=function(e){if(!(e instanceof Error))throw new Error("`error` must be `instanceof Error`.");let n={};for(let s of Object.getOwnPropertyNames(e))n[s]=e[s];return n};ce.warn=function(e){return process.emitWarning(e,{code:"MONGOOSE"})};ce.injectTimestampsOption=function(e,r){r!=null&&(e.timestamps=r)}});var Jt=g((Vy,_F)=>{"use strict";d();var vh=Bn(),gF=Xn(),Vue=fy(),zue=rO(),Uy=Bt(),KO=WI(),Wue=GI(),YO=YI(),fF=os(),Hue=fe().schemaTypeSymbol,Da=Ae(),EF=fe().validatorErrorSymbol,Gue=fe().documentIsModified,dF=fe().populateModelSymbol,QO=vh.CastError,JO=vh.ValidatorError,Kue={_skipMarkModified:!0};function Ce(t,e,r){this[Hue]=!0,this.path=t,this.instance=r,this.validators=[],this.getters=this.constructor.hasOwnProperty("getters")?this.constructor.getters.slice():[],this.setters=this.constructor.hasOwnProperty("setters")?this.constructor.setters.slice():[],this.splitPath(),e=e||{};let n=this.constructor.defaultOptions||{},s=Object.keys(n);for(let u of s)u==="validate"?this.validate(n.validate):n.hasOwnProperty(u)&&!Object.prototype.hasOwnProperty.call(e,u)&&(e[u]=n[u]);e.select==null&&delete e.select;let i=this.OptionsConstructor||gF;this.options=new i(e),this._index=null,Da.hasUserDefinedProperty(this.options,"immutable")&&(this.$immutable=this.options.immutable,KO(this));let o=Object.keys(this.options);for(let u of o){if(u==="cast"){Array.isArray(this.options[u])?this.castFunction.apply(this,this.options[u]):this.castFunction(this.options[u]);continue}if(Da.hasUserDefinedProperty(this.options,u)&&typeof this[u]=="function"){if(u==="index"&&this._index){if(e.index===!1){let l=this._index;if(typeof l=="object"&&l!=null){if(l.unique)throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true');if(l.sparse)throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}this._index=!1}continue}let a=e[u];if(u==="default"){this.default(a);continue}let c=Array.isArray(a)?a:[a];this[u].apply(this,c)}}Object.defineProperty(this,"$$context",{enumerable:!1,configurable:!1,writable:!0,value:null})}Ce.prototype.OptionsConstructor=gF;Ce.prototype.path;Ce.prototype.validators;Ce.prototype.isRequired;Ce.prototype.splitPath=function(){if(this._presplitPath!=null)return this._presplitPath;if(this.path!=null)return this._presplitPath=this.path.indexOf(".")===-1?[this.path]:this.path.split("."),this._presplitPath};Ce.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=r=>r),this._cast=e,this._cast)};Ce.prototype.castFunction=function(e,r){return arguments.length===0?this._castFunction:(e===!1&&(e=this.constructor._defaultCaster||(n=>n)),typeof e=="string"?(this._castErrorMessage=e,this._castFunction):(e!=null&&(this._castFunction=e),r!=null&&(this._castErrorMessage=r),this._castFunction))};Ce.prototype.cast=function(){throw new Error("Base SchemaType class does not implement a `cast()` function")};Ce.set=function(e,r){this.hasOwnProperty("defaultOptions")||(this.defaultOptions=Object.assign({},this.defaultOptions)),this.defaultOptions[e]=r};Ce.get=function(t){this.getters=this.hasOwnProperty("getters")?this.getters:[],this.getters.push(t)};Ce.prototype.default=function(t){if(arguments.length===1){if(t===void 0){this.defaultValue=void 0;return}if(t!=null&&t.instanceOfSchema)throw new vh("Cannot set default value of path `"+this.path+"` to a mongoose Schema instance.");return this.defaultValue=t,this.defaultValue}else arguments.length>1&&(this.defaultValue=[...arguments]);return this.defaultValue};Ce.prototype.index=function(t){return this._index=t,Da.expires(this._index),this};Ce.prototype.unique=function(e,r){if(this._index===!1){if(!e)return;throw new Error('Path "'+this.path+'" may not have `index` set to false and `unique` set to true')}return!this.options.hasOwnProperty("index")&&e===!1?this:(this._index==null||this._index===!0?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.unique=!!e,typeof r=="string"&&(this._duplicateKeyErrorMessage=r),this)};Ce.prototype.text=function(t){if(this._index===!1){if(!t)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `text` set to true')}return!this.options.hasOwnProperty("index")&&t===!1?this:(this._index===null||this._index===void 0||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.text=t,this)};Ce.prototype.sparse=function(t){if(this._index===!1){if(!t)return this;throw new Error('Path "'+this.path+'" may not have `index` set to false and `sparse` set to true')}return!this.options.hasOwnProperty("index")&&t===!1?this:(this._index==null||typeof this._index=="boolean"?this._index={}:typeof this._index=="string"&&(this._index={type:this._index}),this._index.sparse=t,this)};Ce.prototype.immutable=function(t){return this.$immutable=t,KO(this),this};Ce.prototype.transform=function(t){return this.options.transform=t,this};Ce.prototype.set=function(t){if(typeof t!="function")throw new TypeError("A setter must be a function.");return this.setters.push(t),this};Ce.prototype.get=function(t){if(typeof t!="function")throw new TypeError("A getter must be a function.");return this.getters.push(t),this};Ce.prototype.validateAll=function(t){for(let e=0;e<t.length;e++)this.validate(t[e]);return this};Ce.prototype.validate=function(t,e,r){if(typeof t=="function"||t&&Da.getFunctionName(t.constructor)==="RegExp"){let o;return typeof e=="function"?(o={validator:t,message:e},o.type=r||"user defined"):e instanceof Object&&!r?(o=YO(e)?Object.assign({},e):Uy(e),o.message||(o.message=o.msg),o.validator=t,o.type=o.type||"user defined"):(e==null&&(e=vh.messages.general.default),r||(r="user defined"),o={message:e,type:r,validator:t}),this.validators.push(o),this}let n,s,i;for(n=0,s=arguments.length;n<s;n++){if(i=arguments[n],!Da.isPOJO(i)){let o="Invalid validator. Received ("+typeof i+") "+i+". See https://mongoosejs.com/docs/api/schematype.html#SchemaType.prototype.validate()";throw new Error(o)}this.validate(i.validator,i)}return this};Ce.prototype.required=function(t,e){let r={};if(arguments.length>0&&t==null)return this.validators=this.validators.filter(function(i){return i.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;if(typeof t=="object"&&(r=t,e=r.message||e,t=t.isRequired),t===!1)return this.validators=this.validators.filter(function(i){return i.validator!==this.requiredValidator},this),this.isRequired=!1,delete this.originalRequiredValue,this;let n=this;this.isRequired=!0,this.requiredValidator=function(i){let o=this&&this.$__&&this.$__.cachedRequired;if(o!=null&&!this.$__isSelected(n.path)&&!this[Gue](n.path))return!0;if(o!=null&&n.path in o){let u=o[n.path]?n.checkRequired(i,this):!0;return delete o[n.path],u}else if(typeof t=="function")return t.apply(this)?n.checkRequired(i,this):!0;return n.checkRequired(i,this)},this.originalRequiredValue=t,typeof t=="string"&&(e=t,t=void 0);let s=e||vh.messages.general.required;return this.validators.unshift(Object.assign({},r,{validator:this.requiredValidator,message:s,type:"required"})),this};Ce.prototype.ref=function(t){return this.options.ref=t,this};Ce.prototype.getDefault=function(t,e,r){let n;if(typeof this.defaultValue=="function"?this.defaultValue===Date.now||this.defaultValue===Array||this.defaultValue.name.toLowerCase()==="objectid"?n=this.defaultValue.call(t):n=this.defaultValue.call(t,t):n=this.defaultValue,n!=null){if(typeof n=="object"&&(!this.options||!this.options.shared)&&(n=Uy(n)),r&&r.skipCast)return this._applySetters(n,t);let s=this.applySetters(n,t,e,void 0,Kue);return s&&!Array.isArray(s)&&s.$isSingleNested&&(s.$__parent=t),s}return n};Ce.prototype._applySetters=function(t,e,r,n,s){let i=t;if(r)return i;let o=this.setters;for(let u=o.length-1;u>=0;u--)i=o[u].call(e,i,n,this,s);return i};Ce.prototype._castNullish=function(e){return e};Ce.prototype.applySetters=function(t,e,r,n,s){let i=this._applySetters(t,e,r,n,s);return i==null?this._castNullish(i):(i=this.cast(i,e,r,n,s),i)};Ce.prototype.applyGetters=function(t,e){let r=t,n=this.getters,s=n.length;if(s===0)return r;for(let i=0;i<s;++i)r=n[i].call(e,r,this);return r};Ce.prototype.select=function(e){return this.selected=!!e,this};Ce.prototype.doValidate=function(t,e,r,n){let s=!1,i=this.path;if(typeof e!="function")throw new TypeError(`Must pass callback function to doValidate(), got ${typeof e}`);let o=this.validators.filter(c=>typeof c=="object"&&c!==null),u=o.length;if(!u)return e(null);for(let c=0,l=o.length;c<l&&!s;++c){let h=o[c],f=h.validator,p,m=YO(h)?Object.assign({},h):Uy(h);if(m.path=n&&n.path?n.path:i,m.fullPath=this.$fullPath,m.value=t,f instanceof RegExp){a(f.test(t),m,r);continue}if(typeof f=="function"){if(t===void 0&&f!==this.requiredValidator){a(!0,m,r);continue}try{m.propsParameter?p=f.call(r,t,m):p=f.call(r,t)}catch(y){p=!1,m.reason=y,y.message&&(m.message=y.message)}p!=null&&typeof p.then=="function"?p.then(function(y){a(y,m,r)},function(y){m.reason=y,m.message=y.message,p=!1,a(p,m,r)}):a(p,m,r)}}function a(c,l,h){if(!s)if(c===void 0||c)--u<=0&&fF(function(){e(null)});else{let f=l.ErrorConstructor||JO;s=new f(l,h),s[EF]=!0,fF(function(){e(s)})}}};function pF(t,e){if(t!==void 0&&!t){let r=e.ErrorConstructor||JO,n=new r(e);return n[EF]=!0,n}}Ce.prototype.doValidateSync=function(t,e,r){let n=this.path;if(!this.validators.length)return null;let i=this.validators;if(t===void 0)if(this.validators.length!==0&&this.validators[0].type==="required")i=[this.validators[0]];else return null;let o=null,u=0,a=i.length;for(u=0;u<a;++u){let c=i[u];if(c===null||typeof c!="object")continue;let l=c.validator,h=YO(c)?Object.assign({},c):Uy(c);h.path=r&&r.path?r.path:n,h.fullPath=this.$fullPath,h.value=t;let f=!1;if(!Wue(l)){if(l instanceof RegExp){o=pF(l.test(t),h);continue}if(typeof l=="function"){try{h.propsParameter?f=l.call(e,t,h):f=l.call(e,t)}catch(p){f=!1,h.reason=p}if(!(f!=null&&typeof f.then=="function")&&(o=pF(f,h),o))break}}}return o};Ce._isRef=function(t,e,r,n){let s=n&&t.options&&(t.options.ref||t.options.refPath);if(!s&&r&&r.$__!=null){let i=r.$__fullPath(t.path,!0),o=r.ownerDocument();s=i!=null&&o.$populated(i)||r.$populated(t.path)}return s?e==null||!Buffer.isBuffer(e)&&e._bsontype!=="Binary"&&Da.isObject(e)?!0:n:!1};Ce.prototype._castRef=function(e,r,n){if(e==null)return e;if(e.$__!=null)return e.$__.wasPopulated=e.$__.wasPopulated||{value:e._doc._id},e;if(Buffer.isBuffer(e)||!Da.isObject(e)){if(n)return e;throw new QO(this.instance,e,this.path,null,this)}let s=r.$__fullPath(this.path,!0),o=r.ownerDocument().$populated(s,!0),u=e;if(!r.$__.populated||!r.$__.populated[s]||!r.$__.populated[s].options||!r.$__.populated[s].options.options||!r.$__.populated[s].options.options.lean){let a=o?o.options[dF]:r.constructor.db.model(this.options.ref);u=new a(e),u.$__.wasPopulated={value:u._doc._id,options:{[dF]:a}}}return u};function mF(t,e){return this.castForQuery(null,t,e)}function Yue(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}function yF(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return Array.isArray(n)&&n.length===0?n:r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}Ce.prototype.$conditionalHandlers={$all:Yue,$eq:mF,$in:yF,$ne:mF,$nin:yF,$exists:Vue,$type:zue};Ce.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t);return n.call(this,e,r)}try{return this.applySetters(e,r)}catch(s){throw s instanceof QO&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};Ce.checkRequired=function(t){return arguments.length!==0&&(this._checkRequired=t),this._checkRequired};Ce.prototype.checkRequired=function(t){return t!=null};Ce.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,t,this.instance);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),this.defaultValue!==void 0&&(e.defaultValue=this.defaultValue),this.$immutable!==void 0&&this.options.immutable===void 0&&(e.$immutable=this.$immutable,KO(e)),this._index!==void 0&&(e._index=this._index),this.selected!==void 0&&(e.selected=this.selected),this.isRequired!==void 0&&(e.isRequired=this.isRequired),this.originalRequiredValue!==void 0&&(e.originalRequiredValue=this.originalRequiredValue),e.getters=this.getters.slice(),e.setters=this.setters.slice(),e};Ce.prototype.getEmbeddedSchemaType=function(){return this.$embeddedSchemaType};Ce.prototype._duplicateKeyErrorMessage=null;_F.exports=Vy=Ce;Vy.CastError=QO;Vy.ValidatorError=JO});var XO=g((A4e,AF)=>{"use strict";d();var di=Is(),$n=class{constructor(e){Object.assign(this,e),e!=null&&e.options!=null&&(this.options=Object.assign({},e.options))}};Object.defineProperty($n.prototype,"ref",di);Object.defineProperty($n.prototype,"refPath",di);Object.defineProperty($n.prototype,"localField",di);Object.defineProperty($n.prototype,"foreignField",di);Object.defineProperty($n.prototype,"justOne",di);Object.defineProperty($n.prototype,"count",di);Object.defineProperty($n.prototype,"match",di);Object.defineProperty($n.prototype,"options",di);Object.defineProperty($n.prototype,"skip",di);Object.defineProperty($n.prototype,"limit",di);Object.defineProperty($n.prototype,"perDocumentLimit",di);AF.exports=$n});var zy=g((O4e,SF)=>{"use strict";d();SF.exports=function(e,r,n){return e==null?e:(e._doc!=null&&(e=e._doc),arguments.length>=3?typeof e!="object"||n===void 0?void 0:(e instanceof Map?e.set(r,n):e[r]=n,n):r==="$*"?e instanceof Map?Array.from(e.values()):Object.keys(e).map(s=>e[s]):e instanceof Map?e.get(r):e[r])}});var ZO=g((C4e,bF)=>{"use strict";d();var Que=Ie(),Jue=mO(),OF=zy(),wF=Zn(),Xue=require("util"),Zue=Ae(),CF=/(\.\d+$|\.\d+\.)/g;bF.exports=function(e,r,n,s,i){if(e==null)return[];if(typeof e=="string"&&i!=null&&Jue(i,e))throw new Que("refPath `"+e+"` must not be excluded in projection, got "+Xue.inspect(i));if(CF.test(n)){let a=n.split(CF);if(a[a.length-1]==="")throw new Error("Can't populate individual element in an array");let c="",l=e;for(let p=0;p<a.length;p+=2){let m=a[p];if(l.startsWith(m+"."))c+=l.substring(0,m.length)+a[p+1],l=l.substring(m.length+1);else if(p===a.length-1){c+=l,l="";break}else throw new Error("Could not normalize ref path, chunk "+m+" not in populated path")}let h=wF.get(c,r,OF),f=Array.isArray(h)?h:[h];return f=Zue.array.flatten(f),f}let o=wF.get(e,r,OF),u;return s!=null&&s.virtuals.hasOwnProperty(e)?u=[s.virtuals[e].applyGetters(void 0,r)]:u=Array.isArray(o)?o:[o],u}});var Wy=g((T4e,TF)=>{"use strict";d();var eae=ZO(),tae=Ae(),rae=fe().modelSymbol;function Co(t,e){this.path=e,this.getters=[],this.setters=[],this.options=Object.assign({},t)}Co.prototype._applyDefaultGetters=function(){if(this.getters.length>0||this.setters.length>0)return;let e="$"+this.path;this.getters.push(function(){return this.$locals[e]}),this.setters.push(function(r){this.$locals[e]=r})};Co.prototype.clone=function(){let t=new Co(this.options,this.path);return t.getters=[].concat(this.getters),t.setters=[].concat(this.setters),t};Co.prototype.get=function(t){return this.getters.push(t),this};Co.prototype.set=function(t){return this.setters.push(t),this};Co.prototype.applyGetters=function(t,e){tae.hasUserDefinedProperty(this.options,["ref","refPath"])&&e.$$populatedVirtuals&&e.$$populatedVirtuals.hasOwnProperty(this.path)&&(t=e.$$populatedVirtuals[this.path]);let r=t;for(let n of this.getters)r=n.call(e,r,this,e);return r};Co.prototype.applySetters=function(t,e){let r=t;for(let n of this.setters)r=n.call(e,r,this,e);return r};Co.prototype._getModelNamesForPopulate=function(e){if(this.options.refPath)return eae(this.options.refPath,e,this.path);let r=null;return typeof this.options.ref=="function"&&!this.options.ref[rae]?r=this.options.ref.call(e,e):r=this.options.ref,r!=null&&!Array.isArray(r)?[r]:r};TF.exports=Co});var ew=g((M4e,DF)=>{"use strict";d();DF.exports=function(e){let r={_id:{auto:!0}};r._id[e.options.typeKey]="ObjectId",e.add(r)}});var tw=g((I4e,MF)=>{"use strict";d();MF.exports=function(e,r){let n=e.discriminatorMapping&&e.discriminatorMapping.value;if(n&&!("sparse"in r)){let s=e.options.discriminatorKey;r.partialFilterExpression=r.partialFilterExpression||{},r.partialFilterExpression[s]=n}return r}});var IF=g((N4e,BF)=>{"use strict";d();var rw=kt(),nae=yu(),sae=tw();BF.exports=function(e){let r=[],n=new WeakMap,s=e.constructor.indexTypes,i=new Map;return o(e),r;function o(a,c,l){if(n.has(a))return;n.set(a,!0),c=c||"";let h=Object.keys(a.paths);for(let f of h){let p=a.paths[f];if(l!=null&&l.paths[f])continue;if(p._duplicateKeyErrorMessage!=null&&(a._duplicateKeyErrorMessagesByPath=a._duplicateKeyErrorMessagesByPath||{},a._duplicateKeyErrorMessagesByPath[f]=p._duplicateKeyErrorMessage),p.$isMongooseDocumentArray||p.$isSingleNested){if(rw(p,"options.excludeIndexes")!==!0&&rw(p,"schemaOptions.excludeIndexes")!==!0&&rw(p,"schema.options.excludeIndexes")!==!0&&o(p.schema,c+f+"."),p.schema.discriminators!=null){let y=p.schema.discriminators,A=Object.keys(y);for(let S of A)o(y[S],c+f+".",p.schema)}if(p.$isMongooseDocumentArray)continue}let m=p._index||p.caster&&p.caster._index;if(m!==!1&&m!==null&&m!==void 0){let y={},A=nae(m),S=A?m:{},O=typeof m=="string"?m:A?m.type:!1;if(O&&s.indexOf(O)!==-1)y[c+f]=O;else if(S.text)y[c+f]="text",delete S.text;else{let b=!1;m==="descending"||m==="desc"?b=!0:m==="ascending"||m==="asc"?b=!1:b=Number(m)===-1,y[c+f]=b?-1:1}delete S.type,"background"in S||(S.background=!0),a.options.autoIndex!=null&&(S._autoIndex=a.options.autoIndex);let D=S&&S.name;typeof D=="string"?i.has(D)?Object.assign(i.get(D),y):(r.push([y,S]),i.set(D,y)):(r.push([y,S]),i.set(D,y))}}n.delete(a),c?u(a,c):(a._indexes.forEach(function(f){let p=f[1];"background"in p||(p.background=!0),sae(a,p)}),r=r.concat(a._indexes))}function u(a,c){let l=a._indexes,h=l.length;for(let f=0;f<h;++f){let p=l[f][0],m=l[f][1],y=Object.keys(p),A=y.length,S={};for(let D=0;D<A;++D){let b=y[D];S[c+b]=p[b]}let O=Object.assign({},m);if(m!=null&&m.partialFilterExpression!=null){O.partialFilterExpression={};let D=m.partialFilterExpression;for(let b of Object.keys(D))O.partialFilterExpression[c+b]=D[b]}r.push([S,O])}}}});var nw=g((R4e,PF)=>{"use strict";d();PF.exports=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest";break}return e}});var FF=g(($4e,NF)=>{"use strict";d();NF.exports=function(e){return!(!e.paths.id&&e.paths._id&&e.options.id)||e.aliases&&e.aliases.id||e.virtual("id").get(iae),e};function iae(){return this._id!=null?this._id.toString():null}});var vF=g((k4e,RF)=>{"use strict";d();RF.exports=function(e,r){let n=Object.keys(e),s=Object.keys(r);if(n.length!==s.length)return!1;for(let i=0;i<n.length;i++){let o=n[i];if(o!==s[i]||e[o]!==r[o])return!1}return!0}});var xF=g((L4e,$F)=>{"use strict";d();$F.exports=function(e,r,n,s){return s.justOne||s.count?(e[r]=Array.isArray(n)?n[0]:n,typeof e[r]!="object"&&(e[r]=s.count?n:null)):(e[r]=Array.isArray(n)?n:n==null?[]:[n],e[r]=e[r].filter(function(i){return i&&typeof i=="object"})),e[r]}});var $h=g((U4e,kF)=>{"use strict";d();kF.exports=function(e){return e.replace(/\.\$(\[[^\]]*\])?(?=\.)/g,".0").replace(/\.\$(\[[^\]]*\])?$/g,".0")}});var Hy=g((z4e,qF)=>{"use strict";d();qF.exports=oae;function oae(t,e){return t==null?null:typeof t=="boolean"?e:typeof t[e]=="boolean"?t[e]?e:null:e in t?t[e]:e}});var iw=g((H4e,LF)=>{"use strict";d();var uae=$h(),bo=Hy();LF.exports=Ma;function Ma(t,e,r){if(e==null)return;if(Object.keys(e).some(u=>u[0]==="$")){if(e.$push&&o(e.$push),e.$addToSet&&o(e.$addToSet),e.$set!=null){let u=Object.keys(e.$set);for(let a of u)sw(r,a,e.$set,t)}if(e.$setOnInsert!=null){let u=Object.keys(e.$setOnInsert);for(let a of u)sw(r,a,e.$setOnInsert,t)}}let i=Object.keys(e).filter(u=>u[0]!=="$");for(let u of i)sw(r,u,e,t);function o(u){for(let a of Object.keys(u)){let c=r.path(a.replace(/\.\$\./i,".").replace(/.\$$/,""));if(u[a]&&c&&c.$isMongooseDocumentArray&&c.schema.options.timestamps){let l=c.schema.options.timestamps,h=bo(l,"createdAt"),f=bo(l,"updatedAt");u[a].$each?u[a].$each.forEach(function(p){f!=null&&(p[f]=t),h!=null&&(p[h]=t),Ma(t,p,c.schema)}):(f!=null&&(u[a][f]=t),h!=null&&(u[a][h]=t),Ma(t,u[a],c.schema))}}}}function aae(t,e,r){let n=e.schema.options.timestamps,s=t.length;if(!n){for(let u=0;u<s;++u)Ma(r,t[u],e.schema);return}let i=bo(n,"createdAt"),o=bo(n,"updatedAt");for(let u=0;u<s;++u)o!=null&&(t[u][o]=r),i!=null&&(t[u][i]=r),Ma(r,t[u],e.schema)}function cae(t,e,r){let n=e.schema.options.timestamps;if(!n){Ma(r,t,e.schema);return}let s=bo(n,"createdAt"),i=bo(n,"updatedAt");i!=null&&(t[i]=r),s!=null&&(t[s]=r),Ma(r,t,e.schema)}function sw(t,e,r,n){let s=uae(e),i=t.path(s);if(!i)return;let o=[],u=s.split(".");for(let a=u.length-1;a>0;--a){let c=t.path(u.slice(0,a).join("."));c!=null&&(c.$isMongooseDocumentArray||c.$isSingleNested)&&o.push({parentPath:e.split(".").slice(0,a).join("."),parentSchemaType:c})}if(Array.isArray(r[e])&&i.$isMongooseDocumentArray)aae(r[e],i,n);else if(r[e]&&i.$isSingleNested)cae(r[e],i,n);else if(o.length>0)for(let a of o){let c=a.parentPath,l=a.parentSchemaType,h=l.schema.options.timestamps,f=bo(h,"updatedAt");if(!(!h||f==null)){if(l.$isSingleNested)r[c+"."+f]=n;else if(l.$isMongooseDocumentArray){let p=e.substring(c.length+1);if(/^\d+$/.test(p)){r[c+"."+p][f]=n;continue}let m=p.indexOf(".");p=m!==-1?p.substring(0,m):p,r[c+"."+p+"."+f]=n}}}else if(i.schema!=null&&i.schema!=t&&r[e]){let a=i.schema.options.timestamps,c=bo(a,"createdAt"),l=bo(a,"updatedAt");if(!a)return;l!=null&&(r[e][l]=n),c!=null&&(r[e][c]=n)}}});var ow=g((K4e,jF)=>{"use strict";d();var lae=kt();jF.exports=hae;function hae(t,e,r,n,s,i){let o=n,u=o,a=lae(s,"timestamps",!0);if(!a||o==null)return n;let c=a!=null&&a.createdAt===!1,l=a!=null&&a.updatedAt===!1;if(i)return n&&n.$set&&(n=n.$set,o.$set={},u=o.$set),!l&&r&&!n[r]&&(u[r]=t),!c&&e&&!n[e]&&(u[e]=t),o;if(n=n||{},Array.isArray(o))return r==null||o.push({$set:{[r]:t}}),o;if(o.$set=o.$set||{},!l&&r&&(!n.$currentDate||!n.$currentDate[r])){let h=!1;if(r.indexOf(".")!==-1){let f=r.split(".");for(let p=1;p<f.length;++p){let m=f.slice(-p).join("."),y=f.slice(0,-p).join(".");if(n[y]!=null){n[y][m]=t,h=!0;break}else if(n.$set&&n.$set[y]){n.$set[y][m]=t,h=!0;break}}}h||(o.$set[r]=t),o.hasOwnProperty(r)&&delete o[r]}if(!c&&e){n[e]&&delete n[e],n.$set&&n.$set[e]&&delete n.$set[e];let h=!1;if(e.indexOf(".")!==-1){let f=e.split(".");for(let p=1;p<f.length;++p){let m=f.slice(-p).join("."),y=f.slice(0,-p).join(".");if(n[y]!=null){n[y][m]=t,h=!0;break}else if(n.$set&&n.$set[y]){n.$set[y][m]=t,h=!0;break}}}h||(o.$setOnInsert=o.$setOnInsert||{},o.$setOnInsert[e]=t)}return Object.keys(o.$set).length===0&&delete o.$set,o}});var VF=g((Q4e,UF)=>{"use strict";d();UF.exports=function(e,r,n,s,i){let o=r!=null&&r.updatedAt===!1,u=r!=null&&r.createdAt===!1,a=n!=null?n():e.ownerDocument().constructor.base.now();if(!u&&(e.isNew||e.$isSubdocument)&&s&&!e.$__getValue(s)&&e.$__isSelected(s)&&e.$set(s,a,void 0,{overwriteImmutable:!0}),!o&&i&&(e.isNew||e.$isModified())){let c=a;e.isNew&&s!=null&&(c=e.$__getValue(s)),e.$set(i,c)}}});var GF=g((X4e,HF)=>{"use strict";d();var fae=iw(),dae=ow(),pae=kt(),zF=Hy(),mae=VF(),yae=Oa(),WF=new Set(["replaceOne","findOneAndReplace"]);HF.exports=function(e,r){let n=e.childSchemas.find(s);function s(h){return!!h.schema.options.timestamps}if(!r&&!n)return;let i=zF(r,"createdAt"),o=zF(r,"updatedAt"),u=r!=null&&r.hasOwnProperty("currentTime")?r.currentTime:null,a={};if(e.$timestamps={createdAt:i,updatedAt:o},i&&!e.paths[i]){let h=e.base!=null?e.base.get("timestamps.createdAt.immutable"):null,f=h??!0;a[i]={[e.options.typeKey||"type"]:Date,immutable:f}}o&&!e.paths[o]&&(a[o]=Date),e.add(a),e.pre("save",function(f){let p=pae(this,"$__.saveOptions.timestamps");if(p===!1)return f();mae(this,p,u,i,o),f()}),e.methods.initializeTimestamps=function(){let h=u!=null?u():this.constructor.base.now();if(i&&!this.get(i)&&this.$set(i,h),o&&!this.get(o)&&this.$set(o,h),this.$isSubdocument)return this;let f=this.$getAllSubdocs();for(let p of f)p.initializeTimestamps&&p.initializeTimestamps();return this},l[yae.builtInMiddleware]=!0;let c={query:!0,model:!1};e.pre("findOneAndReplace",c,l),e.pre("findOneAndUpdate",c,l),e.pre("replaceOne",c,l),e.pre("update",c,l),e.pre("updateOne",c,l),e.pre("updateMany",c,l);function l(h){let f=u!=null?u():this.model.base.now();WF.has(this.op)&&this.getUpdate()==null&&this.setUpdate({}),dae(f,i,o,this.getUpdate(),this._mongooseOptions,WF.has(this.op)),fae(f,this.getUpdate(),this.model.schema),h()}}});var YF=g((eSe,KF)=>{"use strict";d();var gae=Ie(),Eae=require("util");KF.exports=_ae;function _ae(t,e){if(typeof t!="string"&&typeof t!="function")throw new gae('Invalid ref at path "'+e+'". Got '+Eae.inspect(t,{depth:0}))}});var Gy=g(Ml=>{"use strict";d();var QF=Object.freeze(["countDocuments","distinct","estimatedDocumentCount","find","findOne","findOneAndReplace","findOneAndUpdate","replaceOne","updateMany","updateOne","deleteMany","deleteOne","findOneAndDelete"]);Ml.queryOperations=QF;var Aae=QF.concat(["validate"]);Ml.queryMiddlewareFunctions=Aae;var Sae=["aggregate"];Ml.aggregateMiddlewareFunctions=Sae;var Oae=["bulkWrite","createCollection","insertMany"];Ml.modelMiddlewareFunctions=Oae;var wae=["validate","save","remove","updateOne","deleteOne","init"];Ml.documentMiddlewareFunctions=wae});var Ky=g((sSe,JF)=>{"use strict";d();var Cae=Oa(),bae=py();JF.exports=xh;xh.middlewareFunctions=["deleteOne","save","validate","remove","updateOne","init"];var Tae=new Set(xh.middlewareFunctions.flatMap(t=>[t,`$__${t}`]));function xh(t,e,r){r=r||{};let n={useErrorHandlers:!0,numCallbackParams:1,nullResultByDefault:!0,contextParameter:!0},s=r.decorateDoc?t:t.prototype;t.$appliedHooks=!0;for(let c of Object.keys(e.paths)){let l=e.paths[c],h=null;if(l.$isSingleNested)h=l.caster;else if(l.$isMongooseDocumentArray)h=l.Constructor;else continue;if(!h.$appliedHooks&&(xh(h,l.schema,{...r,isChildSchema:!0}),h.discriminators!=null)){let f=Object.keys(h.discriminators);for(let p of f)xh(h.discriminators[p],h.discriminators[p].schema,r)}}let i=e.s.hooks.filter(c=>c.name==="updateOne"||c.name==="deleteOne"?!!c.document:c.name==="remove"||c.name==="init"?c.document==null||!!c.document:c.query!=null||c.document!=null?c.document!==!1:!0).filter(c=>e.methods[c.name]?!c.fn[Cae.builtInMiddleware]:!0);t._middleware=i,s.$__originalValidate=s.$__originalValidate||s.$__validate;let o=r&&r.isChildSchema?["save","validate","deleteOne"]:["save","validate"];for(let c of o){let l=c==="validate"?"$__originalValidate":`$__${c}`,h=i.createWrapper(c,s[l],null,n);s[`$__${c}`]=h}s.$__init=i.createWrapperSync("init",s.$__init,null,n);let u=Object.keys(e.methods),a=Object.assign({},n,{checkForPromise:!0});for(let c of u){if(Tae.has(c)||!i.hasHooks(c))continue;let l=s[c];s[c]=function(){let h=Array.prototype.slice.call(arguments),f=h.slice(-1).pop(),p=typeof f=="function"?h.slice(0,h.length-1):h;return bae(f,m=>this[`$__${c}`].apply(this,p.concat([m])),t.events)},s[`$__${c}`]=i.createWrapper(c,l,null,a)}}});var Yy=g((oSe,rR)=>{"use strict";d();var Dae=wa(),Mae=Ie(),XF=Bt(),Bae=Ae().deepEqual,Iae=ln(),Pae=Ty(),ZF=require("util"),Nae=Ea(),uw=Mr(),Fae=Oy(),eR=fe().populateModelSymbol;var pi=class extends Map{constructor(e,r,n,s){Iae(e)==="Object"&&(e=Object.keys(e).reduce((i,o)=>i.concat([[o,e[o]]]),[])),super(e),this.$__parent=n!=null&&n.$__!=null?n:null,this.$__path=r,this.$__schemaType=s??new Dae(r),this.$__runDeferred()}$init(e,r){tR(e),super.set(e,r),r!=null&&r.$isSingleNested&&(r.$basePath=this.$__path+"."+e)}$__set(e,r){super.set(e,r)}get(e,r){return uw(e,"ObjectId")&&(e=e.toString()),r=r||{},r.getters===!1?super.get(e):this.$__schemaType.applyGetters(super.get(e),this.$__parent)}set(e,r){if(uw(e,"ObjectId")&&(e=e.toString()),tR(e),r=Pae(r),this.$__schemaType==null){this.$__deferred=this.$__deferred||[],this.$__deferred.push({key:e,value:r});return}let n,s=this.$__parent,i=s!=null&&s.$__&&s.$__.populated?s.$populated(u.call(this),!0)||s.$populated(this.$__path,!0):null,o=this.get(e);if(i!=null){if(this.$__schemaType.$isSingleNested)throw new Mae(`Cannot manually populate single nested subdoc underneath Map at path "${this.$__path}". Try using an array instead of a Map.`);Array.isArray(r)&&this.$__schemaType.$isMongooseArray?r=r.map(a=>(a.$__==null&&(a=new i.options[eR](a)),a.$__.wasPopulated={value:a._doc._id},a)):r!=null&&(r.$__==null&&(r=new i.options[eR](r)),r.$__.wasPopulated={value:r._doc._id})}else try{let a=this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested?{path:u.call(this)}:null;r=this.$__schemaType.applySetters(r,this.$__parent,!1,this.get(e),a)}catch(a){if(this.$__parent!=null&&this.$__parent.$__!=null){this.$__parent.invalidate(u.call(this),a);return}throw a}if(super.set(e,r),s!=null&&s.$__!=null&&!Bae(r,o)){let a=u.call(this);s.markModified(a),(this.$__schemaType.$isMongooseDocumentArray||this.$__schemaType.$isSingleNested)&&Fae(s,a)}function u(){return n||(n=this.$__path+"."+e,n)}}clear(){super.clear();let e=this.$__parent;e?.markModified(this.$__path)}delete(e){return uw(e,"ObjectId")&&(e=e.toString()),this.set(e,void 0),super.delete(e)}toBSON(){return new Map(this)}toObject(e){if(e&&e.flattenMaps){let r={},n=this.keys();for(let s of n)r[s]=XF(this.get(s),e);return r}return new Map(this)}$toObject(){return this.constructor.prototype.toObject.apply(this,arguments)}toJSON(e){if(typeof(e&&e.flattenMaps)!="boolean"||e.flattenMaps){let r={},n=this.keys();for(let s of n)r[s]=XF(this.get(s),e);return r}return new Map(this)}inspect(){return new Map(this)}$__runDeferred(){if(this.$__deferred){for(let e of this.$__deferred)this.set(e.key,e.value);this.$__deferred=null}}};ZF.inspect.custom&&Object.defineProperty(pi.prototype,ZF.inspect.custom,{enumerable:!1,writable:!1,configurable:!1,value:pi.prototype.inspect});Object.defineProperty(pi.prototype,"$__set",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(pi.prototype,"$__parent",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(pi.prototype,"$__path",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(pi.prototype,"$__schemaType",{enumerable:!1,writable:!0,configurable:!1});Object.defineProperty(pi.prototype,"$isMongooseMap",{enumerable:!1,writable:!1,configurable:!1,value:!0});Object.defineProperty(pi.prototype,"$__deferredCalls",{enumerable:!1,writable:!1,configurable:!1,value:!0});function tR(t){let e=typeof t;if(e!=="string")throw new TypeError(`Mongoose maps only support string keys, got ${e}`);if(t.startsWith("$"))throw new Error(`Mongoose maps do not support keys that start with "$", got "${t}"`);if(t.includes("."))throw new Error(`Mongoose maps do not support keys that contain ".", got "${t}"`);if(Nae.has(t))throw new Error(`Mongoose maps do not support reserved key name "${t}"`)}rR.exports=pi});var sR=g((aSe,nR)=>{"use strict";d();nR.exports=cs().UUID});var Bl=g(mi=>{"use strict";d();mi.Array=CO();mi.Buffer=Dh();mi.Document=mi.Embedded=bl();mi.DocumentArray=Ta();mi.Decimal128=Ym();mi.ObjectId=Eo();mi.Map=Yy();mi.Subdocument=My();mi.UUID=sR()});var oR=g((fSe,iR)=>{"use strict";d();var Rae=Xn(),Il=class extends Rae{},aw=Is();Object.defineProperty(Il.prototype,"enum",aw);Object.defineProperty(Il.prototype,"of",aw);Object.defineProperty(Il.prototype,"castNonArrays",aw);iR.exports=Il});var aR=g((pSe,uR)=>{"use strict";d();uR.exports=cw;function cw(t){if(!Array.isArray(t))return{min:0,max:0,containsNonArrayItem:!0};if(t.length===0)return{min:1,max:1,containsNonArrayItem:!1};if(t.length===1&&!Array.isArray(t[0]))return{min:1,max:1,containsNonArrayItem:!1};let e=cw(t[0]);for(let r=1;r<t.length;++r){let n=cw(t[r]);n.min<e.min&&(e.min=n.min),n.max>e.max&&(e.max=n.max),e.containsNonArrayItem=e.containsNonArrayItem||n.containsNonArrayItem}return e.min=e.min+1,e.max=e.max+1,e}});var kh=g((ySe,lR)=>{"use strict";d();var cR=require("assert");lR.exports=function(e){if(e==null)return e;if(e==="")return null;if((typeof e=="string"||typeof e=="boolean")&&(e=Number(e)),cR.ok(!isNaN(e)),e instanceof Number)return e.valueOf();if(typeof e=="number")return e;if(!Array.isArray(e)&&typeof e.valueOf=="function")return Number(e.valueOf());if(e.toString&&!Array.isArray(e)&&e.toString()==Number(e))return Number(e);cR.ok(!1)}});var lw=g((ESe,hR)=>{"use strict";d();hR.exports=function(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e))for(let r=e.length-1;r>=0;--r)e[r]===void 0&&e.splice(r,1);for(let r of Object.keys(e))e[r]===void 0&&delete e[r];return e}});var pR=g((ASe,dR)=>{"use strict";d();var Pl=Gr(),fR=gu(),Qy=kh(),vae=lw(),$ae=new Set(["$and","$or"]),xae=new Set(["$cmp","$eq","$lt","$lte","$gt","$gte"]),kae=new Set(["$multiply","$divide","$log","$mod","$trunc","$avg","$max","$min","$stdDevPop","$stdDevSamp","$sum"]),qae=new Set(["$abs","$exp","$ceil","$floor","$ln","$log10","$sqrt","$sin","$cos","$tan","$asin","$acos","$atan","$atan2","$asinh","$acosh","$atanh","$sinh","$cosh","$tanh","$degreesToRadians","$radiansToDegrees"]),Lae=new Set(["$arrayElemAt","$first","$last"]),jae=new Set(["$year","$month","$week","$dayOfMonth","$dayOfYear","$hour","$minute","$second","$isoDayOfWeek","$isoWeekYear","$isoWeek","$millisecond"]),Uae=new Set(["$not"]);dR.exports=function(e,r,n){if(typeof e!="object"||e===null)throw new Error("`$expr` must be an object");return Fs(e,r,n)};function Fs(t,e,r){if(qh(t)||t===null)return t;t.$cond!=null?Array.isArray(t.$cond)?t.$cond=t.$cond.map(s=>Fs(s,e,r)):(t.$cond.if=Fs(t.$cond.if,e,r),t.$cond.then=Fs(t.$cond.then,e,r),t.$cond.else=Fs(t.$cond.else,e,r)):t.$ifNull!=null?t.$ifNull.map(s=>Fs(s,e,r)):t.$switch!=null&&(Array.isArray(t.$switch.branches)&&(t.$switch.branches=t.$switch.branches.map(s=>Fs(s,e,r))),"default"in t.$switch&&(t.$switch.default=Fs(t.$switch.default,e,r)));let n=Object.keys(t);for(let s of n)$ae.has(s)?t[s]=t[s].map(i=>Fs(i,e,r)):xae.has(s)?t[s]=Wae(t[s],e,r):kae.has(s)?t[s]=zae(t[s],e,r):qae.has(s)?t[s]=hw(t[s],e,r):Uae.has(s)&&(t[s]=Fs(t[s],e,r));if(t.$in&&(t.$in=Vae(t.$in,e,r)),t.$size&&(t.$size=hw(t.$size,e,r)),t.$round){let s=t.$round;if(!Array.isArray(s)||s.length<1||s.length>2)throw new Pl("Array",s,"$round");t.$round=s.map(i=>hw(i,e,r))}return vae(t),t}function hw(t){if(!Jy(t))return t;try{return Qy(t)}catch{throw new Pl("Number",t)}}function Vae(t,e,r){let n=t[1];if(!qh(n))return t;let s=t[0],i=e.path(n.slice(1));if(i===null){if(r===!1)return t;if(r==="throw")throw new fR("$in");return}if(!i.$isMongooseArray)throw new Error("Path must be an array for $in");return[i.$isMongooseDocumentArray?i.$embeddedSchemaType.cast(s):i.caster.cast(s),n]}function zae(t){if(!Array.isArray(t)){if(!Jy(t))return t;try{return Qy(t)}catch{throw new Pl("Number",t)}}return t.map(e=>{if(!Jy(e))return e;try{return Qy(e)}catch{throw new Pl("Number",e)}})}function Wae(t,e,r){if(!Array.isArray(t)||t.length!==2)throw new Error("Comparison operator must be an array of length 2");t[0]=Fs(t[0],e,r);let n=t[0];if(Jy(t[1])){let s=null,i=null,o=null;if(qh(n))s=n.slice(1),i=e.path(s);else if(typeof n=="object"&&n!=null)for(let a of Object.keys(n))jae.has(a)&&qh(n[a])?(s=n[a].slice(1)+"."+a,o=Qy):Lae.has(a)&&qh(n[a])&&(s=n[a].slice(1)+"."+a,i=e.path(n[a].slice(1)),i!=null&&(i.$isMongooseDocumentArray?i=i.$embeddedSchemaType:i.$isMongooseArray&&(i=i.caster)));let u=typeof t[1]=="object"&&t[1]!=null&&t[1].$literal!=null;if(i!=null)u?t[1]={$literal:i.cast(t[1].$literal)}:t[1]=i.cast(t[1]);else if(o!=null)if(u)try{t[1]={$literal:o(t[1].$literal)}}catch{throw new Pl(o.name.replace(/^cast/,""),t[1],s+".$literal")}else try{t[1]=o(t[1])}catch{throw new Pl(o.name.replace(/^cast/,""),t[1],s)}else{if(s!=null&&r===!0)return;if(s!=null&&r==="throw")throw new fR(s)}}else t[1]=Fs(t[1]);return t}function qh(t){return typeof t=="string"&&t[0]==="$"}function Jy(t){return typeof t=="string"&&t[0]==="$"?!1:typeof t=="object"&&t!==null&&Object.keys(t).find(e=>e[0]==="$")?t.$literal!=null:!0}});var Xy=g((OSe,mR)=>{"use strict";d();var Hae=Gr();mR.exports=function(e,r){if(e==null)return e;if(e._id&&typeof e._id=="string")return e._id;if(e.toString&&e.toString!==Object.prototype.toString&&!Array.isArray(e))return e.toString();throw new Hae("string",e,r)}});var _R=g((CSe,ER)=>{"use strict";d();var Gae=Gr(),yR=hy(),gR=Xy();ER.exports=function(e,r){if(e==null||typeof e!="object")throw new Gae("$text",e,r);return e.$search!=null&&(e.$search=gR(e.$search,r+".$search")),e.$language!=null&&(e.$language=gR(e.$language,r+".$language")),e.$caseSensitive!=null&&(e.$caseSensitive=yR(e.$caseSensitive,r+".$castSensitive")),e.$diacriticSensitive!=null&&(e.$diacriticSensitive=yR(e.$diacriticSensitive,r+".$diacriticSensitive")),e}});var Lh=g((TSe,AR)=>{"use strict";d();var Kae=new Set(["$ref","$id","$db"]);AR.exports=function(e){return e[0]==="$"&&!Kae.has(e)}});var Ba=g((MSe,bR)=>{"use strict";d();var SR=Gr(),fw=gu(),Yae=jh(),Qae=pR(),Jae=Xy(),Xae=_R(),Zae=kt(),OR=by(),wR=Lh(),ece=require("util"),pw=yu(),dw=Sh(),CR=Ae(),tce=["Polygon","MultiPolygon"];bR.exports=function t(e,r,n,s){if(Array.isArray(r))throw new Error("Query filter must be an object, got an array ",ece.inspect(r));if(r==null)return r;e!=null&&e.discriminators!=null&&r[e.options.discriminatorKey]!=null&&(e=OR(e,r[e.options.discriminatorKey])||e);let i=Object.keys(r),o=i.length,u,a,c,l,h,f,p;for(n=n||{};o--;)if(h=i[o],p=r[h],h==="$or"||h==="$nor"||h==="$and"){if(!Array.isArray(p))throw new SR("Array",p,h);for(let m=p.length-1;m>=0;m--){if(p[m]==null||typeof p[m]!="object")throw new SR("Object",p[m],h+"."+m);let y=Object.keys(p[m]).length,A=p[m][e.options.discriminatorKey];if(A==null)p[m]=t(e,p[m],n,s);else{let S=OR(s.schema,A);p[m]=t(S||e,p[m],n,s)}Object.keys(p[m]).length===0&&y!==0&&p.splice(m,1)}p.length===0&&delete r[h]}else if(h==="$where"){if(f=typeof p,f!=="string"&&f!=="function")throw new Error("Must have a string or function for $where");f==="function"&&(r[h]=p.toString());continue}else if(h==="$expr"){p=Qae(p,e);continue}else if(h==="$elemMatch")p=t(e,p,n,s);else if(h==="$text")p=Xae(p,h);else if(h==="$comment"&&!e.paths.hasOwnProperty("$comment"))p=Jae(p,h),r[h]=p;else{if(!e)continue;if(c=e.path(h),!c){let m=h.split("."),y=m.length;for(;y--;){let A=m.slice(0,y).join("."),S=m.slice(y).join("."),O=e.path(A),D=O&&O.schema&&O.schema.options&&O.schema.options.discriminatorKey;if(O!=null&&(O.schema&&O.schema.discriminators)!=null&&D!=null&&S!==D){let b=Zae(r,A+"."+D),N=O.schema.discriminators;typeof b=="string"&&N[b]!=null?c=N[b].path(S):b!=null&&Object.keys(b).length===1&&Array.isArray(b.$in)&&b.$in.length===1&&typeof b.$in[0]=="string"&&N[b.$in[0]]!=null&&(c=N[b.$in[0]].path(S))}}}if(c){if(p==null)continue;if(CR.isPOJO(p))if(a=Object.keys(p).some(wR),!a)r[h]=c.castForQuery(null,p,s);else{let m=Object.keys(p),y,A=m.length;for(;A--;)if(y=m[A],l=p[y],y==="$elemMatch")l&&c!=null&&c.schema!=null?t(c.schema,l,n,s):l&&c!=null&&c.$isMongooseArray&&(CR.isPOJO(l)&&l.$not!=null?t(e,l,n,s):p[y]=c.castForQuery(y,l,s));else if(y==="$not"){if(l&&c){if(u=Object.keys(l),u.length&&wR(u[0]))for(let S in l)l[S]=c.castForQuery(S,l[S],s);else p[y]=c.castForQuery(y,l,s);continue}}else p[y]=c.castForQuery(y,l,s)}else if(Array.isArray(p)&&["Buffer","Array"].indexOf(c.instance)===-1&&!n.sanitizeFilter){let m=[],y=p;for(let A of y)m.push(c.castForQuery(null,A,s));r[h]={$in:m}}else r[h]=c.castForQuery(null,p,s)}else{let m=h.split("."),y=m.length,A,S,O;for(;y--&&(A=m.slice(0,y).join("."),c=e.path(A),!c););if(c){if(c.caster&&c.caster.schema){O={},S=m.slice(y).join("."),O[S]=p;let N=t(c.caster.schema,O,n,s)[S];N===void 0?delete r[h]:r[h]=N}else r[h]=p;continue}if(pw(p)){let N="";if(p.$near?N="$near":p.$nearSphere?N="$nearSphere":p.$within?N="$within":p.$geoIntersects?N="$geoIntersects":p.$geoWithin&&(N="$geoWithin"),N){let R=new Yae.Number("__QueryCasting__"),F=p[N];if(p.$maxDistance!=null&&(p.$maxDistance=R.castForQuery(null,p.$maxDistance,s)),p.$minDistance!=null&&(p.$minDistance=R.castForQuery(null,p.$minDistance,s)),N==="$within"){let G=F.$center||F.$centerSphere||F.$box||F.$polygon;if(!G)throw new Error("Bad $within parameter: "+JSON.stringify(p));F=G}else if(N==="$near"&&typeof F.type=="string"&&Array.isArray(F.coordinates))F=F.coordinates;else if((N==="$near"||N==="$nearSphere"||N==="$geoIntersects")&&F.$geometry&&typeof F.$geometry.type=="string"&&Array.isArray(F.$geometry.coordinates))F.$maxDistance!=null&&(F.$maxDistance=R.castForQuery(null,F.$maxDistance,s)),F.$minDistance!=null&&(F.$minDistance=R.castForQuery(null,F.$minDistance,s)),dw(F.$geometry)&&(F.$geometry=F.$geometry.toObject({transform:!1,virtuals:!1})),F=F.$geometry.coordinates;else if(N==="$geoWithin")if(F.$geometry){dw(F.$geometry)&&(F.$geometry=F.$geometry.toObject({virtuals:!1}));let G=F.$geometry.type;if(tce.indexOf(G)===-1)throw new Error('Invalid geoJSON type for $geoWithin "'+G+'", must be "Polygon" or "MultiPolygon"');F=F.$geometry.coordinates}else F=F.$box||F.$polygon||F.$center||F.$centerSphere,dw(F)&&(F=F.toObject({virtuals:!1}));mw(F,R,s);continue}}if(e.nested[h])continue;let D="strict"in n?n.strict:e.options.strict,b=rce(n,e._userProvidedOptions,e.options,s);if(n.upsert&&D)throw D==="throw"?new fw(h):new fw(h,'Path "'+h+'" is not in schema, strict mode is `true`, and upsert is `true`.');if(b==="throw")throw new fw(h,'Path "'+h+`" is not in schema and strictQuery is 'throw'.`);b&&delete r[h]}}return r};function mw(t,e,r){if(Array.isArray(t))t.forEach(function(n,s){if(Array.isArray(n)||pw(n))return mw(n,e,r);t[s]=e.castForQuery(null,n,r)});else{let n=Object.keys(t),s=n.length;for(;s--;){let i=n[s],o=t[i];Array.isArray(o)||pw(o)?(mw(o,e,r),t[i]=o):t[i]=e.castForQuery({val:o,context:r})}}}function rce(t,e,r,n){if("strictQuery"in t)return t.strictQuery;if("strictQuery"in e)return e.strictQuery;let s=n&&n.mongooseCollection&&n.mongooseCollection.conn&&n.mongooseCollection.conn.base&&n.mongooseCollection.conn.base.options;return s&&"strictQuery"in s?s.strictQuery:r.strictQuery}});var DR=g((ISe,TR)=>{"use strict";d();var nce=Xn(),Ia=class extends nce{},Zy=Is();Object.defineProperty(Ia.prototype,"min",Zy);Object.defineProperty(Ia.prototype,"max",Zy);Object.defineProperty(Ia.prototype,"enum",Zy);Object.defineProperty(Ia.prototype,"populate",Zy);TR.exports=Ia});var e2=g((NSe,BR)=>{"use strict";d();var sce=Gr();function ice(t){let e=this;return Array.isArray(t)?t.map(function(r){return MR(e.path,r)}):Buffer.isBuffer(t)?t:MR(e.path,t)}function MR(t,e){let r=Number(e);if(isNaN(r))throw new sce("number",e,t);return r}BR.exports=ice});var Ew=g((RSe,IR)=>{"use strict";d();var n2=Bn(),oce=DR(),To=Jt(),uce=kh(),t2=e2(),yw=Ae(),gw=To.CastError;function Ct(t,e){To.call(this,t,e,"Number")}Ct.get=To.get;Ct.set=To.set;Ct.setters=[];Ct._cast=uce;Ct.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Ct._defaultCaster=t=>{if(typeof t!="number")throw new Error;return t};Ct.schemaName="Number";Ct.defaultOptions={};Ct.prototype=Object.create(To.prototype);Ct.prototype.constructor=Ct;Ct.prototype.OptionsConstructor=oce;Ct._checkRequired=t=>typeof t=="number"||t instanceof Number;Ct.checkRequired=To.checkRequired;Ct.prototype.checkRequired=function(e,r){return typeof e=="object"&&To._isRef(this,e,r,!0)?e!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Ct.checkRequired())(e)};Ct.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minValidator},this)),t!=null){let r=e||n2.messages.Number.min;r=r.replace(/{MIN}/,t),this.validators.push({validator:this.minValidator=function(n){return n==null||n>=t},message:r,type:"min",min:t})}return this};Ct.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxValidator},this)),t!=null){let r=e||n2.messages.Number.max;r=r.replace(/{MAX}/,t),this.validators.push({validator:this.maxValidator=function(n){return n==null||n<=t},message:r,type:"max",max:t})}return this};Ct.prototype.enum=function(t,e){return this.enumValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.enumValidator},this)),Array.isArray(t)||(yw.isPOJO(t)&&t.values!=null?(e=t.message,t=t.values):typeof t=="number"&&(t=Array.prototype.slice.call(arguments),e=null),yw.isPOJO(t)&&(t=Object.values(t)),e=e||n2.messages.Number.enum),e=e??n2.messages.Number.enum,this.enumValidator=r=>r==null||t.indexOf(r)!==-1,this.validators.push({validator:this.enumValidator,message:e,type:"enum",enumValues:t}),this};Ct.prototype.cast=function(t,e,r){if(typeof t!="number"&&To._isRef(this,t,e,r)&&(t==null||yw.isNonBuiltinObject(t)))return this._castRef(t,e,r);let n=t&&typeof t._id<"u"?t._id:t,s;typeof this._castFunction=="function"?s=this._castFunction:typeof this.constructor.cast=="function"?s=this.constructor.cast():s=Ct.cast();try{return s(n)}catch(i){throw new gw("Number",n,this.path,i,this)}};function r2(t){return this.cast(t)}function ace(t){let e=this;return Array.isArray(t)?t.map(function(r){return e.cast(r)}):[this.cast(t)]}Ct.prototype.$conditionalHandlers={...To.prototype.$conditionalHandlers,$bitsAllClear:t2,$bitsAnyClear:t2,$bitsAllSet:t2,$bitsAnySet:t2,$gt:r2,$gte:r2,$lt:r2,$lte:r2,$mod:ace};Ct.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new gw("number",e,this.path,null,this);return n.call(this,e,r)}try{e=this.applySetters(e,r)}catch(s){throw s instanceof gw&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}return e};IR.exports=Ct});var Uh=g(_w=>{"use strict";d();var cce=Ew();_w.castToNumber=PR;_w.castArraysOfNumbers=NR;function PR(t){return cce.cast()(t)}function NR(t,e){t.forEach(function(r,n){Array.isArray(r)?NR(r,e):t[n]=PR.call(e,r)})}});var Ow=g(s2=>{"use strict";d();var FR=Uh().castArraysOfNumbers,Vh=Uh().castToNumber;s2.cast$geoIntersects=fce;s2.cast$near=lce;s2.cast$within=hce;function lce(t){let e=i2();if(Array.isArray(t))return FR(t,this),t;if(Sw(this,t),t&&t.$geometry)return Aw(t,this);if(!Array.isArray(t))throw new TypeError("$near must be either an array or an object with a $geometry property");return e.prototype.castForQuery.call(this,null,t)}function Aw(t,e){switch(t.$geometry.type){case"Polygon":case"LineString":case"Point":FR(t.$geometry.coordinates,e);break;default:break}return Sw(e,t),t}function hce(t){if(Sw(this,t),t.$box||t.$polygon){let e=t.$box?"$box":"$polygon";t[e].forEach(r=>{if(!Array.isArray(r)){let n="Invalid $within $box argument. Expected an array, received "+r;throw new TypeError(n)}r.forEach((n,s)=>{r[s]=Vh.call(this,n)})})}else if(t.$center||t.$centerSphere){let e=t.$center?"$center":"$centerSphere";t[e].forEach((r,n)=>{Array.isArray(r)?r.forEach((s,i)=>{r[i]=Vh.call(this,s)}):t[e][n]=Vh.call(this,r)})}else t.$geometry&&Aw(t,this);return t}function fce(t){if(t.$geometry)return Aw(t,this),t}function Sw(t,e){e.$maxDistance&&(e.$maxDistance=Vh.call(t,e.$maxDistance)),e.$minDistance&&(e.$minDistance=Vh.call(t,e.$minDistance))}});var i2=g((LSe,xR)=>{"use strict";d();var dce=fy(),pce=rO(),vR=Ie(),mce=oR(),Rs=Jt(),u2=Rs.CastError,a2=wa(),yce=XO(),RR=Wy(),gce=aR(),ww=Ba(),Ece=Bt(),_ce=ln(),Ace=Lh(),c2=require("util"),Su=Ae(),Sce=Uh().castToNumber,Cw=Ow(),Oce=Ns(),zh,o2,$R=Symbol("mongoose#isNestedArray"),wce=Object.freeze({});function He(t,e,r,n){o2||(o2=Bl().Embedded);let s="type";if(n&&n.typeKey&&(s=n.typeKey),this.schemaOptions=n,e){let u={};Su.isPOJO(e)&&(e[s]?(u=Ece(e),delete u[s],e=e[s]):e=a2),r!=null&&r.ref!=null&&u.ref==null&&(u.ref=r.ref),e===Object&&(e=a2);let a=typeof e=="string"?e:Su.getFunctionName(e),c=jh(),l=c.hasOwnProperty(a)?c[a]:e;if(this.casterConstructor=l,this.casterConstructor instanceof He&&(this.casterConstructor[$R]=!0),typeof l=="function"&&!l.$isArraySubdocument&&!l.$isSchemaMap){let h=this.caster instanceof o2?null:t;this.caster=new l(h,u)}else this.caster=l,this.caster instanceof o2||(this.caster.path=t);this.$embeddedSchemaType=this.caster}this.$isMongooseArray=!0,Rs.call(this,t,r,"Array");let i,o;if(this.defaultValue!=null&&(i=this.defaultValue,o=typeof i=="function"),!("defaultValue"in this)||this.defaultValue!=null){let u=function(){return o?i.call(this):i!=null?[].concat(i):[]};u.$runBeforeSetters=!o,this.default(u)}}He.schemaName="Array";He.options={castNonArrays:!0};He.defaultOptions={};He.set=Rs.set;He.setters=[];He.get=Rs.get;He.prototype=Object.create(Rs.prototype);He.prototype.constructor=He;He.prototype.OptionsConstructor=mce;He._checkRequired=Rs.prototype.checkRequired;He.checkRequired=Rs.checkRequired;He.prototype.virtuals=null;He.prototype.checkRequired=function(e,r){return typeof e=="object"&&Rs._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():He.checkRequired())(e)};He.prototype.enum=function(){let t=this;for(;;){let r=t&&t.caster&&t.caster.instance;if(r==="Array"){t=t.caster;continue}if(r!=="String"&&r!=="Number")throw new Error("`enum` can only be set on an array of strings or numbers , not "+r);break}let e=arguments;return!Array.isArray(arguments)&&Su.isObject(arguments)&&(e=Su.object.vals(e)),t.caster.enum.apply(t.caster,e),this};He.prototype.applyGetters=function(t,e){return e!=null&&e.$__!=null&&e.$populated(this.path)?t:Rs.prototype.applyGetters.call(this,t,e)};He.prototype._applySetters=function(t,e,r,n){if(this.casterConstructor.$isMongooseArray&&He.options.castNonArrays&&!this[$R]){let s=0,i=this;for(;i!=null&&i.$isMongooseArray&&!i.$isMongooseDocumentArray;)++s,i=i.casterConstructor;if(t!=null&&t.length!==0){let o=gce(t);if(o.min===o.max&&o.max<s&&o.containsNonArrayItem)for(let u=o.max;u<s;++u)t=[t]}}return Rs.prototype._applySetters.call(this,t,e,r,n)};He.prototype.cast=function(t,e,r,n,s){zh||(zh=Bl().Array);let i,o;if(Array.isArray(t)){if(!t.length&&e){let p=e.schema.indexedPaths(),m=this.path;for(i=0,o=p.length;i<o;++i){let A=p[i][0][m];if(A==="2dsphere"||A==="2d")return}let y=this.path.endsWith(".coordinates")?this.path.substring(0,this.path.lastIndexOf(".")):null;if(y!=null){for(i=0,o=p.length;i<o;++i)if(p[i][0][y]==="2dsphere")return}}s=s||wce;let c=Su.isMongooseArray(t)?t.__array:t,l=s.path||this.path;if(s.arrayPathIndex!=null&&(l+="."+s.arrayPathIndex),t=zh(c,l,e,this),c=t.__array,r&&e!=null&&e.$__!=null&&e.$populated(this.path))return t;let h=this.caster,f=h.$isMongooseArray;if(h&&this.casterConstructor!==a2)try{let p=c.length;for(i=0;i<p;i++){let m={};f&&(s.arrayPath!=null||h._arrayParentPath!=null)&&(m.arrayPathIndex=i),c[i]=h.applySetters(c[i],e,r,void 0,m)}}catch(p){throw new u2("["+p.kind+"]",c2.inspect(t),this.path+"."+i,p,this)}return t}let u=this.options.castNonArrays!=null?this.options.castNonArrays:He.options.castNonArrays;if(r||u)return e&&r&&e.markModified(this.path),this.cast([t],e,r);throw new u2("Array",c2.inspect(t),this.path,null,this)};He.prototype._castForPopulate=function(e,r){if(zh||(zh=Bl().Array),Array.isArray(e)){let n,s=e.__array?e.__array:e,i=s.length,o=this.caster;if(o&&this.casterConstructor!==a2)try{for(n=0;n<i;n++){let u={};o.$isMongooseArray&&o._arrayParentPath!=null&&(u.arrayPathIndex=n),s[n]=o.cast(s[n],r,!1,void 0,u)}}catch(u){throw new u2("["+u.kind+"]",c2.inspect(e),this.path+"."+n,u,this)}return e}throw new u2("Array",c2.inspect(e),this.path,null,this)};He.prototype.$toObject=He.prototype.toObject;He.prototype.discriminator=function(...t){let e=this;for(;e.$isMongooseArray&&!e.$isMongooseDocumentArray;)if(e=e.casterConstructor,e==null||typeof e=="function")throw new vR("You can only add an embedded discriminator on a document array, "+this.path+" is a plain array");return e.discriminator(...t)};He.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,this.caster,t,this.schemaOptions);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),e};He.prototype._castForQuery=function(t,e){let r=this.casterConstructor;if(t&&r.discriminators&&r.schema&&r.schema.options&&r.schema.options.discriminatorKey)if(typeof t[r.schema.options.discriminatorKey]=="string"&&r.discriminators[t[r.schema.options.discriminatorKey]])r=r.discriminators[t[r.schema.options.discriminatorKey]];else{let a=Oce(r.discriminators,t[r.schema.options.discriminatorKey]);a&&(r=a)}let n=this.casterConstructor.prototype,s=n&&n.castForQuery,i=n&&n.cast,o=r.castForQuery,u=this.caster;return Array.isArray(t)?(this.setters.reverse().forEach(a=>{t=a.call(this,t,this)}),t=t.map(function(a){return Su.isObject(a)&&a.$elemMatch?a:s?(a=s.call(u,null,a,e),a):i?(a=i.call(u,a),a):o?(a=o.call(u,null,a,e),a):(a!=null&&(a=new r(a)),a)})):s?t=s.call(u,null,t,e):i?t=i.call(u,t):o?t=o.call(u,null,t,e):t!=null&&(t=new r(t)),t};He.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with Array.");return n.call(this,e,r)}else return this._castForQuery(e,r)};He.prototype.virtual=function(e,r){if(e instanceof RR||_ce(e)==="VirtualType")return this.virtual(e.path,e.options);if(r=new yce(r),Su.hasUserDefinedProperty(r,["ref","refPath"]))throw new vR("Cannot set populate virtual as a property of an array");let n=new RR(r,e);return this.virtuals===null&&(this.virtuals={}),this.virtuals[e]=n,n};function Cce(t,e){return Array.isArray(t)||(t=[t]),t=t.map(r=>{if(!Su.isObject(r))return r;if(r.$elemMatch!=null)return{$elemMatch:ww(this.casterConstructor.schema,r.$elemMatch,null,this&&this.$$context)};let n={};return n[this.path]=r,ww(this.casterConstructor.schema,n,null,this&&this.$$context)[this.path]},this),this.castForQuery(null,t,e)}function bce(t,e){let r=Object.keys(t),n=r.length;for(let s=0;s<n;++s){let i=r[s],o=t[i];Ace(i)&&o!=null&&(t[i]=this.castForQuery(i,o,e))}return t}var pt=He.prototype.$conditionalHandlers={};pt.$all=Cce;pt.$options=String;pt.$elemMatch=bce;pt.$geoIntersects=Cw.cast$geoIntersects;pt.$or=bw("$or");pt.$and=bw("$and");pt.$nor=bw("$nor");function bw(t){return function(r,n){if(!Array.isArray(r))throw new TypeError("conditional "+t+" requires an array");let s=[];for(let i of r)s.push(ww(this.casterConstructor.schema??n.schema,i,null,this&&this.$$context));return s}}pt.$near=pt.$nearSphere=Cw.cast$near;pt.$within=pt.$geoWithin=Cw.cast$within;pt.$size=pt.$minDistance=pt.$maxDistance=Sce;pt.$exists=dce;pt.$type=pce;pt.$eq=pt.$gt=pt.$gte=pt.$lt=pt.$lte=pt.$not=pt.$regex=pt.$ne=He.prototype._castForQuery;pt.$nin=Rs.prototype.$conditionalHandlers.$nin;pt.$in=Rs.prototype.$conditionalHandlers.$in;xR.exports=He});var qR=g((USe,kR)=>{"use strict";d();var Tce=require("assert"),{Long:Dce}=cs();kR.exports=function(e){if(e==null)return e;if(e==="")return null;if(typeof e=="bigint")return e;if(e instanceof Dce)return e.toBigInt();if(typeof e=="string"||typeof e=="number")return BigInt(e);Tce.ok(!1)}});var UR=g((zSe,jR)=>{"use strict";d();var LR=Gr(),Nl=Jt(),Mce=qR();function Vt(t,e){Nl.call(this,t,e,"BigInt")}Vt.schemaName="BigInt";Vt.defaultOptions={};Vt.prototype=Object.create(Nl.prototype);Vt.prototype.constructor=Vt;Vt._cast=Mce;Vt.set=Nl.set;Vt.setters=[];Vt.get=Nl.get;Vt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Vt._checkRequired=t=>t!=null;Vt.checkRequired=Nl.checkRequired;Vt.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Vt.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Vt.cast();try{return e(t)}catch(r){throw new LR("BigInt",t,this.path,r,this)}};Vt.$conditionalHandlers={...Nl.prototype.$conditionalHandlers,$gt:l2,$gte:l2,$lt:l2,$lte:l2};function l2(t,e){return this.castForQuery(null,t,e)}Vt.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=Vt.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(null,e,r);try{return this.applySetters(e,r)}catch(s){throw s instanceof LR&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};Vt.prototype._castNullish=function(e){return typeof e>"u"||(typeof this.constructor.cast=="function"?this.constructor.cast():Vt.cast())==null,e};jR.exports=Vt});var WR=g((HSe,zR)=>{"use strict";d();var VR=Gr(),Fl=Jt(),Wh=hy();function bt(t,e){Fl.call(this,t,e,"Boolean")}bt.schemaName="Boolean";bt.defaultOptions={};bt.prototype=Object.create(Fl.prototype);bt.prototype.constructor=bt;bt._cast=Wh;bt.set=Fl.set;bt.setters=[];bt.get=Fl.get;bt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};bt._defaultCaster=t=>{if(t!=null&&typeof t!="boolean")throw new Error;return t};bt._checkRequired=t=>t===!0||t===!1;bt.checkRequired=Fl.checkRequired;bt.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Object.defineProperty(bt,"convertToTrue",{get:()=>Wh.convertToTrue,set:t=>{Wh.convertToTrue=t}});Object.defineProperty(bt,"convertToFalse",{get:()=>Wh.convertToFalse,set:t=>{Wh.convertToFalse=t}});bt.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=bt.cast();try{return e(t)}catch(r){throw new VR("Boolean",t,this.path,r,this)}};bt.$conditionalHandlers={...Fl.prototype.$conditionalHandlers};bt.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=bt.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(null,e,r);try{return this.applySetters(e,r)}catch(s){throw s instanceof VR&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};bt.prototype._castNullish=function(e){if(typeof e>"u")return e;let r=typeof this.constructor.cast=="function"?this.constructor.cast():bt.cast();return r==null?e:r.convertToFalse instanceof Set&&r.convertToFalse.has(e)?!1:r.convertToTrue instanceof Set&&r.convertToTrue.has(e)?!0:e};zR.exports=bt});var GR=g((KSe,HR)=>{"use strict";d();var Bce=Xn(),h2=class extends Bce{},Ice=Is();Object.defineProperty(h2.prototype,"subtype",Ice);HR.exports=h2});var QR=g((QSe,YR)=>{"use strict";d();var Rl=Dh(),Pce=GR(),Do=Jt(),f2=e2(),KR=Ae(),Tw=Rl.Binary,p2=Do.CastError;function Ir(t,e){Do.call(this,t,e,"Buffer")}Ir.schemaName="Buffer";Ir.defaultOptions={};Ir.prototype=Object.create(Do.prototype);Ir.prototype.constructor=Ir;Ir.prototype.OptionsConstructor=Pce;Ir._checkRequired=t=>!!(t&&t.length);Ir.set=Do.set;Ir.setters=[];Ir.get=Do.get;Ir.checkRequired=Do.checkRequired;Ir.prototype.checkRequired=function(t,e){return Do._isRef(this,t,e,!0)?!!t:this.constructor._checkRequired(t)};Ir.prototype.cast=function(t,e,r){let n;if(Do._isRef(this,t,e,r)){if(t&&t.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return(!t||!t.isMongooseBuffer)&&(t=new Rl(t,[this.path,e]),this.options.subtype!=null&&(t._subtype=this.options.subtype)),t;if(t instanceof Tw){if(n=new Rl(t.value(!0),[this.path,e]),typeof t.sub_type!="number")throw new p2("Buffer",t,this.path,null,this);return n._subtype=t.sub_type,n}if(t==null||KR.isNonBuiltinObject(t))return this._castRef(t,e,r)}if(t&&t._id&&(t=t._id),t&&t.isMongooseBuffer)return t;if(Buffer.isBuffer(t))return(!t||!t.isMongooseBuffer)&&(t=new Rl(t,[this.path,e]),this.options.subtype!=null&&(t._subtype=this.options.subtype)),t;if(t instanceof Tw){if(n=new Rl(t.value(!0),[this.path,e]),typeof t.sub_type!="number")throw new p2("Buffer",t,this.path,null,this);return n._subtype=t.sub_type,n}if(t===null)return t;let s=typeof t;if(s==="string"||s==="number"||Array.isArray(t)||s==="object"&&t.type==="Buffer"&&Array.isArray(t.data))return s==="number"&&(t=[t]),n=new Rl(t,[this.path,e]),this.options.subtype!=null&&(n._subtype=this.options.subtype),n;if(KR.isPOJO(t)&&(t.$binary instanceof Tw||typeof t.$binary=="string")){let i=this.cast(Buffer.from(t.$binary,"base64"));if(t.$type!=null)return i._subtype=t.$type,i}throw new p2("Buffer",t,this.path,null,this)};Ir.prototype.subtype=function(t){return this.options.subtype=t,this};function d2(t,e){return this.castForQuery(null,t,e)}Ir.prototype.$conditionalHandlers={...Do.prototype.$conditionalHandlers,$bitsAllClear:f2,$bitsAnyClear:f2,$bitsAllSet:f2,$bitsAnySet:f2,$gt:d2,$gte:d2,$lt:d2,$lte:d2};Ir.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with Buffer.");return n.call(this,e)}let s;try{s=this.applySetters(e,r)}catch(i){throw i instanceof p2&&i.path===this.path&&this.$fullPath!=null&&(i.path=this.$fullPath),i}return s&&s.toObject({transform:!1,virtuals:!1})};YR.exports=Ir});var XR=g((XSe,JR)=>{"use strict";d();var Nce=Xn(),vl=class extends Nce{},Dw=Is();Object.defineProperty(vl.prototype,"min",Dw);Object.defineProperty(vl.prototype,"max",Dw);Object.defineProperty(vl.prototype,"expires",Dw);JR.exports=vl});var ev=g((eOe,ZR)=>{"use strict";d();var Mw=require("assert");ZR.exports=function(e){if(e==null||e==="")return null;if(e instanceof Date)return Mw.ok(!isNaN(e.valueOf())),e;let r;if(Mw.ok(typeof e!="boolean"),e instanceof Number||typeof e=="number"?r=new Date(e):typeof e=="string"&&!isNaN(Number(e))&&(Number(e)>=275761||Number(e)<-271820)?r=new Date(Number(e)):typeof e.valueOf=="function"?r=new Date(e.valueOf()):r=new Date(e),!isNaN(r.valueOf()))return r;Mw.ok(!1)}});var sv=g((rOe,nv)=>{"use strict";d();var tv=Bn(),Fce=XR(),Ou=Jt(),Rce=ev(),vce=ln(),$ce=Ae(),rv=Ou.CastError;function Tt(t,e){Ou.call(this,t,e,"Date")}Tt.schemaName="Date";Tt.defaultOptions={};Tt.prototype=Object.create(Ou.prototype);Tt.prototype.constructor=Tt;Tt.prototype.OptionsConstructor=Fce;Tt._cast=Rce;Tt.set=Ou.set;Tt.setters=[];Tt.get=Ou.get;Tt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Tt._defaultCaster=t=>{if(t!=null&&!(t instanceof Date))throw new Error;return t};Tt.prototype.expires=function(t){return vce(this._index)!=="Object"&&(this._index={}),this._index.expires=t,$ce.expires(this._index),this};Tt._checkRequired=t=>t instanceof Date;Tt.checkRequired=Ou.checkRequired;Tt.prototype.checkRequired=function(t,e){return typeof t=="object"&&Ou._isRef(this,t,e,!0)?t!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Tt.checkRequired())(t)};Tt.prototype.min=function(t,e){if(this.minValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minValidator},this)),t){let r=e||tv.messages.Date.min;typeof r=="string"&&(r=r.replace(/{MIN}/,t===Date.now?"Date.now()":t.toString()));let n=this;this.validators.push({validator:this.minValidator=function(s){let i=t;typeof t=="function"&&t!==Date.now&&(i=i.call(this));let o=i===Date.now?i():n.cast(i);return s===null||s.valueOf()>=o.valueOf()},message:r,type:"min",min:t})}return this};Tt.prototype.max=function(t,e){if(this.maxValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxValidator},this)),t){let r=e||tv.messages.Date.max;typeof r=="string"&&(r=r.replace(/{MAX}/,t===Date.now?"Date.now()":t.toString()));let n=this;this.validators.push({validator:this.maxValidator=function(s){let i=t;typeof i=="function"&&i!==Date.now&&(i=i.call(this));let o=i===Date.now?i():n.cast(i);return s===null||s.valueOf()<=o.valueOf()},message:r,type:"max",max:t})}return this};Tt.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Tt.cast();try{return e(t)}catch(r){throw new rv("date",t,this.path,r,this)}};function m2(t){return this.cast(t)}Tt.prototype.$conditionalHandlers={...Ou.prototype.$conditionalHandlers,$gt:m2,$gte:m2,$lt:m2,$lte:m2};Tt.prototype.castForQuery=function(t,e,r){if(t==null)try{return this.applySetters(e,r)}catch(s){throw s instanceof rv&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}let n=this.$conditionalHandlers[t];if(!n)throw new Error("Can't use "+t+" with Date.");return n.call(this,e)};nv.exports=Tt});var ov=g((sOe,iv)=>{"use strict";d();var Pa=Ym(),xce=require("assert");iv.exports=function(e){if(e==null)return e;if(typeof e=="object"&&typeof e.$numberDecimal=="string")return Pa.fromString(e.$numberDecimal);if(e instanceof Pa)return e;if(typeof e=="string")return Pa.fromString(e);if(typeof Buffer=="function"&&Buffer.isBuffer(e))return new Pa(e);if(typeof Uint8Array=="function"&&e instanceof Uint8Array)return new Pa(e);if(typeof e=="number")return Pa.fromString(String(e));if(typeof e.valueOf=="function"&&typeof e.valueOf()=="string")return Pa.fromString(e.valueOf());xce.ok(!1)}});var av=g((oOe,uv)=>{"use strict";d();var Mo=Jt(),kce=Mo.CastError,qce=ov(),Bw=Mr();function sr(t,e){Mo.call(this,t,e,"Decimal128")}sr.schemaName="Decimal128";sr.defaultOptions={};sr.prototype=Object.create(Mo.prototype);sr.prototype.constructor=sr;sr._cast=qce;sr.set=Mo.set;sr.setters=[];sr.get=Mo.get;sr.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};sr._defaultCaster=t=>{if(t!=null&&!Bw(t,"Decimal128"))throw new Error;return t};sr._checkRequired=t=>Bw(t,"Decimal128");sr.checkRequired=Mo.checkRequired;sr.prototype.checkRequired=function(e,r){return Mo._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():sr.checkRequired())(e)};sr.prototype.cast=function(t,e,r){if(Mo._isRef(this,t,e,r))return Bw(t,"Decimal128")?t:this._castRef(t,e,r);let n;typeof this._castFunction=="function"?n=this._castFunction:typeof this.constructor.cast=="function"?n=this.constructor.cast():n=sr.cast();try{return n(t)}catch(s){throw new kce("Decimal128",t,this.path,s,this)}};function y2(t){return this.cast(t)}sr.prototype.$conditionalHandlers={...Mo.prototype.$conditionalHandlers,$gt:y2,$gte:y2,$lt:y2,$lte:y2};uv.exports=sr});var lv=g((aOe,cv)=>{"use strict";d();var Lce=Xn(),g2=class extends Lce{},jce=Is();Object.defineProperty(g2.prototype,"_id",jce);cv.exports=g2});var Iw=g((lOe,hv)=>{"use strict";d();hv.exports=function(e,r,n){if(e.length===0)return n();let s=e.length,i=null;for(let o of e)r(o,function(u){if(i==null){if(u!=null)return i=u,n(i);if(--s<=0)return n()}})}});var dv=g((fOe,fv)=>{"use strict";d();var Uce=Iw();fv.exports=function(e){e.s.hooks.pre("save",!1,function(s){if(this.$isSubdocument){s();return}let i=this,o=this.$getAllSubdocs({useCache:!0});if(!o.length){s();return}Uce(o,function(u,a){u.$__schema.s.hooks.execPre("save",u,function(c){a(c)})},function(u){if(i.$__.saveOptions&&(i.$__.saveOptions.__subdocs=null),u)return i.$__schema.s.hooks.execPost("save:error",i,[i],{error:u},function(a){s(a)});s()})},null,!0),e.s.hooks.post("save",async function(){let s=this.$__.removedSubdocs;if(!s||!s.length)return;let i=[];for(let o of s)i.push(new Promise((u,a)=>{o.$__schema.s.hooks.execPost("deleteOne",o,[o],function(c){if(c)return a(c);u()})}));this.$__.removedSubdocs=null,await Promise.all(i)}),e.s.hooks.post("save",async function(){if(this.$isSubdocument)return;let s=this,i=this.$getAllSubdocs({useCache:!0});if(!i.length)return;let o=[];for(let u of i)o.push(new Promise((a,c)=>{u.$__schema.s.hooks.execPost("save",u,[u],function(l){if(l)return c(l);a()})}));try{await Promise.all(o)}catch(u){await new Promise((a,c)=>{this.$__schema.s.hooks.execPost("save:error",s,[s],{error:u},function(l){if(l)return c(l);a()})})}},null,!0)}});var yv=g((pOe,Nw)=>{"use strict";d();var Vce=fe().objectIdSymbol,pv=Ae();Nw.exports=function(e){e.post("init",function(){return Pw.call(this),this}),e.pre("save",function(n){mv.call(this),n()}),e.pre("remove",function(n){mv.call(this),n()}),e.post("save",function(){Pw.call(this)})};function mv(){let t,e;if(this.$__.shardval){t=Object.keys(this.$__.shardval),e=t.length,this.$where=this.$where||{};for(let r=0;r<e;++r)this.$where[t[r]]=this.$__.shardval[t[r]]}}Nw.exports.storeShard=Pw;function Pw(){let t=this.$__schema.options.shardKey||this.$__schema.options.shardkey;if(!pv.isPOJO(t))return;let e=this.$__.shardval={},r=Object.keys(t),n=r.length,s;for(let i=0;i<n;++i)s=this.$__getValue(r[i]),s==null?e[r[i]]=s:pv.isMongooseObject(s)?e[r[i]]=s.toObject({depopulate:!0,_isNested:!0}):s instanceof Date||s[Vce]?e[r[i]]=s:typeof s.valueOf=="function"?e[r[i]]=s.valueOf():e[r[i]]=s}});var _v=g((yOe,Ev)=>{"use strict";d();var $l=fe().arrayAtomicsSymbol,Fw=fe().sessionNewDocuments,zce=Ae();Ev.exports=function(e){e.pre("save",function(){let n=this.$session();if(n!=null&&!(n.transaction==null||n[Fw]==null)&&!n[Fw].has(this)){let s={};this.isNew&&(s.isNew=!0),this.$__schema.options.versionKey&&(s.versionKey=this.get(this.$__schema.options.versionKey)),s.modifiedPaths=new Set(Object.keys(this.$__.activePaths.getStatePaths("modify"))),s.atomics=Wce(this),n[Fw].set(this,s)}})};function Wce(t,e){let r=new Map;e=e||new Map;let n=Object.keys(t.$__.activePaths.init).concat(Object.keys(t.$__.activePaths.modify));for(let i of n){let o=t.$__getValue(i);if(o!=null&&Array.isArray(o)&&zce.isMongooseDocumentArray(o)&&o.length&&o[$l]!=null&&Object.keys(o[$l]).length!==0){let u=e.get(i)||{};r.set(i,gv(u,o[$l]))}}let s=t.$__dirty();for(let i of s){let o=i.path,u=i.value;if(u!=null&&u[$l]!=null&&Object.keys(u[$l]).length!==0){let a=e.get(o)||{};r.set(o,gv(a,u[$l]))}}return r}function gv(t,e){return t=t||{},e.$pullAll!=null&&(t.$pullAll=(t.$pullAll||[]).concat(e.$pullAll)),e.$push!=null&&(t.$push=t.$push||{},t.$push.$each=(t.$push.$each||[]).concat(e.$push.$each)),e.$addToSet!=null&&(t.$addToSet=(t.$addToSet||[]).concat(e.$addToSet)),e.$set!=null&&(t.$set=Array.isArray(e.$set)?[...e.$set]:Object.assign({},e.$set)),t}});var Sv=g((EOe,Av)=>{"use strict";d();Av.exports=function(e){e.pre("save",!1,function(s,i){let o=this;if(this.$isSubdocument)return s();let u=i&&typeof i=="object"&&"validateBeforeSave"in i,a;if(u?a=!!i.validateBeforeSave:a=this.$__schema.options.validateBeforeSave,a){let l=i&&typeof i=="object"&&"validateModifiedOnly"in i?{validateModifiedOnly:i.validateModifiedOnly}:null;this.$validate(l).then(()=>{this.$op="save",s()},h=>{o.$__schema.s.hooks.execPost("save:error",o,[o],{error:h},function(f){o.$op="save",s(f)})})}else s()},null,!0)}});var Rw=g(Hh=>{"use strict";d();Hh.saveSubdocs=dv();Hh.sharding=yv();Hh.trackTransaction=_v();Hh.validateBeforeSave=Sv()});var Cv=g((OOe,wv)=>{"use strict";d();var Ov=Rw();wv.exports=function(e){for(let r of Object.values(Ov))r(e,{deduplicate:!0});e.plugins=Object.values(Ov).map(r=>({fn:r,opts:{deduplicate:!0}})).concat(e.plugins)}});var Dv=g((COe,Tv)=>{"use strict";d();var Hce=my(),Gce=Ea(),Kce=Mr(),Yce=Eo(),bv=yu();Tv.exports=function t(e,r,n,s){let i=Object.keys(r),o=0,u=i.length,a;if(n=n||"",s=s||new WeakSet,!s.has(r)){for(s.add(r);o<u;)if(a=i[o++],!(!n&&(a==="discriminators"||a==="base"||a==="_applyDiscriminators"||a==="_userProvidedOptions"||a==="options"||a==="tree"))&&!(n==="tree"&&r!=null&&r.instanceOfSchema)&&!Gce.has(a)){if(e[a]==null)e[a]=r[a];else if(bv(r[a])){if(bv(e[a])||(e[a]={}),r[a]!=null){if(r[a].$isSingleNested&&e[a].$isMongooseDocumentArray||r[a].$isMongooseDocumentArray&&e[a].$isSingleNested||r[a].$isMongooseDocumentArrayElement&&e[a].$isMongooseDocumentArrayElement)continue;if(r[a].instanceOfSchema){e[a].instanceOfSchema?Hce(e[a],r[a].clone(),!0):e[a]=r[a].clone();continue}else if(Kce(r[a],"ObjectId")){e[a]=new Yce(r[a]);continue}}t(e[a],r[a],n?n+"."+a:a,s)}}r!=null&&r.instanceOfSchema&&(e.tree=Object.assign({},r.tree,e.tree))}}});var E2=g((TOe,Iv)=>{"use strict";d();var Mv=wa(),Qce=Cv(),Jce=Bt(),Xce=Cy().defineKey,Zce=kt(),vw=Ae(),ele=Dv(),Bv={toJSON:!0,toObject:!0,_id:!0,id:!0,virtuals:!0,methods:!0};Iv.exports=function(e,r,n,s,i,o,u){if(!(n&&n.instanceOfSchema))throw new Error("You must pass a valid discriminator Schema");if(o=o??!0,e.schema.discriminatorMapping&&!e.schema.discriminatorMapping.isRoot)throw new Error('Discriminator "'+r+'" can only be a discriminator of the root model');if(i){let f=Zce(e.base,"options.applyPluginsToDiscriminators",!1)||!o;e.base._applyPlugins(n,{skipTopLevel:!f})}else o||Qce(n);let a=e.schema.options.discriminatorKey,c=e.schema.path(a);if(c!=null)vw.hasUserDefinedProperty(c.options,"select")||(c.options.select=!0),c.options.$skipDiscriminatorCheck=!0;else{let f={};f[a]={default:void 0,select:!0,$skipDiscriminatorCheck:!0},f[a][e.schema.options.typeKey]=String,e.schema.add(f),Xce({prop:a,prototype:e.prototype,options:e.schema.options})}if(n.path(a)&&n.path(a).options.$skipDiscriminatorCheck!==!0)throw new Error('Discriminator "'+r+'" cannot have field with name "'+a+'"');let l=r;(typeof s=="string"&&s.length||s!=null)&&(l=s);function h(f,p){f._baseSchema=p,p.paths._id&&p.paths._id.options&&!p.paths._id.options.auto&&f.remove("_id");let m=Object.keys(p.paths),y=[];for(let F of m){if(f.nested[F]){y.push(F);continue}if(F.indexOf(".")===-1)continue;let G=F.split(".").slice(0,-1),z="";for(let j of G)z+=(z.length?".":"")+j,(f.paths[z]instanceof Mv||f.singleNestedPaths[z]instanceof Mv)&&y.push(F)}f.obj={...f.obj},ele(f,p),f._gatherChildSchemas();for(let F of y)delete f.paths[F];f.childSchemas.forEach(F=>{F.model.prototype.$__setSchema(F.schema)});let A={};A[a]={default:l,select:!0,set:function(F){if(F===l||Array.isArray(l)&&vw.deepEqual(F,l))return l;throw new Error(`Can't set discriminator key "`+a+'"')},$skipDiscriminatorCheck:!0},A[a][f.options.typeKey]=c?c.options[f.options.typeKey]:String,f.add(A),f.discriminatorMapping={key:a,value:l,isRoot:!1},p.options.collection&&(f.options.collection=p.options.collection);let S=f.options.toJSON,O=f.options.toObject,D=f.options._id,b=f.options.id,N=Object.keys(f.options);f.options.discriminatorKey=p.options.discriminatorKey;let R=f._userProvidedOptions;for(let F of N)if(!Bv[F]&&F in R&&!vw.deepEqual(f.options[F],p.options[F]))throw new Error("Can't customize discriminator option "+F+" (can only modify "+Object.keys(Bv).join(", ")+")");f.options=Jce(p.options);for(let F of Object.keys(R))f.options[F]=R[F];S&&(f.options.toJSON=S),O&&(f.options.toObject=O),typeof D<"u"&&(f.options._id=D),f.options.id=b,o&&(f.s.hooks=e.schema.s.hooks.merge(f.s.hooks)),i&&(f.plugins=Array.prototype.slice.call(p.plugins)),f.callQueue=p.callQueue.concat(f.callQueue),delete f._requiredpaths}if(h(n,e.schema),e.discriminators||(e.discriminators={}),e.schema.discriminatorMapping||(e.schema.discriminatorMapping={key:a,value:null,isRoot:!0}),e.schema.discriminators||(e.schema.discriminators={}),e.schema.discriminators[r]=n,e.discriminators[r]&&!n.options.overwriteModels&&!u)throw new Error('Discriminator with name "'+r+'" already exists');return n}});var _2=g((MOe,Pv)=>{"use strict";d();var tle=Ns();Pv.exports=function(e,r,n){let s=e.schema.options.discriminatorKey,i=r!=null&&r[s];if(i==null&&(i=n),e.discriminators&&i!=null)if(e.discriminators[i])e=e.discriminators[i];else{let o=tle(e.discriminators,i);o&&(e=o)}return e}});var $w=g((IOe,Nv)=>{"use strict";d();var rle=ew();Nv.exports=function(e,r){return r==null||r._id==null||(e=e.clone(),r._id?e.paths._id||(rle(e),e.options._id=!0):(e.remove("_id"),e.options._id=!1)),e}});var xw=g((NOe,Fv)=>{"use strict";d();var nle=Ie(),A2=class extends nle{constructor(e,r){let n=`Cannot create use schema for property "${e}" because the schema has the ${r} option enabled.`;super(n)}};Object.defineProperty(A2.prototype,"name",{value:"InvalidSchemaOptionError"});Fv.exports=A2});var jw=g((ROe,xv)=>{"use strict";d();var Rv=Gr(),kw=require("events").EventEmitter,sle=aO(),ile=lv(),xl=Jt(),ole=Sy(),ule=fy(),vv=Uh().castToNumber,ale=E2(),qw=Ow(),Lw=_2(),cle=$w(),lle=li().internalToObjectOptions,hle=Cl(),fle=Ae(),dle=xw(),S2;xv.exports=ct;function ct(t,e,r){if(t.options.timeseries)throw new dle(e,"timeseries");let n=ct.defaultOptions&&ct.defaultOptions._id;n!=null&&(r=r||{},r._id=n),t=cle(t,r),this.caster=$v(t,null,r),this.caster.path=e,this.caster.prototype.$basePath=e,this.schema=t,this.$isSingleNested=!0,this.base=t.base,xl.call(this,e,r,"Embedded")}ct.prototype=Object.create(xl.prototype);ct.prototype.constructor=ct;ct.prototype.OptionsConstructor=ile;function $v(t,e,r){S2||(S2=My());let n=function(o,u,a){this.$__parent=a,S2.apply(this,arguments),a!=null&&this.$session(a.$session())};t._preCompile();let s=e!=null?e.prototype:S2.prototype;n.prototype=Object.create(s),n.prototype.$__setSchema(t),n.prototype.constructor=n,n.$__required=r?.required,n.base=t.base,n.schema=t,n.$isSingleNested=!0,n.events=new kw,n.prototype.toBSON=function(){return this.toObject(lle)};for(let i in t.methods)n.prototype[i]=t.methods[i];for(let i in t.statics)n[i]=t.statics[i];for(let i in kw.prototype)n[i]=kw.prototype[i];return n}ct.prototype.$conditionalHandlers.$geoWithin=function(e,r){return{$geometry:this.castForQuery(null,e.$geometry,r)}};ct.prototype.$conditionalHandlers.$near=ct.prototype.$conditionalHandlers.$nearSphere=qw.cast$near;ct.prototype.$conditionalHandlers.$within=ct.prototype.$conditionalHandlers.$geoWithin=qw.cast$within;ct.prototype.$conditionalHandlers.$geoIntersects=qw.cast$geoIntersects;ct.prototype.$conditionalHandlers.$minDistance=vv;ct.prototype.$conditionalHandlers.$maxDistance=vv;ct.prototype.$conditionalHandlers.$exists=ule;ct.prototype.cast=function(t,e,r,n,s){if(t&&t.$isSingleNested&&t.parent===e)return t;if(t!=null&&(typeof t!="object"||Array.isArray(t)))throw new sle(this.path,t);let i=this.schema.path(this.schema.options.discriminatorKey),o=i==null?null:i.getDefault(e),u=Lw(this.caster,t,o),a,c=e&&e.$__&&e.$__.selected,l=this.path,h=c==null?null:Object.keys(c).reduce((f,p)=>(p.startsWith(l+".")&&(f=f||{},f[p.substring(l.length+1)]=c[p]),f),null);if(r){a=new u(void 0,h,e,!1,{defaults:!1}),delete a.$__.defaults,a.$init(t);let f=hle(h);ole(a,h,f)}else return s=Object.assign({},s,{priorDoc:n}),Object.keys(t).length===0?new u({},h,e,void 0,s):new u(t,h,e,void 0,s);return a};ct.prototype.castForQuery=function(t,e,r,n){let s;if(t!=null){if(s=this.$conditionalHandlers[t],!s)throw new Error("Can't use "+t);return s.call(this,e)}if(e==null)return e;let i=Lw(this.caster,e);if(e instanceof i)return e;this.options.runSetters&&(e=this._applySetters(e,r));let o=n!=null&&n.strict!=null?n.strict:void 0;try{e=new i(e,o)}catch(u){throw u instanceof Rv?u:new Rv("Embedded",e,this.path,u,this)}return e};ct.prototype.doValidate=function(t,e,r,n){let s=Lw(this.caster,t);if(t&&!(t instanceof s)&&(t=new s(t,null,r!=null&&r.$__!=null?r:null)),n&&n.skipSchemaValidators)return t?t.validate().then(()=>e(null),i=>e(i)):e(null);xl.prototype.doValidate.call(this,t,function(i){if(i)return e(i);if(!t)return e(null);t.validate().then(()=>e(null),o=>e(o))},r,n)};ct.prototype.doValidateSync=function(t,e,r){if(!r||!r.skipSchemaValidators){let n=xl.prototype.doValidateSync.call(this,t,e);if(n)return n}if(t)return t.validateSync()};ct.prototype.discriminator=function(t,e,r){r=r||{};let n=fle.isPOJO(r)?r.value:r,s=typeof r.clone=="boolean"?r.clone:!0;return e.instanceOfSchema&&s&&(e=e.clone()),e=ale(this.caster,t,e,n,null,null,r.overwriteExisting),this.caster.discriminators[t]=$v(e,this.caster),this.caster.discriminators[t]};ct.defaultOptions={};ct.set=xl.set;ct.setters=[];ct.get=xl.get;ct.prototype.toJSON=function(){return{path:this.path,options:this.options}};ct.prototype.clone=function(){let t=new this.constructor(this.schema,this.path,{...this.options,_skipApplyDiscriminators:!0});return t.validators=this.validators.slice(),this.requiredValidator!==void 0&&(t.requiredValidator=this.requiredValidator),t.caster.discriminators=Object.assign({},this.caster.discriminators),t}});var qv=g(($Oe,kv)=>{"use strict";d();var ple=Ie(),Uw=Jt(),mle=jw(),yle=_2();function Bo(t,e){if(this.$parentSchemaType=e&&e.$parentSchemaType,!this.$parentSchemaType)throw new ple("Cannot create DocumentArrayElement schematype without a parent");delete e.$parentSchemaType,Uw.call(this,t,e,"DocumentArrayElement"),this.$isMongooseDocumentArrayElement=!0}Bo.schemaName="DocumentArrayElement";Bo.defaultOptions={};Bo.prototype=Object.create(Uw.prototype);Bo.prototype.constructor=Bo;Bo.prototype.cast=function(...t){return this.$parentSchemaType.cast(...t)[0]};Bo.prototype.doValidate=function(t,e,r,n){let s=yle(this.caster,t);return t&&!(t instanceof s)&&(t=new s(t,r,null,null,n&&n.index!=null?n.index:null)),mle.prototype.doValidate.call(this,t,e,r,n)};Bo.prototype.clone=function(){this.options.$parentSchemaType=this.$parentSchemaType;let t=Uw.prototype.clone.apply(this,arguments);return delete this.options.$parentSchemaType,t.caster=this.caster,t.schema=this.schema,t};kv.exports=Bo});var Uv=g((kOe,jv)=>{"use strict";d();var gle=Xn(),Gh=class extends gle{},Lv=Is();Object.defineProperty(Gh.prototype,"excludeIndexes",Lv);Object.defineProperty(Gh.prototype,"_id",Lv);jv.exports=Gh});var Qv=g((LOe,Yv)=>{"use strict";d();var Vv=Gr(),Ele=qv(),Vw=require("events").EventEmitter,Ww=i2(),_le=Uv(),Kh=Jt(),zv=Ba(),Ale=E2(),Wv=$w(),Sle=Ty(),Ole=Lh(),kl=Ae(),O2=_2(),wle=xw(),Hv=fe().arrayAtomicsSymbol,zw=fe().arrayPathSymbol,Cle=fe().documentArrayParent,Io,Na;function It(t,e,r,n){if(e.options&&e.options.timeseries)throw new wle(t,"timeseries");let s=It.defaultOptions&&It.defaultOptions._id;s!=null&&(n=n||{},n._id=s),n!=null&&n._id!=null?e=Wv(e,n):r!=null&&r._id!=null&&(e=Wv(e,r));let i=Kv(e,r);i.prototype.$basePath=t,Ww.call(this,t,i,r),this.schema=e,this.schemaOptions=n||{},this.$isMongooseDocumentArray=!0,this.Constructor=i,i.base=e.base;let o=this.defaultValue;(!("defaultValue"in this)||o!=null)&&this.default(function(){let a=o.call(this);return a!=null&&!Array.isArray(a)&&(a=[a]),a});let u=this;this.$embeddedSchemaType=new Ele(t+".$",{required:this&&this.schemaOptions&&this.schemaOptions.required||!1,$parentSchemaType:u}),this.$embeddedSchemaType.caster=this.Constructor,this.$embeddedSchemaType.schema=this.schema}It.schemaName="DocumentArray";It.options={castNonArrays:!0};It.prototype=Object.create(Ww.prototype);It.prototype.constructor=It;It.prototype.OptionsConstructor=_le;It.prototype.$conditionalHandlers={...Ww.prototype.$conditionalHandlers};function Kv(t,e,r){Na||(Na=bl());function n(){Na.apply(this,arguments),!(this.__parentArray==null||this.__parentArray.getArrayParent()==null)&&this.$session(this.__parentArray.getArrayParent().$session())}t._preCompile();let s=r!=null?r.prototype:Na.prototype;n.prototype=Object.create(s),n.prototype.$__setSchema(t),n.schema=t,n.prototype.constructor=n,n.$isArraySubdocument=!0,n.events=new Vw,n.base=t.base;for(let i in t.methods)n.prototype[i]=t.methods[i];for(let i in t.statics)n[i]=t.statics[i];for(let i in Vw.prototype)n[i]=Vw.prototype[i];return n.options=e,n}It.prototype.discriminator=function(t,e,r){typeof t=="function"&&(t=kl.getFunctionName(t)),r=r||{};let n=kl.isPOJO(r)?r.value:r,s=typeof r.clone=="boolean"?r.clone:!0;e.instanceOfSchema&&s&&(e=e.clone()),e=Ale(this.casterConstructor,t,e,n,null,null,r?.overwriteExisting);let i=Kv(e,null,this.casterConstructor);i.baseCasterConstructor=this.casterConstructor;try{Object.defineProperty(i,"name",{value:t})}catch{}return this.casterConstructor.discriminators[t]=i,this.casterConstructor.discriminators[t]};It.prototype.doValidate=function(t,e,r,n){Io||(Io=Ta());let s=this;try{Kh.prototype.doValidate.call(this,t,i,r)}catch(o){return e(o)}function i(o){if(o)return e(o);let u=t&&t.length,a;if(!u||n&&n.updateValidator)return e();kl.isMongooseDocumentArray(t)||(t=new Io(t,s.path,r));function c(l){l!=null&&(a=l),--u||e(a)}for(let l=0,h=u;l<h;++l){let f=t[l];if(f==null){--u||e(a);continue}if(!(f instanceof Na)){let p=O2(s.casterConstructor,t[l]);f=t[l]=new p(f,t,void 0,void 0,l)}if(n!=null&&n.validateModifiedOnly&&!f.$isModified()){--u||e(a);continue}f.$__validate(null,n,c)}}};It.prototype.doValidateSync=function(t,e,r){let n=Kh.prototype.doValidateSync.call(this,t,e);if(n!=null)return n;let s=t&&t.length,i=null;if(s){for(let o=0,u=s;o<u;++o){let a=t[o];if(!a)continue;if(!(a instanceof Na)){let l=O2(this.casterConstructor,t[o]);a=t[o]=new l(a,t,void 0,void 0,o)}if(r!=null&&r.validateModifiedOnly&&!a.$isModified())continue;let c=a.validateSync(r);c&&i==null&&(i=c)}return i}};It.prototype.getDefault=function(t,e,r){let n=typeof this.defaultValue=="function"?this.defaultValue.call(t):this.defaultValue;if(n==null||r&&r.skipCast)return n;Io||(Io=Ta()),Array.isArray(n)||(n=[n]),n=new Io(n,this.path,t);for(let s=0;s<n.length;++s){let i=O2(this.casterConstructor,n[s]),o=new i({},n,void 0,void 0,s);o.$init(n[s]),o.isNew=!0,Object.assign(o.$__.activePaths.default,o.$__.activePaths.init),o.$__.activePaths.init={},n[s]=o}return n};var ble=Object.freeze({transform:!1,virtuals:!1}),Gv=Object.freeze({skipId:!1,willInit:!0});It.prototype.cast=function(t,e,r,n,s){if(Io||(Io=Ta()),t!=null&&t[zw]!=null&&t===n)return t;let i,o;s=s||{};let u=s.path||this.path;if(!Array.isArray(t)){if(!r&&!It.options.castNonArrays)throw new Vv("DocumentArray",t,this.path,null,this);return e&&r&&e.markModified(u),this.cast([t],e,r,n,s)}(!s.skipDocumentArrayCast||kl.isMongooseDocumentArray(t))&&(t=new Io(t,u,e,this)),n!=null&&(t[Hv]=n[Hv]||{}),s.arrayPathIndex!=null&&(t[zw]=u+"."+s.arrayPathIndex);let a=kl.isMongooseDocumentArray(t)?t.__array:t,c=a.length;for(let l=0;l<c;++l){if(!a[l])continue;let h=O2(this.casterConstructor,a[l]),f=Sle(a[l],!0);if(a[l]!==f&&(a[l]=f),a[l]instanceof Na){if(a[l][Cle]!==e)if(r){let p=new h(null,t,Gv,i,l);a[l]=p.$init(a[l])}else{let p=new h(a[l],t,void 0,void 0,l);a[l]=p}a[l].__index==null&&a[l].$setIndex(l)}else if(a[l]!=null)if(r)e?i||(i=Tle(this,e.$__.selected,r)):i=!0,o=new h(null,t,Gv,i,l),a[l]=o.$init(a[l]);else if(n&&typeof n.id=="function"&&(o=n.id(a[l]._id)),n&&o&&kl.deepEqual(o.toObject(ble),a[l]))o.set(a[l]),a[l]=o;else try{o=new h(a[l],t,void 0,void 0,l),a[l]=o}catch(p){throw new Vv("embedded",a[l],t[zw],p,this)}}return t};It.prototype.clone=function(){let t=Object.assign({},this.options),e=new this.constructor(this.path,this.schema,t,this.schemaOptions);return e.validators=this.validators.slice(),this.requiredValidator!==void 0&&(e.requiredValidator=this.requiredValidator),e.Constructor.discriminators=Object.assign({},this.Constructor.discriminators),e};It.prototype.applyGetters=function(t,e){return Kh.prototype.applyGetters.call(this,t,e)};function Tle(t,e,r){if(!(r&&e))return;let n=t.path+".",s=Object.keys(e),i=s.length,o={},u,a,c;for(;i--;)if(a=s[i],a.startsWith(n)){if(c=a.substring(n.length),c==="$")continue;c.startsWith("$.")&&(c=c.substring(2)),u||(u=!0),o[c]=e[a]}return u&&o||void 0}It.defaultOptions={};It.set=Kh.set;It.setters=[];It.get=Kh.get;It.prototype.$conditionalHandlers.$elemMatch=Dle;function Dle(t,e){let r=Object.keys(t),n=r.length;for(let u=0;u<n;++u){let a=r[u],c=t[a];Ole(a)&&c!=null&&(t[a]=this.castForQuery(a,c,e))}let s=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.options&&this.casterConstructor.schema.options.discriminatorKey,i=this&&this.casterConstructor&&this.casterConstructor.schema&&this.casterConstructor.schema.discriminators||{};if(s!=null&&t[s]!=null&&i[t[s]]!=null)return zv(i[t[s]],t,null,this&&this.$$context);let o=this.casterConstructor.schema??e.schema;return zv(o,t,null,this&&this.$$context)}Yv.exports=It});var Xv=g((UOe,Jv)=>{"use strict";d();var Mle=Xn(),w2=class extends Mle{},Ble=Is();Object.defineProperty(w2.prototype,"of",Ble);Jv.exports=w2});var t$=g((zOe,e$)=>{"use strict";d();var Hw=Yy(),Ile=Xv(),Zv=Jt();var ql=class extends Zv{constructor(e,r){super(e,r,"Map"),this.$isSchemaMap=!0}set(e,r){return Zv.set(e,r)}cast(e,r,n){if(e instanceof Hw)return e;let s=this.path;if(n){let i=new Hw({},s,r,this.$__schemaType);if(e instanceof global.Map)for(let o of e.keys()){let u=e.get(o);u==null?u=i.$__schemaType._castNullish(u):u=i.$__schemaType.cast(u,r,!0,null,{path:s+"."+o}),i.$init(o,u)}else for(let o of Object.keys(e)){let u=e[o];u==null?u=i.$__schemaType._castNullish(u):u=i.$__schemaType.cast(u,r,!0,null,{path:s+"."+o}),i.$init(o,u)}return i}return new Hw(e,s,r,this.$__schemaType)}clone(){let e=super.clone();return this.$__schemaType!=null&&(e.$__schemaType=this.$__schemaType.clone()),e}};ql.schemaName="Map";ql.prototype.OptionsConstructor=Ile;ql.defaultOptions={};e$.exports=ql});var s$=g((HOe,n$)=>{"use strict";d();var Ple=Xn(),Yh=class extends Ple{},r$=Is();Object.defineProperty(Yh.prototype,"auto",r$);Object.defineProperty(Yh.prototype,"populate",r$);n$.exports=Yh});var a$=g((KOe,u$)=>{"use strict";d();var Nle=s$(),Po=Jt(),Fle=TO(),Rle=ln(),Kw=Eo(),Yw=Mr(),i$=Ae(),vle=Po.CastError,Gw;function zt(t,e){let r=typeof t=="string"&&t.length===24&&/^[a-f0-9]+$/i.test(t),n=e&&e.suppressWarning;(r||typeof t>"u")&&!n&&i$.warn("mongoose: To create a new ObjectId please try `Mongoose.Types.ObjectId` instead of using `Mongoose.Schema.ObjectId`. Set the `suppressWarning` option if you're trying to create a hex char path in your schema."),Po.call(this,t,e,"ObjectId")}zt.schemaName="ObjectId";zt.defaultOptions={};zt.prototype=Object.create(Po.prototype);zt.prototype.constructor=zt;zt.prototype.OptionsConstructor=Nle;zt.get=Po.get;zt.set=Po.set;zt.setters=[];zt.prototype.auto=function(t){return t&&(this.default(o$),this.set($le)),this};zt._checkRequired=t=>Yw(t,"ObjectId");zt._cast=Fle;zt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};zt._defaultCaster=t=>{if(!Yw(t,"ObjectId"))throw new Error(t+" is not an instance of ObjectId");return t};zt.checkRequired=Po.checkRequired;zt.prototype.checkRequired=function(e,r){return Po._isRef(this,e,r,!0)?!!e:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():zt.checkRequired())(e)};zt.prototype.cast=function(t,e,r){if(!Yw(t,"ObjectId")&&Po._isRef(this,t,e,r)){if((Rle(t)||"").toLowerCase()==="objectid")return new Kw(t.toHexString());if(t==null||i$.isNonBuiltinObject(t))return this._castRef(t,e,r)}let n;typeof this._castFunction=="function"?n=this._castFunction:typeof this.constructor.cast=="function"?n=this.constructor.cast():n=zt.cast();try{return n(t)}catch(s){throw new vle("ObjectId",t,this.path,s,this)}};function C2(t){return this.cast(t)}zt.prototype.$conditionalHandlers={...Po.prototype.$conditionalHandlers,$gt:C2,$gte:C2,$lt:C2,$lte:C2};function o$(){return new Kw}o$.$runBeforeSetters=!0;function $le(t){return Gw||(Gw=Nn()),this instanceof Gw&&t===void 0?new Kw:t}u$.exports=zt});var l$=g((QOe,c$)=>{"use strict";d();var xle=Xn(),es=class extends xle{},xi=Is();Object.defineProperty(es.prototype,"enum",xi);Object.defineProperty(es.prototype,"match",xi);Object.defineProperty(es.prototype,"lowercase",xi);Object.defineProperty(es.prototype,"trim",xi);Object.defineProperty(es.prototype,"uppercase",xi);Object.defineProperty(es.prototype,"minLength",xi);Object.defineProperty(es.prototype,"minlength",xi);Object.defineProperty(es.prototype,"maxLength",xi);Object.defineProperty(es.prototype,"maxlength",xi);Object.defineProperty(es.prototype,"populate",xi);c$.exports=es});var Qw=g((XOe,p$)=>{"use strict";d();var No=Jt(),Jh=Bn(),kle=l$(),qle=Xy(),h$=Ae(),Lle=Mr(),d$=No.CastError;function Ye(t,e){this.enumValues=[],this.regExp=null,No.call(this,t,e,"String")}Ye.schemaName="String";Ye.defaultOptions={};Ye.prototype=Object.create(No.prototype);Ye.prototype.constructor=Ye;Object.defineProperty(Ye.prototype,"OptionsConstructor",{configurable:!1,enumerable:!1,writable:!1,value:kle});Ye._cast=qle;Ye.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Ye._defaultCaster=t=>{if(t!=null&&typeof t!="string")throw new Error;return t};Ye.get=No.get;Ye.set=No.set;Ye.setters=[];Ye._checkRequired=t=>(t instanceof String||typeof t=="string")&&t.length;Ye.checkRequired=No.checkRequired;Ye.prototype.enum=function(){if(this.enumValidator&&(this.validators=this.validators.filter(function(n){return n.validator!==this.enumValidator},this),this.enumValidator=!1),arguments[0]===void 0||arguments[0]===!1)return this;let t,e;h$.isObject(arguments[0])?Array.isArray(arguments[0].values)?(t=arguments[0].values,e=arguments[0].message):(t=h$.object.vals(arguments[0]),e=Jh.messages.String.enum):(t=arguments,e=Jh.messages.String.enum);for(let n of t)n!==void 0&&this.enumValues.push(this.cast(n));let r=this.enumValues;return this.enumValidator=function(n){return n==null||~r.indexOf(n)},this.validators.push({validator:this.enumValidator,message:e,type:"enum",enumValues:r}),this};Ye.prototype.lowercase=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.toLowerCase()))};Ye.prototype.uppercase=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.toUpperCase()))};Ye.prototype.trim=function(t){return arguments.length>0&&!t?this:this.set(e=>(typeof e!="string"&&(e=this.cast(e)),e&&e.trim()))};Ye.prototype.minlength=function(t,e){if(this.minlengthValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.minlengthValidator},this)),t!=null){let r=e||Jh.messages.String.minlength;r=r.replace(/{MINLENGTH}/,t),this.validators.push({validator:this.minlengthValidator=function(n){return n===null||n.length>=t},message:r,type:"minlength",minlength:t})}return this};Ye.prototype.minLength=Ye.prototype.minlength;Ye.prototype.maxlength=function(t,e){if(this.maxlengthValidator&&(this.validators=this.validators.filter(function(r){return r.validator!==this.maxlengthValidator},this)),t!=null){let r=e||Jh.messages.String.maxlength;r=r.replace(/{MAXLENGTH}/,t),this.validators.push({validator:this.maxlengthValidator=function(n){return n===null||n.length<=t},message:r,type:"maxlength",maxlength:t})}return this};Ye.prototype.maxLength=Ye.prototype.maxlength;Ye.prototype.match=function(e,r){let n=r||Jh.messages.String.match,s=function(i){return e?(e.lastIndex=0,i!=null&&i!==""?e.test(i):!0):!1};return this.validators.push({validator:s,message:n,type:"regexp",regexp:e}),this};Ye.prototype.checkRequired=function(e,r){return typeof e=="object"&&No._isRef(this,e,r,!0)?e!=null:(typeof this.constructor.checkRequired=="function"?this.constructor.checkRequired():Ye.checkRequired())(e)};Ye.prototype.cast=function(t,e,r){if(typeof t!="string"&&No._isRef(this,t,e,r))return this._castRef(t,e,r);let n;typeof this._castFunction=="function"?n=this._castFunction:typeof this.constructor.cast=="function"?n=this.constructor.cast():n=Ye.cast();try{return n(t)}catch{throw new d$("string",t,this.path,null,this)}};function Qh(t,e){return this.castForQuery(null,t,e)}function jle(t,e){let r=this;return Array.isArray(t)?t.map(function(n){return r.castForQuery(null,n,e)}):[this.castForQuery(null,t,e)]}function f$(t){return t==null?this._castNullish(t):this.cast(t,this)}var Ule={...No.prototype.$conditionalHandlers,$all:jle,$gt:Qh,$gte:Qh,$lt:Qh,$lte:Qh,$options:f$,$regex:function(e){return Object.prototype.toString.call(e)==="[object RegExp]"?e:f$.call(this,e)},$not:Qh};Object.defineProperty(Ye.prototype,"$conditionalHandlers",{configurable:!1,enumerable:!1,writable:!1,value:Object.freeze(Ule)});Ye.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with String.");return n.call(this,e,r)}if(Object.prototype.toString.call(e)==="[object RegExp]"||Lle(e,"BSONRegExp"))return e;try{return this.applySetters(e,r)}catch(s){throw s instanceof d$&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};p$.exports=Ye});var _$=g((ewe,E$)=>{"use strict";d();var Zw=Dh(),wu=Jt(),D2=wu.CastError,y$=Ae(),b2=e2(),Xw=/[0-9a-f]{8}-[0-9a-f]{4}-[0-9][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}/i,g$=Zw.Binary;function Vle(t){return t!=null&&Buffer.from(t,"hex")}function m$(t){typeof t!="string"&&(t="");let e=t.replace(/[{}-]/g,""),r=Vle(e),n=new Zw(r);return n._subtype=4,n}function T2(t){let e;return typeof t!="string"&&t!=null?(e=t.toString("hex"),e.substring(0,8)+"-"+e.substring(8,12)+"-"+e.substring(12,16)+"-"+e.substring(16,20)+"-"+e.substring(20,32)):t}function Wt(t,e){wu.call(this,t,e,"UUID"),this.getters.push(function(r){return r!=null&&r.$__!=null?r:Buffer.isBuffer(r)?T2(r):r instanceof g$?T2(r.buffer):y$.isPOJO(r)&&r.type==="Buffer"&&Array.isArray(r.data)?T2(Buffer.from(r.data)):r})}Wt.schemaName="UUID";Wt.defaultOptions={};Wt.prototype=Object.create(wu.prototype);Wt.prototype.constructor=Wt;Wt._cast=function(t){if(t==null)return t;function e(r){let n=new Zw(r);return n._subtype=4,n}if(typeof t=="string"){if(Xw.test(t))return m$(t);throw new D2(Wt.schemaName,t,this.path)}if(Buffer.isBuffer(t))return e(t);if(t instanceof g$)return e(t.value(!0));if(t.toString&&t.toString!==Object.prototype.toString&&Xw.test(t.toString()))return m$(t.toString());throw new D2(Wt.schemaName,t,this.path)};Wt.get=wu.get;Wt.set=wu.set;Wt.setters=[];Wt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Wt._checkRequired=t=>t!=null;Wt.checkRequired=wu.checkRequired;Wt.prototype.checkRequired=function(e){return Buffer.isBuffer(e)&&(e=T2(e)),e!=null&&Xw.test(e)};Wt.prototype.cast=function(t,e,r){if(y$.isNonBuiltinObject(t)&&wu._isRef(this,t,e,r))return this._castRef(t,e,r);let n;typeof this._castFunction=="function"?n=this._castFunction:typeof this.constructor.cast=="function"?n=this.constructor.cast():n=Wt.cast();try{return n(t)}catch(s){throw new D2(Wt.schemaName,t,this.path,s,this)}};function Xh(t){return this.cast(t)}function Jw(t){return t.map(e=>this.cast(e))}Wt.prototype.$conditionalHandlers={...wu.prototype.$conditionalHandlers,$bitsAllClear:b2,$bitsAnyClear:b2,$bitsAllSet:b2,$bitsAnySet:b2,$all:Jw,$gt:Xh,$gte:Xh,$in:Jw,$lt:Xh,$lte:Xh,$ne:Xh,$nin:Jw};Wt.prototype.castForQuery=function(t,e,r){let n;if(t!=null){if(n=this.$conditionalHandlers[t],!n)throw new Error("Can't use "+t+" with UUID.");return n.call(this,e,r)}try{return this.applySetters(e,r)}catch(s){throw s instanceof D2&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};E$.exports=Wt});var O$=g((rwe,S$)=>{"use strict";d();var A$=require("assert"),eC=cs(),zle=Mr();S$.exports=function(e){if(e==null||e==="")return null;let r;if(zle(e,"Long"))r=e.toNumber();else if(typeof e=="string")try{return r=eC.Double.fromString(e),r}catch{A$.ok(!1)}else if(typeof e=="object"){let n=e.valueOf()??e.toString();if(typeof n=="string")try{return r=eC.Double.fromString(e),r}catch{A$.ok(!1)}else r=Number(n)}else r=Number(e);return new eC.Double(r)}});var C$=g((swe,w$)=>{"use strict";d();var Wle=Gr(),Ll=Jt(),Hle=O$();function yr(t,e){Ll.call(this,t,e,"Double")}yr.schemaName="Double";yr.defaultOptions={};yr.prototype=Object.create(Ll.prototype);yr.prototype.constructor=yr;yr._cast=Hle;yr.set=Ll.set;yr.setters=[];yr.get=Ll.get;yr._defaultCaster=t=>{if(t!=null&&t._bsontype!=="Double")throw new Error;return t};yr.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};yr._checkRequired=t=>t!=null;yr.checkRequired=Ll.checkRequired;yr.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};yr.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=yr.cast();try{return e(t)}catch(r){throw new Wle("Double",t,this.path,r,this)}};function M2(t){return this.cast(t)}yr.prototype.$conditionalHandlers={...Ll.prototype.$conditionalHandlers,$gt:M2,$gte:M2,$lt:M2,$lte:M2};w$.exports=yr});var T$=g((owe,b$)=>{"use strict";d();var Gle=Mr(),Kle=require("assert");b$.exports=function(e){if(e==null)return e;if(e==="")return null;let r=Gle(e,"Long")?e.toNumber():Number(e);if(r===(r|0)&&r>=-2147483648&&r<=2147483647)return r;Kle.ok(!1)}});var B$=g((awe,M$)=>{"use strict";d();var D$=Gr(),jl=Jt(),Yle=T$();function Xt(t,e){jl.call(this,t,e,"Int32")}Xt.schemaName="Int32";Xt.defaultOptions={};Xt.prototype=Object.create(jl.prototype);Xt.prototype.constructor=Xt;Xt._cast=Yle;Xt.set=jl.set;Xt.setters=[];Xt.get=jl.get;Xt._defaultCaster=t=>{if(t!=null&&(typeof t!="number"||t!==(t|0)||t<-2147483648||t>2147483647))throw new Error;return t};Xt.cast=function(e){return arguments.length===0?this._cast:(e===!1&&(e=this._defaultCaster),this._cast=e,this._cast)};Xt._checkRequired=t=>t!=null;Xt.checkRequired=jl.checkRequired;Xt.prototype.checkRequired=function(t){return this.constructor._checkRequired(t)};Xt.prototype.cast=function(t){let e;typeof this._castFunction=="function"?e=this._castFunction:typeof this.constructor.cast=="function"?e=this.constructor.cast():e=Xt.cast();try{return e(t)}catch(r){throw new D$("Int32",t,this.path,r,this)}};Xt.$conditionalHandlers={...jl.prototype.$conditionalHandlers,$gt:B2,$gte:B2,$lt:B2,$lte:B2};function B2(t,e){return this.castForQuery(null,t,e)}Xt.prototype.castForQuery=function(t,e,r){let n;if(t!=null)return n=Xt.$conditionalHandlers[t],n?n.call(this,e):this.applySetters(null,e,r);try{return this.applySetters(e,r)}catch(s){throw s instanceof D$&&s.path===this.path&&this.$fullPath!=null&&(s.path=this.$fullPath),s}};M$.exports=Xt});var jh=g(mt=>{"use strict";d();mt.Array=i2();mt.BigInt=UR();mt.Boolean=WR();mt.Buffer=QR();mt.Date=sv();mt.Decimal128=mt.Decimal=av();mt.DocumentArray=Qv();mt.Map=t$();mt.Mixed=wa();mt.Number=Ew();mt.ObjectId=a$();mt.String=Qw();mt.Subdocument=jw();mt.UUID=_$();mt.Double=C$();mt.Int32=B$();mt.Oid=mt.ObjectId;mt.Object=mt.Mixed;mt.Bool=mt.Boolean;mt.ObjectID=mt.ObjectId});var Tl=g((sC,j$)=>{"use strict";d();var Qle=require("events").EventEmitter,Jle=pl(),ki=Ie(),I$=Jt(),P$=Xn(),Xle=XO(),nC=Wy(),N$=ew(),fn=Bt(),F$=kt(),Zle=ln(),e1e=IF(),N2=nw(),t1e=FF(),R$=vF(),r1e=my(),I2=Zn(),n1e=xF(),s1e=GF(),yt=Ae(),i1e=YF(),o1e=/\.\d+(\.|$)/,Cu,u1e=Gy().queryMiddlewareFunctions,a1e=Ky().middlewareFunctions,v$=u1e.concat(a1e).reduce((t,e)=>t.add(e),new Set),tC=yt.isPOJO,$$=0,c1e=/^\d+$/;function se(t,e){if(!(this instanceof se))return new se(t,e);if(this.obj=t,this.paths={},this.aliases={},this.subpaths={},this.virtuals={},this.singleNestedPaths={},this.nested={},this.inherits={},this.callQueue=[],this._indexes=[],this._searchIndexes=[],this.methods=e&&e.methods||{},this.methodOptions={},this.statics=e&&e.statics||{},this.tree={},this.query=e&&e.query||{},this.childSchemas=[],this.plugins=[],this.$id=++$$,this.mapPaths=[],this.s={hooks:new Jle},this.options=this.defaultOptions(e),Array.isArray(t))for(let s of t)this.add(s);else t&&this.add(t);if(e&&e.virtuals){let s=e.virtuals,i=Object.keys(s);for(let o of i){let u=s[o].options?s[o].options:void 0,a=this.virtual(o,u);s[o].get&&a.get(s[o].get),s[o].set&&a.set(s[o].set)}}let r=t&&t._id&&yt.isObject(t._id);!this.paths._id&&this.options._id&&!r&&N$(this),this.setupTimestamp(this.options.timestamps)}function x$(t,e){for(let r of Object.keys(e)){let n=null;if(e[r]!=null)n=e[r];else{let i=F$(t.paths[r],"options");if(i==null)continue;n=i.alias}if(!n)continue;let s=t.paths[r].path;if(Array.isArray(n)){for(let i of n){if(typeof i!="string")throw new Error("Invalid value for alias option on "+s+", got "+i);t.aliases[i]=s,t.virtual(i).get(function(o){return function(){return typeof this.get=="function"?this.get(o):this[o]}}(s)).set(function(o){return function(u){return this.$set(o,u)}}(s))}continue}if(typeof n!="string")throw new Error("Invalid value for alias option on "+s+", got "+n);t.aliases[n]=s,t.virtual(n).get(function(i){return function(){return typeof this.get=="function"?this.get(i):this[i]}}(s)).set(function(i){return function(o){return this.$set(i,o)}}(s))}}se.prototype=Object.create(Qle.prototype);se.prototype.constructor=se;se.prototype.instanceOfSchema=!0;Object.defineProperty(se.prototype,"$schemaType",{configurable:!1,enumerable:!1,writable:!0});Object.defineProperty(se.prototype,"childSchemas",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(se.prototype,"virtuals",{configurable:!1,enumerable:!0,writable:!0});se.prototype.obj;se.prototype.paths;se.prototype.tree;se.prototype.clone=function(){let t=this._clone();return t.on("init",e=>this.emit("init",e)),t};se.prototype._clone=function(e){e=e||(this.base==null?se:this.base.Schema);let r=new e({},this._userProvidedOptions);r.base=this.base,r.obj=this.obj,r.options=fn(this.options),r.callQueue=this.callQueue.map(function(n){return n}),r.methods=fn(this.methods),r.methodOptions=fn(this.methodOptions),r.statics=fn(this.statics),r.query=fn(this.query),r.plugins=Array.prototype.slice.call(this.plugins),r._indexes=fn(this._indexes),r._searchIndexes=fn(this._searchIndexes),r.s.hooks=this.s.hooks.clone(),r.tree=fn(this.tree),r.paths=Object.fromEntries(Object.entries(this.paths).map(([n,s])=>[n,s.clone()])),r.nested=fn(this.nested),r.subpaths=fn(this.subpaths);for(let n of Object.values(r.paths))if(n.$isSingleNested){let s=n.path;for(let i of Object.keys(n.schema.paths))r.singleNestedPaths[s+"."+i]=n.schema.paths[i];for(let i of Object.keys(n.schema.singleNestedPaths))r.singleNestedPaths[s+"."+i]=n.schema.singleNestedPaths[i];for(let i of Object.keys(n.schema.subpaths))r.singleNestedPaths[s+"."+i]=n.schema.subpaths[i];for(let i of Object.keys(n.schema.nested))r.singleNestedPaths[s+"."+i]="nested"}return r._gatherChildSchemas(),r.virtuals=fn(this.virtuals),r.$globalPluginsApplied=this.$globalPluginsApplied,r.$isRootDiscriminator=this.$isRootDiscriminator,r.$implicitlyCreated=this.$implicitlyCreated,r.$id=++$$,r.$originalSchemaId=this.$id,r.mapPaths=[].concat(this.mapPaths),this.discriminatorMapping!=null&&(r.discriminatorMapping=Object.assign({},this.discriminatorMapping)),this.discriminators!=null&&(r.discriminators=Object.assign({},this.discriminators)),this._applyDiscriminators!=null&&(r._applyDiscriminators=new Map(this._applyDiscriminators)),r.aliases=Object.assign({},this.aliases),r};se.prototype.pick=function(t,e){let r=new se({},e||this.options);if(!Array.isArray(t))throw new ki('Schema#pick() only accepts an array argument, got "'+typeof t+'"');for(let n of t)if(this.nested[n])r.add({[n]:F$(this.tree,n)});else{let s=this.path(n);if(s==null)throw new ki("Path `"+n+"` is not in the schema");r.add({[n]:s})}return r};se.prototype.omit=function(t,e){let r=new se(this,e||this.options);if(!Array.isArray(t))throw new ki('Schema#omit() only accepts an array argument, got "'+typeof t+'"');r.remove(t);for(let n in r.singleNestedPaths)t.includes(n)&&delete r.singleNestedPaths[n];return r};se.prototype.defaultOptions=function(t){this._userProvidedOptions=t==null?{}:fn(t);let e=this.base&&this.base.options||{},r="strict"in e?e.strict:!0,n="strictQuery"in e?e.strictQuery:!1,s="id"in e?e.id:!0;if(t={strict:r,strictQuery:n,bufferCommands:!0,capped:!1,versionKey:"__v",optimisticConcurrency:!1,minimize:!0,autoIndex:null,discriminatorKey:"__t",shardKey:null,read:null,validateBeforeSave:!0,validateModifiedOnly:!1,_id:!0,id:s,typeKey:"type",...t},t.versionKey&&typeof t.versionKey!="string")throw new ki("`versionKey` must be falsy or string, got `"+typeof t.versionKey+"`");if(typeof t.read=="string"?t.read=N2(t.read):Array.isArray(t.read)&&typeof t.read[0]=="string"&&(t.read={mode:N2(t.read[0]),tags:t.read[1]}),t.optimisticConcurrency&&!t.versionKey)throw new ki("Must set `versionKey` if using `optimisticConcurrency`");return t};se.prototype.discriminator=function(t,e,r){return this._applyDiscriminators=this._applyDiscriminators||new Map,this._applyDiscriminators.set(t,{schema:e,options:r}),this};se.prototype._defaultToObjectOptions=function(t){let e=t?"toJSON":"toObject";if(this._defaultToObjectOptionsMap&&this._defaultToObjectOptionsMap[e])return this._defaultToObjectOptionsMap[e];let r=this.base&&this.base.options&&this.base.options[e]||{},n=this.options[e]||{},s=Object.assign({},r,n);return this._defaultToObjectOptionsMap=this._defaultToObjectOptionsMap||{},this._defaultToObjectOptionsMap[e]=s,s};se.prototype.add=function(e,r){if(e instanceof se||e!=null&&e.instanceOfSchema)return r1e(this,e),this;if(e._id===!1&&r==null&&(this.options._id=!1),r=r||"",r==="__proto__."||r==="constructor."||r==="prototype.")return this;let n=Object.keys(e),s=this.options.typeKey;for(let o of n){if(yt.specialProperties.has(o))continue;let u=r+o,a=e[o];if(a==null)throw new TypeError("Invalid value for schema path `"+u+'`, got value "'+a+'"');if(o==="_id"&&a===!1)continue;let c=!1;if(typeof a=="string"){let l=this.base!=null?this.base.Schema.Types:se.Types,h=a.charAt(0).toUpperCase()+a.substring(1);c=l[h]!=null}if(o!=="_id"&&(typeof a!="object"&&typeof a!="function"&&!c||a==null))throw new TypeError(`Invalid schema configuration: \`${a}\` is not a valid type at path \`${o}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);if(a instanceof nC||(a.constructor&&a.constructor.name||null)==="VirtualType"){this.virtual(a);continue}if(Array.isArray(a)&&a.length===1&&a[0]==null)throw new TypeError("Invalid value for schema Array path `"+u+'`, got value "'+a[0]+'"');if(tC(a)||a instanceof P$)if(Object.keys(a).length<1)r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(u,a);else if(!a[s]||s==="type"&&tC(a.type)&&a.type.type)this.nested[u]=!0,this.add(a,u+".");else{let l=a[s];if(tC(l)&&Object.keys(l).length>0){r&&(this.nested[r.substring(0,r.length-1)]=!0);let h={};this._userProvidedOptions.typeKey&&(h.typeKey=this._userProvidedOptions.typeKey),this._userProvidedOptions.strict!=null&&(h.strict=this._userProvidedOptions.strict),this._userProvidedOptions.toObject!=null&&(h.toObject=yt.omit(this._userProvidedOptions.toObject,["transform"])),this._userProvidedOptions.toJSON!=null&&(h.toJSON=yt.omit(this._userProvidedOptions.toJSON,["transform"]));let f=new se(l,h);f.$implicitlyCreated=!0;let p=Object.assign({},a,{[s]:f});this.path(r+o,p)}else if(r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(r+o,a),a!=null&&!a.instanceOfSchema&&yt.isPOJO(a.discriminators)){let h=this.path(r+o);for(let f in a.discriminators)h.discriminator(f,a.discriminators[f])}}else if(r&&(this.nested[r.substring(0,r.length-1)]=!0),this.path(r+o,a),a[0]!=null&&!a[0].instanceOfSchema&&yt.isPOJO(a[0].discriminators)){let l=this.path(r+o);for(let h in a[0].discriminators)l.discriminator(h,a[0].discriminators[h])}}let i=Object.fromEntries(Object.entries(e).map(([o])=>[r+o,null]));return x$(this,i),this};se.prototype.alias=function(t,e){return x$(this,{[t]:e}),this};se.prototype.removeIndex=function(e){if(arguments.length>1)throw new Error("removeIndex() takes only 1 argument");if(typeof e!="object"&&typeof e!="string")throw new Error("removeIndex() may only take either an object or a string as an argument");if(typeof e=="object")for(let r=this._indexes.length-1;r>=0;--r)R$(this._indexes[r][0],e)&&this._indexes.splice(r,1);else for(let r=this._indexes.length-1;r>=0;--r)this._indexes[r][1]!=null&&this._indexes[r][1].name===e&&this._indexes.splice(r,1);return this};se.prototype.clearIndexes=function(){return this._indexes.length=0,this};se.prototype.searchIndex=function(e){return this._searchIndexes.push(e),this};se.reserved=Object.create(null);se.prototype.reserved=se.reserved;var Pr=se.reserved;Pr.prototype=Pr.emit=Pr.listeners=Pr.removeListener=Pr.collection=Pr.errors=Pr.get=Pr.init=Pr.isModified=Pr.isNew=Pr.populated=Pr.remove=Pr.save=Pr.toObject=Pr.validate=1;Pr.collection=1;se.prototype.path=function(t,e){if(e===void 0){if(this.paths[t]!=null)return this.paths[t];let a=k$(t),c=l1e(this,t,a);if(c!=null)return c;let l=q$(this,t);return l??(c=this.hasMixedParent(a),c??(o1e.test(t)?f1e(this,t,a):void 0))}let r=t.split(".")[0];if(Pr[r]&&!this.options.suppressReservedKeysWarning){let a=`\`${r}\` is a reserved schema pathname and may break some functionality. You are allowed to use it, but use at your own risk. To disable this warning pass \`suppressReservedKeysWarning\` as a schema option.`;yt.warn(a)}typeof e=="object"&&yt.hasUserDefinedProperty(e,"ref")&&i1e(e.ref,t);let n=t.split(/\./),s=n.pop(),i=this.tree,o="";for(let a of n){if(yt.specialProperties.has(a))throw new Error("Cannot set special property `"+a+"` on a schema");if(o=o+=(o.length>0?".":"")+a,i[a]||(this.nested[o]=!0,i[a]={}),typeof i[a]!="object"){let c="Cannot set nested path `"+t+"`. Parent path `"+o+"` already set to type "+i[a].name+".";throw new Error(c)}i=i[a]}i[s]=fn(e),this.paths[t]=this.interpretAsType(t,e,this.options);let u=this.paths[t];if(u.$isSchemaMap){let a=t+".$*";this.paths[a]=u.$__schemaType,this.mapPaths.push(this.paths[a]),u.$__schemaType.$isSingleNested&&this.childSchemas.push({schema:u.$__schemaType.schema,model:u.$__schemaType.caster,path:t})}if(u.$isSingleNested){for(let a of Object.keys(u.schema.paths))this.singleNestedPaths[t+"."+a]=u.schema.paths[a];for(let a of Object.keys(u.schema.singleNestedPaths))this.singleNestedPaths[t+"."+a]=u.schema.singleNestedPaths[a];for(let a of Object.keys(u.schema.subpaths))this.singleNestedPaths[t+"."+a]=u.schema.subpaths[a];for(let a of Object.keys(u.schema.nested))this.singleNestedPaths[t+"."+a]="nested";Object.defineProperty(u.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),u.caster.base=this.base,this.childSchemas.push({schema:u.schema,model:u.caster,path:t})}else u.$isMongooseDocumentArray&&(Object.defineProperty(u.schema,"base",{configurable:!0,enumerable:!1,writable:!1,value:this.base}),u.casterConstructor.base=this.base,this.childSchemas.push({schema:u.schema,model:u.casterConstructor,path:t}));if(u.$isMongooseArray&&u.caster instanceof I$){let a=t,c=u,l=[];for(;c.$isMongooseArray;)a=a+".$",c.$isMongooseDocumentArray?(c.$embeddedSchemaType._arrayPath=a,c.$embeddedSchemaType._arrayParentPath=t,c=c.$embeddedSchemaType):(c.caster._arrayPath=a,c.caster._arrayParentPath=t,c=c.caster),this.subpaths[a]=c;for(let h of l)this.subpaths[h.path]=h}if(u.$isMongooseDocumentArray){for(let a of Object.keys(u.schema.paths)){let c=u.schema.paths[a];this.subpaths[t+"."+a]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=u)}for(let a of Object.keys(u.schema.subpaths)){let c=u.schema.subpaths[a];this.subpaths[t+"."+a]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=u)}for(let a of Object.keys(u.schema.singleNestedPaths)){let c=u.schema.singleNestedPaths[a];this.subpaths[t+"."+a]=c,typeof c=="object"&&c!=null&&c.$parentSchemaDocArray==null&&(c.$parentSchemaDocArray=u)}}return this};se.prototype._gatherChildSchemas=function(){let e=[];for(let r of Object.keys(this.paths)){if(typeof r!="string")continue;let n=this.paths[r];n.$isMongooseDocumentArray||n.$isSingleNested?e.push({schema:n.schema,model:n.caster,path:r}):n.$isSchemaMap&&n.$__schemaType.$isSingleNested&&e.push({schema:n.$__schemaType.schema,model:n.$__schemaType.caster,path:r})}return this.childSchemas=e,e};function l1e(t,e,r){if(t.paths.hasOwnProperty(e))return t.paths[e];if(t.subpaths.hasOwnProperty(r)){let n=t.subpaths[r];return n==="nested"?void 0:n}if(t.singleNestedPaths.hasOwnProperty(r)&&typeof t.singleNestedPaths[r]=="object"){let n=t.singleNestedPaths[r];return n==="nested"?void 0:n}return null}function k$(t){return/\.\d+/.test(t)?t.replace(/\.\d+\./g,".$.").replace(/\.\d+$/,".$"):t}function q$(t,e){if(t.mapPaths.length===0)return null;for(let r of t.mapPaths){let n=r.path;if(new RegExp("^"+n.replace(/\.\$\*/g,"\\.[^.]+")+"$").test(e))return t.paths[n]}return null}Object.defineProperty(se.prototype,"base",{configurable:!0,enumerable:!1,writable:!0,value:null});se.prototype.interpretAsType=function(t,e,r){if(e instanceof I$){if(e.path===t)return e;let a=e.clone();return a.path=t,a}let n=this.base!=null?this.base.Schema.Types:se.Types,s=this.base!=null?this.base.Types:Bl();if(!yt.isPOJO(e)&&!(e instanceof P$)&&yt.getFunctionName(e.constructor)!=="Object"){let c=e;e={},e[r.typeKey]=c}let i=e[r.typeKey]&&(e[r.typeKey]instanceof Function||r.typeKey!=="type"||!e.type.type)?e[r.typeKey]:{},o;if(yt.isPOJO(i)||i==="mixed")return new n.Mixed(t,e);if(Array.isArray(i)||i===Array||i==="array"||i===n.Array){let a=i===Array||i==="array"?e.cast||e.of:i[0];if(a&&a.instanceOfSchema){if(!(a instanceof se))if(this.options._isMerging)a=new se(a);else throw new TypeError("Schema for array path `"+t+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${t}: new Schema(...)`);return new n.DocumentArray(t,a,e)}if(a&&a[r.typeKey]&&a[r.typeKey].instanceOfSchema){if(!(a[r.typeKey]instanceof se))if(this.options._isMerging)a[r.typeKey]=new se(a[r.typeKey]);else throw new TypeError("Schema for array path `"+t+`\` is from a different copy of the Mongoose module. Please make sure you're using the same version of Mongoose everywhere with \`npm list mongoose\`. If you are still getting this error, please add \`new Schema()\` around the path: ${t}: new Schema(...)`);return new n.DocumentArray(t,a[r.typeKey],e,a)}if(typeof a<"u"&&(Array.isArray(a)||a.type===Array||a.type=="Array"))return a&&a.type=="Array"&&(a.type=Array),new n.Array(t,this.interpretAsType(t,a,r),e);let c=a!=null&&a[r.typeKey]&&(r.typeKey!=="type"||!a.type.type)?a[r.typeKey]:a;if(typeof a=="string")a=n[a.charAt(0).toUpperCase()+a.substring(1)];else if(yt.isPOJO(c))if(Object.keys(c).length){let l={minimize:r.minimize};r.typeKey&&(l.typeKey=r.typeKey),r.hasOwnProperty("strict")&&(l.strict=r.strict),r.hasOwnProperty("strictQuery")&&(l.strictQuery=r.strictQuery),r.hasOwnProperty("toObject")&&(l.toObject=yt.omit(r.toObject,["transform"])),r.hasOwnProperty("toJSON")&&(l.toJSON=yt.omit(r.toJSON,["transform"])),this._userProvidedOptions.hasOwnProperty("_id")?l._id=this._userProvidedOptions._id:se.Types.DocumentArray.defaultOptions._id!=null&&(l._id=se.Types.DocumentArray.defaultOptions._id);let h=new se(c,l);return h.$implicitlyCreated=!0,new n.DocumentArray(t,h,e)}else return new n.Array(t,n.Mixed,e);if(a){if(i=a[r.typeKey]&&(r.typeKey!=="type"||!a.type.type)?a[r.typeKey]:a,Array.isArray(i))return new n.Array(t,this.interpretAsType(t,i,r),e);if(o=typeof i=="string"?i:i.schemaName||yt.getFunctionName(i),o==="ClockDate"&&(o="Date"),o===void 0)throw new TypeError(`Invalid schema configuration: Could not determine the embedded type for array \`${t}\`. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(!n.hasOwnProperty(o))throw new TypeError(`Invalid schema configuration: \`${o}\` is not a valid type within the array \`${t}\`.See https://bit.ly/mongoose-schematypes for a list of valid schema types.`)}return new n.Array(t,a||n.Mixed,e,r)}if(i&&i.instanceOfSchema)return new n.Subdocument(i,t,e);if(Buffer.isBuffer(i)?o="Buffer":typeof i=="function"||typeof i=="object"?o=i.schemaName||yt.getFunctionName(i):i===s.ObjectId?o="ObjectId":i===s.Decimal128?o="Decimal128":o=i==null?""+i:i.toString(),o&&(o=o.charAt(0).toUpperCase()+o.substring(1)),o==="ObjectID"&&(o="ObjectId"),o==="ClockDate"&&(o="Date"),o===void 0)throw new TypeError(`Invalid schema configuration: \`${t}\` schematype definition is invalid. See https://mongoosejs.com/docs/guide.html#definition for more info on supported schema syntaxes.`);if(n[o]==null)throw new TypeError(`Invalid schema configuration: \`${o}\` is not a valid type at path \`${t}\`. See https://bit.ly/mongoose-schematypes for a list of valid schema types.`);let u=new n[o](t,e);return u.$isSchemaMap&&h1e(this,u,t,e,r),u};function h1e(t,e,r,n,s){let i=r+".$*",o={type:{}};yt.hasUserDefinedProperty(n,"of")&&(yt.isPOJO(n.of)&&Object.keys(n.of).length>0&&!yt.hasUserDefinedProperty(n.of,t.options.typeKey)?o={[t.options.typeKey]:new se(n.of)}:yt.isPOJO(n.of)?o=Object.assign({},n.of):o={[t.options.typeKey]:n.of},o[t.options.typeKey]&&o[t.options.typeKey].instanceOfSchema&&o[t.options.typeKey].eachPath((c,l)=>{if(l.options.select===!0||l.options.select===!1)throw new ki('Cannot use schema-level projections (`select: true` or `select: false`) within maps at path "'+r+"."+c+'"')}),yt.hasUserDefinedProperty(n,"ref")&&(o.ref=n.ref)),e.$__schemaType=t.interpretAsType(i,o,s)}se.prototype.eachPath=function(t){let e=Object.keys(this.paths),r=e.length;for(let n=0;n<r;++n)t(e[n],this.paths[e[n]]);return this};se.prototype.requiredPaths=function(e){if(this._requiredpaths&&!e)return this._requiredpaths;let r=Object.keys(this.paths),n=r.length,s=[];for(;n--;){let i=r[n];this.paths[i].isRequired&&s.push(i)}return this._requiredpaths=s,this._requiredpaths};se.prototype.indexedPaths=function(){return this._indexedpaths?this._indexedpaths:(this._indexedpaths=this.indexes(),this._indexedpaths)};se.prototype.pathType=function(t){if(this.paths.hasOwnProperty(t))return"real";if(this.virtuals.hasOwnProperty(t))return"virtual";if(this.nested.hasOwnProperty(t))return"nested";let e=k$(t);if(this.subpaths.hasOwnProperty(e)||this.subpaths.hasOwnProperty(t))return"real";let r=this.singleNestedPaths.hasOwnProperty(e)||this.singleNestedPaths.hasOwnProperty(t);return r?r==="nested"?"nested":"real":q$(this,t)!=null?"real":/\.\d+\.|\.\d+$/.test(t)?L$(this,t,e):"adhocOrUndefined"};se.prototype.hasMixedParent=function(t){let e=t.split(/\./g);t="";for(let r=0;r<e.length;++r)if(t=r>0?t+"."+e[r]:e[r],this.paths.hasOwnProperty(t)&&this.paths[t]instanceof Cu.Mixed)return this.paths[t];return null};se.prototype.setupTimestamp=function(t){return s1e(this,t)};function L$(t,e,r){let n=e.split(/\.(\d+)\.|\.(\d+)$/).filter(Boolean);if(n.length<2)return t.paths.hasOwnProperty(n[0])?t.paths[n[0]]:"adhocOrUndefined";let s=t.path(n[0]),i=!1;if(!s)return"adhocOrUndefined";let o=n.length-1;for(let u=1;u<n.length;++u){i=!1;let a=n[u];if(u===o&&s&&!/\D/.test(a)){s.$isMongooseDocumentArray?s=s.$embeddedSchemaType:s instanceof Cu.Array?s=s.caster:s=void 0;break}if(!/\D/.test(a)){s instanceof Cu.Array&&u!==o&&(s=s.caster);continue}if(!(s&&s.schema)){s=void 0;break}i=s.schema.pathType(a)==="nested",s=s.schema.path(a)}return t.subpaths[r]=s,s?"real":i?"nested":"adhocOrUndefined"}function f1e(t,e,r){return L$(t,e,r),t.subpaths[r]}se.prototype.queue=function(t,e){return this.callQueue.push([t,e]),this};se.prototype.pre=function(t){if(t instanceof RegExp){let e=Array.prototype.slice.call(arguments,1);for(let r of v$)t.test(r)&&this.pre.apply(this,[r].concat(e));return this}if(Array.isArray(t)){let e=Array.prototype.slice.call(arguments,1);for(let r of t)this.pre.apply(this,[r].concat(e));return this}return this.s.hooks.pre.apply(this.s.hooks,arguments),this};se.prototype.post=function(t){if(t instanceof RegExp){let e=Array.prototype.slice.call(arguments,1);for(let r of v$)t.test(r)&&this.post.apply(this,[r].concat(e));return this}if(Array.isArray(t)){let e=Array.prototype.slice.call(arguments,1);for(let r of t)this.post.apply(this,[r].concat(e));return this}return this.s.hooks.post.apply(this.s.hooks,arguments),this};se.prototype.plugin=function(t,e){if(typeof t!="function")throw new Error('First param to `schema.plugin()` must be a function, got "'+typeof t+'"');if(e&&e.deduplicate){for(let r of this.plugins)if(r.fn===t)return this}return this.plugins.push({fn:t,opts:e}),t(this,e),this};se.prototype.method=function(t,e,r){if(typeof t!="string")for(let n in t)this.methods[n]=t[n],this.methodOptions[n]=fn(r);else this.methods[t]=e,this.methodOptions[t]=fn(r);return this};se.prototype.static=function(t,e){if(typeof t!="string")for(let r in t)this.statics[r]=t[r];else this.statics[t]=e;return this};se.prototype.index=function(t,e){t||(t={}),e||(e={}),e.expires&&yt.expires(e);for(let r in t)this.aliases[r]&&(t=yt.renameObjKey(t,r,this.aliases[r]));for(let r of Object.keys(t))t[r]==="ascending"||t[r]==="asc"?t[r]=1:(t[r]==="descending"||t[r]==="desc")&&(t[r]=-1);for(let r of this.indexes())if(e.name==null&&r[1].name==null&&R$(r[0],t))throw new ki(`Schema already has an index on ${JSON.stringify(t)}`);return this._indexes.push([t,e]),this};se.prototype.set=function(t,e,r){if(arguments.length===1)return this.options[t];switch(t){case"read":typeof e=="string"?this.options[t]={mode:N2(e),tags:r}:Array.isArray(e)&&typeof e[0]=="string"?this.options[t]={mode:N2(e[0]),tags:e[1]}:this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case"timestamps":this.setupTimestamp(e),this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break;case"_id":this.options[t]=e,this._userProvidedOptions[t]=this.options[t],e&&!this.paths._id?N$(this):!e&&this.paths._id!=null&&this.paths._id.auto&&this.remove("_id");break;default:this.options[t]=e,this._userProvidedOptions[t]=this.options[t];break}return t==="strict"&&Zh(this,{strict:e}),t==="strictQuery"&&Zh(this,{strictQuery:e}),t==="toObject"&&(e={...e},delete e.transform,Zh(this,{toObject:e})),t==="toJSON"&&(e={...e},delete e.transform,Zh(this,{toJSON:e})),this};function Zh(t,e){for(let{schema:r}of t.childSchemas)r.$implicitlyCreated&&(Object.assign(r.options,e),Zh(r,e))}se.prototype.get=function(t){return this.options[t]};var d1e="2d 2dsphere hashed text".split(" ");Object.defineProperty(se,"indexTypes",{get:function(){return d1e},set:function(){throw new Error("Cannot overwrite Schema.indexTypes")}});se.prototype.indexes=function(){return e1e(this)};se.prototype.virtual=function(t,e){if(t instanceof nC||Zle(t)==="VirtualType")return this.virtual(t.path,t.options);if(e=new Xle(e),yt.hasUserDefinedProperty(e,["ref","refPath"])){if(e.localField==null)throw new Error("Reference virtuals require `localField` option");if(e.foreignField==null)throw new Error("Reference virtuals require `foreignField` option");let s=this.virtual(t);s.options=e,this.pre("init",function(a,c){if(I2.has(t,a)){let l=I2.get(t,a);if(this.$$populatedVirtuals||(this.$$populatedVirtuals={}),e.justOne||e.count?this.$$populatedVirtuals[t]=Array.isArray(l)?l[0]:l:this.$$populatedVirtuals[t]=Array.isArray(l)?l:l==null?[]:[l],c?.hydratedPopulatedDocs&&!e.count){let h=s._getModelNamesForPopulate(this),f=this.$$populatedVirtuals[t];if(!Array.isArray(f)&&!f.$__&&h?.length===1){let p=this.db.model(h[0]);this.$$populatedVirtuals[t]=p.hydrate(f)}else if(Array.isArray(f)&&h?.length===1){let p=this.db.model(h[0]);for(let m=0;m<f.length;++m)f[m].$__||(f[m]=p.hydrate(f[m]))}}I2.unset(t,a)}}),s.set(function(u){return this.$$populatedVirtuals||(this.$$populatedVirtuals={}),n1e(this.$$populatedVirtuals,t,u,e)}),typeof e.get=="function"&&s.get(e.get);let i=t.split("."),o=i[0];for(let u=0;u<i.length-1;++u)if(this.paths[o]!=null){if(this.paths[o].$isMongooseDocumentArray||this.paths[o].$isSingleNested){let a=i.slice(u+1).join(".");this.paths[o].schema.virtual(a,e);break}o+="."+i[u+1]}return s}let r=this.virtuals,n=t.split(".");if(this.pathType(t)==="real")throw new Error('Virtual path "'+t+'" conflicts with a real path in the schema');if(r[t]=n.reduce(function(s,i,o){return s[i]||(s[i]=o===n.length-1?new nC(e,t):{}),s[i]},this.tree),e&&e.applyToArray&&n.length>1){let s=this.path(n.slice(0,-1).join("."));if(s&&s.$isMongooseArray)return s.virtual(n[n.length-1],e);throw new ki(`Path "${s}" is not an array`)}return r[t]};se.prototype.virtualpath=function(t){return this.virtuals.hasOwnProperty(t)?this.virtuals[t]:null};se.prototype.remove=function(t){return typeof t=="string"&&(t=[t]),Array.isArray(t)&&t.forEach(function(e){if(!(this.path(e)==null&&!this.nested[e])){if(this.nested[e]){let r=Object.keys(this.paths).concat(Object.keys(this.nested));for(let n of r)n.startsWith(e+".")&&(delete this.paths[n],delete this.nested[n],rC(this,n));delete this.nested[e],rC(this,e);return}delete this.paths[e],rC(this,e)}},this),this};function rC(t,e){let r=e.split("."),n=r.pop(),s=t.tree;for(let i of r)s=s[i];delete s[n]}se.prototype.removeVirtual=function(t){if(typeof t=="string"&&(t=[t]),Array.isArray(t)){for(let e of t)if(this.virtuals[e]==null)throw new ki(`Attempting to remove virtual "${e}" that does not exist.`);for(let e of t)delete this.paths[e],delete this.virtuals[e],e.indexOf(".")!==-1?I2.unset(e,this.tree):delete this.tree[e]}return this};se.prototype.loadClass=function(t,e){return t===Object.prototype||t===Function.prototype||t.prototype.hasOwnProperty("$isMongooseModelPrototype")||t.prototype.hasOwnProperty("$isMongooseDocumentPrototype")?this:(this.loadClass(Object.getPrototypeOf(t),e),e||Object.getOwnPropertyNames(t).forEach(function(r){if(r.match(/^(length|name|prototype|constructor|__proto__)$/))return;let n=Object.getOwnPropertyDescriptor(t,r);n.hasOwnProperty("value")&&this.static(r,n.value)},this),Object.getOwnPropertyNames(t.prototype).forEach(function(r){if(r.match(/^(constructor)$/))return;let n=Object.getOwnPropertyDescriptor(t.prototype,r);e||typeof n.value=="function"&&this.method(r,n.value),typeof n.get=="function"&&(this.virtuals[r]&&(this.virtuals[r].getters=[]),this.virtual(r).get(n.get)),typeof n.set=="function"&&(this.virtuals[r]&&(this.virtuals[r].setters=[]),this.virtual(r).set(n.set))},this),this)};se.prototype._getSchema=function(t){let e=this,r=e.path(t),n=[];if(r)return r.$fullPath=t,r;function s(o,u){let a=o.length+1,c,l;for(;a--;)if(l=o.slice(0,a).join("."),c=u.path(l),c){if(n.push(l),c.caster){if(c.caster instanceof Cu.Mixed)return c.caster.$fullPath=n.join("."),c.caster;if(a!==o.length){if(a+1===o.length&&c.$embeddedSchemaType&&(o[a]==="$"||P2(o[a])))return c.$embeddedSchemaType;if(c.schema){let h;return o[a]==="$"||P2(o[a])?a+1===o.length?c.$embeddedSchemaType:(h=s(o.slice(a+1),c.schema),h&&(h.$parentSchemaDocArray=h.$parentSchemaDocArray||(c.schema.$isSingleNested?null:c)),h):(h=s(o.slice(a),c.schema),h&&(h.$parentSchemaDocArray=h.$parentSchemaDocArray||(c.schema.$isSingleNested?null:c)),h)}}}else if(c.$isSchemaMap){if(a>=o.length)return c;if(a+1>=o.length||c.$__schemaType instanceof Cu.Mixed)return c.$__schemaType;if(c.$__schemaType.schema!=null)return s(o.slice(a+1),c.$__schemaType.schema)}return c.$fullPath=n.join("."),c}}let i=t.split(".");for(let o=0;o<i.length;++o)(i[o]==="$"||P2(i[o]))&&(i[o]="0"),c1e.test(i[o])&&(i[o]="$");return s(i,e)};se.prototype._getPathType=function(t){let e=this;if(e.path(t))return"real";function n(s,i){let o=s.length+1,u,a;for(;o--;){if(a=s.slice(0,o).join("."),u=i.path(a),u)return u.caster?u.caster instanceof Cu.Mixed?{schema:u,pathType:"mixed"}:o!==s.length&&u.schema?s[o]==="$"||P2(s[o])?o===s.length-1?{schema:u,pathType:"nested"}:n(s.slice(o+1),u.schema):n(s.slice(o),u.schema):{schema:u,pathType:u.$isSingleNested?"nested":"array"}:{schema:u,pathType:"real"};if(o===s.length&&i.nested[a])return{schema:i,pathType:"nested"}}return{schema:u||i,pathType:"undefined"}}return n(t.split("."),e)};se.prototype._transformDuplicateKeyError=function(e){if(!this._duplicateKeyErrorMessagesByPath||e.code!==11e3&&e.code!==11001)return e;if(e.keyPattern!=null){let r=e.keyPattern,n=Object.keys(r);if(n.length!==1)return e;let s=n[0];return this._duplicateKeyErrorMessagesByPath.hasOwnProperty(s)?new ki(this._duplicateKeyErrorMessagesByPath[s],{cause:e}):e}return e};function P2(t){return t.startsWith("$[")&&t.endsWith("]")}se.prototype._preCompile=function(){this.plugin(t1e,{deduplicate:!0})};j$.exports=sC=se;se.Types=Cu=jh();sC.ObjectId=Cu.ObjectId});var iC=g((dwe,U$)=>{"use strict";d();var p1e=Bn(),F2=class extends p1e{constructor(e,r,n,s){let i=e.map(o=>o.message).join(", ");i.length>200&&(i=i.slice(0,200)+"..."),super(`${s} failed with ${e.length} Mongoose validation errors: ${i}`),this.validationErrors=e,this.results=r,this.rawResult=n,this.operation=s}};Object.defineProperty(F2.prototype,"name",{value:"MongooseBulkWriteError"});U$.exports=F2});var z$=g((mwe,V$)=>{"use strict";d();var m1e=Ie(),R2=class extends m1e{constructor(e,r){super(e),this.errors=r}};Object.defineProperty(R2.prototype,"name",{value:"SyncIndexesError"});V$.exports=R2});var oC=g((gwe,W$)=>{"use strict";d();W$.exports=function t(e,r,n,s){if(e[s])return;if(e[s]=!0,!n||!n.skipTopLevel){let a=null;for(let c of r){let l=c[1]==null?null:c[1].tags;if(!Array.isArray(l)){e.plugin(c[0],c[1]);continue}a=a||new Set(e.options.pluginTags||[]),l.find(h=>a.has(h))&&e.plugin(c[0],c[1])}}if(n=Object.assign({},n),delete n.skipTopLevel,n.applyPluginsToChildSchemas!==!1)for(let a of Object.keys(e.paths)){let c=e.paths[a];c.schema!=null&&(t(c.schema,r,n,s),c.caster.prototype.$__setSchema(c.schema))}let i=e.discriminators;if(i==null)return;let o=n.applyPluginsToDiscriminators,u=Object.keys(i);for(let a of u){let c=i[a];t(c,r,{skipTopLevel:!o},s)}}});var v2=g((_we,uC)=>{"use strict";d();var H$=null;uC.exports.get=function(){return H$};uC.exports.set=function(t){H$=t}});var aC=g((Swe,G$)=>{"use strict";d();function y1e(){return{result:{ok:1,writeErrors:[],writeConcernErrors:[],insertedIds:[],nInserted:0,nUpserted:0,nMatched:0,nModified:0,nRemoved:0,upserted:[]},insertedCount:0,matchedCount:0,modifiedCount:0,deletedCount:0,upsertedCount:0,upsertedIds:{},insertedIds:{},n:0}}G$.exports=y1e});var Y$=g((wwe,K$)=>{"use strict";d();var g1e=Ie(),$2=class extends g1e{constructor(e,r){super(e),this.errors=r}};Object.defineProperty($2.prototype,"name",{value:"CreateCollectionsError"});K$.exports=$2});var cC=g((bwe,J$)=>{"use strict";d();var Q$=Ol().modifiedPaths;J$.exports=function(e){let r=Object.keys(e),n={},s={};for(let i of r){if(i.startsWith("$")){Q$(e[i],"",n);continue}s[i]=e[i]}return Q$(s,"",n),n}});var lC=g((Dwe,X$)=>{"use strict";d();var E1e=cC();X$.exports=function(e){if(e==null)return{};let r=E1e(e);return Object.keys(r).reduce((n,s)=>{let i=s.match(/\$\[[^\]]+\]/g);if(i==null)return n;for(let o of i){let u=s.indexOf(o);if(u!==s.lastIndexOf(o))throw new Error(`Path '${s}' contains the same array filter multiple times`);n[o.substring(2,o.length-1)]=s.substring(0,u-1).replace(/\$\[[^\]]+\]/g,"0")}return n},{})}});var tx=g((Bwe,ex)=>{"use strict";d();var _1e=$h(),Z$=kt(),A1e=Ns(),S1e=lC();ex.exports=function(e,r,n,s,i){let o=s.split("."),u=null,a="adhocOrUndefined";n=n||{},r=r||{};let c=i!=null&&Array.isArray(i.arrayFilters)?i.arrayFilters:[],l=S1e(r);for(let h=0;h<o.length;++h){let f=o.slice(0,h+1).join("."),p=_1e(f);if(u=e.path(p),u!=null&&(a=e.pathType(p),(u.$isSingleNested||u.$isMongooseDocumentArrayElement)&&u.schema.discriminators!=null)){let m=Z$(u,"schema.options.discriminatorKey"),y=p+"."+m,A=y.replace(/\.\d+\./,"."),S=null;y in n&&(S=n[y]),A in n&&(S=n[A]);let O=p.replace(/\.\d+$/,"");u.$isMongooseDocumentArrayElement&&Z$(n[O],"$elemMatch."+m)!=null&&(S=n[O].$elemMatch[m]);let D=f+"."+m;D in r&&(S=r[D]),y in r&&(S=r[y]);for(let F of Object.keys(l)){let G=l[F]+"."+m,z=F+"."+m;if(G===A){let j=c.find(v=>v.hasOwnProperty(z));j!=null&&(S=j[z])}}if(S==null)continue;let b=A1e(u.caster.discriminators,S),N=b&&b.schema;if(N==null)continue;let R=o.slice(h+1).join(".");if(u=N.path(R),u!=null){a=N._getPathType(R);break}}}return{type:a,schematype:u}}});var nx=g((Pwe,rx)=>{"use strict";d();var O1e=gu();rx.exports=function(e,r,n,s,i,o,u){if(e==null||!e.options||!e.options.immutable)return!1;let a=e.options.immutable;if(typeof a=="function"&&(a=a.call(u,u)),!a||o&&o.overwriteImmutable||r===!1)return!1;if(r==="throw")throw new O1e(null,`Field ${i} is immutable and strict = 'throw'`);return delete n[s],!0}});var ox=g((Fwe,ix)=>{"use strict";d();var w1e=kt();ix.exports=function(e,r,n){if(r==null)return;let s=Object.keys(r);for(let i of s){let o=i.startsWith("$");if(i==="$set"){let u=Object.keys(r[i]);for(let a of u)sx(e,r[i],a,r,n)}else o||sx(e,r,i,r,n)}};function sx(t,e,r,n,s){let i=t.path(r);if(i==null)return;let o=w1e(i,"options.immutable",null);o!=null&&(typeof o=="function"&&(o=o.call(s,s)),o&&(n.$setOnInsert=n.$setOnInsert||{},n.$setOnInsert[r]=e[r],delete e[r]))}});var fC=g((vwe,ux)=>{"use strict";d();var hC=Ea();ux.exports=function(e,r,n){if(r.indexOf(".")===-1){if(hC.has(r))return;e[r]=n;return}let s=r.split("."),i=s.pop(),o=e;for(let u of s)hC.has(u)||(o[u]==null&&(o[u]={}),o=o[u]);hC.has(i)||(o[i]=n)}});var gC=g((xwe,yx)=>{"use strict";d();var x2=Gr(),ef=Ie(),ax=Qw(),cx=gu(),C1e=Aa(),pC=kh(),b1e=Ba(),T1e=ln(),lx=Ns(),dC=tx(),hx=nx(),D1e=ox(),px=Oa().schemaMixedSymbol,M1e=fC(),tf=Ae(),{internalToObjectOptions:B1e}=li(),mC=new Set(["$currentDate","$inc","$min","$max","$mul","$rename","$set","$setOnInsert","$unset","$addToSet","$pop","$pull","$push","$pullAll","$bit"]);yx.exports=function(e,r,n,s,i){if(r==null)return;if(n=n||{},Array.isArray(r)){let h=r.length;for(let f=0;f<h;++f){let p=Object.keys(r[f]);for(let m of p)r[f][m]=I1e(m,r[f][m])}return r}if(e!=null&&i!=null&&tf.hasUserDefinedProperty(i,e.options.discriminatorKey)&&typeof i[e.options.discriminatorKey]!="object"&&e.discriminators!=null){let h=i[e.options.discriminatorKey],f=lx(s.model.discriminators,h);e=e.discriminators[h]||f&&f.schema||e}else if(e!=null&&n.overwriteDiscriminatorKey&&tf.hasUserDefinedProperty(r,e.options.discriminatorKey)&&e.discriminators!=null){let h=r[e.options.discriminatorKey],f=lx(s.model.discriminators,h);e=e.discriminators[h]||f&&f.schema||e}n.upsert&&D1e(e,r,s);let o=Object.keys(r),u=o.length,a={},c,l=!1;for(i=i||{};u--;){let h=o[u];mC.has(h)?h==="$set"&&a.$set||(a[h]=r[h]):(a.$set||(r.$set?a.$set=r.$set:a.$set={}),a.$set[h]=r[h],o.splice(u,1),~o.indexOf("$set")||o.push("$set"))}for(u=o.length;u--;){let h=o[u];if(c=a[h],l=l||h.startsWith("$"),c!=null&&c.$__&&(c=c.toObject(B1e),a[h]=c),c&&typeof c=="object"&&!Buffer.isBuffer(c)&&mC.has(h))mx(e,c,h,n,s,i);else{let f="Invalid atomic update value for "+h+". Expected an object, received "+typeof c;throw new Error(f)}h.startsWith("$")&&tf.isEmptyObject(c)&&delete a[h]}return Object.keys(a).length===0&&n.upsert&&Object.keys(i).length>0?{$setOnInsert:{...i}}:a};function I1e(t,e){if(t==="$unset"){if(typeof e!="string"&&(!Array.isArray(e)||e.find(r=>typeof r!="string")))throw new ef("Invalid $unset in pipeline, must be  a string or an array of strings");return e}if(t==="$project"){if(e==null||typeof e!="object")throw new ef("Invalid $project in pipeline, must be an object");return e}if(t==="$addFields"||t==="$set"){if(e==null||typeof e!="object")throw new ef("Invalid "+t+" in pipeline, must be an object");return e}else if(t==="$replaceRoot"||t==="$replaceWith"){if(e==null||typeof e!="object")throw new ef("Invalid "+t+" in pipeline, must be an object");return e}throw new ef('Invalid update pipeline operator: "'+t+'"')}function mx(t,e,r,n,s,i,o){let u=n.strict,a=o?o+".":"",c=Object.keys(e),l=c.length,h=!1,f,p,m,y=null,A=u??t.options.strict;for(;l--;){if(p=c[l],m=e[p],r==="$pull"){if(f=t._getSchema(a+p),f==null){let O=dC(t,e,i,a+p,n);O.schematype!=null&&(f=O.schematype)}if(f!=null&&f.schema!=null){e[p]=b1e(f.schema,e[p],n,s),h=!0;continue}}let S=a?a+p:p;if(t.discriminatorMapping!=null&&S===t.options.discriminatorKey&&t.discriminatorMapping.value!==e[p]&&!n.overwriteDiscriminatorKey){if(A==="throw"){let O=new Error(`Can't modify discriminator key "`+S+'" on discriminator model');y=Fa(O,s,S,y);continue}else if(A){delete e[p];continue}}if(T1e(m)==="Object"){if(f=t._getSchema(a+p),f==null){let O=dC(t,e,i,a+p,n);O.schematype!=null&&(f=O.schematype)}if(r!=="$setOnInsert"&&hx(f,u,e,p,a+p,n,s))continue;if(f&&f.caster&&r in yC)if("$each"in m){h=!0;try{e[p]={$each:Ul(f,m.$each,r,p,s,a+p)}}catch(O){y=Fa(O,s,p,y)}m.$slice!=null&&(e[p].$slice=m.$slice|0),m.$sort&&(e[p].$sort=m.$sort),m.$position!=null&&(e[p].$position=pC(m.$position))}else{if(f!=null&&f.$isSingleNested){let O=u??f.schema.options.strict;try{e[p]=f.castForQuery(null,m,s,{strict:O})}catch(D){y=Fa(D,s,p,y)}}else try{e[p]=Ul(f,m,r,p,s,a+p)}catch(O){y=Fa(O,s,p,y)}if(e[p]===void 0){delete e[p];continue}h=!0}else if(r==="$currentDate"||r in yC&&f){try{e[p]=Ul(f,m,r,p,s,a+p)}catch(O){y=Fa(O,s,p,y)}if(e[p]===void 0){delete e[p];continue}h=!0}else if(r==="$rename"){let O=new ax(`${a}${p}.$rename`);try{e[p]=Ul(O,m,r,p,s,a+p)}catch(D){y=Fa(D,s,p,y)}if(e[p]===void 0){delete e[p];continue}h=!0}else{let O=a+p,D=t._getPathType(O),b=u;if(D&&D.schema&&b==null&&(b=D.schema.options.strict),D.pathType==="undefined"){if(b==="throw")throw new cx(O);if(b){delete e[p];continue}}h|=mx(t,m,r,n,s,i,a+p)||tf.isObject(m)&&Object.keys(m).length===0}}else{let O=p==="$each"||p==="$or"||p==="$and"||p==="$in"?o:a+p;if(f=t._getSchema(O),r!=="$setOnInsert"&&hx(f,u,e,p,a+p,n,s))continue;let D=t._getPathType(O);if(f==null){let R=dC(t,e,i,O,n);R.schematype!=null&&(f=R.schematype,D=R.type)}let b=u;if(D&&D.schema&&u==null&&(b=D.schema.options.strict),b&&!f&&!/real|nested/.test(D.pathType)){if(b==="throw"&&t.virtuals[O]==null)throw new cx(a+p);delete e[p]}else{if(r==="$rename"){if(e[p]==null)throw new x2("String",e[p],`${a}${p}.$rename`);let R=new ax(`${a}${p}.$rename`);e[p]=R.castForQuery(null,e[p],s);continue}try{a.length===0||p.indexOf(".")===-1?e[p]=Ul(f,m,r,p,s,a+p):(b!==!1||f!=null)&&(M1e(e,p,Ul(f,m,r,p,s,a+p)),delete e[p])}catch(R){y=Fa(R,s,p,y)}if(Array.isArray(e[p])&&(r==="$addToSet"||r==="$push")&&p!=="$each"&&f&&f.caster&&!f.caster.$isMongooseArray&&!f.caster[px]&&(e[p]={$each:e[p]}),e[p]===void 0){delete e[p];continue}h=!0}}}if(y!=null)throw y;return h}function Fa(t,e,r,n){if(typeof e!="object"||!e.options.multipleCastError)throw t;return n=n||new C1e,n.addError(r,t),n}var fx={$pop:1,$inc:1},P1e={$unset:1},yC={$push:1,$addToSet:1,$set:1,$setOnInsert:1};var dx={$set:1,$setOnInsert:1};function Ul(t,e,r,n,s,i){if(!t){if(r in fx)try{return pC(e)}catch{throw new x2("number",e,i)}return e}if(t.caster&&r in yC&&(tf.isObject(e)||Array.isArray(e))&&!dx[r]){let u=0,a=t;for(;a.$isMongooseArray;)++u,a=a.caster;let c=0,l=e;for(;Array.isArray(l);)++c,l=l[0];let h=u-c;for(;c<u;)e=[e],++c;let f=t.applySetters(Array.isArray(e)?e:[e],s);for(let p=0;p<h;++p)f=f[0];return f}if(r in P1e)return e;if(r in fx){if(e==null)throw new x2("number",e,t.path);if(r==="$inc")return t.castForQuery(null,e,s);try{return pC(e)}catch{throw new x2("number",e,t.path)}}if(r==="$currentDate")return typeof e=="object"?{$type:e.$type}:!!e;if(mC.has(n))return t.castForQuery(n,e,s);if(dx[r]){let u=e!=null&&t.$isMongooseArray&&t.$fullPath!=null&&!t.$fullPath.match(/\d+$/),a=t[px]!=null;return u||a?t.applySetters(e,s):t.castForQuery(null,e,s)}return t.castForQuery(null,e,s)}});var EC=g((qwe,gx)=>{"use strict";d();var N1e=cC();gx.exports=function(e,r,n){if(!n||!(r&&r.upsert))return;N1e(e)[n]||(r.overwrite?e[n]=0:(e.$setOnInsert||(e.$setOnInsert={}),e.$setOnInsert[n]=0))}});var _C=g((jwe,_x)=>{"use strict";d();var Ex=Ol().modifiedPaths,F1e=kt();_x.exports=function(t,e,r,n){n=n||{};let s=n.setDefaultsOnInsert!=null?n.setDefaultsOnInsert:e.base.options.setDefaultsOnInsert;if(!n.upsert||s===!1)return r;let i=Object.keys(r||{}),o={},u={},a=i.length,c={},l=!1;for(let p=0;p<a;++p)i[p].startsWith("$")&&(Ex(r[i[p]],"",c),l=!0);l||Ex(r,"",c);let h=Object.keys(t),f=h.length;for(let p=0;p<f;++p){let m=h[p],y=t[m];if(y&&typeof y=="object"){let A=Object.keys(y),S=A.length,O=!1;for(let D=0;D<S;++D)if(A[D].startsWith("$")){O=!0;break}if(O)continue}o[m]=!0,c[m]=!0}return n&&n.overwrite&&!l||e.eachPath(function(p,m){if(m.path==="_id"&&m.options.auto)return;let y=m.getDefault(null,!0);R1e(c,p)||typeof y>"u"||m.splitPath().includes("$*")||(r=r||{},r.$setOnInsert=r.$setOnInsert||{},F1e(r,p)==null&&(r.$setOnInsert[p]=y),u[p]=y)}),r};function R1e(t,e){if(t[e])return!0;let r=e.split("."),n=r[0];for(let i=1;i<r.length;++i){if(t[n])return!0;n+="."+r[i]}let s=Object.keys(t);if(s.length){let i=e+".";for(let o of s)if(o.slice(0,e.length+1)===i)return!0}return!1}});var AC=g((Vwe,Ht)=>{"use strict";d();var v1e=Ie(),$1e=Ns(),Ax=iw(),Sx=ow(),rf=Ba(),Ox=gC(),x1e=Bt(),wx=EC(),{inspect:k1e}=require("util"),Cx=_C();Ht.exports=function(e,r,n){let s=e.base.now();return r.insertOne?i=>Ht.exports.castInsertOne(e,r.insertOne,n).then(()=>i(null),o=>i(o)):r.updateOne?i=>{try{Ht.exports.castUpdateOne(e,r.updateOne,n,s),i(null)}catch(o){i(o)}}:r.updateMany?i=>{try{Ht.exports.castUpdateMany(e,r.updateMany,n,s),i(null)}catch(o){i(o)}}:r.replaceOne?i=>{Ht.exports.castReplaceOne(e,r.replaceOne,n).then(()=>i(null),o=>i(o))}:r.deleteOne?i=>{try{Ht.exports.castDeleteOne(e,r.deleteOne),i(null)}catch(o){i(o)}}:r.deleteMany?i=>{try{Ht.exports.castDeleteMany(e,r.deleteMany),i(null)}catch(o){i(o)}}:i=>{let o=new v1e(`Invalid op passed to \`bulkWrite()\`: ${k1e(r)}`);i(o,null)}};Ht.exports.castInsertOne=async function(e,r,n){let s=Vl(e,r.document),i=new s(r.document);s.schema.options.timestamps&&k2(r,n)&&i.initializeTimestamps(),n.session!=null&&i.$session(n.session);let o=s?.schema?.options?.versionKey;return o&&i[o]==null&&(i[o]=0),r.document=i,n.skipValidation||r.skipValidation||await r.document.$validate(),r};Ht.exports.castUpdateOne=function(e,r,n,s){if(!r.filter)throw new Error("Must provide a filter object.");if(!r.update)throw new Error("Must provide an update object.");let i=Vl(e,r.filter),o=i.schema,u=n.strict!=null?n.strict:i.schema.options.strict,a=x1e(r.update);nf(o,r.filter);let c=k2(r,n);if(i.schema.$timestamps!=null&&c){let f=i.schema.$timestamps.createdAt,p=i.schema.$timestamps.updatedAt;Sx(s,f,p,a,{})}c&&Ax(s,a,i.schema);let l=e.base.options.setDefaultsOnInsert;return(r.setDefaultsOnInsert==null?l:r.setDefaultsOnInsert)!==!1&&Cx(r.filter,i.schema,a,{setDefaultsOnInsert:!0,upsert:r.upsert}),wx(a,r,i.schema.options.versionKey),r.filter=rf(i.schema,r.filter,{strict:u,upsert:r.upsert}),r.update=Ox(i.schema,a,{strict:u,upsert:r.upsert,arrayFilters:r.arrayFilters,overwriteDiscriminatorKey:r.overwriteDiscriminatorKey},i,r.filter),r};Ht.exports.castUpdateMany=function(e,r,n,s){if(!r.filter)throw new Error("Must provide a filter object.");if(!r.update)throw new Error("Must provide an update object.");let i=Vl(e,r.filter),o=i.schema,u=n.strict!=null?n.strict:i.schema.options.strict,a=e.base.options.setDefaultsOnInsert;(r.setDefaultsOnInsert==null?a:r.setDefaultsOnInsert)!==!1&&Cx(r.filter,i.schema,r.update,{setDefaultsOnInsert:!0,upsert:r.upsert});let l=k2(r,n);if(i.schema.$timestamps!=null&&l){let h=i.schema.$timestamps.createdAt,f=i.schema.$timestamps.updatedAt;Sx(s,h,f,r.update,{})}l&&Ax(s,r.update,i.schema),nf(o,r.filter),wx(r.update,r,i.schema.options.versionKey),r.filter=rf(i.schema,r.filter,{strict:u,upsert:r.upsert}),r.update=Ox(i.schema,r.update,{strict:u,upsert:r.upsert,arrayFilters:r.arrayFilters,overwriteDiscriminatorKey:r.overwriteDiscriminatorKey},i,r.filter)};Ht.exports.castReplaceOne=async function(e,r,n){let s=Vl(e,r.filter),i=s.schema,o=n.strict!=null?n.strict:s.schema.options.strict;nf(i,r.filter),r.filter=rf(s.schema,r.filter,{strict:o,upsert:r.upsert});let u=new s(r.replacement,o,!0);s.schema.options.timestamps&&k2(r,n)&&u.initializeTimestamps(),n.session!=null&&u.$session(n.session);let a=s?.schema?.options?.versionKey;if(a&&u[a]==null&&(u[a]=0),r.replacement=u,n.skipValidation||r.skipValidation){r.replacement=r.replacement.toBSON();return}await r.replacement.$validate(),r.replacement=r.replacement.toBSON()};Ht.exports.castDeleteOne=function(e,r){let n=Vl(e,r.filter),s=n.schema;nf(s,r.filter),r.filter=rf(n.schema,r.filter)};Ht.exports.castDeleteMany=function(e,r){let n=Vl(e,r.filter),s=n.schema;nf(s,r.filter),r.filter=rf(n.schema,r.filter)};Ht.exports.cast={insertOne:Ht.exports.castInsertOne,updateOne:Ht.exports.castUpdateOne,updateMany:Ht.exports.castUpdateMany,replaceOne:Ht.exports.castReplaceOne,deleteOne:Ht.exports.castDeleteOne,deleteMany:Ht.exports.castDeleteMany};function nf(t,e){t!=null&&t.discriminatorMapping&&!t.discriminatorMapping.isRoot&&(e[t.discriminatorMapping.key]=t.discriminatorMapping.value)}function Vl(t,e){let r=t.schema.options.discriminatorKey;return e!=null&&e.hasOwnProperty(r)&&(t=$1e(t.discriminators,e[r])||t),t}function k2(t,e){let r=t.timestamps,n=e.timestamps;return r??n??!0}});var Bx=g((Wwe,Mx)=>{"use strict";d();var q1e=WS(),SC=require("events").EventEmitter,L1e=Tl(),Kt=xa(),bx=iC(),Gt=Bn(),j1e=ZS(),U1e=z$(),V1e=oC(),z1e=Bt(),W1e=v2(),H1e=kt(),G1e=aC(),Tx=os(),OC=Ae(),K1e=Y$(),q2=AC(),{modelSymbol:L2}=fe(),Y1e=_O(),Q1e=fe().arrayAtomicsSymbol,sf=fe().sessionNewDocuments,J1e=["MONGODB-X509"];function pe(t){this.base=t,this.collections={},this.models={},this.config={},this.replica=!1,this.options=null,this.otherDbs=[],this.relatedDbs={},this.states=Kt,this._readyState=Kt.disconnected,this._closeCalled=!1,this._hasOpened=!1,this.plugins=[],typeof t>"u"||!t.connections.length?this.id=0:this.id=t.nextConnectionId,this._queue=[]}Object.setPrototypeOf(pe.prototype,SC.prototype);Object.defineProperty(pe.prototype,"readyState",{get:function(){return this._readyState===Kt.connected&&this._lastHeartbeatAt!=null&&this.client?.topology?.s?.description?.type!=="LoadBalanced"&&typeof this.client?.topology?.s?.description?.heartbeatFrequencyMS=="number"&&Date.now()-this._lastHeartbeatAt>=this.client.topology.s.description.heartbeatFrequencyMS*2?Kt.disconnected:this._readyState},set:function(t){if(!(t in Kt))throw new Error("Invalid connection state: "+t);if(this._readyState!==t){this._readyState=t;for(let e of this.otherDbs)e.readyState=t;Kt.connected===t&&(this._hasOpened=!0),this.emit(Kt[t])}}});pe.prototype.get=function(e){return this.config.hasOwnProperty(e)?this.config[e]:H1e(this.options,e)};pe.prototype.set=function(e,r){return this.config.hasOwnProperty(e)?(this.config[e]=r,r):(this.options=this.options||{},this.options[e]=r,r)};pe.prototype.collections;pe.prototype.name;pe.prototype.models;pe.prototype.id;Object.defineProperty(pe.prototype,"plugins",{configurable:!1,enumerable:!0,writable:!0});Object.defineProperty(pe.prototype,"host",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(pe.prototype,"port",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(pe.prototype,"user",{configurable:!0,enumerable:!0,writable:!0});Object.defineProperty(pe.prototype,"pass",{configurable:!0,enumerable:!0,writable:!0});pe.prototype.db;pe.prototype.client;pe.prototype.config;pe.prototype.createCollection=async function(e,r){if(typeof r=="function"||arguments.length>=3&&typeof arguments[2]=="function")throw new Gt("Connection.prototype.createCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.createCollection(e,r)};pe.prototype.bulkWrite=async function(e,r){await this._waitForConnect(),r=r||{};let n=r.ordered==null?!0:r.ordered,s=this.base.transactionAsyncLocalStorage?.getStore();(!r||!r.hasOwnProperty("session"))&&s?.session!=null&&(r={...r,session:s.session});let i=this.base.now(),o=null;if(n){let u=[];for(let a of e){if(typeof a.model!="string"&&!a.model?.[L2])throw new Gt("Must specify model in Connection.prototype.bulkWrite() operations");let c=a.model[L2]?a.model:this.model(a.model);if(a.name==null)throw new Gt("Must specify operation name in Connection.prototype.bulkWrite()");if(!q2.cast.hasOwnProperty(a.name))throw new Gt(`Unrecognized bulkWrite() operation name ${a.name}`);await q2.cast[a.name](c,a,r,i),u.push({...a,namespace:c.namespace()})}o=await this.client.bulkWrite(u,r)}else{let u=[],a=[],c=[],l=[],h=[];for(let p=0;p<e.length;++p){let m=e[p];if(typeof m.model!="string"&&!m.model?.[L2]){let S=new Gt("Must specify model in Connection.prototype.bulkWrite() operations");c.push({index:p,error:S}),h[p]=S;continue}let y;try{y=m.model[L2]?m.model:this.model(m.model)}catch(S){c.push({index:p,error:S});continue}if(m.name==null){let S=new Gt("Must specify operation name in Connection.prototype.bulkWrite()");c.push({index:p,error:S}),h[p]=S;continue}if(!q2.cast.hasOwnProperty(m.name)){let S=new Gt(`Unrecognized bulkWrite() operation name ${m.name}`);c.push({index:p,error:S}),h[p]=S;continue}let A=null;try{A=q2.cast[m.name](y,m,r,i)}catch(S){c.push({index:p,error:S}),h[p]=S;continue}Y1e(A)?l.push(A.then(()=>{u.push({...m,namespace:y.namespace()}),a.push(p)},S=>{c.push({index:p,error:S}),h[p]=S})):(u.push({...m,namespace:y.namespace()}),a.push(p))}if(l.length>0&&await Promise.all(l),c=c.sort((p,m)=>p.index-m.index).map(p=>p.error),u.length===0){if(r.throwOnValidationError&&c.length)throw new bx(c,h,o,"bulkWrite");return G1e()}let f;[o,f]=await this.client.bulkWrite(u,r).then(p=>[p,null]).catch(p=>[null,p]),f&&c.length>0&&(f.mongoose=f.mongoose||{},f.mongoose.validationErrors=c);for(let p=0;p<a.length;++p)h[a[p]]=null;if(c.length>0){if(r.throwOnValidationError)throw new bx(c,h,o,"bulkWrite");o.mongoose=o.mongoose||{},o.mongoose.validationErrors=c,o.mongoose.results=h}}return o};pe.prototype.createCollections=async function(e={}){let r={},n={},{continueOnError:s}=e;delete e.continueOnError;for(let i of Object.values(this.models))try{r[i.modelName]=await i.createCollection({})}catch(o){if(s)r[i.modelName]=o;else{n[i.modelName]=o;break}}if(!s&&Object.keys(n).length){let i=Object.entries(n).map(([u,a])=>`${u}: ${a.message}`).join(", ");throw new K1e(i,n)}return r};pe.prototype.withSession=async function(e){if(arguments.length===0)throw new Error("Please provide an executor function");return await this.client.withSession(e)};pe.prototype.startSession=async function(e){if(arguments.length>=2&&typeof arguments[1]=="function")throw new Gt("Connection.prototype.startSession() no longer accepts a callback");return await this._waitForConnect(),this.client.startSession(e)};pe.prototype.transaction=function(e,r){return this.startSession().then(n=>(n[sf]=new Map,n.withTransaction(()=>X1e(e,n,this.base),r).then(s=>(delete n[sf],s)).catch(s=>{throw delete n[sf],s}).finally(()=>{n.endSession().catch(()=>{})})))};async function X1e(t,e,r){try{return r.transactionAsyncLocalStorage==null?await t(e):await new Promise(s=>{r.transactionAsyncLocalStorage.run({session:e},()=>s(t(e)))})}catch(n){throw Z1e(e),n}}function Z1e(t){for(let e of t[sf].keys()){let r=t[sf].get(e);r.hasOwnProperty("isNew")&&(e.$isNew=r.isNew),r.hasOwnProperty("versionKey")&&e.set(e.schema.options.versionKey,r.versionKey),r.modifiedPaths.length>0&&e.$__.activePaths.states.modify==null&&(e.$__.activePaths.states.modify={});for(let n of r.modifiedPaths){let s=e.$__.activePaths.paths[n];s!=null&&delete e.$__.activePaths[s][n],e.$__.activePaths.paths[n]="modify",e.$__.activePaths.states.modify[n]=!0}for(let n of r.atomics.keys()){let s=e.$__getValue(n);s!=null&&(s[Q1e]=r.atomics.get(n))}}}pe.prototype.dropCollection=async function(e){if(arguments.length>=2&&typeof arguments[1]=="function")throw new Gt("Connection.prototype.dropCollection() no longer accepts a callback");return await this._waitForConnect(),this.db.dropCollection(e)};pe.prototype._waitForConnect=async function(){(this.readyState===Kt.connecting||this.readyState===Kt.disconnected)&&this._shouldBufferCommands()&&await new Promise(e=>{this._queue.push({fn:e})})};pe.prototype.listCollections=async function(){return await this._waitForConnect(),await this.db.listCollections().toArray()};pe.prototype.listDatabases=async function(){throw new Gt("listDatabases() not implemented by driver")};pe.prototype.dropDatabase=async function(){if(arguments.length>=1&&typeof arguments[0]=="function")throw new Gt("Connection.prototype.dropDatabase() no longer accepts a callback");await this._waitForConnect();for(let e of Object.values(this.models))delete e.$init;return this.db.dropDatabase()};pe.prototype._shouldBufferCommands=function(){return this.config.bufferCommands!=null?this.config.bufferCommands:this.base.get("bufferCommands")!=null?this.base.get("bufferCommands"):!0};pe.prototype.error=function(e,r){return r?(r(e),null):(this.listeners("error").length>0&&this.emit("error",e),Promise.reject(e))};pe.prototype.onOpen=function(){this.readyState=Kt.connected;for(let t of this._queue)t.fn.apply(t.ctx,t.args);this._queue=[];for(let t in this.collections)OC.object.hasOwnProperty(this.collections,t)&&this.collections[t].onOpen();this.emit("open")};pe.prototype.openUri=async function(e,r){if((this.readyState===Kt.connecting||this.readyState===Kt.connected)&&this._connectionString===e)return this;this._closeCalled=!1;let n=!1;r&&"_fireAndForget"in r&&(n=r._fireAndForget,delete r._fireAndForget);try{ehe.apply(arguments)}catch(s){throw n||(this.$initialConnection=Promise.reject(s)),s}this.$initialConnection=this.createClient(e,r).then(()=>this).catch(s=>{throw this.readyState=Kt.disconnected,this.listeners("error").length>0&&Tx(()=>this.emit("error",s)),s});for(let s of Object.values(this.models))s.init().catch(function(){});if(n)return this;try{await this.$initialConnection}catch(s){throw Dx(s)}return this};pe.prototype.on=function(e,r){return e==="error"&&this.$initialConnection&&this.$initialConnection.catch(()=>{}),SC.prototype.on.call(this,e,r)};pe.prototype.once=function(e,r){return e==="error"&&this.$initialConnection&&this.$initialConnection.catch(()=>{}),SC.prototype.once.call(this,e,r)};function ehe(t,e,r){if(typeof e=="function"&&r==null)throw new Gt("Connection.prototype.openUri() no longer accepts a callback");if(typeof r=="function")throw new Gt("Connection.prototype.openUri() no longer accepts a callback")}function Dx(t){if(t?.name==="MongoServerSelectionError"){let e=t;t=new j1e,t.assimilateError(e)}return t}pe.prototype.destroy=async function(e){if(typeof e=="function"||arguments.length===2&&typeof arguments[1]=="function")throw new Gt("Connection.prototype.destroy() no longer accepts a callback");return e!=null&&typeof e=="object"?this.$wasForceClosed=!!e.force:this.$wasForceClosed=!!e,this._close(e,!0)};pe.prototype.close=async function(e){if(typeof e=="function"||arguments.length===2&&typeof arguments[1]=="function")throw new Gt("Connection.prototype.close() no longer accepts a callback");e!=null&&typeof e=="object"?this.$wasForceClosed=!!e.force:this.$wasForceClosed=!!e;for(let r of Object.values(this.models))delete r.$init;return this._close(e,!1)};pe.prototype._close=async function(e,r){let n=this,s=this._closeCalled;this._closeCalled=!0,this._destroyCalled=r,this.client!=null&&(this.client._closeCalled=!0,this.client._destroyCalled=r);let i=this;switch(this.readyState){case Kt.disconnected:r&&this.base.connections.indexOf(i)!==-1&&this.base.connections.splice(this.base.connections.indexOf(i),1),s||(await this.doClose(e),this.onClose(e));break;case Kt.connected:this.readyState=Kt.disconnecting,await this.doClose(e),r&&n.base.connections.indexOf(i)!==-1&&this.base.connections.splice(this.base.connections.indexOf(i),1),this.onClose(e);break;case Kt.connecting:return new Promise((o,u)=>{let a=()=>{this.removeListener("open",a),this.removeListener("error",a),r?this.destroy(e).then(o,u):this.close(e).then(o,u)};this.once("open",a),this.once("error",a)});case Kt.disconnecting:return new Promise(o=>{this.once("close",()=>{r&&this.base.connections.indexOf(i)!==-1&&this.base.connections.splice(this.base.connections.indexOf(i),1),o()})})}return this};pe.prototype.doClose=function(){throw new Error("Connection#doClose unimplemented by driver")};pe.prototype.onClose=function(e){this.readyState=Kt.disconnected;for(let r in this.collections)OC.object.hasOwnProperty(this.collections,r)&&this.collections[r].onClose(e);this.emit("close",e);for(let r of this.otherDbs)this._destroyCalled?r.destroy({force:e,skipCloseClient:!0}):r.close({force:e,skipCloseClient:!0})};pe.prototype.collection=function(t,e){let r={autoIndex:this.config.autoIndex!=null?this.config.autoIndex:this.base.options.autoIndex,autoCreate:this.config.autoCreate!=null?this.config.autoCreate:this.base.options.autoCreate,autoSearchIndex:this.config.autoSearchIndex!=null?this.config.autoSearchIndex:this.base.options.autoSearchIndex};e=Object.assign({},r,e?z1e(e):{}),e.$wasForceClosed=this.$wasForceClosed;let n=this.base&&this.base.__driver&&this.base.__driver.Collection||W1e.get().Collection;return t in this.collections||(this.collections[t]=new n(t,this,e)),this.collections[t]};pe.prototype.plugin=function(t,e){return this.plugins.push([t,e]),this};pe.prototype.model=function(e,r,n,s){if(!(this instanceof pe))throw new Gt("`connection.model()` should not be run with `new`. If you are doing `new db.model(foo)(bar)`, use `db.model(foo)(bar)` instead");let i;if(typeof e=="function"&&(i=e,e=i.name),typeof r=="string"&&(n=r,r=!1),OC.isObject(r)&&(r.instanceOfSchema?r instanceof this.base.Schema||(r=r._clone(this.base.Schema)):r=new L1e(r)),r&&!r.instanceOfSchema)throw new Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");let o={cache:!1,overwriteModels:this.base.options.overwriteModels},u=Object.assign(o,s,{connection:this});if(this.models[e]&&!n&&u.overwriteModels!==!0){if(r&&r.instanceOfSchema&&r!==this.models[e].schema)throw new Gt.OverwriteModelError(e);return this.models[e]}let a;if(r&&r.instanceOfSchema)return V1e(r,this.plugins,null,"$connectionPluginsApplied"),a=this.base._model(i||e,r,n,u),this.models[e]||(this.models[e]=a),a.init().catch(function(){}),a;if(this.models[e]&&n)return a=this.models[e],r=a.prototype.schema,a.__subclass(this,r,n);if(arguments.length===1){if(a=this.models[e],!a)throw new Gt.MissingSchemaError(e);return a}if(!a)throw new Gt.MissingSchemaError(e);return this===a.prototype.db&&(!n||n===a.collection.name)?(this.models[e]||(this.models[e]=a),a):(this.models[e]=a.__subclass(this,r,n),this.models[e])};pe.prototype.deleteModel=function(e){if(typeof e=="string"){let r=this.model(e);if(r==null)return this;let n=r.collection.name;delete this.models[e],delete this.collections[n],this.emit("deleteModel",r)}else if(e instanceof RegExp){let r=e,n=this.modelNames();for(let s of n)r.test(s)&&this.deleteModel(s)}else throw new Error('First parameter to `deleteModel()` must be a string or regexp, got "'+e+'"');return this};pe.prototype.watch=function(e,r){let n=i=>{Tx(()=>{if(this.readyState===Kt.connecting)this.once("open",function(){let o=this.db.watch(e,r);i(null,o)});else{let o=this.db.watch(e,r);i(null,o)}})};return new q1e(n,e,r)};pe.prototype.asPromise=async function(){try{return await this.$initialConnection,this}catch(e){throw Dx(e)}};pe.prototype.modelNames=function(){return Object.keys(this.models)};pe.prototype.shouldAuthenticate=function(){return this.user!=null&&(this.pass!=null||this.authMechanismDoesNotRequirePassword())};pe.prototype.authMechanismDoesNotRequirePassword=function(){return this.options&&this.options.auth?J1e.indexOf(this.options.auth.authMechanism)>=0:!0};pe.prototype.optionsProvideAuthenticationData=function(e){return e&&e.user&&(e.pass||this.authMechanismDoesNotRequirePassword())};pe.prototype.getClient=function(){return this.client};pe.prototype.setClient=function(){throw new Gt("Connection#setClient not implemented by driver")};pe.prototype.createClient=function(){throw new Gt("Connection#createClient not implemented by driver")};pe.prototype.syncIndexes=async function(e={}){let r={},n={},{continueOnError:s}=e;delete e.continueOnError;for(let i of Object.values(this.models))try{r[i.modelName]=await i.syncIndexes(e)}catch(o){if(s)r[i.modelName]=o;else{n[i.modelName]=o;break}}if(!s&&Object.keys(n).length){let i=Object.entries(n).map(([u,a])=>`${u}: ${a.message}`).join(", ");throw new U1e(i,n)}return r};pe.STATES=Kt;Mx.exports=pe});var wC=g((Gwe,the)=>{the.exports={name:"mongoose",description:"Mongoose MongoDB ODM",version:"8.9.2",author:"Guillermo Rauch <guillermo@learnboost.com>",keywords:["mongodb","document","model","schema","database","odm","data","datastore","query","nosql","orm","db"],license:"MIT",dependencies:{bson:"^6.10.1",kareem:"2.6.3",mongodb:"~6.12.0",mpath:"0.9.0",mquery:"5.0.0",ms:"2.1.3",sift:"17.1.3"},devDependencies:{"@babel/core":"7.26.0","@babel/preset-env":"7.26.0","@typescript-eslint/eslint-plugin":"^8.18.0","@typescript-eslint/parser":"^8.18.0",acquit:"1.3.0","acquit-ignore":"0.2.1","acquit-require":"0.1.1","assert-browserify":"2.0.0",axios:"1.1.3","babel-loader":"8.2.5","broken-link-checker":"^0.7.8",buffer:"^5.6.0",cheerio:"1.0.0","crypto-browserify":"3.12.1",dotenv:"16.4.5",dox:"1.0.0",eslint:"8.57.0","eslint-plugin-markdown":"^5.0.0","eslint-plugin-mocha-no-only":"1.2.0",express:"^4.19.2","fs-extra":"~11.2.0","highlight.js":"11.10.0","lodash.isequal":"4.5.0","lodash.isequalwith":"4.4.0","markdownlint-cli2":"^0.15.0",marked:"15.0.3",mkdirp:"^3.0.1",mocha:"10.8.2",moment:"2.30.1","mongodb-memory-server":"10.1.2",ncp:"^2.0.0",nyc:"15.1.0",pug:"3.0.3",q:"1.5.1",sinon:"19.0.2","stream-browserify":"3.0.0",tsd:"0.31.2",typescript:"5.7.2",uuid:"11.0.3",webpack:"5.96.1"},directories:{lib:"./lib/mongoose"},scripts:{"docs:clean":"npm run docs:clean:stable","docs:clean:stable":"rimraf index.html && rimraf -rf ./docs/*.html  && rimraf -rf ./docs/api && rimraf -rf ./docs/tutorials/*.html && rimraf -rf ./docs/typescript/*.html && rimraf -rf ./docs/*.html && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:5x":"rimraf index.html && rimraf -rf ./docs/5.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:clean:6x":"rimraf index.html && rimraf -rf ./docs/6.x && rimraf -rf ./docs/source/_docs && rimraf -rf ./tmp","docs:copy:tmp":"mkdirp ./tmp/docs/css && mkdirp ./tmp/docs/js && mkdirp ./tmp/docs/images && mkdirp ./tmp/docs/tutorials && mkdirp ./tmp/docs/typescript && mkdirp ./tmp/docs/api && ncp ./docs/css ./tmp/docs/css --filter=.css$ && ncp ./docs/js ./tmp/docs/js --filter=.js$ && ncp ./docs/images ./tmp/docs/images && ncp ./docs/tutorials ./tmp/docs/tutorials && ncp ./docs/typescript ./tmp/docs/typescript && ncp ./docs/api ./tmp/docs/api && cp index.html ./tmp && cp docs/*.html ./tmp/docs/","docs:copy:tmp:5x":"rimraf ./docs/5.x && ncp ./tmp ./docs/5.x","docs:copy:tmp:6x":"rimraf ./docs/6.x && ncp ./tmp ./docs/6.x","docs:generate":"node ./scripts/website.js","docs:generate:sponsorData":"node ./scripts/loadSponsorData.js","docs:test":"npm run docs:generate","docs:view":"node ./scripts/static.js","docs:prepare:publish:stable":"git checkout gh-pages && git merge master && npm run docs:generate","docs:prepare:publish:5x":"git checkout 5.x && git merge 5.x && npm run docs:clean:stable && npm run docs:generate && npm run docs:copy:tmp && git checkout gh-pages && npm run docs:copy:tmp:5x","docs:prepare:publish:6x":"git checkout 6.x && git merge 6.x && npm run docs:clean:stable && env DOCS_DEPLOY=true npm run docs:generate && mv ./docs/6.x ./tmp && git checkout gh-pages && npm run docs:copy:tmp:6x","docs:prepare:publish:7x":"env DOCS_DEPLOY=true npm run docs:generate && git checkout gh-pages && rimraf ./docs/7.x && mv ./tmp ./docs/7.x","docs:check-links":"blc http://127.0.0.1:8089 -ro",lint:"eslint .","lint-js":"eslint . --ext .js --ext .cjs","lint-ts":"eslint . --ext .ts","lint-md":'markdownlint-cli2 "**/*.md" "#node_modules" "#benchmarks"',"build-browser":"(rm ./dist/* || true) && node ./scripts/build-browser.js",prepublishOnly:"npm run build-browser",release:"git pull && git push origin master --tags && npm publish","release-5x":"git pull origin 5.x && git push origin 5.x && git push origin 5.x --tags && npm publish --tag 5x","release-6x":"git pull origin 6.x && git push origin 6.x && git push origin 6.x --tags && npm publish --tag 6x",mongo:"node ./tools/repl.js","publish-7x":"npm publish --tag 7x",test:"mocha --exit ./test/*.test.js","test-deno":"deno run --allow-env --allow-read --allow-net --allow-run --allow-sys --allow-write ./test/deno.js","test-rs":"START_REPLICA_SET=1 mocha --timeout 30000 --exit ./test/*.test.js","test-tsd":"node ./test/types/check-types-filename && tsd",tdd:"mocha ./test/*.test.js --inspect --watch --recursive --watch-files ./**/*.{js,ts}","test-coverage":"nyc --reporter=html --reporter=text npm test","ts-benchmark":"cd ./benchmarks/typescript/simple && npm install && npm run benchmark | node ../../../scripts/tsc-diagnostics-check"},main:"./index.js",types:"./types/index.d.ts",engines:{node:">=16.20.1"},bugs:{url:"https://github.com/Automattic/mongoose/issues/new"},repository:{type:"git",url:"git://github.com/Automattic/mongoose.git"},homepage:"https://mongoosejs.com",browser:"./dist/browser.umd.js",config:{mongodbMemoryServer:{disablePostinstall:!0}},funding:{type:"opencollective",url:"https://opencollective.com/mongoose"},tsd:{directory:"test/types",compilerOptions:{esModuleInterop:!1,strict:!0,allowSyntheticDefaultImports:!0,strictPropertyInitialization:!1,noImplicitAny:!1,strictNullChecks:!0,module:"commonjs",target:"ES2017"}}}});var Px=g((Kwe,Ix)=>{"use strict";d();var rhe=Bt(),nhe=Bn();function she(t,e){let r=e||{},n=r.readPreference?r.readPreference:ahe(t),s=rhe(r);return n&&n!=="primary"&&n!=="primaryPreferred"?ihe(n,s):s}function ihe(t,e){if(ohe(e)&&uhe(t))lhe();else return che(e)}function ohe(t){let e=t.config&&t.config.autoIndex,{autoCreate:r,autoIndex:n}=t;return!!(e||r||n)}function uhe(t){return t==="secondary"||t==="secondaryPreferred"}function ahe(t){let r=/(?:&|\?)readPreference=(\w+)(?:&|$)/.exec(t);return r?r[1]:null}function che(t){return t.config={autoIndex:!1},t.autoCreate=!1,t.autoIndex=!1,t}function lhe(){throw new nhe('MongoDB prohibits index creation on connections that read from non-primary replicas.  Connections that set "readPreference" to "secondary" or "secondaryPreferred" may not opt-in to the following connection options: autoCreate, autoIndex')}Ix.exports=she});var Fx=g(Nx=>{"use strict";d();Nx.setTimeout=setTimeout});var kx=g((Xwe,xx)=>{"use strict";d();var Rx=Bx(),Ra=Bn(),xn=xa(),vx=da(),hhe=wC(),fhe=Px(),dhe=Fx().setTimeout,$x=Ae();function Fo(){Rx.apply(this,arguments),this._listening=!1,this._lastHeartbeatAt=null}Fo.STATES=xn;Object.setPrototypeOf(Fo.prototype,Rx.prototype);Fo.prototype.useDb=function(t,e){if(e=e||{},e.useCache&&this.relatedDbs[t])return this.relatedDbs[t];let r=new this.constructor;r.name=t,r.base=this.base,r.collections={},r.models={},r.replica=this.replica,r.config=Object.assign({},this.config,r.config),r.name=this.name,r.options=this.options,r._readyState=this._readyState,r._closeCalled=this._closeCalled,r._hasOpened=this._hasOpened,r._listening=!1,r._parent=this,r.host=this.host,r.port=this.port,r.user=this.user,r.pass=this.pass;let n=this;r.client=n.client,this.db&&this._readyState===xn.connected?s():this._queue.push({fn:s});function s(){r.client=n.client;let i={};e.hasOwnProperty("noListener")&&(i.noListener=e.noListener),r.db=n.client.db(t,i),r._lastHeartbeatAt=n._lastHeartbeatAt,r.onOpen()}return r.name=t,e.noListener!==!0&&this.otherDbs.push(r),r.otherDbs.push(this),e&&e.useCache&&(this.relatedDbs[r.name]=r,r.relatedDbs=this.relatedDbs),r};Fo.prototype.removeDb=function(e){let r=this.otherDbs.filter(n=>n.name===e);if(!r.length)throw new Ra(`No connections to database "${e}" found`);for(let n of r)n._closeCalled=!0,n._destroyCalled=!0,n._readyState=xn.disconnected,n.$wasForceClosed=!0;delete this.relatedDbs[e],this.otherDbs=this.otherDbs.filter(n=>n.name!==e)};Fo.prototype.doClose=async function(e){if(this.client==null)return this;let r=!1;return e!=null&&typeof e=="object"&&(r=e.skipCloseClient,e=e.force),r?this:(await this.client.close(e),await new Promise(n=>dhe(n,1)),this)};Fo.prototype.listDatabases=async function(){return await this._waitForConnect(),await this.db.admin().listDatabases()};Fo.prototype.createClient=async function(e,r){if(typeof e!="string")throw new Ra(`The \`uri\` parameter to \`openUri()\` must be a string, got "${typeof e}". Make sure the first parameter to \`mongoose.connect()\` or \`mongoose.createConnection()\` is a string.`);if(this._destroyCalled)throw new Ra("Connection has been closed and destroyed, and cannot be used for re-opening the connection. Please create a new connection with `mongoose.createConnection()` or `mongoose.connect()`.");if((this.readyState===xn.connecting||this.readyState===xn.connected)&&this._connectionString!==e)throw new Ra("Can't call `openUri()` on an active connection with different connection strings. Make sure you aren't calling `mongoose.connect()` multiple times. See: https://mongoosejs.com/docs/connections.html#multiple_connections");if(r=fhe(e,r),r){let i=r.config&&r.config.autoIndex!=null?r.config.autoIndex:r.autoIndex;i!=null&&(this.config.autoIndex=i!==!1,delete r.config,delete r.autoIndex),"autoCreate"in r&&(this.config.autoCreate=!!r.autoCreate,delete r.autoCreate),"sanitizeFilter"in r&&(this.config.sanitizeFilter=r.sanitizeFilter,delete r.sanitizeFilter),"autoSearchIndex"in r&&(this.config.autoSearchIndex=r.autoSearchIndex,delete r.autoSearchIndex),(r.user||r.pass)&&(r.auth=r.auth||{},r.auth.username=r.user,r.auth.password=r.pass,this.user=r.user,this.pass=r.pass),delete r.user,delete r.pass,r.bufferCommands!=null&&(this.config.bufferCommands=r.bufferCommands,delete r.bufferCommands)}else r={};this._connectionOptions=r;let n=r.dbName;n!=null&&(this.$dbName=n),delete r.dbName,$x.hasUserDefinedProperty(r,"driverInfo")||(r.driverInfo={name:"Mongoose",version:hhe.version}),this.readyState=xn.connecting,this._connectionString=e;let s;try{s=new vx.MongoClient(e,r)}catch(i){throw this.readyState=xn.disconnected,i}this.client=s,s.setMaxListeners(0),await s.connect(),CC(this,s,r,n);for(let i of this.otherDbs)CC(i,s,{},i.name);return this};Fo.prototype.setClient=function(e){if(!(e instanceof vx.MongoClient))throw new Ra("Must call `setClient()` with an instance of MongoClient");if(this.readyState!==xn.disconnected)throw new Ra("Cannot call `setClient()` on a connection that is already connected.");if(e.topology==null)throw new Ra("Cannot call `setClient()` with a MongoClient that you have not called `connect()` on yet.");this._connectionString=e.s.url,CC(this,e,{},e.s.options.dbName);for(let r of Object.values(this.models))r.init().catch(function(){});return this};function CC(t,e,r,n){let s=n!=null?e.db(n):e.db();t.db=s,t.client=e,t.host=e&&e.s&&e.s.options&&e.s.options.hosts&&e.s.options.hosts[0]&&e.s.options.hosts[0].host||void 0,t.port=e&&e.s&&e.s.options&&e.s.options.hosts&&e.s.options.hosts[0]&&e.s.options.hosts[0].port||void 0,t.name=n??s.databaseName,t._closeCalled=e._closeCalled;let i=()=>{t.readyState!==xn.connected&&(t.readyState=xn.connected,t.emit("reconnect"),t.emit("reconnected"),t.onOpen())},o=e&&e.topology&&e.topology.description&&e.topology.description.type||"";o==="Single"?e.on("serverDescriptionChanged",u=>{u.newDescription.type==="Unknown"?t.readyState=xn.disconnected:i()}):o.startsWith("ReplicaSet")&&e.on("topologyDescriptionChanged",u=>{let a=u.newDescription;t.readyState===xn.connected&&a.type!=="ReplicaSetWithPrimary"?t.readyState=xn.disconnected:t.readyState===xn.disconnected&&a.type==="ReplicaSetWithPrimary"&&i()}),e.on("serverHeartbeatSucceeded",()=>{t._lastHeartbeatAt=Date.now()}),r.monitorCommands&&(e.on("commandStarted",u=>t.emit("commandStarted",u)),e.on("commandFailed",u=>t.emit("commandFailed",u)),e.on("commandSucceeded",u=>t.emit("commandSucceeded",u))),t.onOpen();for(let u in t.collections)$x.object.hasOwnProperty(t.collections,u)&&t.collections[u].onOpen()}xx.exports=Fo});var qx=g(bC=>{"use strict";d();bC.Collection=rI();bC.Connection=kx()});var jx=g((rCe,Lx)=>{"use strict";d();var phe=Object.freeze(["allowDiskUse","applyPluginsToChildSchemas","applyPluginsToDiscriminators","autoCreate","autoIndex","autoSearchIndex","bufferCommands","bufferTimeoutMS","cloneSchemas","createInitialConnection","debug","forceRepopulate","id","timestamps.createdAt.immutable","maxTimeMS","objectIdGetter","overwriteModels","returnOriginal","runValidators","sanitizeFilter","sanitizeProjection","selectPopulatedPaths","setDefaultsOnInsert","strict","strictPopulate","strictQuery","toJSON","toObject","transactionAsyncLocalStorage","translateAliases"]);Lx.exports=phe});var Vx=g((sCe,Ux)=>{"use strict";d();var mhe=Ie(),j2=class extends mhe{constructor(e){let r=e.map(n=>n.message).join(", ");r.length>50&&(r=r.slice(0,50)+"..."),super(`eachAsync() finished with ${e.length} errors: ${r}`),this.errors=e}};Object.defineProperty(j2.prototype,"name",{value:"EachAsyncMultiError"});Ux.exports=j2});var DC=g((oCe,Wx)=>{"use strict";d();var yhe=Vx(),TC=os();Wx.exports=async function(e,r,n){let s=n.parallel||1,i=n.batchSize,o=n.signal,u=n.continueOnError,a=[],c=ghe(),l=!1;return new Promise((p,m)=>{if(o!=null){if(o.aborted)return p(null);o.addEventListener("abort",()=>(l=!0,p(null)),{once:!0})}if(i!=null){if(typeof i!="number")throw new TypeError("batchSize must be a number");if(Number.isInteger(i)){if(i<1)throw new TypeError("batchSize must be at least 1")}else throw new TypeError("batchSize must be an integer")}h((y,A)=>{if(y!=null)return m(y);p(A)})});function h(p){let m=0,y=0,A=null;for(let O=0;O<s;++O)c(S());function S(){let O=[],D=!1;return b;function b(N){if(D||l)return N();if(A)return N();e(function(R,F){if(A!=null)return N();if(R!=null)if(R.name==="MongoCursorExhaustedError")F=null;else if(u)a.push(R);else return A=R,p(R),N();if(F==null){if(D=!0,m<=0){let j=u?zx(a):A;p(j)}else i&&O.length&&f(O,y++,z);return N()}if(++m,TC(()=>N()),i&&O.push(F),i&&O.length!==i){TC(()=>c(b));return}let G=i?O:F;function z(j){if(i?(m-=O.length,O=[]):--m,j!=null)if(u)a.push(j);else return A=j,p(j);if((D||l)&&m<=0){let v=u?zx(a):A;return p(v)}TC(()=>c(b))}f(G,y++,z)})}}}function f(p,m,y){let A;try{A=r(p,m)}catch(S){return y(S)}A&&typeof A.then=="function"?A.then(function(){y(null)},function(S){y(S||new Error("`eachAsync()` promise rejected without error"))}):y(null)}};function ghe(){let t=[],e=null,r=0;return function(i){if(e===null&&t.length===0)return e=r++,i(n);t.push(i)};function n(){t.length!==0?(e=r++,t.shift()(n)):e=null}}function zx(t){return t.length===0?null:new yhe(t)}});var ek=g((aCe,Zx)=>{"use strict";d();var of=Ie(),Yx=require("stream").Readable,Ehe=DC(),Qx=Mh(),_he=pl(),MC=os(),{once:Ahe}=require("events"),Jx=require("util");function Qr(t){Yx.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.skipped=!1,this.query=t,this._closed=!1;let e=t.model;this._mongooseOptions={},this._transforms=[],this.model=e,this.options={},e.hooks.execPre("find",t,r=>{if(r!=null){if(r instanceof _he.skipWrappedFunction){let n=r.args[0];if(n!=null&&(!Array.isArray(n)||n.length)){let s=new of('Cannot `skipMiddlewareFunction()` with a value when using `.find().cursor()`, value must be nullish or empty array, got "'+Jx.inspect(n)+'".');this._markError(s),this.listeners("error").length>0&&this.emit("error",s);return}this.skipped=!0,this.emit("cursor",null);return}this._markError(r),this.listeners("error").length>0&&this.emit("error",r);return}Object.assign(this.options,t._optionsForExec()),this._transforms=this._transforms.concat(t._transforms.slice()),this.options.transform&&this._transforms.push(this.options.transform),this.options.batchSize&&(this.options._populateBatchSize=Math.min(this.options.batchSize,5e3)),e.collection._shouldBufferCommands()&&e.collection.buffer?e.collection.queue.push([()=>Hx(t,this)]):Hx(t,this)})}Jx.inherits(Qr,Yx);function Hx(t,e){try{let r=t.model.collection.find(t._conditions,e.options);e.cursor=r,e.emit("cursor",r)}catch(r){e._markError(r),e.listeners("error").length>0&&e.emit("error",e._error)}}Qr.prototype._read=function(){V2(this,(t,e)=>{if(t)return this.emit("error",t);if(!e){this.push(null),this.cursor.close(function(r){if(r)return this.emit("error",r)});return}this.push(e)})};Qr.prototype.getDriverCursor=async function(){return this.cursor?this.cursor:(await Ahe(this,"cursor"),this.cursor)};Object.defineProperty(Qr.prototype,"map",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0});Qr.prototype._markError=function(t){return this._error=t,this};Qr.prototype.close=async function(){if(typeof arguments[0]=="function")throw new of("QueryCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close(),this._closed=!0,this.emit("close")}catch(e){throw this.listeners("error").length>0&&this.emit("error",e),e}};Qr.prototype._destroy=function(e,r){let n=null;return this.cursor?n=Promise.resolve():n=new Promise(s=>{this.once("cursor",s)}),n.then(()=>{this.cursor.close()}).then(()=>{this._closed=!0,r()}).catch(s=>{r(s)}),this};Qr.prototype.rewind=function(){return Xx(this,()=>{this.cursor.rewind()}),this};Qr.prototype.next=async function(){if(typeof arguments[0]=="function")throw new of("QueryCursor.prototype.next() no longer accepts a callback");if(this._closed)throw new of("Cannot call `next()` on a closed cursor");return new Promise((e,r)=>{V2(this,function(n,s){if(n)return r(n);e(s)})})};Qr.prototype.eachAsync=function(t,e){if(typeof arguments[2]=="function")throw new of("QueryCursor.prototype.eachAsync() no longer accepts a callback");return typeof e=="function"&&(e={}),e=e||{},Ehe(r=>V2(this,r),t,e)};Qr.prototype.options;Qr.prototype.addCursorFlag=function(t,e){return Xx(this,()=>{this.cursor.addCursorFlag(t,e)}),this};Qr.prototype.transformNull=function(t){return arguments.length===0&&(t=!0),this._mongooseOptions.transformNull=t,this};Qr.prototype._transformForAsyncIterator=function(){return this._transforms.indexOf(Gx)===-1&&this.map(Gx),this};Symbol.asyncIterator!=null&&(Qr.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()});function Gx(t){return t==null?{done:!0}:{value:t,done:!1}}function V2(t,e){let r=e;if(t._transforms.length&&(r=function(n,s){if(n||s===null&&!t._mongooseOptions.transformNull)return e(n,s);e(n,t._transforms.reduce(function(i,o){return o.call(t,i)},s))}),t._error)return MC(function(){r(t._error)});if(t.skipped)return MC(()=>r(null,null));if(t.cursor)if(t.query._mongooseOptions.populate&&!t._pop&&(t._pop=Qx.preparePopulationOptionsMQ(t.query,t.query._mongooseOptions),t._pop.__noPromise=!0),t.query._mongooseOptions.populate&&t.options._populateBatchSize>1){if(t._batchDocs&&t._batchDocs.length)return U2(t,t._batchDocs.shift(),t._pop,r);if(t._batchExhausted)return r(null,null);t._batchDocs=[],t.cursor.next().then(n=>{zl.call({ctx:t,callback:r},null,n)},n=>{zl.call({ctx:t,callback:r},n)});return}else return t.cursor.next().then(n=>{if(!n){r(null,null);return}if(!t.query._mongooseOptions.populate)return U2(t,n,null,r);t.query.model.populate(n,t._pop).then(s=>{U2(t,s,t._pop,r)},s=>{r(s)})},n=>{r(n)});else t.once("error",e),t.once("cursor",function(n){if(t.removeListener("error",e),n==null)return t.skipped?e(null,null):void 0;V2(t,e)})}function zl(t,e){if(t)return this.callback(t);if(!e)return this.ctx._batchExhausted=!0,Kx.call(this);if(this.ctx._batchDocs.push(e),this.ctx._batchDocs.length<this.ctx.options._populateBatchSize){if(this.ctx._batchDocs.length>0&&this.ctx._batchDocs.length%1e3===0)return MC(()=>this.ctx.cursor.next().then(r=>{zl.call(this,null,r)},r=>{zl.call(this,r)}));this.ctx.cursor.next().then(r=>{zl.call(this,null,r)},r=>{zl.call(this,r)})}else Kx.call(this)}function Kx(){if(!this.ctx._batchDocs.length)return this.callback(null,null);this.ctx.query.model.populate(this.ctx._batchDocs,this.ctx._pop).then(()=>{U2(this.ctx,this.ctx._batchDocs.shift(),this.ctx._pop,this.callback)},t=>{this.callback(t)})}function U2(t,e,r,n){if(t.query._mongooseOptions.lean)return t.model.hooks.execPost("find",t.query,[[e]],a=>{if(a!=null)return n(a);n(null,e)});let{model:s,_fields:i,_userProvidedFields:o,options:u}=t.query;Qx.createModelAndInit(s,e,i,o,u,r,(a,c)=>{if(a!=null)return n(a);t.model.hooks.execPost("find",t.query,[[c]],l=>{if(l!=null)return n(l);n(null,c)})})}function Xx(t,e){if(t.cursor)return e();t.once("cursor",function(r){r!=null&&e()})}Zx.exports=Qr});var IC=g((lCe,rk)=>{"use strict";d();var BC=Ae();function She(t,e,r){tk(t,e,r,"maxTimeMS")}function Ohe(t,e,r){tk(t,e,r,"allowDiskUse")}rk.exports={applyGlobalMaxTimeMS:She,applyGlobalDiskUse:Ohe};function tk(t,e,r,n){BC.hasUserDefinedProperty(t,n)||(BC.hasUserDefinedProperty(e,n)?t[n]=e[n]:BC.hasUserDefinedProperty(r,n)&&(t[n]=r[n]))}});var PC=g((fCe,nk)=>{"use strict";d();nk.exports=function(e,r){if(r.readConcern!==void 0||r&&r.session&&r.session.transaction)return;let n=e.options?.readConcern?.level;n!=null&&(r.readConcern={level:n})}});var NC=g((pCe,sk)=>{"use strict";d();sk.exports=function(e,r){if(r.writeConcern!=null||r&&r.session&&r.session.transaction)return;let n=e.options.writeConcern??{};Object.keys(n).length!=0?(r.writeConcern={},!("w"in r)&&n.w!=null&&(r.writeConcern.w=n.w),!("j"in r)&&n.j!=null&&(r.writeConcern.j=n.j),!("wtimeout"in r)&&n.wtimeout!=null&&(r.writeConcern.wtimeout=n.wtimeout)):(!("w"in r)&&n.w!=null&&(r.w=n.w),!("j"in r)&&n.j!=null&&(r.j=n.j),!("wtimeout"in r)&&n.wtimeout!=null&&(r.wtimeout=n.wtimeout))}});var uk=g((yCe,ok)=>{"use strict";d();var ik=Lh();ok.exports=function(e,r,n){if(!Object.keys(n).some(ik))return r.castForQuery(null,n,e);let i=Object.keys(n),o=i.length;for(;o--;){let u=i[o],a=n[u];if(u==="$not"){if(a&&r&&!r.caster){let c=Object.keys(a);if(c.length&&ik(c[0]))for(let l of Object.keys(a))a[l]=r.castForQuery(l,a[l],e);else n[u]=r.castForQuery(u,a,e);continue}}else n[u]=r.castForQuery(u,a,e)}return n}});var ck=g((ECe,ak)=>{"use strict";d();var whe=/^\d+$/;ak.exports=function(e,r){let n=e.path(r);if(n!=null)return n;let s=r.split("."),i="",o=!1;for(let u of s)o&&whe.test(u)||(i=i.length===0?u:i+"."+u,n=e.path(i),n!=null&&n.schema&&(e=n.schema,i="",!o&&n.$isMongooseDocumentArray&&(o=!0)));return n}});var pk=g((ACe,dk)=>{"use strict";d();var Che=uk(),lk=$h(),hk=ck(),bhe=lC();dk.exports=function(e){let r=e.options.arrayFilters,n=e.getUpdate(),s=e.schema,i=bhe(n),o=s.options.strict;e._mongooseOptions.strict!=null&&(o=e._mongooseOptions.strict),e.model&&e.model.base.options.strictQuery!=null&&(o=e.model.base.options.strictQuery),s._userProvidedOptions.strictQuery!=null&&(o=s._userProvidedOptions.strictQuery),e._mongooseOptions.strictQuery!=null&&(o=e._mongooseOptions.strictQuery),fk(r,s,o,i,e)};function fk(t,e,r,n,s){if(Array.isArray(t))for(let i of t){if(i==null)throw new Error(`Got null array filter in ${t}`);let o=Object.keys(i).filter(p=>i[p]!=null);if(o.length===0)continue;let u=o[0];if(u==="$and"||u==="$or"){for(let p of o)fk(i[p],e,r,n,s);continue}let a=u.indexOf("."),c=a===-1?u:u.substring(0,a);if(n[c]==null)continue;let l=lk(n[c]),h=hk(e,l),f=h!=null?h.schema:null;f!=null&&f.discriminators!=null&&i[c+"."+f.options.discriminatorKey]&&(f=f.discriminators[i[c+"."+f.options.discriminatorKey]]||f);for(let p of o){if(n[p]===null||Object.keys(n).length===0)continue;let m=p.indexOf("."),y=m===-1?null:p.substring(m),A;if(y==null||f==null?A=h:(y=lk(y),A=hk(f,y)),A==null){if(!r)return;let S=y==null?l+".0":l+".0"+y;throw new Error(`Could not find path "${S}" in schema`)}typeof i[p]=="object"?i[p]=Che(s,A,i[p]):i[p]=A.castForQuery(null,i[p])}}}});var z2=g((OCe,mk)=>{"use strict";d();var The=wl(),Dhe=hl();mk.exports=function t(e){if(e==null)return!1;let r=Object.keys(e),n=r.length;if(n===0)return!1;for(let s=0;s<n;++s){let i=r[s];if(!i.startsWith("+")&&The(e[i])&&e[i])return Dhe(e[i])?t(e[i]):!!e[i]}return!1}});var gk=g((CCe,yk)=>{"use strict";d();yk.exports=function(e,r){return e===r||r.startsWith(e+".")}});var Ek=g(Zt=>{"use strict";d();var FC=["__proto__","constructor","prototype"],W2=Zt.clone=function t(e,r){if(e==null)return e;if(Array.isArray(e))return Zt.cloneArray(e,r);if(e.constructor){if(/ObjectI[dD]$/.test(e.constructor.name))return typeof e.clone=="function"?e.clone():new e.constructor(e.id);if(e.constructor.name==="ReadPreference")return new e.constructor(e.mode,t(e.tags,r));if(e._bsontype=="Binary"&&e.buffer&&e.value)return typeof e.clone=="function"?e.clone():new e.constructor(e.value(!0),e.sub_type);if(e.constructor.name==="Date"||e.constructor.name==="Function")return new e.constructor(+e);if(e.constructor.name==="RegExp")return new RegExp(e);if(e.constructor.name==="Buffer")return Buffer.from(e)}if(Bhe(e))return Zt.cloneObject(e,r);if(e.valueOf)return e.valueOf()};Zt.cloneObject=function(e,r){let n=r&&r.minimize,s={},i=Object.keys(e),o=i.length,u=!1,a,c="",l=0;for(l=0;l<o;++l)c=i[l],FC.indexOf(c)===-1&&(a=W2(e[c],r),(!n||typeof a<"u")&&(u||(u=!0),s[c]=a));return n?u&&s:s};Zt.cloneArray=function(e,r){let n=[],s=e.length,i=0;for(;i<s;i++)n.push(W2(e[i],r));return n};Zt.merge=function t(e,r){let n=Object.keys(r);for(let s of n)FC.indexOf(s)===-1&&(typeof e[s]>"u"?e[s]=r[s]:Zt.isObject(r[s])?t(e[s],r[s]):e[s]=r[s])};Zt.mergeClone=function t(e,r){let n=Object.keys(r);for(let s of n)FC.indexOf(s)===-1&&(typeof e[s]>"u"?e[s]=W2(r[s]):Zt.isObject(r[s])?t(e[s],r[s]):e[s]=W2(r[s]))};Zt.readPref=function(e){switch(e){case"p":e="primary";break;case"pp":e="primaryPreferred";break;case"s":e="secondary";break;case"sp":e="secondaryPreferred";break;case"n":e="nearest";break}return e};Zt.readConcern=function(e){if(typeof e=="string"){switch(e){case"l":e="local";break;case"a":e="available";break;case"m":e="majority";break;case"lz":e="linearizable";break;case"s":e="snapshot";break}e={level:e}}return e};var Mhe=Object.prototype.toString;Zt.toString=function(t){return Mhe.call(t)};var Bhe=Zt.isObject=function(t){return Zt.toString(t)=="[object Object]"};Zt.keys=Object.keys;Zt.create=typeof Object.create=="function"?Object.create:Ihe;function Ihe(t){if(arguments.length>1)throw new Error("Adding properties is not supported");function e(){}return e.prototype=t,new e}Zt.inherits=function(t,e){t.prototype=Zt.create(e.prototype),t.prototype.constructor=t};Zt.isArgumentsObject=function(t){return Object.prototype.toString.call(t)==="[object Arguments]"}});var RC=g((MCe,_k)=>{d();function Phe(t){r.debug=r,r.default=r,r.coerce=a,r.disable=o,r.enable=s,r.enabled=u,r.humanize=nO(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let h=0;for(let f=0;f<l.length;f++)h=(h<<5)-h+l.charCodeAt(f),h|=0;return r.colors[Math.abs(h)%r.colors.length]}r.selectColor=e;function r(l){let h,f=null,p,m;function y(...A){if(!y.enabled)return;let S=y,O=Number(new Date),D=O-(h||O);S.diff=D,S.prev=h,S.curr=O,h=O,A[0]=r.coerce(A[0]),typeof A[0]!="string"&&A.unshift("%O");let b=0;A[0]=A[0].replace(/%([a-zA-Z%])/g,(R,F)=>{if(R==="%%")return"%";b++;let G=r.formatters[F];if(typeof G=="function"){let z=A[b];R=G.call(S,z),A.splice(b,1),b--}return R}),r.formatArgs.call(S,A),(S.log||r.log).apply(S,A)}return y.namespace=l,y.useColors=r.useColors(),y.color=r.selectColor(l),y.extend=n,y.destroy=r.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==r.namespaces&&(p=r.namespaces,m=r.enabled(l)),m),set:A=>{f=A}}),typeof r.init=="function"&&r.init(y),y}function n(l,h){let f=r(this.namespace+(typeof h>"u"?":":h)+l);return f.log=this.log,f}function s(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let h=(typeof l=="string"?l:"").trim().replace(" ",",").split(",").filter(Boolean);for(let f of h)f[0]==="-"?r.skips.push(f.slice(1)):r.names.push(f)}function i(l,h){let f=0,p=0,m=-1,y=0;for(;f<l.length;)if(p<h.length&&(h[p]===l[f]||h[p]==="*"))h[p]==="*"?(m=p,y=f,p++):(f++,p++);else if(m!==-1)p=m+1,y++,f=y;else return!1;for(;p<h.length&&h[p]==="*";)p++;return p===h.length}function o(){let l=[...r.names,...r.skips.map(h=>"-"+h)].join(",");return r.enable(""),l}function u(l){for(let h of r.skips)if(i(l,h))return!1;for(let h of r.names)if(i(l,h))return!0;return!1}function a(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}_k.exports=Phe});var Ak=g((ts,H2)=>{d();ts.formatArgs=Fhe;ts.save=Rhe;ts.load=vhe;ts.useColors=Nhe;ts.storage=$he();ts.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ts.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Nhe(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Fhe(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+H2.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,s=>{s!=="%%"&&(r++,s==="%c"&&(n=r))}),t.splice(n,0,e)}ts.log=console.debug||console.log||(()=>{});function Rhe(t){try{t?ts.storage.setItem("debug",t):ts.storage.removeItem("debug")}catch{}}function vhe(){let t;try{t=ts.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}function $he(){try{return localStorage}catch{}}H2.exports=RC()(ts);var{formatters:xhe}=H2.exports;xhe.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Ok=g((PCe,Sk)=>{"use strict";d();Sk.exports=(t,e=process.argv)=>{let r=t.startsWith("-")?"":t.length===1?"-":"--",n=e.indexOf(r+t),s=e.indexOf("--");return n!==-1&&(s===-1||n<s)}});var bk=g((FCe,Ck)=>{"use strict";d();var khe=require("os"),wk=require("tty"),vs=Ok(),{env:gr}=process,bu;vs("no-color")||vs("no-colors")||vs("color=false")||vs("color=never")?bu=0:(vs("color")||vs("colors")||vs("color=true")||vs("color=always"))&&(bu=1);"FORCE_COLOR"in gr&&(gr.FORCE_COLOR==="true"?bu=1:gr.FORCE_COLOR==="false"?bu=0:bu=gr.FORCE_COLOR.length===0?1:Math.min(parseInt(gr.FORCE_COLOR,10),3));function vC(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function $C(t,e){if(bu===0)return 0;if(vs("color=16m")||vs("color=full")||vs("color=truecolor"))return 3;if(vs("color=256"))return 2;if(t&&!e&&bu===void 0)return 0;let r=bu||0;if(gr.TERM==="dumb")return r;if(process.platform==="win32"){let n=khe.release().split(".");return Number(n[0])>=10&&Number(n[2])>=10586?Number(n[2])>=14931?3:2:1}if("CI"in gr)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(n=>n in gr)||gr.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in gr)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(gr.TEAMCITY_VERSION)?1:0;if(gr.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in gr){let n=parseInt((gr.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(gr.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(gr.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(gr.TERM)||"COLORTERM"in gr?1:r}function qhe(t){let e=$C(t,t&&t.isTTY);return vC(e)}Ck.exports={supportsColor:qhe,stdout:vC($C(!0,wk.isatty(1))),stderr:vC($C(!0,wk.isatty(2)))}});var Dk=g((Er,K2)=>{d();var Lhe=require("tty"),G2=require("util");Er.init=Ghe;Er.log=zhe;Er.formatArgs=Uhe;Er.save=Whe;Er.load=Hhe;Er.useColors=jhe;Er.destroy=G2.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Er.colors=[6,2,3,4,5,1];try{let t=bk();t&&(t.stderr||t).level>=2&&(Er.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Er.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let r=e.substring(6).toLowerCase().replace(/_([a-z])/g,(s,i)=>i.toUpperCase()),n=process.env[e];return/^(yes|on|true|enabled)$/i.test(n)?n=!0:/^(no|off|false|disabled)$/i.test(n)?n=!1:n==="null"?n=null:n=Number(n),t[r]=n,t},{});function jhe(){return"colors"in Er.inspectOpts?!!Er.inspectOpts.colors:Lhe.isatty(process.stderr.fd)}function Uhe(t){let{namespace:e,useColors:r}=this;if(r){let n=this.color,s="\x1B[3"+(n<8?n:"8;5;"+n),i=`  ${s};1m${e} \x1B[0m`;t[0]=i+t[0].split(`
`).join(`
`+i),t.push(s+"m+"+K2.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=Vhe()+e+" "+t[0]}function Vhe(){return Er.inspectOpts.hideDate?"":new Date().toISOString()+" "}function zhe(...t){return process.stderr.write(G2.formatWithOptions(Er.inspectOpts,...t)+`
`)}function Whe(t){t?process.env.DEBUG=t:delete process.env.DEBUG}function Hhe(){return process.env.DEBUG}function Ghe(t){t.inspectOpts={};let e=Object.keys(Er.inspectOpts);for(let r=0;r<e.length;r++)t.inspectOpts[e[r]]=Er.inspectOpts[e[r]]}K2.exports=RC()(Er);var{formatters:Tk}=K2.exports;Tk.o=function(t){return this.inspectOpts.colors=this.useColors,G2.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};Tk.O=function(t){return this.inspectOpts.colors=this.useColors,G2.inspect(t,this.inspectOpts)}});var Mk=g(($Ce,xC)=>{d();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?xC.exports=Ak():xC.exports=Dk()});var Ik=g(Bk=>{"use strict";d();var qt=Bk;qt.distinct=function(t){if(t._fields&&Object.keys(t._fields).length>0)return"field selection and slice";let e=Object.keys(qt.distinct),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};qt.distinct.select=qt.distinct.slice=qt.distinct.sort=qt.distinct.limit=qt.distinct.skip=qt.distinct.batchSize=qt.distinct.hint=qt.distinct.tailable=!0;qt.findOneAndUpdate=qt.findOneAndRemove=function(t){let e=Object.keys(qt.findOneAndUpdate),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};qt.findOneAndUpdate.limit=qt.findOneAndUpdate.skip=qt.findOneAndUpdate.batchSize=qt.findOneAndUpdate.tailable=!0;qt.count=function(t){if(t._fields&&Object.keys(t._fields).length>0)return"field selection and slice";let e=Object.keys(qt.count),r;return e.every(function(n){return t.options[n]?(r=n,!1):!0}),r};qt.count.slice=qt.count.batchSize=qt.count.tailable=!0});var kC=g((yi,Pk)=>{"use strict";d();yi.isNode=typeof process<"u"&&typeof Pk=="object"&&typeof global=="object"&&typeof Buffer=="function"&&process.argv;yi.isMongo=!yi.isNode&&typeof printjson=="function"&&typeof ObjectId=="function"&&typeof rs=="function"&&typeof sh=="function";yi.isBrowser=!yi.isNode&&!yi.isMongo&&typeof window<"u";yi.type=yi.isNode?"node":yi.isMongo?"mongo":yi.isBrowser?"browser":"unknown"});var uf=g((Nk,Fk)=>{"use strict";d();var qC=["find","findOne","updateMany","updateOne","replaceOne","count","distinct","findOneAndDelete","findOneAndUpdate","aggregate","findCursor","deleteOne","deleteMany"];function LC(){}for(let t=0,e=qC.length;t<e;++t){let r=qC[t];LC.prototype[r]=Khe(r)}Fk.exports=Nk=LC;LC.methods=qC;function Khe(t){return function(){throw new Error("collection."+t+" not implemented")}}});var $k=g((Rk,vk)=>{"use strict";d();var Yhe=uf(),jC=class extends Yhe{constructor(e){super(),this.collection=e,this.collectionName=e.collectionName}async find(e,r){return this.collection.find(e,r).toArray()}async findOne(e,r){return this.collection.findOne(e,r)}async count(e,r){return this.collection.count(e,r)}async distinct(e,r,n){return this.collection.distinct(e,r,n)}async updateMany(e,r,n){return this.collection.updateMany(e,r,n)}async updateOne(e,r,n){return this.collection.updateOne(e,r,n)}async replaceOne(e,r,n){return this.collection.replaceOne(e,r,n)}async deleteOne(e,r){return this.collection.deleteOne(e,r)}async deleteMany(e,r){return this.collection.deleteMany(e,r)}async findOneAndDelete(e,r){return this.collection.findOneAndDelete(e,r)}async findOneAndUpdate(e,r,n){return this.collection.findOneAndUpdate(e,r,n)}findCursor(e,r){return this.collection.find(e,r)}};vk.exports=Rk=jC});var kk=g((VCe,xk)=>{"use strict";d();var UC=kC();if(UC.type=="unknown")throw new Error("Unknown environment");xk.exports=UC.isNode?$k():UC.isMongo?uf():uf()});var HC=g((Lk,jk)=>{"use strict";d();var Qhe=require("assert"),Jhe=require("util"),Ge=Ek(),Ro=Mk()("mquery");function H(t,e){if(!(this instanceof H))return new H(t,e);let r=this.constructor.prototype;this.op=r.op||void 0,this.options=Object.assign({},r.options),this._conditions=r._conditions?Ge.clone(r._conditions):{},this._fields=r._fields?Ge.clone(r._fields):void 0,this._updateDoc=r._updateDoc?Ge.clone(r._updateDoc):void 0,this._path=r._path||void 0,this._distinctDoc=r._distinctDoc||void 0,this._collection=r._collection||void 0,this._traceFunction=r._traceFunction||void 0,e&&this.setOptions(e),t&&this.find(t)}var va="$geoWithin";Object.defineProperty(H,"use$geoWithin",{get:function(){return va=="$geoWithin"},set:function(t){t===!0?va="$geoWithin":va="$within"}});H.prototype.toConstructor=function(){function e(n,s){if(!(this instanceof e))return new e(n,s);H.call(this,n,s)}Ge.inherits(e,H);let r=e.prototype;return r.options={},r.setOptions(this.options),r.op=this.op,r._conditions=Ge.clone(this._conditions),r._fields=Ge.clone(this._fields),r._updateDoc=Ge.clone(this._updateDoc),r._path=this._path,r._distinctDoc=this._distinctDoc,r._collection=this._collection,r._traceFunction=this._traceFunction,e};H.prototype.setOptions=function(t){if(!(t&&Ge.isObject(t)))return this;let e=Ge.keys(t),r;for(let n=0;n<e.length;++n)if(r=e[n],typeof this[r]=="function"){let s=Array.isArray(t[r])?t[r]:[t[r]];this[r].apply(this,s)}else this.options[r]=t[r];return this};H.prototype.collection=function(e){return this._collection=new H.Collection(e),this};H.prototype.collation=function(t){return this.options.collation=t,this};H.prototype.$where=function(t){return this._conditions.$where=t,this};H.prototype.where=function(){if(!arguments.length)return this;this.op||(this.op="find");let t=typeof arguments[0];if(t=="string")return this._path=arguments[0],arguments.length===2&&(this._conditions[this._path]=arguments[1]),this;if(t=="object"&&!Array.isArray(arguments[0]))return this.merge(arguments[0]);throw new TypeError("path must be a string or object")};H.prototype.equals=function(e){this._ensurePath("equals");let r=this._path;return this._conditions[r]=e,this};H.prototype.eq=function(e){this._ensurePath("eq");let r=this._path;return this._conditions[r]=e,this};H.prototype.or=function(e){let r=this._conditions.$or||(this._conditions.$or=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};H.prototype.nor=function(e){let r=this._conditions.$nor||(this._conditions.$nor=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};H.prototype.and=function(e){let r=this._conditions.$and||(this._conditions.$and=[]);return Array.isArray(e)||(e=[e]),r.push.apply(r,e),this};"gt gte lt lte ne in nin all regex size maxDistance minDistance".split(" ").forEach(function(t){H.prototype[t]=function(){let e,r;arguments.length===1?(this._ensurePath(t),r=arguments[0],e=this._path):(r=arguments[1],e=arguments[0]);let n=this._conditions[e]===null||typeof this._conditions[e]=="object"?this._conditions[e]:this._conditions[e]={};return n["$"+t]=r,this}});H.prototype.mod=function(){let t,e;arguments.length===1?(this._ensurePath("mod"),t=arguments[0],e=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),t=[arguments[0],arguments[1]],e=this._path):arguments.length===3?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]);let r=this._conditions[e]||(this._conditions[e]={});return r.$mod=t,this};H.prototype.exists=function(){let t,e;arguments.length===0?(this._ensurePath("exists"),t=this._path,e=!0):arguments.length===1?typeof arguments[0]=="boolean"?(this._ensurePath("exists"),t=this._path,e=arguments[0]):(t=arguments[0],e=!0):arguments.length===2&&(t=arguments[0],e=arguments[1]);let r=this._conditions[t]||(this._conditions[t]={});return r.$exists=e,this};H.prototype.elemMatch=function(){if(arguments[0]==null)throw new TypeError("Invalid argument");let t,e,r;if(typeof arguments[0]=="function")this._ensurePath("elemMatch"),e=this._path,t=arguments[0];else if(Ge.isObject(arguments[0]))this._ensurePath("elemMatch"),e=this._path,r=arguments[0];else if(typeof arguments[1]=="function")e=arguments[0],t=arguments[1];else if(arguments[1]&&Ge.isObject(arguments[1]))e=arguments[0],r=arguments[1];else throw new TypeError("Invalid argument");t&&(r=new H,t(r),r=r._conditions);let n=this._conditions[e]||(this._conditions[e]={});return n.$elemMatch=r,this};H.prototype.within=function(){if(this._ensurePath("within"),this._geoComparison=va,arguments.length===0)return this;if(arguments.length===2)return this.box.apply(this,arguments);if(2<arguments.length)return this.polygon.apply(this,arguments);let e=arguments[0];if(!e)throw new TypeError("Invalid argument");if(e.center)return this.circle(e);if(e.box)return this.box.apply(this,e.box);if(e.polygon)return this.polygon.apply(this,e.polygon);if(e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")};H.prototype.box=function(){let t,e;if(arguments.length===3)t=arguments[0],e=[arguments[1],arguments[2]];else if(arguments.length===2)this._ensurePath("box"),t=this._path,e=[arguments[0],arguments[1]];else throw new TypeError("Invalid argument");let r=this._conditions[t]||(this._conditions[t]={});return r[this._geoComparison||va]={$box:e},this};H.prototype.polygon=function(){let t,e;typeof arguments[0]=="string"?(t=Array.from(arguments),e=t.shift()):(this._ensurePath("polygon"),e=this._path,t=Array.from(arguments));let r=this._conditions[e]||(this._conditions[e]={});return r[this._geoComparison||va]={$polygon:t},this};H.prototype.circle=function(){let t,e;if(arguments.length===1)this._ensurePath("circle"),t=this._path,e=arguments[0];else if(arguments.length===2)t=arguments[0],e=arguments[1];else throw new TypeError("Invalid argument");if(!("radius"in e&&e.center))throw new Error("center and radius are required");let r=this._conditions[t]||(this._conditions[t]={}),n=e.spherical?"$centerSphere":"$center",s=this._geoComparison||va;return r[s]={},r[s][n]=[e.center,e.radius],"unique"in e&&(r[s].$uniqueDocs=!!e.unique),this};H.prototype.near=function(){let e,r;if(this._geoComparison="$near",arguments.length===0)return this;if(arguments.length===1)this._ensurePath("near"),e=this._path,r=arguments[0];else if(arguments.length===2)e=arguments[0],r=arguments[1];else throw new TypeError("Invalid argument");if(!r.center)throw new Error("center is required");let n=this._conditions[e]||(this._conditions[e]={}),s=r.spherical?"$nearSphere":"$near";if(Array.isArray(r.center)){n[s]=r.center;let i="maxDistance"in r?r.maxDistance:null;i!=null&&(n.$maxDistance=i),r.minDistance!=null&&(n.$minDistance=r.minDistance)}else{if(r.center.type!="Point"||!Array.isArray(r.center.coordinates))throw new Error(Jhe.format("Invalid GeoJSON specified for %s",s));n[s]={$geometry:r.center},"maxDistance"in r&&(n[s].$maxDistance=r.maxDistance),"minDistance"in r&&(n[s].$minDistance=r.minDistance)}return this};H.prototype.intersects=function(){if(this._ensurePath("intersects"),this._geoComparison="$geoIntersects",arguments.length===0)return this;let e=arguments[0];if(e!=null&&e.type&&e.coordinates)return this.geometry(e);throw new TypeError("Invalid argument")};H.prototype.geometry=function(){if(!(this._geoComparison=="$within"||this._geoComparison=="$geoWithin"||this._geoComparison=="$near"||this._geoComparison=="$geoIntersects"))throw new Error("geometry() must come after `within()`, `intersects()`, or `near()");let e,r;if(arguments.length===1)this._ensurePath("geometry"),r=this._path,e=arguments[0];else throw new TypeError("Invalid argument");if(!(e.type&&Array.isArray(e.coordinates)))throw new TypeError("Invalid argument");let n=this._conditions[r]||(this._conditions[r]={});return n[this._geoComparison]={$geometry:e},this};H.prototype.select=function(){let e=arguments[0];if(!e)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let r=this._fields||(this._fields={}),n=typeof e,s,i;if((n=="string"||Ge.isArgumentsObject(e))&&typeof e.length=="number"||Array.isArray(e)){for(n=="string"&&(e=e.split(/\s+/)),s=0,i=e.length;s<i;++s){let o=e[s];if(!o)continue;let u=o[0]=="-"?0:1;u===0&&(o=o.substring(1)),r[o]=u}return this}if(Ge.isObject(e)){let o=Ge.keys(e);for(s=0;s<o.length;++s)r[o[s]]=e[o[s]];return this}throw new TypeError("Invalid select() argument. Must be string or object.")};H.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let t,e;if(arguments.length===1){let n=arguments[0];if(typeof n=="object"&&!Array.isArray(n)){let s=Object.keys(n),i=s.length;for(let o=0;o<i;++o)this.slice(s[o],n[s[o]]);return this}this._ensurePath("slice"),t=this._path,e=arguments[0]}else arguments.length===2?typeof arguments[0]=="number"?(this._ensurePath("slice"),t=this._path,e=[arguments[0],arguments[1]]):(t=arguments[0],e=arguments[1]):arguments.length===3&&(t=arguments[0],e=[arguments[1],arguments[2]]);let r=this._fields||(this._fields={});return r[t]={$slice:e},this};H.prototype.sort=function(t){if(!t)return this;let e,r,n;this._validate("sort");let s=typeof t;if(Array.isArray(t)){for(r=t.length,e=0;e<t.length;++e){if(!Array.isArray(t[e]))throw new Error("Invalid sort() argument, must be array of arrays");Xhe(this.options,t[e][0],t[e][1])}return this}if(arguments.length===1&&s=="string"){for(t=t.split(/\s+/),r=t.length,e=0;e<r;++e){if(n=t[e],!n)continue;let i=n[0]=="-"?-1:1;i===-1&&(n=n.substring(1)),qk(this.options,n,i)}return this}if(Ge.isObject(t)){let i=Ge.keys(t);for(e=0;e<i.length;++e)n=i[e],qk(this.options,n,t[n]);return this}if(typeof Map<"u"&&t instanceof Map)return Zhe(this.options,t),this;throw new TypeError("Invalid sort() argument. Must be a string, object, or array.")};var VC={1:1,"-1":-1,asc:1,ascending:1,desc:-1,descending:-1};function qk(t,e,r){if(Array.isArray(t.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let n;if(r&&r.$meta){n=t.sort||(t.sort={}),n[e]={$meta:r.$meta};return}n=t.sort||(t.sort={});let s=String(r||1).toLowerCase();if(s=VC[s],!s)throw new TypeError("Invalid sort value: { "+e+": "+r+" }");n[e]=s}function Xhe(t,e,r){if(t.sort=t.sort||[],!Array.isArray(t.sort))throw new TypeError("Can't mix sort syntaxes. Use either array or object:\n- `.sort([['field', 1], ['test', -1]])`\n- `.sort({ field: 1, test: -1 })`");let n=String(r||1).toLowerCase();if(n=VC[n],!n)throw new TypeError("Invalid sort value: [ "+e+", "+r+" ]");t.sort.push([e,n])}function Zhe(t,e){if(t.sort=t.sort||new Map,!(t.sort instanceof Map))throw new TypeError("Can't mix sort syntaxes. Use either array or object or map consistently");e.forEach(function(r,n){let s=String(r||1).toLowerCase();if(s=VC[s],!s)throw new TypeError("Invalid sort value: < "+n+": "+r+" >");t.sort.set(n,s)})}["limit","skip","batchSize","comment"].forEach(function(t){H.prototype[t]=function(e){return this._validate(t),this.options[t]=e,this}});H.prototype.maxTime=H.prototype.maxTimeMS=function(t){return this._validate("maxTime"),this.options.maxTimeMS=t,this};H.prototype.hint=function(){if(arguments.length===0)return this;this._validate("hint");let t=arguments[0];if(Ge.isObject(t)){let e=this.options.hint||(this.options.hint={});for(let r in t)e[r]=t[r];return this}if(typeof t=="string")return this.options.hint=t,this;throw new TypeError("Invalid hint. "+t)};H.prototype.j=function(e){return this.options.j=e,this};H.prototype.slaveOk=function(t){return this.options.slaveOk=arguments.length?!!t:!0,this};H.prototype.read=H.prototype.setReadPreference=function(t){return arguments.length>1&&!H.prototype.read.deprecationWarningIssued&&(console.error("Deprecation warning: 'tags' argument is not supported anymore in Query.read() method. Please use mongodb.ReadPreference object instead."),H.prototype.read.deprecationWarningIssued=!0),this.options.readPreference=Ge.readPref(t),this};H.prototype.readConcern=H.prototype.r=function(t){return this.options.readConcern=Ge.readConcern(t),this};H.prototype.tailable=function(){return this._validate("tailable"),this.options.tailable=arguments.length?!!arguments[0]:!0,this};H.prototype.writeConcern=H.prototype.w=function(e){return typeof e=="object"?(typeof e.j<"u"&&(this.options.j=e.j),typeof e.w<"u"&&(this.options.w=e.w),typeof e.wtimeout<"u"&&(this.options.wtimeout=e.wtimeout)):this.options.w=e==="m"?"majority":e,this};H.prototype.wtimeout=H.prototype.wTimeout=function(e){return this.options.wtimeout=e,this};H.prototype.merge=function(t){if(!t)return this;if(!H.canMerge(t))throw new TypeError("Invalid argument. Expected instanceof mquery or plain object");return t instanceof H?(t._conditions&&Ge.merge(this._conditions,t._conditions),t._fields&&(this._fields||(this._fields={}),Ge.merge(this._fields,t._fields)),t.options&&(this.options||(this.options={}),Ge.merge(this.options,t.options)),t._updateDoc&&(this._updateDoc||(this._updateDoc={}),Ge.mergeClone(this._updateDoc,t._updateDoc)),t._distinctDoc&&(this._distinctDoc=t._distinctDoc),this):(Ge.merge(this._conditions,t),this)};H.prototype.find=function(t){return this.op="find",H.canMerge(t)&&this.merge(t),this};H.prototype._find=async function(){let e=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),Ro("_find",this._collection.collectionName,e,r),this._collection.find(e,r)};H.prototype.cursor=function(e){if(this.op){if(this.op!=="find")throw new TypeError(".cursor only support .find method")}else this.find(e);let r=this._conditions,n=this._optionsForExec();return this.$useProjection?n.projection=this._fieldsForExec():n.fields=this._fieldsForExec(),Ro("findCursor",this._collection.collectionName,r,n),this._collection.findCursor(r,n)};H.prototype.findOne=function(t){return this.op="findOne",H.canMerge(t)&&this.merge(t),this};H.prototype._findOne=async function(){let e=this._conditions,r=this._optionsForExec();return this.$useProjection?r.projection=this._fieldsForExec():r.fields=this._fieldsForExec(),Ro("findOne",this._collection.collectionName,e,r),this._collection.findOne(e,r)};H.prototype.count=function(t){return this.op="count",this._validate(),H.canMerge(t)&&this.merge(t),this};H.prototype._count=async function(){let e=this._conditions,r=this._optionsForExec();return Ro("count",this._collection.collectionName,e,r),this._collection.count(e,r)};H.prototype.distinct=function(t,e){return this.op="distinct",this._validate(),!e&&typeof t=="string"&&(e=t,t=void 0),typeof e=="string"&&(this._distinctDoc=e),H.canMerge(t)&&this.merge(t),this};H.prototype._distinct=async function(){if(!this._distinctDoc)throw new Error("No value for `distinct` has been declared");let e=this._conditions,r=this._optionsForExec();return Ro("distinct",this._collection.collectionName,e,r),this._collection.distinct(this._distinctDoc,e,r)};H.prototype.updateMany=function(e,r,n){return arguments.length===1&&(r=e,e=n=void 0),zC(this,"updateMany",e,r,n)};H.prototype._updateMany=async function(){return WC(this,"updateMany")};H.prototype.updateOne=function(e,r,n){return arguments.length===1&&(r=e,e=n=void 0),zC(this,"updateOne",e,r,n)};H.prototype._updateOne=async function(){return WC(this,"updateOne")};H.prototype.replaceOne=function(e,r,n){return arguments.length===1&&(r=e,e=n=void 0),this.setOptions({overwrite:!0}),zC(this,"replaceOne",e,r,n)};H.prototype._replaceOne=async function(){return WC(this,"replaceOne")};function zC(t,e,r,n,s){return t.op=e,H.canMerge(r)&&t.merge(r),n&&t._mergeUpdate(n),Ge.isObject(s)&&t.setOptions(s),t}async function WC(t,e){let r=t._optionsForExec(),n=t._conditions,s=t._updateForExec();return Ro("update",t._collection.collectionName,n,s,r),t._collection[e](n,s,r)}H.prototype.deleteOne=function(t){return this.op="deleteOne",H.canMerge(t)&&this.merge(t),this};H.prototype._deleteOne=async function(){let t=this._optionsForExec();delete t.justOne;let e=this._conditions;return Ro("deleteOne",this._collection.collectionName,e,t),this._collection.deleteOne(e,t)};H.prototype.deleteMany=function(t){return this.op="deleteMany",H.canMerge(t)&&this.merge(t),this};H.prototype._deleteMany=async function(){let t=this._optionsForExec();delete t.justOne;let e=this._conditions;return Ro("deleteOne",this._collection.collectionName,e,t),this._collection.deleteMany(e,t)};H.prototype.findOneAndUpdate=function(t,e,r){return this.op="findOneAndUpdate",this._validate(),arguments.length===1&&(e=t,t=r=void 0),H.canMerge(t)&&this.merge(t),e&&this._mergeUpdate(e),r&&this.setOptions(r),this};H.prototype._findOneAndUpdate=async function(){let t=this._conditions,e=this._updateForExec(),r=this._optionsForExec();return this._collection.findOneAndUpdate(t,e,r)};H.prototype.findOneAndRemove=H.prototype.findOneAndDelete=function(t,e){return this.op="findOneAndRemove",this._validate(),H.canMerge(t)&&this.merge(t),e&&this.setOptions(e),this};H.prototype._findOneAndRemove=async function(){let t=this._optionsForExec(),e=this._conditions;return this._collection.findOneAndDelete(e,t)};H.prototype.setTraceFunction=function(t){return this._traceFunction=t,this};H.prototype.exec=async function(e){typeof e=="string"&&(this.op=e),Qhe.ok(this.op,"Missing query type: (find, etc)");let r="_"+this.op;if(typeof this[r]!="function")throw new TypeError(`this[${r}] is not a function`);return this[r]()};H.prototype.then=async function(t,e){return this.exec().then(t,e)};H.prototype.cursor=function(){if(this.op!="find")throw new Error("cursor() is only available for find");let t=this._conditions,e=this._optionsForExec();return this.$useProjection?e.projection=this._fieldsForExec():e.fields=this._fieldsForExec(),Ro("cursor",this._collection.collectionName,t,e),this._collection.findCursor(t,e)};H.prototype.selected=function(){return!!(this._fields&&Object.keys(this._fields).length>0)};H.prototype.selectedInclusively=function(){if(!this._fields)return!1;let e=Object.keys(this._fields);if(e.length===0)return!1;for(let r=0;r<e.length;++r){let n=e[r];if(this._fields[n]===0||this._fields[n]&&typeof this._fields[n]=="object"&&this._fields[n].$meta)return!1}return!0};H.prototype.selectedExclusively=function(){if(!this._fields)return!1;let e=Object.keys(this._fields);if(e.length===0)return!1;for(let r=0;r<e.length;++r){let n=e[r];if(this._fields[n]===0)return!0}return!1};H.prototype._mergeUpdate=function(t){this._updateDoc||(this._updateDoc={}),t instanceof H?t._updateDoc&&Ge.mergeClone(this._updateDoc,t._updateDoc):Ge.mergeClone(this._updateDoc,t)};H.prototype._optionsForExec=function(){return Ge.clone(this.options)};H.prototype._fieldsForExec=function(){return Ge.clone(this._fields)};H.prototype._updateForExec=function(){let t=Ge.clone(this._updateDoc),e=Ge.keys(t),r={};for(let n of e){if(this.options.overwrite){r[n]=t[n];continue}n[0]!=="$"?(r.$set||(t.$set?r.$set=t.$set:r.$set={}),r.$set[n]=t[n],~e.indexOf("$set")||e.push("$set")):n==="$set"&&r.$set||(r[n]=t[n])}return this._compiledUpdate=r,r};H.prototype._ensurePath=function(t){if(!this._path){let e=t+"() must be used after where() when called with these arguments";throw new Error(e)}};H.permissions=Ik();H._isPermitted=function(t,e){let r=H.permissions[e];return r?r[t]!==!0:!0};H.prototype._validate=function(t){let e,r;if(t===void 0){if(r=H.permissions[this.op],typeof r!="function")return!0;e=r(this)}else H._isPermitted(t,this.op)||(e=t);if(e)throw new Error(e+" cannot be used with "+this.op)};H.canMerge=function(t){return t instanceof H||Ge.isObject(t)};H.setGlobalTraceFunction=function(t){H.traceFunction=t};H.utils=Ge;H.env=kC();H.Collection=kk();H.BaseCollection=uf();jk.exports=Lk=H});var GC=g((HCe,Uk)=>{"use strict";d();Uk.exports=function(e,r){if(typeof e==="string"&&(e=e.split(/\s+/)),!Array.isArray(e)&&Object.prototype.toString.call(e)!=="[object Arguments]")return e;let s=e.length,i={};for(let o=0;o<s;++o){let u=e[o];if(!u)continue;let a=u[0]=="-"?0:1;!r&&a===0&&(u=u.substring(1)),i[u]=a}return i}});var Wk=g((KCe,zk)=>{"use strict";d();zk.exports=function(e,r){let n=Object.keys(e).map(s=>Object.keys(e[s])).reduce((s,i)=>s.concat(i),[]);return r.filter(s=>Vk(s,n))};function Vk(t,e){let r=Object.keys(t)[0];if(r==="$and"||r==="$or")return Array.isArray(t[r])?t[r].find(i=>Vk(i,e))!=null:!1;let n=r.indexOf("."),s=n===-1?r:r.slice(0,n);return e.find(i=>i.includes("$["+s+"]"))!=null}});var Y2=g((QCe,Hk)=>{"use strict";d();Hk.exports=function(e){if(typeof e!="object"||e===null)return!1;let r=Object.keys(e),n=r.length;for(let s=0;s<n;++s)if(r[s][0]==="$")return!0;return!1}});var KC=g((XCe,Gk)=>{"use strict";d();var efe=Y2(),{trustedSymbol:tfe}=fl();Gk.exports=function t(e){if(e==null||typeof e!="object")return e;if(Array.isArray(e)){for(let n of e)t(n);return e}let r=Object.keys(e);for(let n of r){let s=e[n];if(!(s!=null&&s[tfe])){if(n==="$and"||n==="$or"){t(s);continue}if(efe(s)){let i=Object.keys(s);if(i.length===1&&i[0]==="$eq")continue;e[n]={$eq:e[n]}}}}return e}});var Yk=g((e9e,Kk)=>{"use strict";d();Kk.exports=function(e){if(e==null)return;let r=Object.keys(e);for(let n=0;n<r.length;++n)typeof e[r[n]]=="string"&&(e[r[n]]=1)}});var Xk=g((r9e,Jk)=>{"use strict";d();var rfe=Cl(),nfe=z2();Jk.exports=function(e,r,n){if(n==null)return;let s=Object.keys(n);if(r=r||{},nfe(e))for(let i of s){Qk(r,i)?r[i]===0&&delete e[i]:e[i]=1;let o=n[i]?.refPath;typeof o=="string"&&(Qk(r,o)?r[o]===0&&delete e[o]:e[o]=1)}else if(rfe(e))for(let i of s){r[i]==null&&delete e[i];let o=n[i]?.refPath;typeof o=="string"&&r[o]==null&&delete e[o]}};function Qk(t,e){let r=e.split("."),n=r.length,s=r[0];for(let i=1;i<n;++i){if(t[s]!=null||t[s+".$"]!=null)return!0;s+="."+r[i]}return t[s]!=null||t[s+".$"]!=null}});var nq=g((s9e,rq)=>{"use strict";d();var Zk=Aa(),sfe=$h(),eq=Ol().flatten,tq=Ol().modifiedPaths;rq.exports=function(t,e,r,n,s){let i=Object.keys(r||{}),o={},u={},a={},c={},l=i.length,h=!1,f={},p,m,y;for(y=0;y<l;++y)if(i[y].startsWith("$")){if(h=!0,i[y]==="$push"||i[y]==="$addToSet"){let W=Object.keys(r[i[y]]);for(let te=0;te<W.length;++te)p=r[i[y]][W[te]],p&&p.$each?c[W[te]]=(c[W[te]]||[]).concat(p.$each):c[W[te]]=(c[W[te]]||[]).concat([p]);continue}tq(r[i[y]],"",f);let j=eq(r[i[y]],null,null,e),v=Object.keys(j),x=v.length;for(let W=0;W<x;++W){let te=sfe(v[W]);m=i[y],!te.includes("$")&&(m==="$set"||m==="$setOnInsert"||m==="$pull"||m==="$pullAll"?(u[te]=j[v[W]],a[te]=m==="$pull"||m==="$pullAll"):m==="$unset"&&(u[te]=void 0),o[te]=!0)}}h||(tq(r,"",f),u=eq(r,null,null,e),o=Object.keys(u));let A=Object.keys(u),S=A.length,O=[],D=[],b=[],N=t;function R(j,v){let x=e._getSchema(A[j]);if(x!=null&&!(x.instance==="Mixed"&&x.path!==A[j]))if(v&&Array.isArray(v.$in))v.$in.forEach((W,te)=>{O.push(function(qe){x.doValidate(W,function(ir){ir&&(ir.path=A[te]+".$in."+te,D.push(ir)),qe(null)},N,{updateValidator:!0})})});else{if(a[A[j]]&&x.$isMongooseArray)return;x.$isMongooseDocumentArrayElement&&v!=null&&v.$__!=null?(b.push(A[j]),O.push(function(W){x.doValidate(v,function(te){if(te)if(te.errors)for(let qe of Object.keys(te.errors)){let ir=te.errors[qe];ir.path=A[j]+"."+qe,D.push(ir)}else te.path=A[j],D.push(te);return W(null)},N,{updateValidator:!0})})):O.push(function(W){for(let te of b)if(A[j].startsWith(te+"."))return W(null);x.doValidate(v,function(te){if(x.schema!=null&&x.schema.options.storeSubdocValidationError===!1&&te instanceof Zk)return W(null);te&&(te.path=A[j],D.push(te)),W(null)},N,{updateValidator:!0})})}}for(y=0;y<S;++y)R(y,u[A[y]]);let F=Object.keys(c);for(let j of F){let v=e._getSchema(j);if(v&&v.$isMongooseDocumentArray)O.push(function(x){v.doValidate(c[j],z(j,D,x),n&&n.context==="query"?t:null)});else{v=e._getSchema(j+".0");for(let x of c[j])O.push(function(W){v.doValidate(x,z(j,D,W),n&&n.context==="query"?t:null,{updateValidator:!0})})}}if(s!=null){let j=O.length;if(j===0)return G(s);for(let v of O)v(function(){--j<=0&&G(s)});return}return function(j){let v=O.length;if(v===0)return G(j);for(let x of O)x(function(){--v<=0&&G(j)})};function G(j){if(D.length){let v=new Zk(null);for(let x of D)v.addError(x.path,x);return j(v)}j(null)}function z(j,v,x){return function(W){W&&(W.path=j,v.push(W)),x(null)}}}});var X2=g((o9e,yq)=>{"use strict";d();var cf=Gr(),ife=ty(),QC=pl(),dn=Ie(),Tu=_y(),sq=ek(),iq=Aa(),{applyGlobalMaxTimeMS:lf,applyGlobalDiskUse:hf}=IC(),ofe=nw(),ufe=PC(),afe=NC(),cfe=Ba(),lfe=pk(),J2=kh(),hfe=gC(),kn=Bt(),ffe=Ns(),ff=Mh(),dfe=li().internalToObjectOptions,pfe=Cl(),mfe=z2(),yfe=Dy(),oq=gk(),aq=Zn(),ns=HC(),gfe=GC(),Efe=Wk(),_fe=KC(),Afe=Yk(),Sfe=Xk(),cq=_C(),Q2=Ea(),Ofe=nq(),af=require("util"),gt=Ae(),wfe=Gy().queryMiddlewareFunctions,Cfe=new Set(["allowDiskUse","batchSize","collation","comment","explain","hint","j","lean","limit","maxTimeMS","populate","projection","read","select","skip","slice","sort","tailable","w","writeConcern","wtimeout"]);function V(t,e,r,n){this._mongooseOptions||(this._mongooseOptions={}),e=e||{},this._transforms=[],this._hooks=new QC,this._executionStack=null;let s=Object.keys(e);for(let o of s)this._mongooseOptions[o]=e[o];n&&(this.mongooseCollection=n),r&&(this.model=r,this.schema=r.schema),this.model&&this.model._mapreduce&&this.lean(),ns.call(this,null,e),n&&this.collection(n),t&&this.find(t),this.options=this.options||{},this.$useProjection=!0;let i=this&&this.schema&&this.schema.options&&this.schema.options.collation||null;i!=null&&(this.options.collation=i)}V.prototype=new ns;V.prototype.constructor=V;V.prototype.count=void 0;V.prototype.findOneAndRemove=void 0;V.base=ns.prototype;Object.defineProperty(V.prototype,"_distinct",{configurable:!0,writable:!0,enumerable:!0,value:void 0});V.use$geoWithin=ns.use$geoWithin;V.prototype.toConstructor=function(){let e=this.model,r=this.mongooseCollection,n=function(o,u){if(!(this instanceof n))return new n(o,u);this._mongooseOptions=kn(s._mongooseOptions),V.call(this,o,u||null,e,r)};af.inherits(n,e.Query);let s=n.prototype;s.options={};let i=Object.assign({},this.options);return i.sort!=null&&(s.sort(i.sort),delete i.sort),s.setOptions(i),s.op=this.op,s._validateOp(),s._conditions=kn(this._conditions),s._fields=kn(this._fields),s._update=kn(this._update,{flattenDecimals:!1}),s._path=this._path,s._distinct=this._distinct,s._collection=this._collection,s._mongooseOptions=this._mongooseOptions,n};V.prototype.clone=function(){let t=this.model,e=this.mongooseCollection,r=new this.model.Query({},{},t,e),n=Object.assign({},this.options);return n.sort!=null&&(r.sort(n.sort),delete n.sort),r.setOptions(n),r.op=this.op,r._validateOp(),r._conditions=kn(this._conditions),r._fields=kn(this._fields),r._update=kn(this._update,{flattenDecimals:!1}),r._path=this._path,r._distinct=this._distinct,r._collection=this._collection,r._mongooseOptions=this._mongooseOptions,r};V.prototype.slice=function(){if(arguments.length===0)return this;this._validate("slice");let t,e;if(arguments.length===1){let n=arguments[0];if(typeof n=="object"&&!Array.isArray(n)){let s=Object.keys(n),i=s.length;for(let o=0;o<i;++o)this.slice(s[o],n[s[o]]);return this}this._ensurePath("slice"),t=this._path,e=arguments[0]}else arguments.length===2?typeof arguments[0]=="number"?(this._ensurePath("slice"),t=this._path,e=[arguments[0],arguments[1]]):(t=arguments[0],e=arguments[1]):arguments.length===3&&(t=arguments[0],e=[arguments[1],arguments[2]]);let r={};return r[t]={$slice:e},this.select(r),this};var bfe=new Set(wfe);V.prototype._validateOp=function(){this.op!=null&&!bfe.has(this.op)&&this.error(new Error('Query has invalid `op`: "'+this.op+'"'))};V.prototype.mod=function(){let t,e;arguments.length===1?(this._ensurePath("mod"),t=arguments[0],e=this._path):arguments.length===2&&!Array.isArray(arguments[1])?(this._ensurePath("mod"),t=[arguments[0],arguments[1]],e=this._path):arguments.length===3?(t=[arguments[1],arguments[2]],e=arguments[0]):(t=arguments[1],e=arguments[0]);let r=this._conditions[e]||(this._conditions[e]={});return r.$mod=t,this};V.prototype.limit=function(e){if(this._validate("limit"),typeof e=="string")try{e=J2(e)}catch{throw new cf("Number",e,"limit")}return this.options.limit=e,this};V.prototype.skip=function(e){if(this._validate("skip"),typeof e=="string")try{e=J2(e)}catch{throw new cf("Number",e,"skip")}return this.options.skip=e,this};V.prototype.projection=function(t){return arguments.length===0?this._fields:(this._fields={},this._userProvidedFields={},this.select(t),this._fields)};V.prototype.select=function(){let e=arguments[0];if(!e)return this;if(arguments.length!==1)throw new Error("Invalid select: select only takes 1 argument");this._validate("select");let r=this._fields||(this._fields={}),n=this._userProvidedFields||(this._userProvidedFields={}),s;this.model!=null&&gt.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection")?s=this.model.db.options.sanitizeProjection:this.model!=null&&gt.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection")?s=this.model.base.options.sanitizeProjection:s=this._mongooseOptions.sanitizeProjection;function i(o){return typeof o=="string"&&s?o=1:o}if(e=gfe(e,!0),gt.isObject(e)){if(this.selectedInclusively())Object.entries(e).forEach(([o,u])=>{u?(r["-"+o]!=null&&delete r["-"+o],r[o]=n[o]=i(u)):Object.keys(n).forEach(a=>{oq(o,a)&&(delete r[a],delete n[a])})});else if(this.selectedExclusively())Object.entries(e).forEach(([o,u])=>{u?Object.keys(n).forEach(a=>{oq(o,a)&&(delete r[a],delete n[a])}):(r["+"+o]!=null&&delete r["+"+o],r[o]=n[o]=i(u))});else{let o=Object.keys(e);for(let u=0;u<o.length;++u){let a=e[o[u]],c=o[u];r[c]=i(a),n[c]=i(a)}}return this}throw new TypeError("Invalid select() argument. Must be string or object.")};V.prototype.schemaLevelProjections=function(e){return this._mongooseOptions.schemaLevelProjections=e,this};V.prototype.sanitizeProjection=function(e){return this._mongooseOptions.sanitizeProjection=e,this};V.prototype.read=function(e,r){return typeof e=="string"?(e=ofe(e),this.options.readPreference={mode:e,tags:r}):this.options.readPreference=e,this};V.prototype.toString=function(){return this.op==="count"||this.op==="countDocuments"||this.op==="find"||this.op==="findOne"||this.op==="deleteMany"||this.op==="deleteOne"||this.op==="findOneAndDelete"||this.op==="remove"?`${this.model.modelName}.${this.op}(${af.inspect(this._conditions)})`:this.op==="distinct"?`${this.model.modelName}.distinct('${this._distinct}', ${af.inspect(this._conditions)})`:this.op==="findOneAndReplace"||this.op==="findOneAndUpdate"||this.op==="replaceOne"||this.op==="update"||this.op==="updateMany"||this.op==="updateOne"?`${this.model.modelName}.${this.op}(${af.inspect(this._conditions)}, ${af.inspect(this._update)})`:`${this.model.modelName}.${this.op}()`};V.prototype.session=function(e){return e==null&&delete this.options.session,this.options.session=e,this};V.prototype.writeConcern=function(e){return e==null?(delete this.options.writeConcern,this):(this.options.writeConcern=e,this)};V.prototype.w=function(e){return e==null&&delete this.options.w,this.options.writeConcern!=null?this.options.writeConcern.w=e:this.options.w=e,this};V.prototype.j=function(e){return e==null&&delete this.options.j,this.options.writeConcern!=null?this.options.writeConcern.j=e:this.options.j=e,this};V.prototype.wtimeout=function(e){return e==null&&delete this.options.wtimeout,this.options.writeConcern!=null?this.options.writeConcern.wtimeout=e:this.options.wtimeout=e,this};V.prototype.getOptions=function(){return this.options};V.prototype.setOptions=function(t,e){if(e)return this._mongooseOptions=t&&kn(t)||{},this.options=t||{},"populate"in t&&this.populate(this._mongooseOptions),this;if(t==null)return this;if(typeof t!="object")throw new Error('Options must be an object, got "'+t+'"');if(t=Object.assign({},t),Array.isArray(t.populate)){let r=t.populate;delete t.populate;let n=r.length;for(let s=0;s<n;++s)this.populate(r[s])}if("setDefaultsOnInsert"in t&&(this._mongooseOptions.setDefaultsOnInsert=t.setDefaultsOnInsert,delete t.setDefaultsOnInsert),"overwriteDiscriminatorKey"in t&&(this._mongooseOptions.overwriteDiscriminatorKey=t.overwriteDiscriminatorKey,delete t.overwriteDiscriminatorKey),"overwriteImmutable"in t&&(this._mongooseOptions.overwriteImmutable=t.overwriteImmutable,delete t.overwriteImmutable),"sanitizeProjection"in t&&(t.sanitizeProjection&&!this._mongooseOptions.sanitizeProjection&&Afe(this._fields),this._mongooseOptions.sanitizeProjection=t.sanitizeProjection,delete t.sanitizeProjection),"sanitizeFilter"in t&&(this._mongooseOptions.sanitizeFilter=t.sanitizeFilter,delete t.sanitizeFilter),"timestamps"in t&&(this._mongooseOptions.timestamps=t.timestamps,delete t.timestamps),"defaults"in t&&(this._mongooseOptions.defaults=t.defaults),"translateAliases"in t&&(this._mongooseOptions.translateAliases=t.translateAliases,delete t.translateAliases),"schemaLevelProjections"in t&&(this._mongooseOptions.schemaLevelProjections=t.schemaLevelProjections,delete t.schemaLevelProjections),t.lean==null&&this.schema&&"lean"in this.schema.options&&(this._mongooseOptions.lean=this.schema.options.lean),typeof t.limit=="string")try{t.limit=J2(t.limit)}catch{throw new cf("Number",t.limit,"limit")}if(typeof t.skip=="string")try{t.skip=J2(t.skip)}catch{throw new cf("Number",t.skip,"skip")}for(let r of Object.keys(t))if(Cfe.has(r)){let n=Array.isArray(t[r])?t[r]:[t[r]];this[r].apply(this,n)}else this.options[r]=t[r];return this};V.prototype.explain=function(e){return arguments.length===0?this.options.explain=!0:e===!1?delete this.options.explain:this.options.explain=e,this};V.prototype.allowDiskUse=function(t){return arguments.length===0?this.options.allowDiskUse=!0:t===!1?delete this.options.allowDiskUse:this.options.allowDiskUse=t,this};V.prototype.maxTimeMS=function(t){return this.options.maxTimeMS=t,this};V.prototype.getFilter=function(){return this._conditions};V.prototype.getQuery=function(){return this._conditions};V.prototype.setQuery=function(t){this._conditions=t};V.prototype.getUpdate=function(){return this._update};V.prototype.setUpdate=function(t){this._update=t};V.prototype._fieldsForExec=function(){return this._fields==null||Object.keys(this._fields).length===0?null:kn(this._fields)};V.prototype._updateForExec=function(){let t=kn(this._update,{transform:!1,depopulate:!0}),e=Object.keys(t),r=e.length,n={};for(;r--;){let s=e[r];s[0]!=="$"?(n.$set||(t.$set?n.$set=t.$set:n.$set={}),n.$set[s]=t[s],e.splice(r,1),~e.indexOf("$set")||e.push("$set")):s==="$set"&&n.$set||(n[s]=t[s])}return n};V.prototype._optionsForExec=function(t){let e=kn(this.options);if(delete e.populate,t=t||this.model,!t)return e;ufe(t.schema,e),afe(t.schema,e);let r=this.model?.db?.base.transactionAsyncLocalStorage?.getStore();!this.options.hasOwnProperty("session")&&r?.session!=null&&(e.session=r.session);let n=t&&t.schema&&t.schema.options&&t.schema.options.read;if(!("readPreference"in e)&&n&&(e.readPreference=n),e.upsert!==void 0&&(e.upsert=!!e.upsert),e.writeConcern&&(e.j&&(e.writeConcern.j=e.j,delete e.j),e.w&&(e.writeConcern.w=e.w,delete e.w),e.wtimeout&&(e.writeConcern.wtimeout=e.wtimeout,delete e.wtimeout)),this._applyPaths(),this._fields!=null){this._fields=this._castFields(this._fields);let s=this._fieldsForExec();s!=null&&(e.projection=s)}return e};V.prototype.lean=function(t){return this._mongooseOptions.lean=arguments.length?t:!0,this};V.prototype.set=function(t,e){if(typeof t=="object"){let r=Object.keys(t);for(let n of r)this.set(n,t[n]);return this}return this._update=this._update||{},t in this._update&&delete this._update[t],this._update.$set=this._update.$set||{},this._update.$set[t]=e,this};V.prototype.get=function(e){let r=this._update;if(r==null)return;let n=r.$set;if(n==null||gt.hasUserDefinedProperty(r,e))return r[e];if(gt.hasUserDefinedProperty(n,e))return n[e]};V.prototype.error=function(e){return arguments.length===0?this._error:(this._error=e,this)};V.prototype._unsetCastError=function(){if(!(this._error==null||!(this._error instanceof cf)))return this.error(null)};V.prototype.mongooseOptions=function(t){return arguments.length>0&&(this._mongooseOptions=t),this._mongooseOptions};V.prototype._castConditions=function(){let t;this.model?.db.options?.sanitizeFilter!=null?t=this.model.db.options.sanitizeFilter:this.model?.base.options?.sanitizeFilter!=null?t=this.model.base.options.sanitizeFilter:t=this._mongooseOptions.sanitizeFilter,t&&_fe(this._conditions);try{this.cast(this.model),this._unsetCastError()}catch(e){this.error(e)}};function lq(t){try{lfe(t)}catch(e){t.error(e)}}V.prototype._find=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let e=this._mongooseOptions,r=this,n=r._userProvidedFields||{};lf(this.options,this.model.db.options,this.model.base.options),hf(this.options,this.model.db.options,this.model.base.options);let s=Object.assign({},{session:this&&this.options&&this.options.session||null,lean:e.lean||null}),i=this._optionsForExec(),o=this._conditions,u=i.projection,a=await this.mongooseCollection.find(o,i);if(i.explain)return a.explain();let c=await a.toArray();if(c.length===0)return c;if(!e.populate){let h=r.schema.options.versionKey;return e.lean&&e.lean.versionKey===!1&&h&&c.forEach(f=>{h in f&&delete f[h]}),e.lean?fq(r.model.schema,c,null,s):r._completeMany(c,u,n,s)}let l=ff.preparePopulationOptionsMQ(r,e);return e.lean?r.model.populate(c,l):(c=await r._completeMany(c,u,n,s),await this.model.populate(c,l),c)};V.prototype.find=function(t){if(typeof t=="function"||typeof arguments[1]=="function")throw new dn("Query.prototype.find() no longer accepts a callback");return this.op="find",ns.canMerge(t)?(this.merge(t),df(this)):t!=null&&this.error(new Tu(t,"filter","find")),this};V.prototype.merge=function(t){if(!t)return this;let e={overwrite:!0};return t instanceof V?(t._conditions&&(e.omit={},this._conditions&&this._conditions.$and&&t._conditions.$and&&(e.omit.$and=!0,this._conditions.$and=this._conditions.$and.concat(t._conditions.$and)),this._conditions&&this._conditions.$or&&t._conditions.$or&&(e.omit.$or=!0,this._conditions.$or=this._conditions.$or.concat(t._conditions.$or)),gt.merge(this._conditions,t._conditions,e)),t._fields&&(this._fields||(this._fields={}),gt.merge(this._fields,t._fields,e)),t.options&&(this.options||(this.options={}),gt.merge(this.options,t.options,e)),t._update&&(this._update||(this._update={}),gt.mergeClone(this._update,t._update)),t._distinct&&(this._distinct=t._distinct),gt.merge(this._mongooseOptions,t._mongooseOptions),this):this.model!=null&&t instanceof this.model.base.Types.ObjectId?(gt.merge(this._conditions,{_id:t},e),this):(t&&t.$__&&(t=t.toObject(dfe)),e.omit={},Array.isArray(t.$and)&&(e.omit.$and=!0,this._conditions||(this._conditions={}),this._conditions.$and=(this._conditions.$and||[]).concat(t.$and.map(r=>gt.isPOJO(r)?gt.merge({},r):r))),Array.isArray(t.$or)&&(e.omit.$or=!0,this._conditions||(this._conditions={}),this._conditions.$or=(this._conditions.$or||[]).concat(t.$or.map(r=>gt.isPOJO(r)?gt.merge({},r):r))),gt.merge(this._conditions,t,e),this)};V.prototype.collation=function(t){return this.options==null&&(this.options={}),this.options.collation=t,this};V.prototype._completeOne=function(t,e,r,n){if(!t&&!this.options.includeResultMetadata)return n(null,null);let s=this.model,i=this._userProvidedFields||{},o=this._mongooseOptions,u=this.options;if(!u.lean&&o.lean&&(u.lean=o.lean),u.explain)return n(null,t);if(!o.populate){let c=this.schema.options.versionKey;return o.lean&&o.lean.versionKey===!1&&c&&c in t&&delete t[c],o.lean?JC(s.schema,t,null,e,u,n):uq(s,t,e,u,r,i,null,n)}let a=ff.preparePopulationOptionsMQ(this,this._mongooseOptions);if(o.lean)return s.populate(t,a).then(c=>{JC(s.schema,c,null,e,u,n)},c=>{n(c)});uq(s,t,e,u,r,i,[],(c,l)=>{if(c!=null)return n(c);s.populate(l,a).then(h=>{n(null,h)},h=>{n(h)})})};V.prototype._completeMany=async function(e,r,n,s){let i=this.model;return Promise.all(e.map(o=>new Promise((u,a)=>{let c=o;o=ff.createModel(i,o,r,n),s.session!=null&&o.$session(s.session),o.$init(c,s,l=>{if(l!=null)return a(l);u(o)})})))};V.prototype._findOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();lf(this.options,this.model.db.options,this.model.base.options),hf(this.options,this.model.db.options,this.model.base.options);let e=this._optionsForExec(),r=await this.mongooseCollection.findOne(this._conditions,e);return new Promise((n,s)=>{this._completeOne(r,null,e.projection,(i,o)=>{if(i)return s(i);n(o)})})};V.prototype.findOne=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new dn("Query.prototype.findOne() no longer accepts a callback");return this.op="findOne",this._validateOp(),r&&this.setOptions(r),e&&this.select(e),ns.canMerge(t)?(this.merge(t),df(this)):t!=null&&this.error(new Tu(t,"filter","findOne")),this};V.prototype._countDocuments=async function(){this._applyTranslateAliases();try{this.cast(this.model)}catch(n){this.error(n)}if(this.error())throw this.error();lf(this.options,this.model.db.options,this.model.base.options),hf(this.options,this.model.db.options,this.model.base.options);let e=this._optionsForExec(),r=this._conditions;return this.mongooseCollection.countDocuments(r,e)};V.prototype._applyTranslateAliases=function(){let e=!1;"translateAliases"in this._mongooseOptions?e=this._mongooseOptions.translateAliases:this.model?.schema?._userProvidedOptions?.translateAliases!=null?e=this.model.schema._userProvidedOptions.translateAliases:this.model?.base?.options?.translateAliases!=null&&(e=this.model.base.options.translateAliases),e&&this.model?.schema?.aliases&&Object.keys(this.model.schema.aliases).length>0&&(this.model.translateAliases(this._conditions,!0),this.model.translateAliases(this._fields,!0),this.model.translateAliases(this._update,!0),this._distinct!=null&&this.model.schema.aliases[this._distinct]!=null&&(this._distinct=this.model.schema.aliases[this._distinct]))};V.prototype._estimatedDocumentCount=async function(){if(this.error())throw this.error();let e=this._optionsForExec();return this.mongooseCollection.estimatedDocumentCount(e)};V.prototype.estimatedDocumentCount=function(t){if(typeof t=="function"||typeof arguments[1]=="function")throw new dn("Query.prototype.estimatedDocumentCount() no longer accepts a callback");return this.op="estimatedDocumentCount",this._validateOp(),t!=null&&this.setOptions(t),this};V.prototype.countDocuments=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new dn("Query.prototype.countDocuments() no longer accepts a callback");return this.op="countDocuments",this._validateOp(),ns.canMerge(t)&&this.merge(t),e!=null&&this.setOptions(e),this};V.prototype.__distinct=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error())throw this.error();lf(this.options,this.model.db.options,this.model.base.options),hf(this.options,this.model.db.options,this.model.base.options);let e=this._optionsForExec();return this.mongooseCollection.distinct(this._distinct,this._conditions,e)};V.prototype.distinct=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new dn("Query.prototype.distinct() no longer accepts a callback");return this.op="distinct",this._validateOp(),ns.canMerge(e)?(this.merge(e),df(this)):e!=null&&this.error(new Tu(e,"filter","distinct")),t!=null&&(this._distinct=t),r!=null&&this.setOptions(r),this};V.prototype.sort=function(t,e){if(arguments.length>2)throw new Error("sort() takes at most 2 arguments");if(e!=null&&typeof e!="object")throw new Error("sort() options argument must be an object or nullish");this.options.sort==null&&(this.options.sort={}),e&&e.override&&(this.options.sort={});let r=this.options.sort;if(typeof t=="string"){let n=t.indexOf(" ")===-1?[t]:t.split(" ");for(let s of n){let i=s[0]=="-"?-1:1;i===-1&&(s=s.slice(1)),!Q2.has(s)&&(r[s]=i)}}else if(Array.isArray(t))for(let n of t){if(!Array.isArray(n))throw new TypeError("Invalid sort() argument, must be array of arrays");let s=""+n[0];Q2.has(s)||(r[s]=YC(n[1],s))}else if(typeof t=="object"&&t!=null&&!(t instanceof Map))for(let n of Object.keys(t))Q2.has(n)||(r[n]=YC(t[n],n));else if(t instanceof Map)for(let n of t.keys())n=""+n,!Q2.has(n)&&(r[n]=YC(t.get(n),n));else if(t!=null)throw new TypeError("Invalid sort() argument. Must be a string, object, array, or map.");return this};function YC(t,e){if(t===1||t==="asc"||t==="ascending")return 1;if(t===-1||t==="desc"||t==="descending")return-1;if(t?.$meta!=null)return{$meta:t.$meta};throw new TypeError("Invalid sort value: { "+e+": "+t+" }")}V.prototype.deleteOne=function(e,r){if(typeof e=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new dn("Query.prototype.deleteOne() no longer accepts a callback");return this.op="deleteOne",this.setOptions(r),ns.canMerge(e)?(this.merge(e),df(this)):e!=null&&this.error(new Tu(e,"filter","deleteOne")),this};V.prototype._deleteOne=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let e=this._optionsForExec();return this.mongooseCollection.deleteOne(this._conditions,e)};V.prototype.deleteMany=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new dn("Query.prototype.deleteMany() no longer accepts a callback");return this.setOptions(e),this.op="deleteMany",ns.canMerge(t)?(this.merge(t),df(this)):t!=null&&this.error(new Tu(t,"filter","deleteMany")),this};V.prototype._deleteMany=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let e=this._optionsForExec();return this.mongooseCollection.deleteMany(this._conditions,e)};function uq(t,e,r,n,s,i,o,u){if(n.includeResultMetadata&&e==null)return a(null),null;ff.createModelAndInit(t,e,s,i,n,o,a);function a(c,l){if(c)return u(c);if(n.includeResultMetadata)return e&&l?(n.session!=null&&l.$session(n.session),r.value=l):r.value=null,u(null,r);n.session!=null&&l.$session(n.session),u(null,l)}}function df(t){if(!t||!t.model||!t.model.schema)return;let e=t.model.schema;e&&e.discriminatorMapping&&!e.discriminatorMapping.isRoot&&(t._conditions[e.discriminatorMapping.key]=e.discriminatorMapping.value)}V.prototype.findOneAndUpdate=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[3]=="function")throw new dn("Query.prototype.findOneAndUpdate() no longer accepts a callback");switch(this.op="findOneAndUpdate",this._validateOp(),this._validate(),arguments.length){case 2:r=void 0;break;case 1:e=t,t=r=void 0;break}ns.canMerge(t)?this.merge(t):t!=null&&this.error(new Tu(t,"filter","findOneAndUpdate")),e&&this._mergeUpdate(e),r=r?kn(r):{},r.projection&&(this.select(r.projection),delete r.projection),r.fields&&(this.select(r.fields),delete r.fields);let n=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;return r.new==null&&r.returnDocument==null&&r.returnOriginal==null&&n!=null&&(r.returnOriginal=n),this.setOptions(r),this};V.prototype._findOneAndUpdate=async function(){if(this._applyTranslateAliases(),this._castConditions(),lq(this),this.error())throw this.error();lf(this.options,this.model.db.options,this.model.base.options),hf(this.options,this.model.db.options,this.model.base.options),"strict"in this.options&&(this._mongooseOptions.strict=this.options.strict);let e=this._optionsForExec(this.model);hq(e),this._update=this._castUpdate(this._update);let r=Object.assign({},e,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});if(this._update=cq(this._conditions,this.model.schema,this._update,r),!this._update||Object.keys(this._update).length===0)if(e.upsert){let o=kn(this._update);delete o._id,this._update={$set:o}}else return this._executionStack=null,await this._findOne();else{if(this._update instanceof Error)throw this._update;this._update.$set&&Object.keys(this._update.$set).length===0&&delete this._update.$set}XC(this,"runValidators",!1)&&await this.validate(this._update,e,!1),this._update.toBSON&&(this._update=this._update.toBSON());let s=await this.mongooseCollection.findOneAndUpdate(this._conditions,this._update,e);for(let o of this._transforms)s=o(s);let i=e.includeResultMetadata?s.value:s;return new Promise((o,u)=>{this._completeOne(i,s,e.projection,(a,c)=>{if(a)return u(a);o(c)})})};V.prototype.findOneAndDelete=function(t,e){if(typeof t=="function"||typeof e=="function"||typeof arguments[2]=="function")throw new dn("Query.prototype.findOneAndDelete() no longer accepts a callback");return this.op="findOneAndDelete",this._validateOp(),this._validate(),ns.canMerge(t)&&this.merge(t),e&&this.setOptions(e),this};V.prototype._findOneAndDelete=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();let e=this.options.includeResultMetadata,r=this._conditions,n=this._optionsForExec(this.model),s=await this.mongooseCollection.findOneAndDelete(r,n);for(let o of this._transforms)s=o(s);let i=e?s.value:s;return new Promise((o,u)=>{this._completeOne(i,s,n.projection,(a,c)=>{if(a)return u(a);o(c)})})};V.prototype.findOneAndReplace=function(t,e,r){if(typeof t=="function"||typeof e=="function"||typeof r=="function"||typeof arguments[4]=="function")throw new dn("Query.prototype.findOneAndReplace() no longer accepts a callback");this.op="findOneAndReplace",this._validateOp(),this._validate(),ns.canMerge(t)?this.merge(t):t!=null&&this.error(new Tu(t,"filter","findOneAndReplace")),e!=null&&this._mergeUpdate(e),r=r||{};let n=this&&this.model&&this.model.base&&this.model.base.options&&this.model.base.options.returnOriginal;return r.new==null&&r.returnDocument==null&&r.returnOriginal==null&&n!=null&&(r.returnOriginal=n),this.setOptions(r),this};V.prototype._findOneAndReplace=async function(){if(this._applyTranslateAliases(),this._castConditions(),this.error()!=null)throw this.error();"strict"in this.options&&(this._mongooseOptions.strict=this.options.strict,delete this.options.strict);let e=this._conditions,r=this._optionsForExec();hq(r);let n=this.options.includeResultMetadata,s={skipId:!0};"strict"in this._mongooseOptions&&(s.strict=this._mongooseOptions.strict);let i=XC(this,"runValidators",!1);try{let a=new this.model(this._update,null,s);if(i)await a.validate();else if(a.$__.validationError)throw a.$__.validationError;this._update=a.toBSON()}catch(a){if(a instanceof iq)throw a;let c=new iq;throw c.errors[a.path]=a,c}let o=await this.mongooseCollection.findOneAndReplace(e,this._update,r);for(let a of this._transforms)o=a(o);let u=n?o.value:o;return new Promise((a,c)=>{this._completeOne(u,o,r.projection,(l,h)=>{if(l)return c(l);a(h)})})};function hq(t){"new"in t&&(t.returnDocument=t.new?"after":"before",delete t.new),"returnOriginal"in t&&(t.returnDocument=t.returnOriginal?"before":"after",delete t.returnOriginal),typeof t.returnDocument=="string"&&(t.returnOriginal=t.returnDocument==="before")}function XC(t,e,r){let n=t._optionsForExec(t.model);return e in n?n[e]:e in t.model.base.options?t.model.base.options[e]:r}function JC(t,e,r,n,s,i){if(s.lean&&typeof s.lean.transform=="function"){s.lean.transform(e);for(let o=0;o<t.childSchemas.length;o++){let u=r?r+"."+t.childSchemas[o].model.path:t.childSchemas[o].model.path,a=t.childSchemas[o].schema,c=aq.get(u,e);if(c!=null){if(Array.isArray(c))for(let l=0;l<c.length;l++)s.lean.transform(c[l]);else s.lean.transform(c);JC(a,c,u,n,s)}}return i?i(null,e):void 0}return s.includeResultMetadata?i(null,n):i(null,e)}function fq(t,e,r,n){if(n.lean&&typeof n.lean.transform=="function"){for(let s of e)n.lean.transform(s);for(let s=0;s<t.childSchemas.length;s++){let i=r?r+"."+t.childSchemas[s].model.path:t.childSchemas[s].model.path,o=t.childSchemas[s].schema,u=aq.get(i,e);if(u!=null){u=u.flat();for(let a=0;a<u.length;a++)n.lean.transform(u[a]);fq(o,u,i,n)}}}return e}V.prototype._mergeUpdate=function(t){if(this._update||(this._update=Array.isArray(t)?[]:{}),!(t==null||typeof t=="object"&&Object.keys(t).length===0))if(t instanceof V){if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");t._update&&gt.mergeClone(this._update,t._update)}else if(Array.isArray(t)){if(!Array.isArray(this._update))throw new Error("Cannot mix array and object updates");this._update=this._update.concat(t)}else{if(Array.isArray(this._update))throw new Error("Cannot mix array and object updates");gt.mergeClone(this._update,t)}};async function ZC(t){if(this._applyTranslateAliases(),this._castConditions(),lq(this),this.error()!=null)throw this.error();let e=this._conditions,r=this._optionsForExec(this.model);this._update=kn(this._update,r);let n=t==="replaceOne";if(n)this._update=new this.model(this._update,null,!0);else{if(this._update=this._castUpdate(this._update),this._update==null||Object.keys(this._update).length===0)return{acknowledged:!1};let i=Object.assign({},r,{setDefaultsOnInsert:this._mongooseOptions.setDefaultsOnInsert});this._update=cq(this._conditions,this.model.schema,this._update,i)}return Array.isArray(r.arrayFilters)&&(r.arrayFilters=Efe(this._update,r.arrayFilters)),XC(this,"runValidators",!1)&&await this.validate(this._update,r,n),this._update.toBSON&&(this._update=this._update.toBSON()),this.mongooseCollection[t](e,this._update,r)}V.prototype.validate=async function(e,r,n){if(typeof arguments[3]=="function")throw new dn("Query.prototype.validate() no longer accepts a callback");await pq(this,"validate"),n?await e.$validate():await new Promise((s,i)=>{Ofe(this,this.model.schema,e,r,o=>{if(o!=null)return i(o);s()})}),await dq(this,null,null,"validate")};V.prototype._updateMany=async function(){return ZC.call(this,"updateMany")};V.prototype._updateOne=async function(){return ZC.call(this,"updateOne")};V.prototype._replaceOne=async function(){return ZC.call(this,"replaceOne")};V.prototype.updateMany=function(t,e,r,n){return typeof r=="function"?(n=r,r=null):typeof e=="function"?(n=e,e=t,t={},r=null):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),e9(this,"updateMany",t,e,r,n)};V.prototype.updateOne=function(t,e,r,n){return typeof r=="function"?(n=r,r=null):typeof e=="function"?(n=e,e=t,t={},r=null):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),e9(this,"updateOne",t,e,r,n)};V.prototype.replaceOne=function(t,e,r,n){return typeof r=="function"?(n=r,r=null):typeof e=="function"?(n=e,e=t,t={},r=null):typeof t=="function"?(n=t,t=void 0,e=void 0,r=void 0):typeof t=="object"&&!e&&!r&&!n&&(e=t,t=void 0,r=void 0,n=void 0),e9(this,"replaceOne",t,e,r,n)};function e9(t,e,r,n,s,i){return t.op=e,t._validateOp(),n=n||{},s!=null&&"strict"in s&&(t._mongooseOptions.strict=s.strict),!(r instanceof V)&&r!=null&&r.toString()!=="[object Object]"?t.error(new Tu(r,"filter",e)):t.merge(r),gt.isObject(s)&&t.setOptions(s),t._mergeUpdate(n),i&&t.exec(i),t}V.prototype.transform=function(t){return this._transforms.push(t),this};V.prototype.orFail=function(t){return this.transform(e=>{switch(this.op){case"find":if(e.length===0)throw Wl(t,this);break;case"findOne":if(e==null)throw Wl(t,this);break;case"replaceOne":case"updateMany":case"updateOne":if(e&&e.matchedCount===0)throw Wl(t,this);break;case"findOneAndDelete":case"findOneAndUpdate":case"findOneAndReplace":if(this.options.includeResultMetadata&&e!=null&&e.value==null)throw Wl(t,this);if(!this.options.includeResultMetadata&&e==null)throw Wl(t,this);break;case"deleteMany":case"deleteOne":if(e.deletedCount===0)throw Wl(t,this);break;default:break}return e}),this};function Wl(t,e){return typeof t=="function"&&(t=t.call(e)),t==null&&(t=new ife(e.getQuery(),e.model.modelName)),t}V.prototype.isPathSelectedInclusive=function(t){return yfe(this._fields,t)};V.prototype.exec=async function(e){if(typeof e=="function"||arguments.length>=2&&typeof arguments[1]=="function")throw new dn("Query.prototype.exec() no longer accepts a callback");if(typeof e=="string"&&(this.op=e),this.op==null)throw new dn("Query must have `op` before executing");if(this.model==null)throw new dn("Query must have an associated model before executing");if(this._validateOp(),!this.op)return;if(this.options&&this.options.sort&&Object.keys(this.options.sort).includes(""))throw new Error('Invalid field "" passed to sort()');let r="_"+this.op;if(this.op==="distinct"&&(r="__distinct"),this._executionStack!=null){let o=this.toString();o.length>60&&(o=o.slice(0,60)+"...");let u=new dn("Query was already executed: "+o);throw u.originalStack=this._executionStack,u}else this._executionStack=new Error().stack;let n=null;try{await Dfe(this)}catch(o){if(o instanceof QC.skipWrappedFunction)n=o;else throw o}let s,i=null;try{await pq(this),s=n?n.args[0]:await this[r]();for(let o of this._transforms)s=o(s)}catch(o){o instanceof QC.skipWrappedFunction?s=o.args[0]:i=o,i=this.model.schema._transformDuplicateKeyError(i)}return s=await dq(this,s,i),await Tfe(this),s};function Tfe(t){return new Promise((e,r)=>{t._hooks.execPost("exec",t,[],{},n=>{if(n)return r(n);e()})})}function dq(t,e,r,n){if(t._queryMiddleware==null){if(r!=null)throw r;return e}return new Promise((s,i)=>{let o=r?{error:r}:{};t._queryMiddleware.execPost(n||t.op,t,[e],o,(u,a)=>{if(u)return i(u);s(a)})})}function Dfe(t){return new Promise((e,r)=>{t._hooks.execPre("exec",t,[],n=>{if(n!=null)return r(n);e()})})}function pq(t,e){if(t._queryMiddleware!=null)return new Promise((r,n)=>{t._queryMiddleware.execPre(e||t.op,t,[],s=>{if(s!=null)return n(s);r()})})}V.prototype.then=function(t,e){return this.exec().then(t,e)};V.prototype.catch=function(t){return this.exec().then(null,t)};V.prototype.finally=function(t){return this.exec().finally(t)};V.prototype[Symbol.toStringTag]=function(){return`Query { ${this.op} }`};V.prototype.pre=function(t){return this._hooks.pre("exec",t),this};V.prototype.post=function(t){return this._hooks.post("exec",t),this};V.prototype._castUpdate=function(e){let r=this.schema,n=r.options.discriminatorKey,s=r._baseSchema?r._baseSchema:r;if(this._mongooseOptions.overwriteDiscriminatorKey&&e[n]!=null&&s.discriminators){let o=Object.values(s.discriminators).find(u=>u.discriminatorMapping.value===e[n]);o!=null&&(r=o)}let i;return"upsert"in this.options&&(i=this.options.upsert),hfe(r,e,{strict:this._mongooseOptions.strict,upsert:i,arrayFilters:this.options.arrayFilters,overwriteDiscriminatorKey:this._mongooseOptions.overwriteDiscriminatorKey,overwriteImmutable:this._mongooseOptions.overwriteImmutable},this,this._conditions)};V.prototype.populate=function(){let t=Array.from(arguments);if(!t.some(Boolean))return this;let e=gt.populate.apply(null,t);if(this.options!=null){let s=this.options.readConcern,i=this.options.readPreference;for(let o of e)s!=null&&(o&&o.options&&o.options.readConcern)==null&&(o.options=o.options||{},o.options.readConcern=s),i!=null&&(o&&o.options&&o.options.readPreference)==null&&(o.options=o.options||{},o.options.readPreference=i)}let r=this._mongooseOptions;if(r.lean!=null){let s=r.lean;for(let i of e)(i&&i.options&&i.options.lean)==null&&(i.options=i.options||{},i.options.lean=s)}gt.isObject(r.populate)||(r.populate={});let n=r.populate;for(let s of e){let i=s.path;n[i]&&n[i].populate&&s.populate&&(s.populate=n[i].populate.concat(s.populate)),n[s.path]=s}return this};V.prototype.getPopulatedPaths=function(){let e=this._mongooseOptions.populate||{},r=Object.keys(e);for(let n of Object.keys(e)){let s=e[n];Array.isArray(s.populate)&&mq(r,s.populate,n+".")}return r};function mq(t,e,r){for(let n of e)t.push(r+n.path),Array.isArray(n.populate)&&mq(t,n.populate,r+n.path+".")}V.prototype.cast=function(t,e){e||(e=this._conditions),t=t||this.model;let r=t.schema.options.discriminatorKey;e!=null&&e.hasOwnProperty(r)&&(t=ffe(t.discriminators,e[r])||t);let n={upsert:this.options&&this.options.upsert};this.options&&("strict"in this.options&&(n.strict=this.options.strict),"strictQuery"in this.options&&(n.strictQuery=this.options.strictQuery)),"sanitizeFilter"in this._mongooseOptions&&(n.sanitizeFilter=this._mongooseOptions.sanitizeFilter);try{return cfe(t.schema,e,n,this)}catch(s){throw typeof s.setModel=="function"&&s.setModel(t),s}};V.prototype._castFields=function(e){let r,n,s,i,o;if(e){s=Object.keys(e),n=[];for(let u=0;u<s.length;++u)i=s[u],e[i].$elemMatch&&(r||(r={}),r[i]=e[i],n.push(i))}if(r){try{o=this.cast(this.model,r)}catch(u){return u}for(let u=0;u<n.length;++u)i=n[u],e[i]=o[i]}return e};V.prototype._applyPaths=function(){if(!this.model)return;this._fields=this._fields||{};let e;this.model!=null&&gt.hasUserDefinedProperty(this.model.db.options,"sanitizeProjection")?e=this.model.db.options.sanitizeProjection:this.model!=null&&gt.hasUserDefinedProperty(this.model.base.options,"sanitizeProjection")?e=this.model.base.options.sanitizeProjection:e=this._mongooseOptions.sanitizeProjection,(this._mongooseOptions.schemaLevelProjections??!0)&&ff.applyPaths(this._fields,this.model.schema,e);let n=!0;"selectPopulatedPaths"in this.model.base.options&&(n=this.model.base.options.selectPopulatedPaths),"selectPopulatedPaths"in this.model.schema.options&&(n=this.model.schema.options.selectPopulatedPaths),n&&Sfe(this._fields,this._userProvidedFields,this._mongooseOptions.populate)};V.prototype.cursor=function(e){e&&this.setOptions(e);try{this.cast(this.model)}catch(r){return new sq(this)._markError(r)}return new sq(this)};V.prototype.tailable=function(t,e){if(t!=null&&typeof t.constructor=="function"&&t.constructor.name==="Object"&&(e=t,t=!0),t===void 0&&(t=!0),e&&typeof e=="object")for(let r of Object.keys(e))r==="awaitData"||r==="awaitdata"?this.options.awaitData=!!e[r]:this.options[r]=e[r];return this.options.tailable=arguments.length?!!t:!0,this};V.prototype.near=function(){let t=[],e=this._mongooseOptions.nearSphere;if(arguments.length===1)if(Array.isArray(arguments[0]))t.push({center:arguments[0],spherical:e});else if(typeof arguments[0]=="string")t.push(arguments[0]);else if(gt.isObject(arguments[0]))typeof arguments[0].spherical!="boolean"&&(arguments[0].spherical=e),t.push(arguments[0]);else throw new TypeError("invalid argument");else if(arguments.length===2)if(typeof arguments[0]=="number"&&typeof arguments[1]=="number")t.push({center:[arguments[0],arguments[1]],spherical:e});else if(typeof arguments[0]=="string"&&Array.isArray(arguments[1]))t.push(arguments[0]),t.push({center:arguments[1],spherical:e});else if(typeof arguments[0]=="string"&&gt.isObject(arguments[1]))t.push(arguments[0]),typeof arguments[1].spherical!="boolean"&&(arguments[1].spherical=e),t.push(arguments[1]);else throw new TypeError("invalid argument");else if(arguments.length===3)if(typeof arguments[0]=="string"&&typeof arguments[1]=="number"&&typeof arguments[2]=="number")t.push(arguments[0]),t.push({center:[arguments[1],arguments[2]],spherical:e});else throw new TypeError("invalid argument");else throw new TypeError("invalid argument");return V.base.near.apply(this,t)};V.prototype.nearSphere=function(){return this._mongooseOptions.nearSphere=!0,this.near.apply(this,arguments),this};Symbol.asyncIterator!=null&&(V.prototype[Symbol.asyncIterator]=function(){return this.cursor().transformNull()._transformForAsyncIterator()});V.prototype.box=function(t,e){return!Array.isArray(t)&&gt.isObject(t)&&(e=t.ur,t=t.ll),V.base.box.call(this,t,e)};V.prototype.center=V.base.circle;V.prototype.centerSphere=function(){arguments[0]!=null&&typeof arguments[0].constructor=="function"&&arguments[0].constructor.name==="Object"&&(arguments[0].spherical=!0),arguments[1]!=null&&typeof arguments[1].constructor=="function"&&arguments[1].constructor.name==="Object"&&(arguments[1].spherical=!0),V.base.circle.apply(this,arguments)};V.prototype.selectedInclusively=function(){return mfe(this._fields)};V.prototype.selectedExclusively=function(){return pfe(this._fields)};V.prototype.model;yq.exports=V});var Aq=g((a9e,_q)=>{"use strict";d();var Z2=Ie(),Eq=require("stream").Readable,Mfe=DC(),Bfe=os(),Ife=require("util");function qn(t){Eq.call(this,{autoDestroy:!0,objectMode:!0}),this.cursor=null,this.agg=t,this._transforms=[];let e=t._model;delete t.options.cursor.useMongooseAggCursor,this._mongooseOptions={},Pfe(e,this,t)}Ife.inherits(qn,Eq);function Pfe(t,e,r){t.collection.buffer?t.collection.emitter.once("queue",function(){t.hooks.execPre("aggregate",r,function(){typeof r.options?.cursor?.transform=="function"&&e._transforms.push(r.options.cursor.transform),e.cursor=t.collection.aggregate(r._pipeline,r.options||{}),e.emit("cursor",e.cursor)})}):t.hooks.execPre("aggregate",r,function(){typeof r.options?.cursor?.transform=="function"&&e._transforms.push(r.options.cursor.transform),e.cursor=t.collection.aggregate(r._pipeline,r.options||{}),e.emit("cursor",e.cursor)})}qn.prototype._read=function(){let t=this;eg(this,function(e,r){if(e)return t.emit("error",e);if(!r){t.push(null),t.cursor.close(function(n){if(n)return t.emit("error",n)});return}t.push(r)})};if(Symbol.asyncIterator!=null){let t="Mongoose does not support using async iterators with an existing aggregation cursor. See https://bit.ly/mongoose-async-iterate-aggregation";qn.prototype[Symbol.asyncIterator]=function(){throw new Z2(t)}}Object.defineProperty(qn.prototype,"map",{value:function(t){return this._transforms.push(t),this},enumerable:!0,configurable:!0,writable:!0});qn.prototype._markError=function(t){return this._error=t,this};qn.prototype.close=async function(){if(typeof arguments[0]=="function")throw new Z2("AggregationCursor.prototype.close() no longer accepts a callback");try{await this.cursor.close()}catch(e){throw this.listeners("error").length>0&&this.emit("error",e),e}this.emit("close")};qn.prototype._destroy=function(e,r){let n=null;return this.cursor?n=Promise.resolve():n=new Promise(s=>{this.once("cursor",s)}),n.then(()=>this.cursor.close()).then(()=>{this._closed=!0,r()}).catch(s=>{r(s)}),this};qn.prototype.next=async function(){if(typeof arguments[0]=="function")throw new Z2("AggregationCursor.prototype.next() no longer accepts a callback");return new Promise((e,r)=>{eg(this,(n,s)=>{if(n!=null)return r(n);e(s)})})};qn.prototype.eachAsync=function(t,e){if(typeof arguments[2]=="function")throw new Z2("AggregationCursor.prototype.eachAsync() no longer accepts a callback");let r=this;return typeof e=="function"&&(e={}),e=e||{},Mfe(function(n){return eg(r,n)},t,e)};Symbol.asyncIterator!=null&&(qn.prototype[Symbol.asyncIterator]=function(){return this.transformNull()._transformForAsyncIterator()});qn.prototype._transformForAsyncIterator=function(){return this._transforms.indexOf(gq)===-1&&this.map(gq),this};qn.prototype.transformNull=function(t){return arguments.length===0&&(t=!0),this._mongooseOptions.transformNull=t,this};function gq(t){return t==null?{done:!0}:{value:t,done:!1}}qn.prototype.addCursorFlag=function(t,e){let r=this;return Nfe(this,function(){r.cursor.addCursorFlag(t,e)}),this};function Nfe(t,e){if(t.cursor)return e();t.once("cursor",function(){e()})}function eg(t,e){let r=e;if(t._transforms.length&&(r=function(n,s){if(n||s===null&&!t._mongooseOptions.transformNull)return e(n,s);e(n,t._transforms.reduce(function(i,o){return o(i)},s))}),t._error)return Bfe(function(){r(t._error)});if(t.cursor)return t.cursor.next().then(n=>{if(!n)return r(null,null);r(null,n)},n=>r(n));t.once("cursor",function(){eg(t,e)})}_q.exports=qn});var t9=g((l9e,Sq)=>{"use strict";d();Sq.exports=function(e,r,n){let s=r&&r.discriminatorMapping;if(n=n||"",s&&!s.isRoot){let i=e,o=(n.length>0?n+".":n)+s.key,u=s.value;if(i[0]!=null&&i[0].$match&&(i[0].$match[o]===void 0||i[0].$match[o]===u))i[0].$match[o]=u;else if(i[0]!=null&&i[0].$geoNear)i[0].$geoNear.query=i[0].$geoNear.query||{},i[0].$geoNear.query[o]=u;else if(i[0]!=null&&i[0].$search)if(i[1]&&i[1].$match!=null)i[1].$match[o]=i[1].$match[o]||u;else{let a={};a[o]=u,i.splice(1,0,{$match:a})}else{let a={};a[o]=u,i.unshift({$match:a})}}}});var wq=g((f9e,Oq)=>{"use strict";d();Oq.exports=function t(e){if(Array.isArray(e))for(let r of e){if(r==null)continue;let n=r.$group||r.$bucket||r.$bucketAuto;if(n!=null)for(let i of Object.keys(n))Ffe(n[i]);let s=Object.keys(r)[0];if(s&&typeof r[s]=="object"){let i=r[s];for(let o of Object.keys(i))i[o]!=null&&i[o].$function!=null&&typeof i[o].$function.body=="function"&&(i[o].$function.body=i[o].$function.body.toString())}if(r.$facet!=null)for(let i of Object.keys(r.$facet))t(r.$facet[i])}};function Ffe(t){if(!(t==null||t.$accumulator==null))for(let e of["init","accumulate","merge","finalize"])typeof t.$accumulator[e]=="function"&&(t.$accumulator[e]=String(t.$accumulator[e]))}});var s9=g((p9e,Mq)=>{"use strict";d();var Tq=Aq(),r9=Ie(),Dq=X2(),{applyGlobalMaxTimeMS:Rfe,applyGlobalDiskUse:vfe}=IC(),$fe=Bt(),xfe=ln(),n9=t9(),kfe=wq(),Cq=Ae(),qfe=Dq.prototype.read,Lfe=Dq.prototype.readConcern,bq=new Set(["$$DESCEND","$$PRUNE","$$KEEP"]);function ve(t,e){this._pipeline=[],this._model=e,this.options={},arguments.length===1&&Array.isArray(t)&&this.append.apply(this,t)}ve.prototype.options;ve.prototype._optionsForExec=function(){let t=this.options||{},e=this.model()?.db?.base.transactionAsyncLocalStorage?.getStore();return!t.hasOwnProperty("session")&&e?.session!=null&&(t.session=e.session),t};ve.prototype.model=function(t){return arguments.length===0?this._model:(this._model=t,t.schema!=null&&(this.options.readPreference==null&&t.schema.options.read!=null&&(this.options.readPreference=t.schema.options.read),this.options.collation==null&&t.schema.options.collation!=null&&(this.options.collation=t.schema.options.collation)),t)};ve.prototype.append=function(){let t=arguments.length===1&&Array.isArray(arguments[0])?arguments[0]:[...arguments];if(!t.every(jfe))throw new Error("Arguments must be aggregate pipeline operators");return this._pipeline=this._pipeline.concat(t),this};ve.prototype.addFields=function(t){if(typeof t!="object"||t===null||Array.isArray(t))throw new Error("Invalid addFields() argument. Must be an object");return this.append({$addFields:Object.assign({},t)})};ve.prototype.project=function(t){let e={};if(typeof t=="object"&&!Array.isArray(t))Object.keys(t).forEach(function(r){e[r]=t[r]});else if(arguments.length===1&&typeof t=="string")t.split(/\s+/).forEach(function(r){if(!r)return;let n=r[0]==="-"?0:1;n===0&&(r=r.substring(1)),e[r]=n});else throw new Error("Invalid project() argument. Must be string or object");return this.append({$project:e})};ve.prototype.near=function(t){let e={};return e.$geoNear=t,this.append(e)};"group match skip limit out densify fill".split(" ").forEach(function(t){ve.prototype[t]=function(e){let r={};return r["$"+t]=e,this.append(r)}});ve.prototype.unwind=function(){let t=[...arguments],e=[];for(let r of t)if(r&&typeof r=="object")e.push({$unwind:r});else if(typeof r=="string")e.push({$unwind:r[0]==="$"?r:"$"+r});else throw new Error('Invalid arg "'+r+'" to unwind(), must be string or object');return this.append.apply(this,e)};ve.prototype.replaceRoot=function(t){let e;return typeof t=="string"?e=t.startsWith("$")?t:"$"+t:e=t,this.append({$replaceRoot:{newRoot:e}})};ve.prototype.count=function(t){return this.append({$count:t})};ve.prototype.sortByCount=function(t){if(t&&typeof t=="object")return this.append({$sortByCount:t});if(typeof t=="string")return this.append({$sortByCount:t[0]==="$"?t:"$"+t});throw new TypeError('Invalid arg "'+t+'" to sortByCount(), must be string or object')};ve.prototype.lookup=function(t){return this.append({$lookup:t})};ve.prototype.graphLookup=function(t){let e={};if(t){if(!Cq.isObject(t))throw new TypeError("Invalid graphLookup() argument. Must be an object.");Cq.mergeClone(e,t);let r=e.startWith;r&&typeof r=="string"&&(e.startWith=e.startWith.startsWith("$")?e.startWith:"$"+e.startWith)}return this.append({$graphLookup:e})};ve.prototype.sample=function(t){return this.append({$sample:{size:t}})};ve.prototype.sort=function(t){let e={};if(xfe(t)==="Object"){let r=["desc","descending",-1];Object.keys(t).forEach(function(n){if(t[n]instanceof Object&&t[n].$meta){e[n]=t[n];return}e[n]=r.indexOf(t[n])===-1?1:-1})}else if(arguments.length===1&&typeof t=="string")t.split(/\s+/).forEach(function(r){if(!r)return;let n=r[0]==="-"?-1:1;n===-1&&(r=r.substring(1)),e[r]=n});else throw new TypeError("Invalid sort() argument. Must be a string or object.");return this.append({$sort:e})};ve.prototype.unionWith=function(t){return this.append({$unionWith:t})};ve.prototype.read=function(t,e){return qfe.call(this,t,e),this};ve.prototype.readConcern=function(t){return Lfe.call(this,t),this};ve.prototype.redact=function(t,e,r){if(arguments.length===3){if(typeof e=="string"&&!bq.has(e)||typeof r=="string"&&!bq.has(r))throw new Error("If thenExpr or elseExpr is string, it must be either $$DESCEND, $$PRUNE or $$KEEP");t={$cond:{if:t,then:e,else:r}}}else if(arguments.length!==1)throw new TypeError("Invalid arguments");return this.append({$redact:t})};ve.prototype.explain=async function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new r9("Aggregate.prototype.explain() no longer accepts a callback");let r=this._model;if(!this._pipeline.length)throw new Error("Aggregate has empty pipeline");n9(this._pipeline,this._model.schema),await new Promise((o,u)=>{r.hooks.execPre("aggregate",this,a=>{if(a){let c={error:a};return r.hooks.execPost("aggregate",this,[null],c,l=>{u(l)})}else o()})});let n=r.collection.aggregate(this._pipeline,this.options);e==null&&(e=!0);let s=null;try{s=await n.explain(e)}catch(o){await new Promise((u,a)=>{let c={error:o};r.hooks.execPost("aggregate",this,[null],c,l=>l?a(l):u())})}let i={error:null};return await new Promise((o,u)=>{r.hooks.execPost("aggregate",this,[s],i,a=>a?u(a):o())}),s};ve.prototype.allowDiskUse=function(t){return this.options.allowDiskUse=t,this};ve.prototype.hint=function(t){return this.options.hint=t,this};ve.prototype.session=function(t){return t==null?delete this.options.session:this.options.session=t,this};ve.prototype.option=function(t){for(let e in t)this.options[e]=t[e];return this};ve.prototype.cursor=function(t){return this._optionsForExec(),this.options.cursor=t||{},new Tq(this)};ve.prototype.collation=function(t){return this.options.collation=t,this};ve.prototype.facet=function(t){return this.append({$facet:t})};ve.prototype.search=function(t){return this.append({$search:t})};ve.prototype.pipeline=function(){return this._pipeline};ve.prototype.exec=async function(){if(!this._model)throw new Error("Aggregate not bound to any Model");if(typeof arguments[0]=="function")throw new r9("Aggregate.prototype.exec() no longer accepts a callback");let e=this._model,r=this._model.collection;if(Rfe(this.options,e.db.options,e.base.options),vfe(this.options,e.db.options,e.base.options),this._optionsForExec(),this.options&&this.options.cursor)return new Tq(this);if(n9(this._pipeline,this._model.schema),kfe(this._pipeline),await new Promise((o,u)=>{e.hooks.execPre("aggregate",this,a=>{if(a){let c={error:a};return e.hooks.execPost("aggregate",this,[null],c,l=>{u(l)})}else o()})}),!this._pipeline.length)throw new r9("Aggregate has empty pipeline");let n=$fe(this.options||{}),s;try{s=await(await r.aggregate(this._pipeline,n)).toArray()}catch(o){await new Promise((u,a)=>{let c={error:o};e.hooks.execPost("aggregate",this,[null],c,l=>{if(l)return a(l);u()})})}let i={error:null};return await new Promise((o,u)=>{e.hooks.execPost("aggregate",this,[s],i,a=>a?u(a):o())}),s};ve.prototype.then=function(t,e){return this.exec().then(t,e)};ve.prototype.catch=function(t){return this.exec().then(null,t)};ve.prototype.finally=function(t){return this.exec().finally(t)};Symbol.asyncIterator!=null&&(ve.prototype[Symbol.asyncIterator]=function(){return this.cursor({useMongooseAggCursor:!0}).transformNull()._transformForAsyncIterator()});function jfe(t){if(typeof t!="object"||t===null)return!1;let e=Object.keys(t);return e.length===1&&e[0][0]==="$"}ve._prepareDiscriminatorPipeline=n9;Mq.exports=ve});var Iq=g((y9e,Bq)=>{"use strict";d();var Ufe=Bt(),tg=class{constructor(e){e!=null&&Object.assign(this,Ufe(e))}};tg.prototype.__subdocs=null;Bq.exports=tg});var Nq=g((E9e,Pq)=>{"use strict";d();Pq.exports=function t(e,r){let n=Object.keys(r.paths),s=n.length;for(let i=0;i<s;++i){let o="",u=n[i],a=r.paths[u],c=a.splitPath(),l=c.length,h=e;for(let f=0;f<l&&h!=null;++f){let p=c[f];if(o+=(o.length?".":"")+p,f===l-1){if(typeof h[p]<"u"){a.$isSingleNested?t(h[p],a.caster.schema):a.$isMongooseDocumentArray&&Array.isArray(h[p])&&h[p].forEach(y=>t(y,a.schema));break}let m=a.getDefault(e,!1,{skipCast:!0});typeof m<"u"&&(h[p]=m,a.$isSingleNested?t(m,a.caster.schema):a.$isMongooseDocumentArray&&Array.isArray(m)&&m.forEach(y=>t(y,a.schema)))}else h[p]==null&&(h[p]={}),h=h[p]}}}});var o9=g((A9e,Fq)=>{"use strict";d();Fq.exports=i9;function i9(t,e=new WeakSet,r=!1){if(!e.has(t)){e.add(t);for(let n of Object.keys(t.paths)){let s=t.paths[n];if(s.schema&&(i9(s.schema,e),!!s.schema._applyDiscriminators&&!(s._appliedDiscriminators&&!r))){for(let i of s.schema._applyDiscriminators.keys()){let{schema:o,options:u}=s.schema._applyDiscriminators.get(i);i9(o,e),s.discriminator(i,o,r?{...u,overwriteExisting:!0}:u)}s._appliedDiscriminators=!0}}}}});var vq=g((O9e,Rq)=>{"use strict";d();var Vfe=kt(),zfe=Ae();Rq.exports=function t(e,r){let n=u9();function s(i,o){Object.defineProperty(e.prototype,i,{get:function(){let u={};for(let a in o.methods[i])u[a]=o.methods[i][a].bind(this);return u},configurable:!0})}for(let i of Object.keys(r.methods)){let o=r.methods[i];if(r.tree.hasOwnProperty(i))throw new Error('You have a method and a property in your schema both named "'+i+'"');if(typeof o=="function"&&n.prototype[i]===o){delete r.methods[i];continue}r.reserved[i]&&!Vfe(r,`methodOptions.${i}.suppressWarning`,!1)&&zfe.warn(`mongoose: the method name "${i}" is used by mongoose internally, overwriting it may cause bugs. If you're sure you know what you're doing, you can suppress this error by using \`schema.method('${i}', fn, { suppressWarning: true })\`.`),typeof o=="function"?e.prototype[i]=o:s(i,r)}e.$appliedMethods=!0;for(let i of Object.keys(r.paths)){let o=r.paths[i];o.$isSingleNested&&!o.caster.$appliedMethods&&t(o.caster,o.schema),o.$isMongooseDocumentArray&&!o.Constructor.$appliedMethods&&t(o.Constructor,o.schema)}}});var kq=g((C9e,xq)=>{"use strict";d();var $q=cO(),Wfe=Cl(),Hfe=z2(),sg=Ae().isPOJO;xq.exports=function(e,r,n){if(r==null||e==null)return e;let s=null;return Hfe(r)?s=!1:Wfe(r)&&(s=!0),s==null?e:s?(n=n||$q(r),rg(e,r,n)):(n=n||$q(r),ng(e,r,n))};function rg(t,e,r,n,s){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(o=>rg(o,e,r,n,s));let i={...t};n=s?n||{}:e;for(let o of Object.keys(i)){let u=s?s+"."+o:o;e.hasOwnProperty(u)||n.hasOwnProperty(o)?sg(e[u])||sg(n[o])?i[o]=rg(i[o],e,r,n[o],u):delete i[o]:r[u]&&(i[o]=rg(i[o],e,r,n[o],u))}return i}function ng(t,e,r,n,s){if(t==null||typeof t!="object")return t;if(Array.isArray(t))return t.map(o=>ng(o,e,r,n,s));let i={...t};n=s?n||{}:e;for(let o of Object.keys(i)){let u=s?s+"."+o:o;if(e.hasOwnProperty(u)||n.hasOwnProperty(o)){(sg(e[u])||sg(n[o]))&&(i[o]=ng(i[o],e,r,n[o],u));continue}else r[u]?i[o]=ng(i[o],e,r,n[o],u):delete i[o]}return i}});var Lq=g((T9e,qq)=>{"use strict";d();qq.exports=function(e){let r=!1;for(let n of Object.keys(e))e[n]==="text"&&(r=!0);return r}});var Uq=g((M9e,jq)=>{"use strict";d();var Gfe=Lq();jq.exports=function(e,r,n){Gfe(e)||n.hasOwnProperty("collation")&&!r.hasOwnProperty("collation")&&(r.collation=n.collation)}});var zq=g((I9e,Vq)=>{"use strict";d();var Kfe=py(),{queryMiddlewareFunctions:Yfe,aggregateMiddlewareFunctions:Qfe,modelMiddlewareFunctions:Jfe,documentMiddlewareFunctions:Xfe}=Gy(),Zfe=Array.from(new Set([...Yfe,...Qfe,...Jfe,...Xfe]));Vq.exports=function(e,r,n){let s={useErrorHandlers:!0,numCallbackParams:1};e.$__insertMany=r.createWrapper("insertMany",e.$__insertMany,e,s),r=r.filter(i=>Zfe.indexOf(i.name)!==-1?!!i.model:i.model!==!1);for(let i of Object.keys(n))if(r.hasHooks(i)){let o=e[i];e[i]=function(){let u=arguments.length,a=u>0?arguments[u-1]:null,c=typeof a=="function"?a:null,l=Array.prototype.slice.call(arguments,0,c==null?u:u-1);return Kfe(c,h=>{r.execPre(i,e,l,function(f){if(f!=null)return h(f);let p=0,m=o.apply(e,l.concat(y));m!=null&&typeof m.then=="function"&&m.then(A=>y(null,A),A=>y(A));function y(A,S){if(!(p++>0)){if(A!=null)return h(A);r.execPost(i,e,[S],function(O){if(O!=null)return h(O);h(null,S)})}}})},e.events)}}}});var Hq=g((N9e,Wq)=>{"use strict";d();Wq.exports=function(e,r){for(let n in r.statics)e[n]=r.statics[n]}});var Jq=g((R9e,Qq)=>{"use strict";d();var Gq=Hy(),ede=Zn();Qq.exports=Kq;function Kq(t,e,r){return e==null?e:(tde(t,e,r),Yq(t,e,r))}function tde(t,e,r){for(let n of t.childSchemas){let s=n.model.path,i=n.schema;if(!s)continue;let o=ede.get(s,e);o==null||Array.isArray(o)&&o.flat(1/0).length===0||Kq(i,o,r)}}function Yq(t,e,r){if(e==null||typeof e!="object")return;if(Array.isArray(e)){for(let u of e)Yq(t,u,r);return}if(t.discriminators&&Object.keys(t.discriminators).length>0)for(let u of Object.keys(t.discriminators)){let a=t.discriminators[u],c=a.discriminatorMapping.key,l=a.discriminatorMapping.value;if(e[c]==l){t=a;break}}let n=Gq(t.options.timestamps,"createdAt"),s=Gq(t.options.timestamps,"updatedAt"),i=r?.currentTime,o=null;i!=null?o=i():t.base?.now?o=t.base.now():o=new Date,n&&e[n]==null&&!r?.isUpdate&&(e[n]=o),s&&(e[s]=o)}});var eL=g(($9e,Zq)=>{"use strict";d();var rde=Zn();Zq.exports=Xq;function Xq(t,e,r){if(e==null)return e;let n=r,s=null;if(Array.isArray(r)){n=[],s=[];for(let i of r)i.length===1?s.push(i[0]):n.push(i)}return nde(t,e,n),a9(t,e,s)}function nde(t,e,r){let n=!1;for(let s of t.childSchemas){let i=s.model.path,o=s.schema;if(!i)continue;let u=rde.get(i,e);if(u==null||Array.isArray(u)&&u.flat(1/0).length===0)continue;let a=null;if(Array.isArray(r)){a=[];for(let c of r)c[0]==i&&a.push(c.slice(1));if(a.length===0)continue}Xq(o,u,a),n=!0}r&&r.length&&!n&&a9(t,e,r)}function a9(t,e,r){if(!(e==null||typeof e!="object")){if(Array.isArray(e)){for(let n of e)a9(t,n,r);return}if(t.discriminators&&Object.keys(t.discriminators).length>0)for(let n of Object.keys(t.discriminators)){let s=t.discriminators[n],i=s.discriminatorMapping.key,o=s.discriminatorMapping.value;if(e[i]==o){t=s;break}}r==null&&(r=Object.keys(t.virtuals));for(let n of r){if(t.virtuals[n]==null)continue;let s=t.virtuals[n],i=Array.isArray(n)?n:n.indexOf(".")===-1?[n]:n.split("."),o=e;for(let c=0;c<i.length-1;++c)o[i[c]]=i[c]in o?o[i[c]]:{},o=o[i[c]];let u=s.applyGetters(o[i[i.length-1]],e);s.options&&(s.options.ref||s.options.refPath)&&u===void 0&&(s.options.justOne?u=null:u=[]),o[i[i.length-1]]=u}}}});var ig=g((k9e,tL)=>{"use strict";d();tL.exports=function t(e){return this instanceof t?(this.val=e,this):new t(e)}});var pf=g((L9e,rL)=>{"use strict";d();rL.exports=new WeakMap});var oL=g((U9e,iL)=>{"use strict";d();var sde=Bt(),nL=pf(),ide=fe().modelSymbol,ode=Ae();iL.exports=sL;var og=Symbol("mongoose#assignRawDocsToIdStructure#hasArray");function sL(t,e,r,n,s){let i=[],o=n.isVirtual&&n.justOne&&t.length>1?!1:n.sort&&t.length>1,u=n.$nullIfNotFound,a,c,l;ode.isMongooseArray(t)&&(t=t.__array);let h=0,f=t.length;if(o&&s&&n[og]===void 0){n[og]=!1;for(let p in r)if(Array.isArray(r[p])){n[og]=!0;break}}for(h=0;h<f;++h){if(l=t[h],Array.isArray(l)){sL(l,e,r,n,!0),i.push(l);continue}if(l===null&&o===!1){i.push(l);continue}if(c=String(l),a=e[c],n.clone&&a!=null)if(n.lean){let p=nL.get(a);a=sde(a),nL.set(a,p)}else a=a.constructor.hydrate(a._doc);if(s)if(a)if(o){let p=r[c];n[og]?i.push(a):i[p]=a}else i.push(a);else l!=null&&l[ide]!=null?i.push(l):i.push(n.retainNullValues||u?null:l);else i[h]=a||null}t.length=0,i.length&&i.forEach(function(p,m){t[m]=p})}});var l9=g((z9e,uL)=>{"use strict";d();uL.exports=c9;function c9(t,e){if(t.virtuals[e])return{virtual:t.virtuals[e],path:void 0};let r=e.split("."),n="",s="";for(let i=0;i<r.length;++i){if(n+=(n.length>0?".":"")+r[i],t.virtuals[n]){if(i===r.length-1)return{virtual:t.virtuals[n],path:s};continue}if(!t.nested[n]){if(t.paths[n]&&t.paths[n].schema){t=t.paths[n].schema;let o=r.slice(i+1).join(".");if(t.virtuals[o]){if(i===r.length-2)return{virtual:t.virtuals[o],nestedSchemaPath:[s,n].filter(u=>!!u).join(".")};continue}if(i+1<r.length&&t.discriminators)for(let u of Object.keys(t.discriminators)){let a=c9(t.discriminators[u],o);if(a!=null){let c=[s,n,a.nestedSchemaPath].filter(l=>!!l).join(".");return{virtual:a.virtual,nestedSchemaPath:c}}}s+=(s.length>0?".":"")+n,n="";continue}if(t.discriminators)for(let o of Object.keys(t.discriminators)){let u=c9(t.discriminators[o],e);if(u)return u}return null}}}});var cL=g((ug,aL)=>{d();(function(t,e){typeof ug=="object"&&typeof aL<"u"?e(ug):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e(t.sift={}))})(ug,function(t){"use strict";var e=function(T,M){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,k){I.__proto__=k}||function(I,k){for(var ee in k)Object.prototype.hasOwnProperty.call(k,ee)&&(I[ee]=k[ee])},e(T,M)};function r(T,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");e(T,M);function I(){this.constructor=T}T.prototype=M===null?Object.create(M):(I.prototype=M.prototype,new I)}typeof SuppressedError=="function"&&SuppressedError;var n=function(T){var M="[object "+T+"]";return function(I){return s(I)===M}},s=function(T){return Object.prototype.toString.call(T)},i=function(T){return T instanceof Date?T.getTime():u(T)?T.map(i):T&&typeof T.toJSON=="function"?T.toJSON():T},o=function(T){return T??null},u=n("Array"),a=n("Object"),c=n("Function"),l=function(T,M){return T.hasOwnProperty(M)&&!c(T[M])},h=function(T){return T&&(T.constructor===Object||T.constructor===Array||T.constructor.toString()==="function Object() { [native code] }"||T.constructor.toString()==="function Array() { [native code] }")&&!T.toJSON},f=function(T,M){if(T==null&&T==M||T===M)return!0;if(Object.prototype.toString.call(T)!==Object.prototype.toString.call(M))return!1;if(u(T)){if(T.length!==M.length)return!1;for(var I=0,k=T.length;I<k;I++)if(!f(T[I],M[I]))return!1;return!0}else if(a(T)){if(Object.keys(T).length!==Object.keys(M).length)return!1;for(var ee in T)if(!f(T[ee],M[ee]))return!1;return!0}return!1},p=function(T,M,I,k,ee,he){var _e=M[k];if(u(T)&&isNaN(Number(_e))&&!l(T,_e)){for(var Re=0,or=T.length;Re<or;Re++)if(!p(T[Re],M,I,k,Re,T))return!1}return k===M.length||T==null?I(T,ee,he,k===0,k===M.length):p(T[_e],M,I,k+1,_e,T)},m=function(){function T(M,I,k,ee){this.params=M,this.owneryQuery=I,this.options=k,this.name=ee,this.init()}return T.prototype.init=function(){},T.prototype.reset=function(){this.done=!1,this.keep=!1},T}(),y=function(T){r(M,T);function M(I,k,ee,he){var _e=T.call(this,I,k,ee)||this;return _e.children=he,_e}return M.prototype.reset=function(){this.keep=!1,this.done=!1;for(var I=0,k=this.children.length;I<k;I++)this.children[I].reset()},M.prototype.childrenNext=function(I,k,ee,he,_e){for(var Re=!0,or=!0,Xr=0,ss=this.children.length;Xr<ss;Xr++){var ji=this.children[Xr];if(ji.done||ji.next(I,k,ee,he,_e),ji.keep||(or=!1),ji.done){if(!ji.keep)break}else Re=!1}this.done=Re,this.keep=or},M}(m),A=function(T){r(M,T);function M(I,k,ee,he,_e){var Re=T.call(this,I,k,ee,he)||this;return Re.name=_e,Re}return M}(y),S=function(T){r(M,T);function M(){var I=T!==null&&T.apply(this,arguments)||this;return I.propop=!0,I}return M.prototype.next=function(I,k,ee,he){this.childrenNext(I,k,ee,he)},M}(y),O=function(T){r(M,T);function M(I,k,ee,he,_e){var Re=T.call(this,k,ee,he,_e)||this;return Re.keyPath=I,Re.propop=!0,Re._nextNestedValue=function(or,Xr,ss,ji,bg){return Re.childrenNext(or,Xr,ss,ji,bg),!Re.done},Re}return M.prototype.next=function(I,k,ee){p(I,this.keyPath,this._nextNestedValue,0,k,ee)},M}(y),D=function(T,M){if(T instanceof Function)return T;if(T instanceof RegExp)return function(k){var ee=typeof k=="string"&&T.test(k);return T.lastIndex=0,ee};var I=i(T);return function(k){return M(I,i(k))}},b=function(T){r(M,T);function M(){var I=T!==null&&T.apply(this,arguments)||this;return I.propop=!0,I}return M.prototype.init=function(){this._test=D(this.params,this.options.compare)},M.prototype.next=function(I,k,ee){(!Array.isArray(ee)||ee.hasOwnProperty(k))&&this._test(I,k,ee)&&(this.done=!0,this.keep=!0)},M}(m),N=function(T,M,I){return new b(T,M,I)},R=function(T){return function(M,I,k,ee){return T(M,I,k,ee)}},F=function(T){return R(function(M,I,k,ee){var he=typeof i(M),_e=T(M);return new b(function(Re){var or=o(Re);return typeof i(or)===he&&_e(or)},I,k,ee)})},G=function(T,M,I,k){var ee=k.operations[T];return ee||z(T),ee(M,I,k,T)},z=function(T){throw new Error("Unsupported operation: ".concat(T))},j=function(T,M){for(var I in T)if(M.operations.hasOwnProperty(I)||I.charAt(0)==="$")return!0;return!1},v=function(T,M,I,k,ee){if(j(M,ee)){var he=W(M,I,ee),_e=he[0],Re=he[1];if(Re.length)throw new Error("Property queries must contain only operations, or exact objects.");return new O(T,M,k,ee,_e)}return new O(T,M,k,ee,[new b(M,k,ee)])},x=function(T,M,I){M===void 0&&(M=null);var k=I===void 0?{}:I,ee=k.compare,he=k.operations,_e={compare:ee||f,operations:Object.assign({},he||{})},Re=W(T,null,_e),or=Re[0],Xr=Re[1],ss=[];return or.length&&ss.push(new O([],T,M,_e,or)),ss.push.apply(ss,Xr),ss.length===1?ss[0]:new S(T,M,_e,ss)},W=function(T,M,I){var k=[],ee=[];if(!h(T))return k.push(new b(T,T,I)),[k,ee];for(var he in T)if(I.operations.hasOwnProperty(he)){var _e=G(he,T[he],T,I);if(_e&&!_e.propop&&M&&!I.operations[M])throw new Error("Malformed query. ".concat(he," cannot be matched against property."));_e!=null&&k.push(_e)}else he.charAt(0)==="$"?z(he):ee.push(v(he.split("."),T[he],he,T,I));return[k,ee]},te=function(T){return function(M,I,k){return T.reset(),T.next(M,I,k),T.keep}},qe=function(T,M){return M===void 0&&(M={}),te(x(T,null,M))},ir=function(T){r(M,T);function M(){var I=T!==null&&T.apply(this,arguments)||this;return I.propop=!0,I}return M.prototype.init=function(){this._test=D(this.params,this.options.compare)},M.prototype.reset=function(){T.prototype.reset.call(this),this.keep=!0},M.prototype.next=function(I){this._test(I)&&(this.done=!0,this.keep=!1)},M}(m),Qe=function(T){r(M,T);function M(){var I=T!==null&&T.apply(this,arguments)||this;return I.propop=!0,I}return M.prototype.init=function(){if(!this.params||typeof this.params!="object")throw new Error("Malformed query. $elemMatch must by an object.");this._queryOperation=x(this.params,this.owneryQuery,this.options)},M.prototype.reset=function(){T.prototype.reset.call(this),this._queryOperation.reset()},M.prototype.next=function(I){if(u(I)){for(var k=0,ee=I.length;k<ee;k++){this._queryOperation.reset();var he=I[k];this._queryOperation.next(he,k,I,!1),this.keep=this.keep||this._queryOperation.keep}this.done=!0}else this.done=!1,this.keep=!1},M}(m),er=function(T){r(M,T);function M(){var I=T!==null&&T.apply(this,arguments)||this;return I.propop=!0,I}return M.prototype.init=function(){this._queryOperation=x(this.params,this.owneryQuery,this.options)},M.prototype.reset=function(){T.prototype.reset.call(this),this._queryOperation.reset()},M.prototype.next=function(I,k,ee,he){this._queryOperation.next(I,k,ee,he),this.done=this._queryOperation.done,this.keep=!this._queryOperation.keep},M}(m),_r=function(T){r(M,T);function M(){var I=T!==null&&T.apply(this,arguments)||this;return I.propop=!0,I}return M.prototype.init=function(){},M.prototype.next=function(I){u(I)&&I.length===this.params&&(this.done=!0,this.keep=!0)},M}(m),Ot=function(T){if(T.length===0)throw new Error("$and/$or/$nor must be a nonempty array")},ks=function(T){r(M,T);function M(){var I=T!==null&&T.apply(this,arguments)||this;return I.propop=!1,I}return M.prototype.init=function(){var I=this;Ot(this.params),this._ops=this.params.map(function(k){return x(k,null,I.options)})},M.prototype.reset=function(){this.done=!1,this.keep=!1;for(var I=0,k=this._ops.length;I<k;I++)this._ops[I].reset()},M.prototype.next=function(I,k,ee){for(var he=!1,_e=!1,Re=0,or=this._ops.length;Re<or;Re++){var Xr=this._ops[Re];if(Xr.next(I,k,ee),Xr.keep){he=!0,_e=Xr.keep;break}}this.keep=_e,this.done=he},M}(m),Ag=function(T){r(M,T);function M(){var I=T!==null&&T.apply(this,arguments)||this;return I.propop=!1,I}return M.prototype.next=function(I,k,ee){T.prototype.next.call(this,I,k,ee),this.keep=!this.keep},M}(ks),Cf=function(T){r(M,T);function M(){var I=T!==null&&T.apply(this,arguments)||this;return I.propop=!0,I}return M.prototype.init=function(){var I=this,k=Array.isArray(this.params)?this.params:[this.params];this._testers=k.map(function(ee){if(j(ee,I.options))throw new Error("cannot nest $ under ".concat(I.name.toLowerCase()));return D(ee,I.options.compare)})},M.prototype.next=function(I,k,ee){for(var he=!1,_e=!1,Re=0,or=this._testers.length;Re<or;Re++){var Xr=this._testers[Re];if(Xr(I)){he=!0,_e=!0;break}}this.keep=_e,this.done=he},M}(m),Sg=function(T){r(M,T);function M(I,k,ee,he){var _e=T.call(this,I,k,ee,he)||this;return _e.propop=!0,_e._in=new Cf(I,k,ee,he),_e}return M.prototype.next=function(I,k,ee,he){this._in.next(I,k,ee),u(ee)&&!he?this._in.keep?(this.keep=!1,this.done=!0):k==ee.length-1&&(this.keep=!0,this.done=!0):(this.keep=!this._in.keep,this.done=!0)},M.prototype.reset=function(){T.prototype.reset.call(this),this._in.reset()},M}(m),Og=function(T){r(M,T);function M(){var I=T!==null&&T.apply(this,arguments)||this;return I.propop=!0,I}return M.prototype.next=function(I,k,ee,he,_e){_e?ee.hasOwnProperty(k)===this.params&&(this.done=!0,this.keep=!0):(this.done=!0,this.keep=!this.params)},M}(m),wg=function(T){r(M,T);function M(I,k,ee,he){var _e=T.call(this,I,k,ee,I.map(function(Re){return x(Re,k,ee)}),he)||this;return _e.propop=!1,Ot(I),_e}return M.prototype.next=function(I,k,ee,he){this.childrenNext(I,k,ee,he)},M}(A),Li=function(T){r(M,T);function M(I,k,ee,he){var _e=T.call(this,I,k,ee,I.map(function(Re){return x(Re,k,ee)}),he)||this;return _e.propop=!0,_e}return M.prototype.next=function(I,k,ee,he){this.childrenNext(I,k,ee,he)},M}(A),bf=function(T,M,I){return new b(T,M,I)},Tf=function(T,M,I,k){return new ir(T,M,I,k)},Df=function(T,M,I,k){return new ks(T,M,I,k)},Mf=function(T,M,I,k){return new Ag(T,M,I,k)},Bf=function(T,M,I,k){return new Qe(T,M,I,k)},If=function(T,M,I,k){return new Sg(T,M,I,k)},Pf=function(T,M,I,k){return new Cf(T,M,I,k)},Nf=F(function(T){return function(M){return M!=null&&M<T}}),Ff=F(function(T){return function(M){return M===T||M<=T}}),Rf=F(function(T){return function(M){return M!=null&&M>T}}),vf=F(function(T){return function(M){return M===T||M>=T}}),$f=function(T,M,I){var k=T[0],ee=T[1];return new b(function(he){return i(he)%k===ee},M,I)},xf=function(T,M,I,k){return new Og(T,M,I,k)},kf=function(T,M,I){return new b(new RegExp(T,M.$options),M,I)},qf=function(T,M,I,k){return new er(T,M,I,k)},Lf={number:function(T){return typeof T=="number"},string:function(T){return typeof T=="string"},bool:function(T){return typeof T=="boolean"},array:function(T){return Array.isArray(T)},null:function(T){return T===null},timestamp:function(T){return T instanceof Date}},jf=function(T,M,I){return new b(function(k){if(typeof T=="string"){if(!Lf[T])throw new Error("Type alias does not exist");return Lf[T](k)}return k!=null?k instanceof T||k.constructor===T:!1},M,I)},Uf=function(T,M,I,k){return new wg(T,M,I,k)},Vf=function(T,M,I,k){return new Li(T,M,I,k)},zf=function(T,M,I){return new _r(T,M,I,"$size")},Wf=function(){return null},Hf=function(T,M,I){var k;if(c(T))k=T;else if(!process.env.CSP_ENABLED)k=new Function("obj","return "+T);else throw new Error('In CSP mode, sift does not support strings in "$where" condition');return new b(function(ee){return k.bind(ee)(ee)},M,I)},Cg=Object.freeze({__proto__:null,$Size:_r,$all:Vf,$and:Uf,$elemMatch:Bf,$eq:bf,$exists:xf,$gt:Rf,$gte:vf,$in:Pf,$lt:Nf,$lte:Ff,$mod:$f,$ne:Tf,$nin:If,$nor:Mf,$not:qf,$options:Wf,$or:Df,$regex:kf,$size:zf,$type:jf,$where:Hf}),Gf=function(T,M,I){var k=I===void 0?{}:I,ee=k.compare,he=k.operations;return x(T,M,{compare:ee,operations:Object.assign({},Cg,he||{})})},Ql=function(T,M){M===void 0&&(M={});var I=Gf(T,null,M);return te(I)};t.$Size=_r,t.$all=Vf,t.$and=Uf,t.$elemMatch=Bf,t.$eq=bf,t.$exists=xf,t.$gt=Rf,t.$gte=vf,t.$in=Pf,t.$lt=Nf,t.$lte=Ff,t.$mod=$f,t.$ne=Tf,t.$nin=If,t.$nor=Mf,t.$not=qf,t.$options=Wf,t.$or=Df,t.$regex=kf,t.$size=zf,t.$type=jf,t.$where=Hf,t.EqualsOperation=b,t.createDefaultQueryOperation=Gf,t.createEqualsOperation=N,t.createOperationTester=te,t.createQueryOperation=x,t.createQueryTester=qe,t.default=Ql,Object.defineProperty(t,"__esModule",{value:!0})})});var hL=g((G9e,h9)=>{d();var lL=cL();h9.exports=lL.default;Object.assign(h9.exports,lL)});var gL=g((Y9e,yL)=>{"use strict";d();var ude=Yy(),ade=ig(),cde=oL(),ag=kt(),lde=l9(),mL=pf(),fL=zy(),hde=yO(),f9=Zn(),dL=hL().default,cg=Ae(),{populateModelSymbol:fde}=fe();yL.exports=function(e){let r=Object.assign({},ag(e,"allOptions.options.options"),ag(e,"allOptions.options")),n=Object.assign({},e.options,r,{justOne:e.justOne,isVirtual:e.isVirtual});n.$nullIfNotFound=e.isVirtual;let s=e.populatedModel,i=[].concat(e.rawIds);e.allIds=[].concat(e.allIds),cde(e.rawIds,e.rawDocs,e.rawOrder,n);let o=e.docs,u=e.rawIds,a=e.options,c=e.count&&e.isVirtual,l,h=0;function f(p){if(++h,c)return p;if(p instanceof ade)return p.val;if(p===void 0)return p;let m=e.allIds[l];if(e.path.endsWith(".$*"))return mf(p,a,n,m);if(e.justOne===!0&&Array.isArray(p)){let y=[];for(let A of p){let S=mL.get(A);(S==null||S===s)&&y.push(A)}for(;p.length>y.length;)Array.prototype.pop.apply(p,[]);for(let A=0;A<y.length;++A)p[A]=y[A];return mf(p[0],a,n,m)}else{if(e.justOne===!1&&!Array.isArray(p))return mf([p],a,n,m);if(e.justOne===!0&&!Array.isArray(p)&&Array.isArray(m))return mf(p,a,n,p==null?p:m[h-1])}return mf(p,a,n,m)}for(l=0;l<o.length;++l){h=0;let p=e.path.endsWith(".$*")?e.path.slice(0,-3):e.path,m=f9.get(p,o[l],fL);if(m==null&&!lde(e.originalModel.schema,p))continue;let y;c?y=dde(u[l]):Array.isArray(e.match)?y=Array.isArray(u[l])?u[l].filter(N=>N==null||dL(e.match[l])(N)):[u[l]].filter(N=>N==null||dL(e.match[l])(N))[0]:y=u[l];let A=e.originalModel.schema,S=ag(o[l],"$__",null)!=null,O=S?m instanceof Map:cg.isPOJO(m);if(O=O&&ag(A._getSchema(p),"$isSchemaMap"),!e.isVirtual&&O){let N=m instanceof Map?Array.from(m.keys()):Object.keys(m);y=y.reduce((R,F,G)=>(R.set(N[G],F),R),new Map)}if(S&&Array.isArray(y))for(let N of y)N!=null&&N.$__!=null&&(N.$__.parent=o[l]);else S&&y!=null&&y.$__!=null&&(y.$__.parent=o[l]);if(e.isVirtual&&S){o[l].$populated(p,e.justOne?i[0]:i,e.allOptions),Array.isArray(y)&&(y=y.map(N=>N??void 0)),f9.set(p,y,o[l],void 0,f,!1);continue}let D=p.split("."),b=o[l];for(let N=0;N<D.length-1&&!(Array.isArray(b)&&!cg.isArrayIndex(D[N])||D[N]==="$*");++N){if(b[D[N]]==null){let R=D.slice(0,N+1).join("."),F=A._getSchema(R);if(y==null&&F!=null&&F.$isMongooseArray)break;b[D[N]]={}}if(b=b[D[N]],typeof b!="object")break}o[l].$__&&(e.allOptions.options[fde]=e.allOptions.model,o[l].$populated(p,e.unpopulatedValues[l],e.allOptions.options),y!=null&&y.$__!=null&&(y.$__.wasPopulated={value:e.unpopulatedValues[l]}),y instanceof Map&&!y.$isMongooseMap&&(y=new ude(y,p,o[l],o[l].schema.path(p).$__schemaType))),f9.set(p,y,o[l],fL,f,!1),o[l].$__&&hde(o[l],[e.allOptions.options])}};function dde(t){return Array.isArray(t)?t.some(e=>Array.isArray(e)||e===null)?t.map(e=>e==null?0:Array.isArray(e)?e.filter(r=>r!=null).length:1):t.filter(e=>e!=null).length:t==null?0:1}function mf(t,e,r,n){let s=typeof r.transform=="function",i=s?r.transform:o=>o;if(Array.isArray(t)){let o=[],u=t.length;for(let l=0;l<u;++l){let h=t[l],f=Array.isArray(n)?n[l]:n;if(!(!d9(h)&&(!r.retainNullValues||h!=null)&&!s)){{if(!r.retainNullValues&&h==null)continue;s&&(h=i(d9(h)?h:null,f))}if(pL(h,e),o.push(h),e.originalLimit&&o.length>=e.originalLimit)break}}let a=o.length;for(;t.length>a;)Array.prototype.pop.apply(t,[]);let c=0;if(cg.isMongooseArray(t))for(c=0;c<a;++c)t.set(c,o[c],!0);else for(c=0;c<a;++c)t[c]=o[c];return t}return d9(t)||cg.isPOJO(t)?(pL(t,e),i(t,n)):t instanceof Map?t:r.justOne===!1?[]:t==null?i(t,n):i(null,n)}function pL(t,e){t!=null&&e.excludeId&&(typeof t.$__setValue=="function"?delete t._doc._id:delete t._id)}function d9(t){return t==null?!1:Array.isArray(t)||t.$isMongooseMap||t.$__!=null||mL.has(t)}});var SL=g((J9e,AL)=>{"use strict";d();var pde=ig(),mde=EO(),{trusted:lg}=fl(),EL=Y2();AL.exports=function(e,r,n,s,i){let o=yde(r);if(n.size===1){let u=Array.from(n)[0],a=s.schema.path(u);if(u!=="_id"||!o._id)e=_L(e,a,i),o[u]=lg({$in:e});else if(u==="_id"&&o._id){let l=EL(o[u])?o[u]:{$eq:o[u]};o[u]={...lg({$in:e}),...l}}let c=mde(u);for(let l=0;l<c.length-1;++l){let h=c[l];if(o[h]!=null&&o[h].$elemMatch!=null){o[h].$elemMatch[u.slice(h.length+1)]=lg({$in:e}),delete o[u];break}}}else{let u=[];Array.isArray(o.$or)?(o.$and=[{$or:o.$or},{$or:u}],delete o.$or):o.$or=u;for(let a of n)if(a!=="_id"||!o._id){let c=s.schema.path(a);e=_L(e,c,i),u.push({[a]:{$in:e}})}else if(a==="_id"&&o._id){let c=EL(o[a])?o[a]:{$eq:o[a]};o[a]={...lg({$in:e}),...c}}}return o};function _L(t,e,r){return t=t.filter(n=>!(n instanceof pde)),r?t.filter(n=>{try{return e.cast(n),!0}catch{return!1}}):t}function yde(t){return Array.isArray(t)?t.length>1?{$or:[].concat(t.map(e=>Object.assign({},e)))}:Object.assign({},t[0]):Object.assign({},t)}});var bL=g((Z9e,CL)=>{"use strict";d();var OL=wa(),gde=kt(),Ede=Ns(),wL=pf(),Hl=Zn(),_de=fe().populateModelSymbol;CL.exports=function t(e,r,n,s){let i=r.path(s),o=n;if(i)return i;let u=r.discriminatorMapping&&r.discriminatorMapping.key;if(u&&e!=null){if(n!=null&&n[u]!=null){let l=Ede(e.discriminators,n[u]);r=l?l.schema:r}else if(e.discriminators!=null)return Object.keys(e.discriminators).reduce((l,h)=>{let f=e.discriminators[h];return l.concat(t(f,f.schema,null,s))},[])}function a(l,h,f,p){let m=l.length+1,y,A;for(;m--;){if(A=l.slice(0,m).join("."),y=h.path(A),y==null)continue;if(y.caster){if(y.caster instanceof OL)return y.caster;let D=null;if(y.schema!=null&&y.schema.discriminators!=null){let b=y.schema.discriminators,N=A+"."+y.schema.options.discriminatorKey,R=f?Hl.get(N,f)||[]:[];D=Object.keys(b).reduce(function(F,G){let z=b[G].discriminatorMapping.value;return(n==null||R.indexOf(G)!==-1||R.indexOf(z)!==-1)&&F.push(b[G]),F},[])}if(m!==l.length&&y.schema){let b;if(l[m]==="$")return m+1===l.length?y:(b=a(l.slice(m+1),h,f?Hl.get(A,f):null,p.concat(l.slice(0,m))),b&&(b.$parentSchemaDocArray=b.$parentSchemaDocArray||(y.schema.$isSingleNested?null:y)),b);if(D!=null&&D.length>0){b=[];for(let N of D){let R=a(l.slice(m),N,f?Hl.get(A,f):null,p.concat(l.slice(0,m)));R!=null&&(R.$parentSchemaDocArray=R.$parentSchemaDocArray||(y.schema.$isSingleNested?null:y),R.$parentSchemaDocArray&&(b.$parentSchemaDocArray=R.$parentSchemaDocArray),b.push(R))}return b}else return b=a(l.slice(m),y.schema,f?Hl.get(A,f):null,p.concat(l.slice(0,m))),b&&(b.$parentSchemaDocArray=b.$parentSchemaDocArray||(y.schema.$isSingleNested?null:y)),b}else if(m!==l.length&&y.$isMongooseArray&&y.casterConstructor.$isMongooseArray){let b=y;for(;b.$isMongooseArray&&!b.$isMongooseDocumentArray;)b=b.casterConstructor;let N=a(l.slice(m),b.schema,null,p.concat(l.slice(0,m)));if(N!=null)return N;if(b.schema.discriminators){let R=[];for(let F of Object.keys(b.schema.discriminators)){let G=b.schema.discriminators[F]||b.schema,z=a(l.slice(m),G,null,p.concat(l.slice(0,m)));z!=null&&R.push(z)}if(R.length>0)return R}}}else if(y.$isSchemaMap&&y.$__schemaType instanceof OL)return y.$__schemaType;let S=p.concat([A]).join(".");if(o!=null&&o.$__&&o.$populated(S)&&m<l.length){let D=n.$__.populated[S].options[_de];if(D!=null)return a(l.slice(m),D.schema,f?Hl.get(A,f):null,p.concat(l.slice(0,m)))}let O=gde(o,A);if(O!=null){let D=Array.isArray(O)&&O.length>0?wL.get(O[0]):wL.get(O),b=D!=null?D.schema:null;if(b!=null){let N=a(l.slice(m),b,f?Hl.get(A,f):null,p.concat(l.slice(0,m)));if(N!=null)return N.$parentSchemaDocArray=N.$parentSchemaDocArray||(b.$isSingleNested?null:b),N}}return y}}let c=s.split(".");for(let l=0;l<c.length;++l)c[l]==="$"&&(c[l]="0");return a(c,r,n,[])}});var PL=g((t8e,IL)=>{"use strict";d();var Gl=Bn(),Ade=ig(),Sde=Bt(),$s=kt(),Ode=Ns(),wde=ln(),TL=bL(),Cde=l9(),yf=zy(),$a=Zn(),hg=ZO(),Jr=Ae(),y9=fe().modelSymbol,p9=fe().populateModelSymbol,g9=Oa().schemaMixedSymbol,bde=tO();IL.exports=function(e,r,n){let s,i=r.length,o=[],u=n.model&&n.model.modelName||n.model,a,c,l,h={},f=e.schema;if(n._localModel!=null&&n._localModel.schema.nested[n.path])return[];let p=Cde(e.schema,n.path);if((p==null?null:p.virtual)!=null)return Tde(e,r,n,p);let y=TL(e,f,null,n.path);if(y=Array.isArray(y)?y:[y].filter(O=>O!=null),!(n.strictPopulate===!1||n.options?.strictPopulate===!1)&&y.length===0&&n._localModel!=null)return new bde(n._fullPath||n.path);for(let O=0;O<i;O++){s=r[O];let D=null;if(s.$__!=null&&s.populated(n.path)&&(n.forceRepopulate!=null?n.forceRepopulate:s.constructor.base.options.forceRepopulate)===!1)continue;let b=s!=null&&s.$__!=null?s.$__schema:f;if(a=TL(e,b,s,n.path),a!=null&&a.$isMongooseDocumentArray&&a.options.ref==null&&a.options.refPath==null)continue;if(a&&a.$parentSchemaDocArray&&$s(n,"options.sort")!=null)return new Gl("Cannot populate with `sort` on path "+n.path+" because it is a subproperty of a document array");l=null;let R=!1,F=null,G=null,z=null;if(a!=null&&a.instance==="Embedded"){if(a.options.ref){let Qe={localField:n.path+"._id",foreignField:"_id",justOne:!0},er=S(s,a,u,e),_r=$a.get(n.path,s),Ot=$a.get("_id",_r);E9(e,o,h,er.modelNames,n,Qe,Ot,s,G,_r)}continue}if(Array.isArray(a)){let Qe=a;for(let er of Qe){let _r,Ot;try{Ot=S(s,er,u,e),_r=Ot.modelNames,R=R||Ot.isRefPath,F=F||Ot.refPath,D=Ot.justOne}catch(ks){return ks}if(!(R&&!Ot.isRefPath)&&_r){l=l||[];for(let ks of _r)l.indexOf(ks)===-1&&l.push(ks)}}}else{try{let Qe=S(s,a,u,e);l=Qe.modelNames,R=Qe.isRefPath,F=F||Qe.refPath,D=Qe.justOne,G=$s(a,"options.populate",null),R&&(z=l,l=Array.from(new Set(l)))}catch(Qe){return Qe}if(!l)continue}let j={},v=n.path,x="_id";if("justOne"in n&&n.justOne!==void 0?D=n.justOne:a&&!a[g9]&&(n.path.endsWith("."+a.path)||n.path===a.path)&&(D=Array.isArray(a)?a.every(Qe=>!Qe.$isMongooseArray):!a.$isMongooseArray),!l)continue;j.isVirtual=!1,j.justOne=D,j.localField=v,j.foreignField=x;let W=ML(s,v,e,n,null,a),te=String(Jr.getValue(x,s));n._docs[te]=Array.isArray(W)?W.slice():W;let qe=$s(n,"match",null),ir=typeof qe=="function";if(ir&&(qe=qe.call(s,s)),Array.isArray(qe)){for(let Qe of qe)if(Qe!=null&&Qe.$where)throw new Gl("Cannot use $where filter with populate() match")}else if(qe!=null&&qe.$where!=null)throw new Gl("Cannot use $where filter with populate() match");j.match=qe,j.hasMatchFunction=ir,j.isRefPath=R,j.modelNamesInOrder=z,R&&(l=Dde(s,f,j,n,F,W)||l);try{E9(e,o,h,l,n,j,W,s,G)}catch(Qe){return Qe}}return o;function S(O,D,b,N){let R,F=!1,G=null,z=D;D&&D.instance==="Array"&&(D=D.caster),D&&D.$isSchemaMap&&(D=D.$__schemaType);let j=D&&D.options&&D.options.ref;if(c=D&&D.options&&D.options.refPath,D!=null&&D[g9]&&!j&&!c&&!b)return{modelNames:null};if(b)R=[b];else if(c!=null){if(typeof c=="function"){let v=n.path.slice(0,n.path.length-D.path.length-1),x=$a.get(v,O,yf),W=Array.isArray(x)?Jr.array.flatten(x):x?[x]:[];R=new Set;for(let te of W)c=c.call(te,te,n.path),hg(c,O,n.path,f,n._queryProjection).forEach(qe=>R.add(qe));R=Array.from(R)}else R=hg(c,O,n.path,f,n._queryProjection);F=!0}else{let v,x,W,te,qe=N,ir=N.schema.options.discriminatorKey;if(!D&&ir&&(te=Jr.getValue(ir,O))){let Qe=Ode(N.discriminators,te)||N;if(Qe!=null)qe=Qe;else try{qe=_9(N.db,te)}catch(er){return er}W=qe.schema._getSchema(n.path),W&&W.caster&&(W=W.caster)}else W=D;if(z&&z.path.endsWith(".$*")?G=!z.$isMongooseArray&&!z._arrayPath:W!=null&&(G=!W.$isMongooseArray&&!W._arrayPath),(v=$s(W,"options.ref"))!=null)if(W!=null&&typeof v=="function"&&n.path.endsWith("."+W.path)){R=new Set;let Qe=n.path.slice(0,n.path.length-W.path.length-1),er=$a.get(Qe,O,yf),_r=Array.isArray(er)?Jr.array.flatten(er):er?[er]:[];for(let Ot of _r)R.add(m9(v,Ot));_r.length===0?R=[m9(v,O)]:R=Array.from(R)}else v=m9(v,O),R=[v];else if((W=$s(D,"options.refPath"))!=null)if(F=!0,typeof x=="function"){let Qe=n.path.slice(0,n.path.length-W.path.length-1),er=$a.get(Qe,O,yf),_r=Array.isArray(er)?Jr.array.flatten(er):er?[er]:[];R=new Set;for(let Ot of _r)x=x.call(Ot,Ot,n.path),hg(x,O,n.path,f,n._queryProjection).forEach(ks=>R.add(ks));R=Array.from(R)}else R=hg(x,O,n.path,f,n._queryProjection)}if(!R)if(n._localModel==null)R=[N.modelName];else return{modelNames:R,justOne:G,isRefPath:F,refPath:c};return Array.isArray(R)||(R=[R]),{modelNames:R,justOne:G,isRefPath:F,refPath:c}}};function Tde(t,e,r,n){let s=[],i={},o=n.virtual;for(let u of e){let a=null,c={},l,h=n.nestedSchemaPath?n.nestedSchemaPath+".":"";typeof r.localField=="string"?l=r.localField:typeof o.options.localField=="function"?l=h+o.options.localField.call(u,u):Array.isArray(o.options.localField)?l=o.options.localField.map(O=>h+O):l=h+o.options.localField,c.count=o.options.count,o.options.skip!=null&&!r.hasOwnProperty("skip")&&(r.skip=o.options.skip),o.options.limit!=null&&!r.hasOwnProperty("limit")&&(r.limit=o.options.limit),o.options.perDocumentLimit!=null&&!r.hasOwnProperty("perDocumentLimit")&&(r.perDocumentLimit=o.options.perDocumentLimit);let f=o.options.foreignField;if(!l||!f)return new Gl(`Cannot populate virtual \`${r.path}\` on model \`${t.modelName}\`, because options \`localField\` and / or \`foreignField\` are missing`);typeof l=="function"&&(l=l.call(u,u)),typeof f=="function"&&(f=f.call(u,u)),c.isRefPath=!1;let p=null;"justOne"in r&&r.justOne!==void 0&&(p=r.justOne),a=o._getModelNamesForPopulate(u),o.options.refPath?(p=!!o.options.justOne,c.isRefPath=!0):o.options.ref&&(p=!!o.options.justOne),c.isVirtual=!0,c.virtual=o,c.justOne=p;let m=$s(c,"virtual.options.match",null)||$s(c,"virtual.options.options.match",null),y=$s(r,"match",null)||m,A=typeof y=="function";if(A&&(y=y.call(u,u,c.virtual)),Array.isArray(l)&&Array.isArray(f)&&l.length===f.length){y=Object.assign({},y);for(let O=1;O<l.length;++O)y[f[O]]=BL($a.get(l[O],u,yf),t.schema),A=!0;l=l[0],f=f[0]}if(c.localField=l,c.foreignField=f,c.match=y,c.hasMatchFunction=A,Array.isArray(y)){for(let O of y)if(O!=null&&O.$where)throw new Gl("Cannot use $where filter with populate() match")}else if(y!=null&&y.$where!=null)throw new Gl("Cannot use $where filter with populate() match");let S=ML(u,l,t,r,o);try{E9(t,s,i,a,r,c,S,u)}catch(O){return O}}return s}function E9(t,e,r,n,s,i,o,u,a,c){let l=s.connection!=null?s.connection:t.db;if(c=c===void 0?o:c,Array.isArray(c)&&(c=Jr.cloneArrays(c)),n==null)return;let h=Jr.array.flatten(n),f=h.length;for(;f--;){let p=h[f];if(p==null)continue;let m;if(s.model&&s.model[y9])m=s.model;else if(p[y9])m=p,p=m.modelName;else try{m=_9(l,p)}catch(O){if(o!==void 0)throw O;m=null}let y=o,A=i.modelNamesInOrder?i.modelNamesInOrder:n;i.isRefPath&&Array.isArray(o)&&o.length===A.length&&(y=DL(o,A,p));let S=s.perDocumentLimit==null?$s(s,"options.perDocumentLimit",null):s.perDocumentLimit;if(!r[p]||S!=null){let O={model:m};i.isVirtual&&$s(i.virtual,"options.options")?O.options=Sde(i.virtual.options.options):a!=null&&(O.options=Object.assign({},a)),Jr.merge(O,s),s[p9]=m,O[p9]=m,r[p]={model:m,options:O,match:i.hasMatchFunction?[i.match]:i.match,docs:[u],ids:[y],allIds:[o],unpopulatedValues:[c],localField:new Set([i.localField]),foreignField:new Set([i.foreignField]),justOne:i.justOne,isVirtual:i.isVirtual,virtual:i.virtual,count:i.count,[p9]:m},e.push(r[p])}else r[p].localField.add(i.localField),r[p].foreignField.add(i.foreignField),r[p].docs.push(u),r[p].ids.push(y),r[p].allIds.push(o),r[p].unpopulatedValues.push(c),i.hasMatchFunction&&r[p].match.push(i.match)}}function _9(t,e){return t.models[e]==null&&t._parent!=null?_9(t._parent,e):t.model(e)}function DL(t,e,r){return Array.isArray(e)?Array.isArray(t)&&Array.isArray(e)?t.flatMap((n,s)=>DL(n,e[s],r)):[]:e===r?Array.isArray(t)?Jr.array.flatten(t):[t]:[]}function m9(t,e){return typeof t=="function"&&!t[y9]?t.call(e,e):t}function ML(t,e,r,n,s,i){let o=r.schema._getPathType(e),u=o==="real"?r.schema.path(e):o.schema,a=u&&u.getters?u.getters:[];e=u!=null&&u.instance==="Embedded"?e+"._id":e;let c=$s(n,"options",{}),l="getters"in c?c.getters:$s(s,"options.getters",!1);if(a.length!==0&&l){let h=t.$__!=null?t:r.hydrate(t),f=Jr.getValue(e,t);if(Array.isArray(f)){let p=Jr.getValue(e.split(".").slice(0,-1),h);return f.map((m,y)=>u.applyGetters(m,p[y]))}else return u.applyGetters(f,h)}else return BL($a.get(e,t,yf),i)}function BL(t,e){if(t!=null&&t.$__!=null)return t._doc._id;if(t!=null&&t._id!=null&&(e==null||!e.$isSchemaMap))return t._id;if(Array.isArray(t)){let r=t.__array!=null?t.__array:t;for(let n=0;n<r.length;++n)r[n]!=null&&r[n].$__!=null&&(r[n]=r[n]._doc._id);return Jr.isMongooseArray(t)&&t.$schema()?t.$schema()._castForPopulate(t,t.$parent()):[].concat(t)}if(wde(t)==="Object"&&(e==null||e[g9]==null)){let r=[];for(let n of Object.keys(t))r.push(t[n]);return r}return t instanceof Map?Array.from(t.values()):t}function Dde(t,e,r,n,s,i){if(!r.isRefPath||s==null)return;let o=s.split("."),u="",a;for(let c=0;c<o.length;++c){let l=o[c];u=u+(u.length===0?"":".")+l;let h=e.path(u);if(h!=null&&h.$isMongooseArray&&h.caster.discriminators!=null&&Object.keys(h.caster.discriminators).length!==0){let f=Jr.getValue(u,t),p=n.path.substring(u.length+1),m=h.caster.schema.options.discriminatorKey;a=[];for(let y of f){let A=Jr.getValue(m,y),S=h.caster.discriminators[A],O=S&&S.schema;if(O==null)continue;let D=O.path(p);if(D==null||D.options.refPath==null){let N=Jr.getValue(r.localField.substring(u.length+1),y);i.forEach((R,F)=>{R===N&&(i[F]=Ade(R))});continue}let b=Jr.getValue(o.slice(c+1).join("."),y);a.push(b)}}}return a}});var FL=g((n8e,NL)=>{"use strict";d();var Mde=kt();NL.exports=function(e){if(Array.isArray(e)){let n=Object.keys(e[0]);return n.length===1&&n[0]==="_id"&&e[0]._id!=="hashed"}if(typeof e!="object")return!1;let r=Mde(e,"key",{});return Object.keys(r).length===1&&r.hasOwnProperty("_id")}});var $L=g((i8e,vL)=>{"use strict";d();var fg=kt(),RL=Ae();vL.exports=function(e,r,n){if(n.textIndexVersion!=null){delete n.key._fts,delete n.key._ftsx;let u={...n.weights,...n.key};if(Object.keys(u).length!==Object.keys(e).length)return!1;for(let a of Object.keys(u)){if(!(a in e))return!1;let c=u[a];if(c!==fg(r,"weights."+a)&&!(c===1&&fg(r,"weights."+a)==null))return!1}return r.default_language!==n.default_language?n.default_language==="english"&&r.default_language==null:!0}let s=["unique","partialFilterExpression","sparse","expireAfterSeconds","collation"];for(let u of s)if(!(!(u in r)&&!(u in n))){if(u==="collation"){if(r[u]==null||n[u]==null)return r[u]==null&&n[u]==null;let a=Object.keys(r.collation),c=r.collation,l=n.collation;for(let h of a)if(fg(c,h)!==fg(l,h))return!1}else if(!RL.deepEqual(r[u],n[u]))return!1}let i=Object.keys(e),o=Object.keys(n.key);if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u]||!RL.deepEqual(e[i[u]],n.key[o[u]]))return!1;return!0}});var kL=g((u8e,xL)=>{"use strict";d();xL.exports=function(e,r){if(r.timeseries==null)return!1;let{timeField:n,metaField:s}=r.timeseries;return typeof n!="string"||typeof s!="string"?!1:Object.keys(e.key).length===2&&e.key[n]===1&&e.key[s]===1}});var UL=g((c8e,jL)=>{"use strict";d();var Bde=Y2();function Ide(t,e){return LL({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:"schema"})}function Pde(t,e){return LL({baseModelName:t.baseModelName,discriminatorMapping:t.schema.discriminatorMapping,indexes:e,indexesType:"db"})}jL.exports={getRelatedSchemaIndexes:Ide,getRelatedDBIndexes:Pde};function LL({baseModelName:t,discriminatorMapping:e,indexes:r,indexesType:n}){let s=e&&e.key,i=e&&e.value;return s?t?r.filter(u=>{let a=qL(u,n);return a&&a[s]===i}):r.filter(u=>{let a=qL(u,n);return!a||!a[s]||Bde(a[s])&&!("$eq"in a[s])}):r}function qL(t,e){if(e==="schema"){let r=t[1];return r&&r.partialFilterExpression}return t.partialFilterExpression}});var zL=g((h8e,VL)=>{"use strict";d();VL.exports=Nde;function Nde(t,e,r){let n=0,s=0,i=null;if(e<=0)throw new Error("Limit must be positive");if(t.length===0)return r(null,[]);for(let c=0;c<t.length&&c<e;++c)o();function o(){t[s+n](a(s+n)),++n}let u=[];function a(c){return(l,h)=>{if(--n,++s,i==null){if(l!=null)return i=l,r(i);if(u[c]=h,s===t.length)return r(null,u);s+n<t.length&&o()}}}}});var HL=g((d8e,WL)=>{"use strict";d();WL.exports=function t(e,r,n){if(r!=null)for(let s=0;s<r.length;++s)Array.isArray(r[s])?t(e,r[s],n+"."+s):e.push(n+"."+s)}});var JL=g((m8e,QL)=>{"use strict";d();var GL=kt(),KL=Zn(),YL=GC();QL.exports=function(e,r,n){let s=YL(GL(r,"select",null),!0)||YL(GL(r,"options.select",null),!0);if(s!=null){for(let i of e)if(s.hasOwnProperty("-"+i))for(let o of n)o.$__!=null?KL.unset(i,o._doc):KL.unset(i,o)}}});var ZL=g((g8e,XL)=>{"use strict";d();var Fde=Ie(),dg=class extends Fde{constructor(e,r,n){let s=n?.matchedCount??0,i=n?.insertedCount??0,o=r.map(a=>a._id).join(", ");o.length>100&&(o=o.slice(0,100)+"...");let u=r.length-s-i;super(`${e}.bulkSave() was not able to update ${u} of the given documents due to incorrect version or optimistic concurrency, document ids: ${o}`),this.modelName=e,this.documents=r,this.bulkWriteResult=n,this.numDocumentsNotUpdated=u}};Object.defineProperty(dg.prototype,"name",{value:"MongooseBulkSaveIncompleteError"});XL.exports=dg});var u9=g((Ej,_j)=>{"use strict";d();var Rde=s9(),vde=WS(),qi=Nn(),$de=ty(),A9=require("events").EventEmitter,C9=pl(),{MongoBulkWriteError:xde}=da(),yg=iC(),we=Bn(),kde=_y(),qde=XS(),pg=X2(),Lde=Iq(),S9=Tl(),O9=Aa(),uj=QS(),ej=JS(),jde=Sy(),Ude=Nq(),Vde=o9(),zde=Ky(),aj=vq(),Wde=kq(),Hde=PC(),cj=Uq(),Gde=zq(),lj=Hq(),Kde=Jq(),hj=NC(),Yde=eL(),Qde=gL(),Jde=AC(),vo=Bt(),Xde=SL(),fj=EC(),tj=aC(),dj=by(),Zde=E2(),w9=Iw(),Ef=kt(),epe=ln(),mg=Ns(),tpe=PL(),_f=os(),b9=li().internalToObjectOptions,T9=FL(),pj=$L(),rpe=kL(),{getRelatedDBIndexes:npe,getRelatedSchemaIndexes:spe}=UL(),D9=tw(),ipe=Dy(),ope=pf(),upe=zL(),ape=t9(),mj=HL(),cpe=JL(),lpe=fC(),rj=xa(),nj=require("util"),Et=Ae(),hpe=gO(),fpe=ZL(),Af=Symbol("mongoose#Model#collection"),Sf=Symbol("mongoose#Model#db"),yj=fe().modelSymbol,gf=Symbol("mongoose#Model#subclassed"),{VERSION_INC:gg,VERSION_WHERE:sj,VERSION_ALL:dpe}=qi,ppe=Object.assign({},b9,{bson:!0});function Q(t,e,r){if(e instanceof S9)throw new TypeError("2nd argument to `Model` constructor must be a POJO or string, **not** a schema. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");if(typeof t=="string")throw new TypeError("First argument to `Model` constructor must be an object, **not** a string. Make sure you're calling `mongoose.model()`, not `mongoose.Model()`.");qi.call(this,t,e,r)}Object.setPrototypeOf(Q.prototype,qi.prototype);Q.prototype.$isMongooseModelPrototype=!0;Q.prototype.db;Q.prototype.collection;Q.prototype.$__collection;Q.prototype.modelName;Q.prototype.$where;Q.prototype.baseModelName;Q.events;Q._middleware;function gj(t,e){if(t.$where!=null)for(let r of Object.keys(t.$where))e[r]=t.$where[r]}Q.prototype.$__handleSave=function(t,e){let r={};hj(this.$__schema,t),typeof t.writeConcern<"u"?(r.writeConcern={},"w"in t.writeConcern&&(r.writeConcern.w=t.writeConcern.w),"j"in t.writeConcern&&(r.writeConcern.j=t.writeConcern.j),"wtimeout"in t.writeConcern&&(r.writeConcern.wtimeout=t.writeConcern.wtimeout)):("w"in t&&(r.w=t.w),"j"in t&&(r.j=t.j),"wtimeout"in t&&(r.wtimeout=t.wtimeout)),"checkKeys"in t&&(r.checkKeys=t.checkKeys);let n=this.$session(),s=this[Sf].base.transactionAsyncLocalStorage?.getStore();if(n!=null?r.session=n:!t.hasOwnProperty("session")&&s?.session!=null&&(r.session=s.session),this.$isNew){let u=this.toObject(ppe);if((u||{})._id===void 0){_f(function(){e(new we("document must have an _id before saving"))});return}this.$__version(!0,u),this[Af].insertOne(u,r).then(a=>e(null,a),a=>{Kl(this,!0),e(a,null)}),this.$__reset(),Kl(this,!1),this.$__.inserting=!0;return}this.$__.inserting=!1;let i=this.$__delta();if(t.pathsToSave){for(let u in i[1].$set)if(!t.pathsToSave.includes(u)){if(t.pathsToSave.some(a=>u.slice(0,a.length)===a&&u.charAt(a.length)==="."))continue;delete i[1].$set[u]}}if(i){if(i instanceof we){e(i);return}let u=this.$__where(i[0]);if(u instanceof we){e(u);return}gj(this,u);let a=i[1];if(this.$__schema.options.minimize){for(let c of Object.values(a))if(c!=null)for(let l of Object.keys(c))c[l]==null||typeof c[l]!="object"||Et.isPOJO(c[l])&&(hpe(c[l]),Object.keys(c[l]).length===0&&(delete c[l],a.$unset=a.$unset||{},a.$unset[l]=1))}this[Af].updateOne(u,a,r).then(c=>{c.$where=u,e(null,c)},c=>{this.$__undoReset(),e(c)})}else{o.call(this);return}this.$__.modifiedPaths=this.modifiedPaths(),this.$__reset(),Kl(this,!1);function o(){let u=Object.assign({},t,r),a=this.$__where(),c=this.$__schema.options.optimisticConcurrency;if(c&&!Array.isArray(c)){let l=this.$__schema.options.versionKey,h=this.$__getValue(l);h!=null&&(a[l]=h)}Hde(this.$__schema,u),this.constructor.collection.findOne(a,u).then(l=>{e(null,{$where:a,matchedCount:l?1:0})}).catch(e)}};Q.prototype.$__save=function(t,e){this.$__handleSave(t,(r,n)=>{if(r)return r=this.$__schema._transformDuplicateKeyError(r),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:r},u=>{e(u,this)});let s=0;if((t!=null?t.writeConcern!=null?t.writeConcern.w:t.w:0)!==0){if(n!=null&&(Array.isArray(n)?s=n.length:n.matchedCount!=null?s=n.matchedCount:s=n),this.$__.version&&!this.$__.inserting){let u=gg===(gg&this.$__.version);this.$__.version=void 0;let a=this.$__schema.options.versionKey,c=this.$__getValue(a)||0;if(s<=0){this.$__undoReset();let l=this.$__.$versionError||new uj(this,c,this.$__.modifiedPaths);return e(l)}u&&this.$__setValue(a,c+1)}if(n!=null&&s<=0)return this.$__undoReset(),r=new $de(n.$where,this.constructor.modelName,s,n),this.$__schema.s.hooks.execPost("save:error",this,[this],{error:r},a=>{e(a,this)})}this.$__.saving=void 0,this.$__.savedState={},this.$emit("save",this,s),this.constructor.emit("save",this,s),e(null,this)})};function mpe(t,e){let r=t.$__schema.options.versionKey;if(!r)return null;let n=t.$__getValue(r)||0;return new uj(t,n,e)}Q.prototype.save=async function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new we("Model.prototype.save() no longer accepts a callback");let r;if(this.$op="save",this.$__.saving?r=new ej(this):this.$__.saving=new ej(this),e=new Lde(e),e.hasOwnProperty("session")&&this.$session(e.session),this.$__.timestamps!=null&&(e.timestamps=this.$__.timestamps),this.$__.$versionError=mpe(this,this.modifiedPaths()),r)throw this.$__handleReject(r),r;return this.$__.saveOptions=e,await new Promise((n,s)=>{this.$__save(e,i=>{if(this.$__.saving=null,this.$__.saveOptions=null,this.$__.$versionError=null,this.$op=null,i!=null)return this.$__handleReject(i),s(i);n()})}),this};Q.prototype.$save=Q.prototype.save;Q.prototype.$__version=function(t,e){let r=this.$__schema.options.versionKey;if(t===!0){r&&(lpe(e,r,0),this.$__setValue(r,0));return}if(r!==!1&&this.$__isSelected(r)){if(sj===(sj&this.$__.version)){let n=this.$__getValue(r);n!=null&&(t[r]=n)}gg===(gg&this.$__.version)&&(Ef(e.$set,r,null)!=null?++e.$set[r]:(e.$inc=e.$inc||{},e.$inc[r]=1))}};Q.prototype.increment=function(){return this.$__.version=dpe,this};Q.prototype.$__where=function(e){return e||(e={}),e._id||(e._id=this._doc._id),this._doc._id===void 0?new we("No _id found on document!"):e};Q.prototype.deleteOne=function(e){if(typeof e=="function"||typeof arguments[1]=="function")throw new we("Model.prototype.deleteOne() no longer accepts a callback");e||(e={}),e.hasOwnProperty("session")&&this.$session(e.session);let r=this,n=this.$__where();if(n instanceof Error)throw n;let s=r.constructor.deleteOne(n,e);return this.$session()!=null&&("session"in s.options||(s.options.session=this.$session())),s.pre(function(o){r.constructor._middleware.execPre("deleteOne",r,[r],o)}),s.pre(function(o){w9(r.$getAllSubdocs(),(u,a)=>{u.constructor._middleware.execPre("deleteOne",u,[u],a)},o)}),s.pre(function(o){return r.$__.isDeleted?o(C9.skipWrappedFunction()):o()}),s.post(function(o){w9(r.$getAllSubdocs(),(u,a)=>{u.constructor._middleware.execPost("deleteOne",u,[u],{},a)},o)}),s.post(function(o){r.constructor._middleware.execPost("deleteOne",r,[r],{},o)}),s};Q.prototype.$model=function(e){return arguments.length===0?this.constructor:this[Sf].model(e)};Q.prototype.model=Q.prototype.$model;Q.exists=function(e,r){if(Be(this,"exists"),typeof arguments[2]=="function")throw new we("Model.exists() no longer accepts a callback");return this.findOne(e).select({_id:1}).lean().setOptions(r)};Q.discriminator=function(t,e,r){let n;if(typeof t=="function"&&(n=t,t=Et.getFunctionName(n),!(n.prototype instanceof Q)))throw new we("The provided class "+t+" must extend Model");r=r||{};let s=Et.isPOJO(r)?r.value:r,i=typeof r.clone=="boolean"?r.clone:!0,o=typeof r.mergePlugins=="boolean"?r.mergePlugins:!0,u=typeof r.overwriteModels=="boolean"?r.overwriteModels:!1;if(Be(this,"discriminator"),Et.isObject(e)&&!e.instanceOfSchema&&(e=new S9(e)),e instanceof S9&&i&&(e=e.clone()),e=Zde(this,t,e,s,o,r.mergeHooks,u),this.db.models[t]&&!e.options.overwriteModels&&!u)throw new qde(t);e.$isRootDiscriminator=!0,e.$globalPluginsApplied=!0,n=this.db.model(n||t,e,this.$__collection.name),this.discriminators[t]=n;let a=this.discriminators[t];if(Object.setPrototypeOf(a.prototype,this.prototype),Object.defineProperty(a,"baseModelName",{value:this.modelName,configurable:!0,writable:!1}),aj(a,e),lj(a,e),this[gf]!=null)for(let c of this[gf])c.discriminators=c.discriminators||{},c.discriminators[t]=n.__subclass(n.db,e,c.collection.name);return a};function Be(t,e){if(t==null||t===global)throw new we("`Model."+e+"()` cannot run without a model as `this`. Make sure you are calling `MyModel."+e+"()` where `MyModel` is a Mongoose model.");if(t[yj]==null)throw new we("`Model."+e+"()` cannot run without a model as `this`. Make sure you are not calling `new Model."+e+"()`")}for(let t in A9.prototype)Q[t]=A9.prototype[t];Q.init=function(){if(Be(this,"init"),typeof arguments[0]=="function")throw new we("Model.init() no longer accepts a callback");if(this.schema.emit("init",this),this.$init!=null)return this.$init;let e=this.db,r=async()=>{if(Et.getOption("autoIndex",this.schema.options,e.config,e.base.options))return await this.ensureIndexes({_automatic:!0})},n=async()=>{if(!Et.getOption("autoSearchIndex",this.schema.options,e.config,e.base.options))return;let a=[];for(let c of this.schema._searchIndexes)a.push(await this.createSearchIndex(c));return a},s=async()=>{if((e.readyState===rj.connecting||e.readyState===rj.disconnected)&&e._shouldBufferCommands()&&await new Promise(a=>{e._queue.push({fn:a})}),!!Et.getOption("autoCreate",this.schema.options,e.config,e.base.options))return await this.createCollection()};this.$init=s().then(()=>r()).then(()=>n());let i=this.$init.catch,o=this;return this.$init.catch=function(){return o.$caught=!0,i.apply(o.$init,arguments)},this.$init};Q.createCollection=async function(e){if(Be(this,"createCollection"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new we("Model.createCollection() no longer accepts a callback");let r=await new Promise((a,c)=>{this.hooks.execPre("createCollection",this,[e],l=>{if(l!=null)return l instanceof C9.skipWrappedFunction?a(!0):c(l);a()})}),n=this&&this.schema&&this.schema.options&&this.schema.options.collectionOptions;n!=null&&(e=Object.assign({},n,e));let s=this&&this.schema&&this.schema.options&&this.schema.options.collation;s!=null&&(e=Object.assign({collation:s},e));let i=this&&this.schema&&this.schema.options&&this.schema.options.capped;i!=null&&(typeof i=="number"?e=Object.assign({capped:!0,size:i},e):typeof i=="object"&&(e=Object.assign({capped:!0},i,e)));let o=this&&this.schema&&this.schema.options&&this.schema.options.timeseries;o!=null&&(e=Object.assign({timeseries:o},e),e.expireAfterSeconds!=null||(e.expires!=null?Et.expires(e):this.schema.options.expireAfterSeconds!=null?e.expireAfterSeconds=this.schema.options.expireAfterSeconds:this.schema.options.expires!=null&&(e.expires=this.schema.options.expires,Et.expires(e))));let u=this&&this.schema&&this.schema.options&&this.schema.options.clusteredIndex;u!=null&&(e=Object.assign({clusteredIndex:{...u,unique:!0}},e));try{r||await this.db.createCollection(this.$__collection.collectionName,e)}catch(a){a!=null&&(a.name!=="MongoServerError"||a.code!==48)&&await new Promise((c,l)=>{let h={error:a};this.hooks.execPost("createCollection",this,[null],h,f=>{if(f!=null)return l(f);c()})})}return await new Promise((a,c)=>{this.hooks.execPost("createCollection",this,[this.$__collection],l=>{if(l!=null)return c(l);a()})}),this.$__collection};Q.syncIndexes=async function(e){if(Be(this,"syncIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new we("Model.syncIndexes() no longer accepts a callback");let r=this;try{await r.createCollection()}catch(i){if(i!=null&&(i.name!=="MongoServerError"||i.code!==48))throw i}let n=await r.diffIndexes(),s=await r.cleanIndexes({...e,toDrop:n.toDrop});return await r.createIndexes({...e,toCreate:n.toCreate}),s};Q.createSearchIndex=async function(e){return Be(this,"createSearchIndex"),await this.$__collection.createSearchIndex(e)};Q.updateSearchIndex=async function(e,r){return Be(this,"updateSearchIndex"),await this.$__collection.updateSearchIndex(e,r)};Q.dropSearchIndex=async function(e){return Be(this,"dropSearchIndex"),await this.$__collection.dropSearchIndex(e)};Q.listSearchIndexes=async function(e){return Be(this,"listSearchIndexes"),await(await this.$__collection.listSearchIndexes(e)).toArray()};Q.diffIndexes=async function(){if(typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new we("Model.syncIndexes() no longer accepts a callback");let e=this,r=await e.listIndexes().catch(u=>{if(u.codeName!="NamespaceNotFound")throw u});r===void 0&&(r=[]),r=npe(e,r);let n=e.schema,s=spe(e,n.indexes()),i=gpe(n,s,r),o=ype(n,s,r,i);return{toDrop:i,toCreate:o}};function ype(t,e,r,n){let s=[];for(let[i,o]of e){let u=!1,a=D9(t,vo(o));for(let c of r)if(!T9(c)&&pj(i,a,c)&&!n.includes(c.name)){u=!0;break}u||s.push(i)}return s}function gpe(t,e,r){let n=[];for(let s of r){let i=!1;if(!T9(s)&&!rpe(s,t.options)){for(let[o,u]of e){let a=D9(t,vo(u));if(cj(o,a,t.options),pj(o,a,s)){i=!0;break}}i||n.push(s.name)}}return n}Q.cleanIndexes=async function(e){if(Be(this,"cleanIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new we("Model.cleanIndexes() no longer accepts a callback");let r=this;if(Array.isArray(e&&e.toDrop))return await ij(e.toDrop,r,e);let n=await r.diffIndexes();return await ij(n.toDrop,r,e)};async function ij(t,e,r){if(t.length===0)return[];let n=e.$__collection;return r&&r.hideIndexes?await Promise.all(t.map(s=>e.db.db.command({collMod:n.collectionName,index:{name:s,hidden:!0}}))):await Promise.all(t.map(s=>n.dropIndex(s))),t}Q.listIndexes=async function(){if(Be(this,"listIndexes"),typeof arguments[0]=="function")throw new we("Model.listIndexes() no longer accepts a callback");return this.$__collection.buffer&&await new Promise(e=>{this.$__collection.addQueue(e)}),this.$__collection.listIndexes().toArray()};Q.ensureIndexes=async function(e){if(Be(this,"ensureIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new we("Model.ensureIndexes() no longer accepts a callback");await new Promise((r,n)=>{Epe(this,e,s=>{if(s!=null)return n(s);r()})})};Q.createIndexes=async function(e){if(Be(this,"createIndexes"),typeof arguments[0]=="function"||typeof arguments[1]=="function")throw new we("Model.createIndexes() no longer accepts a callback");return this.ensureIndexes(e)};function Epe(t,e,r){let n=t.schema.indexes(),s;e=e||{};let i=function(h){h&&!t.$caught&&t.emit("error",h),t.emit("index",h||s),r&&r(h||s)};for(let h of n)T9(h)&&Et.warn('mongoose: Cannot specify a custom index on `_id` for model name "'+t.modelName+'", MongoDB does not allow overwriting the default `_id` index. See https://bit.ly/mongodb-id-index');if(!n.length){_f(function(){i()});return}let o=function(h,f,p,m){t.emit("index-single-done",h,f,p,m)},u=function(h,f){t.emit("index-single-start",h,f)},a=t.schema._baseSchema,c=a?a.indexes():[];_f(function(){e._automatic&&!t.collection.collection?t.collection.addQueue(l,[]):l()});function l(){if(e._automatic&&(t.schema.options.autoIndex===!1||t.schema.options.autoIndex==null&&t.db.config.autoIndex===!1))return i();let h=n.shift();if(!h)return i();if(e._automatic&&h[1]._autoIndex===!1||c.find(y=>Et.deepEqual(y,h)))return l();let f=vo(h[0]),p=vo(h[1]);if(delete p._autoIndex,D9(t.schema,p),hj(t.schema,p),cj(f,p,t.schema.options),u(f,e),"background"in e&&(p.background=e.background),"toCreate"in e&&e.toCreate.length===0)return i();let m=null;try{m=t.collection.createIndex(f,p)}catch(y){s||(s=y),t.$caught||t.emit("error",y),o(y,f,p),l();return}m.then(y=>{o(null,f,p,y),l()},y=>{s||(s=y),t.$caught||t.emit("error",y),o(y,f,p),l()})}}Q.schema;Q.db;Q.collection;Q.$__collection;Q.base;Q.discriminators;Q.translateAliases=function(e,r){Be(this,"translateAliases");let n=(s,i)=>{let o,u=[],a=s.split("."),c=this.schema;for(let h in a){let f=a[h];if(c&&c.aliases[f]){if(o=c.aliases[f],r&&o in e)throw new we(`Provided object has both field "${f}" and its alias "${o}"`);u.push(o)}else o=f,u.push(f);c&&c.paths[o]?c=c.paths[o].schema:c=null}let l=u.join(".");return e instanceof Map?e.set(l,i):e[l]=i,l!==s&&(e instanceof Map?e.delete(s):delete e[s]),e};if(typeof e=="object"){if(e instanceof Map)for(let s of new Map(e))e=n(s[0],s[1]);else for(let s of Object.keys(e))if(e=n(s,e[s]),s[0]==="$")if(Array.isArray(e[s]))for(let i in e[s])e[s][i]=this.translateAliases(e[s][i]);else this.translateAliases(e[s]);return e}else return e};Q.deleteOne=function(e,r){if(Be(this,"deleteOne"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new we("Model.prototype.deleteOne() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return n.setOptions(r),n.deleteOne(e)};Q.deleteMany=function(e,r){if(Be(this,"deleteMany"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new we("Model.deleteMany() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return n.setOptions(r),n.deleteMany(e)};Q.find=function(e,r,n){if(Be(this,"find"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new we("Model.find() no longer accepts a callback");let s=new this.Query({},{},this,this.$__collection);return s.select(r),s.setOptions(n),s.find(e)};Q.findById=function(e,r,n){if(Be(this,"findById"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new we("Model.findById() no longer accepts a callback");return typeof e>"u"&&(e=null),this.findOne({_id:e},r,n)};Q.findOne=function(e,r,n){if(Be(this,"findOne"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new we("Model.findOne() no longer accepts a callback");let s=new this.Query({},{},this,this.$__collection);return s.select(r),s.setOptions(n),s.findOne(e)};Q.estimatedDocumentCount=function(e){return Be(this,"estimatedDocumentCount"),new this.Query({},{},this,this.$__collection).estimatedDocumentCount(e)};Q.countDocuments=function(e,r){if(Be(this,"countDocuments"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new we("Model.countDocuments() no longer accepts a callback");let n=new this.Query({},{},this,this.$__collection);return r!=null&&n.setOptions(r),n.countDocuments(e)};Q.distinct=function(e,r,n){if(Be(this,"distinct"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new we("Model.distinct() no longer accepts a callback");let s=new this.Query({},{},this,this.$__collection);return n!=null&&s.setOptions(n),s.distinct(e,r)};Q.where=function(e,r){Be(this,"where");let n=new this.Query({},{},this,this.$__collection).find({});return n.where.apply(n,arguments)};Q.$where=function(){Be(this,"$where");let e=new this.Query({},{},this,this.$__collection).find({});return e.$where.apply(e,arguments)};Q.findOneAndUpdate=function(t,e,r){if(Be(this,"findOneAndUpdate"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new we("Model.findOneAndUpdate() no longer accepts a callback");arguments.length===1&&(e=t,t=null,r=null);let n;r&&(n=r.fields||r.projection),e=vo(e,{depopulate:!0,_isNested:!0}),fj(e,r,this.schema.options.versionKey);let s=new this.Query({},{},this,this.$__collection);return s.select(n),s.findOneAndUpdate(t,e,r)};Q.findByIdAndUpdate=function(t,e,r){if(Be(this,"findByIdAndUpdate"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new we("Model.findByIdAndUpdate() no longer accepts a callback");return t instanceof qi&&(t=t._doc._id),this.findOneAndUpdate.call(this,{_id:t},e,r)};Q.findOneAndDelete=function(t,e){if(Be(this,"findOneAndDelete"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new we("Model.findOneAndDelete() no longer accepts a callback");let r;e&&(r=e.select,e.select=void 0);let n=new this.Query({},{},this,this.$__collection);return n.select(r),n.findOneAndDelete(t,e)};Q.findByIdAndDelete=function(t,e){if(Be(this,"findByIdAndDelete"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function")throw new we("Model.findByIdAndDelete() no longer accepts a callback");return this.findOneAndDelete({_id:t},e)};Q.findOneAndReplace=function(t,e,r){if(Be(this,"findOneAndReplace"),typeof arguments[0]=="function"||typeof arguments[1]=="function"||typeof arguments[2]=="function"||typeof arguments[3]=="function")throw new we("Model.findOneAndReplace() no longer accepts a callback");let n;r&&(n=r.select,r.select=void 0);let s=new this.Query({},{},this,this.$__collection);return s.select(n),s.findOneAndReplace(t,e,r)};Q.create=async function(e,r){if(typeof r=="function"||typeof arguments[2]=="function")throw new we("Model.create() no longer accepts a callback");Be(this,"create");let n,s=this.schema.options.discriminatorKey;if(Array.isArray(e))n=e,r=r!=null&&typeof r=="object"?r:{};else{let u=arguments[arguments.length-1];if(r={},typeof u=="function"||typeof r=="function"||typeof arguments[2]=="function")throw new we("Model.create() no longer accepts a callback");n=[...arguments],n.length>1&&!u&&n.pop(),n.length===2&&n[0]!=null&&n[1]!=null&&n[0].session==null&&u&&epe(u.session)==="ClientSession"&&!this.schema.path("session")&&Et.warn("WARNING: to pass a `session` to `Model.create()` in Mongoose, you **must** pass an array as the first argument. See: https://mongoosejs.com/docs/api/model.html#Model.create()")}if(n.length===0)return Array.isArray(e)?[]:null;let i=[],o=typeof r.aggregateErrors=="boolean"?!r.aggregateErrors:!0;if(delete r.aggregateErrors,r.ordered){for(let u=0;u<n.length;u++)try{let a=n[u],c=this.discriminators&&a[s]!=null?this.discriminators[a[s]]||mg(this.discriminators,a[s]):this;if(c==null)throw new we(`Discriminator "${a[s]}" not found for model "${this.modelName}"`);let l=a;l instanceof c||(l=new c(l)),await l.$save(r),i.push(l)}catch(a){if(!o)i.push(a);else throw a}return i}else if(!o)i=await Promise.allSettled(n.map(async u=>{let a=this.discriminators&&u[s]!=null?this.discriminators[u[s]]||mg(this.discriminators,u[s]):this;if(a==null)throw new we(`Discriminator "${u[s]}" not found for model "${this.modelName}"`);let c=u;return c instanceof a||(c=new a(c)),await c.$save(r),c})),i=i.map(u=>u.status==="fulfilled"?u.value:u.reason);else{let u=null;if(i=await Promise.all(n.map(async a=>{let c=this.discriminators&&a[s]!=null?this.discriminators[a[s]]||mg(this.discriminators,a[s]):this;if(c==null)throw new we(`Discriminator "${a[s]}" not found for model "${this.modelName}"`);try{let l=a;return l instanceof c||(l=new c(l)),await l.$save(r),l}catch(l){u||(u=l)}})),u)throw u}return!Array.isArray(e)&&n.length===1?i[0]:i};Q.watch=function(t,e){Be(this,"watch");let r=n=>{if(t=t||[],ape(t,this.schema,"fullDocument"),this.$__collection.buffer)this.$__collection.addQueue(()=>{if(this.closed)return;let s=this.$__collection.watch(t,e);n(null,s)});else{let s=this.$__collection.watch(t,e);n(null,s)}};return e=e||{},e.model=this,new vde(r,t,e)};Q.startSession=function(){return Be(this,"startSession"),this.db.startSession.apply(this.db,arguments)};Q.insertMany=async function(e,r){if(Be(this,"insertMany"),typeof r=="function"||typeof arguments[2]=="function")throw new we("Model.insertMany() no longer accepts a callback");return new Promise((n,s)=>{this.$__insertMany(e,r,(i,o)=>{if(i!=null)return s(i);n(o)})})};Q.$__insertMany=function(t,e,r){let n=this;typeof e=="function"&&(r=e,e=null),r=r||Et.noop,e=e||{};let s=e.limit||1e3,i=!!e.rawResult,o=typeof e.ordered=="boolean"?e.ordered:!0,u=typeof e.throwOnValidationError=="boolean"?e.throwOnValidationError:!1,a=!!e.lean,c=this.db.base.transactionAsyncLocalStorage?.getStore();(!e||!e.hasOwnProperty("session"))&&c?.session!=null&&(e={...e,session:c.session}),Array.isArray(t)||(t=[t]);let l=[],h=new Map,f=o?null:new Array(t.length),p=t.map((m,y)=>A=>{if(a)return _f(()=>A(null,m));let S=!1;if(!(m instanceof n)){if(m!=null&&typeof m!="object")return A(new kde(m,"arr."+y,"insertMany"));try{m=new n(m),S=!0}catch(O){return A(O)}}if(e.session!=null&&m.$session(e.session),a)return _f(()=>A(null,m));m.$validate(S?{_skipParallelValidateCheck:!0}:null).then(()=>{A(null,m)},O=>{if(o===!1)return l.push(O),h.set(O,y),f[y]=O,A(null,null);A(O)})});upe(p,s,function(m,y){if(m){r(m,null);return}let A=new Map,S=new Map;for(let b=0;b<y.length;++b)A.set(y[b],b);let O=y.filter(function(b){return b!=null});for(let b=0;b<O.length;++b)S.set(b,A.get(O[b]));if(l.length>0&&l.sort((b,N)=>h.get(b)-h.get(N)),O.length===0){if(u)return r(new yg(l,f,null,"insertMany"));if(i)return r(null,{acknowledged:!0,insertedCount:0,insertedIds:{},mongoose:{validationErrors:l}});r(null,[]);return}let D=a?O:O.map(function(b){return b.$__schema.options.versionKey&&(b[b.$__schema.options.versionKey]=0),(!e||e.timestamps!==!1)&&b.initializeTimestamps&&(!b.$__||b.$__.timestamps!==!1)&&b.initializeTimestamps(),b.$__hasOnlyPrimitiveValues()?b.$__toObjectShallow():b.toObject(b9)});n.$__collection.insertMany(D,e).then(b=>{if(!a)for(let N of O)N.$__reset(),Kl(N,!1);if(o===!1&&u&&l.length>0){for(let N=0;N<f.length;++N)f[N]===void 0&&(f[N]=y[N]);return r(new yg(l,f,b,"insertMany"))}if(i){if(o===!1){for(let N=0;N<f.length;++N)f[N]===void 0&&(f[N]=y[N]);b.mongoose={validationErrors:l,results:f}}return r(null,b)}if(e.populate!=null)return n.populate(O,e.populate).then(N=>{r(null,N)},N=>{throw N!=null&&(N.insertedDocs=O),N});r(null,O)},b=>{b.writeErrors==null&&(b.result&&b.result.result&&b.result.result.writeErrors)!=null&&(b.writeErrors=b.result.result.writeErrors);let N=b&&b.writeErrors,R=new Set((b&&b.writeErrors||[]).map(G=>G.index));if(b.writeErrors!=null)for(let G=0;G<b.writeErrors.length;++G){let z=S.get(b.writeErrors[G].index);b.writeErrors[G]={...b.writeErrors[G],index:z},o||(f[z]=b.writeErrors[G])}if(!o){for(let G=0;G<f.length;++G)f[G]===void 0&&(f[G]=y[G]);b.results=f}let F=-1;b.insertedDocs=O.filter((G,z)=>{let j=!N||R.has(z);if(o){if(F>-1)return z<F;j&&(F=z)}return!j}).map(function(z){return a||(z.$__reset(),Kl(z,!1)),z}),i&&o===!1&&(b.mongoose={validationErrors:l,results:f}),r(b,null)})})};function Kl(t,e){t.$isNew=e,t.$emit("isNew",e),t.constructor.emit("isNew",e);let r=t.$getAllSubdocs({useCache:!0});for(let n of r)n.$isNew=e,n.$emit("isNew",e)}Q.bulkWrite=async function(e,r){if(Be(this,"bulkWrite"),typeof r=="function"||typeof arguments[2]=="function")throw new we("Model.bulkWrite() no longer accepts a callback");r=r||{};let n=await new Promise((a,c)=>{this.hooks.execPre("bulkWrite",this,[e,r],l=>{if(l!=null)return l instanceof C9.skipWrappedFunction?a(l):c(l);a()})});if(n)return n.args[0];let s=r.ordered==null?!0:r.ordered;if(e.length===0)return tj();let i=e.map(a=>Jde(this,a,r)),o=this.db.base.transactionAsyncLocalStorage?.getStore();(!r||!r.hasOwnProperty("session"))&&o?.session!=null&&(r={...r,session:o.session});let u=null;if(s){await new Promise((a,c)=>{w9(i,(l,h)=>l(h),l=>{if(l)return c(l);a()})});try{u=await this.$__collection.bulkWrite(e,r)}catch(a){await new Promise((c,l)=>{let h={error:a};this.hooks.execPost("bulkWrite",this,[null],h,f=>{if(f!=null)return l(f);c()})})}}else{let a=i.length,c=[],l=[],h=[];await new Promise(m=>{for(let y=0;y<i.length;++y)i[y](A=>{A==null?c.push(y):(l.push({index:y,error:A}),h[y]=A),--a<=0&&m()})}),l=l.sort((m,y)=>m.index-y.index).map(m=>m.error);let f=c;if(c=c.sort().map(m=>e[m]),c.length===0){if(r.throwOnValidationError&&l.length)throw new yg(l,h,u,"bulkWrite");return tj()}let p;[u,p]=await this.$__collection.bulkWrite(c,r).then(m=>[m,null]).catch(m=>[null,m]),p&&(l.length>0&&(p.mongoose=p.mongoose||{},p.mongoose.validationErrors=l),await new Promise((m,y)=>{let A={error:p};this.hooks.execPost("bulkWrite",this,[null],A,S=>{if(S!=null)return y(S);m()})}));for(let m=0;m<f.length;++m)h[f[m]]=null;if(l.length>0){if(r.throwOnValidationError)throw new yg(l,h,u,"bulkWrite");u.mongoose=u.mongoose||{},u.mongoose.validationErrors=l,u.mongoose.results=h}}return await new Promise((a,c)=>{this.hooks.execPost("bulkWrite",this,[u],l=>{if(l!=null)return c(l);a()})}),u};Q.bulkSave=async function(e,r){if(r=r||{},r.timestamps!=null)for(let c of e)c.$__.saveOptions=c.$__.saveOptions||{},c.$__.saveOptions.timestamps=r.timestamps;else for(let c of e)c.$__.timestamps!=null&&(c.$__.saveOptions=c.$__.saveOptions||{},c.$__.saveOptions.timestamps=c.$__.timestamps);await Promise.all(e.map(_pe));let n=this.buildBulkWriteOperations(e,{skipValidation:!0,timestamps:r.timestamps}),{bulkWriteResult:s,bulkWriteError:i}=await this.bulkWrite(n,r).then(c=>({bulkWriteResult:c,bulkWriteError:null}),c=>({bulkWriteResult:null,bulkWriteError:c}));if(i!=null&&!(i instanceof xde))throw i;let o=s?.matchedCount??0,u=s?.insertedCount??0;if(n.length>0&&o+u<n.length&&!i)throw new fpe(this.modelName,e,s);let a=[];for(let c=0;c<e.length;c++){let l=e[c];(i&&i.writeErrors.find(f=>(f.err.op._id||f.err.op.q._id).toString()===l._doc._id.toString()))==null&&a.push(l)}if(await Promise.all(a.map(c=>Ape(c))),i&&i.writeErrors&&i.writeErrors.length)throw i;return s};function _pe(t){return new Promise((e,r)=>{t.schema.s.hooks.execPre("save",t,n=>{if(n){r(n);return}e()})})}function Ape(t){return new Promise((e,r)=>{t.$isNew&&Kl(t,!1),t.$__reset(),t.schema.s.hooks.execPost("save",t,[t],{},n=>{if(n){r(n);return}e()})})}Q.applyDefaults=function t(e){if(e==null)return e;if(e.$__!=null){jde(e,e.$__.fields,e.$__.exclude);for(let r of e.$getAllSubdocs())t(r,r.$__.fields,r.$__.exclude);return e}return Ude(e,this.schema),e};Q.applyVirtuals=function(e,r){return e==null||e.$__!=null||Yde(this.schema,e,r),e};Q.applyTimestamps=function(e,r){return e==null||e.$__!=null||Kde(this.schema,e,r),e};Q.castObject=function(e,r){r=r||{};let n={},s=this.schema,i=s.options.discriminatorKey;s.discriminators!=null&&e!=null&&e[i]!=null&&(s=dj(s,e[i])||s);let o=Object.keys(s.paths);for(let a of o){let c=s.path(a);if(!c||!c.$isMongooseArray)continue;let l=Ef(e,a);mj(o,l,a)}let u=null;for(let a of o){let c=s.path(a);if(c==null)continue;let l=Ef(e,a,void 0);if(l==null)continue;let h=a.indexOf(".")===-1?[a]:a.split("."),f=n;for(let p=0;p<h.length-1;++p)f[h[p]]==null&&(f[h[p]]=isNaN(h[p+1])?{}:[]),f=f[h[p]];if(!c.$isMongooseDocumentArray){if(c.$isSingleNested||c.$isMongooseDocumentArrayElement){try{l=Q.castObject.call(c.caster,l)}catch(p){r.ignoreCastErrors||(u=u||new O9,u.addError(a,p));continue}f[h[h.length-1]]=l;continue}try{l=c.cast(l),f[h[h.length-1]]=l}catch(p){r.ignoreCastErrors||(u=u||new O9,u.addError(a,p));continue}}}if(u!=null)throw u;return n};Q.buildBulkWriteOperations=function(e,r){if(!Array.isArray(e))throw new Error(`bulkSave expects an array of documents to be passed, received \`${e}\` instead`);i();let n=this.schema.options.discriminatorKey;return e.reduce((o,u,a)=>{if(!r.skipValidation){if(!(u instanceof qi))throw new Error(`documents.${a} was not a mongoose document, documents must be an array of mongoose documents (instanceof mongoose.Document).`);let f=u.validateSync();if(f)throw f}if(u.isNew){let f={insertOne:{document:u}};return Et.injectTimestampsOption(f.insertOne,r.timestamps),o.push(f),o}let l=u.$__delta();if(l!=null&&!Et.isEmptyObject(l[0])){let f=u.$__where(l[0]),p=l[1];gj(u,f);let m=this.schema.options.shardKey;if(m){let A=Object.keys(m),S=A.length;for(let O=0;O<S;++O)f[A[O]]=u[A[O]]}u[n]!=null&&!(n in f)&&(f[n]=u[n]),u.$__version(f,l);let y={updateOne:{filter:f,update:p}};return Et.injectTimestampsOption(y.updateOne,r.timestamps),o.push(y),o}return o},[]);function i(){r=r||{},r.skipValidation==null&&(r.skipValidation=!1)}};Q.hydrate=function(t,e,r){Be(this,"hydrate"),e!=null&&(t!=null&&t.$__!=null&&(t=t.toObject(b9)),t=Wde(t,e));let n=Mh().createModel(this,t,e);return n.$init(t,r),n};Q.updateMany=function(e,r,n){return Be(this,"updateMany"),M9(this,"updateMany",e,r,n)};Q.updateOne=function(e,r,n){return Be(this,"updateOne"),M9(this,"updateOne",e,r,n)};Q.replaceOne=function(e,r,n){Be(this,"replaceOne");let s=this&&this.schema&&this.schema.options&&this.schema.options.versionKey||null;return s&&!r[s]&&(r[s]=0),M9(this,"replaceOne",e,r,n)};function M9(t,e,r,n,s){let i=new t.Query({},{},t,t.collection);r instanceof qi?r=r.toObject():r=vo(r),s=typeof s=="function"?s:vo(s);let o=t&&t.schema&&t.schema.options&&t.schema.options.versionKey||null;return fj(n,s,o),i[e](r,n,s)}Q.aggregate=function(e,r){if(Be(this,"aggregate"),typeof r=="function"||typeof arguments[2]=="function")throw new we("Model.aggregate() no longer accepts a callback");let n=new Rde(e||[]);return n.model(this),r!=null&&n.option(r),n};Q.validate=async function(e,r,n){if((arguments.length<3||arguments.length===3&&typeof arguments[2]=="function")&&(n=e),typeof n=="function"||typeof arguments[3]=="function")throw new we("Model.validate() no longer accepts a callback");let s=this.schema,i=s.options.discriminatorKey;s.discriminators!=null&&e!=null&&e[i]!=null&&(s=dj(s,e[i])||s);let o=Object.keys(s.paths);if(r!=null){let c=typeof r=="string"?new Set(r.split(" ")):Array.isArray(r)?new Set(r):new Set(o);o=o.filter(l=>{if(r.pathsToSkip){if(Array.isArray(r.pathsToSkip)){if(r.pathsToSkip.find(p=>p==l))return!1}else if(typeof r.pathsToSkip=="string"&&r.pathsToSkip.includes(l))return!1}let h=l.split("."),f=h[0];for(let p of h){if(c.has(f))return!0;f+="."+p}return c.has(l)})}for(let c of o){let l=s.path(c);if(!l||!l.$isMongooseArray||l.$isMongooseDocumentArray)continue;let h=Ef(e,c);mj(o,h,c)}let u=null;o=new Set(o);try{e=this.castObject(e)}catch(c){u=c;for(let l of Object.keys(u.errors||{}))o.delete(l)}let a=o.size;return new Promise((c,l)=>{for(let f of o){let p=s.path(f);if(p==null){h();continue}let m=f.indexOf(".")===-1?[f]:f.split("."),y=e;for(let S=0;S<m.length-1;++S)y=y[m[S]];let A=Ef(e,f,void 0);p.doValidate(A,S=>{S&&(u=u||new O9,u.addError(f,S)),h()},n,{path:f})}function h(){--a<=0&&(u?l(u):c(e))}})};Q.populate=async function(e,r){if(Be(this,"populate"),typeof r=="function"||typeof arguments[2]=="function")throw new we("Model.populate() no longer accepts a callback");if(r=Et.populate(r),r.length===0)return e;let n=[];for(let s of r)n.push(wpe(this,e,s));return await Promise.all(n),e};var Spe=/\s?-_id\s?/,Ope=/\s?-_id\s?/g;async function wpe(t,e,r){if(r.strictPopulate==null&&(r._localModel!=null&&r._localModel.schema._userProvidedOptions.strictPopulate!=null?r.strictPopulate=r._localModel.schema._userProvidedOptions.strictPopulate:(r._localModel!=null&&t.base.options.strictPopulate!=null||t.base.options.strictPopulate!=null)&&(r.strictPopulate=t.base.options.strictPopulate)),Array.isArray(e)||(e=[e]),e.length===0||e.every(Et.isNullOrUndefined))return;let n=tpe(t,e,r);if(n instanceof we)throw n;let s=n.length,i=[];function o(l){return l!==void 0}let u=!1,a=[];for(let l=0;l<s;++l){let h=n[l],f=h.options.select,p=Et.array.flatten(h.ids,o);p=Et.array.unique(p);let m={};if(m.sort=h&&h.options&&h.options.options&&h.options.options.sort||void 0,m.excludeId=Spe.test(f)||f&&f._id===0,h.options&&h.options.options&&h.options.options.lean&&h.options.options.lean.transform&&(h.options.options._leanTransform=h.options.options.lean.transform,h.options.options.lean=!0),p.length===0||p.every(Et.isNullOrUndefined)){oj(t,[],h,m);continue}u=!0,typeof r.foreignField=="string"&&(h.foreignField.clear(),h.foreignField.add(r.foreignField));let y=Xde(p,h.match,h.foreignField,h.model,h.options.skipInvalidIds);m.excludeId&&(typeof f=="string"?f=f.replace(Ope," "):Array.isArray(f)?f=f.filter(A=>A!=="-_id"):(f={...f},delete f._id)),h.options.options&&h.options.options.limit!=null?m.originalLimit=h.options.options.limit:h.options.limit!=null&&(m.originalLimit=h.options.limit),a.push([h,y,f,m])}if(!u){if(n.length!==0)return;if(r.populate!=null){let l=Et.populate(r.populate).map(h=>Object.assign({},h,{path:r.path+"."+h.path}));return t.populate(e,l)}return}let c=[];for(let l of a)c.push(Cpe.apply(null,l).then(h=>{i=i.concat(h)}));await Promise.all(c);for(let l of a){let h=l[0],f=l[3];for(let p of i)h.options._childDocs.push(p);oj(t,i,h,f)}for(let l of a)cpe(l[0].foreignField,l[0].options,i);for(let l of a){let h=l[0];if(h.options&&h.options.options&&h.options.options._leanTransform)for(let f of i)h.options.options._leanTransform(f)}}function Cpe(t,e,r){let n=vo(t.options.populate),s=Object.assign({skip:t.options.skip,limit:t.options.limit,perDocumentLimit:t.options.perDocumentLimit},t.options.options);t.count&&delete s.skip,s.perDocumentLimit!=null?(s.limit=s.perDocumentLimit,delete s.perDocumentLimit):s.limit!=null&&(s.limit=s.limit*t.ids.length);let i=t.model.find(e,r,s);for(let o of t.foreignField)o!=="_id"&&i.selectedInclusively()&&!ipe(i._fields,o)&&i.select(o);if(t.count)for(let o of t.foreignField)i.select(o);if(n){t.model.baseModelName!=null&&(Array.isArray(n)?n.forEach(u=>{u.strictPopulate=!1}):typeof n=="string"?n={path:n,strictPopulate:!1}:n.strictPopulate=!1);let o=t.options._fullPath||t.options.path;if(Array.isArray(n))for(let u of n)u._fullPath=o+"."+u.path;else typeof n=="object"&&(n._fullPath=o+"."+n.path);i.populate(n)}return i.exec().then(o=>{for(let u of o)ope.set(u,t.model);return o})}function oj(t,e,r,n){let s=r.options,i=r.isVirtual,o=r.justOne,u,a=s&&s.options&&s.options.lean||!1,c=e.length,l={},h={},f,p,m=vo(r.allIds);for(let y=0;y<c;y++)if(p=e[y],p!=null)for(let A of r.foreignField){if(u=Et.getValue(A,p),Array.isArray(u)){u=Et.array.unique(Et.array.flatten(u));for(let S of u)S instanceof qi&&(S=S._doc._id),f=String(S),h[f]?Array.isArray(h[f])?(h[f].push(p),l[f].push(y)):(h[f]=[h[f],p],l[f]=[l[f],y]):i&&!o?(h[f]=[p],l[f]=[y]):(h[f]=p,l[f]=y)}else u instanceof qi&&(u=u._doc._id),f=String(u),h[f]?Array.isArray(h[f])?(h[f].push(p),l[f].push(y)):(i||h[f].constructor!==p.constructor||(h[f]instanceof qi?String(h[f]._doc._id):String(h[f]._id))!==(p instanceof qi?String(p._doc._id):String(p._id)))&&(h[f]=[h[f],p],l[f]=[l[f],y]):(h[f]=p,l[f]=y);a||(p.$__.wasPopulated=p.$__.wasPopulated||{value:u})}Qde({originalModel:t,rawIds:r.isVirtual?m:r.allIds,allIds:m,unpopulatedValues:r.unpopulatedValues,foreignField:r.foreignField,rawDocs:h,rawOrder:l,docs:r.docs,path:s.path,options:n,justOne:r.justOne,isVirtual:r.isVirtual,allOptions:r,populatedModel:r.model,lean:a,virtual:r.virtual,count:r.count,match:r.match})}Q.compile=function(e,r,n,s,i){if(r.options.versionKey!==!1&&!r.paths[r.options.versionKey]){let h={};h[r.options.versionKey]=Number,r.add(h)}let u;typeof e=="function"&&e.prototype instanceof Q?(u=e,e=u.name,r.loadClass(u,!1),u.prototype.$isMongooseModelPrototype=!0):u=function h(f,p,m){if(h.hooks.execPreSync("createModel",f),!(this instanceof h))return new h(f,p,m);let y=h.schema.options.discriminatorKey;if(h.discriminators==null||f==null||f[y]==null){Q.call(this,f,p,m);return}let A=h.discriminators[f[y]]||mg(h.discriminators,f[y]);if(A!=null)return new A(f,p,m);Q.call(this,f,p,m)},u.hooks=r.s.hooks.clone(),u.base=i,u.modelName=e,u.prototype instanceof Q||(Object.setPrototypeOf(u,Q),Object.setPrototypeOf(u.prototype,Q.prototype)),u.model=function(f){return this.db.model(f)},u.db=s,u.prototype.db=s,u.prototype[Sf]=s,u.discriminators=u.prototype.discriminators=void 0,u[yj]=!0,u.events=new A9,r._preCompile();let c={schemaUserProvidedOptions:r._userProvidedOptions||{},capped:r.options.capped,Promise:u.base.Promise,modelName:e};r.options.autoCreate!==void 0&&(c.autoCreate=r.options.autoCreate);let l=s.collection(n,c);return u.prototype.collection=l,u.prototype.$collection=l,u.prototype[Af]=l,u.prototype.$__setSchema(r),aj(u,r),lj(u,r),zde(u,r),Gde(u,r.s.hooks,r.statics),u.schema=u.prototype.$__schema,u.collection=l,u.$__collection=l,u.Query=function(){pg.apply(this,arguments)},Object.setPrototypeOf(u.Query.prototype,pg.prototype),u.Query.base=pg.base,u.Query.prototype.constructor=pg,u._applyQueryMiddleware(),bpe(u,r.query),u};Q.$__updateConnection=function(e){this.db=e,this.prototype.db=e,this.prototype[Sf]=e;let r=e.collection(this.collection.collectionName,this.collection.opts);this.prototype.collection=r,this.prototype.$collection=r,this.prototype[Af]=r,this.collection=r,this.$__collection=r};function bpe(t,e){for(let r in e)t.Query.prototype[r]=e[r]}Q.__subclass=function(e,r,n){let s=this,i=function l(h,f,p){if(!(this instanceof l))return new l(h,f,p);s.call(this,h,f,p)};if(Object.setPrototypeOf(i,s),Object.setPrototypeOf(i.prototype,s.prototype),i.db=e,i.prototype.db=e,i.prototype[Sf]=e,s[gf]=s[gf]||[],s[gf].push(i),s.discriminators!=null){i.discriminators={};for(let l of Object.keys(s.discriminators))i.discriminators[l]=s.discriminators[l].__subclass(s.db,s.discriminators[l].schema,n)}let o=r&&typeof r!="string"?r:s.prototype.$__schema,u=o.options||{},a=o._userProvidedOptions||{};n||(n=s.prototype.$__schema.get("collection")||Et.toCollectionName(s.modelName,this.base.pluralize()));let c={schemaUserProvidedOptions:a,capped:o&&u.capped};return i.prototype.collection=e.collection(n,c),i.prototype.$collection=i.prototype.collection,i.prototype[Af]=i.prototype.collection,i.collection=i.prototype.collection,i.$__collection=i.collection,i.init().catch(()=>{}),i};Q.recompileSchema=function(){if(this.prototype.$__setSchema(this.schema),this.schema._applyDiscriminators!=null)for(let e of this.schema._applyDiscriminators.keys())this.discriminator(e,this.schema._applyDiscriminators.get(e));delete this.schema._defaultToObjectOptionsMap,Vde(this.schema,new WeakSet,!0)};Q.inspect=function(){return`Model { ${this.modelName} }`};Q.namespace=function(){return this.db.name+"."+this.collection.collectionName};nj.inspect.custom&&(Q[nj.inspect.custom]=Q.inspect);Q._applyQueryMiddleware=function(){let e=this.Query,r=this.schema.s.hooks.filter(n=>{let s=Tpe(n);return n.name==="validate"?!!s.query:n.name==="deleteOne"||n.name==="updateOne"?!!s.query||Object.keys(s).length===0:n.query!=null||n.document!=null?!!n.query:!0});e.prototype._queryMiddleware=r};function Tpe(t){let e={};return t.hasOwnProperty("query")&&(e.query=t.query),t.hasOwnProperty("document")&&(e.document=t.document),e}_j.exports=Ej=Q});var Sj=g((Of,Aj)=>{"use strict";d();Aj.exports=Bpe;Of.pluralization=[[/human$/gi,"humans"],[/(m)an$/gi,"$1en"],[/(pe)rson$/gi,"$1ople"],[/(child)$/gi,"$1ren"],[/^(ox)$/gi,"$1en"],[/(ax|test)is$/gi,"$1es"],[/(octop|vir)us$/gi,"$1i"],[/(alias|status)$/gi,"$1es"],[/(bu)s$/gi,"$1ses"],[/(buffal|tomat|potat)o$/gi,"$1oes"],[/([ti])um$/gi,"$1a"],[/sis$/gi,"ses"],[/(?:([^f])fe|([lr])f)$/gi,"$1$2ves"],[/(hive)$/gi,"$1s"],[/([^aeiouy]|qu)y$/gi,"$1ies"],[/(x|ch|ss|sh)$/gi,"$1es"],[/(matr|vert|ind)ix|ex$/gi,"$1ices"],[/([m|l])ouse$/gi,"$1ice"],[/(kn|w|l)ife$/gi,"$1ives"],[/(quiz)$/gi,"$1zes"],[/^goose$/i,"geese"],[/s$/gi,"s"],[/([^a-z])$/,"$1"],[/$/gi,"s"]];var Dpe=Of.pluralization;Of.uncountables=["advice","energy","excretion","digestion","cooperation","health","justice","labour","machinery","equipment","information","pollution","sewage","paper","money","species","series","rain","rice","fish","sheep","moose","deer","news","expertise","status","media"];var Mpe=Of.uncountables;function Bpe(t){let e;return t=t.toLowerCase(),!~Mpe.indexOf(t)&&(e=Dpe.filter(function(r){return t.match(r[0])}),e[0])?t.replace(e[0][0],e[0][1]):t}});var Tj=g((S8e,bj)=>{"use strict";d();var Cj=Ie(),Oj=require("util"),wj=KS(),Du=class t extends Cj{constructor(){super(""),this.errors={}}toString(){return wj(this)}inspect(){return Object.assign(new Error(this.message),this)}addError(e,r){if(r instanceof t){let{errors:n}=r;for(let s of Object.keys(n))this.addError(s,n[s]);return}this.errors[e]=r,this.message=wj(this)}};Oj.inspect.custom&&(Du.prototype[Oj.inspect.custom]=Du.prototype.inspect);Object.defineProperty(Du.prototype,"toJSON",{enumerable:!1,writable:!1,configurable:!0,value:function(){return Object.assign({},this,{name:this.name,message:this.message})}});Object.defineProperty(Du.prototype,"name",{value:"SetOptionError"});var B9=class extends Cj{constructor(e){super(`"${e}" is not a valid option to set`)}};Du.SetOptionInnerError=B9;bj.exports=Du});var Mj=g(()=>{"use strict";d();var Dj=Ae();typeof jest<"u"&&!process.env.SUPPRESS_JEST_WARNINGS&&(typeof window<"u"&&Dj.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's default jsdom test environment. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning."),setTimeout.clock!=null&&typeof setTimeout.clock.Date=="function"&&Dj.warn("Mongoose: looks like you're trying to test a Mongoose app with Jest's mock timers enabled. Please make sure you read Mongoose's docs on configuring Jest to test Node.js apps: https://mongoosejs.com/docs/jest.html. Set the SUPPRESS_JEST_WARNINGS to true to hide this warning."))});var Rj=g((Nj,Fj)=>{"use strict";d();var Bj=Nn(),Ij=require("events").EventEmitter,Pj=Bn(),Ipe=Tl(),Ppe=Eo(),Npe=Pj.ValidationError,Fpe=Ky(),Rpe=yu();function xs(t,e,r,n,s){if(!(this instanceof xs))return new xs(t,e,r,n,s);if(Rpe(e)&&!e.instanceOfSchema&&(e=new Ipe(e)),e=this.schema||e,!this.schema&&e.options._id&&(t=t||{},t._id===void 0&&(t._id=new Ppe)),!e)throw new Pj.MissingSchemaError;this.$__setSchema(e),Bj.call(this,t,r,n,s),Fpe(this,e,{decorateDoc:!0});for(let i in e.methods)this[i]=e.methods[i];for(let i in e.statics)this[i]=e.statics[i]}xs.prototype=Object.create(Bj.prototype);xs.prototype.constructor=xs;xs.events=new Ij;xs.$emitter=new Ij;["on","once","emit","listeners","removeListener","setMaxListeners","removeAllListeners","addListener"].forEach(function(t){xs[t]=function(){return xs.$emitter[t].apply(xs.$emitter,arguments)}});xs.ValidationError=Npe;Fj.exports=Nj=xs});var $j=g((D8e,I9)=>{"use strict";d();var vpe=Nn(),$pe=Rj(),vj=!1;I9.exports=function(){return vj?$pe:vpe};I9.exports.setBrowser=function(t){vj=t}});var Hj=g((zj,Wj)=>{"use strict";d();var xpe=Nn(),kpe=require("events").EventEmitter,kj=pl(),$o=Tl(),qpe=Jt(),wf=jh(),Lpe=Wy(),_g=xa(),xj=jx(),jpe=Bl(),Upe=X2(),qj=u9(),Vpe=oC(),zpe=Rw(),Lj=v2(),Wpe=Sj(),P9=Ae(),Hpe=wC(),Gpe=Ba(),Kpe=s9(),Ype=fl().trusted,Qpe=KC(),Jpe=Mr(),Yl=Ie(),Eg=Tj(),Xpe=o9(),jj=Symbol.for("mongoose:default"),Uj=Symbol("mongoose:defaultConnection");Mj();var Zpe=/^[0-9A-Fa-f]{24}$/,{AsyncLocalStorage:Vj}=require("node:async_hooks");function oe(t){if(this.connections=[],this.nextConnectionId=0,this.models={},this.events=new kpe,this.__driver=Lj.get(),this.options=Object.assign({pluralization:!0,autoIndex:!0,autoCreate:!0,autoSearchIndex:!1},t),(P9.getOption("createInitialConnection",this.options)??!0)&&this.__driver!=null&&N9(this),this.options.pluralization&&(this._pluralize=Wpe),!t||!t[jj]){let r=this;this.Schema=function(){return this.base=r,$o.apply(this,arguments)},this.Schema.prototype=Object.create($o.prototype),Object.assign(this.Schema,$o),this.Schema.base=this,this.Schema.Types=Object.assign({},$o.Types)}else for(let r of["Schema","model"])this[r]=oe.prototype[r];this.Schema.prototype.base=this,t?.transactionAsyncLocalStorage&&(this.transactionAsyncLocalStorage=new Vj),Object.defineProperty(this,"plugins",{configurable:!1,enumerable:!0,writable:!1,value:Object.values(zpe).map(r=>[r,{deduplicate:!0}])})}oe.prototype.cast=Gpe;oe.prototype.STATES=_g;oe.prototype.ConnectionStates=_g;oe.prototype.driver=Lj;oe.prototype.setDriver=function(e){let r=this instanceof oe?this:pn;if(r.__driver===e)return r;if(r.connections&&r.connections.find(o=>o.readyState!==_g.disconnected)){let o="Cannot modify Mongoose driver if a connection is already open. Call `mongoose.disconnect()` before modifying the driver";throw new Yl(o)}if(r.__driver=e,Array.isArray(e.plugins))for(let o of e.plugins)typeof o=="function"&&r.plugin(o);let s=e.Connection,i=r.connections[0];if(r.connections=[new s(r)],r.connections[0].models=r.models,i==null)return r;for(let o of Object.values(r.models))o.db===i&&o.$__updateConnection(r.connections[0]);return r};oe.prototype.set=function(e,r){let n=this instanceof oe?this:pn;if(arguments.length===1&&typeof e!="object"){if(xj.indexOf(e)===-1){let o=new Eg;throw o.addError(e,new Eg.SetOptionInnerError(e)),o}return n.options[e]}let s={};arguments.length===2&&(s={[e]:r}),arguments.length===1&&typeof e=="object"&&(s=e);let i;for(let[o,u]of Object.entries(s)){if(xj.indexOf(o)===-1){i||(i=new Eg),i.addError(o,new Eg.SetOptionInnerError(o));continue}n.options[o]=u,o==="objectIdGetter"?u?Object.defineProperty(n.Types.ObjectId.prototype,"_id",{enumerable:!1,configurable:!0,get:function(){return this}}):delete n.Types.ObjectId.prototype._id:o==="transactionAsyncLocalStorage"?u&&!n.transactionAsyncLocalStorage?n.transactionAsyncLocalStorage=new Vj:!u&&n.transactionAsyncLocalStorage&&delete n.transactionAsyncLocalStorage:o==="createInitialConnection"&&(u&&!n.connection?N9(n):u===!1&&n.connection&&n.connection[Uj]&&n.connection.readyState===_g.disconnected&&Object.keys(n.connection.models).length===0&&n.connections.shift())}if(i)throw i;return n};oe.prototype.get=oe.prototype.set;oe.prototype.createConnection=function(e,r){let n=this instanceof oe?this:pn,s=n.__driver.Connection,i=new s(n);return n.connections.push(i),n.nextConnectionId++,n.events.emit("createConnection",i),arguments.length>0&&i.openUri(e,{...r,_fireAndForget:!0}),i};oe.prototype.connect=async function(e,r){if(typeof r=="function"||arguments.length>=3&&typeof arguments[2]=="function")throw new Yl("Mongoose.prototype.connect() no longer accepts a callback");let n=this instanceof oe?this:pn;return n.connection==null&&N9(n),n.connection.openUri(e,r).then(()=>n)};oe.prototype.disconnect=async function(){if(arguments.length>=1&&typeof arguments[0]=="function")throw new Yl("Mongoose.prototype.disconnect() no longer accepts a callback");let e=this instanceof oe?this:pn;e.connections.length<=0||await Promise.all(e.connections.map(n=>n.close()))};oe.prototype.startSession=function(){let e=this instanceof oe?this:pn;return e.connection.startSession.apply(e.connection,arguments)};oe.prototype.pluralize=function(e){let r=this instanceof oe?this:pn;return arguments.length>0&&(r._pluralize=e),r._pluralize};oe.prototype.model=function(e,r,n,s){let i=this instanceof oe?this:pn;if(typeof r=="string"&&(n=r,r=!1),arguments.length===1){let c=i.models[e];if(!c)throw new i.Error.MissingSchemaError(e);return c}if(P9.isObject(r)&&!(r instanceof $o)&&(r=new $o(r)),r&&!(r instanceof $o))throw new i.Error("The 2nd parameter to `mongoose.model()` should be a schema or a POJO");s=s||{};let o=r;r&&(i.get("cloneSchemas")&&(r=r.clone()),i._applyPlugins(r));let u=i.options.hasOwnProperty("overwriteModels")?i.options.overwriteModels:s.overwriteModels;if(i.models.hasOwnProperty(e)&&s.cache!==!1&&u!==!0){if(o&&o.instanceOfSchema&&o!==i.models[e].schema)throw new i.Error.OverwriteModelError(e);if(n&&n!==i.models[e].collection.name){let c=i.models[e];return r=c.prototype.schema,c.__subclass(i.connection,r,n)}return i.models[e]}if(r==null)throw new i.Error.MissingSchemaError(e);let a=i._model(e,r,n,s);return i.connection.models[e]=a,i.models[e]=a,a};oe.prototype._model=function(e,r,n,s){let i=this instanceof oe?this:pn,o;if(typeof e=="function"&&(o=e,e=o.name,!(o.prototype instanceof qj)))throw new i.Error("The provided class "+e+" must extend Model");r&&(i.get("cloneSchemas")&&(r=r.clone()),i._applyPlugins(r)),(r==null||!("pluralization"in r.options))&&(r.options.pluralization=i.options.pluralization),n||(n=r.get("collection")||P9.toCollectionName(e,i.pluralize())),Xpe(r);let u=s.connection||i.connection;if(o=i.Model.compile(o||e,r,n,u,i),o.init().catch(function(){}),u.emit("model",o),r._applyDiscriminators!=null)for(let a of r._applyDiscriminators.keys()){let{schema:c,options:l}=r._applyDiscriminators.get(a);o.discriminator(a,c,l)}return o};oe.prototype.deleteModel=function(e){let r=this instanceof oe?this:pn;return r.connection.deleteModel(e),delete r.models[e],r};oe.prototype.modelNames=function(){let e=this instanceof oe?this:pn;return Object.keys(e.models)};oe.prototype._applyPlugins=function(e,r){let n=this instanceof oe?this:pn;r=r||{},r.applyPluginsToDiscriminators=n.options&&n.options.applyPluginsToDiscriminators||!1,r.applyPluginsToChildSchemas=typeof(n.options&&n.options.applyPluginsToChildSchemas)=="boolean"?n.options.applyPluginsToChildSchemas:!0,Vpe(e,n.plugins,r,"$globalPluginsApplied")};oe.prototype.plugin=function(e,r){let n=this instanceof oe?this:pn;return n.plugins.push([e,r]),n};oe.prototype.__defineGetter__("connection",function(){return this.connections[0]});oe.prototype.__defineSetter__("connection",function(t){t instanceof this.__driver.Connection&&(this.connections[0]=t,this.models=t.models)});oe.prototype.connections;oe.prototype.nextConnectionId;oe.prototype.Aggregate=Kpe;Object.defineProperty(oe.prototype,"Collection",{get:function(){return this.__driver.Collection},set:function(t){this.__driver.Collection=t}});Object.defineProperty(oe.prototype,"Connection",{get:function(){return this.__driver.Connection},set:function(t){t!==this.__driver.Connection&&(this.__driver.Connection=t)}});oe.prototype.version=Hpe.version;oe.prototype.Mongoose=oe;oe.prototype.Schema=$o;oe.prototype.SchemaType=qpe;oe.prototype.SchemaTypes=$o.Types;oe.prototype.VirtualType=Lpe;oe.prototype.Types=jpe;oe.prototype.Query=Upe;oe.prototype.Model=qj;oe.prototype.Document=xpe;oe.prototype.DocumentProvider=$j();oe.prototype.ObjectId=wf.ObjectId;oe.prototype.isValidObjectId=function(e){return(this instanceof oe?this:pn).Types.ObjectId.isValid(e)};oe.prototype.isObjectIdOrHexString=function(e){return Jpe(e,"ObjectId")||typeof e=="string"&&Zpe.test(e)};oe.prototype.syncIndexes=function(e){return(this instanceof oe?this:pn).connection.syncIndexes(e)};oe.prototype.Decimal128=wf.Decimal128;oe.prototype.Mixed=wf.Mixed;oe.prototype.Date=wf.Date;oe.prototype.Number=wf.Number;oe.prototype.Error=Yl;oe.prototype.MongooseError=Yl;oe.prototype.now=function(){return new Date};oe.prototype.CastError=Yl.CastError;oe.prototype.SchemaTypeOptions=Xn();oe.prototype.mquery=HC();oe.prototype.sanitizeFilter=Qpe;oe.prototype.trusted=Ype;oe.prototype.skipMiddlewareFunction=kj.skipWrappedFunction;oe.prototype.overwriteMiddlewareResult=kj.overwriteResult;oe.prototype.omitUndefined=lw();function N9(t){if(t.connection)return;let e=t.createConnection();e[Uj]=!0,e.models=t.models}var pn=Wj.exports=zj=new oe({[jj]:!0})});var Yj=g((I8e,Kj)=>{"use strict";d();var Gj=qx();v2().set(Gj);var F9=Hj();F9.setDriver(Gj);F9.Mongoose.prototype.mongo=da();Kj.exports=F9});var Qj=g((N8e,ye)=>{"use strict";d();var ge=Yj();ye.exports=ge;ye.exports.default=ge;ye.exports.mongoose=ge;ye.exports.cast=ge.cast;ye.exports.STATES=ge.STATES;ye.exports.setDriver=ge.setDriver;ye.exports.set=ge.set;ye.exports.get=ge.get;ye.exports.createConnection=ge.createConnection;ye.exports.connect=ge.connect;ye.exports.disconnect=ge.disconnect;ye.exports.startSession=ge.startSession;ye.exports.pluralize=ge.pluralize;ye.exports.model=ge.model;ye.exports.deleteModel=ge.deleteModel;ye.exports.modelNames=ge.modelNames;ye.exports.plugin=ge.plugin;ye.exports.connections=ge.connections;ye.exports.version=ge.version;ye.exports.Aggregate=ge.Aggregate;ye.exports.Mongoose=ge.Mongoose;ye.exports.Schema=ge.Schema;ye.exports.SchemaType=ge.SchemaType;ye.exports.SchemaTypes=ge.SchemaTypes;ye.exports.VirtualType=ge.VirtualType;ye.exports.Types=ge.Types;ye.exports.Query=ge.Query;ye.exports.Model=ge.Model;ye.exports.Document=ge.Document;ye.exports.ObjectId=ge.ObjectId;ye.exports.isValidObjectId=ge.isValidObjectId;ye.exports.isObjectIdOrHexString=ge.isObjectIdOrHexString;ye.exports.syncIndexes=ge.syncIndexes;ye.exports.Decimal128=ge.Decimal128;ye.exports.Mixed=ge.Mixed;ye.exports.Date=ge.Date;ye.exports.Number=ge.Number;ye.exports.Error=ge.Error;ye.exports.MongooseError=ge.MongooseError;ye.exports.now=ge.now;ye.exports.CastError=ge.CastError;ye.exports.SchemaTypeOptions=ge.SchemaTypeOptions;ye.exports.mongo=ge.mongo;ye.exports.mquery=ge.mquery;ye.exports.sanitizeFilter=ge.sanitizeFilter;ye.exports.trusted=ge.trusted;ye.exports.skipMiddlewareFunction=ge.skipMiddlewareFunction;ye.exports.overwriteMiddlewareResult=ge.overwriteMiddlewareResult});var R9=g((R8e,Xj)=>{d();var Jj=Qj(),e0e=new Jj.Schema({name:String,owner:String,tags:[String],date:{type:Date,default:Date.now},isPublished:Boolean,duration:Number}),t0e=Jj.model("Items",e0e);Xj.exports={Item:t0e}});var Mu={};VU(Mu,{default:()=>r0e});module.exports=zU(Mu);d();d();(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="324512be-cf74-4c04-8ebc-c187d4486826",t._sentryDebugIdIdentifier="sentry-dbid-324512be-cf74-4c04-8ebc-c187d4486826")}catch{}})();var Zj=q9(R9());Iu(Mu,q9(R9()),module.exports);var r0e=Zj.default;
