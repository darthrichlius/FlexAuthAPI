const mongoose=require("mongoose"),appDebugger=require("../utils/debugger");let dbClient;const createConnection=(o,n)=>{try{const e=mongoose.createConnection(o,n);return e.on("close",()=>appDebugger.info("MongoDb: Connection CLOSED")),e.on("connected",()=>appDebugger.info("MongoDB: CONNECTED")),e}catch{appDebugger.error("Could not connect to MongoDB"),process.env.ENV!=="development"&&process.exit(1)}},connect=()=>{const o={serverSelectionTimeoutMS:process.env.MONGO_TIMEOUTMS||3e4,connectTimeoutMS:process.env.MONGO_TIMEOUTMS||3e4};return dbClient=createConnection(process.env.MONGO_URI,o),dbClient},getClient=()=>dbClient||connect();module.exports={connect,getClient};
